{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-operation-monitor\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-operation-monitor\\index.vue","mtime":1609847106948},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7DQogIGdldFN0YXR1cywNCiAgcHJvZHVjdE9wZXJhdGlvbk1vbml0b3JMaXN0LA0KICBxdWVyeUF1ZGl0Tm90ZXMsDQogIHJldmlld0hpc3RvcnkNCn0gZnJvbSAnQC9hcGkvYmFzaWNpbmZvL3Byb2R1Y3RPcGVyYXRpb25Nb25pdG9yJw0KaW1wb3J0IHtmaW5kQWxsUHJvZHVjdEJ5UGREZXRhaWxUeXBlfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcGRjbGFpbXZlcmlmaWNhdGlvbiINCmltcG9ydCB7Y2xvc2VWaXNpdFRhZ30gZnJvbSAiQC91dGlscy90YWdzVmlldyINCmltcG9ydCB7ZmluaXNoUHJvZHVjdE9wZXJhdGlvbmFsRGVmfSBmcm9tICdAL2FwaS93b3JrZmxvdy93b3JrZmxvdycNCg0KbGV0IF90aGlzDQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAncHJvZHVjdE9wZXJhdGlvbk1vbml0b3InLA0KICAgIGZpbHRlcnM6IHsNCiAgICAgIGZpbHRlcl9wZEF1ZGl0VHlwZShjb2RlKSB7DQogICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRBdWRpdFR5cGUnLCBjb2RlKQ0KICAgICAgfSwNCiAgICAgIGZpbHRlcl9wZE5vZGVDb2RlKHZhbCkgew0KICAgICAgICBsZXQgcmV0dXJuVGV4dCA9ICcnOw0KICAgICAgICBzd2l0Y2ggKHZhbCkgew0KICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RSdWxlRmxhZyc6DQogICAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgeinhOWImeiuouatoyc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICdwcm9kdWN0Rm9ybXVsYUZsYWcnOg0KICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4HlhazlvI/orqLmraMnOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAncHJvZHVjdEluZm9GbGFnJzoNCiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5Lqn5ZOB5qGG5p625a6a5LmJJzsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJzoNCiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5Lqn5ZOB6ZSA5ZSu5L+h5oGvJzsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RDb3ZlckZsYWcnOg0KICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4Hmib/kv53kv6Hmga8nOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnOg0KICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4HmoLjkv53kv6Hmga8nOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAncHJvZHVjdFByZXNlcnZhdGlvbkZsYWcnOg0KICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4Hkv53lhajkv6Hmga8nOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAncHJvZHVjdEhlUGVpRmxhZyc6DQogICAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgeaguOi1lOS/oeaBryc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICdwcm9kdWN0UmVuZXdhbEZsYWcnOg0KICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4Hnu63mnJ/nu63kv53kv6Hmga8nOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJldHVyblRleHQ7DQogICAgICB9LA0KICAgICAgZmlsdGVyX0Z1bmNOb2RlTmFtZSh2YWwpIHsNCiAgICAgICAgbGV0IGZ1bmNOb2RlID0gSlNPTi5wYXJzZSh2YWwpOw0KICAgICAgICBsZXQgcmV0dXJuUG9pbnRzID0gW107DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnVuY05vZGUubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IF90aGlzLm5vZGVPcHRpb25zLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICBpZiAoZnVuY05vZGVbaV0gPT09IF90aGlzLm5vZGVPcHRpb25zW2pdLmtleSkgew0KICAgICAgICAgICAgICByZXR1cm5Qb2ludHMucHVzaChfdGhpcy5ub2RlT3B0aW9uc1tqXS5sYWJlbCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHJldHVyblBvaW50cy5sZW5ndGg+MCl7DQogICAgICAgICAgcmV0dXJuIHJldHVyblBvaW50czsNCiAgICAgICAgfWVsc2Ugew0KICAgICAgICAgIHJldHVybiB2YWw7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBnZXRQZEF1ZGl0Q29uYyhzdGF0ZSkgew0KICAgICAgICBpZiAoc3RhdGUgPT0gJ04nKSB7DQogICAgICAgICAgc3RhdGUgPSAn5LiN6YCa6L+HJw0KICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09ICdZJykgew0KICAgICAgICAgIHN0YXRlID0gJ+mAmui/hycNCiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSAnWCcpIHsNCiAgICAgICAgICBzdGF0ZSA9ICflj5bmtojmnKzmrKHlrprkuYknDQogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gJ1onKSB7DQogICAgICAgICAgc3RhdGUgPSAn5Lqn5ZOB5pqC5YGcJw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBzdGF0ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgICB3YXRjaDp7DQogICAgICAgICdvcGVyYXRpb25Nb25pdG9yVGFibGUnKCl7DQogICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRpb25Nb25pdG9yVGFibGUubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVySGFuZGxlckxpc3QxID0gW107DQogICAgICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25Nb25pdG9yVGFibGUuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckhhbmRsZXJMaXN0MS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0Q29kZU5hbWUoJ3BkQXVkaXRUeXBlJyx2YWwuZGVmVHlwZSx0cnVlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwuZGVmVHlwZQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5maWx0ZXJIYW5kbGVyTGlzdDEgPSB0aGlzLmZpbHRlckhhbmRsZXJMaXN0MS5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgZWxlbWVudCkgew0KICAgICAgICAgICAgICAgIGlmICghcHJldi5maW5kKGVsID0+IGVsLnRleHQgPT0gZWxlbWVudC50ZXh0KSkgew0KICAgICAgICAgICAgICAgICAgICBwcmV2LnB1c2goZWxlbWVudCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBwcmV2Ow0KICAgICAgICAgICAgfSwgW10pOw0KICAgICAgICB9LA0KICAgICAgICAndmFsdWUxJygpew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUxKSB7DQogICAgICAgICAgICAgICAgbGV0IGFyciA9IHRoaXMudmFsdWUxOw0KICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLmNoYW5nZUVuZERhdGUgPSBhcnJbMV07DQogICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMuY2hhbmdlU3RhcnREYXRlID0gYXJyWzBdOw0KICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLmNoYW5nZUVuZERhdGUgPSB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMuY2hhbmdlU3RhcnREYXRlID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAgICd2YWx1ZTInKCl7DQogICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlMil7DQogICAgICAgICAgICAgICAgICBsZXQgYXJyID0gdGhpcy52YWx1ZTI7DQogICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5wZEFwcGx5U3RhcnREYXRlPWFyclswXTsNCiAgICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLnBkQXBwbHlFbmREYXRlPWFyclsxXTsNCiAgICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMucGRBcHBseVN0YXJ0RGF0ZT11bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5wZEFwcGx5RW5kRGF0ZT11bmRlZmluZWQ7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgIH0sDQogICAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICBfdGhpcyA9IHRoaXMNCiAgICAgIHJldHVybiB7DQogICAgICAgICAgZmlsdGVySGFuZGxlckxpc3QxOltdLA0KICAgICAgICAgIG5vZGVPcHRpb25zOiBbDQogICAgICAgICAgeydrZXknOiAncHJvZHVjdEluZm9GbGFnJywgJ2xhYmVsJzogJ+S6p+WTgeahhuaetuWumuS5iSd9LA0KICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJywgJ2xhYmVsJzogJ+S6p+WTgemUgOWUruS/oeaBryd9LA0KICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RDb3ZlckZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5om/5L+d5L+h5oGvJ30sDQogICAgICAgICAgeydrZXknOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5qC45L+d5L+h5oGvJ30sDQogICAgICAgICAgeydrZXknOiAncHJvZHVjdFJlbmV3YWxGbGFnJywgJ2xhYmVsJzogJ+S6p+WTgee7reacn+e7reS/neS/oeaBryd9LA0KICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RQcmVzZXJ2YXRpb25GbGFnJywgJ2xhYmVsJzogJ+S6p+WTgeS/neWFqOS/oeaBryd9LA0KICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RIZVBlaUZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5qC46LWU5L+h5oGvJ30sDQogICAgICAgICAgeydrZXknOiAncHJvZHVjdFJ1bGVGbGFnJywgJ2xhYmVsJzogJ+S6p+WTgeinhOWImeiuouatoyd9LA0KICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RGb3JtdWxhRmxhZycsICdsYWJlbCc6ICfkuqflk4HlhazlvI/orqLmraMnfV0sDQogICAgICAgICAgcGlja2VyT3B0aW9uczogew0KICAgICAgICAgICAgICBzaG9ydGN1dHM6IFt7DQogICAgICAgICAgICAgICAgICB0ZXh0OiAn5pyA6L+R5LiA5ZGoJywNCiAgICAgICAgICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgc3RhcnQuc2V0VGltZShzdGFydC5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogNyk7DQogICAgICAgICAgICAgICAgICAgICAgcGlja2VyLiRlbWl0KCdwaWNrJywgW3N0YXJ0LCBlbmRdKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgdGV4dDogJ+acgOi/keS4gOS4quaciCcsDQogICAgICAgICAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0LnNldFRpbWUoc3RhcnQuZ2V0VGltZSgpIC0gMzYwMCAqIDEwMDAgKiAyNCAqIDMwKTsNCiAgICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBbc3RhcnQsIGVuZF0pOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICB0ZXh0OiAn5pyA6L+R5LiJ5Liq5pyIJywNCiAgICAgICAgICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgc3RhcnQuc2V0VGltZShzdGFydC5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogOTApOw0KICAgICAgICAgICAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIFtzdGFydCwgZW5kXSk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH1dDQogICAgICAgICAgfSwNCiAgICAgICAgICB2YWx1ZTE6JycsDQogICAgICAgICAgdmFsdWUyOicnLA0KICAgICAgICAvL+WIneWni+WMluihqOagvA0KICAgICAgICBvcGVyYXRpb25Nb25pdG9yVGFibGU6IFtdLA0KICAgICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgICB0YWJsZURhdGFEZXRhaWxzOiBbXSwNCiAgICAgICAgdGFibGVEYXRhQXVkaXRIaXN0b3J5OiBbXSwNCiAgICAgICAgdGFibGVEYXRhQXVkaXREZXRhaWxzOiBbXSwNCg0KICAgICAgICAvL+WIneWni+WMluS4i+aLiemAiQ0KICAgICAgICBwcm9kdWN0T3B0aW9uTGlzdDogW10sDQogICAgICAgIGVkaXRpb25PcHRpb25MaXN0OiBbXSwNCiAgICAgICAgZGV0YWlsVHlwZU9wdGlvbkxpc3Q6W10sDQoNCiAgICAgICAgc2VsZWN0T3BlcmF0aW9uOiB7fSwNCiAgICAgICAgc2VsZWN0Um93OiB7fSwNCiAgICAgICAgc3RhdHVzRGF0YToge30sDQogICAgICAgIHN0YXR1c0RhdGFMaXN0OiB7fSwNCiAgICAgICAgc3RhdHVzRGF0YUNoaWxkcmVuTGlzdDp7fSwNCiAgICAgICAgcGRJbmZvSWQ6ICcnLA0KICAgICAgICBwZFByb2Nlc3NJZDogJycsDQogICAgICAgIG1vZHVsZU5vZGU6ICcnLA0KICAgICAgICBzaG93U3RhdGU6ZmFsc2UsDQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIHBkUmVnaW9uVHlwZTogJycsDQogICAgICAgICAgcGRDb2RlOiAnJywNCiAgICAgICAgICBwZEVkaXRpb246ICcnLA0KICAgICAgICAgIGRlZlR5cGU6ICcnLA0KICAgICAgICAgIHBkQXBwbHlTdGFydERhdGU6IHVuZGVmaW5lZCwNCiAgICAgICAgICBwZEFwcGx5RW5kRGF0ZTogdW5kZWZpbmVkLA0KICAgICAgICAgIGNoYW5nZVN0YXJ0RGF0ZTogdW5kZWZpbmVkLA0KICAgICAgICAgIGNoYW5nZUVuZERhdGU6IHVuZGVmaW5lZCwNCiAgICAgICAgICBpc1Rlc3RSZXR1cm46ICcnLA0KICAgICAgICAgIGlzUmV2aWV3UmV0dXJuOiAnJw0KICAgICAgICB9LA0KICAgICAgICAvL+S6p+WTgeiQpei/kOebkeaOp+WumuS5ieWujOavleS8oOWPgg0KICAgICAgICBkYXRhOiB7DQogICAgICAgICAgcHJvZHVjdFRlc3RGbGFnOiAnMScsDQogICAgICAgICAgcHJvY2Vzc0luc3RhbmNlSWQ6ICcnDQogICAgICAgIH0sDQogICAgICAgIC8v5Yqo5oCB5pi+56S6DQogICAgICAgIHNob3dPcGVyYXRpb25Qcm9ncmVzczogZmFsc2UsDQogICAgICAgIGRpYWxvZ1Zpc2libGVPZkF1ZGl0SGlzdG9yeTogZmFsc2UsDQogICAgICAgIG5lZWRTaG93TW9yZV9vcGVyYXRpb246IGZhbHNlLA0KICAgICAgICBzaG93QWxsX29wZXJhdGlvbjogZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIGNvbXB1dGVkOiB7fSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgdGhpcy5wYXJhbXMucGRBcHBseUVuZERhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgdGhpcy5pbml0T3BlcmF0aW9uTW9uaXRvclByb2R1Y3QoKQ0KICAgICAgbGV0IHJvdz10aGlzLmdldEpzb25EYXRhKCJvcGVyYXRpb25TZWxlY3QiKQ0KICAgICAgaWYocm93LmlkIT11bmRlZmluZWQpIHsNCiAgICAgICAgdGhpcy5zZWxlY3RSb3cgPSByb3cNCiAgICAgICAgdGhpcy5zZWxlY3RPcGVyYXRpb249cm93LmlkDQogICAgICAgIHRoaXMucGRJbmZvSWQgPSByb3cuaWQNCiAgICAgICAgdGhpcy5wZFByb2Nlc3NJZCA9IHJvdy5wZFByb2Nlc3NJZA0KICAgICAgICB0aGlzLnNob3dPcGVyYXRpb25Qcm9ncmVzcyA9IHRydWUNCiAgICAgICAgdGhpcy5jaGVja1Byb2Nlc3MoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgZ2V0Q29kZU5hbWVzKGNvZGUpew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29kZU5hbWVzKCdwZEF1ZGl0VHlwZScsY29kZSk7DQogICAgICAgIH0sDQogICAgICAgIGZpbHRlckhhbmRsZXIodmFsdWUsIHJvdywgY29sdW1uKSB7DQogICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsncHJvcGVydHknXTsNCiAgICAgICAgICAgIHJldHVybiByb3dbcHJvcGVydHldID09PSB2YWx1ZTsNCiAgICAgICAgfSwNCiAgICAgIGhhbmRTZWFyY2goKSB7DQogICAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKTsNCiAgICAgICAgdGhpcy5zZWxlY3RPcGVyYXRpb24gPSB7fQ0KICAgICAgICB0aGlzLnNob3dPcGVyYXRpb25Qcm9ncmVzcyA9IGZhbHNlDQogICAgICB9LA0KICAgICAgaW5pdE9wZXJhdGlvbk1vbml0b3JQcm9kdWN0KCkgew0KICAgICAgIHByb2R1Y3RPcGVyYXRpb25Nb25pdG9yTGlzdCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEodGhpcy5wYXJhbXMpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVjb3JkczsNCiAgICAgICAgICAvL+iOt+WPluS6p+WTgee8lueggQ0KICAgICAgICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiB0aGlzLnRhYmxlRGF0YSkgew0KICAgICAgICAgICAgbGV0IGZsYWcgPSBmYWxzZQ0KICAgICAgICAgICAgZm9yIChjb25zdCBwcm9kdWN0T3B0aW9uIG9mIHRoaXMucHJvZHVjdE9wdGlvbkxpc3QpIHsNCiAgICAgICAgICAgICAgaWYgKHByb2R1Y3RPcHRpb24ucGRDb2RlID09PSBwcm9kdWN0LnBkQ29kZSkgew0KICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFmbGFnKSB7DQogICAgICAgICAgICAgIHRoaXMucHJvZHVjdE9wdGlvbkxpc3QucHVzaChwcm9kdWN0KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICAvL+WxleekuuabtOWkmuaIluiAheaUtui1tw0KICAgICAgICAgLyogdGhpcy5zaG93QWxsX29wZXJhdGlvbiA9IGZhbHNlDQogICAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA+IDEwKSB7DQogICAgICAgICAgICB0aGlzLm9wZXJhdGlvbk1vbml0b3JUYWJsZSA9IHRoaXMudGFibGVEYXRhLnNsaWNlKDAsIDEwKQ0KICAgICAgICAgICAgdGhpcy5uZWVkU2hvd01vcmVfb3BlcmF0aW9uID0gdHJ1ZQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm9wZXJhdGlvbk1vbml0b3JUYWJsZSA9IHRoaXMudGFibGVEYXRhDQogICAgICAgICAgICB0aGlzLm5lZWRTaG93TW9yZV9vcGVyYXRpb24gPSBmYWxzZQ0KICAgICAgICAgIH0qLw0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIHNlbGVjdGVkRGV0YWlsVHlwZUNoYW5nZWQodmFsKXsNCiAgICAgICAgZGVidWdnZXINCiAgICAgICAgbGV0IHBhcmFtPXsNCiAgICAgICAgICBwZFJlZ2lvblR5cGU6dmFsDQogICAgICAgIH0NCiAgICAgICAgaWYoIiIuZW5kc1dpdGgodmFsKSB8fCB2YWw9PXVuZGVmaW5lZCl7DQogICAgICAgICAgdGhpcy5oYW5kU2VhcmNoKCkNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZygidGhpcy50YWJsZURhdGEiLHRoaXMudGFibGVEYXRhKTsNCiAgICAgICAgZmluZEFsbFByb2R1Y3RCeVBkRGV0YWlsVHlwZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKHJlc3BvbnNlID0+ew0KICAgICAgICAgIHRoaXMucHJvZHVjdE9wdGlvbkxpc3QgPVtdDQogICAgICAgICAgdGhpcy5kZXRhaWxUeXBlT3B0aW9uTGlzdCA9cmVzcG9uc2UuZGF0YQ0KICAgICAgICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiB0aGlzLmRldGFpbFR5cGVPcHRpb25MaXN0KSB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IHByb2R1Y3RPcHRpb24gb2YgIHRoaXMudGFibGVEYXRhKSB7DQogICAgICAgICAgICAgIGlmIChwcm9kdWN0T3B0aW9uLnBkQ29kZSA9PT0gcHJvZHVjdC5wZENvZGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RPcHRpb25MaXN0LnB1c2gocHJvZHVjdE9wdGlvbikNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBzZWxlY3RlZFBkQ29kZUNoYW5nZWQocGRDb2RlKSB7DQogICAgICAgIHRoaXMucGFyYW1zLnBkRWRpdGlvbiA9ICcnDQogICAgICAgIGNvbnN0IHByb2R1Y3RPcHRpb25MaXN0X2ZpbHRlciA9IHRoaXMuXy5maWx0ZXIodGhpcy5vcGVyYXRpb25Nb25pdG9yVGFibGUsIHsncGRDb2RlJzogcGRDb2RlfSkNCiAgICAgICAgdGhpcy5lZGl0aW9uT3B0aW9uTGlzdCA9IHRoaXMuXy5tYXAocHJvZHVjdE9wdGlvbkxpc3RfZmlsdGVyLCAncGRFZGl0aW9uJykNCiAgICAgIH0sDQogICAgICBzaG93TW9yZV9vcGVyYXRpb24oKSB7DQogICAgICAgIHRoaXMuc2hvd0FsbF9vcGVyYXRpb24gPSB0cnVlDQogICAgICAgIHRoaXMub3BlcmF0aW9uTW9uaXRvclRhYmxlID0gdGhpcy50YWJsZURhdGENCiAgICAgIH0sDQogICAgICBzaG93QmFja19vcGVyYXRpb24oKSB7DQogICAgICAgIHRoaXMuc2hvd0FsbF9vcGVyYXRpb24gPSBmYWxzZQ0KICAgICAgICB0aGlzLm9wZXJhdGlvbk1vbml0b3JUYWJsZSA9IHRoaXMudGFibGVEYXRhLnNsaWNlKDAsIDEwKQ0KICAgICAgfSwNCiAgICAgIHJvd0NsaWNrX09wZXJhdGlvbihyb3csIGNvbHVtbiwgZXZlbnQpIHsNCiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gIklOUFVUIikgew0KICAgICAgICAgIGlmIChyb3cuaWQgPT09IHRoaXMuc2VsZWN0T3BlcmF0aW9uKSB7DQogICAgICAgICAgICB0aGlzLnNlbGVjdE9wZXJhdGlvbiA9IHt9DQogICAgICAgICAgICB0aGlzLnNob3dPcGVyYXRpb25Qcm9ncmVzcyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmNhY2hlSnNvbkRhdGEoJ29wZXJhdGlvblNlbGVjdCcsIHRoaXMuc2VsZWN0T3BlcmF0aW9uKQ0KICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cgPSByb3cNCiAgICAgICAgICAgIHRoaXMuY2FjaGVKc29uRGF0YSgnb3BlcmF0aW9uU2VsZWN0Jywgcm93KQ0KICAgICAgICAgICAgdGhpcy5wZEluZm9JZCA9IHJvdy5pZA0KICAgICAgICAgICAgdGhpcy5wZFByb2Nlc3NJZCA9IHJvdy5wZFByb2Nlc3NJZA0KICAgICAgICAgICAgdGhpcy5zaG93T3BlcmF0aW9uUHJvZ3Jlc3MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmNoZWNrUHJvY2VzcygpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KDQogICAgICAvKueCueWHu+WuoeaguOmAgOWbnuasoeaVsOaXtuaYvuekuumAgOWbnuWuoeaguOiusOW9lSovDQogICAgICByZXZpZXdBdWRpdEhpc3Rvcnkocm93KSB7DQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZU9mQXVkaXRIaXN0b3J5ID0gdHJ1ZTsNCiAgICAgICAgcmV2aWV3SGlzdG9yeSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoeyJwZEluZm9JZCI6IHJvdy5pZH0pKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy50YWJsZURhdGFBdWRpdEhpc3RvcnkgPSByZXMuZGF0YQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIC8v54K55Ye75p+l55yL5rWL6K+V6YCA5Zue5qyh5pWw5pe25pi+56S66YCA5Zue5rWL6K+V6K6w5b2VDQogICAgICByZXZpZXdUZXN0SGlzdG9yeSgpIHsNCg0KICAgICAgfSwNCiAgICAgIC8q6KGo5qC85Y2V5p2h6K+m57uG5pWw5o2uKi8NCiAgICAgIHRhYmxlVmFsdWUocm93LGV4cGFuZGVkUm93cykgew0KICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsNCiAgICAgICAgICBpZiAoZXhwYW5kZWRSb3dzLmxlbmd0aD4xKSB7DQogICAgICAgICAgICAgIHRoYXQuZXhwYW5kcyA9IFtdDQogICAgICAgICAgICAgIGlmIChyb3cpIHsNCiAgICAgICAgICAgICAgICAgIHRoYXQuZXhwYW5kcy5wdXNoKHJvdyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy50YWJsZURhdGFBdWRpdEhpc3RvcnkudG9nZ2xlUm93RXhwYW5zaW9uKGV4cGFuZGVkUm93c1swXSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhhdC5leHBhbmRzID0gW107DQogICAgICAgICAgfQ0KICAgICAgICBsZXQgcGRSZXR1cm5GdW5jTm9kZSA9IEpTT04ucGFyc2Uocm93LnBkUmV0dXJuRnVuY05vZGUpDQogICAgICAgIHRoaXMudGFibGVEYXRhQXVkaXREZXRhaWxzID0gW10NCiAgICAgICAgcXVlcnlBdWRpdE5vdGVzKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7InBkSW5mb0lkIjogcm93LmlkfSkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YURldGFpbHMgPSByZXMuZGF0YQ0KICAgICAgICAgIGZvciAoY29uc3QgZGF0YUF1ZGl0IG9mIHRoaXMudGFibGVEYXRhRGV0YWlscykgew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZFJldHVybkZ1bmNOb2RlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgIGlmIChkYXRhQXVkaXQucGREZWZpbmVDb250ZW50ID09PSBwZFJldHVybkZ1bmNOb2RlW2ldKSB7DQogICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGFBdWRpdERldGFpbHMucHVzaChkYXRhQXVkaXQpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgZmluaXNoZWRPcGVyYXRpb25hbEFsbChyb3cpIHsNCg0KICAgICAgICBnZXRTdGF0dXModGhpcy5idWlsZFJlcXVlc3REYXRhKHsicGRQcm9jZXNzSWQiOiB0aGlzLnBkUHJvY2Vzc0lkLCAibW9kdWxlTm9kZSI6IHRoaXMubW9kdWxlTm9kZX0pKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy5zdGF0dXNEYXRhID0gcmVzLmRhdGFbMF0NCiAgICAgICAgfSkNCiAgICAgICAgbGV0IGZsYWcgPSAwOw0KICAgICAgICBmb3IgKGNvbnN0IHN0YXR1c0RhdGFMaXN0MSBvZiB0aGlzLnN0YXR1c0RhdGEuY2hpbGRyZW4pIHsNCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXR1c0RhdGFMaXN0MS5jaGlsZHJlbi5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKHN0YXR1c0RhdGFMaXN0MS5jaGlsZHJlbltpXS5tb2R1bGVTdGF0dXMgPT0gMCkgew0KDQogICAgICAgICAgICAgIGZsYWcgPSAxOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGZsYWcgPT0gMSkgew0KICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0T3BlcmF0aW9uTW9uaXRvci5jb25maXJtRXhpdERlZmluaXRpb24xJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksDQogICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RPcGVyYXRpb25Nb25pdG9yLndoZXRoZXJUb0VudGVyVGhlVGVzdE5vZGUnKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgncHJvZHVjdE9wZXJhdGlvbk1vbml0b3IueWVzJyksDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgncHJvZHVjdE9wZXJhdGlvbk1vbml0b3Iubm8nKSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhLnByb2Nlc3NJbnN0YW5jZUlkID0gcm93LnBkUHJvY2Vzc0lkDQogICAgICAgICAgICAgICAgdGhpcy5kYXRhLnByb2R1Y3RUZXN0RmxhZyA9ICcwJw0KICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoUHJvZHVjdE9wZXJhdGlvbmFsRGVmKCkNCiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5wcm9jZXNzSW5zdGFuY2VJZCA9IHJvdy5wZFByb2Nlc3NJZA0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5wcm9kdWN0VGVzdEZsYWcgPSAnMScNCiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaFByb2R1Y3RPcGVyYXRpb25hbERlZigpDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgncHJvZHVjdE9wZXJhdGlvbk1vbml0b3IuY29uZmlybUV4aXREZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksDQogICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RPcGVyYXRpb25Nb25pdG9yLndoZXRoZXJUb0VudGVyVGhlVGVzdE5vZGUnKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgncHJvZHVjdE9wZXJhdGlvbk1vbml0b3IueWVzJyksDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgncHJvZHVjdE9wZXJhdGlvbk1vbml0b3Iubm8nKSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhLnByb2Nlc3NJbnN0YW5jZUlkID0gcm93LnBkUHJvY2Vzc0lkDQogICAgICAgICAgICAgICAgdGhpcy5kYXRhLnByb2R1Y3RUZXN0RmxhZyA9ICcwJw0KICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoUHJvZHVjdE9wZXJhdGlvbmFsRGVmKCkNCiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5wcm9jZXNzSW5zdGFuY2VJZCA9IHJvdy5wZFByb2Nlc3NJZA0KICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5wcm9kdWN0VGVzdEZsYWcgPSAnMScNCiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaFByb2R1Y3RPcGVyYXRpb25hbERlZigpDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGZpbmlzaFByb2R1Y3RPcGVyYXRpb25hbERlZigpIHsNCiAgICAgICAgZmluaXNoUHJvZHVjdE9wZXJhdGlvbmFsRGVmKHRoaXMuZGF0YSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXMubWVzc2FnZSkNCiAgICAgICAgICBjbG9zZVZpc2l0VGFnKCkNCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncHJvZHVjdC9zdG9yYWdlUHJvZHVjdHMnKQ0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAiL2Rhc2hib2FyZCJ9KTsNCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBjaGVja1Byb2Nlc3MoKSB7DQogICAgICAgIHRoaXMubW9kdWxlTm9kZSA9ICdvcGVyYXRpb25hbCcNCiAgICAgICAgZ2V0U3RhdHVzKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7InBkUHJvY2Vzc0lkIjogdGhpcy5wZFByb2Nlc3NJZCwgIm1vZHVsZU5vZGUiOiB0aGlzLm1vZHVsZU5vZGV9KSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuc3RhdHVzRGF0YSA9IHJlcy5kYXRhWzBdDQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgaGFuZGxlR29QYWdlKHR5cGUpIHsNCiAgICAgICAgbGV0IHBhdGggPSB0aGlzLm1lbnVOYW1lVG9QYXRoKHR5cGUpDQogICAgICAgIHRoaXMuY2FjaGVKc29uRGF0YShwYXRoLHRoaXMuc2VsZWN0Um93KQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogcGF0aH0pOw0KICAgICAgfSwNCiAgICB0b1Nob3dQZEJuZnQoKSB7DQogICAgICB0aGlzLnNob3dTdGF0ZSA9ICF0aGlzLnNob3dTdGF0ZTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgaWYgKHRoaXMuJHJlZnMuZHJhd0Zvcm0pIHsNCiAgICAgICAgICB0aGlzLiRyZWZzLmRyYXdGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgfQ0KICB9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-operation-def/pd-operation-monitor","sourcesContent":["<template>\r\n  <cus-wraper>\r\n   <cus-form-title :display=\"false\" :label=\"$t('productOperationMonitor.productOperationDefinition')\" :showArrow=\"true\"\r\n                      @show=\"toShowPdBnft\"></cus-form-title>\r\n  <div v-if=\"showState\">\r\n    <el-form label-width=\"auto\" ref=\"params\" :model=\"params\">\r\n      <el-row  :gutter=\"10\">\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.pdDetailType')\">\r\n            <cus-select :codetype=\"'ProductCategory'\" clearable filterable v-model=\"params.pdRegionType\"\r\n                        @change=\"selectedDetailTypeChanged\" >\r\n            </cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.product')\">\r\n            <el-select @change=\"selectedPdCodeChanged\" clearable filterable\r\n                       v-model=\"params.pdCode\">\r\n              <el-option :key=\"product.id\" :label=\"product.pdCode+':'+product.pdName\" :value=\"product.pdCode\"\r\n                         v-for=\"product in productOptionList\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('customComponents.pdEdition')\">\r\n            <el-select clearable filterable v-model=\"params.pdEdition\" >\r\n              <el-option :key=\"edition\" :label=\"edition\" :value=\"edition\"\r\n                         v-for=\"edition in editionOptionList\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </el-row>\r\n      <el-row  :gutter=\"10\">\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.pdApplyDate')\">\r\n            <el-date-picker\r\n              v-model=\"value2\"\r\n              type=\"daterange\"\r\n              align=\"right\"\r\n              unlink-panels\r\n              :range-separator=\"$t('productOperationMonitor.to')\"\r\n              :start-placeholder=\"$t('productOperationMonitor.pdApplyStartDate')\"\r\n              :end-placeholder=\"$t('productOperationMonitor.pdApplyEndDate')\"\r\n              :picker-options=\"pickerOptions\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.changeDate')\">\r\n            <el-date-picker\r\n              v-model=\"value1\"\r\n              type=\"daterange\"\r\n              align=\"right\"\r\n              unlink-panels\r\n              :range-separator=\"$t('productOperationMonitor.to')\"\r\n              :start-placeholder=\"$t('productOperationMonitor.pdApplyStartDate')\"\r\n              :end-placeholder=\"$t('productOperationMonitor.pdApplyEndDate')\"\r\n              :picker-options=\"pickerOptions\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </el-row>\r\n      <el-row  :gutter=\"10\">\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.defType')\" prop=\"defType\">\r\n            <cus-select :codetype=\"'pdAuditType'\" clearable\r\n                        v-model=\"params.defType\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.isTestReturn')\">\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"params.isTestReturn\"></el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productOperationMonitor.isReviewReturn')\">\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"params.isReviewReturn\"></el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </el-row>\r\n      <el-row>\r\n\r\n          <el-button  size=\"small\" type=\"primary\"  icon=\"el-icon-search\" @click=\"handSearch\" style=\"float: right;margin-right: 20px;\">\r\n            {{$t('productOperationMonitor.search')}}\r\n          </el-button>\r\n        </el-row>\r\n    </el-form>\r\n  </div>\r\n    <el-divider content-position=\"left\"><i class=\"el-icon-s-grid\"></i>{{$t('productOperationMonitor.productOperation')}}\r\n    </el-divider>\r\n    <el-table :data=\"operationMonitorTable\" ref=\"page\" size=\"mini\" @row-click=\"rowClick_Operation\" highlight-current-row\r\n              fit element-loading-text=\"Loading\" border align=\"center\" class=\"wraper-table\">\r\n      <el-table-column width=\"60\" :label=\"$t('productOperationMonitor.selection')\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group  v-model=\"selectOperation\">\r\n            <el-radio :label=\"scope.row.id\">{{''}}</el-radio>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column :label=\"$t('table.id')\" type=\"index\" align=\"center\">\r\n           <template v-slot=\"scope\">\r\n           {{ initTableIndex('page', scope.$index) }}\r\n           </template>\r\n         </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdCode')\" prop=\"pdCode\" sortable align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdCode')\" prop=\"pdName\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('customComponents.pdEdition')\" prop=\"pdEdition\"\r\n                       align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productOperationMonitor.defType')\" sortable prop=\"defType\" align=\"center\"\r\n                       :filters=\"filterHandlerList1\"\r\n                       :filter-method=\"filterHandler\">\r\n        <template v-slot=\"scope\">{{scope.row.defType | filter_pdAuditType}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productOperationMonitor.pdApplyDate')\" sortable prop=\"pdApplDate\"\r\n                       align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productOperationMonitor.changeDate')\" sortable prop=\"changeDate\"\r\n                       align=\"center\"></el-table-column>\r\n\r\n      <el-table-column :label=\"$t('productOperationMonitor.pdTestReturnTimes')\" prop=\"pdTestReturnTimes\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button  size=\"small\" type=\"text\" @click=\"reviewTestHistory(scope.row)\"\r\n                     :disabled=\"scope.row.pdAuditTimes==0||scope.row.pdAuditTimes==null\">\r\n            {{scope.row.pdAuditTimes}}\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productOperationMonitor.pdAuditTimes')\" prop=\"pdAuditTimes\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button  size=\"small\" type=\"text\" @click=\"reviewAuditHistory(scope.row)\"\r\n                     :disabled=\"scope.row.pdAuditTimes==0||scope.row.pdAuditTimes==null\">\r\n            {{scope.row.pdAuditTimes}}\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productOperationMonitor.operation')\" align=\"center\">\r\n        <template v-slot=\"scope\">\r\n          <el-button  @click=\"finishedOperationalAll(scope.row)\" size=\"mini\" type=\"primary\"><i class=\"el-icon-finished\">{{$t('productOperationMonitor.submitDefinition')}}</i>\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n   <cus-pagination ref=\"page\" v-model=\"operationMonitorTable\"\r\n                    :pageSize=\"10\" :params=\"params\" url=\"/product-Operation-Monitor/base/list\"/>\r\n\r\n  <!--  <el-button  size=\"small\" @click=\"showMore_operation\" type=\"text\" v-if=\"needShowMore_operation && !showAll_operation\">\r\n      {{$t('productOperationMonitor.showMore')}}\r\n      <i class=\"el-icon-arrow-down\"></i>\r\n    </el-button>\r\n    <el-button  size=\"small\" @click=\"showBack_operation\" type=\"text\" v-if=\"needShowMore_operation && showAll_operation\">\r\n      {{$t('productOperationMonitor.showBack')}}\r\n      <i class=\"el-icon-arrow-up\"></i>\r\n    </el-button> -->\r\n    <br>\r\n    <!--产品营运定义进度-->\r\n    <div v-if=\"showOperationProgress\">\r\n      <h4>\r\n        <el-divider direction=\"vertical\" class=\"divider\"></el-divider>\r\n        {{$t('productOperationMonitor.productOperationProgress')}}\r\n      </h4>\r\n      <div class=\"cusSubCard cusProcess\">\r\n        <div class=\"sub\" v-for=\"item1 in  this.statusData.children\">\r\n          <el-tooltip effect=\"light\" :content=\"$t('productOperationMonitor.processTip')\"\r\n                      placement=\"top-end\">\r\n            <div class=\"wraper\" @click=\"handleGoPage(item1.moduleName)\">\r\n              <div class=\"loss\" :class=\"{'loss_no' : item1.moduleStatus ==='0'}\"></div>\r\n              <div class=\"tag\" :class=\"{'tag_no' : item1.moduleStatus ==='0'}\">{{item1.moduleName}}</div>\r\n              <div class=\"triangle\" :class=\"{'triangle_no' : item1.moduleStatus ==='0'}\"></div>\r\n            </div>\r\n          </el-tooltip>\r\n          <div style=\"margin-top: 23px\">\r\n            <el-steps direction=\"vertical\" process-status=\"success\" v-for=\"item2 in  item1.children\">\r\n              <el-step :icon=\"item2.moduleStatus=='1'?'el-icon-circle-check': 'el-icon-circle-close'\"\r\n                       :status=\"item2.moduleStatus=='1'? 'finish' : 'wait'\" :title=\"item2.moduleName\"></el-step>\r\n            </el-steps>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--审核退回记录弹窗-->\r\n    <el-dialog :visible.sync=\"dialogVisibleOfAuditHistory\" @close=\"dialogVisibleOfAuditHistory = false\" append-to-body\r\n               width=\"75%\">\r\n      <el-divider content-position=\"left\"><i class=\"el-icon-s-grid\"></i>{{$t('productOperationMonitor.HistoryReturns')}}\r\n      </el-divider>\r\n      <el-table :data=\"tableDataAuditHistory\" fit element-loading-text=\"Loading\" class=\"wraper-table\" border ref=\"tableDataAuditHistory\"\r\n                style=\"width: 100%\" @expand-change=\"tableValue\">\r\n        <el-table-column type=\"index\" :label=\"$t('table.id')\" align=\"center\"\r\n                         width=\"60\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.pdCode')\" prop=\"pdCode\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('productOperationMonitor.pdAuditConclusion')\" prop=\"pdAuditConc\" align=\"center\">\r\n          <template v-slot=\"scope\">{{scope.row.pdAuditConc | getPdAuditConc}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productOperationMonitor.pdAuditStaff')\" prop=\"pdAuditStaff\"\r\n                         align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('productOperationMonitor.pdAuditDate')\" prop=\"pdAuditDate\"\r\n                         align=\"center\"></el-table-column>\r\n        <el-table-column type=\"expand\" :label=\"$t('productOperationMonitor.details')\" align=\"center\" width=\"60\">\r\n          <template slot-scope=\"props\">\r\n            <div>\r\n              <el-divider content-position=\"left\"><i class=\"el-icon-s-grid\"></i>{{$t('productOperationMonitor.pdPostAudit')}}\r\n              </el-divider>\r\n              <el-table :data=\"tableDataAuditDetails\" size=\"mini\" fit element-loading-text=\"Loading\" border\r\n                        highlight-current-row align=\"center\" class=\"wraper-table\">\r\n                <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('productOperationMonitor.defineContent')\" prop=\"pdDefineContent\" align=\"center\">\r\n                  <template slot-scope=\"scope\">{{scope.row.pdDefineContent | filter_pdNodeCode}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('productOperationMonitor.pdAuditConclusion')\" prop=\"pdAuditConcthis\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('productOperationMonitor.isCancelDefinition')\" prop=\"pdIsCancelDefinition\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('productOperationMonitor.notPassOpinion')\" prop=\"pdNotPassOpinion\"\r\n                                 align=\"center\" width=\"360px\"></el-table-column>\r\n              </el-table>\r\n              <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n                <el-form-item :label=\"$t('productOperationMonitor.pdReturnFuncNode')\" style=\"width: 100%\">\r\n                    <span>{{ props.row.pdReturnFuncNode | filter_FuncNodeName}}</span>\r\n                  </el-form-item>\r\n                <el-form-item :label=\"$t('i18nView.pdAuditIdea')\">\r\n                  <span>{{ props.row.pdAuditIdea }}</span>\r\n                </el-form-item>\r\n              </el-form>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {\r\n  getStatus,\r\n  productOperationMonitorList,\r\n  queryAuditNotes,\r\n  reviewHistory\r\n} from '@/api/basicinfo/productOperationMonitor'\r\nimport {findAllProductByPdDetailType} from \"@/api/basicinfo/pdclaimverification\"\r\nimport {closeVisitTag} from \"@/utils/tagsView\"\r\nimport {finishProductOperationalDef} from '@/api/workflow/workflow'\r\n\r\nlet _this\r\n  export default {\r\n    name: 'productOperationMonitor',\r\n    filters: {\r\n      filter_pdAuditType(code) {\r\n        return _this.getCodeName('pdAuditType', code)\r\n      },\r\n      filter_pdNodeCode(val) {\r\n        let returnText = '';\r\n        switch (val) {\r\n          case 'productRuleFlag':\r\n            returnText = '产品规则订正';\r\n            break;\r\n          case 'productFormulaFlag':\r\n            returnText = '产品公式订正';\r\n            break;\r\n          case 'productInfoFlag':\r\n            returnText = '产品框架定义';\r\n            break;\r\n          case 'productDistributionFlag':\r\n            returnText = '产品销售信息';\r\n            break;\r\n          case 'productCoverFlag':\r\n            returnText = '产品承保信息';\r\n            break;\r\n          case 'productUnderwritingFlag':\r\n            returnText = '产品核保信息';\r\n            break;\r\n          case 'productPreservationFlag':\r\n            returnText = '产品保全信息';\r\n            break;\r\n          case 'productHePeiFlag':\r\n            returnText = '产品核赔信息';\r\n            break;\r\n          case 'productRenewalFlag':\r\n            returnText = '产品续期续保信息';\r\n            break;\r\n        }\r\n        return returnText;\r\n      },\r\n      filter_FuncNodeName(val) {\r\n        let funcNode = JSON.parse(val);\r\n        let returnPoints = [];\r\n        for (let i = 0; i < funcNode.length; i++) {\r\n          for (let j = 0; j < _this.nodeOptions.length; j++) {\r\n            if (funcNode[i] === _this.nodeOptions[j].key) {\r\n              returnPoints.push(_this.nodeOptions[j].label)\r\n            }\r\n          }\r\n        }\r\n        if (returnPoints.length>0){\r\n          return returnPoints;\r\n        }else {\r\n          return val;\r\n        }\r\n      },\r\n      getPdAuditConc(state) {\r\n        if (state == 'N') {\r\n          state = '不通过'\r\n        } else if (state == 'Y') {\r\n          state = '通过'\r\n        } else if (state == 'X') {\r\n          state = '取消本次定义'\r\n        } else if (state == 'Z') {\r\n          state = '产品暂停'\r\n        }\r\n        return state\r\n      }\r\n    },\r\n      watch:{\r\n        'operationMonitorTable'(){\r\n            if (this.operationMonitorTable.length > 0) {\r\n                this.filterHandlerList1 = [];\r\n                this.operationMonitorTable.forEach(val => {\r\n                    this.filterHandlerList1.push({\r\n                        text: this.getCodeName('pdAuditType',val.defType,true),\r\n                        value: val.defType\r\n                    });\r\n\r\n                });\r\n            }\r\n            this.filterHandlerList1 = this.filterHandlerList1.reduce(function(prev, element) {\r\n                if (!prev.find(el => el.text == element.text)) {\r\n                    prev.push(element);\r\n                }\r\n                return prev;\r\n            }, []);\r\n        },\r\n        'value1'(){\r\n            if (this.value1) {\r\n                let arr = this.value1;\r\n                this.params.changeEndDate = arr[1];\r\n                this.params.changeStartDate = arr[0];\r\n            }else {\r\n                this.params.changeEndDate = undefined;\r\n                this.params.changeStartDate = undefined;\r\n            }\r\n        },\r\n          'value2'(){\r\n              if (this.value2){\r\n                  let arr = this.value2;\r\n                  this.params.pdApplyStartDate=arr[0];\r\n                  this.params.pdApplyEndDate=arr[1];\r\n              }else {\r\n                  this.params.pdApplyStartDate=undefined;\r\n                  this.params.pdApplyEndDate=undefined;\r\n              }\r\n\r\n          },\r\n      },\r\n    data() {\r\n      _this = this\r\n      return {\r\n          filterHandlerList1:[],\r\n          nodeOptions: [\r\n          {'key': 'productInfoFlag', 'label': '产品框架定义'},\r\n          {'key': 'productDistributionFlag', 'label': '产品销售信息'},\r\n          {'key': 'productCoverFlag', 'label': '产品承保信息'},\r\n          {'key': 'productUnderwritingFlag', 'label': '产品核保信息'},\r\n          {'key': 'productRenewalFlag', 'label': '产品续期续保信息'},\r\n          {'key': 'productPreservationFlag', 'label': '产品保全信息'},\r\n          {'key': 'productHePeiFlag', 'label': '产品核赔信息'},\r\n          {'key': 'productRuleFlag', 'label': '产品规则订正'},\r\n          {'key': 'productFormulaFlag', 'label': '产品公式订正'}],\r\n          pickerOptions: {\r\n              shortcuts: [{\r\n                  text: '最近一周',\r\n                  onClick(picker) {\r\n                      const end = new Date();\r\n                      const start = new Date();\r\n                      start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n                      picker.$emit('pick', [start, end]);\r\n                  }\r\n              }, {\r\n                  text: '最近一个月',\r\n                  onClick(picker) {\r\n                      const end = new Date();\r\n                      const start = new Date();\r\n                      start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n                      picker.$emit('pick', [start, end]);\r\n                  }\r\n              }, {\r\n                  text: '最近三个月',\r\n                  onClick(picker) {\r\n                      const end = new Date();\r\n                      const start = new Date();\r\n                      start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n                      picker.$emit('pick', [start, end]);\r\n                  }\r\n              }]\r\n          },\r\n          value1:'',\r\n          value2:'',\r\n        //初始化表格\r\n        operationMonitorTable: [],\r\n        tableData: [],\r\n        tableDataDetails: [],\r\n        tableDataAuditHistory: [],\r\n        tableDataAuditDetails: [],\r\n\r\n        //初始化下拉选\r\n        productOptionList: [],\r\n        editionOptionList: [],\r\n        detailTypeOptionList:[],\r\n\r\n        selectOperation: {},\r\n        selectRow: {},\r\n        statusData: {},\r\n        statusDataList: {},\r\n        statusDataChildrenList:{},\r\n        pdInfoId: '',\r\n        pdProcessId: '',\r\n        moduleNode: '',\r\n        showState:false,\r\n        params: {\r\n          pdRegionType: '',\r\n          pdCode: '',\r\n          pdEdition: '',\r\n          defType: '',\r\n          pdApplyStartDate: undefined,\r\n          pdApplyEndDate: undefined,\r\n          changeStartDate: undefined,\r\n          changeEndDate: undefined,\r\n          isTestReturn: '',\r\n          isReviewReturn: ''\r\n        },\r\n        //产品营运监控定义完毕传参\r\n        data: {\r\n          productTestFlag: '1',\r\n          processInstanceId: ''\r\n        },\r\n        //动态显示\r\n        showOperationProgress: false,\r\n        dialogVisibleOfAuditHistory: false,\r\n        needShowMore_operation: false,\r\n        showAll_operation: false\r\n      }\r\n    },\r\n    computed: {},\r\n    created() {\r\n      this.params.pdApplyEndDate = new Date();\r\n      this.initOperationMonitorProduct()\r\n      let row=this.getJsonData(\"operationSelect\")\r\n      if(row.id!=undefined) {\r\n        this.selectRow = row\r\n        this.selectOperation=row.id\r\n        this.pdInfoId = row.id\r\n        this.pdProcessId = row.pdProcessId\r\n        this.showOperationProgress = true\r\n        this.checkProcess()\r\n      }\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        getCodeNames(code){\r\n            return this.getCodeNames('pdAuditType',code);\r\n        },\r\n        filterHandler(value, row, column) {\r\n            const property = column['property'];\r\n            return row[property] === value;\r\n        },\r\n      handSearch() {\r\n        this.$refs.page.reload();\r\n        this.selectOperation = {}\r\n        this.showOperationProgress = false\r\n      },\r\n      initOperationMonitorProduct() {\r\n       productOperationMonitorList(this.buildRequestData(this.params)).then(response => {\r\n          this.tableData = response.data.records;\r\n          //获取产品编码\r\n          for (const product of this.tableData) {\r\n            let flag = false\r\n            for (const productOption of this.productOptionList) {\r\n              if (productOption.pdCode === product.pdCode) {\r\n                flag = true\r\n                break\r\n              }\r\n            }\r\n            if (!flag) {\r\n              this.productOptionList.push(product)\r\n            }\r\n          }\r\n          //展示更多或者收起\r\n         /* this.showAll_operation = false\r\n          if (this.tableData.length > 10) {\r\n            this.operationMonitorTable = this.tableData.slice(0, 10)\r\n            this.needShowMore_operation = true\r\n          } else {\r\n            this.operationMonitorTable = this.tableData\r\n            this.needShowMore_operation = false\r\n          }*/\r\n        })\r\n      },\r\n      selectedDetailTypeChanged(val){\r\n        debugger\r\n        let param={\r\n          pdRegionType:val\r\n        }\r\n        if(\"\".endsWith(val) || val==undefined){\r\n          this.handSearch()\r\n          return false\r\n        }\r\n        console.log(\"this.tableData\",this.tableData);\r\n        findAllProductByPdDetailType(this.buildRequestData(param)).then(response =>{\r\n          this.productOptionList =[]\r\n          this.detailTypeOptionList =response.data\r\n          for (const product of this.detailTypeOptionList) {\r\n            for (const productOption of  this.tableData) {\r\n              if (productOption.pdCode === product.pdCode) {\r\n                this.productOptionList.push(productOption)\r\n              }\r\n            }\r\n          }\r\n        })\r\n      },\r\n      selectedPdCodeChanged(pdCode) {\r\n        this.params.pdEdition = ''\r\n        const productOptionList_filter = this._.filter(this.operationMonitorTable, {'pdCode': pdCode})\r\n        this.editionOptionList = this._.map(productOptionList_filter, 'pdEdition')\r\n      },\r\n      showMore_operation() {\r\n        this.showAll_operation = true\r\n        this.operationMonitorTable = this.tableData\r\n      },\r\n      showBack_operation() {\r\n        this.showAll_operation = false\r\n        this.operationMonitorTable = this.tableData.slice(0, 10)\r\n      },\r\n      rowClick_Operation(row, column, event) {\r\n        if (event.target.nodeName === \"INPUT\") {\r\n          if (row.id === this.selectOperation) {\r\n            this.selectOperation = {}\r\n            this.showOperationProgress = false\r\n            this.cacheJsonData('operationSelect', this.selectOperation)\r\n          }else{\r\n            this.selectRow = row\r\n            this.cacheJsonData('operationSelect', row)\r\n            this.pdInfoId = row.id\r\n            this.pdProcessId = row.pdProcessId\r\n            this.showOperationProgress = true\r\n            this.checkProcess()\r\n          }\r\n        }\r\n      },\r\n\r\n      /*点击审核退回次数时显示退回审核记录*/\r\n      reviewAuditHistory(row) {\r\n        this.dialogVisibleOfAuditHistory = true;\r\n        reviewHistory(this.buildRequestData({\"pdInfoId\": row.id})).then(res => {\r\n          this.tableDataAuditHistory = res.data\r\n        })\r\n      },\r\n      //点击查看测试退回次数时显示退回测试记录\r\n      reviewTestHistory() {\r\n\r\n      },\r\n      /*表格单条详细数据*/\r\n      tableValue(row,expandedRows) {\r\n          var that = this;\r\n          if (expandedRows.length>1) {\r\n              that.expands = []\r\n              if (row) {\r\n                  that.expands.push(row);\r\n              }\r\n              this.$refs.tableDataAuditHistory.toggleRowExpansion(expandedRows[0]);\r\n          } else {\r\n              that.expands = [];\r\n          }\r\n        let pdReturnFuncNode = JSON.parse(row.pdReturnFuncNode)\r\n        this.tableDataAuditDetails = []\r\n        queryAuditNotes(this.buildRequestData({\"pdInfoId\": row.id})).then(res => {\r\n          this.tableDataDetails = res.data\r\n          for (const dataAudit of this.tableDataDetails) {\r\n            for (let i = 0; i < pdReturnFuncNode.length; i++) {\r\n              if (dataAudit.pdDefineContent === pdReturnFuncNode[i]) {\r\n                this.tableDataAuditDetails.push(dataAudit)\r\n              }\r\n            }\r\n          }\r\n        })\r\n      },\r\n      finishedOperationalAll(row) {\r\n\r\n        getStatus(this.buildRequestData({\"pdProcessId\": this.pdProcessId, \"moduleNode\": this.moduleNode})).then(res => {\r\n          this.statusData = res.data[0]\r\n        })\r\n        let flag = 0;\r\n        for (const statusDataList1 of this.statusData.children) {\r\n          for (let i = 0; i < statusDataList1.children.length; i++) {\r\n            if (statusDataList1.children[i].moduleStatus == 0) {\r\n\r\n              flag = 1;\r\n              break;\r\n            }\r\n          }\r\n          if (flag == 1) {\r\n            this.$confirm(this.$t('productOperationMonitor.confirmExitDefinition1'), this.$t('confirmMessage.tip'), {\r\n              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n              type: 'warning'\r\n            }).then(() => {\r\n              this.$confirm(this.$t('productOperationMonitor.whetherToEnterTheTestNode'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('productOperationMonitor.yes'),\r\n                cancelButtonText: this.$t('productOperationMonitor.no'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                this.data.processInstanceId = row.pdProcessId\r\n                this.data.productTestFlag = '0'\r\n                this.finishProductOperationalDef()\r\n              }).catch(() => {\r\n                this.data.processInstanceId = row.pdProcessId\r\n                this.data.productTestFlag = '1'\r\n                this.finishProductOperationalDef()\r\n              })\r\n            }).catch(() => {\r\n            })\r\n            break;\r\n          } else {\r\n            this.$confirm(this.$t('productOperationMonitor.confirmExitDefinition'), this.$t('confirmMessage.tip'), {\r\n              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n              type: 'warning'\r\n            }).then(() => {\r\n              this.$confirm(this.$t('productOperationMonitor.whetherToEnterTheTestNode'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('productOperationMonitor.yes'),\r\n                cancelButtonText: this.$t('productOperationMonitor.no'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                this.data.processInstanceId = row.pdProcessId\r\n                this.data.productTestFlag = '0'\r\n                this.finishProductOperationalDef()\r\n              }).catch(() => {\r\n                this.data.processInstanceId = row.pdProcessId\r\n                this.data.productTestFlag = '1'\r\n                this.finishProductOperationalDef()\r\n              })\r\n            }).catch(() => {\r\n            })\r\n          }\r\n        }\r\n      },\r\n      finishProductOperationalDef() {\r\n        finishProductOperationalDef(this.data).then(res => {\r\n          this.notifySuccess(res.message)\r\n          closeVisitTag()\r\n          this.$store.dispatch('product/storageProducts')\r\n          this.$router.push({path: \"/dashboard\"});\r\n        })\r\n      },\r\n      checkProcess() {\r\n        this.moduleNode = 'operational'\r\n        getStatus(this.buildRequestData({\"pdProcessId\": this.pdProcessId, \"moduleNode\": this.moduleNode})).then(res => {\r\n          this.statusData = res.data[0]\r\n        })\r\n      },\r\n      handleGoPage(type) {\r\n        let path = this.menuNameToPath(type)\r\n        this.cacheJsonData(path,this.selectRow)\r\n        this.$router.push({path: path});\r\n      },\r\n    toShowPdBnft() {\r\n      this.showState = !this.showState;\r\n      this.$nextTick(() => {\r\n        if (this.$refs.drawForm) {\r\n          this.$refs.drawForm.clearValidate()\r\n        }\r\n      })\r\n    },\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n  .wraper {\r\n    font-size: 0;\r\n    margin-top: 3px;\r\n  }\r\n\r\n  .wraper > div {\r\n    display: inline-block;\r\n  }\r\n\r\n</style>\r\n"]}]}