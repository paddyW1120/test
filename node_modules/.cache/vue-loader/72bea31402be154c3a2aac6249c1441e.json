{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\payment-def\\prem-rule\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\payment-def\\prem-rule\\index.vue","mtime":1609847106900},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KaW1wb3J0IHtmaW5kRXh0UHJlbUJ5SWQsfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcHJlbUFtb3VudEZvcm11bGEiOw0KaW1wb3J0IHthbGxGb3JtdWxhQnlQZEluZm9JZH0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL3ByZW1SdWxlcyI7DQppbXBvcnQge2ZpbmRGb3JtdWxhSW5SdWxlRW5naW5lfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vdW5kZXJ3cml0aW5nQW1vdW50Rm9ybXVsYSINCg0KaW1wb3J0IHsNCiAgYWRkUnVsZXNEeW5hbWljLA0KICBkZWxldGVQZHRlbXBQZFJ1bGVzLA0KICBmaW5kUHJlbUJ5SWQsDQogIGZpbmRSdWxlc1BhcmFtZXRlcg0KfSBmcm9tICdAL2FwaS9iYXNpY2luZm8vYWNjZXB0SW5zdXJhbmNlUnVsZXMnDQoNCmxldCBfdGhpcw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdwcmVtUnVsZXMnLA0KICBmaWx0ZXJzOiB7DQogICAgZmlsdGVyX3BkQnVzc1R5cGUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZENhbGNCdXNzVHlwZScsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfcGRCdXNzRGV0YWlsVHlwZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3J1bGVCdXNpbmVzc0RldGFpbENsYXNzJywgY29kZSkNCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgZ3VhcmFudGVlRGV0YWlsczogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogdW5kZWZpbmVkDQogICAgfSwNCg0KICAgIGNhbGN1bGF0aW9uRm9ybXVsYVR5cGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZA0KICAgIH0sDQogICAgcGRVd1NpVHlwZU9wdGlvbnM6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZA0KICAgIH0sDQogICAgcGRVd1NpVHlwZUR0T3B0aW9uczogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogdW5kZWZpbmVkDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIF90aGlzID0gdGhpcw0KICAgIHJldHVybiB7DQogICAgICBsYW5ndWFnZTogbnVsbCwNCiAgICAgIHJ1bGVNZXNzYWdlSW5mb0JvbTogW10sDQoNCiAgICAgIHJ1bGVEZWNpc2lvbjogW10sDQogICAgICBwcm9kdWN0Qm5mdEZvcm06IHt9LA0KICAgICAgY29sdW1uRGV0YWlsczoge30sDQogICAgICBzZWxlY3RlZEZvcm11bGE6IHt9LA0KICAgICAgZGF0YUNvbmZpZ3M6IFtdLA0KICAgICAgT3B0aW9uczE6IFtdLC8v57y06LS5DQogICAgICBPcHRpb25zMjogW10sLy/liqDotLkNCiAgICAgIHJ1bGVTaG93OiBmYWxzZSwvL+inhOWImeWPguaVsOihqOagvOaYvuekuuagh+ivhg0KICAgICAgc2VsZWN0ZWREZWYxOiAnJywvL+S6p+WTgeaJv+S/neaguOS/neinhOWImeihqOagvOWNlemAieaMiemSrg0KICAgICAgcnVsZUNvbHM6IFtdLC8v5Yaz562W6KGo55qE5pWw5o2uDQogICAgICBydWxlQ29uZmlnczogW10sLy/lhrPnrZbooajnmoTmlbDmja4NCg0KDQogICAgICAvL+S6p+WTgeaJv+S/neaguOS/neinhOWImeihqOagvOaVsOaNrg0KICAgICAgY29uZmlnczogW10sDQogICAgICBwcm9kdWN0OiB7DQogICAgICAgIGlkOiB1bmRlZmluZWQsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkRWRpdGlvbjogJycsDQogICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRTYWxlY2hubDogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIHBkU2hvcnRuYW1lOiAnJywNCiAgICAgICAgcGRFbk5hbWU6ICcnLA0KICAgICAgICBwZFNob3J0RW5OYW1lOiAnJywNCiAgICAgICAgb3BlcmF0b3I6ICcnLA0KICAgICAgICBwZEFwcGxEYXRlOiB1bmRlZmluZWQsDQogICAgICAgIHBkUHJvY2Vzc0lkOiB1bmRlZmluZWQsDQogICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgdXBkYXRlVGltZTogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgY29sdW1uczogW10sDQoNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgY29uZmlncygpIHsNCiAgICAgIHRoaXMuYnVpbGRDb2x1bW5EZXRhaWxzKCkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5sYW5ndWFnZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmFwcC5sYW5ndWFnZTsNCiAgICB0aGlzLnJ1bGVNZXNzYWdlSW5mb0JvbSA9IHRoaXMuJHN0b3JlLnN0YXRlLnJ1bGVNZXNzYWdlLnJ1bGVNZXNzYWdlczsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmluaXRQcm9kdWN0SW5mbygpOw0KICAgIGlmICh0aGlzLmd1YXJhbnRlZURldGFpbHMgIT0gdW5kZWZpbmVkKSB7DQogICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5ibmZ0RHRUeXBlID0gdGhpcy5ndWFyYW50ZWVEZXRhaWxzOw0KICAgICAgdGhpcy5wcm9kdWN0Qm5mdEZvcm0uRXhwcmVzc2lvblR5cGUgPSB0aGlzLmNhbGN1bGF0aW9uRm9ybXVsYVR5cGU7DQogICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5wZXJtID0gdGhpcy5wZFV3U2lUeXBlT3B0aW9uczsNCiAgICAgIHRoaXMuZmluZEV4dFByZW1CeUlkKHRoaXMucHJvZHVjdEJuZnRGb3JtLnBlcm0pDQogICAgfQ0KICAgIC8vIOWIneWni+WMlg0KICAgIHRoaXMuZmluZFByZW1CeUlkKHRoaXMucHJvZHVjdC5pZCkNCiAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5wcm9kdWN0ID0gdGhpcy5wcm9kdWN0LnBkQ29kZSArICI6IiArIHRoaXMucHJvZHVjdC5pZA0KICAgIHRoaXMuaGFuZGxlU2VhcmNoKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+aYvuekuue8tOi0uemhueaVsOe7hA0KICAgIGZpbmRQcmVtQnlJZChpZCkgew0KICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgcGRJbmZvSWQ6IGlkLA0KICAgICAgICBwZFByb2dDb2RlOiAnJywNCiAgICAgIH07DQogICAgICBmaW5kUHJlbUJ5SWQocGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7DQogICAgICAgIHRoaXMuT3B0aW9uczEgPSBbXTsNCiAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7DQogICAgICAgICAgZGF0YS5mb3JFYWNoKHZhbCA9PiB7DQogICAgICAgICAgICB0aGlzLk9wdGlvbnMxLnB1c2goew0KICAgICAgICAgICAgICBrZXk6IHZhbC5pZCwNCiAgICAgICAgICAgICAgdmFsdWU6IHZhbC5pZCArICI6IiArIHZhbC5wZFByZW1Db2RlLA0KICAgICAgICAgICAgICBsYWJlbDogdmFsLnBkUHJlbUNvZGUgKyAiOiIgKyB2YWwucGRQYXlOYW1lDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+aYvuekuuWKoOi0uemhueaVsOe7hA0KICAgIGZpbmRFeHRQcmVtQnlJZChyb3cpIHsNCiAgICAgIGxldCBjb2RlID0gdGhpcy5nZXRDYXB0aW9uKHJvdywgMSk7DQogICAgICBmaW5kRXh0UHJlbUJ5SWQoY29kZSkudGhlbihyZXMgPT4gew0KICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICB0aGlzLk9wdGlvbnMyID0gW107DQogICAgICAgIGlmIChkYXRhLmxlbmd0aCkgew0KICAgICAgICAgIGRhdGEuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgICAgdGhpcy5PcHRpb25zMi5wdXNoKHsNCiAgICAgICAgICAgICAga2V5OiB2YWwuaWQsDQogICAgICAgICAgICAgIHZhbHVlOiB2YWwuaWQgKyAiOiIgKyB2YWwucGRFeHRQcmVtQ29kZSwNCiAgICAgICAgICAgICAgbGFiZWw6IHZhbC5wZEV4dFByZW1Db2RlICsgIjoiICsgdmFsLnBkRXh0UHJlbU5hbWUNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlU2VhcmNoKCkgew0KICAgICAgLy/liIbpobXkvKDovpPmlbDmja4NCiAgICAgIGlmICh0aGlzLnByb2R1Y3QuaWQpIHsNCiAgICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICAgIGVxX3BkSW5mb0lkOiB0aGlzLnByb2R1Y3QuaWQsDQogICAgICAgICAgZXFfcGRSdWxlQ2xzOiAnMScsDQogICAgICAgICAgZXFfcGRSdWxlRHRDbHM6IHRoaXMuY2FsY3VsYXRpb25Gb3JtdWxhVHlwZSwNCiAgICAgICAgICBlcV9wZFR5cGU6ICcxJw0KICAgICAgICB9Ow0KICAgICAgICBhd2FpdCBhbGxGb3JtdWxhQnlQZEluZm9JZCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW1zKSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMudW5kZXJ3cml0aW5nUnVsZXNWbyA9IHJlcy5kYXRhLnJlY29yZHM7DQogICAgICAgICAgdGhpcy5jb25maWdzID0gW107DQogICAgICAgICAgdGhpcy5jb25maWdzID0gcmVzLmRhdGEucmVjb3JkczsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBkZWxSdWxlUm93KGluZGV4LCByb3cpIHsNCiAgICAgIGRlbGV0ZVBkdGVtcFBkUnVsZXMocm93LnBkdGVtcFBkUnVsZXMuaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHJlcy5tZXNzYWdlKTsNCiAgICAgICAgdGhpcy5maW5kUGR0ZW1wUGRSdWxlc0J5UHJvZHVjdElkKCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGluaXRQcm9kdWN0SW5mbygpIHsNCiAgICAgIGxldCBwZHRlbXBQZEluZm8gPSB0aGlzLmdldFBkRGF0YSgpOw0KICAgICAgaWYgKHBkdGVtcFBkSW5mbyAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5wcm9kdWN0LCBwZHRlbXBQZEluZm8pDQogICAgICB9DQogICAgfSwNCiAgICBiYWNrKCkgew0KICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlRGlhbG9nVmlzaWJsZV9mb3JtdWxhJywgZmFsc2UpDQogICAgfSwNCiAgICB0b0Zvcm11bGFTZWxlY3QoKSB7DQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VEaWFsb2dWaXNpYmxlX2Zvcm11bGFTZWxlY3QnLCB0cnVlLA0KICAgICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5ibmZ0RHRUeXBlLCB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5FeHByZXNzaW9uVHlwZSwgdGhpcy5wcm9kdWN0Qm5mdEZvcm0ucGVybSwgdGhpcy5wcm9kdWN0Qm5mdEZvcm0uZXh0UHJlbSkNCiAgICB9LA0KICAgIHJvd0NsaWNrKHJvdywgY29sdW1uLCBldmVudCkgew0KICAgICAgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gIklOUFVUIikgew0KICAgICAgICBpZiAocm93LnBkdGVtcFBkQ2FsYy5pZCA9PT0gdGhpcy5zZWxlY3RlZEZvcm11bGEucGR0ZW1wUGRDYWxjLmlkKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZEZvcm11bGEgPSB7fQ0KICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdDQogICAgICAgICAgdGhpcy5kYXRhQ29uZmlncyA9IFtdDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNlbGVjdGVkRm9ybXVsYUNoYW5nZWQoKSB7DQogICAgICB0aGlzLmNvbHVtbnMgPSBbXQ0KICAgICAgdGhpcy5kYXRhQ29uZmlncyA9IFtdDQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgZm9ybXVsYUNvZGU6IHRoaXMuc2VsZWN0ZWRGb3JtdWxhLnBkdGVtcFBkQ2FsYy5wZENhbGNDb2RlDQogICAgICB9DQogICAgICBmaW5kRm9ybXVsYUluUnVsZUVuZ2luZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgbGV0IGRhdGFHZXQgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuZGF0YS5kYXRhR2V0KQ0KICAgICAgICBsZXQgcGFyYW1BcnIgPSBkYXRhR2V0LnBhcmFtQXJyDQogICAgICAgIGxldCBwYXJhbUxpc3QgPSBkYXRhR2V0LnBhcmFtTGlzdA0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtQXJyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgY29uc3QgcGFyYW1BcnJFbGVtZW50ID0gcGFyYW1BcnJbaV0NCiAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaCh7DQogICAgICAgICAgICBsYWJlbDogcGFyYW1BcnJFbGVtZW50LnByb3AsDQogICAgICAgICAgICBwcm9wOiBTdHJpbmcoaSksDQogICAgICAgICAgICBjb21tYW5kVHlwZTogcGFyYW1BcnJFbGVtZW50LmNvbHVtbg0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhQ29uZmlncyA9IHBhcmFtTGlzdA0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOinhOWImeihqOagvOWNlemAieaMiemSrg0KICAgIHNlbGVjdGVkQ2hhbmdlZDEocm93LCBjb2x1bW4sIGV2ZW50KSB7DQogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7DQogICAgICAgIGlmIChyb3cucGR0ZW1wUGRSdWxlcy5pZCA9PT0gdGhpcy5zZWxlY3RlZERlZjEpIHsNCiAgICAgICAgICB0aGlzLnJ1bGVTaG93ID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZERlZjEgPSAnJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5JZCA9IHJvdy5wZHRlbXBQZFJ1bGVzLmlkOw0KICAgICAgICAgIHRoaXMucHJvZHVjdEJuZnRGb3JtLnBkQnVzc1JsR3JkID0gcm93LnBkdGVtcFBkUnVsZXMucGRSdWxlR3JhZGU7Ly/op4TliJnmiYDlsZ7nuqfliKsNCiAgICAgICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5wcm9ncmFtSXRlbSA9IHJvdy5wZHRlbXBQZFJ1bGVzLnBkUHJvZ0NvZGU7Ly/mlrnmoYjpobkNCiAgICAgICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5ndWFyYW50ZWVJdGVtID0gcm93LnBkdGVtcFBkUnVsZXMucGRCbmZ0Q29kZTsvL+S/nemanOmhuQ0KICAgICAgICAgIHRoaXMucHJvZHVjdEJuZnRGb3JtLmd1YXJhbnRlZURldGFpbHMgPSByb3cucGR0ZW1wUGRSdWxlcy5wZEJuZnREdENvZGU7Ly/kv53pmpzmmI7nu4bpobkNCiAgICAgICAgICB0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5wYXltZW50SXRlbSA9IHJvdy5wZHRlbXBQZFJ1bGVzLnBkUHJlbUNvZGU7Ly/nvLTotLnpobkNCiAgICAgICAgICB0aGlzLnJ1bGVEZWNpc2lvbiA9IHJvdzsNCiAgICAgICAgICB0aGlzLnJ1bGVTaG93ID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLmZpbmRSdWxlc1BhcmFtZXRlcihyb3cpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBmaW5kUnVsZXNQYXJhbWV0ZXIocm93KSB7DQogICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICBjb2RlOiByb3cucGR0ZW1wUGRSdWxlcy5wZFJ1bGVDb2RlDQogICAgICB9Ow0KICAgICAgZmluZFJ1bGVzUGFyYW1ldGVyKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnJ1bGVDb2xzID0gW107DQogICAgICAgIHRoaXMucnVsZUNvbmZpZ3MgPSBbXTsNCiAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKHZhbCA9PiB7DQogICAgICAgICAgbGV0IHJ1bGVEYXRhID0gSlNPTi5wYXJzZSh2YWwuZGF0YUdldCk7DQogICAgICAgICAgbGV0IGxhYmVsID0gJyc7DQogICAgICAgICAgbGV0IGFyciA9IFtdDQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBydWxlRGF0YS5wYXJhbUFyci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgY29uc3QgcGFyYW1BcnJFbGVtZW50ID0gcnVsZURhdGEucGFyYW1BcnJbaV0NCiAgICAgICAgICAgIGlmIChwYXJhbUFyckVsZW1lbnQua2V5SWQuaW5kZXhPZigiLCIpID49IDApIHsNCiAgICAgICAgICAgICAgYXJyID0gcGFyYW1BcnJFbGVtZW50LmtleUlkLnNwbGl0KCcsJykNCiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICBsYWJlbCA9IGxhYmVsICsgdGhpcy5nZXRNdWx0aWxpbmd1YWwoYXJyW2pdLnRvVXBwZXJDYXNlKCkpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBsYWJlbCA9IHRoaXMuZ2V0TXVsdGlsaW5ndWFsKHBhcmFtQXJyRWxlbWVudC5rZXlJZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJ1bGVDb2xzLnB1c2goew0KICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsDQogICAgICAgICAgICAgIHByb3A6ICJydWxlRGF0YSIsDQogICAgICAgICAgICAgIHZhbHVlOiBwYXJhbUFyckVsZW1lbnQuY29sdW1uDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBydWxlRGF0YS5wYXJhbUxpc3QubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgIGlmICghdGhpcy5ydWxlQ29uZmlnc1tqXSkgew0KICAgICAgICAgICAgICB0aGlzLnJ1bGVDb25maWdzW2pdID0gew0KICAgICAgICAgICAgICAgIHBkQ29kZTogdGhpcy5wZFV3U2lUeXBlT3B0aW9ucy5wZENvZGUsDQogICAgICAgICAgICAgICAgdGlwczogdmFsLmRlc2NyaXB0aW9uDQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5ydWxlQ29uZmlnc1tqXSwgInJ1bGVEYXRhIiwgcnVsZURhdGEucGFyYW1MaXN0W2pdKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRNdWx0aWxpbmd1YWwoa2V5SWQpIHsNCiAgICAgIC8v6Iul57yT5a2Y5Y+W5LiN5Yiw5YC85YiZ5L2/55Soa2V5SWQNCiAgICAgIGxldCByZXN1bHQgPSBrZXlJZDsNCiAgICAgIGlmIChrZXlJZCAmJiBrZXlJZCAhPT0gJycgJiYga2V5SWQgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgIGxldCB2YWx1ZSA9ICh0aGlzLmxhbmd1YWdlICsgJ18nICsga2V5SWQpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgIGlmICh0aGlzLnJ1bGVNZXNzYWdlSW5mb0JvbVt2YWx1ZV0pIHsNCiAgICAgICAgICByZXN1bHQgPSB0aGlzLnJ1bGVNZXNzYWdlSW5mb0JvbVt2YWx1ZV07DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfSwNCiAgICBnZXRDYXB0aW9uKG9iaiwgc3RhdGUpIHsNCiAgICAgIGNvbnN0IGluZGV4ID0gb2JqLmxhc3RJbmRleE9mKCI6IikNCiAgICAgIGlmIChzdGF0ZSA9PT0gMCkgew0KICAgICAgICByZXR1cm4gb2JqLnN1YnN0cmluZygwLCBpbmRleCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBvYmouc3Vic3RyaW5nKGluZGV4ICsgMSwgb2JqLmxlbmd0aCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6KeE5YiZ6KGo5qC855qEIC0NCiAgICBkZWxSb3coaW5kZXgsIHJvdykgew0KICAgICAgdGhpcy5ydWxlQ29uZmlncy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgIH0sDQogICAgLy/op4TliJnooajmoLznmoQgKw0KICAgIGFkZFJvdyhpbmRleCwgcm93KSB7DQogICAgICB0aGlzLnJ1bGVDb25maWdzLnB1c2goew0KICAgICAgICBwZENvZGU6ICIiLA0KICAgICAgICB0aXBzOiAiIiwNCiAgICAgICAgcnVsZURhdGE6IFtdDQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZUNyZWF0ZSgpIHsNCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICBwYXJhbUFycjogW10sDQogICAgICAgIHBhcmFtTGlzdDogW10NCiAgICAgIH07DQogICAgICB0aGlzLnJ1bGVDb2xzLmZvckVhY2goY29sID0+IHsNCiAgICAgICAgZGF0YS5wYXJhbUFyci5wdXNoKHsNCiAgICAgICAgICBwcm9wOiBjb2wubGFiZWwsDQogICAgICAgICAgY29tbWFuZFR5cGU6IGNvbC52YWx1ZQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5ydWxlQ29uZmlncy5mb3JFYWNoKGNvbmZpZyA9PiB7IC8v6KeE5YiZ5Y+C5pWw6KGo5qC8DQogICAgICAgIGRhdGEucGFyYW1MaXN0LnB1c2goY29uZmlnLnJ1bGVEYXRhKTsNCiAgICAgIH0pOw0KICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOw0KICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgcnVsZUNvZGU6IHRoaXMucnVsZURlY2lzaW9uLnBkdGVtcFBkUnVsZXMucGRSdWxlQ29kZSwNCiAgICAgICAgZHluYW1pY1RhYmxlOiBkYXRhDQogICAgICB9Ow0KICAgICAgYWRkUnVsZXNEeW5hbWljKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3MocmVzLm1lc3NhZ2UpOw0KICAgICAgICB0aGlzLmZpbmRQZHRlbXBQZFJ1bGVzQnlQcm9kdWN0SWQoKTsNCiAgICAgICAgdGhpcy5zZWFyY2hSdWxlcygpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICByZWZyZXNoKCkgew0KICAgICAgdGhpcy5maW5kUHJlbUJ5SWQodGhpcy5wcm9kdWN0LmlkKQ0KICAgICAgdGhpcy5wcm9kdWN0Qm5mdEZvcm0ucGVybSA9IHRoaXMucGRVd1NpVHlwZU9wdGlvbnM7DQogICAgICB0aGlzLmZpbmRFeHRQcmVtQnlJZCh0aGlzLnByb2R1Y3RCbmZ0Rm9ybS5wZXJtKTsNCiAgICAgIHRoaXMucHJvZHVjdEJuZnRGb3JtLmV4dFByZW0gPSAnJzsNCiAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKCkNCiAgICAgIHRoaXMuZGF0YUNvbmZpZ3MgPSBbXQ0KICAgICAgdGhpcy5zZWxlY3RlZEZvcm11bGEgPSB7fQ0KICAgIH0sDQogICAgYnVpbGRDb2x1bW5EZXRhaWxzKCkgew0KICAgICAgdGhpcy5jb2x1bW5EZXRhaWxzID0ge30NCiAgICAgIGZvciAoY29uc3QgZm9ybXVsYVZvIG9mIHRoaXMuY29uZmlncykgew0KICAgICAgICBpZiAoIWZvcm11bGFWby5kYXRhR2V0KSB7DQogICAgICAgICAgY29udGludWUNCiAgICAgICAgfQ0KICAgICAgICBsZXQgZGF0YUdldCA9IEpTT04ucGFyc2UoZm9ybXVsYVZvLmRhdGFHZXQpDQogICAgICAgIGxldCBwYXJhbUFyciA9IGRhdGFHZXQucGFyYW1BcnINCiAgICAgICAgbGV0IHBhcmFtTGlzdCA9IGRhdGFHZXQucGFyYW1MaXN0DQogICAgICAgIGxldCBwZENhbGNDb2RlID0gZm9ybXVsYVZvLnBkUnVsZUNvZGUNCiAgICAgICAgbGV0IGRldGFpbEFyciA9IFtdDQogICAgICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcGFyYW1MaXN0KSB7DQogICAgICAgICAgbGV0IGNvbHVtbkRldGFpbCA9IFtdDQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbUFyci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgY29uc3QgbGFiZWxWbyA9IHBhcmFtQXJyW2ldDQogICAgICAgICAgICBjb2x1bW5EZXRhaWwucHVzaCh7DQogICAgICAgICAgICAgIGxhYmVsOiBsYWJlbFZvLnByb3AsDQogICAgICAgICAgICAgIHZhbHVlOiBwYXJhbVtsYWJlbFZvLmNvbHVtbl0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICAgIGRldGFpbEFyci5wdXNoKGNvbHVtbkRldGFpbCkNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRzZXQodGhpcy5jb2x1bW5EZXRhaWxzLCBwZENhbGNDb2RlLCBkZXRhaWxBcnIpDQogICAgICB9DQogICAgfQ0KICB9LA0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-framework-def/pd-structure-def/payment-def/prem-rule","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :isDialog=\"true\" @backTo=\"back\" :label=\"$t('pay_def.premium_rule_def')\" />\r\n    <cus-form-title :first=\"true\" :label=\"$t('pay_def.premium_rule_def')\"></cus-form-title>\r\n    <el-form :model=\"productBnftForm\" label-width=\"auto\" ref=\"productBnftForm\">\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.paymentItem')\">\r\n            <el-select :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" @change=\"findExtPremById($event)\" clearable\r\n                       filterable v-model=\"productBnftForm.perm\">\r\n              <el-option :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" v-for=\"item in Options1\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.addPayItem')\">\r\n            <el-select :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable filterable\r\n                       v-model=\"productBnftForm.extPrem\">\r\n              <el-option :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" v-for=\"item in Options2\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <el-button  size=\"small\" @click=\"toFormulaSelect\" icon=\"el-icon-connection\" type=\"primary\">\r\n      选择规则\r\n    </el-button>\r\n    <cus-form-title :first=\"true\" :label=\"$t('i18nView.feeRules')\"></cus-form-title>\r\n    <cus-table-title :label=\"$t('i18nView.pdFeeRules')\"/>\r\n    <el-table :data=\"configs\" @row-click=\"selectedChanged1\" align=\"center\" border class=\"wraper-table\"\r\n              element-loading-text=\"Loading\"\r\n              fit highlight-current-row size=\"mini\">\r\n      <el-table-column :label=\"$t('pdtempPdNbInfo.selection')\" align=\"center\"  width=\"80px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio :label=\"scope.row.pdtempPdRules.id\" v-model=\"selectedDef1\">\r\n            <span class=\"el-radio__label\"></span>\r\n          </el-radio>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" prop=\"index\">\r\n        <template slot-scope=\"scope\">{{ scope.$index + 1 }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.detail')\" type=\"expand\">\r\n        <template v-slot=\"props\">\r\n          <div v-if=\"props.row.dataGet\">\r\n            <div v-for=\"columnDetail in columnDetails[props.row.pdCalcCode]\">\r\n              <el-form class=\"demo-table-expand\" inline label-position=\"left\" label-width=\"250px\">\r\n                <el-form-item :label=\"item.label\" v-for=\"item in columnDetail\">\r\n                  <span>{{ item.value }}</span>\r\n                </el-form-item>\r\n              </el-form>\r\n              <el-divider\r\n                v-if=\"columnDetails[props.row.pdCalcCode].indexOf(columnDetail)<columnDetails[props.row.pdCalcCode].length-1\"></el-divider>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.pdBussType')\">\r\n                <span>{{ props.row.pdBussType | filter_pdBussType }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.pdBussDetailType')\">\r\n                <span>{{ props.row.pdBussDetailType | filter_pdBussDetailType }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.pdBussCode')\">\r\n                <span>{{ props.row.pdBussCode }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.pdBussName')\">\r\n                <span>{{ props.row.pdBussName }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.pdCalcCode')\">\r\n                <span>{{ props.row.pdCalcCode }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.pdCalcDesc')\">\r\n                <span>{{ props.row.pdCalcDesc }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.rateTableName')\">\r\n                <span>{{ props.row.rateTableName }}</span>\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('underwritingAmountFormulaSelect.preservationItem')\">\r\n                <span>{{ props.row.preservationItem }}</span>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('i18nView.paymentItem')\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.pdtempPdRules.pdPremCode }}<span\r\n            v-show=\"scope.row.pdtempPdRules.pdPremCode\">:</span>{{ scope.row.premName }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('i18nView.addPayItem')\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.pdtempPdRules.pdExtPremCode }}<span v-show=\"scope.row.pdtempPdRules.pdExtPremCode\">:</span>{{\r\n              scope.row.extPremName\r\n            }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdRuleCode')\" align=\"center\"\r\n                       prop=\"pdtempPdRules.pdRuleCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdRuleDesc')\"\r\n                       prop=\"pdtempPdRules.pdRuleDesc\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.actions')\" align=\"center\" fixed=\"right\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button  size=\"small\" @click=\"delRuleRow(scope.$index,scope.row)\" icon=\"el-icon-delete\" type=\"danger\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n\r\n    <div v-show=\"ruleShow\">\r\n      <cus-table-title :label=\"$t('i18nView.pdClaimVerificationRulesParam')\"/>\r\n\r\n      <el-table :data=\"ruleConfigs\" align=\"center\" border class=\"wraper-table\" element-loading-text=\"Loading\" fit\r\n                highlight-current-row size=\"mini\">>\r\n        <el-table-column :key=\"i\" :label=\"col.label\" :prop=\"col.prop\" v-for=\"(col,i) in ruleCols\">\r\n          <template slot-scope=\"scope\">\r\n            <el-input :placeholder=\"$t('rule.please_enter')\" v-model=\"scope.row.ruleData[col.value]\">\r\n            </el-input>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.actions')\" align=\"center\" fixed=\"right\" width=\"300\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button  @click=\"delRow(scope.$index,scope.row)\" icon=\"el-icon-minus\" size=\"mini\"\r\n                       type=\"danger\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-row>\r\n        <el-button  @click=\"addRow\" icon=\"el-icon-plus\" size=\"mini\" type=\"primary\"></el-button>\r\n      </el-row>\r\n    </div>\r\n\r\n    <el-form>\r\n      <el-form-item align=\"right\">\r\n        <el-button  size=\"small\" @click=\"handleCreate\" icon=\"el-icon-success\" type=\"primary\">\r\n          {{ $t('pdtempPdClmBnft.save') }}\r\n        </el-button>\r\n        <el-button  size=\"small\" @click=\"refresh\" icon=\"el-icon-refresh\" type=\"primary\">\r\n          {{ $t('pdtempPdClmBnft.clean') }}\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport {findExtPremById,} from \"@/api/basicinfo/premAmountFormula\";\r\nimport {allFormulaByPdInfoId} from \"@/api/basicinfo/premRules\";\r\nimport {findFormulaInRuleEngine} from \"@/api/basicinfo/underwritingAmountFormula\"\r\n\r\nimport {\r\n  addRulesDynamic,\r\n  deletePdtempPdRules,\r\n  findPremById,\r\n  findRulesParameter\r\n} from '@/api/basicinfo/acceptInsuranceRules'\r\n\r\nlet _this\r\n\r\nexport default {\r\n  name: 'premRules',\r\n  filters: {\r\n    filter_pdBussType(code) {\r\n      return _this.getCodeName('pdCalcBussType', code)\r\n    },\r\n    filter_pdBussDetailType(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    }\r\n  },\r\n  props: {\r\n    guaranteeDetails: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n\r\n    calculationFormulaType: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n    pdUwSiTypeOptions: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n    pdUwSiTypeDtOptions: {\r\n      type: String,\r\n      default: undefined\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      language: null,\r\n      ruleMessageInfoBom: [],\r\n\r\n      ruleDecision: [],\r\n      productBnftForm: {},\r\n      columnDetails: {},\r\n      selectedFormula: {},\r\n      dataConfigs: [],\r\n      Options1: [],//缴费\r\n      Options2: [],//加费\r\n      ruleShow: false,//规则参数表格显示标识\r\n      selectedDef1: '',//产品承保核保规则表格单选按钮\r\n      ruleCols: [],//决策表的数据\r\n      ruleConfigs: [],//决策表的数据\r\n\r\n\r\n      //产品承保核保规则表格数据\r\n      configs: [],\r\n      product: {\r\n        id: undefined,\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      columns: [],\r\n\r\n    }\r\n  },\r\n  watch: {\r\n    configs() {\r\n      this.buildColumnDetails()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.language = this.$store.state.app.language;\r\n    this.ruleMessageInfoBom = this.$store.state.ruleMessage.ruleMessages;\r\n  },\r\n  created() {\r\n    this.initProductInfo();\r\n    if (this.guaranteeDetails != undefined) {\r\n      this.productBnftForm.bnftDtType = this.guaranteeDetails;\r\n      this.productBnftForm.ExpressionType = this.calculationFormulaType;\r\n      this.productBnftForm.perm = this.pdUwSiTypeOptions;\r\n      this.findExtPremById(this.productBnftForm.perm)\r\n    }\r\n    // 初始化\r\n    this.findPremById(this.product.id)\r\n    this.productBnftForm.product = this.product.pdCode + \":\" + this.product.id\r\n    this.handleSearch();\r\n  },\r\n  methods: {\r\n    //显示缴费项数组\r\n    findPremById(id) {\r\n      let params = {\r\n        pdInfoId: id,\r\n        pdProgCode: '',\r\n      };\r\n      findPremById(params).then(res => {\r\n        let data = res.data;\r\n        this.Options1 = [];\r\n        if (data.length) {\r\n          data.forEach(val => {\r\n            this.Options1.push({\r\n              key: val.id,\r\n              value: val.id + \":\" + val.pdPremCode,\r\n              label: val.pdPremCode + \":\" + val.pdPayName\r\n            });\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //显示加费项数组\r\n    findExtPremById(row) {\r\n      let code = this.getCaption(row, 1);\r\n      findExtPremById(code).then(res => {\r\n        let data = res.data;\r\n        this.Options2 = [];\r\n        if (data.length) {\r\n          data.forEach(val => {\r\n            this.Options2.push({\r\n              key: val.id,\r\n              value: val.id + \":\" + val.pdExtPremCode,\r\n              label: val.pdExtPremCode + \":\" + val.pdExtPremName\r\n            });\r\n\r\n          });\r\n        }\r\n      });\r\n    },\r\n    async handleSearch() {\r\n      //分页传输数据\r\n      if (this.product.id) {\r\n        const params = {\r\n          eq_pdInfoId: this.product.id,\r\n          eq_pdRuleCls: '1',\r\n          eq_pdRuleDtCls: this.calculationFormulaType,\r\n          eq_pdType: '1'\r\n        };\r\n        await allFormulaByPdInfoId(this.buildRequestData(params)).then(res => {\r\n          this.underwritingRulesVo = res.data.records;\r\n          this.configs = [];\r\n          this.configs = res.data.records;\r\n        });\r\n      }\r\n    },\r\n    delRuleRow(index, row) {\r\n      deletePdtempPdRules(row.pdtempPdRules.id).then(res => {\r\n        this.notifySuccess(res.message);\r\n        this.findPdtempPdRulesByProductId();\r\n      });\r\n    },\r\n    initProductInfo() {\r\n      let pdtempPdInfo = this.getPdData();\r\n      if (pdtempPdInfo !== undefined) {\r\n        Object.assign(this.product, pdtempPdInfo)\r\n      }\r\n    },\r\n    back() {\r\n      this.$emit('changeDialogVisible_formula', false)\r\n    },\r\n    toFormulaSelect() {\r\n      this.$emit('changeDialogVisible_formulaSelect', true,\r\n        this.productBnftForm.bnftDtType, this.productBnftForm.ExpressionType, this.productBnftForm.perm, this.productBnftForm.extPrem)\r\n    },\r\n    rowClick(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.pdtempPdCalc.id === this.selectedFormula.pdtempPdCalc.id) {\r\n          this.selectedFormula = {}\r\n          this.columns = []\r\n          this.dataConfigs = []\r\n        }\r\n      }\r\n    },\r\n    selectedFormulaChanged() {\r\n      this.columns = []\r\n      this.dataConfigs = []\r\n      const param = {\r\n        formulaCode: this.selectedFormula.pdtempPdCalc.pdCalcCode\r\n      }\r\n      findFormulaInRuleEngine(this.buildRequestData(param)).then(response => {\r\n        let dataGet = JSON.parse(response.data.data.dataGet)\r\n        let paramArr = dataGet.paramArr\r\n        let paramList = dataGet.paramList\r\n        for (let i = 0; i < paramArr.length; i++) {\r\n          const paramArrElement = paramArr[i]\r\n          this.columns.push({\r\n            label: paramArrElement.prop,\r\n            prop: String(i),\r\n            commandType: paramArrElement.column\r\n          })\r\n        }\r\n        this.dataConfigs = paramList\r\n      })\r\n    },\r\n    // 规则表格单选按钮\r\n    selectedChanged1(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.pdtempPdRules.id === this.selectedDef1) {\r\n          this.ruleShow = false;\r\n          this.selectedDef1 = '';\r\n        } else {\r\n          this.productBnftForm.Id = row.pdtempPdRules.id;\r\n          this.productBnftForm.pdBussRlGrd = row.pdtempPdRules.pdRuleGrade;//规则所属级别\r\n          this.productBnftForm.programItem = row.pdtempPdRules.pdProgCode;//方案项\r\n          this.productBnftForm.guaranteeItem = row.pdtempPdRules.pdBnftCode;//保障项\r\n          this.productBnftForm.guaranteeDetails = row.pdtempPdRules.pdBnftDtCode;//保障明细项\r\n          this.productBnftForm.paymentItem = row.pdtempPdRules.pdPremCode;//缴费项\r\n          this.ruleDecision = row;\r\n          this.ruleShow = true;\r\n          this.findRulesParameter(row);\r\n        }\r\n      }\r\n    },\r\n    findRulesParameter(row) {\r\n      let params = {\r\n        code: row.pdtempPdRules.pdRuleCode\r\n      };\r\n      findRulesParameter(params).then(res => {\r\n        this.ruleCols = [];\r\n        this.ruleConfigs = [];\r\n        let data = res.data;\r\n        data.forEach(val => {\r\n          let ruleData = JSON.parse(val.dataGet);\r\n          let label = '';\r\n          let arr = []\r\n          for (let i = 0; i < ruleData.paramArr.length; i++) {\r\n            const paramArrElement = ruleData.paramArr[i]\r\n            if (paramArrElement.keyId.indexOf(\",\") >= 0) {\r\n              arr = paramArrElement.keyId.split(',')\r\n              for (let j = 0; j < arr.length; j++) {\r\n                label = label + this.getMultilingual(arr[j].toUpperCase());\r\n              }\r\n            } else {\r\n              label = this.getMultilingual(paramArrElement.keyId);\r\n            }\r\n            this.ruleCols.push({\r\n              label: label,\r\n              prop: \"ruleData\",\r\n              value: paramArrElement.column\r\n            });\r\n          }\r\n          for (let j = 0; j < ruleData.paramList.length; j++) {\r\n            if (!this.ruleConfigs[j]) {\r\n              this.ruleConfigs[j] = {\r\n                pdCode: this.pdUwSiTypeOptions.pdCode,\r\n                tips: val.description\r\n              };\r\n            }\r\n            this.$set(this.ruleConfigs[j], \"ruleData\", ruleData.paramList[j]);\r\n          }\r\n        });\r\n      });\r\n    },\r\n    getMultilingual(keyId) {\r\n      //若缓存取不到值则使用keyId\r\n      let result = keyId;\r\n      if (keyId && keyId !== '' && keyId !== 'undefined') {\r\n        let value = (this.language + '_' + keyId).toUpperCase();\r\n        if (this.ruleMessageInfoBom[value]) {\r\n          result = this.ruleMessageInfoBom[value];\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    getCaption(obj, state) {\r\n      const index = obj.lastIndexOf(\":\")\r\n      if (state === 0) {\r\n        return obj.substring(0, index)\r\n      } else {\r\n        return obj.substring(index + 1, obj.length)\r\n      }\r\n    },\r\n    //规则表格的 -\r\n    delRow(index, row) {\r\n      this.ruleConfigs.splice(index, 1);\r\n    },\r\n    //规则表格的 +\r\n    addRow(index, row) {\r\n      this.ruleConfigs.push({\r\n        pdCode: \"\",\r\n        tips: \"\",\r\n        ruleData: []\r\n      });\r\n    },\r\n    handleCreate() {\r\n      let data = {\r\n        paramArr: [],\r\n        paramList: []\r\n      };\r\n      this.ruleCols.forEach(col => {\r\n        data.paramArr.push({\r\n          prop: col.label,\r\n          commandType: col.value\r\n        });\r\n      });\r\n      this.ruleConfigs.forEach(config => { //规则参数表格\r\n        data.paramList.push(config.ruleData);\r\n      });\r\n      data = JSON.stringify(data);\r\n      let params = {\r\n        ruleCode: this.ruleDecision.pdtempPdRules.pdRuleCode,\r\n        dynamicTable: data\r\n      };\r\n      addRulesDynamic(params).then(res => {\r\n        this.notifySuccess(res.message);\r\n        this.findPdtempPdRulesByProductId();\r\n        this.searchRules();\r\n      });\r\n    },\r\n    refresh() {\r\n      this.findPremById(this.product.id)\r\n      this.productBnftForm.perm = this.pdUwSiTypeOptions;\r\n      this.findExtPremById(this.productBnftForm.perm);\r\n      this.productBnftForm.extPrem = '';\r\n      this.handleSearch()\r\n      this.dataConfigs = []\r\n      this.selectedFormula = {}\r\n    },\r\n    buildColumnDetails() {\r\n      this.columnDetails = {}\r\n      for (const formulaVo of this.configs) {\r\n        if (!formulaVo.dataGet) {\r\n          continue\r\n        }\r\n        let dataGet = JSON.parse(formulaVo.dataGet)\r\n        let paramArr = dataGet.paramArr\r\n        let paramList = dataGet.paramList\r\n        let pdCalcCode = formulaVo.pdRuleCode\r\n        let detailArr = []\r\n        for (const param of paramList) {\r\n          let columnDetail = []\r\n          for (let i = 0; i < paramArr.length; i++) {\r\n            const labelVo = paramArr[i]\r\n            columnDetail.push({\r\n              label: labelVo.prop,\r\n              value: param[labelVo.column]\r\n            })\r\n          }\r\n          detailArr.push(columnDetail)\r\n        }\r\n        this.$set(this.columnDetails, pdCalcCode, detailArr)\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}