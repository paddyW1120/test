{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-revision\\pd-rule-rev\\pd-preservation-rule-rev\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-revision\\pd-rule-rev\\pd-preservation-rule-rev\\index.vue","mtime":1609847107085},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBwZGdlbmxQYVJ1bGUgZnJvbSAiQC92aWV3cy9nZW5lcmFsLWNvbmZpZy9nZW4tcGFJbmZvLWNvbmYvcGRnZW5sUGFSdWxlL2luZGV4Ig0KaW1wb3J0IHtkZWxldGVSdWxlT3JDYWxjfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcG9JbmZvRGVzaWduIg0KDQpsZXQgX3RoaXMNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3Byb2R1Y3RSdWxlUmV2aXNpb25RdWVyeScsDQogIGZpbHRlcnM6IHsNCiAgICBmaWx0ZXJfcnVsZUJ1c2luZXNzTW9kdWxlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzTW9kdWxlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9ydWxlQnVzaW5lc3NEZXRhaWxDbGFzcyhjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3J1bGVCdXNpbmVzc0RldGFpbENsYXNzJywgY29kZSkNCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBwZGdlbmxQYVJ1bGUNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICBfdGhpcyA9IHRoaXMNCiAgICByZXR1cm4gew0KICAgICAgcGFnZTogdW5kZWZpbmVkLA0KICAgICAgcGFnZVNpemU6IHVuZGVmaW5lZCwNCiAgICAgIHByb2R1Y3Q6IHsNCiAgICAgICAgcGRDb2RlOiAnJywNCiAgICAgICAgcGROYW1lOiAnJywNCiAgICAgICAgcGRFZGl0aW9uOiAnJw0KICAgICAgfSwNCiAgICAgIHBkcGFGb3JtOiB7DQogICAgICAgIHNlY3VyaXR5UHJvamVjdDogJycsDQogICAgICAgIHJ1bGVzU3ViY2xhc3M6ICcnLA0KICAgICAgfSwNCiAgICAgIGZvcm1BZGRSdWxlOiB7DQogICAgICAgIHBkUnVsZUR0Q2xzOiAnJw0KICAgICAgfSwNCiAgICAgIHJ1bGVzRm9yQWRkUnVsZTogew0KICAgICAgICBwZFJ1bGVEdENsczogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UnVsZVJldmlzaW9uUXVlcnkucGxlYXNlU2VsZWN0UGRSdWxlRHRDbHMnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XQ0KICAgICAgfSwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IHsNCiAgICAgICAgcnVsZTogZmFsc2UNCiAgICAgIH0sDQogICAgICBwYXJhbXNfY3VycmVudFJ1bGU6IHsNCiAgICAgICAgcGR0ZW1wUGRQYUluZm9WbzogdW5kZWZpbmVkLA0KICAgICAgICBydWxlVHlwZTogJzEnDQogICAgICB9LA0KICAgICAgcGRQYUluZm86IHsNCiAgICAgICAgaWQ6ICcnLA0KICAgICAgICBwZFBhQ29kZTogJycsDQogICAgICAgIHBkUGFOYW1lOiAnJywNCiAgICAgICAgcGRBdHRyOiAnJywNCiAgICAgICAgcGRQYVR5cGU6IFtdLA0KICAgICAgICBwZENvZGU6ICcnLA0KICAgICAgICBwZGdlbmxQZFBhRGVzVHlwZUxpc3Q6IFtdLA0KICAgICAgfSwNCiAgICAgIHRhYmxlRGF0YV9ydWxlUGFyYW06IFtdLA0KICAgICAgY29uZmlnc1J1bGU6IFtdLA0KICAgICAgY29uZmlnZEl0ZW06IFtdLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHBkSW5mb0lkOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICBjb2x1bW5zOiBbXSwNCiAgICAgIHNlbGVjdGVkRGVmOiB7fSwNCiAgICAgIHNlbGVjdGVkUE86IHt9LA0KICAgICAgc2hvd1NlbGVPcHRpb25zOiBmYWxzZSwNCiAgICAgIC8v5qOA6aqM6KeE5YiZDQogICAgICBydWxlczoge30sDQogICAgICBydWxlVmlldzogew0KICAgICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgICAgcGVyZm9ybVR5cGU6ICcnLA0KICAgICAgICBmbGFnOiAnJywNCiAgICAgICAgcnVsZUNvZGU6ICcnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucGFnZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2UNCiAgICB0aGlzLnBhZ2VTaXplID0gdGhpcy4kcm91dGUucXVlcnkucGFnZVNpemUNCiAgICB0aGlzLnByb2R1Y3QgPSB0aGlzLmdldFBkRGF0YSgpDQogICAgdGhpcy5wYXJhbXMucGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCkNCiAgICAgIHRoaXMuc2VsZWN0ZWRQTyA9IHt9DQogICAgICB0aGlzLnNob3dTZWxlT3B0aW9ucyA9IGZhbHNlDQogICAgfSkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJvd0NsaWNrKHJvdywgY29sdW1uLCBldmVudCkgew0KICAgICAgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gIklOUFVUIikgew0KICAgICAgICBpZiAocm93LmlkID09PSB0aGlzLnNlbGVjdGVkUE8uaWQpIHsNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkUE8gPSB7fQ0KICAgICAgICAgIHRoaXMuc2hvd1NlbGVPcHRpb25zID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2hvb3NlRGVmKCkgew0KICAgICAgdGhpcy5zaG93U2VsZU9wdGlvbnMgPSB0cnVlDQogICAgICB0aGlzLnBhcmFtc19jdXJyZW50UnVsZS5wZHRlbXBQZFBhSW5mb1ZvID0gdGhpcy5zZWxlY3RlZFBPDQogICAgICB0aGlzLmZvcm1BZGRSdWxlLnBkUnVsZUR0Q2xzID0gJycNCiAgICB9LA0KICAgIHJlbW92ZVJ1bGUocm93KSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgcnVsZVR5cGU6ICcxJywNCiAgICAgICAgcGR0ZW1wUGRSdWxlc1ZvOiByb3csDQogICAgICAgIHBkdGVtcFBkQ2FsY1ZvOiByb3cNCiAgICAgIH0NCiAgICAgIGRlbGV0ZVJ1bGVPckNhbGModGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtKSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5kZWxldGUnKSkNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnRSdWxlLnJlbG9hZCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd1J1bGUocm93KSB7DQogICAgICB0aGlzLnJ1bGVWaWV3LmZsYWcgPSAnMScNCiAgICAgIHRoaXMucnVsZVZpZXcucnVsZUNvZGUgPSByb3cucGRSdWxlQ29kZQ0KICAgICAgdGhpcy5ydWxlVmlldy5wZXJmb3JtVHlwZSA9IHJvdy5wZXJmb3JtVHlwZQ0KICAgICAgdGhpcy5ydWxlVmlldy52aXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgcnVsZVZpZXdDbG9zZWQoKSB7DQogICAgICB0aGlzLnJ1bGVWaWV3LnZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5zZWxlY3RlZERlZiA9ICcnDQogICAgfSwNCiAgICB0b1J1bGVzKCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtQWRkUnVsZS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZS5ydWxlID0gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZm9jdXNJdGVtKCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRlbGV0ZUZvcm11bGFQYXJhbShyb3cpIHsNCiAgICAgIHRoaXMudGFibGVEYXRhX2Zvcm11bGFQYXJhbS5zcGxpY2UodGhpcy50YWJsZURhdGFfZm9ybXVsYVBhcmFtLmluZGV4T2Yocm93KSwgMSkNCiAgICB9LA0KICAgIC8qIOWIt+aWsOmHjee9rumAieaLqeeahOS/neWFqOmhueebriAqLw0KICAgIHJlZnJlc2hTZWxPcHRpb25zKCkgew0KICAgICAgdGhpcy5zZWxlY3RlZERlZiA9IHt9DQogICAgICB0aGlzLmNvbHVtbnMgPSBbXQ0KICAgICAgdGhpcy50YWJsZURhdGFfcnVsZVBhcmFtID0gW10NCiAgICB9LA0KICAgIHNlbGVjdGVkRGVmQ2hhbmdlZCgpIHsNCiAgICAgIHRoaXMucnVsZVZpZXcuZmxhZyA9IHRoaXMuc2VsZWN0ZWREZWYucnVsZUF0dHIgPT09ICcxJyA/ICcxJyA6ICcyJw0KICAgICAgdGhpcy5ydWxlVmlldy5wZXJmb3JtVHlwZSA9IHRoaXMuc2VsZWN0ZWREZWYucGVyZm9ybVR5cGUNCiAgICAgIHRoaXMucnVsZVZpZXcucnVsZUNvZGUgPSB0aGlzLnNlbGVjdGVkRGVmLnBkUnVsZUNvZGUNCiAgICAgIHRoaXMucnVsZVZpZXcudmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIC8q5Y+W5raI6YCJ5Lit5LiA6KGM6KeE5YiZKi8NCiAgICByb3dDbGlja0NvbmZpZ3NSdWxlKHJvdywgY29sdW1uLCBldmVudCkgew0KICAgICAgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gIklOUFVUIikgew0KICAgICAgICBpZiAocm93LmlkID09PSB0aGlzLnNlbGVjdGVkRGVmLmlkKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZERlZiA9IHt9DQogICAgICAgICAgdGhpcy5jb2x1bW5zID0gW10NCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9ydWxlUGFyYW0gPSBbXQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZURpYWxvZ1J1bGUoKSB7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUucnVsZSA9IGZhbHNlDQogICAgICB0aGlzLiRyZWZzLnBhZ2VfY3VycmVudFJ1bGUucmVsb2FkKCkNCiAgICB9LA0KICAgIGJhY2tUb01lbnUoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeinhOWImeiuouato+S4u+mhtScsIHBhcmFtczoge3BhdGg6IHRoaXMuJHJvdXRlLnBhdGgsIHBhZ2U6IHRoaXMucGFnZSwgcGFnZVNpemU6IHRoaXMucGFnZVNpemV9fSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-revision/pd-rule-rev/pd-preservation-rule-rev","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <!--关联规则-->\r\n    <div>\r\n      <cus-page-title-back :label=\"$t('route.productPvRuleRevision')\" @backTo=\"backToMenu\"/>\r\n    </div>\r\n    <!-- 产品信息 -->\r\n    <el-form ref=\"form\" :model=\"product\" label-width=\"auto\">\r\n      <el-row :gutter=\"20\">\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productRuleRevisionQuery.product')\">\r\n            <el-tag type=\"info\">{{ product.pdCode + \" : \" + product.pdName }}</el-tag>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productRuleRevisionQuery.pdEdition')\">\r\n            <el-tag type=\"info\">{{ product.pdEdition }}</el-tag>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"10\"></cus-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <cus-table-title :label=\"$t('productRuleRevisionQuery.pdItem')\"></cus-table-title>\r\n    <el-table :data=\"configdItem\" border @row-click=\"rowClick\">\r\n      <el-table-column :label=\"$t('pdtempPdBnft.choose')\" align=\"center\" width=\"50\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group v-model=\"selectedPO\" @change=\"chooseDef\">\r\n            <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdCode')\" align=\"center\" prop=\"pdCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('productRuleRevisionQuery.posCode')\" align=\"center\" prop=\"paCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('productRuleRevisionQuery.posName')\" align=\"center\" prop=\"paName\"></el-table-column>\r\n      <el-table-column :label=\"$t('productRuleRevisionQuery.ruleCount')\" align=\"center\"\r\n                       prop=\"ruleCount\"></el-table-column>\r\n      <el-table-column :label=\"$t('productRuleRevisionQuery.calcCount')\" align=\"center\"\r\n                       prop=\"calcCount\"></el-table-column>\r\n    </el-table>\r\n    <cus-pagination ref=\"page\" v-model=\"configdItem\" :autoBuild=\"false\" :pageSize=\"10\" :params=\"params\"\r\n                    url=\"/pd-po-info/base/getPdPaInfo\"/>\r\n\r\n    <div v-if=\"showSeleOptions\">\r\n      <cus-form-title :label=\"$t('i18nView.pdgenlPdPaInfo')\" style=\"margin-top: 50px\"></cus-form-title>\r\n      <el-form ref=\"formAddRule\" :model=\"formAddRule\" :rules=\"rulesForAddRule\" label-width=\"auto\">\r\n        <el-row :gutter=\"10\" type=\"flex\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('rule.pdRuleDtCls')\" prop=\"pdRuleDtCls\">\r\n              <cus-select v-model=\"formAddRule.pdRuleDtCls\" codetype=\"ruleBusinessDetailClass\"\r\n                          filter=\"1$14$15\"></cus-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\"></el-col>\r\n          <el-col :span=\"8\" style=\"text-align: right\">\r\n            <el-form-item>\r\n              <el-button dialog-disable=\"disable\" icon=\"el-icon-connection\" size=\"small\" type=\"primary\"\r\n                         @click=\"toRules\">\r\n                {{ $t('rule.moreRule') }}\r\n              </el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <cus-table-title :label=\"$t('productRuleRevisionQuery.ppRule')\"></cus-table-title>\r\n      <el-table :data=\"configsRule\" :span=\"8\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                size=\"mini\" @row-click=\"rowClickConfigsRule\">\r\n        <el-table-column :label=\"$t('table.select')\" width=\"50\"  align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-radio-group v-model=\"selectedDef\" @change=\"selectedDefChanged\">\r\n              <span><el-radio :label=\"scope.row\">{{ '' }}</el-radio></span>\r\n            </el-radio-group>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n          <template v-slot=\"scope\">\r\n            {{ initTableIndex('page_currentRule', scope.$index) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.detail')\" align=\"center\" width=\"80\">\r\n          <template v-slot=\"scope\">\r\n            <el-button dialog-disable=\"disable\" size=\"small\" type=\"text\" @click=\"showRule(scope.row)\">>>\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.ruleCode')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdRuleCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.ruleType')\" align=\"center\"\r\n                         min-width=\"200\" prop=\"pdRuleCls\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdRuleCls | filter_ruleBusinessModule }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productRuleRevisionQuery.pdRuleDtCls')\" align=\"center\"\r\n                         min-width=\"200\" prop=\"pdRuleDtCls\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdRuleDtCls | filter_ruleBusinessDetailClass }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.ruleDec')\" align=\"center\"\r\n                         min-width=\"200\" prop=\"pdRuleDesc\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.ruleFlag')\" align=\"center\"\r\n                         min-width=\"200\" prop=\"valDefFlag\"></el-table-column>\r\n        <el-table-column :label=\"$t('productRuleRevisionQuery.saleChannel')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"saleChannel\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdgenlPaInfo.rulesDescription')\" align=\"center\" min-width=\"200\" prop=\"description\"\r\n        ></el-table-column>\r\n        <el-table-column :label=\"$t('table.actions')\" align=\"center\" prop=\"\" width=\"100\">\r\n          <template v-slot=\"scope\">\r\n            <cus-del-btn @ok=\"removeRule(scope.row)\"></cus-del-btn>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <cus-pagination ref=\"page_currentRule\" v-model=\"configsRule\" :pageSize=\"5\"\r\n                      :params=\"params_currentRule\" url=\"/pd-po-info/base/getRuleAndCalcInfo\"/>\r\n    </div>\r\n\r\n    <!-- 公式查看弹窗 -->\r\n    <cus-rule-modify :flag=\"ruleView.flag\" :performType=\"ruleView.performType\" :ruleCode=\"ruleView.ruleCode\"\r\n                     :ruleModifyClosed=\"ruleViewClosed\" :visible=\"ruleView.visible\" ruleType=\"1\"></cus-rule-modify>\r\n\r\n    <el-dialog v-if=\"dialogVisible.rule\" v-dialog-drag :close-on-click-modal=\"false\" :close-on-press-escape=\"false\"\r\n               :show-close=\"true\" :visible.sync=\"dialogVisible.rule\" center width=\"75%\" @close=\"closeDialogRule\">\r\n      <pdgenlPaRule :pdPaInfo=\"selectedPO\" :pdRuleDtCls=\"formAddRule.pdRuleDtCls\" Mark=\"pd\"\r\n                    @closeDialogRule=\"closeDialogRule\"></pdgenlPaRule>\r\n    </el-dialog>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport pdgenlPaRule from \"@/views/general-config/gen-paInfo-conf/pdgenlPaRule/index\"\r\nimport {deleteRuleOrCalc} from \"@/api/basicinfo/poInfoDesign\"\r\n\r\nlet _this\r\nexport default {\r\n  name: 'productRuleRevisionQuery',\r\n  filters: {\r\n    filter_ruleBusinessModule(code) {\r\n      return _this.getCodeName('ruleBusinessModule', code)\r\n    },\r\n    filter_ruleBusinessDetailClass(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    }\r\n  },\r\n  components: {\r\n    pdgenlPaRule\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      page: undefined,\r\n      pageSize: undefined,\r\n      product: {\r\n        pdCode: '',\r\n        pdName: '',\r\n        pdEdition: ''\r\n      },\r\n      pdpaForm: {\r\n        securityProject: '',\r\n        rulesSubclass: '',\r\n      },\r\n      formAddRule: {\r\n        pdRuleDtCls: ''\r\n      },\r\n      rulesForAddRule: {\r\n        pdRuleDtCls: [{\r\n          required: true,\r\n          message: this.$t('productRuleRevisionQuery.pleaseSelectPdRuleDtCls'),\r\n          trigger: 'change'\r\n        }]\r\n      },\r\n      dialogVisible: {\r\n        rule: false\r\n      },\r\n      params_currentRule: {\r\n        pdtempPdPaInfoVo: undefined,\r\n        ruleType: '1'\r\n      },\r\n      pdPaInfo: {\r\n        id: '',\r\n        pdPaCode: '',\r\n        pdPaName: '',\r\n        pdAttr: '',\r\n        pdPaType: [],\r\n        pdCode: '',\r\n        pdgenlPdPaDesTypeList: [],\r\n      },\r\n      tableData_ruleParam: [],\r\n      configsRule: [],\r\n      configdItem: [],\r\n      params: {\r\n        pdInfoId: undefined\r\n      },\r\n      columns: [],\r\n      selectedDef: {},\r\n      selectedPO: {},\r\n      showSeleOptions: false,\r\n      //检验规则\r\n      rules: {},\r\n      ruleView: {\r\n        visible: false,\r\n        performType: '',\r\n        flag: '',\r\n        ruleCode: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.page = this.$route.query.page\r\n    this.pageSize = this.$route.query.pageSize\r\n    this.product = this.getPdData()\r\n    this.params.pdInfoId = this.product.id\r\n    this.$nextTick(() => {\r\n      this.$refs.page.reload()\r\n      this.selectedPO = {}\r\n      this.showSeleOptions = false\r\n    })\r\n  },\r\n  methods: {\r\n    rowClick(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedPO.id) {\r\n          this.selectedPO = {}\r\n          this.showSeleOptions = false\r\n        }\r\n      }\r\n    },\r\n    chooseDef() {\r\n      this.showSeleOptions = true\r\n      this.params_currentRule.pdtempPdPaInfoVo = this.selectedPO\r\n      this.formAddRule.pdRuleDtCls = ''\r\n    },\r\n    removeRule(row) {\r\n      const param = {\r\n        ruleType: '1',\r\n        pdtempPdRulesVo: row,\r\n        pdtempPdCalcVo: row\r\n      }\r\n      deleteRuleOrCalc(this.buildRequestData(param)).then(() => {\r\n        this.notifySuccess(this.$t('successMessage.delete'))\r\n        this.$refs.page_currentRule.reload()\r\n      })\r\n    },\r\n    showRule(row) {\r\n      this.ruleView.flag = '1'\r\n      this.ruleView.ruleCode = row.pdRuleCode\r\n      this.ruleView.performType = row.performType\r\n      this.ruleView.visible = true\r\n    },\r\n    ruleViewClosed() {\r\n      this.ruleView.visible = false\r\n      this.selectedDef = ''\r\n    },\r\n    toRules() {\r\n      this.$refs.formAddRule.validate(valid => {\r\n        if (valid) {\r\n          this.dialogVisible.rule = true\r\n        } else {\r\n          this.focusItem()\r\n        }\r\n      })\r\n    },\r\n    deleteFormulaParam(row) {\r\n      this.tableData_formulaParam.splice(this.tableData_formulaParam.indexOf(row), 1)\r\n    },\r\n    /* 刷新重置选择的保全项目 */\r\n    refreshSelOptions() {\r\n      this.selectedDef = {}\r\n      this.columns = []\r\n      this.tableData_ruleParam = []\r\n    },\r\n    selectedDefChanged() {\r\n      this.ruleView.flag = this.selectedDef.ruleAttr === '1' ? '1' : '2'\r\n      this.ruleView.performType = this.selectedDef.performType\r\n      this.ruleView.ruleCode = this.selectedDef.pdRuleCode\r\n      this.ruleView.visible = true\r\n    },\r\n    /*取消选中一行规则*/\r\n    rowClickConfigsRule(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedDef.id) {\r\n          this.selectedDef = {}\r\n          this.columns = []\r\n          this.tableData_ruleParam = []\r\n        }\r\n      }\r\n    },\r\n    closeDialogRule() {\r\n      this.dialogVisible.rule = false\r\n      this.$refs.page_currentRule.reload()\r\n    },\r\n    backToMenu() {\r\n      this.$router.push({name: '产品规则订正主页', params: {path: this.$route.path, page: this.page, pageSize: this.pageSize}})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}