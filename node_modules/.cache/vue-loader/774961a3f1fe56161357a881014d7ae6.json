{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-sales-def\\sales-attribute-def\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-sales-def\\sales-attribute-def\\index.vue","mtime":1609847106968},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgewogICAgYWRkUGR0ZW1wUGRTbEluZm8sCiAgICBkZWxldGVQZHRlbXBQZFNsSW5mbywKICAgIHVwZGF0ZVBkdGVtcFBkU2xJbmZvLAogICAgZGVsZXRlUGR0ZW1wUGRTbEluZm9MaXN0LAogICAgc2VsZWN0UGR0ZW1wUGRScHRJbmZvQnlQcm9kdWN0SWQsCiAgICBnZXRQZEF0dHJJbmZvLAogICAgZ2V0QWxsU3lzU2xNZ2MsCiAgdXBkYXRlUGREYXRlCn0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL3BkdGVtcHBkc2xpbmZvIgppbXBvcnQge21hcEdldHRlcnN9IGZyb20gInZ1ZXgiCgpsZXQgX3RoaXMKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdwcm9kdWN0U2FsZURlZmluaXRpb25CYXNpY0luZm8nLAogICAgZmlsdGVyczogewogICAgICAgIGZpbHRlcl9wZFNsTWdjKGNvZGUpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBwZFNsTWdjIG9mIF90aGlzLnBkU2xNZ2NPcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAocGRTbE1nYy5zbE1nY0NvZGUgPT09IGNvZGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGRTbE1nYy5zbE1nY0NvZGUgKyAnOicgKyBwZFNsTWdjLnNsTWdjTmFtZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgIH0sCiAgICAgICAgZmlsdGVyX3BkU2xDaGFubChjb2RlKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRTbENoYW5sJywgY29kZSkKICAgICAgICB9LAogICAgICAgIGZpbHRlcl9wZFNsQ3Vycihjb2RlKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncHJvZHVjdEN1cnJlbmN5JywgY29kZSkKICAgICAgICB9LAogICAgICAgIGZpbHRlcl9wZFNsU3RhdGUoY29kZSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkU2xTdGF0ZScsIGNvZGUpCiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgX3RoaXMgPSB0aGlzCiAgICAgICAgY29uc3QgdmFsaWRhdGVFbmREYXRlID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnBhcnNlKHZhbHVlLCAneXl5eS1NTS1kZCcpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xFbmREYXRlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGVfaW5pdC5wZFNsRW5kRGF0ZSA9IHRoaXMucGFyc2UodGhpcy5mb3JtX3NhbGVfaW5pdC5wZFNsRW5kRGF0ZSwgJ3l5eXktTU0tZGQnKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5mb3JtX3NhbGUucGRTbFN0YXJ0RGF0ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlLnBkU2xTdGFydERhdGUgPSB0aGlzLnBhcnNlKHRoaXMuZm9ybV9zYWxlLnBkU2xTdGFydERhdGUsICd5eXl5LU1NLWRkJykKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5mb3JtX3NhbGVfaW5pdC5wZFNsRW5kRGF0ZSAmJiB2YWx1ZS5nZXRUaW1lKCkgPiB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xFbmREYXRlLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RTYWxlRGVmaW5pdGlvbkJhc2ljSW5mby5tZXNzYWdlLnRvb0xhdGUnKSArICfvvJonICsgdGhpcy5mb3JtYXREYXRlKHRoaXMuZm9ybV9zYWxlX2luaXQucGRTbEVuZERhdGUsICd5eXl5LU1NLWRkJykpKQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybV9zYWxlLnBkU2xTdGFydERhdGUgJiYgdmFsdWUuZ2V0VGltZSgpIDwgdGhpcy5mb3JtX3NhbGUucGRTbFN0YXJ0RGF0ZS5nZXRUaW1lKCkpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiR0KCdwcm9kdWN0U2FsZURlZmluaXRpb25CYXNpY0luZm8ubWVzc2FnZS5lYXJsaWVyVGhhblN0YXJ0JykpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBfdGFibGUgPSB0aGlzLnRhYmxlRGF0YV9zYWxlOwogICAgICAgICAgICBsZXQgbnVtOwogICAgICAgICAgICBsZXQgX3BkU2xtZ2MgPSB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xNZ2MKICAgICAgICAgICAgbGV0IF9wZFNsQ2hhbmwgPSB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xDaGFubDsKICAgICAgICAgICAgbGV0IF9jdXJyZW5jeSA9Jyc7CiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2FsZS5pZCl7CiAgICAgICAgICAgICAgICBfY3VycmVuY3k9IHRoaXMuZm9ybV9zYWxlX3VwZGF0ZS5wZFNsQ3Vyci50b1N0cmluZygpOwogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICBfY3VycmVuY3k9IHRoaXMuZm9ybV9zYWxlLnBkU2xDdXJyLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IF9hcnJjdXJyZW5jeSA9IF9jdXJyZW5jeS5zcGxpdCgnLCcpOwogICAgICAgICAgICBmb3IgKG51bSA9IDA7IG51bSA8IF90YWJsZS5sZW5ndGg7IG51bSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKERhdGUucGFyc2UoX3RhYmxlW251bV0ucGRTbEVuZERhdGUpKTsKICAgICAgICAgICAgICAgIHZhciBkZW1vUGRTbEVuZERhdGUgPSBkLmdldEZ1bGxZZWFyKCkgKyAnLScgKyAoZC5nZXRNb250aCgpICsgMSkgKyAnLScgKyBkLmdldERhdGUoKTsKICAgICAgICAgICAgICAgIHZhciBkMiA9IG5ldyBEYXRlKERhdGUucGFyc2UoX3RhYmxlW251bV0ucGRTbFN0YXJ0RGF0ZSkpOwogICAgICAgICAgICAgICAgdmFyIGRlbW9QZFNsU3RhcnREYXRlID0gZDIuZ2V0RnVsbFllYXIoKSArICctJyArIChkMi5nZXRNb250aCgpICsgMSkgKyAnLScgKyBkMi5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICBpZiAoX3RhYmxlW251bV0ucGRTbE1nYyA9PSAnMDAwMCcgfHwgX3RhYmxlW251bV0ucGRTbE1nYyA9PSBfcGRTbG1nYykgewogICAgICAgICAgICAgICAgICAgIGlmIChfdGFibGVbbnVtXS5wZFNsQ2hhbmwgPT0gJzAwJyB8fCBfdGFibGVbbnVtXS5wZFNsQ2hhbmwgPT0gX3BkU2xDaGFubCkgewogICAgICAgICAgICAgICAgICAgICAgICBfYXJyY3VycmVuY3kuZm9yRWFjaCgoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90YWJsZVtudW1dLnBkU2xDdXJyID09IGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNhbGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTYWxlLmlkICE9IF90YWJsZVtudW1dLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5wYXJzZSh2YWx1ZSkgPD0gRGF0ZS5wYXJzZShkZW1vUGRTbEVuZERhdGUpICYmIERhdGUucGFyc2UodmFsdWUpID49IERhdGUucGFyc2UoZGVtb1BkU2xTdGFydERhdGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLml7bpl7TkuqTlj4kiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5wYXJzZSh2YWx1ZSkgPiBEYXRlLnBhcnNlKGRlbW9QZFNsRW5kRGF0ZSkgJiYgKERhdGUucGFyc2UodGhpcy5mb3JtX3NhbGUucGRTbFN0YXJ0RGF0ZSkgPCBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSB8fCBEYXRlLnBhcnNlKHRoaXMuZm9ybV9zYWxlX3VwZGF0ZS5wZFNsU3RhcnREYXRlKSA8IERhdGUucGFyc2UoZGVtb1BkU2xTdGFydERhdGUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5pe26Ze05q616YeN5aSNIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGUucGFyc2UodmFsdWUpIDw9IERhdGUucGFyc2UoZGVtb1BkU2xFbmREYXRlKSAmJiBEYXRlLnBhcnNlKHZhbHVlKSA+PSBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLml7bpl7TkuqTlj4kiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGUucGFyc2UodmFsdWUpID4gRGF0ZS5wYXJzZShkZW1vUGRTbEVuZERhdGUpICYmIChEYXRlLnBhcnNlKHRoaXMuZm9ybV9zYWxlLnBkU2xTdGFydERhdGUpIDwgRGF0ZS5wYXJzZShkZW1vUGRTbFN0YXJ0RGF0ZSkgfHwgRGF0ZS5wYXJzZSh0aGlzLmZvcm1fc2FsZV91cGRhdGUucGRTbFN0YXJ0RGF0ZSkgPCBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5pe26Ze05q616YeN5aSNIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYWxsYmFjaygpCiAgICAgICAgfQogICAgICAgIGNvbnN0IHZhbGlkYXRlU3RhcnREYXRlID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnBhcnNlKHZhbHVlLCAneXl5eS1NTS1kZCcpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xTdGFydERhdGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xTdGFydERhdGUgPSB0aGlzLnBhcnNlKHRoaXMuZm9ybV9zYWxlX2luaXQucGRTbFN0YXJ0RGF0ZSwgJ3l5eXktTU0tZGQnKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xTdGFydERhdGUgJiYgdmFsdWUuZ2V0VGltZSgpIDwgdGhpcy5mb3JtX3NhbGVfaW5pdC5wZFNsU3RhcnREYXRlLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RTYWxlRGVmaW5pdGlvbkJhc2ljSW5mby5tZXNzYWdlLnRvb0Vhcmx5JykgKyAn77yaJyArIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xTdGFydERhdGUsICd5eXl5LU1NLWRkJykpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBfdGFibGUgPSB0aGlzLnRhYmxlRGF0YV9zYWxlOwogICAgICAgICAgICBsZXQgbnVtOwogICAgICAgICAgICBsZXQgX3BkU2xtZ2MgPSB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xNZ2MKICAgICAgICAgICAgbGV0IF9wZFNsQ2hhbmwgPSB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xDaGFubDsKICAgICAgICAgICAgbGV0IF9jdXJyZW5jeSA9Jyc7CiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2FsZS5pZCl7CiAgICAgICAgICAgICAgICBfY3VycmVuY3k9IHRoaXMuZm9ybV9zYWxlX3VwZGF0ZS5wZFNsQ3Vyci50b1N0cmluZygpOwogICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICBfY3VycmVuY3k9IHRoaXMuZm9ybV9zYWxlLnBkU2xDdXJyLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IF9hcnJjdXJyZW5jeSA9IF9jdXJyZW5jeS5zcGxpdCgnLCcpOwogICAgICAgICAgICBmb3IgKG51bSA9IDA7IG51bSA8IF90YWJsZS5sZW5ndGg7IG51bSsrKSB7CgogICAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKF90YWJsZVtudW1dLnBkU2xFbmREYXRlKSk7CiAgICAgICAgICAgICAgICB2YXIgZGVtb1BkU2xFbmREYXRlID0gZC5nZXRGdWxsWWVhcigpICsgJy0nICsgKGQuZ2V0TW9udGgoKSArIDEpICsgJy0nICsgZC5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICB2YXIgZDIgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKF90YWJsZVtudW1dLnBkU2xTdGFydERhdGUpKTsKICAgICAgICAgICAgICAgIHZhciBkZW1vUGRTbFN0YXJ0RGF0ZSA9IGQyLmdldEZ1bGxZZWFyKCkgKyAnLScgKyAoZDIuZ2V0TW9udGgoKSArIDEpICsgJy0nICsgZDIuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgaWYgKF90YWJsZVtudW1dLnBkU2xNZ2MgPT0gJzAwMDAnIHx8IF90YWJsZVtudW1dLnBkU2xNZ2MgPT0gX3BkU2xtZ2MpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX3RhYmxlW251bV0ucGRTbENoYW5sID09ICcwMCcgfHwgX3RhYmxlW251bV0ucGRTbENoYW5sID09IF9wZFNsQ2hhbmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2FycmN1cnJlbmN5LmZvckVhY2goKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGFibGVbbnVtXS5wZFNsQ3VyciA9PSBkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTYWxlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2FsZS5pZCAhPSBfdGFibGVbbnVtXS5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGUucGFyc2UodmFsdWUpIDw9IERhdGUucGFyc2UoZGVtb1BkU2xFbmREYXRlKSAmJiBEYXRlLnBhcnNlKHZhbHVlKSA+PSBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5pe26Ze05Lqk5Y+JIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5wYXJzZSh2YWx1ZSkgPCBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSAmJiAoRGF0ZS5wYXJzZSh0aGlzLmZvcm1fc2FsZS5wZFNsRW5kRGF0ZSkgPiBEYXRlLnBhcnNlKGRlbW9QZFNsRW5kRGF0ZSkgfHwgRGF0ZS5wYXJzZSh0aGlzLmZvcm1fc2FsZV91cGRhdGUucGRTbEVuZERhdGUpID4gRGF0ZS5wYXJzZShkZW1vUGRTbEVuZERhdGUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5pe26Ze05q616YeN5aSNIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGUucGFyc2UodmFsdWUpIDw9IERhdGUucGFyc2UoZGVtb1BkU2xFbmREYXRlKSAmJiBEYXRlLnBhcnNlKHZhbHVlKSA+PSBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLml7bpl7TkuqTlj4kiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5wYXJzZSh2YWx1ZSkgPCBEYXRlLnBhcnNlKGRlbW9QZFNsU3RhcnREYXRlKSAmJiAoRGF0ZS5wYXJzZSh0aGlzLmZvcm1fc2FsZS5wZFNsRW5kRGF0ZSkgPiBEYXRlLnBhcnNlKGRlbW9QZFNsRW5kRGF0ZSkgfHwgRGF0ZS5wYXJzZSh0aGlzLmZvcm1fc2FsZV91cGRhdGUucGRTbEVuZERhdGUpID4gRGF0ZS5wYXJzZShkZW1vUGRTbEVuZERhdGUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLml7bpl7TmrrXph43lpI0iKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZm9ybVNob3c6IGZhbHNlLAogICAgICAgICAgICBjaGVja1NhbGU6IFtdLAogICAgICAgICAgICBmbGFnOmZhbHNlLAogICAgICAgICAgICAvLyDkuqflk4Hkv6Hmga8KICAgICAgICAgICAgcHJvZHVjdDogewogICAgICAgICAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHBkQ29kZTogJycsCiAgICAgICAgICAgICAgICBwZEVkaXRpb246ICcnLAogICAgICAgICAgICAgICAgcGRWZXJJZDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgcGRTYWxlY2hubDogJycsCiAgICAgICAgICAgICAgICBwZE5hbWU6ICcnLAogICAgICAgICAgICAgICAgcGRTaG9ydG5hbWU6ICcnLAogICAgICAgICAgICAgICAgcGRFbk5hbWU6ICcnLAogICAgICAgICAgICAgICAgcGRTaG9ydEVuTmFtZTogJycsCiAgICAgICAgICAgICAgICBvcGVyYXRvcjogJycsCiAgICAgICAgICAgICAgICBwZEFwcGxEYXRlOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBwZFByb2Nlc3NJZDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgY3JlYXRlVGltZTogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdW5kZWZpbmVkLAogICAgICAgICAgICB9LAogICAgICAgICAgICBwcm9kdWN0X2V4dHJhOiB7fSwKICAgICAgICAgICAgLy8g55uR566h5a+56LGhCiAgICAgICAgICAgIHBkdGVtcFBkUnB0SW5mbzoge30sCiAgICAgICAgICAgIC8vIOWCqOWtmOW4puWFpeeahOaVsOaNrgogICAgICAgICAgICBmb3JtX3NhbGVfaW5pdDogewogICAgICAgICAgICAgICAgcGRTbE1nYzogWyIwMDAwIl0sCiAgICAgICAgICAgICAgICBwZFNsQ2hhbmw6IFsiMDAiXSwKICAgICAgICAgICAgICAgIHBkU2xDdXJyOiBbXSwKICAgICAgICAgICAgICAgIHBkU2xTdGFydERhdGU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHBkU2xFbmREYXRlOiB1bmRlZmluZWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g6KGo5Y2VCiAgICAgICAgICAgIGZvcm1fc2FsZTogewogICAgICAgICAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHBkSW5mb0lkOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBwZFZlcklkOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBwZFR5cGU6ICcnLCAvL+WcqOWTqumHjOiOt+WPlu+8n++8n++8nwogICAgICAgICAgICAgICAgcGRDb2RlOiAnJywKICAgICAgICAgICAgICAgIHBkU2xNZ2M6IFtdLAogICAgICAgICAgICAgICAgcGRTbE1nY0xldjogJycsCiAgICAgICAgICAgICAgICBwZFNsQ2hhbmw6IFtdLAogICAgICAgICAgICAgICAgcGRTbEN1cnI6IFtdLAogICAgICAgICAgICAgICAgcGRTbFN0YXRlOiAnWScsCiAgICAgICAgICAgICAgICBwZFNsU3RhcnREYXRlOiAnJywKICAgICAgICAgICAgICAgIHBkU2xFbmREYXRlOiAnJywKICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIG9wZXJhdG9yOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb3JtX3NhbGVfdXBkYXRlOiB7CiAgICAgICAgICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgcGRJbmZvSWQ6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHBkVHlwZTogJycsIC8v5Zyo5ZOq6YeM6I635Y+W77yf77yf77yfCiAgICAgICAgICAgICAgICBwZENvZGU6ICcnLAogICAgICAgICAgICAgICAgcGRTbE1nYzogJycsCiAgICAgICAgICAgICAgICBwZFNsTWdjTGV2OiAnJywKICAgICAgICAgICAgICAgIHBkU2xDaGFubDogJycsCiAgICAgICAgICAgICAgICBwZFNsQ3VycjogJycsCiAgICAgICAgICAgICAgICBwZFNsU3RhdGU6ICdZJywKICAgICAgICAgICAgICAgIHBkU2xTdGFydERhdGU6ICcnLAogICAgICAgICAgICAgICAgcGRTbEVuZERhdGU6ICcnLAogICAgICAgICAgICAgICAgY3JlYXRlVGltZTogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgdXBkYXRlVGltZTogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgb3BlcmF0b3I6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOihqOagvOaVsOaNrgogICAgICAgICAgICB0YWJsZURhdGFfc2FsZTogW10sCiAgICAgICAgICAgIHBhcmFtc19zYWxlOiB7CiAgICAgICAgICAgICAgICBlcV9wZEluZm9JZDogdW5kZWZpbmVkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdGVkU2FsZToge30sCiAgICAgICAgICAgIHBkU2xDaGFubERpc2FibGVkQ29kZUFycmF5OiBbXSwKICAgICAgICAgICAgcGRTbE1nY09wdGlvbnM6IFtdLAogICAgICAgICAgICBmaWx0ZXJzOiB7CiAgICAgICAgICAgICAgICBwZFNsQ2hhbmw6IFtdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOihqOWNlemqjOivgQogICAgICAgICAgICBydWxlczogewogICAgICAgICAgICAgICAgcGRTbE1nYzogW3sKICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdmb3JtLnBsZWFzZV9lbnRlcicpICsgdGhpcy4kdCgncHJvZHVjdFNhbGVEZWZpbml0aW9uQmFzaWNJbmZvLnBkU2xNZ2MnKSwKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICBwZFNsQ2hhbmw6IFt7CiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZm9ybS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0U2FsZURlZmluaXRpb25CYXNpY0luZm8ucGRTbENoYW5sJyksCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgcGRTbEN1cnI6IFt7CiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZm9ybS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0U2FsZURlZmluaXRpb25CYXNpY0luZm8ucGRTbEN1cnInKSwKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICBwZFNsU3RhdGU6IFt7CiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZm9ybS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0U2FsZURlZmluaXRpb25CYXNpY0luZm8ucGRTbFN0YXRlJyksCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgcGRTbFN0YXJ0RGF0ZTogW3sKICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdmb3JtLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RTYWxlRGVmaW5pdGlvbkJhc2ljSW5mby5wZFNsU3RhcnREYXRlJyksCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgICAgICAgIH0sIHt2YWxpZGF0b3I6IHZhbGlkYXRlU3RhcnREYXRlLCB0cmlnZ2VyOiAnY2hhbmdlJ31dLAogICAgICAgICAgICAgICAgcGRTbEVuZERhdGU6IFt7CiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZm9ybS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0U2FsZURlZmluaXRpb25CYXNpY0luZm8ucGRTbEVuZERhdGUnKSwKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgICAgICAgICAgfSwge3ZhbGlkYXRvcjogdmFsaWRhdGVFbmREYXRlLCB0cmlnZ2VyOiAnY2hhbmdlJ31dCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICAnZm9ybV9zYWxlLnBkU2xTdGF0ZScoKXsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybV9zYWxlLnBkU2xTdGF0ZSkKICAgICAgICAgIGlmICh0aGlzLmZvcm1fc2FsZS5wZFNsU3RhdGUgPT0gJ04nKXsKICAgICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTsKICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAnZm9ybV9zYWxlLnBkU2xNZ2MnKHNlbGVjdGVkQ29kZXMpIHsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ29kZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBkU2xNZ2Mgb2YgdGhpcy5wZFNsTWdjT3B0aW9ucykgewogICAgICAgICAgICAgICAgICAgIHBkU2xNZ2MuZGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuXy5pbmNsdWRlcyhzZWxlY3RlZENvZGVzLCAnMDAwMCcpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwZFNsTWdjIG9mIHRoaXMucGRTbE1nY09wdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGRTbE1nYy5kaXNhYmxlZCA9IHBkU2xNZ2Muc2xNZ2NDb2RlICE9PSAnMDAwMCcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGRTbE1nYyBvZiB0aGlzLnBkU2xNZ2NPcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBkU2xNZ2MuZGlzYWJsZWQgPSBwZFNsTWdjLnNsTWdjQ29kZSA9PT0gJzAwMDAnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAnZm9ybV9zYWxlLnBkU2xDaGFubCcoc2VsZWN0ZWRDb2RlcykgewogICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb2Rlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMucGRTbENoYW5sRGlzYWJsZWRDb2RlQXJyYXkgPSBbXQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGV0IGFsbENvZGVzID0gdGhpcy5fLm1hcCh0aGlzLmxkY29kZXNbJ3BkU2xDaGFubCddLCAnY29kZScpCiAgICAgICAgICAgICAgICBpZiAodGhpcy5fLmluY2x1ZGVzKHNlbGVjdGVkQ29kZXMsICcwMCcpKSB7CiAgICAgICAgICAgICAgICAgICAgYWxsQ29kZXMgPSBhbGxDb2Rlcy5maWx0ZXIoY29kZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2RlICE9PSAnMDAnCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB0aGlzLnBkU2xDaGFubERpc2FibGVkQ29kZUFycmF5ID0gYWxsQ29kZXMKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxsQ29kZXMgPSBhbGxDb2Rlcy5maWx0ZXIoY29kZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2RlID09PSAnMDAnCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB0aGlzLnBkU2xDaGFubERpc2FibGVkQ29kZUFycmF5ID0gYWxsQ29kZXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgJ2Zvcm1fc2FsZS5wZFNsU3RhcnREYXRlJygpIHsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTYWxlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3NhbGUudmFsaWRhdGVGaWVsZCgncGRTbFN0YXJ0RGF0ZScpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAnZm9ybV9zYWxlX3VwZGF0ZS5wZFNsU3RhcnREYXRlJygpIHsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTYWxlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3NhbGVfdXBkYXRlLnZhbGlkYXRlRmllbGQoJ3BkU2xTdGFydERhdGUnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcEdldHRlcnMoWwogICAgICAgICAgICAnbGRjb2RlcycKICAgICAgICBdKQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgaWYgKHRoaXMucHJvZHVjdC5pZCkgewogICAgICAgICAgICB0aGlzLmluaXRUYWJsZURhdGFTYWxlKCkKICAgICAgICB9CiAgICB9LAogICAgYXN5bmMgY3JlYXRlZCgpIHsKICAgICAgICBhd2FpdCB0aGlzLmluaXQoKTsKCiAgICB9LAogICAgbWV0aG9kczogewogICAgICBnZXROb3dUaW1lKCkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1fc2FsZSwgInBkU2xTdGFydERhdGUiLCB0aGlzLmdldEN1cnJlbnREYXRlU3RyKCkpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1fc2FsZSwgInBkU2xFbmREYXRlIiwgdGhpcy5nZXRDdXJyZW50RGF0ZVN0cigpKTsKICAgICAgfSwKCiAgICAgICAgYXN5bmMgaW5pdCgpIHsKICAgICAgICAgICAgdGhpcy5pbml0UHJvZHVjdEluZm8oKQogICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRPdGhlckluZm8oKQogICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRNZ2NJbmZvKCkKICAgICAgICAgICAgdGhpcy5pbml0X2ZpbHRlcnMoKQogICAgICAgICAgICAvLyDlsIbluKblhaXnmoTkv6Hmga/lpI3liLbliLAgZm9ybSDlr7nosaHkuIoKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1fc2FsZSwgdGhpcy5mb3JtX3NhbGVfaW5pdCkKCiAgICAgICAgICBpZiAodGhpcy5mb3JtX3NhbGVfdXBkYXRlLnBkU2xTdGF0ZSA9PT0gJ1knKXsKICAgICAgICAgICAgdGhpcy5nZXROb3dUaW1lKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbml0VGFibGVEYXRhU2FsZSgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX3NhbGUuYnVpbGREYXRhKCkKICAgICAgICB9LAogICAgICAgIC8vIOWIneWni+WMluS6p+WTgeS/oeaBrwogICAgICAgIGluaXRQcm9kdWN0SW5mbygpIHsKICAgICAgICAgICAgY29uc3QgcGR0ZW1wUGRJbmZvID0gdGhpcy5nZXRQZERhdGEoKQogICAgICAgICAgICBpZiAocGR0ZW1wUGRJbmZvLmlkKSB7CiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMucHJvZHVjdCwgcGR0ZW1wUGRJbmZvKQogICAgICAgICAgICAgICAgdGhpcy5wYXJhbXNfc2FsZS5lcV9wZEluZm9JZCA9IHRoaXMucHJvZHVjdC5pZAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDliJ3lp4vljJblhbblroPpnIDopoHluKblhaXnmoTkv6Hmga8KICAgICAgICBhc3luYyBpbml0T3RoZXJJbmZvKCkgewogICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0LmlkKSB7CiAgICAgICAgICAgICAgICAvLyDluKblhaXkv53ljZXluIHnp40KICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtc01hcCA9IHsKICAgICAgICAgICAgICAgICAgICBwZF9pbmZvX2lkOiB0aGlzLnByb2R1Y3QuaWQsCiAgICAgICAgICAgICAgICAgICAgcGRfYXRyc19jb2RlOiAncHJvZHVjdEN1cnJlbmN5JwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgcGR0ZW1wUGRBdHJzSW5mbyA9IChhd2FpdCBnZXRQZEF0dHJJbmZvKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbXNNYXApKSkuZGF0YQogICAgICAgICAgICAgICAgaWYgKCEhcGR0ZW1wUGRBdHJzSW5mbykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlX2luaXQucGRTbEN1cnIgPSB0aGlzLl8ubWFwKHBkdGVtcFBkQXRyc0luZm8sICdwZEF0cnNWYWwnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g5bim5YWl5Lqn5ZOB6LW35ZSu5pel5pyf5ZKM5YGc5ZSu5pel5pyfCiAgICAgICAgICAgICAgICB0aGlzLnBkdGVtcFBkUnB0SW5mbyA9IChhd2FpdCBzZWxlY3RQZHRlbXBQZFJwdEluZm9CeVByb2R1Y3RJZCh0aGlzLnByb2R1Y3QuaWQpKS5kYXRhCiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnBkdGVtcFBkUnB0SW5mbykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlX2luaXQucGRTbFN0YXJ0RGF0ZSA9IHRoaXMucGR0ZW1wUGRScHRJbmZvLnBkU3RhcnREYXRlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGVfaW5pdC5wZFNsRW5kRGF0ZSA9IHRoaXMucGR0ZW1wUGRScHRJbmZvLnBkU3RvcERhdGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgaW5pdE1nY0luZm8oKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5wcm9kdWN0LmlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChjb25zdCBwZFNsTWdjIG9mIChhd2FpdCBnZXRBbGxTeXNTbE1nYygpKS5kYXRhKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBkU2xNZ2NPcHRpb25zLnB1c2gocGRTbE1nYykKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGNvbnN0IHBkU2xNZ2Mgb2YgdGhpcy5wZFNsTWdjT3B0aW9ucykgewogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHBkU2xNZ2MsICdkaXNhYmxlZCcsIGZhbHNlKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDliJ3lp4vljJbplIDllK7muKDpgZPnrZvpgInlmagKICAgICAgICBpbml0X2ZpbHRlcnMoKSB7CiAgICAgICAgICAgIGxldCBsZGNvZGVfcGRTbENoYW5sID0gdGhpcy5sZGNvZGVzWydwZFNsQ2hhbmwnXQogICAgICAgICAgICBpZiAobGRjb2RlX3BkU2xDaGFubCBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbGRjb2RlX3BkU2xDaGFubCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvZGUgPT09ICcwMCcpIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnBkU2xDaGFubC5wdXNoKHt0ZXh0OiBpdGVtLmNvZGVuYW1lLCB2YWx1ZTogaXRlbS5jb2RlfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZmlsdGVyX3BkU2xDaGFubCh2YWx1ZSwgcm93KSB7CiAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLl8uaW5jbHVkZXMocm93LnBkU2xDaGFubCwgdmFsdWUpCiAgICAgICAgICAgIHJldHVybiByb3cucGRTbENoYW5sID09PSB2YWx1ZQogICAgICAgIH0sCiAgICAgICAgcm93Q2xpY2tfc2FsZShyb3csIGNvbHVtbiwgZXZlbnQpIHsKICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gIklOUFVUIikgewogICAgICAgICAgICAgICAgaWYgKHJvdy5pZCA9PT0gdGhpcy5zZWxlY3RlZFNhbGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFVwZGF0ZVNhbGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjaGVja1NhbGVUYWJsZShWYWwpIHsKICAgICAgICAgICAgdGhpcy5jaGVja1NhbGUgPSBWYWw7CiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrU2FsZS5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNhbGUgPSB0aGlzLmNoZWNrU2FsZVswXQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNhbGVDaGFuZ2VkKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFVwZGF0ZVNhbGUoKQogICAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgc2VsZWN0ZWRTYWxlQ2hhbmdlZCgpIHsKICAgICAgICAgICAgLy8g5bim5YWl5L+h5oGvCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtX3NhbGVfdXBkYXRlLCB0aGlzLnNlbGVjdGVkU2FsZSk7CiAgICAgICAgICAgIC8vIOe9rueBsOWFqOacuuaehOWSjOWFqOa4oOmBkwogICAgICAgICAgICBmb3IgKGNvbnN0IHBkU2xNZ2Mgb2YgdGhpcy5wZFNsTWdjT3B0aW9ucykgewogICAgICAgICAgICAgICAgcGRTbE1nYy5kaXNhYmxlZCA9IHBkU2xNZ2Muc2xNZ2NDb2RlID09PSAnMDAwMCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5wZFNsQ2hhbmxEaXNhYmxlZENvZGVBcnJheSA9IFsnMDAnXQogICAgICAgIH0sCiAgICAgICAgY2FuY2VsVXBkYXRlU2FsZSgpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNhbGUgPSB7fQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybVNhbGUoKQogICAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1TYWxlVXBkYXRlKCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGhhbmRsZUFkZCgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3NhbGUudmFsaWRhdGUoYXN5bmMgcGFzcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocGFzcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlLnBkSW5mb0lkID0gdGhpcy5wcm9kdWN0LmlkCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGUucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGUucGRDb2RlID0gdGhpcy5wcm9kdWN0LnBkQ29kZQoKICAgICAgICAgICAgICAgICAgICAvLyDmlrDlop4KICAgICAgICAgICAgICAgICAgICBsZXQgbWFwPXsKICAgICAgICAgICAgICAgICAgICAgICAgIlBkdGVtcFBkU2xJbmZvIjp0aGlzLmZvcm1fc2FsZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBhZGRQZHRlbXBQZFNsSW5mbyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEobWFwKSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5zYXZlJykpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9zYWxlLnJlbG9hZCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoImNoaWxkRm4iLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBkRGF0ZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEobWFwKSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8v5ZGK55+l54i26aG16Z2i5bey57uP5L+d5a2YCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5jbGVhckZvcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1fc2FsZS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1fc2FsZV91cGRhdGUuY2xlYXJWYWxpZGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2Zvcm0uZm9ybV92YWxpZGF0aW9uX2ZhaWxlZCcpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQoKICAgICAgICB9LAogICAgICAgIGhhbmRsZVVwZGF0ZSgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3NhbGVfdXBkYXRlLnZhbGlkYXRlKGFzeW5jIHBhc3MgPT4gewogICAgICAgICAgICAgICAgaWYgKHBhc3MpIHsKICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrAKICAgICAgICAgICAgICAgICAgICB1cGRhdGVQZHRlbXBQZFNsSW5mbyh0aGlzLmZvcm1fc2FsZV91cGRhdGUpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UudXBkYXRlJykpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlU2FsZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9zYWxlLnJlbG9hZCgpCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fc2FsZS5wZEluZm9JZCA9IHRoaXMucHJvZHVjdC5pZAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGUucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fc2FsZS5wZENvZGUgPSB0aGlzLnByb2R1Y3QucGRDb2RlCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJjaGlsZEZuIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAvLyDmlrDlop4KICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXA9ewogICAgICAgICAgICAgICAgICAgICAgICAiUGR0ZW1wUGRTbEluZm8iOnRoaXMuZm9ybV9zYWxlCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQZERhdGUodGhpcy5idWlsZFJlcXVlc3REYXRhKG1hcCkpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLy/lkYrnn6XniLbpobXpnaLlt7Lnu4/kv53lrZgKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2Zvcm0uZm9ybV92YWxpZGF0aW9uX2ZhaWxlZCcpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRGVsZXRlKCkgewogICAgICAgICAgIGxldCBkZWxLZXlzID0gIHRoaXMuY2hlY2tTYWxlLm1hcChzYWxlID0+IHNhbGUuaWQpCiAgICAgICAgICAgZGVsZXRlUGR0ZW1wUGRTbEluZm9MaXN0KHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7ImRlbEtleXMiOiBkZWxLZXlzfSkpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UuZGVsZXRlJykpCiAgICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlU2FsZSgpCiAgICAgICAgICAgICB0aGlzLmZvcm1fc2FsZS5wZEluZm9JZCA9IHRoaXMucHJvZHVjdC5pZAogICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGUucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkCiAgICAgICAgICAgICB0aGlzLmZvcm1fc2FsZS5wZENvZGUgPSB0aGlzLnByb2R1Y3QucGRDb2RlCgogICAgICAgICAgICAgLy8g5paw5aKeCiAgICAgICAgICAgICBsZXQgbWFwPXsKICAgICAgICAgICAgICAgIlBkdGVtcFBkU2xJbmZvIjp0aGlzLmZvcm1fc2FsZQogICAgICAgICAgICAgfQogICAgICAgICAgICAgdXBkYXRlUGREYXRlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShtYXApKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuY2hlY2tTYWxlID0gW107CiAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9zYWxlLnJlbG9hZCgpCiAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgY2xlYXJGb3JtKCkgewogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNhbGUuaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtU2FsZVVwZGF0ZSgpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybVNhbGUoKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZXNldEZvcm1TYWxlKCkgewogICAgICAgICAgICB0aGlzLmZvcm1fc2FsZSA9IHsKICAgICAgICAgICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBwZEluZm9JZDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgcGRWZXJJZDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgcGRUeXBlOiAnJywKICAgICAgICAgICAgICAgIHBkQ29kZTogJycsCiAgICAgICAgICAgICAgICBwZFNsTWdjOiBbXSwKICAgICAgICAgICAgICAgIHBkU2xNZ2NMZXY6ICcnLAogICAgICAgICAgICAgICAgcGRTbENoYW5sOiBbXSwKICAgICAgICAgICAgICAgIHBkU2xDdXJyOiBbXSwKICAgICAgICAgICAgICAgIHBkU2xTdGF0ZTogJ1knLAogICAgICAgICAgICAgICAgcGRTbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgcGRTbEVuZERhdGU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIG9wZXJhdG9yOiAnJwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOWwhuW4puWFpeeahOS/oeaBr+WkjeWItuWIsCBmb3JtIOWvueixoeS4igogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZm9ybV9zYWxlLCB0aGlzLmZvcm1fc2FsZV9pbml0KQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1fc2FsZS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHJlc2V0Rm9ybVNhbGVVcGRhdGUoKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlX3VwZGF0ZS5wZFNsTWdjID0gJycKICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGVfdXBkYXRlLnBkU2xDaGFubCA9ICcnCiAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlX3VwZGF0ZS5wZFNsQ3VyciA9ICcnCiAgICAgICAgICAgIHRoaXMuZm9ybV9zYWxlX3VwZGF0ZS5wZFNsU3RhdGUgPSAnWScKICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGVfdXBkYXRlLnBkU2xTdGFydERhdGUgPSB0aGlzLmZvcm1fc2FsZV9pbml0LnBkU2xTdGFydERhdGUKICAgICAgICAgICAgdGhpcy5mb3JtX3NhbGVfdXBkYXRlLnBkU2xFbmREYXRlID0gdGhpcy5mb3JtX3NhbGVfaW5pdC5wZFNsRW5kRGF0ZQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1fc2FsZV91cGRhdGUuY2xlYXJWYWxpZGF0ZSgpCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-operation-def/pd-sales-def/sales-attribute-def","sourcesContent":["<template>\r\n  <cus-wraper>\r\n\r\n\r\n    <cus-table-title :label=\"$t('productSaleDefinitionBasicInfo.product_sales_attribute_information')\"/>\r\n\r\n    <!-- 产品销售表格 -->\r\n    <el-table :data=\"tableData_sale\" border element-loading-text=\"Loading\" fit size=\"mini\"\r\n              @selection-change=\"checkSaleTable\" class=\"wraper-table\" highlight-current-row ref=\"tableData_sale\">\r\n      <el-table-column :label=\"$t('table.select')\" type=\"selection\" align=\"center\" width=\"50px\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('productSaleDefinitionBasicInfo.pdSlMgc')\" align=\"center\" width=\"auto\" prop=\"pdSlMgc\">\r\n        <template v-slot=\"scope\">{{scope.row.pdSlMgc | filter_pdSlMgc}}</template>\r\n      </el-table-column>\r\n      <el-table-column :filter-method=\"filter_pdSlChanl\" :filters=\"filters.pdSlChanl\"\r\n                       :label=\"$t('productSaleDefinitionBasicInfo.pdSlChanl')\" align=\"center\" prop=\"pdSlChanl\">\r\n        <template v-slot=\"scope\">{{scope.row.pdSlChanl | filter_pdSlChanl}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productSaleDefinitionBasicInfo.pdSlCurr')\" align=\"center\" prop=\"pdSlCurr\">\r\n        <template v-slot=\"scope\">{{scope.row.pdSlCurr | filter_pdSlCurr}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productSaleDefinitionBasicInfo.pdSlState')\" align=\"center\" prop=\"pdSlState\">\r\n        <template v-slot=\"scope\">{{scope.row.pdSlState | filter_pdSlState}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productSaleDefinitionBasicInfo.pdSlStartDate')\" align=\"center\"\r\n                       prop=\"pdSlStartDate\"></el-table-column>\r\n      <el-table-column :label=\"$t('productSaleDefinitionBasicInfo.pdSlEndDate')\" align=\"center\"\r\n                       prop=\"pdSlEndDate\"></el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination :autoBuild=\"false\" :pageSize=\"10\" :params=\"params_sale\" ref=\"page_sale\"\r\n                    url=\"/pdtemp-pd-sl-info/base\" v-model=\"tableData_sale\"/>\r\n\r\n    <cus-form-title v-if=\"checkSale.length <= 1\" :label=\"$t('productSaleDefinitionBasicInfo.attrDef')\"></cus-form-title>\r\n    <!-- 产品销售基本信息表单（新增） -->\r\n    <el-form  :model=\"form_sale\" :rules=\"rules\" label-position=\"right\" label-width=\"95px\"\r\n             ref=\"form_sale\" v-show=\"checkSale.length==0\">\r\n      <cus-row>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlMgc')\" prop=\"pdSlMgc\">\r\n            <el-select ref=\"s1\" :placeholder=\"$t('form.please_select')\" clearable filterable multiple\r\n                       v-model=\"form_sale.pdSlMgc\">\r\n              <el-option :disabled=\"pdSlMgc.disabled\" :key=\"pdSlMgc.slMgcCode\"\r\n                         :label=\"pdSlMgc.slMgcCode + ':' + pdSlMgc.slMgcName\"\r\n                         :value=\"pdSlMgc.slMgcCode\" v-for=\"pdSlMgc in pdSlMgcOptions\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlChanl')\" prop=\"pdSlChanl\">\r\n            <cus-multi-select :codetype=\"'pdSlChanl'\" :disabledCodeArray=\"pdSlChanlDisabledCodeArray\"\r\n                              v-model=\"form_sale.pdSlChanl\"></cus-multi-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlCurr')\" prop=\"pdSlCurr\">\r\n            <cus-multi-select :codetype=\"'productCurrency'\" v-model=\"form_sale.pdSlCurr\"></cus-multi-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <cus-row>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlState')\" prop=\"pdSlState\">\r\n            <cus-radio :codetype=\"'pdSlState'\" v-model=\"form_sale.pdSlState\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlStartDate')\" prop=\"pdSlStartDate\">\r\n            <el-date-picker :placeholder=\"$t('form.please_select')\" format=\"yyyy-MM-dd\" type=\"date\"\r\n                            v-model=\"form_sale.pdSlStartDate\" :disabled=\"flag\"></el-date-picker>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlEndDate')\" prop=\"pdSlEndDate\">\r\n            <el-date-picker :placeholder=\"$t('form.please_select')\" format=\"yyyy-MM-dd\" type=\"date\"\r\n                            v-model=\"form_sale.pdSlEndDate\"></el-date-picker>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n    </el-form>\r\n\r\n    <!-- 产品销售基本信息表单（编辑） -->\r\n    <el-form :model=\"form_sale_update\" :rules=\"rules\" label-position=\"right\" label-width=\"95px\"\r\n             ref=\"form_sale_update\" v-show=\"checkSale.length==1\">\r\n      <cus-row>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlMgc')\" prop=\"pdSlMgc\">\r\n            <el-select ref=\"s2\" :placeholder=\"$t('form.please_select')\" clearable filterable v-model=\"form_sale_update.pdSlMgc\">\r\n              <el-option :disabled=\"pdSlMgc.disabled\" :key=\"pdSlMgc.slMgcCode\"\r\n                         :label=\"pdSlMgc.slMgcCode + ':' + pdSlMgc.slMgcName\" :value=\"pdSlMgc.slMgcCode\"\r\n                         v-for=\"pdSlMgc in pdSlMgcOptions\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlChanl')\" prop=\"pdSlChanl\">\r\n            <cus-select :codetype=\"'pdSlChanl'\" :disabledCodeArray=\"pdSlChanlDisabledCodeArray\"\r\n                        v-model=\"form_sale_update.pdSlChanl\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlCurr')\" prop=\"pdSlCurr\">\r\n            <cus-select :codetype=\"'productCurrency'\" v-model=\"form_sale_update.pdSlCurr\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <cus-row>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlState')\" prop=\"pdSlState\">\r\n            <cus-radio :codetype=\"'pdSlState'\" v-model=\"form_sale_update.pdSlState\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlStartDate')\" prop=\"pdSlStartDate\">\r\n            <el-date-picker :placeholder=\"$t('form.please_select')\" type=\"date\" value-format=\"yyyy-MM-dd\"\r\n                            v-model=\"form_sale_update.pdSlStartDate\"></el-date-picker>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item :label=\"$t('productSaleDefinitionBasicInfo.pdSlEndDate')\" prop=\"pdSlEndDate\">\r\n            <el-date-picker :placeholder=\"$t('form.please_select')\" type=\"date\" value-format=\"yyyy-MM-dd\"\r\n                            v-model=\"form_sale_update.pdSlEndDate\"></el-date-picker>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n    </el-form>\r\n\r\n    <!-- 更新、保存、删除、清空按钮 -->\r\n    <el-row style=\"float: right;margin: 50px 0 50px 0\">\r\n      <el-button  size=\"small\" @click=\"handleUpdate\" type=\"primary\" dialog-disable=\"disable\"\r\n                 v-auth=\"'pdtemp-pd-sl-info:update'\" v-if=\"checkSale.length==1\"><i\r\n        class=\"el-icon-success el-icon--left\"></i>{{$t('table.update')}}\r\n      </el-button>\r\n      <cus-popover\r\n        :buttonText=\"$t('table.delete')\"\r\n        @confirm=\"handleDelete\" icon=\"el-icon-delete\" style=\"margin-right: 5px;margin-left: 5px\" type=\"danger\"\r\n        v-auth=\"'pdtemp-pd-sl-info:delete'\"  v-if=\"!checkSale.length==0\"\r\n        :content=\"$t('confirmMessage.delete')\"\r\n                >\r\n      </cus-popover>\r\n      <el-button  size=\"small\" @click=\"handleAdd\" icon=\"el-icon-success\" type=\"primary\" dialog-disable=\"disable\"\r\n                 v-auth=\"'pdtemp-pd-sl-info:add'\" v-if=\"checkSale.length==0\">{{ $t('table.save') }}\r\n      </el-button>\r\n      <el-button  dialog-disable=\"disable\" size=\"small\" @click=\"clearForm\" type=\"primary\" v-if=\"checkSale.length<=1\"><i\r\n        class=\"el-icon-refresh el-icon--left\"></i>{{$t('table.refresh')}}\r\n      </el-button>\r\n    </el-row>\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n\r\n    import {\r\n        addPdtempPdSlInfo,\r\n        deletePdtempPdSlInfo,\r\n        updatePdtempPdSlInfo,\r\n        deletePdtempPdSlInfoList,\r\n        selectPdtempPdRptInfoByProductId,\r\n        getPdAttrInfo,\r\n        getAllSysSlMgc,\r\n      updatePdDate\r\n    } from \"@/api/basicinfo/pdtemppdslinfo\"\r\n    import {mapGetters} from \"vuex\"\r\n\r\n    let _this\r\n\r\n    export default {\r\n        name: 'productSaleDefinitionBasicInfo',\r\n        filters: {\r\n            filter_pdSlMgc(code) {\r\n                for (const pdSlMgc of _this.pdSlMgcOptions) {\r\n                    if (pdSlMgc.slMgcCode === code) {\r\n                        return pdSlMgc.slMgcCode + ':' + pdSlMgc.slMgcName\r\n                    }\r\n                }\r\n                return ''\r\n            },\r\n            filter_pdSlChanl(code) {\r\n                return _this.getCodeName('pdSlChanl', code)\r\n            },\r\n            filter_pdSlCurr(code) {\r\n                return _this.getCodeName('productCurrency', code)\r\n            },\r\n            filter_pdSlState(code) {\r\n                return _this.getCodeName('pdSlState', code)\r\n            }\r\n        },\r\n        data() {\r\n            _this = this\r\n            const validateEndDate = (rule, value, callback) => {\r\n                if (typeof value === 'string') {\r\n                    value = this.parse(value, 'yyyy-MM-dd')\r\n                }\r\n                if (typeof this.form_sale_init.pdSlEndDate === 'string') {\r\n                    this.form_sale_init.pdSlEndDate = this.parse(this.form_sale_init.pdSlEndDate, 'yyyy-MM-dd')\r\n                }\r\n                if (typeof this.form_sale.pdSlStartDate === 'string') {\r\n                    this.form_sale.pdSlStartDate = this.parse(this.form_sale.pdSlStartDate, 'yyyy-MM-dd')\r\n                }\r\n                if (this.form_sale_init.pdSlEndDate && value.getTime() > this.form_sale_init.pdSlEndDate.getTime()) {\r\n                    callback(new Error(this.$t('productSaleDefinitionBasicInfo.message.tooLate') + '：' + this.formatDate(this.form_sale_init.pdSlEndDate, 'yyyy-MM-dd')))\r\n                } else if (this.form_sale.pdSlStartDate && value.getTime() < this.form_sale.pdSlStartDate.getTime()) {\r\n                    callback(new Error(this.$t('productSaleDefinitionBasicInfo.message.earlierThanStart')))\r\n                }\r\n                let _table = this.tableData_sale;\r\n                let num;\r\n                let _pdSlmgc = this.form_sale_init.pdSlMgc\r\n                let _pdSlChanl = this.form_sale_init.pdSlChanl;\r\n                let _currency ='';\r\n                if (this.selectedSale.id){\r\n                    _currency= this.form_sale_update.pdSlCurr.toString();\r\n                }else {\r\n                    _currency= this.form_sale.pdSlCurr.toString();\r\n                }\r\n                let _arrcurrency = _currency.split(',');\r\n                for (num = 0; num < _table.length; num++) {\r\n                    var d = new Date(Date.parse(_table[num].pdSlEndDate));\r\n                    var demoPdSlEndDate = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();\r\n                    var d2 = new Date(Date.parse(_table[num].pdSlStartDate));\r\n                    var demoPdSlStartDate = d2.getFullYear() + '-' + (d2.getMonth() + 1) + '-' + d2.getDate();\r\n                    if (_table[num].pdSlMgc == '0000' || _table[num].pdSlMgc == _pdSlmgc) {\r\n                        if (_table[num].pdSlChanl == '00' || _table[num].pdSlChanl == _pdSlChanl) {\r\n                            _arrcurrency.forEach((data) => {\r\n                                if (_table[num].pdSlCurr == data) {\r\n                                    if (this.selectedSale.id) {\r\n                                        if (this.selectedSale.id != _table[num].id) {\r\n                                            if (Date.parse(value) <= Date.parse(demoPdSlEndDate) && Date.parse(value) >= Date.parse(demoPdSlStartDate)) {\r\n                                                callback(new Error(\"时间交叉\"))\r\n                                            }\r\n\r\n                                            if (Date.parse(value) > Date.parse(demoPdSlEndDate) && (Date.parse(this.form_sale.pdSlStartDate) < Date.parse(demoPdSlStartDate) || Date.parse(this.form_sale_update.pdSlStartDate) < Date.parse(demoPdSlStartDate))) {\r\n                                                callback(new Error(\"时间段重复\"))\r\n                                            }\r\n                                        }\r\n\r\n                                    } else {\r\n                                        if (Date.parse(value) <= Date.parse(demoPdSlEndDate) && Date.parse(value) >= Date.parse(demoPdSlStartDate)) {\r\n                                            callback(new Error(\"时间交叉\"))\r\n                                        }\r\n\r\n                                        if (Date.parse(value) > Date.parse(demoPdSlEndDate) && (Date.parse(this.form_sale.pdSlStartDate) < Date.parse(demoPdSlStartDate) || Date.parse(this.form_sale_update.pdSlStartDate) < Date.parse(demoPdSlStartDate))) {\r\n                                            callback(new Error(\"时间段重复\"))\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                callback()\r\n            }\r\n            const validateStartDate = (rule, value, callback) => {\r\n                if (typeof value === 'string') {\r\n                    value = this.parse(value, 'yyyy-MM-dd')\r\n                }\r\n                if (typeof this.form_sale_init.pdSlStartDate === 'string') {\r\n                    this.form_sale_init.pdSlStartDate = this.parse(this.form_sale_init.pdSlStartDate, 'yyyy-MM-dd')\r\n                }\r\n                if (this.form_sale_init.pdSlStartDate && value.getTime() < this.form_sale_init.pdSlStartDate.getTime()) {\r\n                    callback(new Error(this.$t('productSaleDefinitionBasicInfo.message.tooEarly') + '：' + this.formatDate(this.form_sale_init.pdSlStartDate, 'yyyy-MM-dd')))\r\n                }\r\n                let _table = this.tableData_sale;\r\n                let num;\r\n                let _pdSlmgc = this.form_sale_init.pdSlMgc\r\n                let _pdSlChanl = this.form_sale_init.pdSlChanl;\r\n                let _currency ='';\r\n                if (this.selectedSale.id){\r\n                    _currency= this.form_sale_update.pdSlCurr.toString();\r\n                }else {\r\n                    _currency= this.form_sale.pdSlCurr.toString();\r\n                }\r\n                let _arrcurrency = _currency.split(',');\r\n                for (num = 0; num < _table.length; num++) {\r\n\r\n                    var d = new Date(Date.parse(_table[num].pdSlEndDate));\r\n                    var demoPdSlEndDate = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();\r\n                    var d2 = new Date(Date.parse(_table[num].pdSlStartDate));\r\n                    var demoPdSlStartDate = d2.getFullYear() + '-' + (d2.getMonth() + 1) + '-' + d2.getDate();\r\n                    if (_table[num].pdSlMgc == '0000' || _table[num].pdSlMgc == _pdSlmgc) {\r\n                        if (_table[num].pdSlChanl == '00' || _table[num].pdSlChanl == _pdSlChanl) {\r\n                            _arrcurrency.forEach((data) => {\r\n                                if (_table[num].pdSlCurr == data) {\r\n                                    if (this.selectedSale.id) {\r\n                                        if (this.selectedSale.id != _table[num].id) {\r\n                                            if (Date.parse(value) <= Date.parse(demoPdSlEndDate) && Date.parse(value) >= Date.parse(demoPdSlStartDate)) {\r\n                                                callback(new Error(\"时间交叉\"))\r\n                                            }\r\n                                            if (Date.parse(value) < Date.parse(demoPdSlStartDate) && (Date.parse(this.form_sale.pdSlEndDate) > Date.parse(demoPdSlEndDate) || Date.parse(this.form_sale_update.pdSlEndDate) > Date.parse(demoPdSlEndDate))) {\r\n                                                callback(new Error(\"时间段重复\"))\r\n                                            }\r\n                                        }\r\n\r\n                                    } else {\r\n                                        if (Date.parse(value) <= Date.parse(demoPdSlEndDate) && Date.parse(value) >= Date.parse(demoPdSlStartDate)) {\r\n                                            callback(new Error(\"时间交叉\"))\r\n                                        }\r\n                                        if (Date.parse(value) < Date.parse(demoPdSlStartDate) && (Date.parse(this.form_sale.pdSlEndDate) > Date.parse(demoPdSlEndDate) || Date.parse(this.form_sale_update.pdSlEndDate) > Date.parse(demoPdSlEndDate))) {\r\n                                            callback(new Error(\"时间段重复\"))\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                callback()\r\n            }\r\n            return {\r\n                formShow: false,\r\n                checkSale: [],\r\n                flag:false,\r\n                // 产品信息\r\n                product: {\r\n                    id: undefined,\r\n                    pdCode: '',\r\n                    pdEdition: '',\r\n                    pdVerId: undefined,\r\n                    pdSalechnl: '',\r\n                    pdName: '',\r\n                    pdShortname: '',\r\n                    pdEnName: '',\r\n                    pdShortEnName: '',\r\n                    operator: '',\r\n                    pdApplDate: undefined,\r\n                    pdProcessId: undefined,\r\n                    createTime: undefined,\r\n                    updateTime: undefined,\r\n                },\r\n                product_extra: {},\r\n                // 监管对象\r\n                pdtempPdRptInfo: {},\r\n                // 储存带入的数据\r\n                form_sale_init: {\r\n                    pdSlMgc: [\"0000\"],\r\n                    pdSlChanl: [\"00\"],\r\n                    pdSlCurr: [],\r\n                    pdSlStartDate: undefined,\r\n                    pdSlEndDate: undefined\r\n                },\r\n                // 表单\r\n                form_sale: {\r\n                    id: undefined,\r\n                    pdInfoId: undefined,\r\n                    pdVerId: undefined,\r\n                    pdType: '', //在哪里获取？？？\r\n                    pdCode: '',\r\n                    pdSlMgc: [],\r\n                    pdSlMgcLev: '',\r\n                    pdSlChanl: [],\r\n                    pdSlCurr: [],\r\n                    pdSlState: 'Y',\r\n                    pdSlStartDate: '',\r\n                    pdSlEndDate: '',\r\n                    createTime: undefined,\r\n                    updateTime: undefined,\r\n                    operator: ''\r\n                },\r\n                form_sale_update: {\r\n                    id: undefined,\r\n                    pdInfoId: undefined,\r\n                    pdVerId: undefined,\r\n                    pdType: '', //在哪里获取？？？\r\n                    pdCode: '',\r\n                    pdSlMgc: '',\r\n                    pdSlMgcLev: '',\r\n                    pdSlChanl: '',\r\n                    pdSlCurr: '',\r\n                    pdSlState: 'Y',\r\n                    pdSlStartDate: '',\r\n                    pdSlEndDate: '',\r\n                    createTime: undefined,\r\n                    updateTime: undefined,\r\n                    operator: ''\r\n                },\r\n                // 表格数据\r\n                tableData_sale: [],\r\n                params_sale: {\r\n                    eq_pdInfoId: undefined\r\n                },\r\n                selectedSale: {},\r\n                pdSlChanlDisabledCodeArray: [],\r\n                pdSlMgcOptions: [],\r\n                filters: {\r\n                    pdSlChanl: []\r\n                },\r\n                // 表单验证\r\n                rules: {\r\n                    pdSlMgc: [{\r\n                        required: true,\r\n                        message: this.$t('form.please_enter') + this.$t('productSaleDefinitionBasicInfo.pdSlMgc'),\r\n                        trigger: 'change'\r\n                    }],\r\n                    pdSlChanl: [{\r\n                        required: true,\r\n                        message: this.$t('form.please_select') + this.$t('productSaleDefinitionBasicInfo.pdSlChanl'),\r\n                        trigger: 'change'\r\n                    }],\r\n                    pdSlCurr: [{\r\n                        required: true,\r\n                        message: this.$t('form.please_select') + this.$t('productSaleDefinitionBasicInfo.pdSlCurr'),\r\n                        trigger: 'change'\r\n                    }],\r\n                    pdSlState: [{\r\n                        required: true,\r\n                        message: this.$t('form.please_select') + this.$t('productSaleDefinitionBasicInfo.pdSlState'),\r\n                        trigger: 'change'\r\n                    }],\r\n                    pdSlStartDate: [{\r\n                        required: true,\r\n                        message: this.$t('form.please_select') + this.$t('productSaleDefinitionBasicInfo.pdSlStartDate'),\r\n                        trigger: 'change'\r\n                    }, {validator: validateStartDate, trigger: 'change'}],\r\n                    pdSlEndDate: [{\r\n                        required: true,\r\n                        message: this.$t('form.please_select') + this.$t('productSaleDefinitionBasicInfo.pdSlEndDate'),\r\n                        trigger: 'change'\r\n                    }, {validator: validateEndDate, trigger: 'change'}]\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            'form_sale.pdSlState'(){\r\n              console.log(this.form_sale.pdSlState)\r\n              if (this.form_sale.pdSlState == 'N'){\r\n                this.flag = true;\r\n              }else {\r\n                this.flag = false;\r\n              }\r\n            },\r\n            'form_sale.pdSlMgc'(selectedCodes) {\r\n                if (selectedCodes.length === 0) {\r\n                    for (const pdSlMgc of this.pdSlMgcOptions) {\r\n                        pdSlMgc.disabled = false\r\n                    }\r\n                } else {\r\n                    if (this._.includes(selectedCodes, '0000')) {\r\n                        for (const pdSlMgc of this.pdSlMgcOptions) {\r\n                            pdSlMgc.disabled = pdSlMgc.slMgcCode !== '0000'\r\n                        }\r\n                    } else {\r\n                        for (const pdSlMgc of this.pdSlMgcOptions) {\r\n                            pdSlMgc.disabled = pdSlMgc.slMgcCode === '0000'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            'form_sale.pdSlChanl'(selectedCodes) {\r\n                if (selectedCodes.length === 0) {\r\n                    this.pdSlChanlDisabledCodeArray = []\r\n                } else {\r\n                    let allCodes = this._.map(this.ldcodes['pdSlChanl'], 'code')\r\n                    if (this._.includes(selectedCodes, '00')) {\r\n                        allCodes = allCodes.filter(code => {\r\n                            return code !== '00'\r\n                        })\r\n                        this.pdSlChanlDisabledCodeArray = allCodes\r\n                    } else {\r\n                        allCodes = allCodes.filter(code => {\r\n                            return code === '00'\r\n                        })\r\n                        this.pdSlChanlDisabledCodeArray = allCodes\r\n                    }\r\n                }\r\n            },\r\n            'form_sale.pdSlStartDate'() {\r\n                this.$nextTick(() => {\r\n                    if (this.selectedSale.id) {\r\n                        this.$refs.form_sale.validateField('pdSlStartDate')\r\n                    }\r\n                })\r\n            },\r\n            'form_sale_update.pdSlStartDate'() {\r\n                this.$nextTick(() => {\r\n                    if (this.selectedSale.id) {\r\n                        this.$refs.form_sale_update.validateField('pdSlStartDate')\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                'ldcodes'\r\n            ])\r\n        },\r\n        mounted() {\r\n            if (this.product.id) {\r\n                this.initTableDataSale()\r\n            }\r\n        },\r\n        async created() {\r\n            await this.init();\r\n\r\n        },\r\n        methods: {\r\n          getNowTime() {\r\n            this.$set(this.form_sale, \"pdSlStartDate\", this.getCurrentDateStr());\r\n            this.$set(this.form_sale, \"pdSlEndDate\", this.getCurrentDateStr());\r\n          },\r\n\r\n            async init() {\r\n                this.initProductInfo()\r\n                await this.initOtherInfo()\r\n                await this.initMgcInfo()\r\n                this.init_filters()\r\n                // 将带入的信息复制到 form 对象上\r\n                Object.assign(this.form_sale, this.form_sale_init)\r\n\r\n              if (this.form_sale_update.pdSlState === 'Y'){\r\n                this.getNowTime();\r\n              }\r\n            },\r\n            initTableDataSale() {\r\n                this.$refs.page_sale.buildData()\r\n            },\r\n            // 初始化产品信息\r\n            initProductInfo() {\r\n                const pdtempPdInfo = this.getPdData()\r\n                if (pdtempPdInfo.id) {\r\n                    Object.assign(this.product, pdtempPdInfo)\r\n                    this.params_sale.eq_pdInfoId = this.product.id\r\n                }\r\n            },\r\n            // 初始化其它需要带入的信息\r\n            async initOtherInfo() {\r\n                if (this.product.id) {\r\n                    // 带入保单币种\r\n                    const paramsMap = {\r\n                        pd_info_id: this.product.id,\r\n                        pd_atrs_code: 'productCurrency'\r\n                    }\r\n                    const pdtempPdAtrsInfo = (await getPdAttrInfo(this.buildRequestData(paramsMap))).data\r\n                    if (!!pdtempPdAtrsInfo) {\r\n                        this.form_sale_init.pdSlCurr = this._.map(pdtempPdAtrsInfo, 'pdAtrsVal')\r\n                    }\r\n                    // 带入产品起售日期和停售日期\r\n                    this.pdtempPdRptInfo = (await selectPdtempPdRptInfoByProductId(this.product.id)).data\r\n                    if (!!this.pdtempPdRptInfo) {\r\n                        this.form_sale_init.pdSlStartDate = this.pdtempPdRptInfo.pdStartDate\r\n                        this.form_sale_init.pdSlEndDate = this.pdtempPdRptInfo.pdStopDate\r\n                    }\r\n                }\r\n            },\r\n            async initMgcInfo() {\r\n                if (!this.product.id) {\r\n                    return\r\n                }\r\n\r\n                for (const pdSlMgc of (await getAllSysSlMgc()).data) {\r\n                    this.pdSlMgcOptions.push(pdSlMgc)\r\n                }\r\n                for (const pdSlMgc of this.pdSlMgcOptions) {\r\n                    this.$set(pdSlMgc, 'disabled', false)\r\n                }\r\n            },\r\n            // 初始化销售渠道筛选器\r\n            init_filters() {\r\n                let ldcode_pdSlChanl = this.ldcodes['pdSlChanl']\r\n                if (ldcode_pdSlChanl instanceof Array) {\r\n                    for (const item of ldcode_pdSlChanl) {\r\n                        if (item.code === '00') continue\r\n                        this.filters.pdSlChanl.push({text: item.codename, value: item.code})\r\n                    }\r\n                }\r\n            },\r\n            filter_pdSlChanl(value, row) {\r\n                // return this._.includes(row.pdSlChanl, value)\r\n                return row.pdSlChanl === value\r\n            },\r\n            rowClick_sale(row, column, event) {\r\n                if (event.target.nodeName === \"INPUT\") {\r\n                    if (row.id === this.selectedSale.id) {\r\n                        this.cancelUpdateSale()\r\n                    }\r\n                }\r\n            },\r\n            checkSaleTable(Val) {\r\n                this.checkSale = Val;\r\n                if (this.checkSale.length == 1) {\r\n                    this.selectedSale = this.checkSale[0]\r\n                    this.selectedSaleChanged();\r\n                } else {\r\n                    this.cancelUpdateSale()\r\n                }\r\n\r\n            },\r\n            selectedSaleChanged() {\r\n                // 带入信息\r\n                Object.assign(this.form_sale_update, this.selectedSale);\r\n                // 置灰全机构和全渠道\r\n                for (const pdSlMgc of this.pdSlMgcOptions) {\r\n                    pdSlMgc.disabled = pdSlMgc.slMgcCode === '0000';\r\n                }\r\n                this.pdSlChanlDisabledCodeArray = ['00']\r\n            },\r\n            cancelUpdateSale() {\r\n                this.selectedSale = {}\r\n                this.$nextTick(() => {\r\n                    this.resetFormSale()\r\n                    this.resetFormSaleUpdate()\r\n                })\r\n            },\r\n            handleAdd() {\r\n                this.$refs.form_sale.validate(async pass => {\r\n                    if (pass) {\r\n                        this.form_sale.pdInfoId = this.product.id\r\n                        this.form_sale.pdVerId = this.product.pdVerId\r\n                        this.form_sale.pdCode = this.product.pdCode\r\n\r\n                        // 新增\r\n                        let map={\r\n                            \"PdtempPdSlInfo\":this.form_sale\r\n                        }\r\n                        addPdtempPdSlInfo(this.buildRequestData(map)).then(() => {\r\n                            this.notifySuccess(this.$t('successMessage.save'))\r\n                            this.$refs.page_sale.reload()\r\n                            this.$emit(\"childFn\", true);\r\n                          updatePdDate(this.buildRequestData(map)).then(() => {\r\n                            //告知父页面已经保存\r\n                            //this.clearForm();\r\n                            this.$nextTick(()=>{\r\n                              this.$refs.form_sale.clearValidate()\r\n                              this.$refs.form_sale_update.clearValidate()\r\n                            })\r\n                          })\r\n                        })\r\n\r\n                    } else {\r\n                        this.notifyError(this.$t('form.form_validation_failed'))\r\n                    }\r\n                })\r\n\r\n            },\r\n            handleUpdate() {\r\n                this.$refs.form_sale_update.validate(async pass => {\r\n                    if (pass) {\r\n                        // 更新\r\n                        updatePdtempPdSlInfo(this.form_sale_update).then(() => {\r\n                            this.notifySuccess(this.$t('successMessage.update'))\r\n                            this.cancelUpdateSale()\r\n                            this.$refs.page_sale.reload()\r\n                          this.form_sale.pdInfoId = this.product.id\r\n                          this.form_sale.pdVerId = this.product.pdVerId\r\n                          this.form_sale.pdCode = this.product.pdCode\r\n                          this.$emit(\"childFn\", true);\r\n                          // 新增\r\n                          let map={\r\n                            \"PdtempPdSlInfo\":this.form_sale\r\n                          }\r\n                          updatePdDate(this.buildRequestData(map)).then(() => {\r\n                          })\r\n                            //告知父页面已经保存\r\n                        })\r\n                    } else {\r\n                        this.notifyError(this.$t('form.form_validation_failed'))\r\n                    }\r\n                })\r\n            },\r\n            handleDelete() {\r\n               let delKeys =  this.checkSale.map(sale => sale.id)\r\n               deletePdtempPdSlInfoList(this.buildRequestData({\"delKeys\": delKeys})).then(() => {\r\n                this.notifySuccess(this.$t('successMessage.delete'))\r\n                this.cancelUpdateSale()\r\n                 this.form_sale.pdInfoId = this.product.id\r\n                 this.form_sale.pdVerId = this.product.pdVerId\r\n                 this.form_sale.pdCode = this.product.pdCode\r\n\r\n                 // 新增\r\n                 let map={\r\n                   \"PdtempPdSlInfo\":this.form_sale\r\n                 }\r\n                 updatePdDate(this.buildRequestData(map)).then(() => {\r\n                 })\r\n                this.checkSale = [];\r\n                this.$refs.page_sale.reload()\r\n              })\r\n            },\r\n            clearForm() {\r\n                if (this.selectedSale.id) {\r\n                    this.resetFormSaleUpdate()\r\n                } else {\r\n                    this.resetFormSale()\r\n                }\r\n            },\r\n            resetFormSale() {\r\n                this.form_sale = {\r\n                    id: undefined,\r\n                    pdInfoId: undefined,\r\n                    pdVerId: undefined,\r\n                    pdType: '',\r\n                    pdCode: '',\r\n                    pdSlMgc: [],\r\n                    pdSlMgcLev: '',\r\n                    pdSlChanl: [],\r\n                    pdSlCurr: [],\r\n                    pdSlState: 'Y',\r\n                    pdSlStartDate: undefined,\r\n                    pdSlEndDate: undefined,\r\n                    createTime: undefined,\r\n                    updateTime: undefined,\r\n                    operator: ''\r\n                }\r\n                // 将带入的信息复制到 form 对象上\r\n                Object.assign(this.form_sale, this.form_sale_init)\r\n                this.$nextTick(() => {\r\n                    this.$refs.form_sale.clearValidate()\r\n                })\r\n            },\r\n            resetFormSaleUpdate() {\r\n                this.form_sale_update.pdSlMgc = ''\r\n                this.form_sale_update.pdSlChanl = ''\r\n                this.form_sale_update.pdSlCurr = ''\r\n                this.form_sale_update.pdSlState = 'Y'\r\n                this.form_sale_update.pdSlStartDate = this.form_sale_init.pdSlStartDate\r\n                this.form_sale_update.pdSlEndDate = this.form_sale_init.pdSlEndDate\r\n                this.$nextTick(() => {\r\n                    this.$refs.form_sale_update.clearValidate()\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n</style>\r\n"]}]}