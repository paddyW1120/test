{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\comboCtrlFormula\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\comboCtrlFormula\\index.vue","mtime":1609847107031},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7ZGVsZXRlRm9ybXVsYX0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL2NvbXBlbnNhdGlvbkRlZmluaXRpb24iDQoNCmxldCBfdGhpcw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdjbG1DdHJsRm9ybXVsYScsDQogIHByb3BzOiB7DQogICAgcGR0ZW1wQ2xtQ3RybE1haW46IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBwZEJ1c3NEZXRhaWxUeXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgZmlsdGVyczogew0KICAgIGZpbHRlcl9wZEJ1c3NEZXRhaWxUeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzRGV0YWlsQ2xhc3MnLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX2NsbUN0cmxUeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgnY2xtQ3RybFR5cGUnLCBjb2RlKQ0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICBfdGhpcyA9IHRoaXMNCiAgICByZXR1cm4gew0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHBkQnVzc0NvZGU6ICcnDQogICAgICB9LA0KICAgICAgdGFibGVEYXRhX2Zvcm11bGE6IFtdLA0KICAgICAgc2VsZWN0ZWRGb3JtdWxhOiB7fSwNCiAgICAgIC8vIOS6p+WTgeS/oeaBrw0KICAgICAgY29tYm86IHt9LA0KICAgICAgZm9ybXVsYVZpZXc6IHsNCiAgICAgICAgZmxhZzogJycsDQogICAgICAgIHJ1bGVDb2RlOiAnJywNCiAgICAgICAgcGVyZm9ybVR5cGU6ICcnLA0KICAgICAgICB2aXNpYmxlOiBmYWxzZQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmluaXRQcm9kdWN0SW5mbygpDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0VGFibGVEYXRhKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXRUYWJsZURhdGEoKSB7DQogICAgICB0aGlzLnBhcmFtcyA9IHsNCiAgICAgICAgcGRCdXNzQ29kZTogdGhpcy5wZHRlbXBDbG1DdHJsTWFpbi5wZEJuZnRDdHJsQ29kZQ0KICAgICAgfTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlLmJ1aWxkRGF0YSgpDQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd0Zvcm11bGEocm93KSB7DQogICAgICB0aGlzLmZvcm11bGFWaWV3LmZsYWcgPSAnMScNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcucGVyZm9ybVR5cGUgPSByb3cucGVyZm9ybVR5cGUNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcucnVsZUNvZGUgPSByb3cucGRDYWxjQ29kZQ0KICAgICAgdGhpcy5mb3JtdWxhVmlldy52aXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgZm9ybXVsYVZpZXdDbG9zZWQoKSB7DQogICAgICB0aGlzLmZvcm11bGFWaWV3LnZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5zZWxlY3RlZEZvcm11bGEgPSB7fQ0KICAgIH0sDQogICAgaW5pdFByb2R1Y3RJbmZvKCkgew0KICAgICAgbGV0IHBkdGVtcFBkSW5mbyA9IHRoaXMuZ2V0UGREYXRhKCk7DQogICAgICBpZiAoT2JqZWN0LmtleXMocGR0ZW1wUGRJbmZvKS5sZW5ndGggPiAwKSB7DQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb21ibywgcGR0ZW1wUGRJbmZvKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcign5peg5rOV6I635Y+W5aWX6aSQ5L+h5oGvJykNCiAgICAgIH0NCiAgICB9LA0KICAgIGJhY2soKSB7DQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VEaWFsb2dWaXNpYmxlX0NsbUN0cmxGb3JtdWxhJywgZmFsc2UpDQogICAgfSwNCiAgICB0b0Zvcm11bGFTZWxlY3QoKSB7DQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VEaWFsb2dWaXNpYmxlX0NsbUN0cmxGb3JtdWxhU2VsZWN0JywgdHJ1ZSwgJ2FhYScpDQogICAgfSwNCiAgICBzZWxlY3RlZEZvcm11bGFDaGFuZ2VkKCkgew0KICAgICAgdGhpcy5mb3JtdWxhVmlldy5mbGFnID0gdGhpcy5zZWxlY3RlZEZvcm11bGEucnVsZUF0dHIgPT09ICcxJyA/ICcxJyA6ICcyJw0KICAgICAgdGhpcy5mb3JtdWxhVmlldy5ydWxlQ29kZSA9IHRoaXMuc2VsZWN0ZWRGb3JtdWxhLnBkQ2FsY0NvZGUNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcucGVyZm9ybVR5cGUgPSB0aGlzLnNlbGVjdGVkRm9ybXVsYS5wZXJmb3JtVHlwZQ0KICAgICAgdGhpcy5mb3JtdWxhVmlldy52aXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgZGVsZXRlRm9ybXVsYShyb3cpIHsNCiAgICAgIGRlbGV0ZUZvcm11bGEocm93KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoJ3N1Y2Nlc3NNZXNzYWdlLmRlbGV0ZScpKQ0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCkNCiAgICAgICAgdGhpcy4kZW1pdCgnYnJpbmdJbkNhbGNDb2RlJywgcm93LnBkQnVzc0NvZGUsIHVuZGVmaW5lZCkNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-compensation-def/comboCtrlFormula","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :label=\"$t('i18nView.feeControlCalcFormulaDef')\" @backTo=\"back\"></cus-page-title-back>\r\n    <cus-form-title :first=\"true\" :label=\"$t('i18nView.ppCalcFormulaSelect')\"></cus-form-title>\r\n    <el-form ref=\"productBnftForm\" :disabled=\"true\" label-width=\"auto\">\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.payControlType')\">\r\n            <el-tag type=\"info\">{{ pdtempClmCtrlMain.pdBnftCtrlType | filter_clmCtrlType }}</el-tag>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.controlCode')\">\r\n            <el-tag type=\"info\">{{ pdtempClmCtrlMain.pdBnftCtrlCode }}</el-tag>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.CalcFormulaType')\">\r\n            <el-tag type=\"info\">{{ pdBussDetailType | filter_pdBussDetailType }}</el-tag>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <el-button dialog-disable=\"disable\" icon=\"el-icon-connection\" size=\"small\" type=\"primary\" @click=\"toFormulaSelect\">\r\n      {{ $t('pdtempPdClmBnft.chooseExpression') }}\r\n    </el-button>\r\n    <cus-table-title :label=\"$t('pdtempPdClmBnft.expression')\"/>\r\n    <el-table :data=\"tableData_formula\" border highlight-current-row size=\"mini\">\r\n      <el-table-column :label=\"$t('table.select')\" width=\"50\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group v-model=\"selectedFormula\" @change=\"selectedFormulaChanged(scope.row.pdCalcCode)\">\r\n            <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.detail')\" align=\"center\"  width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button dialog-disable=\"disable\" size=\"small\" type=\"text\" @click=\"showFormula(scope.row)\">>></el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdClmBnft.ExpressionType')\" align=\"center\"\r\n                       prop=\"pdtempPdCalc.pdBussDetailType\">\r\n        <template v-slot=\"scope\">\r\n          {{ scope.row.pdBussDetailType | filter_pdBussDetailType }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdClmBnft.expressionCode')\" align=\"center\" prop=\"pdCalcCode\">\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdClmBnft.expressionDesc')\" align=\"center\" prop=\"pdCalcDesc\">\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('rule.ruleAttr')\">\r\n        <template v-slot=\"scope\">\r\n          {{\r\n            scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n          }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.actions')\" align=\"center\" fixed=\"right\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <cus-del-btn v-auth=\"'clmCtrlFormula:delete'\" @ok=\"deleteFormula(scope.row)\"></cus-del-btn>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <cus-pagination ref=\"page\" v-model=\"tableData_formula\" :autoBuild=\"false\" :pageSize=\"10\"\r\n                    :params=\"params\" url=\"/combo-claim-compensation/base/allAssociatedFormula\"/>\r\n\r\n    <!-- 公式查看和决策树编辑弹窗 -->\r\n    <cus-rule-modify :flag=\"formulaView.flag\" :performType=\"formulaView.performType\" :ruleCode=\"formulaView.ruleCode\"\r\n                     :ruleModifyClosed=\"formulaViewClosed\" :ruleType=\"'2'\"\r\n                     :visible=\"formulaView.visible\"></cus-rule-modify>\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {deleteFormula} from \"@/api/basicinfo/compensationDefinition\"\r\n\r\nlet _this\r\n\r\nexport default {\r\n  name: 'clmCtrlFormula',\r\n  props: {\r\n    pdtempClmCtrlMain: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    pdBussDetailType: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  filters: {\r\n    filter_pdBussDetailType(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    },\r\n    filter_clmCtrlType(code) {\r\n      return _this.getCodeName('clmCtrlType', code)\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      params: {\r\n        pdBussCode: ''\r\n      },\r\n      tableData_formula: [],\r\n      selectedFormula: {},\r\n      // 产品信息\r\n      combo: {},\r\n      formulaView: {\r\n        flag: '',\r\n        ruleCode: '',\r\n        performType: '',\r\n        visible: false\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.initProductInfo()\r\n  },\r\n  mounted() {\r\n    this.initTableData()\r\n  },\r\n  methods: {\r\n    initTableData() {\r\n      this.params = {\r\n        pdBussCode: this.pdtempClmCtrlMain.pdBnftCtrlCode\r\n      };\r\n      this.$nextTick(() => {\r\n        this.$refs.page.buildData()\r\n      })\r\n    },\r\n    showFormula(row) {\r\n      this.formulaView.flag = '1'\r\n      this.formulaView.performType = row.performType\r\n      this.formulaView.ruleCode = row.pdCalcCode\r\n      this.formulaView.visible = true\r\n    },\r\n    formulaViewClosed() {\r\n      this.formulaView.visible = false\r\n      this.selectedFormula = {}\r\n    },\r\n    initProductInfo() {\r\n      let pdtempPdInfo = this.getPdData();\r\n      if (Object.keys(pdtempPdInfo).length > 0) {\r\n        Object.assign(this.combo, pdtempPdInfo)\r\n      } else {\r\n        this.notifyError('无法获取套餐信息')\r\n      }\r\n    },\r\n    back() {\r\n      this.$emit('changeDialogVisible_ClmCtrlFormula', false)\r\n    },\r\n    toFormulaSelect() {\r\n      this.$emit('changeDialogVisible_ClmCtrlFormulaSelect', true, 'aaa')\r\n    },\r\n    selectedFormulaChanged() {\r\n      this.formulaView.flag = this.selectedFormula.ruleAttr === '1' ? '1' : '2'\r\n      this.formulaView.ruleCode = this.selectedFormula.pdCalcCode\r\n      this.formulaView.performType = this.selectedFormula.performType\r\n      this.formulaView.visible = true\r\n    },\r\n    deleteFormula(row) {\r\n      deleteFormula(row).then(() => {\r\n        this.notifySuccess(this.$t('successMessage.delete'))\r\n        this.$refs.page.reload()\r\n        this.$emit('bringInCalcCode', row.pdBussCode, undefined)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}