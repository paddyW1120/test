{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\product-audit\\pdFileRelease\\index.vue?vue&type=style&index=0&id=44bdf5ec&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\product-audit\\pdFileRelease\\index.vue","mtime":1609847106613},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC1pbnB1dCB7CiAgd2lkdGg6IDIyMHB4Owp9CgouZWwtc2VsZWN0IHsKICB3aWR0aDogMjIwcHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiPA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-audit/product-audit/pdFileRelease","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back @backTo=\"backPage\" :label=\"$t('pdFileRelease.productAudit')\"/>\r\n    <cus-table-title :label=\"$t('pdFileRelease.pendingProductFile')\" />\r\n    <el-table :data=\"pdFileAuditTable\" border element-loading-text=\"Loading\" fit\r\n              size=\"mini\" style=\"width: 98%\">\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\"   type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdFileType')\" align=\"center\"  prop=\"pdFileType\">\r\n        <template v-slot=\"scope\">{{scope.row.pdFileType | filter_getFileType}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdFileName')\" align=\"center\"  prop=\"pdFileName\">\r\n        <template v-slot=\"scope\">{{scope.row.pdFileName | filter_getFileName}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdFileDesc')\" align=\"center\" prop=\"pdFileDesc\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdUpdDepmt')\" align=\"center\" prop=\"pdUpdDepmt\">\r\n        <template v-slot=\"scope\">{{scope.row.pdUpdDepmt | filter_getUpdDepmt}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdUpDate')\" align=\"center\" prop=\"createTime\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.operation')\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n              <cus-popover\r\n                :content=\"$t('table.delete')\"\r\n                @confirm=\"handleDelete1(scope.row)\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n              ></cus-popover>\r\n          </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <br>\r\n    <cus-form-title :label=\"$t('pdFileRelease.productAudit')\"/>\r\n    <el-form   :model=\"params\" ref=\"params\" label-width=\"auto\">\r\n      <el-row :gutter=\"20\" class=\"row-bg\" justify=\"\" type=\"flex\">\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdFileRelease.pdFileType')\">\r\n            <cus-cascader :codetype=\"'pdfiletype'\" :placeholder=\"$t('pdFileRelease.pdFileType')\"\r\n                          clearable v-model=\"params.pdFileType\"></cus-cascader>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.pdFileName')\" prop=\"pdName\">\r\n              <el-input clearable v-model=\"params.pdFileName\"></el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-button  size=\"small\" @click=\"searchDataByCondition\" icon=\"el-icon-search\" type=\"primary\"\r\n                     v-auth=\"'pdtemp-pd-file:queryData'\">{{$t('pdFileRelease.search') }}\r\n          </el-button>\r\n        </cus-col>\r\n      </el-row>\r\n    </el-form>\r\n    <cus-table-title :label=\"$t('pdFileRelease.productFile')\" />\r\n    <el-table :data=\"pdFileData\" border element-loading-text=\"Loading\" fit highlight-current-row max-height=\"500\"\r\n              @selection-change=\"checkPdFileAudit\" size=\"mini\" style=\"width: 98%\">\r\n      <el-table-column :label=\"$t('productValueAddedTax.select')\" type=\"selection\" align=\"center\" width=\"50px\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\"   type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdFileType')\" align=\"center\"  prop=\"pdFileType\">\r\n        <template v-slot=\"scope\">{{scope.row.pdFileType | filter_getFileType}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdFileName')\" align=\"center\"  prop=\"pdFileName\">\r\n        <template v-slot=\"scope\">{{scope.row.pdFileName | filter_getFileName}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdFileDesc')\" align=\"center\" prop=\"pdFileDesc\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdUpdDepmt')\" align=\"center\" prop=\"pdUpdDepmt\">\r\n        <template v-slot=\"scope\">{{scope.row.pdUpdDepmt | filter_getUpdDepmt}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdFileRelease.pdUpDate')\" align=\"center\" prop=\"createTime\"></el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination ref=\"pdPage\" url=\"/pd-audit-info/pdFile\" :pageSize=\"10\" :params=\"params\"\r\n                    v-model=\"pdFileData\"/>\r\n    <br>\r\n    <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n      <el-col :span=\"24\" align=\"right\">\r\n        <el-button  size=\"small\" @click=\"relationFile\" icon=\"el-icon-success\"  type=\"primary\">\r\n          {{$t('pdFileRelease.relation')}}</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {pdAuditFileList,pdEditionList,addAuditFile,deletePdAuditFile} from \"@/api/basicinfo/pdauditinfo\";\r\n  let _this;\r\n  export default {\r\n    name: 'pdFileRelease',\r\n    filters: {\r\n      filter_getFileType(code) {\r\n        if (code != null) {\r\n          return _this.getCascaderCodeName('pdfiletype', code);\r\n        }\r\n      },\r\n      filter_getFileName(code) {\r\n        if (code != null) {\r\n          let filename = JSON.parse(code);\r\n          let rename = '';\r\n          for (let i = 0; i < filename.length; i++) {\r\n            if (i === filename.length - 1) {\r\n              rename += filename[i]\r\n            } else {\r\n              rename += filename[i] + \"; \"\r\n            }\r\n          }\r\n          return rename\r\n        }\r\n      },\r\n      filter_getUpdDepmt(code) {\r\n        if (code != null) {\r\n          return _this.getCodeName('pddepmt', code)\r\n        }\r\n      }\r\n    },\r\n    props: {\r\n      pdInfo: {\r\n        type: Object,\r\n        default: {},\r\n      }\r\n    },\r\n    data() {\r\n      _this = this;\r\n      return {\r\n        pdFileAuditTable:[],\r\n        checkPdFileAuditTable:[],\r\n        pdFileTypeFilters:[],\r\n        content: [],\r\n        pdEditionInfo: [],\r\n        selectEdition: [],\r\n        //表格数据\r\n        pdFileData: [],\r\n        //查询参数\r\n        params: {\r\n          pdInfoId:'',\r\n          pdFileType: [],\r\n          pdEdition:'',\r\n          pdName: '',\r\n          pdFileName: '',\r\n        },\r\n        //检验规则\r\n        rules: {\r\n        }\r\n      }\r\n    },\r\n    computed: {},\r\n    created() {\r\n      this.params.pdInfoId=this.pdInfo.id;\r\n      this.getPdFileData1();\r\n      this.findPdEditionList()\r\n      this.cacheStrData(\"dialogOnly\", \"false\");\r\n\r\n    },\r\n    watch:{\r\n      pdFileAuditTable(){\r\n\r\n      },\r\n      pdFileData() {\r\n        /*\r\n        if (this.pdFileData.length > 0) {\r\n         this.pdFileTypeFilters = [];\r\n          this.pdFileData.forEach(val => {\r\n            this.pdFileTypeFilters.push({\r\n              text: this.getCascaderCodeName('pdfiletype', val.pdFileType),\r\n              value: val.pdFileType\r\n            });\r\n          });\r\n          //文件类型\r\n          this.pdFileTypeFilters = this.pdFileTypeFilters.reduce(function (prev, element) {\r\n            if (!prev.find(el => el.text == element.text)) {\r\n              prev.push(element);\r\n            }\r\n            return prev;\r\n          }, []);\r\n        }*/\r\n      },\r\n    },\r\n    methods: {\r\n      searchDataByCondition() {\r\n        if (this.$refs.pdPage) {\r\n          this.$refs.pdPage.reload();\r\n        }\r\n      },\r\n      //返回产品审核查询页面\r\n      backPage() {\r\n        this.$emit('bringPdFileAuditData', this.pdFileAuditTable);\r\n        this.$emit('changeDialogFileRelease', false)\r\n        this.cacheStrData('pdFileAuditTableback', JSON.stringify(this.pdFileAuditTable));\r\n      },\r\n      findPdEditionList(){\r\n        let params = {\r\n          pdInfoId:this.pdInfo.id\r\n        };\r\n        pdEditionList(this.buildRequestData(params)).then(res => {\r\n          this.pdEditionInfo=res.data;\r\n          for (const pdEdition of this.pdEditionInfo) {\r\n              this.selectEdition.push(pdEdition);\r\n            }\r\n        })\r\n      },\r\n      getPdFileData1(){\r\n      \tthis.pdFileAuditTable = [];\r\n        let params = {\r\n          pdInfoId:this.pdInfo.id\r\n        };\r\n        pdAuditFileList(this.buildRequestData(params)).then(res => {\r\n          if(res.data.length===0){\r\n            let pdFileAuditTableback = this.getStrData('pdFileAuditTableback')\r\n            this.pdFileAuditTable = JSON.parse(pdFileAuditTableback);\r\n          }else{\r\n            this.pdFileAuditTable=res.data\r\n          }\r\n        })\r\n      },\r\n      relationFile(){\r\n        if(this.checkPdFileAuditTable.length>0) {\r\n          this.pdFileAuditTable=this.checkPdFileAuditTable;\r\n          for (const pdAudit of this.checkPdFileAuditTable) {\r\n            //this.pdFileData.splice(pdAudit.id,1)\r\n          }\r\n          //this.getPdFileData()\r\n        }else{\r\n          this.notifyError(\"请选择一条产品资料\")\r\n        }\r\n      },\r\n      checkPdFileAudit(val){\r\n        this.checkPdFileAuditTable=val\r\n      },\r\n      filterHandler(value, row, column) {\r\n        const property = column['property'];\r\n        return row[property] === value\r\n      },\r\n      handleDelete1(row){\r\n        let auditFileId = row.pdAuditId;\r\n\t      deletePdAuditFile(auditFileId).then(res => {\r\n\t\t      _this.getPdFileData1();\r\n\t        this.notifySuccess(res.message);\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .el-input {\r\n    width: 220px;\r\n  }\r\n\r\n  .el-select {\r\n    width: 220px;\r\n  }\r\n</style>\r\n"]}]}