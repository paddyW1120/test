{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-acceptance-def\\pd-insurance-rule-def\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-acceptance-def\\pd-insurance-rule-def\\index.vue","mtime":1609847106916},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBhZGRQZHRlbXBQZEluc3VBZ2VJbmZvLA0KICBjb25uUnVsZXMsDQogIGRlbGV0ZVBkdGVtcFBkSW5zdUFnZUluZm9MaXN0LA0KICBkZWxldGVQZHRlbXBQZFJ1bGVzLA0KICBmaW5kQm5mdEJ5SWQsDQogIGZpbmRCbmZ0QnlQcm9nLA0KICBmaW5kQm5mdERldGFpbEJ5Qm5mdCwNCiAgZmluZFBkUGF5RnJlcU9wdGlvbnNCeVByb2R1Y3QsDQogIGZpbmRQcmVtQnlJZCwNCiAgZmluZFByZW1CeVByb2csDQogIGZpbmRQcm9nQnlJZCwNCiAgZ2V0UnVsZUNvZGUsDQogIHVwZGF0ZVBkdGVtcFBkSW5zdUFnZUluZm8NCn0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL3BkdGVtcHBkaW5zdWFnZWluZm8iDQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gInZ1ZXgiDQppbXBvcnQge2ZpbmRBbGxQcm9kdWN0QnlEZXRhaWxUeXBlfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vaW52UnVsZXMiDQoNCmxldCBfdGhpcw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJwZHRlbXBwZGluc3VhZ2VpbmZvIiwNCiAgZmlsdGVyczogew0KICAgIGZpbHRlcl9wZFJvbGVDb2RlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgicGRleHB0cm9sZSIsIGNvZGUpLnNwbGl0KCI6IilbMV0NCiAgICB9LA0KICAgIGZpbHRlcl9wZFJvbGVTZXgoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCJwcm9kdWN0UnVsZVNleCIsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfcGRNYXhBcHBBZ2VVbml0KGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgicGRzYm5mdGR5IiwgY29kZSwgdHJ1ZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZFBheUZyZXEoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCJwYXltZW50RnJlcXVlbmN5IiwgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZFJ1bGVHcmFkZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoInJ1bGVHcmFkZSIsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfcGRSdWxlUHJvcER0Q2xzKGNvZGUpIHsNCiAgICAgIGlmIChjb2RlKSB7DQogICAgICAgIHJldHVybiBfdGhpcy5nZXRDYXNjYWRlckNvZGVOYW1lKCdydWxlQXNjckRldGEnLCBjb2RlKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfSwNCiAgICBmaWx0ZXJfcGRCdXNzRGV0YWlsVHlwZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3J1bGVCdXNpbmVzc0RldGFpbENsYXNzJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZFNsQ2hhbmwoY29kZSkgew0KICAgICAgaWYgKGNvZGUpIHsNCiAgICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZFNsQ2hhbmwnLCBjb2RlLnNwbGl0KCcsJykpDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gJycNCiAgICAgIH0NCiAgICB9LA0KICAgIGZpbHRlcl9wZFJvbGVObyhjb2RlKSB7DQogICAgICBpZiAoY29kZSkgew0KICAgICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3JvbGVPcmRlcicsIGNvZGUpLnNwbGl0KCI6IilbMV0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAnJw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICBfdGhpcyA9IHRoaXMNCiAgICByZXR1cm4gew0KICAgICAgcGFnZTogdW5kZWZpbmVkLA0KICAgICAgcGFnZVNpemU6IHVuZGVmaW5lZCwNCiAgICAgIGZpbHRlcnNfcGRDb2RlX2JyaWVmOiBbXSwNCiAgICAgIGZpbHRlcnNfcGRDb2RlX2FsbDogW10sDQogICAgICBydWxlUmV2aXNpb25TaG93SU5mbzogZmFsc2UsDQogICAgICBydWxlVmlldzogew0KICAgICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgICAgZmxhZzogJycsDQogICAgICAgIHBlcmZvcm1UeXBlOiAnJywNCiAgICAgICAgcnVsZUNvZGU6ICcnDQogICAgICB9LA0KICAgICAgYXR0cmlidXRlT2JqOiB7fSwNCiAgICAgIHJ1bGVWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHBkdGVtcFBkSW5mbzogbnVsbCwNCiAgICAgIHJhZGlvMTogbnVsbCwNCiAgICAgIHJhZGlvMjogbnVsbCwNCiAgICAgIHJhZGlvMzogbnVsbCwNCiAgICAgIHNob3dSdWxlOiBmYWxzZSwNCiAgICAgIG1hcms6IG51bGwsDQogICAgICBsYW5ndWFnZTogbnVsbCwNCiAgICAgIHJ1bGVNZXNzYWdlSW5mb0JvbTogW10sDQogICAgICBhZ2VDb25maWdzOiBbXSwNCiAgICAgIGFnZUNvbmZpZ3NEYXRhOiBbXSwNCiAgICAgIGFnZUZvcm1BcnJheTogW10sDQogICAgICBwYXJhbXNfY3VycmVudDogew0KICAgICAgICBwZENvZGU6ICcnLA0KICAgICAgICBwZEluZm9JZDogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgcGFyYW1zX2JyaWVmOiB7DQogICAgICAgIHByb2R1Y3Q6IHVuZGVmaW5lZCwNCiAgICAgICAgcHJvZHVjdERldGFpbFR5cGU6ICcnLA0KICAgICAgICBwZFJ1bGVHcmFkZTogJzEnDQogICAgICB9LA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHByb2R1Y3Q6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRSdWxlR3JhZGU6ICcnLA0KICAgICAgICBwZFJ1bGVEdENsczogJzknLA0KICAgICAgICBjdXJyZW50X3BkUHJvZ0NvZGU6ICcnLA0KICAgICAgICBjdXJyZW50X3BkQm5mdENvZGU6ICcnLA0KICAgICAgICBjdXJyZW50X3BkQm5mdER0Q29kZTogJycsDQogICAgICAgIGN1cnJlbnRfcGRQcmVtQ29kZTogJycsDQogICAgICAgIGVxX3Byb2R1Y3REZXRhaWxUeXBlOiAnJywNCiAgICAgICAgZXFfcGRJbmZvSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgZXFfcGRQcm9nQ29kZTogJycsDQogICAgICAgIGVxX3BkQm5mdENvZGU6ICcnLA0KICAgICAgICBlcV9wZEJuZnREdENvZGU6ICcnLA0KICAgICAgICBlcV9wZFByZW1Db2RlOiAnJywNCiAgICAgICAgbGlrZV9wZFJ1bGVDb2RlOiAnJw0KICAgICAgfSwNCiAgICAgIGN1cnJlbnRSdWxlczogW10sDQogICAgICBwZEFnZUNvbmZpZ3M6IFtdLA0KICAgICAgYnJpZWZSdWxlczogW10sDQogICAgICBjdXNDb25maWdzRGF0YTogW10sDQogICAgICBydWxlQ29uZmlnczogW10sDQogICAgICBkYXRhQ29uZmlnczogW10sDQogICAgICBwZFBheUZyZXFPcHRpb25zOiBbXSwNCiAgICAgIHByb2dPcHRpb25zOiBbXSwNCiAgICAgIGJuZnRPcHRpb25zOiBbXSwNCiAgICAgIGJuZnRkZXRhaWxPcHRpb25zOiBbXSwNCiAgICAgIHByZW1PcHRpb25zOiBbXSwNCiAgICAgIHByb2R1Y3RPcHRpb25zOiBbXSwNCiAgICAgIHByb2dPcHRpb25zMTogW10sDQogICAgICBibmZ0T3B0aW9uczE6IFtdLA0KICAgICAgYm5mdGRldGFpbE9wdGlvbnMxOiBbXSwNCiAgICAgIHByZW1PcHRpb25zMTogW10sDQogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sDQogICAgICBjaG9vc2VSdWxlc0luQnJpZWY6IFtdLA0KICAgICAgY2hvb3NlUnVsZXNJbkFsbDogW10sDQogICAgICBjaG9vc2VSdWxlRGF0YTogW10sDQogICAgICBydWxlQ29sczogW10sDQogICAgICBwZFNsQ2hhbmxBcnJheTogW10sDQogICAgICBwZFNhbGVDaGFubEFycmF5OiBbXSwNCiAgICAgIGFnZUZvcm06IHsNCiAgICAgICAgcGRSb2xlQ29kZTogIiIsDQogICAgICAgIHBkUm9sZU5vOiAiMSIsDQogICAgICAgIHBkUm9sZVNleDogIiIsDQogICAgICAgIHBkSW5zdVBlcmlvZDogIiIsDQogICAgICAgIHBkSW5zdVBlcmlvZFVuaXQ6ICJZIiwNCiAgICAgICAgcGRQYXlQZXJpb2Q6ICIiLA0KICAgICAgICBwZFBheVBlcmlvZFVuaXQ6ICJZIiwNCiAgICAgICAgcGRQYXlGcmVxOiAiIiwNCiAgICAgICAgcGRNYXhBcHBBZ2U6ICIiLA0KICAgICAgICBwZE1heEFwcEFnZVVuaXQ6ICJBIiwNCiAgICAgICAgcGRNaW5BcHBBZ2U6ICIiLA0KICAgICAgICBwZE1pbkFwcEFnZVVuaXQ6ICJBIiwNCiAgICAgICAgcGRTbENoYW5sOiBbIjAwIl0sDQogICAgICAgIHVwZGF0ZVBkU2xDaGFubDogJycNCiAgICAgIH0sDQogICAgICBydWxlRm9ybToge30sDQogICAgICBwcm9kdWN0Rm9ybTogew0KICAgICAgICBwZEJ1c3NSbEdyZDogIjEiLA0KICAgICAgICBwcm9nOiAiIiwNCiAgICAgICAgYm5mdDogIiIsDQogICAgICAgIGJuZnRkZXRhaWw6ICIiLA0KICAgICAgICBwcmVtOiAiIg0KICAgICAgfSwNCiAgICAgIGFnZVBhcm1zOiB7DQogICAgICAgIGVxX3BkSW5mb0lkOiAiIiwNCiAgICAgICAgZXFfcGRDb2RlOiAiIg0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHBkUm9sZUNvZGU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkdGVtcFBkSW5zdUFnZUluZm8ucGxlYXNlU2VsZWN0Um9sZScpLCB0cmlnZ2VyOiAiY2hhbmdlIn0NCiAgICAgICAgXSwNCiAgICAgICAgcGRSb2xlTm86IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkdGVtcFBkSW5zdUFnZUluZm8ucGxlYXNlSW5wdXRSb2xlT3JkZXInKSwgdHJpZ2dlcjogImNoYW5nZSJ9LA0KICAgICAgICBdLA0KICAgICAgICBwZFJvbGVTZXg6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkdGVtcFBkSW5zdUFnZUluZm8ucGxlYXNlU2VsZWN0R2VuZGVyJyksIHRyaWdnZXI6ICJibHVyIn1dLA0KICAgICAgICBwZE1heEFwcEFnZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHBhdHRlcm46IC9eWzAtOV0qJC8sDQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwZHRlbXBQZEluc3VBZ2VJbmZvLm1heEFnZU51bWJlck9ubHknKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgcGRNaW5BcHBBZ2U6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBwYXR0ZXJuOiAvXlswLTldKiQvLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5taW5BZ2VOdW1iZXJPbmx5JyksDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciINCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIHBkU2xDaGFubDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5wbGVhc2VTZWxlY3RTYWxlQ2hhbm5lbCcpLCB0cmlnZ2VyOiAiY2hhbmdlIn0NCiAgICAgICAgXSwNCiAgICAgICAgdXBkYXRlUGRTbENoYW5sOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdwZHRlbXBQZEluc3VBZ2VJbmZvLnBsZWFzZVNlbGVjdFNhbGVDaGFubmVsJyksIHRyaWdnZXI6ICJjaGFuZ2UifQ0KICAgICAgICBdDQogICAgICB9LA0KICAgICAgcHJvZHVjdEZvcm1SdWxlczogew0KICAgICAgICBwZEJ1c3NSbEdyZDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5wbGVhc2VTZWxlY3RQZFJ1bGVHcmFkZScpLCB0cmlnZ2VyOiAiY2hhbmdlIn0NCiAgICAgICAgXSwNCiAgICAgICAgcHJvZzogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5wbGVhc2VTZWxlY3RQcm9nSXRlbScpLCB0cmlnZ2VyOiAiY2hhbmdlIn0NCiAgICAgICAgXSwNCiAgICAgICAgYm5mdDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5wbGVhc2VTZWxlY3RCbmZ0SXRlbScpLCB0cmlnZ2VyOiAiY2hhbmdlIn0NCiAgICAgICAgXSwNCiAgICAgICAgYm5mdGRldGFpbDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogZmFsc2UsIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkdGVtcFBkSW5zdUFnZUluZm8ucGxlYXNlU2VsZWN0Qm5mdERUSXRlbScpLCB0cmlnZ2VyOiAiY2hhbmdlIn0NCiAgICAgICAgXSwNCiAgICAgICAgcHJlbTogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5wbGVhc2VTZWxlY3RQYXlJdGVtJyksIHRyaWdnZXI6ICJjaGFuZ2UifQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgJ3J1bGVNYXNzYWdlcycsDQogICAgICAnbGRjb2RlcycNCiAgICBdKQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMubGFuZ3VhZ2UgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hcHAubGFuZ3VhZ2UNCiAgICB0aGlzLnJ1bGVNZXNzYWdlSW5mb0JvbSA9IHRoaXMuJHN0b3JlLnN0YXRlLnJ1bGVNZXNzYWdlLnJ1bGVNZXNzYWdlcw0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucGFnZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2UNCiAgICB0aGlzLnBhZ2VTaXplID0gdGhpcy4kcm91dGUucXVlcnkucGFnZVNpemUNCiAgICB0aGlzLnJ1bGVSZXZpc2lvblNob3dJTmZvID0gdGhpcy4kcm91dGUucXVlcnkucnVsZVJldmlzaW9uU2hvd0lOZm8gPT09ICd0cnVlJw0KICAgIHRoaXMucGRTYWxlQ2hhbmxBcnJheSA9IHRoaXMubGRjb2Rlc1sicGRTbENoYW5sIl0NCiAgICB0aGlzLnJhZGlvMSA9IG51bGwNCiAgICBsZXQgcGR0ZW1wUGRJbmZvID0gdGhpcy5nZXRQZERhdGEoKQ0KICAgIHRoaXMucGR0ZW1wUGRJbmZvID0gcGR0ZW1wUGRJbmZvDQogICAgaWYgKHBkdGVtcFBkSW5mbykgew0KICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZENvZGUgPSB0aGlzLnBkdGVtcFBkSW5mby5wZENvZGUNCiAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRJbmZvSWQgPSB0aGlzLnBkdGVtcFBkSW5mby5pZA0KICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucHJvZHVjdCA9IHRoaXMucGR0ZW1wUGRJbmZvDQogICAgICB0aGlzLnBhcmFtc19icmllZi5wcm9kdWN0RGV0YWlsVHlwZSA9IHRoaXMucGR0ZW1wUGRJbmZvLmNUeXBlDQogICAgICB0aGlzLnBhcmFtcy5wcm9kdWN0ID0gdGhpcy5wZHRlbXBQZEluZm8NCiAgICAgIHRoaXMucGFyYW1zLmVxX3Byb2R1Y3REZXRhaWxUeXBlID0gdGhpcy5wZHRlbXBQZEluZm8uY1R5cGUNCiAgICAgIHRoaXMucHJvZHVjdEZvcm0ucHJvZHVjdCA9IHBkdGVtcFBkSW5mby5wZENvZGUgKyAiOiIgKyBwZHRlbXBQZEluZm8ucGROYW1lDQogICAgICB0aGlzLmZpbmRQZFBheUZyZXFPcHRpb25zQnlQcm9kdWN0KCkNCiAgICAgIHRoaXMuYWdlUGFybXMuZXFfcGRJbmZvSWQgPSB0aGlzLnBkdGVtcFBkSW5mby5pZA0KICAgICAgdGhpcy5hZ2VQYXJtcy5lcV9wZENvZGUgPSB0aGlzLnBkdGVtcFBkSW5mby5wZENvZGUNCiAgICAgIHRoaXMuZmluZFByb2dCeUlkKHBkdGVtcFBkSW5mby5pZCwgMCkNCiAgICAgIHRoaXMuZmluZEJuZnRCeUlkKHBkdGVtcFBkSW5mby5pZCwgMCkNCiAgICAgIHRoaXMuZmluZFByZW1CeUlkKHBkdGVtcFBkSW5mby5pZCwgMCkNCiAgICAgIHRoaXMubWFyayA9IHRoaXMuZ2V0UGREYXRhKCkubWFyaw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfY3VycmVudC5yZWxvYWQoKQ0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfYnJpZWYucmVsb2FkKCkNCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgICdhZ2VGb3JtLnBkSW5zdVBlcmlvZCcoKSB7DQogICAgICBpZiAodGhpcy5hZ2VGb3JtLnBkSW5zdVBlcmlvZCkgew0KICAgICAgICBpZiAoIXRoaXMuYWdlRm9ybS5wZEluc3VQZXJpb2RVbml0KSB7DQogICAgICAgICAgdGhpcy5hZ2VGb3JtLnBkSW5zdVBlcmlvZFVuaXQgPSAnWScNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgJ2FnZUZvcm0ucGRQYXlQZXJpb2QnKCkgew0KICAgICAgaWYgKHRoaXMuYWdlRm9ybS5wZFBheVBlcmlvZCkgew0KICAgICAgICBpZiAoIXRoaXMuYWdlRm9ybS5wZFBheVBlcmlvZFVuaXQpIHsNCiAgICAgICAgICB0aGlzLmFnZUZvcm0ucGRQYXlQZXJpb2RVbml0ID0gJ1knDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgICdhZ2VGb3JtLnBkTWF4QXBwQWdlJygpIHsNCiAgICAgIGlmICh0aGlzLmFnZUZvcm0ucGRNYXhBcHBBZ2UpIHsNCiAgICAgICAgaWYgKCF0aGlzLmFnZUZvcm0ucGRNYXhBcHBBZ2VVbml0KSB7DQogICAgICAgICAgdGhpcy5hZ2VGb3JtLnBkTWF4QXBwQWdlVW5pdCA9ICdBJw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAnYWdlRm9ybS5wZE1pbkFwcEFnZScoKSB7DQogICAgICBpZiAodGhpcy5hZ2VGb3JtLnBkTWluQXBwQWdlKSB7DQogICAgICAgIGlmICghdGhpcy5hZ2VGb3JtLnBkTWluQXBwQWdlVW5pdCkgew0KICAgICAgICAgIHRoaXMuYWdlRm9ybS5wZE1pbkFwcEFnZVVuaXQgPSAnQScNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgYWdlQ29uZmlnczogZnVuY3Rpb24gKG5ld1ZhbCkgew0KICAgICAgLyppZiAobmV3VmFsLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICB0aGlzLnNlbGVjdEZpcnN0KG5ld1ZhbFswXSkNCiAgICAgICAgdGhpcy5jaG9vc2VPbmVDaGFuZ2UobmV3VmFsWzBdKQ0KICAgICAgICB0aGlzLnJhZGlvMSA9IG5ld1ZhbFswXQ0KICAgICAgfSovDQogICAgfSwNCiAgICBydWxlQ29uZmlncygpIHsNCiAgICAgIHRoaXMuZmlsdGVyc19wZENvZGVfYWxsID0gW10NCiAgICAgIHRoaXMucnVsZUNvbmZpZ3MuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICBpZiAoIXRoaXMuXy5pbmNsdWRlcyh0aGlzLl8ubWFwKHRoaXMuZmlsdGVyc19wZENvZGVfYWxsLCAndmFsdWUnKSwgdmFsLnBkQ29kZSkpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnNfcGRDb2RlX2FsbC5wdXNoKHsNCiAgICAgICAgICAgIHRleHQ6IHZhbC5wZENvZGUgKyAnOicgKyB2YWwucGROYW1lLA0KICAgICAgICAgICAgdmFsdWU6IHZhbC5wZENvZGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYnJpZWZSdWxlcygpIHsNCiAgICAgIHRoaXMuZmlsdGVyc19wZENvZGVfYnJpZWYgPSBbXQ0KICAgICAgdGhpcy5icmllZlJ1bGVzLmZvckVhY2godmFsID0+IHsNCiAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXModGhpcy5fLm1hcCh0aGlzLmZpbHRlcnNfcGRDb2RlX2JyaWVmLCAndmFsdWUnKSwgdmFsLnBkQ29kZSkpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnNfcGRDb2RlX2JyaWVmLnB1c2goew0KICAgICAgICAgICAgdGV4dDogdmFsLnBkQ29kZSArICc6JyArIHZhbC5wZE5hbWUsDQogICAgICAgICAgICB2YWx1ZTogdmFsLnBkQ29kZQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAnYWdlRm9ybS5wZFNsQ2hhbmwnKHNlbGVjdGVkQ29kZXMpIHsNCiAgICAgIGlmIChzZWxlY3RlZENvZGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLnBkU2xDaGFubEFycmF5ID0gW10NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBhbGxDb2RlcyA9IHRoaXMuXy5tYXAodGhpcy5sZGNvZGVzWyJwZFNsQ2hhbmwiXSwgImNvZGUiKQ0KICAgICAgICBpZiAodGhpcy5fLmluY2x1ZGVzKHNlbGVjdGVkQ29kZXMsICIwMCIpKSB7DQogICAgICAgICAgYWxsQ29kZXMgPSBhbGxDb2Rlcy5maWx0ZXIoY29kZSA9PiB7DQogICAgICAgICAgICByZXR1cm4gY29kZSAhPT0gIjAwIg0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5wZFNsQ2hhbmxBcnJheSA9IGFsbENvZGVzDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxsQ29kZXMgPSBhbGxDb2Rlcy5maWx0ZXIoY29kZSA9PiB7DQogICAgICAgICAgICByZXR1cm4gY29kZSA9PT0gIjAwIg0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5wZFNsQ2hhbmxBcnJheSA9IGFsbENvZGVzDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2hhbmdlUmFkaW8oKSB7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIGlmICh0aGlzLmFnZUZvcm0ucGRSb2xlQ29kZSA9PT0gIjAwIikgew0KICAgICAgICAgIGxldCBtYXggPSAwDQogICAgICAgICAgZm9yIChjb25zdCBjb25maWcxIG9mIHRoaXMuYWdlQ29uZmlncykgew0KICAgICAgICAgICAgaWYgKGNvbmZpZzEucGRSb2xlQ29kZSA9PT0gIjAwIikgew0KICAgICAgICAgICAgICBtYXggPSBjb25maWcxLnBkUm9sZU5vDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGZvciAoY29uc3QgY29uZmlnIG9mIHRoaXMuYWdlQ29uZmlncykgew0KICAgICAgICAgICAgaWYgKHRoaXMuYWdlRm9ybS5wZFJvbGVDb2RlID09PSBjb25maWcucGRSb2xlQ29kZSkgew0KICAgICAgICAgICAgICBpZiAobWF4IDwgY29uZmlnLnBkUm9sZU5vKSB7DQogICAgICAgICAgICAgICAgbWF4ID0gY29uZmlnLnBkUm9sZU5vDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5hZ2VGb3JtLnBkUm9sZU5vID0gbWF4ICsgMQ0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWdlRm9ybS5wZFJvbGVDb2RlID09PSAiMDEiKSB7DQogICAgICAgICAgbGV0IG1heCA9IDANCiAgICAgICAgICBmb3IgKGNvbnN0IGNvbmZpZzEgb2YgdGhpcy5hZ2VDb25maWdzKSB7DQogICAgICAgICAgICBpZiAoY29uZmlnMS5wZFJvbGVDb2RlID09PSAiMDEiKSB7DQogICAgICAgICAgICAgIG1heCA9IGNvbmZpZzEucGRSb2xlTm8NCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgZm9yIChjb25zdCBjb25maWcgb2YgdGhpcy5hZ2VDb25maWdzKSB7DQogICAgICAgICAgICBpZiAodGhpcy5hZ2VGb3JtLnBkUm9sZUNvZGUgPT09IGNvbmZpZy5wZFJvbGVDb2RlKSB7DQogICAgICAgICAgICAgIGlmIChtYXggPCBjb25maWcucGRSb2xlTm8pIHsNCiAgICAgICAgICAgICAgICBtYXggPSBjb25maWcucGRSb2xlTm8NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmFnZUZvcm0ucGRSb2xlTm8gPSBtYXggKyAxDQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5hZ2VGb3JtLnBkUm9sZUNvZGUgPT09ICIwMiIpIHsNCiAgICAgICAgICBsZXQgbWF4ID0gMA0KICAgICAgICAgIGZvciAoY29uc3QgY29uZmlnMSBvZiB0aGlzLmFnZUNvbmZpZ3MpIHsNCiAgICAgICAgICAgIGlmIChjb25maWcxLnBkUm9sZUNvZGUgPT09ICIwMiIpIHsNCiAgICAgICAgICAgICAgbWF4ID0gY29uZmlnMS5wZFJvbGVObw0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBmb3IgKGNvbnN0IGNvbmZpZyBvZiB0aGlzLmFnZUNvbmZpZ3MpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmFnZUZvcm0ucGRSb2xlQ29kZSA9PT0gY29uZmlnLnBkUm9sZUNvZGUpIHsNCiAgICAgICAgICAgICAgaWYgKG1heCA8IGNvbmZpZy5wZFJvbGVObykgew0KICAgICAgICAgICAgICAgIG1heCA9IGNvbmZpZy5wZFJvbGVObw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuYWdlRm9ybS5wZFJvbGVObyA9IG1heCArIDENCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJ1bGVNb2R1bGVDbG9zZWQoKSB7DQogICAgICB0aGlzLnJ1bGVWaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMuJHJlZnMucGFnZV9icmllZi5yZWxvYWQoKQ0KICAgIH0sDQogICAgcnVsZU1ha2VDbG9zZWQoKSB7DQogICAgICB0aGlzLnJ1bGVWaWV3LnZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5yYWRpbzIgPSBudWxsDQogICAgfSwNCiAgICBoYW5kbGVTZWFyY2goKSB7DQogICAgICB0aGlzLiRyZWZzLmFnZVRhYmxlMS5yZWxvYWQoKQ0KICAgICAgdGhpcy5hZ2VGb3JtLnBkTWF4QXBwQWdlVW5pdCA9ICJBIg0KICAgICAgdGhpcy5hZ2VGb3JtLnBkTWluQXBwQWdlVW5pdCA9ICJBIg0KICAgICAgdGhpcy5hZ2VGb3JtLnBkSW5zdVBlcmlvZFVuaXQgPSAiWSINCiAgICAgIHRoaXMuYWdlRm9ybS5wZFBheVBlcmlvZFVuaXQgPSAiWSINCiAgICB9LA0KICAgIGJhY2tUb01lbnUoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeinhOWImeiuouato+S4u+mhtScsIHBhcmFtczoge3BhdGg6IHRoaXMuJHJvdXRlLnBhdGgsIHBhZ2U6IHRoaXMucGFnZSwgcGFnZVNpemU6IHRoaXMucGFnZVNpemV9fSkNCiAgICB9LA0KICAgIGZpbmRQcm9nQnlJZChpZCwgbnVtKSB7DQogICAgICBmaW5kUHJvZ0J5SWQoaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YQ0KICAgICAgICBpZiAobnVtID09PSAwKSB7DQogICAgICAgICAgdGhpcy5wcm9kdWN0Rm9ybS5wcm9nID0gJycNCiAgICAgICAgICB0aGlzLnByb2dPcHRpb25zID0gW10NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnBhcmFtcy5lcV9wZFByb2dDb2RlID0gJycNCiAgICAgICAgICB0aGlzLnByb2dPcHRpb25zMSA9IFtdDQogICAgICAgIH0NCiAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7DQogICAgICAgICAgZGF0YS5mb3JFYWNoKHZhbCA9PiB7DQogICAgICAgICAgICBpZiAobnVtID09PSAwKSB7DQogICAgICAgICAgICAgIHRoaXMucHJvZ09wdGlvbnMucHVzaCh7DQogICAgICAgICAgICAgICAgdmFsdWU6IHZhbC5wZFByb2dDb2RlLA0KICAgICAgICAgICAgICAgIGxhYmVsOiB2YWwucGRQcm9nQ29kZSArICI6IiArIHZhbC5wZFByb2dOYW1lDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLnByb2dPcHRpb25zMS5wdXNoKHsNCiAgICAgICAgICAgICAgICBrZXk6IHZhbC5pZCwNCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsLnBkUHJvZ0NvZGUsDQogICAgICAgICAgICAgICAgbGFiZWw6IHZhbC5wZFByb2dDb2RlICsgIjoiICsgdmFsLnBkUHJvZ05hbWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZmluZEJuZnRCeUlkKGlkLCBudW0pIHsNCiAgICAgIGZpbmRCbmZ0QnlJZChpZCkudGhlbihyZXMgPT4gew0KICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhDQogICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICB0aGlzLnByb2R1Y3RGb3JtLmJuZnQgPSAnJw0KICAgICAgICAgIHRoaXMuYm5mdE9wdGlvbnMgPSBbXQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMucGFyYW1zLmVxX3BkQm5mdENvZGUgPSAnJw0KICAgICAgICAgIHRoaXMuYm5mdE9wdGlvbnMxID0gW10NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICBkYXRhLmZvckVhY2godmFsID0+IHsNCiAgICAgICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICAgICAgdGhpcy5ibmZ0T3B0aW9ucy5wdXNoKHsNCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsLnBkQm5mdENvZGUgKyAiOiIgKyB2YWwucGRCbmZ0VHlwZSwNCiAgICAgICAgICAgICAgICBsYWJlbDogdmFsLnBkQm5mdENvZGUgKyAiOiIgKyB2YWwucGRCbmZ0TmFtZQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5ibmZ0T3B0aW9uczEucHVzaCh7DQogICAgICAgICAgICAgICAga2V5OiB2YWwuaWQsDQogICAgICAgICAgICAgICAgdmFsdWU6IHZhbC5wZEJuZnRDb2RlICsgIjoiICsgdmFsLnBkQm5mdFR5cGUsDQogICAgICAgICAgICAgICAgbGFiZWw6IHZhbC5wZEJuZnRDb2RlICsgIjoiICsgdmFsLnBkQm5mdE5hbWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZmluZFByZW1CeUlkKGlkLCBudW0pIHsNCiAgICAgIGZpbmRQcmVtQnlJZChpZCkudGhlbihyZXMgPT4gew0KICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhDQogICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICB0aGlzLnByb2R1Y3RGb3JtLnByZW0gPSAnJw0KICAgICAgICAgIHRoaXMucHJlbU9wdGlvbnMgPSBbXQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMucGFyYW1zLmVxX3BkUHJlbUNvZGUgPSAnJw0KICAgICAgICAgIHRoaXMucHJlbU9wdGlvbnMxID0gW10NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICBkYXRhLmZvckVhY2godmFsID0+IHsNCiAgICAgICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICAgICAgdGhpcy5wcmVtT3B0aW9ucy5wdXNoKHsNCiAgICAgICAgICAgICAgICBrZXk6IHZhbC5pZCwNCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsLnBkUHJlbUNvZGUsDQogICAgICAgICAgICAgICAgbGFiZWw6IHZhbC5wZFByZW1Db2RlICsgIjoiICsgdmFsLnBkUGF5TmFtZQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5wcmVtT3B0aW9uczEucHVzaCh7DQogICAgICAgICAgICAgICAga2V5OiB2YWwuaWQsDQogICAgICAgICAgICAgICAgdmFsdWU6IHZhbC5wZFByZW1Db2RlLA0KICAgICAgICAgICAgICAgIGxhYmVsOiB2YWwucGRQcmVtQ29kZSArICI6IiArIHZhbC5wZFBheU5hbWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZmluZEJuZnREZXRhaWxCeUJuZnQocm93LCBudW0pIHsNCiAgICAgIGlmIChyb3cpIHsNCiAgICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgICAgcGRCbmZ0Q29kZTogdGhpcy5nZXRDYXB0aW9uKHJvdywgMCksDQogICAgICAgICAgcGRCbmZ0VHlwZTogdGhpcy5nZXRDYXB0aW9uKHJvdywgMSkNCiAgICAgICAgfQ0KICAgICAgICBmaW5kQm5mdERldGFpbEJ5Qm5mdChkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YQ0KICAgICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdEZvcm0uYm5mdGRldGFpbCA9ICcnDQogICAgICAgICAgICB0aGlzLmJuZnRkZXRhaWxPcHRpb25zID0gW10NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5wYXJhbXMuZXFfcGRCbmZ0RHRDb2RlID0gJycNCiAgICAgICAgICAgIHRoaXMuYm5mdGRldGFpbE9wdGlvbnMxID0gW10NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7DQogICAgICAgICAgICBpZiAoZGF0YVswXS5wZENsbUJuZnRDb2RlKSB7DQogICAgICAgICAgICAgIGRhdGEuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuYm5mdGRldGFpbE9wdGlvbnMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgIGtleTogdmFsLnBkQ2xtQm5mdENvZGUsDQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwucGRDbG1CbmZ0Q29kZSwNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHZhbC5wZENsbUJuZnRDb2RlICsgIjoiICsgdmFsLnBkQ2xtQm5mdE5hbWUNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuYm5mdGRldGFpbE9wdGlvbnMxLnB1c2goew0KICAgICAgICAgICAgICAgICAgICBrZXk6IHZhbC5wZENsbUJuZnRDb2RlLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsLnBkQ2xtQm5mdENvZGUsDQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiB2YWwucGRDbG1CbmZ0Q29kZSArICI6IiArIHZhbC5wZENsbUJuZnROYW1lDQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGRhdGEuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgICAgICAgIGlmIChudW0gPT09IDApIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuYm5mdGRldGFpbE9wdGlvbnMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgIGtleTogdmFsLnBkU3J2bEJuZnRDb2RlLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsLnBkU3J2bEJuZnRDb2RlLA0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogdmFsLnBkU3J2bEJuZnRDb2RlICsgIjoiICsgdmFsLnBkU3J2bEJuZnROYW1lDQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmJuZnRkZXRhaWxPcHRpb25zMS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAga2V5OiB2YWwucGRTcnZsQm5mdENvZGUsDQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWwucGRTcnZsQm5mdENvZGUsDQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiB2YWwucGRTcnZsQm5mdENvZGUgKyAiOiIgKyB2YWwucGRTcnZsQm5mdE5hbWUNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuYm5mdGRldGFpbE9wdGlvbnMgPSBbXQ0KICAgICAgICB0aGlzLnByb2R1Y3RGb3JtLmJuZnRkZXRhaWwgPSAnJw0KICAgICAgfQ0KICAgIH0sDQogICAgZmluZFBkUGF5RnJlcU9wdGlvbnNCeVByb2R1Y3QoKSB7DQogICAgICBsZXQgZGF0YSA9IHsNCiAgICAgICAgcGRBdHJzQ29kZTogInBheWludHYiLA0KICAgICAgICBwZENvZGU6IHRoaXMucGR0ZW1wUGRJbmZvLnBkQ29kZSwNCiAgICAgICAgcGRJbmZvSWQ6IHRoaXMucGR0ZW1wUGRJbmZvLmlkDQogICAgICB9DQogICAgICBmaW5kUGRQYXlGcmVxT3B0aW9uc0J5UHJvZHVjdChkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMucGRQYXlGcmVxT3B0aW9ucyA9IFtdDQogICAgICAgIHJlcy5kYXRhLmZvckVhY2goYXRyc0luZm8gPT4gew0KICAgICAgICAgIHRoaXMucGRQYXlGcmVxT3B0aW9ucy5wdXNoKHsNCiAgICAgICAgICAgIHZhbHVlOiBhdHJzSW5mby5wZEF0cnNWYWwsDQogICAgICAgICAgICBsYWJlbDogdGhpcy5nZXRDb2RlTmFtZSgicGF5bWVudEZyZXF1ZW5jeSIsIGF0cnNJbmZvLnBkQXRyc1ZhbCkNCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHBkQnVzc1JsR3JkQ2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRSdWxlR3JhZGUgPSB2YWwNCiAgICAgIHRoaXMucHJvZHVjdEZvcm0ucHJvZyA9ICcnDQogICAgICB0aGlzLnByb2R1Y3RGb3JtLmJuZnQgPSAnJw0KICAgICAgdGhpcy5wcm9kdWN0Rm9ybS5ibmZ0ZGV0YWlsID0gJycNCiAgICAgIHRoaXMucHJvZHVjdEZvcm0ucHJlbSA9ICcnDQogICAgICB0aGlzLiRyZWZzLnBhZ2VfYnJpZWYucmVsb2FkKCkNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmc1sicHJvZHVjdFNlYXJjaEZvcm0iXS5jbGVhclZhbGlkYXRlKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBwcm9nQ2hhbmdlZCh2YWwpIHsNCiAgICAgIGlmICh0aGlzLnByb2R1Y3RGb3JtLnBkQnVzc1JsR3JkID09PSAnMycpIHsvLyDmn6Xkv53pmpwNCiAgICAgICAgdGhpcy5ibmZ0T3B0aW9ucyA9IFtdDQogICAgICAgIHRoaXMuYm5mdGRldGFpbE9wdGlvbnMgPSBbXQ0KICAgICAgICB0aGlzLnByb2R1Y3RGb3JtLmJuZnQgPSAnJw0KICAgICAgICB0aGlzLnByb2R1Y3RGb3JtLmJuZnRkZXRhaWwgPSAnJw0KICAgICAgICBpZiAodmFsKSB7DQogICAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICAgIHBkSW5mb0lkOiB0aGlzLnBkdGVtcFBkSW5mby5pZCwNCiAgICAgICAgICAgIHBkUHJvZ0NvZGU6IHZhbA0KICAgICAgICAgIH0NCiAgICAgICAgICBmaW5kQm5mdEJ5UHJvZyhwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgZm9yIChjb25zdCBwZHRlbXBQZEJuZnQgb2YgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgICAgICB0aGlzLmJuZnRPcHRpb25zLnB1c2goew0KICAgICAgICAgICAgICAgIGxhYmVsOiBwZHRlbXBQZEJuZnQucGRCbmZ0Q29kZSArICc6JyArIHBkdGVtcFBkQm5mdC5wZEJuZnROYW1lLA0KICAgICAgICAgICAgICAgIHZhbHVlOiBwZHRlbXBQZEJuZnQucGRCbmZ0Q29kZSArICc6JyArIHBkdGVtcFBkQm5mdC5wZEJuZnRUeXBlDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLnByb2R1Y3RGb3JtLnBkQnVzc1JsR3JkID09PSAnNCcpIHsvLyDmn6XnvLTotLkNCiAgICAgICAgdGhpcy5wcmVtT3B0aW9ucyA9IFtdDQogICAgICAgIHRoaXMucHJvZHVjdEZvcm0ucHJlbSA9ICcnDQogICAgICAgIGlmICh2YWwpIHsNCiAgICAgICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICAgICAgcGRJbmZvSWQ6IHRoaXMucGR0ZW1wUGRJbmZvLmlkLA0KICAgICAgICAgICAgcGRQcm9nQ29kZTogdmFsDQogICAgICAgICAgfQ0KICAgICAgICAgIGZpbmRQcmVtQnlQcm9nKHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IHBkdGVtcFBkUHJlbSBvZiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgIHRoaXMucHJlbU9wdGlvbnMucHVzaCh7DQogICAgICAgICAgICAgICAgbGFiZWw6IHBkdGVtcFBkUHJlbS5wZFByZW1Db2RlICsgJzonICsgcGR0ZW1wUGRQcmVtLnBkUGF5TmFtZSwNCiAgICAgICAgICAgICAgICB2YWx1ZTogcGR0ZW1wUGRQcmVtLnBkUHJlbUNvZGUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICB0b01vcmVSdWxlcygpIHsNCiAgICAgIHRoaXMuJHJlZnMucHJvZHVjdFNlYXJjaEZvcm0udmFsaWRhdGUocGFzcyA9PiB7DQogICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgdGhpcy5ydWxlQ29uZmlncyA9IFtdDQogICAgICAgICAgdGhpcy5wcm9kdWN0RGV0YWlsVHlwZUNoYW5nZWQodGhpcy5wZHRlbXBQZEluZm8uY1R5cGUpDQogICAgICAgICAgdGhpcy5zaG93UnVsZSA9IHRydWUNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmZvY3VzSXRlbSgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICB0b0FkZFJ1bGVzKCkgew0KICAgICAgY29uc3QgcGFyYW0gPSB7DQogICAgICAgIHBkQnVzc1R5cGU6ICc3JywNCiAgICAgICAgcGRCdXNzRGV0YWlsVHlwZTogJzknDQogICAgICB9DQogICAgICBnZXRSdWxlQ29kZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5hdHRyaWJ1dGVPYmogPSB7DQogICAgICAgICAgY29kZTogcmVzcG9uc2UuZGF0YSwNCiAgICAgICAgICBydWxlQnVzc01vZHU6ICc3JywNCiAgICAgICAgICBydWxlQnVzc01vZHVEZXRhOiAnOScsDQogICAgICAgICAgcnVsZVR5cGU6ICcxJywNCiAgICAgICAgICBydWxlQXR0cjogJzInLA0KICAgICAgICAgIHBkVHlwZTogJzEnLA0KICAgICAgICAgIHJpc2tUeXBlOiB0aGlzLnBkdGVtcFBkSW5mby5iVHlwZSwNCiAgICAgICAgICByaXNrRGV0YWlsOiB0aGlzLnBkdGVtcFBkSW5mby5jVHlwZSwNCiAgICAgICAgICBwZENvZGU6IHRoaXMucGR0ZW1wUGRJbmZvLnBkQ29kZSwNCiAgICAgICAgICBwZEVkaXRpb246IHRoaXMucGR0ZW1wUGRJbmZvLnBkRWRpdGlvbg0KICAgICAgICB9DQogICAgICAgIHRoaXMucnVsZVZpc2libGUgPSB0cnVlDQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd1J1bGVzKHJvdykgew0KICAgICAgdGhpcy5ydWxlVmlldy5mbGFnID0gJzEnDQogICAgICB0aGlzLnJ1bGVWaWV3LnJ1bGVDb2RlID0gcm93LnBkUnVsZUNvZGUNCiAgICAgIHRoaXMucnVsZVZpZXcucGVyZm9ybVR5cGUgPSByb3cucGVyZm9ybVR5cGUNCiAgICAgIHRoaXMucnVsZVZpZXcudmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIHNlYXJjaFJ1bGVzKCkgew0KICAgICAgdGhpcy5wYXJhbXMucGRSdWxlR3JhZGUgPSB0aGlzLnByb2R1Y3RGb3JtLnBkQnVzc1JsR3JkDQogICAgICB0aGlzLnBhcmFtcy5jdXJyZW50X3BkUHJvZ0NvZGUgPSB0aGlzLnByb2R1Y3RGb3JtLnByb2cNCiAgICAgIHRoaXMucGFyYW1zLmN1cnJlbnRfcGRCbmZ0Q29kZSA9IHRoaXMucHJvZHVjdEZvcm0uYm5mdCA/IHRoaXMuZ2V0Q2FwdGlvbih0aGlzLnByb2R1Y3RGb3JtLmJuZnQsIDApIDogJycNCiAgICAgIHRoaXMucGFyYW1zLmN1cnJlbnRfcGRCbmZ0RHRDb2RlID0gdGhpcy5wcm9kdWN0Rm9ybS5ibmZ0ZGV0YWlsDQogICAgICB0aGlzLnBhcmFtcy5jdXJyZW50X3BkUHJlbUNvZGUgPSB0aGlzLnByb2R1Y3RGb3JtLnByZW0NCiAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKQ0KICAgIH0sDQogICAgZmluZEN1c09wdGlvbnMocGRJbmZvSWQpIHsNCiAgICAgIGlmIChwZEluZm9JZCkgew0KICAgICAgICB0aGlzLnBhcmFtcy5lcV9wZEJuZnREdENvZGUgPSAnJw0KICAgICAgICB0aGlzLmJuZnRkZXRhaWxPcHRpb25zMSA9IFtdDQogICAgICAgIHRoaXMuZmluZFByb2dCeUlkKHBkSW5mb0lkLCAxKQ0KICAgICAgICB0aGlzLmZpbmRCbmZ0QnlJZChwZEluZm9JZCwgMSkNCiAgICAgICAgdGhpcy5maW5kUHJlbUJ5SWQocGRJbmZvSWQsIDEpDQogICAgICAgIGlmICh0aGlzLiRyZWZzWyJzZWFyY2hGb3JtIl0pIHsNCiAgICAgICAgICB0aGlzLiRyZWZzWyJzZWFyY2hGb3JtIl0ucmVzZXRGaWVsZHMoKQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnBhcmFtcy5lcV9wZFByb2dDb2RlID0gJycNCiAgICAgICAgdGhpcy5wYXJhbXMuZXFfcGRCbmZ0Q29kZSA9ICcnDQogICAgICAgIHRoaXMucGFyYW1zLmVxX3BkQm5mdER0Q29kZSA9ICcnDQogICAgICAgIHRoaXMucGFyYW1zLmVxX3BkUHJlbUNvZGUgPSAnJw0KICAgICAgICB0aGlzLnByb2dPcHRpb25zMSA9IFtdDQogICAgICAgIHRoaXMuYm5mdE9wdGlvbnMxID0gW10NCiAgICAgICAgdGhpcy5ibmZ0ZGV0YWlsT3B0aW9uczEgPSBbXQ0KICAgICAgICB0aGlzLnByZW1PcHRpb25zMSA9IFtdDQogICAgICB9DQogICAgfSwNCiAgICBjb25uUnVsZXModHlwZSkgew0KICAgICAgaWYgKHR5cGUgPT09ICdicmllZicpIHsNCiAgICAgICAgaWYgKHRoaXMuY2hvb3NlUnVsZXNJbkJyaWVmLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncGR0ZW1wUGRJbnN1QWdlSW5mby5wbGVhc2VTZWxlY3RSdWxlJykpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgbGV0IHBhc3NGbGFnID0gdHJ1ZQ0KICAgICAgICB0aGlzLiRyZWZzLnByb2R1Y3RTZWFyY2hGb3JtLnZhbGlkYXRlKHBhc3MgPT4gew0KICAgICAgICAgIGlmICghcGFzcykgew0KICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW0oKQ0KICAgICAgICAgICAgcGFzc0ZsYWcgPSBmYWxzZQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgaWYgKCFwYXNzRmxhZykgew0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdhbGwnKSB7DQogICAgICAgIGlmICh0aGlzLmNob29zZVJ1bGVzSW5BbGwubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwZHRlbXBQZEluc3VBZ2VJbmZvLnBsZWFzZVNlbGVjdFJ1bGUnKSkNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwZHRlbXBQZEluc3VBZ2VJbmZvLnBsZWFzZUFwcG9pbnRBc3NvY2lhdGlvblR5cGUnKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBsZXQgcGR0ZW1wUGRSdWxlc0xpc3QgPSBbXQ0KICAgICAgbGV0IGNob29zZVJ1bGVzDQogICAgICBpZiAodHlwZSA9PT0gJ2JyaWVmJykgew0KICAgICAgICBjaG9vc2VSdWxlcyA9IHRoaXMuY2hvb3NlUnVsZXNJbkJyaWVmDQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdhbGwnKSB7DQogICAgICAgIGNob29zZVJ1bGVzID0gdGhpcy5jaG9vc2VSdWxlc0luQWxsDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3BkdGVtcFBkSW5zdUFnZUluZm8ucGxlYXNlQXBwb2ludEFzc29jaWF0aW9uVHlwZScpKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGNob29zZVJ1bGVzLmZvckVhY2gocnVsZSA9PiB7DQogICAgICAgIGxldCBwZHRlbXBQZFJ1bGVzID0gew0KICAgICAgICAgIHBkQ29kZTogcnVsZS5wZENvZGUsDQogICAgICAgICAgcGRSdWxlR3JhZGU6IHRoaXMucHJvZHVjdEZvcm0ucGRCdXNzUmxHcmQsDQogICAgICAgICAgcGRQcm9nQ29kZTogdGhpcy5wcm9kdWN0Rm9ybS5wZEJ1c3NSbEdyZCAhPT0gJzEnID8gdGhpcy5wcm9kdWN0Rm9ybS5wcm9nIDogbnVsbCwNCiAgICAgICAgICBwZEJuZnRDb2RlOiB0aGlzLnByb2R1Y3RGb3JtLnBkQnVzc1JsR3JkID09PSAnMycgPyB0aGlzLmdldENhcHRpb24odGhpcy5wcm9kdWN0Rm9ybS5ibmZ0LCAwKSA6IG51bGwsDQogICAgICAgICAgcGRCbmZ0RHRDb2RlOiB0aGlzLnByb2R1Y3RGb3JtLnBkQnVzc1JsR3JkID09PSAnMycgPyB0aGlzLnByb2R1Y3RGb3JtLmJuZnRkZXRhaWwgOiBudWxsLA0KICAgICAgICAgIHBkUHJlbUNvZGU6IHRoaXMucHJvZHVjdEZvcm0ucGRCdXNzUmxHcmQgPT09ICc0JyA/IHRoaXMucHJvZHVjdEZvcm0ucHJlbSA6IG51bGwsDQogICAgICAgICAgcGRSdWxlQ2xzOiBydWxlLnBkUnVsZUNscywNCiAgICAgICAgICBwZFJ1bGVEdENsczogcnVsZS5wZFJ1bGVEdENscywNCiAgICAgICAgICBwZFJ1bGVQcm9wQ2xzOiBydWxlLnBkUnVsZVByb3BDbHMsDQogICAgICAgICAgcGRSdWxlUHJvcER0Q2xzOiBydWxlLnBkUnVsZVByb3BEdENscywNCiAgICAgICAgICBwZFJ1bGVDb2RlOiBydWxlLnBkUnVsZUNvZGUsDQogICAgICAgICAgcGRSdWxlRGVzYzogcnVsZS5wZFJ1bGVEZXNjDQogICAgICAgIH0NCiAgICAgICAgcGR0ZW1wUGRSdWxlc0xpc3QucHVzaChwZHRlbXBQZFJ1bGVzKQ0KICAgICAgfSkNCiAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICBydWxlczogcGR0ZW1wUGRSdWxlc0xpc3QsDQogICAgICAgIHByb2R1Y3Q6IHRoaXMucGR0ZW1wUGRJbmZvLA0KICAgICAgICBwZEJ1c3NUeXBlOiAnNycsDQogICAgICAgIHBkQnVzc0RldGFpbFR5cGU6ICc5Jw0KICAgICAgfQ0KICAgICAgY29ublJ1bGVzKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbSkpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgncnVsZS5hc3NvY2lhdGlvblN1Y2Nlc3MnKSkNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQucmVsb2FkKCkNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgICAgIGlmICh0eXBlID09PSAnYWxsJykgew0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgY2xlYW5BZ2VGb3JtKCkgew0KICAgICAgdGhpcy5hZ2VGb3JtLmlkID0gIiINCiAgICAgIHRoaXMuYWdlRm9ybS5wZE1heEFwcEFnZSA9ICcnDQogICAgICB0aGlzLmFnZUZvcm0ucGRNaW5BcHBBZ2UgPSAnJw0KICAgICAgdGhpcy5hZ2VGb3JtLnBkSW5zdVBlcmlvZCA9ICcnDQogICAgICB0aGlzLmFnZUZvcm0ucGRQYXlQZXJpb2QgPSAnJw0KICAgICAgdGhpcy5hZ2VGb3JtLnBkUGF5RnJlcSA9ICcnDQogICAgICB0aGlzLmFnZUZvcm0ucGRSb2xlU2V4ID0gJycNCiAgICAgIHRoaXMuYWdlRm9ybS5wZFJvbGVObyA9ICcnDQogICAgICB0aGlzLmFnZUZvcm0ucGRSb2xlQ29kZSA9ICcnDQogICAgICB0aGlzLmFnZUZvcm0udXBkYXRlUGRTbENoYW5sID0gJycNCiAgICAgIHRoaXMuYWdlRm9ybS5wZFNsQ2hhbmwgPSBbXQ0KICAgIH0sDQogICAgc2F2ZUFnZUZvcm0oKSB7DQogICAgICBsZXQgcGR0ZW1wUGRJbnN1QWdlSW5mbyA9IHsNCiAgICAgICAgcGRWZXJJZDogdGhpcy5wZHRlbXBQZEluZm8ucGRWZXJJZCwNCiAgICAgICAgb3BlcmF0b3I6IHRoaXMucGR0ZW1wUGRJbmZvLm9wZXJhdG9yLA0KICAgICAgICBwZFR5cGU6IHRoaXMucGR0ZW1wUGRJbmZvLmJUeXBlLA0KICAgICAgICBwZEluZm9JZDogdGhpcy5wZHRlbXBQZEluZm8uaWQsDQogICAgICAgIHBkQ29kZTogdGhpcy5wZHRlbXBQZEluZm8ucGRDb2RlLA0KICAgICAgICBwZFJvbGVDb2RlOiB0aGlzLmFnZUZvcm0ucGRSb2xlQ29kZSwNCiAgICAgICAgcGRSb2xlTm86IHRoaXMuYWdlRm9ybS5wZFJvbGVObywNCiAgICAgICAgcGRSb2xlU2V4OiB0aGlzLmFnZUZvcm0ucGRSb2xlU2V4LA0KICAgICAgICBwZEluc3VQZXJpb2Q6IHRoaXMuYWdlRm9ybS5wZEluc3VQZXJpb2QsDQogICAgICAgIHBkSW5zdVBlcmlvZFVuaXQ6IHRoaXMuYWdlRm9ybS5wZEluc3VQZXJpb2RVbml0LA0KICAgICAgICBwZFBheVBlcmlvZDogdGhpcy5hZ2VGb3JtLnBkUGF5UGVyaW9kLA0KICAgICAgICBwZFBheVBlcmlvZFVuaXQ6IHRoaXMuYWdlRm9ybS5wZFBheVBlcmlvZFVuaXQsDQogICAgICAgIHBkUGF5RnJlcTogdGhpcy5hZ2VGb3JtLnBkUGF5RnJlcSwNCiAgICAgICAgcGRNYXhBcHBBZ2U6IHRoaXMuYWdlRm9ybS5wZE1heEFwcEFnZSwNCiAgICAgICAgcGRNYXhBcHBBZ2VVbml0OiB0aGlzLmFnZUZvcm0ucGRNYXhBcHBBZ2VVbml0LA0KICAgICAgICBwZE1pbkFwcEFnZTogdGhpcy5hZ2VGb3JtLnBkTWluQXBwQWdlLA0KICAgICAgICBwZE1pbkFwcEFnZVVuaXQ6IHRoaXMuYWdlRm9ybS5wZE1pbkFwcEFnZVVuaXQsDQogICAgICAgIHBkU2xDaGFubDogdGhpcy5hZ2VGb3JtLnBkU2xDaGFubA0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmFnZUZvcm0ucGRJbnN1UGVyaW9kKSB7DQogICAgICAgIHBkdGVtcFBkSW5zdUFnZUluZm8ucGRJbnN1UGVyaW9kVW5pdCA9IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmFnZUZvcm0ucGRQYXlQZXJpb2QpIHsNCiAgICAgICAgcGR0ZW1wUGRJbnN1QWdlSW5mby5wZFBheVBlcmlvZFVuaXQgPSB1bmRlZmluZWQNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5hZ2VGb3JtLnBkTWF4QXBwQWdlKSB7DQogICAgICAgIHBkdGVtcFBkSW5zdUFnZUluZm8ucGRNYXhBcHBBZ2VVbml0ID0gdW5kZWZpbmVkDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuYWdlRm9ybS5wZE1pbkFwcEFnZSkgew0KICAgICAgICBwZHRlbXBQZEluc3VBZ2VJbmZvLnBkTWluQXBwQWdlVW5pdCA9IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgICAgbGV0IGZsYWcgPSAwDQogICAgICBmb3IgKGNvbnN0IGNvbmZpZyBvZiB0aGlzLmFnZUNvbmZpZ3MpIHsNCiAgICAgICAgaWYgKHRoaXMuYWdlRm9ybS5wZFJvbGVDb2RlID09PSBjb25maWcucGRSb2xlQ29kZSkgew0KICAgICAgICAgIGlmICh0aGlzLmFnZUZvcm0ucGRSb2xlTm8gPT09IGNvbmZpZy5wZFJvbGVObykgew0KICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwZHRlbXBQZEluc3VBZ2VJbmZvLnJvbGVPcmRlckV4aXN0JykpDQogICAgICAgICAgICBmbGFnID0gMQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChmbGFnID09PSAwKSB7DQogICAgICAgIHRoaXMuJHJlZnNbImFnZUZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICBhZGRQZHRlbXBQZEluc3VBZ2VJbmZvKHBkdGVtcFBkSW5zdUFnZUluZm8pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubWVzc2FnZV90eXBlID09PSAicmVwZWF0Iikgew0KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgicGR0ZW1wUGRJbnN1QWdlSW5mby5tZXNzYWdlX3JlcGVhdCIpKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5zYXZlJykpDQogICAgICAgICAgICAgIHRoaXMuY2xlYW5BZ2VGb3JtKCkNCiAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKCkNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiY2hpbGRGbiIsIHRydWUpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHVwZGF0ZUFnZUZvcm0oKSB7DQogICAgICBsZXQgcGR0ZW1wUGRJbnN1QWdlSW5mbyA9IHsNCiAgICAgICAgaWQ6IHRoaXMuYWdlRm9ybS5pZCwNCiAgICAgICAgcGRWZXJJZDogdGhpcy5wZHRlbXBQZEluZm8ucGRWZXJJZCwNCiAgICAgICAgb3BlcmF0b3I6IHRoaXMucGR0ZW1wUGRJbmZvLm9wZXJhdG9yLA0KICAgICAgICBwZFR5cGU6IHRoaXMucGR0ZW1wUGRJbmZvLmJUeXBlLA0KICAgICAgICBwZEluZm9JZDogdGhpcy5wZHRlbXBQZEluZm8uaWQsDQogICAgICAgIHBkQ29kZTogdGhpcy5wZHRlbXBQZEluZm8ucGRDb2RlLA0KICAgICAgICBwZFJvbGVDb2RlOiB0aGlzLmFnZUZvcm0ucGRSb2xlQ29kZSwNCiAgICAgICAgcGRSb2xlTm86IHRoaXMuYWdlRm9ybS5wZFJvbGVObywNCiAgICAgICAgcGRSb2xlU2V4OiB0aGlzLmFnZUZvcm0ucGRSb2xlU2V4LA0KICAgICAgICBwZEluc3VQZXJpb2Q6IHRoaXMuYWdlRm9ybS5wZEluc3VQZXJpb2QsDQogICAgICAgIHBkSW5zdVBlcmlvZFVuaXQ6IHRoaXMuYWdlRm9ybS5wZEluc3VQZXJpb2RVbml0LA0KICAgICAgICBwZFBheVBlcmlvZDogdGhpcy5hZ2VGb3JtLnBkUGF5UGVyaW9kLA0KICAgICAgICBwZFBheVBlcmlvZFVuaXQ6IHRoaXMuYWdlRm9ybS5wZFBheVBlcmlvZFVuaXQsDQogICAgICAgIHBkUGF5RnJlcTogdGhpcy5hZ2VGb3JtLnBkUGF5RnJlcSwNCiAgICAgICAgcGRNYXhBcHBBZ2U6IHRoaXMuYWdlRm9ybS5wZE1heEFwcEFnZSwNCiAgICAgICAgcGRNYXhBcHBBZ2VVbml0OiB0aGlzLmFnZUZvcm0ucGRNYXhBcHBBZ2VVbml0LA0KICAgICAgICBwZE1pbkFwcEFnZTogdGhpcy5hZ2VGb3JtLnBkTWluQXBwQWdlLA0KICAgICAgICBwZE1pbkFwcEFnZVVuaXQ6IHRoaXMuYWdlRm9ybS5wZE1pbkFwcEFnZVVuaXQsDQogICAgICAgIHBkU2xDaGFubDogdGhpcy5hZ2VGb3JtLnVwZGF0ZVBkU2xDaGFubA0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmFnZUZvcm0ucGRJbnN1UGVyaW9kKSB7DQogICAgICAgIHBkdGVtcFBkSW5zdUFnZUluZm8ucGRJbnN1UGVyaW9kVW5pdCA9IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmFnZUZvcm0ucGRQYXlQZXJpb2QpIHsNCiAgICAgICAgcGR0ZW1wUGRJbnN1QWdlSW5mby5wZFBheVBlcmlvZFVuaXQgPSB1bmRlZmluZWQNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5hZ2VGb3JtLnBkTWF4QXBwQWdlKSB7DQogICAgICAgIHBkdGVtcFBkSW5zdUFnZUluZm8ucGRNYXhBcHBBZ2VVbml0ID0gdW5kZWZpbmVkDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuYWdlRm9ybS5wZE1pbkFwcEFnZSkgew0KICAgICAgICBwZHRlbXBQZEluc3VBZ2VJbmZvLnBkTWluQXBwQWdlVW5pdCA9IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgICAgdGhpcy4kcmVmc1siYWdlRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdXBkYXRlUGR0ZW1wUGRJbnN1QWdlSW5mbyhwZHRlbXBQZEluc3VBZ2VJbmZvKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmRhdGEubWVzc2FnZV90eXBlID09ICJyZXBlYXQiKSB7DQogICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgicGR0ZW1wUGRJbnN1QWdlSW5mby5tZXNzYWdlX3JlcGVhdCIpKQ0KICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXMubWVzc2FnZSkNCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZGVsUm9sZVJvdyhpbmRleCwgcm93KSB7DQogICAgICBsZXQgZGVsS2V5cyA9IHRoaXMuYWdlRm9ybUFycmF5Lm1hcChzYWxlID0+IHNhbGUuaWQpDQogICAgICBkZWxldGVQZHRlbXBQZEluc3VBZ2VJbmZvTGlzdCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoe2RlbEtleXM6IGRlbEtleXN9KSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5kZWxldGUnKSkNCiAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKQ0KICAgICAgICB0aGlzLiRyZWZzWyJhZ2VGb3JtIl0ucmVzZXRGaWVsZHMoKQ0KICAgICAgICB0aGlzLmFnZUZvcm0ucGRNYXhBcHBBZ2VVbml0ID0gIkEiDQogICAgICAgIHRoaXMuYWdlRm9ybS5wZE1pbkFwcEFnZVVuaXQgPSAiQSINCiAgICAgICAgdGhpcy5hZ2VGb3JtLnBkSW5zdVBlcmlvZFVuaXQgPSAiWSINCiAgICAgICAgdGhpcy5hZ2VGb3JtLnBkUGF5UGVyaW9kVW5pdCA9ICJZIg0KICAgICAgfSkNCiAgICB9LA0KICAgIGRlbEN1c1JvdyhpbmRleCwgcm93KSB7DQogICAgICBkZWxldGVQZHRlbXBQZFJ1bGVzKHJvdy5pZCkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5kZWxldGUnKSkNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQucmVsb2FkKCkNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgc2VsZWN0Rmlyc3Qocm93KSB7DQogICAgICB0aGlzLiRyZWZzLmFnZVRhYmxlMS5zZXRDdXJyZW50Um93KHJvdykNCiAgICB9LA0KICAgIGNob29zZU9uZShyb3csIGNvbHVtbiwgZXZlbnQpIHsNCiAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICJJTlBVVCIpIHsNCiAgICAgICAgaWYgKHRoaXMucmFkaW8xICE9IG51bGwpIHsNCiAgICAgICAgICBpZiAocm93LmlkID09PSB0aGlzLnJhZGlvMS5pZCkgew0KICAgICAgICAgICAgdGhpcy5yYWRpbzEgPSBudWxsDQogICAgICAgICAgICB0aGlzLiRyZWZzWyJhZ2VGb3JtIl0ucmVzZXRGaWVsZHMoKQ0KICAgICAgICAgICAgKHRoaXMuYWdlRm9ybS5wZE1heEFwcEFnZVVuaXQgPSAiQSIpLA0KICAgICAgICAgICAgICAodGhpcy5hZ2VGb3JtLnBkTWluQXBwQWdlVW5pdCA9ICJBIiksDQogICAgICAgICAgICAgICh0aGlzLmFnZUZvcm0ucGRJbnN1UGVyaW9kVW5pdCA9ICJZIiksDQogICAgICAgICAgICAgICh0aGlzLmFnZUZvcm0ucGRQYXlQZXJpb2RVbml0ID0gIlkiKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2hvb3NlT25lQ2hhbmdlKHJvdykgew0KICAgICAgdGhpcy5hZ2VGb3JtLnVwZGF0ZVBkU2xDaGFubCA9ICcnDQogICAgICB0aGlzLmFnZUZvcm1BcnJheSA9IHJvdw0KICAgICAgdGhpcy5jbGVhbkFnZUZvcm0oKQ0KICAgICAgaWYgKHJvdy5sZW5ndGggPT0gMSkgew0KICAgICAgICB0aGlzLnBkU2xDaGFubEFycmF5ID0gWyIwMCJdDQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5hZ2VGb3JtLCByb3dbMF0pDQogICAgICAgIHRoaXMuYWdlRm9ybS51cGRhdGVQZFNsQ2hhbmwgPSByb3dbMF0ucGRTbENoYW5sDQogICAgICAgIHRoaXMuYWdlRm9ybS5wZFNsQ2hhbmwgPSBbcm93WzBdLnBkU2xDaGFubF0NCiAgICAgICAgdGhpcy5hZ2VGb3JtLnBkUm9sZU5vID0gcm93WzBdLnBkUm9sZU5vICsgJycNCiAgICAgIH0NCiAgICB9LA0KICAgIGNob29zZU9uZTIocm93LCBjb2x1bW4sIGV2ZW50KSB7DQogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7DQogICAgICAgIGlmIChyb3cuaWQgPT09IHRoaXMucmFkaW8yKSB7DQogICAgICAgICAgdGhpcy5yYWRpbzIgPSBudWxsDQogICAgICAgICAgdGhpcy4kcmVmcy5jdXNUYWJsZS5zZXRDdXJyZW50Um93KCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnJhZGlvMiA9IHJvdy5pZA0KICAgICAgICAgIHRoaXMucnVsZVZpZXcuZmxhZyA9IHJvdy5ydWxlQXR0ciA9PT0gJzEnID8gJzEnIDogJzInDQogICAgICAgICAgdGhpcy5ydWxlVmlldy5wZXJmb3JtVHlwZSA9IHJvdy5wZXJmb3JtVHlwZQ0KICAgICAgICAgIHRoaXMucnVsZVZpZXcucnVsZUNvZGUgPSByb3cucGRSdWxlQ29kZQ0KICAgICAgICAgIHRoaXMucnVsZVZpZXcudmlzaWJsZSA9IHRydWUNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlSW5CcmllZihyb3cpIHsNCiAgICAgIHRoaXMuY2hvb3NlUnVsZXNJbkJyaWVmID0gcm93DQogICAgfSwNCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VJbkFsbChyb3cpIHsNCiAgICAgIHRoaXMuY2hvb3NlUnVsZXNJbkFsbCA9IHJvdw0KICAgIH0sDQogICAgZ2V0Q2FwdGlvbihvYmosIHN0YXRlKSB7DQogICAgICBjb25zdCBpbmRleCA9IG9iai5sYXN0SW5kZXhPZigiOiIpDQogICAgICBpZiAoc3RhdGUgPT09IDApIHsNCiAgICAgICAgcmV0dXJuIG9iai5zdWJzdHJpbmcoMCwgaW5kZXgpDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gb2JqLnN1YnN0cmluZyhpbmRleCArIDEsIG9iai5sZW5ndGgpDQogICAgICB9DQogICAgfSwNCiAgICBwcm9kdWN0RGV0YWlsVHlwZUNoYW5nZWQodmFsKSB7DQogICAgICB0aGlzLnBhcmFtcy5lcV9wZEluZm9JZCA9IHVuZGVmaW5lZA0KICAgICAgdGhpcy5wcm9kdWN0T3B0aW9ucyA9IFtdDQogICAgICBmaW5kQWxsUHJvZHVjdEJ5RGV0YWlsVHlwZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoe3Byb2R1Y3REZXRhaWxUeXBlOiB2YWx9KSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMucHJvZHVjdE9wdGlvbnMgPSByZXNwb25zZS5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgcGRTbENoYW5sRm9ybWF0KHZhKSB7DQogICAgICBsZXQgc2FsZUNoYW4gPSB0aGlzLl8uZmluZCh0aGlzLnBkU2FsZUNoYW5sQXJyYXksIHtjb2RlOiB2YX0pDQogICAgICBpZiAoc2FsZUNoYW4pIHsNCiAgICAgICAgcmV0dXJuIHZhICsgJzonICsgc2FsZUNoYW4uY29kZW5hbWUNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-operation-def/pd-acceptance-def/pd-insurance-rule-def","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div v-show=\"ruleRevisionShowINfo\">\r\n      <cus-page-title-back :label=\"$t('route.productInsuranceRuleRevision')\" @backTo=\"backToMenu\"/>\r\n      <cus-product-info></cus-product-info>\r\n    </div>\r\n\r\n    <div v-show=\"mark!=='RevisionOfProductCompensationRules'\">\r\n      <cus-form-title :label=\"$t('pdtempPdInsuAgeInfo.ageRule')\" :realFirst=\"true\"/>\r\n      <cus-table-title :label=\"$t('pdtempPdInsuAgeInfo.ageRule')\"/>\r\n      <el-table ref=\"ageTable1\" :data=\"ageConfigs\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                max-height=\"500px\" size=\"mini\" @selection-change=\"chooseOneChange\">\r\n        <el-table-column\r\n          :label=\"$t('table.select')\"\r\n          align=\"center\"\r\n          type=\"selection\"\r\n          width=\"50px\"\r\n        ></el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50px\">\r\n          <template v-slot=\"scope\">{{ initTableIndex('ageTable1', scope.$index) }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdSlChanl')\" align=\"center\" prop=\"pdSlChanl\">\r\n          <template v-slot=\"scope\">\r\n            {{ pdSlChanlFormat(scope.row.pdSlChanl) }}\r\n          </template>\r\n\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('login.role')\" align=\"center\" prop=\"pdRoleCode\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdRoleNo | filter_pdRoleNo }} :\r\n            {{ scope.row.pdRoleCode | filter_pdRoleCode }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRoleSex')\" align=\"center\" prop=\"pdRoleSex\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdRoleSex | filter_pdRoleSex }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdInsuPeriod')\" align=\"center\" prop=\"pdInsuPeriod\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdInsuPeriod }}{{ scope.row.pdInsuPeriodUnit | filter_pdMaxAppAgeUnit }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdPayPeriod')\" align=\"center\" prop=\"pdPayPeriod\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdPayPeriod }}{{ scope.row.pdPayPeriodUnit | filter_pdMaxAppAgeUnit }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdPayFreq')\" align=\"center\" prop=\"pdPayFreq\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdPayFreq | filter_pdPayFreq }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdMaxAppAge')\" align=\"center\" prop=\"pdMaxAppAge\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdMaxAppAge }}{{ scope.row.pdMaxAppAgeUnit | filter_pdMaxAppAgeUnit }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdMinAppAge')\" align=\"center\" prop=\"pdMinAppAge\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdMinAppAge }}{{ scope.row.pdMinAppAgeUnit | filter_pdMaxAppAgeUnit }}\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!--  -->\r\n      <cus-pagination\r\n        ref=\"ageTable1\"\r\n        v-model=\"ageConfigs\"\r\n        :pageSize=\"5\"\r\n        :params=\"ageParms\"\r\n        url=\"/pdtemp-pd-insu-age-info/base/list\"\r\n      />\r\n      <br/>\r\n      <el-form ref=\"ageForm\" :model=\"ageForm\" :rules=\"rules\" label-width=\"auto\">\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdSlChanl')\"\r\n                          :prop=\"!ageForm.id?'pdSlChanl':'updatePdSlChanl'\">\r\n              <cus-multi-select\r\n                v-if=\"!ageForm.id\"\r\n                v-model=\"ageForm.pdSlChanl\"\r\n                :codetype=\"'pdSlChanl'\"\r\n                :disabledCodeArray=\"pdSlChanlArray\"\r\n              ></cus-multi-select>\r\n              <cus-select\r\n                v-else\r\n                v-model=\"ageForm.updatePdSlChanl\"\r\n                :codetype=\"'pdSlChanl'\"\r\n                :disabledCodeArray=\"pdSlChanlArray\"\r\n              ></cus-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('login.role')\" prop=\"pdRoleNo\">\r\n              <el-row>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :prop=\"'pdRoleNo'\">\r\n                    <cus-select v-model=\"ageForm.pdRoleNo\" :codetype=\"'roleOrder'\"></cus-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :prop=\"'pdRoleCode'\">\r\n                    <cus-select v-model=\"ageForm.pdRoleCode\" :codetype=\"'pdexptrole'\" prop=\"pdRoleCode\"></cus-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdRoleSex')\" prop=\"pdRoleSex\">\r\n              <cus-radio v-model=\"ageForm.pdRoleSex\" :codetype=\"'productRuleSex'\"></cus-radio>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdInsuPeriod')\" prop=\"pdInsuPeriod\">\r\n              <el-row>\r\n                <el-input v-model=\"ageForm.pdInsuPeriod\" :placeholder=\"$t('form.please_enter')\" clearable>\r\n                  <cus-select slot=\"append\" v-model=\"ageForm.pdInsuPeriodUnit\" :codetype=\"'pdsbnftdy'\"\r\n                              class=\"cst\"></cus-select>\r\n                </el-input>\r\n\r\n              </el-row>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdPayPeriod')\" prop=\"pdPayPeriod\">\r\n              <el-row>\r\n                <el-input v-model=\"ageForm.pdPayPeriod\" :placeholder=\"$t('form.please_enter')\" clearable\r\n                          filterable>\r\n                  <cus-select slot=\"append\" v-model=\"ageForm.pdPayPeriodUnit\" :codetype=\"'pdsbnftdy'\"\r\n                              class=\"cst\"></cus-select>\r\n                </el-input>\r\n\r\n              </el-row>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdPayFreq')\" prop=\"pdPayFreq\">\r\n              <el-select v-model=\"ageForm.pdPayFreq\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                         filterable>\r\n                <el-option v-for=\"item in pdPayFreqOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdMaxAppAge')\" prop=\"pdMaxAppAge\">\r\n              <el-input v-model=\"ageForm.pdMaxAppAge\" clearable type=\"number\">\r\n                <cus-select slot=\"append\" v-model=\"ageForm.pdMaxAppAgeUnit\" :codetype=\"'pdsbnftdy'\" class=\"cst\"\r\n                            filter=\"1$M$D$A\"></cus-select>\r\n              </el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdMinAppAge')\" prop=\"pdMinAppAge\">\r\n              <el-input v-model=\"ageForm.pdMinAppAge\" clearable type=\"number\">\r\n                <cus-select slot=\"append\" v-model=\"ageForm.pdMinAppAgeUnit\" :codetype=\"'pdsbnftdy'\" class=\"cst\"\r\n                            filter=\"1$M$D$A\"></cus-select>\r\n              </el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n          </cus-col>\r\n        </cus-row>\r\n      </el-form>\r\n      <el-form ref=\"form\" label-width=\"160px\">\r\n        <el-form-item style=\"text-align: right\">\r\n          <el-button v-if=\"ageFormArray.length < 2 && !ageForm.id\" v-auth=\"'pdtemppdinsuageinfo:save'\"\r\n                     dialog-disable=\"disable\"\r\n                     icon=\"el-icon-success\" size=\"small\"\r\n                     type=\"primary\"\r\n                     @click=\"saveAgeForm\">\r\n            {{ $t('pdtempPdInsuAgeInfo.save') }}\r\n          </el-button>\r\n          <el-button v-if=\"ageFormArray.length === 1 && ageForm.id\" v-auth=\"'pdtemppdinsuageinfo:update'\"\r\n                     dialog-disable=\"disable\"\r\n                     icon=\"el-icon-success\" size=\"small\"\r\n                     type=\"primary\"\r\n                     @click=\"updateAgeForm()\">\r\n            {{ $t('pdtempPdInsuAgeInfo.update') }}\r\n          </el-button>\r\n          <cus-popover\r\n            v-if=\"ageFormArray.length > 0\"\r\n            :buttonText=\"$t('table.delete')\"\r\n            :content=\"$t('confirmMessage.delete')\"\r\n            icon=\"el-icon-delete\"\r\n            style=\"margin-right: 5px;margin-left: 5px\"\r\n            type=\"danger\"\r\n            @confirm=\"delRoleRow\"\r\n          ></cus-popover>\r\n          <el-button dialog-disable=\"disable\" icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"cleanAgeForm\">\r\n            {{ $t('pdtempPdInsuAgeInfo.delete') }}\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <div v-show=\"mark==='RevisionOfProductCompensationRules'\">\r\n      <cus-page-title-back :label=\"$t('pdtempPdInsuAgeInfo.pdRuleRevQuery')\" @backTo=\"backToMenu\"/>\r\n      <cus-product-info></cus-product-info>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <cus-form-title :label=\"$t('rule.selectedRule')\"></cus-form-title>\r\n    <cus-table-title :label=\"$t('pdtempPdInsuAgeInfo.productRules')\"/>\r\n    <el-table ref=\"cusTable\" :data=\"currentRules\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n              max-height=\"500px\" size=\"mini\" @row-click=\"chooseOne2\">\r\n      <el-table-column :label=\"$t('pdtempPdBnft.choose')\" width=\"50\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio v-model=\"radio2\" :label=\"scope.row.id\">\r\n            <span class=\"el-radio__label\"></span>\r\n          </el-radio>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n        <template v-slot=\"scope\">\r\n          {{ initTableIndex('page_current', scope.$index) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.details')\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button dialog-disable=\"disable\" size=\"small\" type=\"text\" @click=\"showRules(scope.row)\">>></el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleGrade')\" align=\"center\" min-width=\"200\" prop=\"pdRuleGrade\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdRuleGrade | filter_pdRuleGrade }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleInItem')\" align=\"center\" min-width=\"200\" prop=\"pdProgCode\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"scope.row.pdRuleGrade === '2'\">{{\r\n              scope.row.pdProgCode ? scope.row.pdProgCode + ':' + scope.row.progName : ''\r\n            }}</span>\r\n          <span v-if=\"scope.row.pdRuleGrade === '3'\">{{\r\n              (scope.row.pdBnftCode ? scope.row.pdBnftCode + ':' + scope.row.bnftName + ', ' : '') + (scope.row.pdBnftDtCode ? scope.row.pdBnftDtCode + ':' + scope.row.bnftDtName : '')\r\n            }}</span>\r\n          <span v-if=\"scope.row.pdRuleGrade === '4'\">{{\r\n              scope.row.pdPremCode ? scope.row.pdPremCode + ':' + scope.row.premName : ''\r\n            }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleCode')\" align=\"center\" min-width=\"200\"\r\n                       prop=\"pdRuleCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdRuleDtCls')\" align=\"center\" min-width=\"200\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdRuleDtCls | filter_pdBussDetailType }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('rule.ruleAttr')\" align=\"center\" min-width=\"200\">\r\n        <template v-slot=\"scope\">\r\n          {{\r\n            scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n          }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdSlChanl')\" align=\"center\" min-width=\"200\" prop=\"pdSlChanl\">\r\n        <template v-slot=\"scope\">\r\n          <span v-if=\"scope.row.pdSlChanl\">{{ scope.row.pdSlChanl | filter_pdSlChanl }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleDesc')\" align=\"center\" min-width=\"200\"\r\n                       prop=\"pdRuleDesc\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.operation')\" align=\"center\" fixed=\"right\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          <cus-del-btn v-auth=\"'pdtemppdinsuageinfo:delete'\" @ok=\"delCusRow(scope.$index,scope.row)\"></cus-del-btn>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <cus-pagination ref=\"page_current\" v-model=\"currentRules\" :autoBuild=\"false\"\r\n                    :pageSize=\"5\" :params=\"params_current\" url=\"/pdtemp-pd-insu-age-info/base/currentRules\"/>\r\n\r\n    <!--  -->\r\n    <cus-form-title :label=\"$t('rule.selectableRule')\"></cus-form-title>\r\n    <el-form ref=\"productSearchForm\" :model=\"productForm\" :rules=\"productFormRules\" label-width=\"auto\">\r\n      <cus-row :gutter=\"10\">\r\n        <el-col :span=\"12\">\r\n          <el-form-item :label=\"$t('rule.pdRuleGrade')\" prop=\"pdBussRlGrd\">\r\n            <cus-radio v-model=\"productForm.pdBussRlGrd\" :changeMethod=\"pdBussRlGrdChange\"\r\n                       :codetype=\"'ruleGrade'\" :isRequired=\"true\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n      </cus-row>\r\n      <cus-row :gutter=\"10\">\r\n        <el-col v-if=\"productForm.pdBussRlGrd!=='1'\" :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.programItem')\" prop=\"prog\">\r\n            <el-select v-model=\"productForm.prog\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                       filterable @change=\"progChanged\">\r\n              <el-option v-for=\"item in progOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-if=\"productForm.pdBussRlGrd==='3'\" :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.guaranteeItem')\" prop=\"bnft\">\r\n            <el-select v-model=\"productForm.bnft\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                       filterable\r\n                       @change=\"findBnftDetailByBnft($event,0)\">\r\n              <el-option v-for=\"item in bnftOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-if=\"productForm.pdBussRlGrd==='3'\" :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.guaranteeDetails')\" prop=\"bnftdetail\">\r\n            <el-select v-model=\"productForm.bnftdetail\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                       filterable>\r\n              <el-option v-for=\"item in bnftdetailOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-if=\"productForm.pdBussRlGrd==='4'\" :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pay')\" prop=\"prem\">\r\n            <el-select v-model=\"productForm.prem\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable filterable>\r\n              <el-option v-for=\"item in premOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-if=\"productForm.pdBussRlGrd==='4'\" :span=\"7\"></el-col>\r\n      </cus-row>\r\n    </el-form>\r\n\r\n    <el-row style=\"text-align: right\">\r\n      <el-button dialog-disable=\"disable\" icon=\"el-icon-connection\" size=\"small\" type=\"primary\" @click=\"toMoreRules\">\r\n        {{ $t('rule.moreRule') }}\r\n      </el-button>\r\n      <el-button dialog-disable=\"disable\" icon=\"el-icon-circle-plus el-icon--left\" size=\"small\" type=\"primary\"\r\n                 @click=\"toAddRules\">\r\n        {{ $t('rule.toAddRule') }}\r\n      </el-button>\r\n    </el-row>\r\n\r\n    <cus-table-title :label=\"$t('pdtempPdInsuAgeInfo.SelectInsuranceRules')\"/>\r\n    <el-table ref=\"cusTable\" :data=\"briefRules\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n              max-height=\"500px\" size=\"mini\" @selection-change=\"handleSelectionChangeInBrief\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n        <template v-slot=\"scope\">\r\n          {{ initTableIndex('page_brief', scope.$index) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.details')\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button dialog-disable=\"disable\" size=\"small\" type=\"text\" @click=\"showRules(scope.row)\">>></el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :filter-method=\"filters_method\" :filters=\"filters_pdCode_brief\" :label=\"$t('rule.product')\"\r\n                       align=\"center\"\r\n                       min-width=\"200\" prop=\"pdCode\" sortable>\r\n        <template v-slot=\"scope\">\r\n          {{ scope.row.pdCode ? scope.row.pdCode + ':' + scope.row.pdName : '' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleGrade')\" align=\"center\" min-width=\"200\" prop=\"pdRuleGrade\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdRuleGrade | filter_pdRuleGrade }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleInItem')\" align=\"center\" min-width=\"200\" prop=\"pdProgCode\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"scope.row.pdRuleGrade === '2'\">{{\r\n              scope.row.pdProgCode ? scope.row.pdProgCode + ':' + scope.row.progName : ''\r\n            }}</span>\r\n          <span v-if=\"scope.row.pdRuleGrade === '3'\">{{\r\n              (scope.row.pdBnftCode ? scope.row.pdBnftCode + ':' + scope.row.bnftName + ', ' : '') + (scope.row.pdBnftDtCode ? scope.row.pdBnftDtCode + ':' + scope.row.bnftDtName : '')\r\n            }}</span>\r\n          <span v-if=\"scope.row.pdRuleGrade === '4'\">{{\r\n              scope.row.pdPremCode ? scope.row.pdPremCode + ':' + scope.row.premName : ''\r\n            }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleCode')\" align=\"center\" min-width=\"200\"\r\n                       prop=\"pdRuleCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdRuleDtCls')\" align=\"center\" min-width=\"200\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdRuleDtCls | filter_pdBussDetailType }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pdRuleDesc')\" align=\"center\" min-width=\"200\"\r\n                       prop=\"pdRuleDesc\"></el-table-column>\r\n      <el-table-column :label=\"$t('rule.ruleAttr')\" align=\"center\" min-width=\"200\">\r\n        <template v-slot=\"scope\">\r\n          {{\r\n            scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n          }}\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <cus-pagination ref=\"page_brief\" v-model=\"briefRules\" :autoBuild=\"false\" :pageSize=\"5\" :params=\"params_brief\"\r\n                    url=\"/pdtemp-pd-insu-age-info/base/briefRules\"/>\r\n    <el-row style=\"float:right\">\r\n      <el-button dialog-disable=\"disable\" icon=\"el-icon-connection\" size=\"small\" type=\"primary\"\r\n                 @click=\"connRules('brief')\">\r\n        {{ $t('pdtempPdInsuAgeInfo.choice') }}\r\n      </el-button>\r\n    </el-row>\r\n\r\n    <!--  -->\r\n    <el-dialog v-if=\"showRule\" v-dialog-drag :close-on-click-modal=\"false\" :close-on-press-escape=\"false\"\r\n               :show-close=\"false\" :visible.sync=\"showRule\" center width=\"80%\">\r\n      <cus-page-title-back :isDialog=\"true\" :label=\"$t('pdtempPdInsuAgeInfo.pdInsuAgeRuleSelect')\"\r\n                           @backTo=\"showRule = false\"></cus-page-title-back>\r\n      <!--  -->\r\n      <el-form ref=\"searchForm\" :model=\"params\" label-width=\"auto\">\r\n        <el-row :gutter=\"10\" type=\"flex\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdDiscountFormulaSelect.productDetailsType')\">\r\n              <cus-select v-model=\"params.eq_productDetailType\" :codetype=\"'ProductCategory'\"\r\n                          @change=\"productDetailTypeChanged\"></cus-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.designatedProducts')\">\r\n              <el-select v-model=\"params.eq_pdInfoId\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                         filterable @change=\"findCusOptions\">\r\n                <el-option v-for=\"item in productOptions\" :key=\"item.id\" :label=\"item.pdCode + ':' + item.pdName\"\r\n                           :value=\"item.id\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.specifyScheme')\" prop=\"prog\">\r\n              <el-select v-model=\"params.eq_pdProgCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                         filterable>\r\n                <el-option v-for=\"item in progOptions1\" :key=\"item.key\" :label=\"item.label\"\r\n                           :value=\"item.value\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"10\" type=\"flex\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.designatedSupport')\" prop=\"bnft\">\r\n              <el-select v-model=\"params.eq_pdBnftCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                         filterable @change=\"findBnftDetailByBnft($event,1)\">\r\n                <el-option v-for=\"item in bnftOptions1\" :key=\"item.key\" :label=\"item.label\" :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.designatedSupportDetails')\" prop=\"bnftdetail\">\r\n              <el-select v-model=\"params.eq_pdBnftDtCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                         filterable>\r\n                <el-option v-for=\"item in bnftdetailOptions1\" :key=\"item.key\" :label=\"item.label\"\r\n                           :value=\"item.value\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.designatedPayment')\" prop=\"prem\">\r\n              <el-select v-model=\"params.eq_pdPremCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable\r\n                         filterable>\r\n                <el-option v-for=\"item in premOptions1\" :key=\"item.key\" :label=\"item.label\"\r\n                           :value=\"item.value\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.pdSlChanl')\">\r\n              <cus-select\r\n                v-model=\"params.pdSlChanl\"\r\n                :codetype=\"'pdSlChanl'\"\r\n              ></cus-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInsuAgeInfo.ruleCode')\" prop=\"ruleCode\">\r\n              <el-input v-model=\"params.like_pdRuleCode\" clearable></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <cus-btn-wrapper>\r\n            <el-button dialog-disable=\"disable\" icon=\"el-icon-search\" size=\"small\" type=\"primary\" @click=\"searchRules\">\r\n              {{ $t('pdtempPdInsuAgeInfo.search') }}\r\n            </el-button>\r\n          </cus-btn-wrapper>\r\n        </el-row>\r\n      </el-form>\r\n      <cus-table-title :label=\"$t('pdtempPdInsuAgeInfo.SelectInsuranceRules')\"></cus-table-title>\r\n      <el-table ref=\"configsTable\" :data=\"ruleConfigs\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                size=\"mini\" @selection-change=\"handleSelectionChangeInAll\">\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.details')\" align=\"center\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button dialog-disable=\"disable\" size=\"small\" type=\"text\" @click=\"showRules(scope.row)\">>></el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_pdCode_all\" :label=\"$t('rule.product')\"\r\n                         align=\"center\" min-width=\"200\" prop=\"pdCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdCode ? scope.row.pdCode + ':' + scope.row.pdName : '' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.programItem')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdProgCode\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.pdProgCode ? scope.row.pdProgCode + ':' + scope.row.progName : '' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.guaranteeItem')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdBnftCode\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.pdBnftCode ? scope.row.pdBnftCode + ':' + scope.row.bnftName : '' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.guaranteeDetails')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdBnftDtCode\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.pdBnftDtCode ? scope.row.pdBnftDtCode + ':' + scope.row.bnftDtName : '' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.pay')\" align=\"center\" min-width=\"200\" prop=\"pdPremCode\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.pdPremCode ? scope.row.pdPremCode + ':' + scope.row.premName : '' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('rule.pdRuleDtCls')\" align=\"center\" min-width=\"200\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdRuleDtCls | filter_pdBussDetailType }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('rule.ruleAscrDeta')\" align=\"center\" min-width=\"200\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdRulePropDtCls | filter_pdRulePropDtCls }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.ruleCode')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdRuleCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdInsuAgeInfo.ruleDesc')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdRuleDesc\"></el-table-column>\r\n        <el-table-column :label=\"$t('rule.ruleAttr')\" align=\"center\" min-width=\"200\">\r\n          <template v-slot=\"scope\">\r\n            {{\r\n              scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n            }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('rule.pdSlChanl')\" align=\"center\" min-width=\"200\" prop=\"pdSlChanl\">\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.pdSlChanl\">{{ scope.row.pdSlChanl | filter_pdSlChanl }}</span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <cus-pagination ref=\"page\" v-model=\"ruleConfigs\" :autoBuild=\"false\" :pageSize=\"5\" :params=\"params\"\r\n                      url=\"/pdtemp-pd-insu-age-info/base/searchRules\"/>\r\n      <el-row style=\"text-align: right; margin-top: 10px\">\r\n        <el-button dialog-disable=\"disable\" icon=\"el-icon-connection\" size=\"small\" type=\"primary\"\r\n                   @click=\"connRules('all')\">\r\n          {{ $t('pdtempPdInsuAgeInfo.choice') }}\r\n        </el-button>\r\n      </el-row>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <cus-rule-definition :attributeObj=\"attributeObj\" :ruleDefinitionClosed=\"ruleModuleClosed\"\r\n                         :visible=\"ruleVisible\"></cus-rule-definition>\r\n\r\n    <!--  -->\r\n    <cus-rule-modify :flag=\"ruleView.flag\" :performType=\"ruleView.performType\" :ruleCode=\"ruleView.ruleCode\"\r\n                     :ruleModifyClosed=\"ruleMakeClosed\" :ruleType=\"'1'\" :visible=\"ruleView.visible\"></cus-rule-modify>\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addPdtempPdInsuAgeInfo,\r\n  connRules,\r\n  deletePdtempPdInsuAgeInfoList,\r\n  deletePdtempPdRules,\r\n  findBnftById,\r\n  findBnftByProg,\r\n  findBnftDetailByBnft,\r\n  findPdPayFreqOptionsByProduct,\r\n  findPremById,\r\n  findPremByProg,\r\n  findProgById,\r\n  getRuleCode,\r\n  updatePdtempPdInsuAgeInfo\r\n} from \"@/api/basicinfo/pdtemppdinsuageinfo\"\r\nimport {mapGetters} from \"vuex\"\r\nimport {findAllProductByDetailType} from \"@/api/basicinfo/invRules\"\r\n\r\nlet _this\r\n\r\nexport default {\r\n  name: \"pdtemppdinsuageinfo\",\r\n  filters: {\r\n    filter_pdRoleCode(code) {\r\n      return _this.getCodeName(\"pdexptrole\", code).split(\":\")[1]\r\n    },\r\n    filter_pdRoleSex(code) {\r\n      return _this.getCodeName(\"productRuleSex\", code)\r\n    },\r\n    filter_pdMaxAppAgeUnit(code) {\r\n      return _this.getCodeName(\"pdsbnftdy\", code, true)\r\n    },\r\n    filter_pdPayFreq(code) {\r\n      return _this.getCodeName(\"paymentFrequency\", code)\r\n    },\r\n    filter_pdRuleGrade(code) {\r\n      return _this.getCodeName(\"ruleGrade\", code)\r\n    },\r\n    filter_pdRulePropDtCls(code) {\r\n      if (code) {\r\n        return _this.getCascaderCodeName('ruleAscrDeta', code)\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    filter_pdBussDetailType(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    },\r\n    filter_pdSlChanl(code) {\r\n      if (code) {\r\n        return _this.getCodeName('pdSlChanl', code.split(','))\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    filter_pdRoleNo(code) {\r\n      if (code) {\r\n        return _this.getCodeName('roleOrder', code).split(\":\")[1]\r\n      } else {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      page: undefined,\r\n      pageSize: undefined,\r\n      filters_pdCode_brief: [],\r\n      filters_pdCode_all: [],\r\n      ruleRevisionShowINfo: false,\r\n      ruleView: {\r\n        visible: false,\r\n        flag: '',\r\n        performType: '',\r\n        ruleCode: ''\r\n      },\r\n      attributeObj: {},\r\n      ruleVisible: false,\r\n      pdtempPdInfo: null,\r\n      radio1: null,\r\n      radio2: null,\r\n      radio3: null,\r\n      showRule: false,\r\n      mark: null,\r\n      language: null,\r\n      ruleMessageInfoBom: [],\r\n      ageConfigs: [],\r\n      ageConfigsData: [],\r\n      ageFormArray: [],\r\n      params_current: {\r\n        pdCode: '',\r\n        pdInfoId: undefined\r\n      },\r\n      params_brief: {\r\n        product: undefined,\r\n        productDetailType: '',\r\n        pdRuleGrade: '1'\r\n      },\r\n      params: {\r\n        product: undefined,\r\n        pdRuleGrade: '',\r\n        pdRuleDtCls: '9',\r\n        current_pdProgCode: '',\r\n        current_pdBnftCode: '',\r\n        current_pdBnftDtCode: '',\r\n        current_pdPremCode: '',\r\n        eq_productDetailType: '',\r\n        eq_pdInfoId: undefined,\r\n        eq_pdProgCode: '',\r\n        eq_pdBnftCode: '',\r\n        eq_pdBnftDtCode: '',\r\n        eq_pdPremCode: '',\r\n        like_pdRuleCode: ''\r\n      },\r\n      currentRules: [],\r\n      pdAgeConfigs: [],\r\n      briefRules: [],\r\n      cusConfigsData: [],\r\n      ruleConfigs: [],\r\n      dataConfigs: [],\r\n      pdPayFreqOptions: [],\r\n      progOptions: [],\r\n      bnftOptions: [],\r\n      bnftdetailOptions: [],\r\n      premOptions: [],\r\n      productOptions: [],\r\n      progOptions1: [],\r\n      bnftOptions1: [],\r\n      bnftdetailOptions1: [],\r\n      premOptions1: [],\r\n      multipleSelection: [],\r\n      chooseRulesInBrief: [],\r\n      chooseRulesInAll: [],\r\n      chooseRuleData: [],\r\n      ruleCols: [],\r\n      pdSlChanlArray: [],\r\n      pdSaleChanlArray: [],\r\n      ageForm: {\r\n        pdRoleCode: \"\",\r\n        pdRoleNo: \"1\",\r\n        pdRoleSex: \"\",\r\n        pdInsuPeriod: \"\",\r\n        pdInsuPeriodUnit: \"Y\",\r\n        pdPayPeriod: \"\",\r\n        pdPayPeriodUnit: \"Y\",\r\n        pdPayFreq: \"\",\r\n        pdMaxAppAge: \"\",\r\n        pdMaxAppAgeUnit: \"A\",\r\n        pdMinAppAge: \"\",\r\n        pdMinAppAgeUnit: \"A\",\r\n        pdSlChanl: [\"00\"],\r\n        updatePdSlChanl: ''\r\n      },\r\n      ruleForm: {},\r\n      productForm: {\r\n        pdBussRlGrd: \"1\",\r\n        prog: \"\",\r\n        bnft: \"\",\r\n        bnftdetail: \"\",\r\n        prem: \"\"\r\n      },\r\n      ageParms: {\r\n        eq_pdInfoId: \"\",\r\n        eq_pdCode: \"\"\r\n      },\r\n      rules: {\r\n        pdRoleCode: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectRole'), trigger: \"change\"}\r\n        ],\r\n        pdRoleNo: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseInputRoleOrder'), trigger: \"change\"},\r\n        ],\r\n        pdRoleSex: [{required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectGender'), trigger: \"blur\"}],\r\n        pdMaxAppAge: [\r\n          {\r\n            pattern: /^[0-9]*$/,\r\n            message: this.$t('pdtempPdInsuAgeInfo.maxAgeNumberOnly'),\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        pdMinAppAge: [\r\n          {\r\n            pattern: /^[0-9]*$/,\r\n            message: this.$t('pdtempPdInsuAgeInfo.minAgeNumberOnly'),\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        pdSlChanl: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectSaleChannel'), trigger: \"change\"}\r\n        ],\r\n        updatePdSlChanl: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectSaleChannel'), trigger: \"change\"}\r\n        ]\r\n      },\r\n      productFormRules: {\r\n        pdBussRlGrd: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectPdRuleGrade'), trigger: \"change\"}\r\n        ],\r\n        prog: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectProgItem'), trigger: \"change\"}\r\n        ],\r\n        bnft: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectBnftItem'), trigger: \"change\"}\r\n        ],\r\n        bnftdetail: [\r\n          {required: false, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectBnftDTItem'), trigger: \"change\"}\r\n        ],\r\n        prem: [\r\n          {required: true, message: this.$t('pdtempPdInsuAgeInfo.pleaseSelectPayItem'), trigger: \"change\"}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'ruleMassages',\r\n      'ldcodes'\r\n    ])\r\n  },\r\n  mounted() {\r\n    this.language = this.$store.state.app.language\r\n    this.ruleMessageInfoBom = this.$store.state.ruleMessage.ruleMessages\r\n  },\r\n  created() {\r\n    this.page = this.$route.query.page\r\n    this.pageSize = this.$route.query.pageSize\r\n    this.ruleRevisionShowINfo = this.$route.query.ruleRevisionShowINfo === 'true'\r\n    this.pdSaleChanlArray = this.ldcodes[\"pdSlChanl\"]\r\n    this.radio1 = null\r\n    let pdtempPdInfo = this.getPdData()\r\n    this.pdtempPdInfo = pdtempPdInfo\r\n    if (pdtempPdInfo) {\r\n      this.params_current.pdCode = this.pdtempPdInfo.pdCode\r\n      this.params_current.pdInfoId = this.pdtempPdInfo.id\r\n      this.params_brief.product = this.pdtempPdInfo\r\n      this.params_brief.productDetailType = this.pdtempPdInfo.cType\r\n      this.params.product = this.pdtempPdInfo\r\n      this.params.eq_productDetailType = this.pdtempPdInfo.cType\r\n      this.productForm.product = pdtempPdInfo.pdCode + \":\" + pdtempPdInfo.pdName\r\n      this.findPdPayFreqOptionsByProduct()\r\n      this.ageParms.eq_pdInfoId = this.pdtempPdInfo.id\r\n      this.ageParms.eq_pdCode = this.pdtempPdInfo.pdCode\r\n      this.findProgById(pdtempPdInfo.id, 0)\r\n      this.findBnftById(pdtempPdInfo.id, 0)\r\n      this.findPremById(pdtempPdInfo.id, 0)\r\n      this.mark = this.getPdData().mark\r\n      this.$nextTick(() => {\r\n        this.$refs.page_current.reload()\r\n        this.$refs.page_brief.reload()\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    'ageForm.pdInsuPeriod'() {\r\n      if (this.ageForm.pdInsuPeriod) {\r\n        if (!this.ageForm.pdInsuPeriodUnit) {\r\n          this.ageForm.pdInsuPeriodUnit = 'Y'\r\n        }\r\n      }\r\n    },\r\n    'ageForm.pdPayPeriod'() {\r\n      if (this.ageForm.pdPayPeriod) {\r\n        if (!this.ageForm.pdPayPeriodUnit) {\r\n          this.ageForm.pdPayPeriodUnit = 'Y'\r\n        }\r\n      }\r\n    },\r\n    'ageForm.pdMaxAppAge'() {\r\n      if (this.ageForm.pdMaxAppAge) {\r\n        if (!this.ageForm.pdMaxAppAgeUnit) {\r\n          this.ageForm.pdMaxAppAgeUnit = 'A'\r\n        }\r\n      }\r\n    },\r\n    'ageForm.pdMinAppAge'() {\r\n      if (this.ageForm.pdMinAppAge) {\r\n        if (!this.ageForm.pdMinAppAgeUnit) {\r\n          this.ageForm.pdMinAppAgeUnit = 'A'\r\n        }\r\n      }\r\n    },\r\n    ageConfigs: function (newVal) {\r\n      /*if (newVal.length === 1) {\r\n        this.selectFirst(newVal[0])\r\n        this.chooseOneChange(newVal[0])\r\n        this.radio1 = newVal[0]\r\n      }*/\r\n    },\r\n    ruleConfigs() {\r\n      this.filters_pdCode_all = []\r\n      this.ruleConfigs.forEach(val => {\r\n        if (!this._.includes(this._.map(this.filters_pdCode_all, 'value'), val.pdCode)) {\r\n          this.filters_pdCode_all.push({\r\n            text: val.pdCode + ':' + val.pdName,\r\n            value: val.pdCode\r\n          })\r\n        }\r\n      })\r\n    },\r\n    briefRules() {\r\n      this.filters_pdCode_brief = []\r\n      this.briefRules.forEach(val => {\r\n        if (!this._.includes(this._.map(this.filters_pdCode_brief, 'value'), val.pdCode)) {\r\n          this.filters_pdCode_brief.push({\r\n            text: val.pdCode + ':' + val.pdName,\r\n            value: val.pdCode\r\n          })\r\n        }\r\n      })\r\n    },\r\n    'ageForm.pdSlChanl'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        this.pdSlChanlArray = []\r\n      } else {\r\n        let allCodes = this._.map(this.ldcodes[\"pdSlChanl\"], \"code\")\r\n        if (this._.includes(selectedCodes, \"00\")) {\r\n          allCodes = allCodes.filter(code => {\r\n            return code !== \"00\"\r\n          })\r\n          this.pdSlChanlArray = allCodes\r\n        } else {\r\n          allCodes = allCodes.filter(code => {\r\n            return code === \"00\"\r\n          })\r\n          this.pdSlChanlArray = allCodes\r\n        }\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    changeRadio() {\r\n      this.$nextTick(() => {\r\n        if (this.ageForm.pdRoleCode === \"00\") {\r\n          let max = 0\r\n          for (const config1 of this.ageConfigs) {\r\n            if (config1.pdRoleCode === \"00\") {\r\n              max = config1.pdRoleNo\r\n              break\r\n            }\r\n          }\r\n          for (const config of this.ageConfigs) {\r\n            if (this.ageForm.pdRoleCode === config.pdRoleCode) {\r\n              if (max < config.pdRoleNo) {\r\n                max = config.pdRoleNo\r\n              }\r\n            }\r\n          }\r\n          this.ageForm.pdRoleNo = max + 1\r\n        } else if (this.ageForm.pdRoleCode === \"01\") {\r\n          let max = 0\r\n          for (const config1 of this.ageConfigs) {\r\n            if (config1.pdRoleCode === \"01\") {\r\n              max = config1.pdRoleNo\r\n              break\r\n            }\r\n          }\r\n          for (const config of this.ageConfigs) {\r\n            if (this.ageForm.pdRoleCode === config.pdRoleCode) {\r\n              if (max < config.pdRoleNo) {\r\n                max = config.pdRoleNo\r\n              }\r\n            }\r\n          }\r\n          this.ageForm.pdRoleNo = max + 1\r\n        } else if (this.ageForm.pdRoleCode === \"02\") {\r\n          let max = 0\r\n          for (const config1 of this.ageConfigs) {\r\n            if (config1.pdRoleCode === \"02\") {\r\n              max = config1.pdRoleNo\r\n              break\r\n            }\r\n          }\r\n          for (const config of this.ageConfigs) {\r\n            if (this.ageForm.pdRoleCode === config.pdRoleCode) {\r\n              if (max < config.pdRoleNo) {\r\n                max = config.pdRoleNo\r\n              }\r\n            }\r\n          }\r\n          this.ageForm.pdRoleNo = max + 1\r\n        }\r\n      })\r\n    },\r\n    ruleModuleClosed() {\r\n      this.ruleVisible = false\r\n      this.$refs.page_brief.reload()\r\n    },\r\n    ruleMakeClosed() {\r\n      this.ruleView.visible = false\r\n      this.radio2 = null\r\n    },\r\n    handleSearch() {\r\n      this.$refs.ageTable1.reload()\r\n      this.ageForm.pdMaxAppAgeUnit = \"A\"\r\n      this.ageForm.pdMinAppAgeUnit = \"A\"\r\n      this.ageForm.pdInsuPeriodUnit = \"Y\"\r\n      this.ageForm.pdPayPeriodUnit = \"Y\"\r\n    },\r\n    backToMenu() {\r\n      this.$router.push({name: '', params: {path: this.$route.path, page: this.page, pageSize: this.pageSize}})\r\n    },\r\n    findProgById(id, num) {\r\n      findProgById(id).then(res => {\r\n        let data = res.data\r\n        if (num === 0) {\r\n          this.productForm.prog = ''\r\n          this.progOptions = []\r\n        } else {\r\n          this.params.eq_pdProgCode = ''\r\n          this.progOptions1 = []\r\n        }\r\n        if (data.length) {\r\n          data.forEach(val => {\r\n            if (num === 0) {\r\n              this.progOptions.push({\r\n                value: val.pdProgCode,\r\n                label: val.pdProgCode + \":\" + val.pdProgName\r\n              })\r\n            } else {\r\n              this.progOptions1.push({\r\n                key: val.id,\r\n                value: val.pdProgCode,\r\n                label: val.pdProgCode + \":\" + val.pdProgName\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    findBnftById(id, num) {\r\n      findBnftById(id).then(res => {\r\n        let data = res.data\r\n        if (num === 0) {\r\n          this.productForm.bnft = ''\r\n          this.bnftOptions = []\r\n        } else {\r\n          this.params.eq_pdBnftCode = ''\r\n          this.bnftOptions1 = []\r\n        }\r\n        if (data.length) {\r\n          data.forEach(val => {\r\n            if (num === 0) {\r\n              this.bnftOptions.push({\r\n                value: val.pdBnftCode + \":\" + val.pdBnftType,\r\n                label: val.pdBnftCode + \":\" + val.pdBnftName\r\n              })\r\n            } else {\r\n              this.bnftOptions1.push({\r\n                key: val.id,\r\n                value: val.pdBnftCode + \":\" + val.pdBnftType,\r\n                label: val.pdBnftCode + \":\" + val.pdBnftName\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    findPremById(id, num) {\r\n      findPremById(id).then(res => {\r\n        let data = res.data\r\n        if (num === 0) {\r\n          this.productForm.prem = ''\r\n          this.premOptions = []\r\n        } else {\r\n          this.params.eq_pdPremCode = ''\r\n          this.premOptions1 = []\r\n        }\r\n        if (data.length) {\r\n          data.forEach(val => {\r\n            if (num === 0) {\r\n              this.premOptions.push({\r\n                key: val.id,\r\n                value: val.pdPremCode,\r\n                label: val.pdPremCode + \":\" + val.pdPayName\r\n              })\r\n            } else {\r\n              this.premOptions1.push({\r\n                key: val.id,\r\n                value: val.pdPremCode,\r\n                label: val.pdPremCode + \":\" + val.pdPayName\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    findBnftDetailByBnft(row, num) {\r\n      if (row) {\r\n        let data = {\r\n          pdBnftCode: this.getCaption(row, 0),\r\n          pdBnftType: this.getCaption(row, 1)\r\n        }\r\n        findBnftDetailByBnft(data).then(res => {\r\n          let data = res.data\r\n          if (num === 0) {\r\n            this.productForm.bnftdetail = ''\r\n            this.bnftdetailOptions = []\r\n          } else {\r\n            this.params.eq_pdBnftDtCode = ''\r\n            this.bnftdetailOptions1 = []\r\n          }\r\n          if (data.length) {\r\n            if (data[0].pdClmBnftCode) {\r\n              data.forEach(val => {\r\n                if (num === 0) {\r\n                  this.bnftdetailOptions.push({\r\n                    key: val.pdClmBnftCode,\r\n                    value: val.pdClmBnftCode,\r\n                    label: val.pdClmBnftCode + \":\" + val.pdClmBnftName\r\n                  })\r\n                } else {\r\n                  this.bnftdetailOptions1.push({\r\n                    key: val.pdClmBnftCode,\r\n                    value: val.pdClmBnftCode,\r\n                    label: val.pdClmBnftCode + \":\" + val.pdClmBnftName\r\n                  })\r\n                }\r\n              })\r\n            } else {\r\n              data.forEach(val => {\r\n                if (num === 0) {\r\n                  this.bnftdetailOptions.push({\r\n                    key: val.pdSrvlBnftCode,\r\n                    value: val.pdSrvlBnftCode,\r\n                    label: val.pdSrvlBnftCode + \":\" + val.pdSrvlBnftName\r\n                  })\r\n                } else {\r\n                  this.bnftdetailOptions1.push({\r\n                    key: val.pdSrvlBnftCode,\r\n                    value: val.pdSrvlBnftCode,\r\n                    label: val.pdSrvlBnftCode + \":\" + val.pdSrvlBnftName\r\n                  })\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      } else {\r\n        this.bnftdetailOptions = []\r\n        this.productForm.bnftdetail = ''\r\n      }\r\n    },\r\n    findPdPayFreqOptionsByProduct() {\r\n      let data = {\r\n        pdAtrsCode: \"payintv\",\r\n        pdCode: this.pdtempPdInfo.pdCode,\r\n        pdInfoId: this.pdtempPdInfo.id\r\n      }\r\n      findPdPayFreqOptionsByProduct(data).then(res => {\r\n        this.pdPayFreqOptions = []\r\n        res.data.forEach(atrsInfo => {\r\n          this.pdPayFreqOptions.push({\r\n            value: atrsInfo.pdAtrsVal,\r\n            label: this.getCodeName(\"paymentFrequency\", atrsInfo.pdAtrsVal)\r\n          })\r\n        })\r\n      })\r\n    },\r\n    pdBussRlGrdChange(val) {\r\n      this.params_brief.pdRuleGrade = val\r\n      this.productForm.prog = ''\r\n      this.productForm.bnft = ''\r\n      this.productForm.bnftdetail = ''\r\n      this.productForm.prem = ''\r\n      this.$refs.page_brief.reload()\r\n      this.$nextTick(() => {\r\n        this.$refs[\"productSearchForm\"].clearValidate()\r\n      })\r\n    },\r\n    progChanged(val) {\r\n      if (this.productForm.pdBussRlGrd === '3') {// \r\n        this.bnftOptions = []\r\n        this.bnftdetailOptions = []\r\n        this.productForm.bnft = ''\r\n        this.productForm.bnftdetail = ''\r\n        if (val) {\r\n          let params = {\r\n            pdInfoId: this.pdtempPdInfo.id,\r\n            pdProgCode: val\r\n          }\r\n          findBnftByProg(params).then(response => {\r\n            for (const pdtempPdBnft of response.data) {\r\n              this.bnftOptions.push({\r\n                label: pdtempPdBnft.pdBnftCode + ':' + pdtempPdBnft.pdBnftName,\r\n                value: pdtempPdBnft.pdBnftCode + ':' + pdtempPdBnft.pdBnftType\r\n              })\r\n            }\r\n          })\r\n        }\r\n      } else if (this.productForm.pdBussRlGrd === '4') {// \r\n        this.premOptions = []\r\n        this.productForm.prem = ''\r\n        if (val) {\r\n          let params = {\r\n            pdInfoId: this.pdtempPdInfo.id,\r\n            pdProgCode: val\r\n          }\r\n          findPremByProg(params).then(response => {\r\n            for (const pdtempPdPrem of response.data) {\r\n              this.premOptions.push({\r\n                label: pdtempPdPrem.pdPremCode + ':' + pdtempPdPrem.pdPayName,\r\n                value: pdtempPdPrem.pdPremCode\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n    },\r\n    toMoreRules() {\r\n      this.$refs.productSearchForm.validate(pass => {\r\n        if (pass) {\r\n          this.ruleConfigs = []\r\n          this.productDetailTypeChanged(this.pdtempPdInfo.cType)\r\n          this.showRule = true\r\n        } else {\r\n          this.focusItem()\r\n        }\r\n      })\r\n    },\r\n    toAddRules() {\r\n      const param = {\r\n        pdBussType: '7',\r\n        pdBussDetailType: '9'\r\n      }\r\n      getRuleCode(this.buildRequestData(param)).then(response => {\r\n        this.attributeObj = {\r\n          code: response.data,\r\n          ruleBussModu: '7',\r\n          ruleBussModuDeta: '9',\r\n          ruleType: '1',\r\n          ruleAttr: '2',\r\n          pdType: '1',\r\n          riskType: this.pdtempPdInfo.bType,\r\n          riskDetail: this.pdtempPdInfo.cType,\r\n          pdCode: this.pdtempPdInfo.pdCode,\r\n          pdEdition: this.pdtempPdInfo.pdEdition\r\n        }\r\n        this.ruleVisible = true\r\n      })\r\n    },\r\n    showRules(row) {\r\n      this.ruleView.flag = '1'\r\n      this.ruleView.ruleCode = row.pdRuleCode\r\n      this.ruleView.performType = row.performType\r\n      this.ruleView.visible = true\r\n    },\r\n    searchRules() {\r\n      this.params.pdRuleGrade = this.productForm.pdBussRlGrd\r\n      this.params.current_pdProgCode = this.productForm.prog\r\n      this.params.current_pdBnftCode = this.productForm.bnft ? this.getCaption(this.productForm.bnft, 0) : ''\r\n      this.params.current_pdBnftDtCode = this.productForm.bnftdetail\r\n      this.params.current_pdPremCode = this.productForm.prem\r\n      this.$refs.page.reload()\r\n    },\r\n    findCusOptions(pdInfoId) {\r\n      if (pdInfoId) {\r\n        this.params.eq_pdBnftDtCode = ''\r\n        this.bnftdetailOptions1 = []\r\n        this.findProgById(pdInfoId, 1)\r\n        this.findBnftById(pdInfoId, 1)\r\n        this.findPremById(pdInfoId, 1)\r\n        if (this.$refs[\"searchForm\"]) {\r\n          this.$refs[\"searchForm\"].resetFields()\r\n        }\r\n      } else {\r\n        this.params.eq_pdProgCode = ''\r\n        this.params.eq_pdBnftCode = ''\r\n        this.params.eq_pdBnftDtCode = ''\r\n        this.params.eq_pdPremCode = ''\r\n        this.progOptions1 = []\r\n        this.bnftOptions1 = []\r\n        this.bnftdetailOptions1 = []\r\n        this.premOptions1 = []\r\n      }\r\n    },\r\n    connRules(type) {\r\n      if (type === 'brief') {\r\n        if (this.chooseRulesInBrief.length === 0) {\r\n          this.notifyError(this.$t('pdtempPdInsuAgeInfo.pleaseSelectRule'))\r\n          return\r\n        }\r\n        let passFlag = true\r\n        this.$refs.productSearchForm.validate(pass => {\r\n          if (!pass) {\r\n            this.focusItem()\r\n            passFlag = false\r\n          }\r\n        })\r\n        if (!passFlag) {\r\n          return\r\n        }\r\n      } else if (type === 'all') {\r\n        if (this.chooseRulesInAll.length === 0) {\r\n          this.notifyError(this.$t('pdtempPdInsuAgeInfo.pleaseSelectRule'))\r\n          return\r\n        }\r\n      } else {\r\n        this.notifyError(this.$t('pdtempPdInsuAgeInfo.pleaseAppointAssociationType'))\r\n        return\r\n      }\r\n      let pdtempPdRulesList = []\r\n      let chooseRules\r\n      if (type === 'brief') {\r\n        chooseRules = this.chooseRulesInBrief\r\n      } else if (type === 'all') {\r\n        chooseRules = this.chooseRulesInAll\r\n      } else {\r\n        this.notifyError(this.$t('pdtempPdInsuAgeInfo.pleaseAppointAssociationType'))\r\n        return\r\n      }\r\n      chooseRules.forEach(rule => {\r\n        let pdtempPdRules = {\r\n          pdCode: rule.pdCode,\r\n          pdRuleGrade: this.productForm.pdBussRlGrd,\r\n          pdProgCode: this.productForm.pdBussRlGrd !== '1' ? this.productForm.prog : null,\r\n          pdBnftCode: this.productForm.pdBussRlGrd === '3' ? this.getCaption(this.productForm.bnft, 0) : null,\r\n          pdBnftDtCode: this.productForm.pdBussRlGrd === '3' ? this.productForm.bnftdetail : null,\r\n          pdPremCode: this.productForm.pdBussRlGrd === '4' ? this.productForm.prem : null,\r\n          pdRuleCls: rule.pdRuleCls,\r\n          pdRuleDtCls: rule.pdRuleDtCls,\r\n          pdRulePropCls: rule.pdRulePropCls,\r\n          pdRulePropDtCls: rule.pdRulePropDtCls,\r\n          pdRuleCode: rule.pdRuleCode,\r\n          pdRuleDesc: rule.pdRuleDesc\r\n        }\r\n        pdtempPdRulesList.push(pdtempPdRules)\r\n      })\r\n      const param = {\r\n        rules: pdtempPdRulesList,\r\n        product: this.pdtempPdInfo,\r\n        pdBussType: '7',\r\n        pdBussDetailType: '9'\r\n      }\r\n      connRules(this.buildRequestData(param)).then(() => {\r\n        this.notifySuccess(this.$t('rule.associationSuccess'))\r\n        this.$refs.page_current.reload()\r\n        this.$refs.page_brief.reload()\r\n        if (type === 'all') {\r\n          this.$refs.page.reload()\r\n        }\r\n      })\r\n    },\r\n    cleanAgeForm() {\r\n      this.ageForm.id = \"\"\r\n      this.ageForm.pdMaxAppAge = ''\r\n      this.ageForm.pdMinAppAge = ''\r\n      this.ageForm.pdInsuPeriod = ''\r\n      this.ageForm.pdPayPeriod = ''\r\n      this.ageForm.pdPayFreq = ''\r\n      this.ageForm.pdRoleSex = ''\r\n      this.ageForm.pdRoleNo = ''\r\n      this.ageForm.pdRoleCode = ''\r\n      this.ageForm.updatePdSlChanl = ''\r\n      this.ageForm.pdSlChanl = []\r\n    },\r\n    saveAgeForm() {\r\n      let pdtempPdInsuAgeInfo = {\r\n        pdVerId: this.pdtempPdInfo.pdVerId,\r\n        operator: this.pdtempPdInfo.operator,\r\n        pdType: this.pdtempPdInfo.bType,\r\n        pdInfoId: this.pdtempPdInfo.id,\r\n        pdCode: this.pdtempPdInfo.pdCode,\r\n        pdRoleCode: this.ageForm.pdRoleCode,\r\n        pdRoleNo: this.ageForm.pdRoleNo,\r\n        pdRoleSex: this.ageForm.pdRoleSex,\r\n        pdInsuPeriod: this.ageForm.pdInsuPeriod,\r\n        pdInsuPeriodUnit: this.ageForm.pdInsuPeriodUnit,\r\n        pdPayPeriod: this.ageForm.pdPayPeriod,\r\n        pdPayPeriodUnit: this.ageForm.pdPayPeriodUnit,\r\n        pdPayFreq: this.ageForm.pdPayFreq,\r\n        pdMaxAppAge: this.ageForm.pdMaxAppAge,\r\n        pdMaxAppAgeUnit: this.ageForm.pdMaxAppAgeUnit,\r\n        pdMinAppAge: this.ageForm.pdMinAppAge,\r\n        pdMinAppAgeUnit: this.ageForm.pdMinAppAgeUnit,\r\n        pdSlChanl: this.ageForm.pdSlChanl\r\n      }\r\n      if (!this.ageForm.pdInsuPeriod) {\r\n        pdtempPdInsuAgeInfo.pdInsuPeriodUnit = undefined\r\n      }\r\n      if (!this.ageForm.pdPayPeriod) {\r\n        pdtempPdInsuAgeInfo.pdPayPeriodUnit = undefined\r\n      }\r\n      if (!this.ageForm.pdMaxAppAge) {\r\n        pdtempPdInsuAgeInfo.pdMaxAppAgeUnit = undefined\r\n      }\r\n      if (!this.ageForm.pdMinAppAge) {\r\n        pdtempPdInsuAgeInfo.pdMinAppAgeUnit = undefined\r\n      }\r\n      let flag = 0\r\n      for (const config of this.ageConfigs) {\r\n        if (this.ageForm.pdRoleCode === config.pdRoleCode) {\r\n          if (this.ageForm.pdRoleNo === config.pdRoleNo) {\r\n            this.notifyError(this.$t('pdtempPdInsuAgeInfo.roleOrderExist'))\r\n            flag = 1\r\n            break\r\n          }\r\n        }\r\n      }\r\n      if (flag === 0) {\r\n        this.$refs[\"ageForm\"].validate(valid => {\r\n          if (valid) {\r\n            addPdtempPdInsuAgeInfo(pdtempPdInsuAgeInfo).then((res) => {\r\n              if (res.data.message_type === \"repeat\") {\r\n                this.notifyError(this.$t(\"pdtempPdInsuAgeInfo.message_repeat\"))\r\n                return\r\n              }\r\n              this.notifySuccess(this.$t('successMessage.save'))\r\n              this.cleanAgeForm()\r\n              this.$nextTick(() => {\r\n                this.handleSearch()\r\n              })\r\n              this.$emit(\"childFn\", true)\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    updateAgeForm() {\r\n      let pdtempPdInsuAgeInfo = {\r\n        id: this.ageForm.id,\r\n        pdVerId: this.pdtempPdInfo.pdVerId,\r\n        operator: this.pdtempPdInfo.operator,\r\n        pdType: this.pdtempPdInfo.bType,\r\n        pdInfoId: this.pdtempPdInfo.id,\r\n        pdCode: this.pdtempPdInfo.pdCode,\r\n        pdRoleCode: this.ageForm.pdRoleCode,\r\n        pdRoleNo: this.ageForm.pdRoleNo,\r\n        pdRoleSex: this.ageForm.pdRoleSex,\r\n        pdInsuPeriod: this.ageForm.pdInsuPeriod,\r\n        pdInsuPeriodUnit: this.ageForm.pdInsuPeriodUnit,\r\n        pdPayPeriod: this.ageForm.pdPayPeriod,\r\n        pdPayPeriodUnit: this.ageForm.pdPayPeriodUnit,\r\n        pdPayFreq: this.ageForm.pdPayFreq,\r\n        pdMaxAppAge: this.ageForm.pdMaxAppAge,\r\n        pdMaxAppAgeUnit: this.ageForm.pdMaxAppAgeUnit,\r\n        pdMinAppAge: this.ageForm.pdMinAppAge,\r\n        pdMinAppAgeUnit: this.ageForm.pdMinAppAgeUnit,\r\n        pdSlChanl: this.ageForm.updatePdSlChanl\r\n      }\r\n      if (!this.ageForm.pdInsuPeriod) {\r\n        pdtempPdInsuAgeInfo.pdInsuPeriodUnit = undefined\r\n      }\r\n      if (!this.ageForm.pdPayPeriod) {\r\n        pdtempPdInsuAgeInfo.pdPayPeriodUnit = undefined\r\n      }\r\n      if (!this.ageForm.pdMaxAppAge) {\r\n        pdtempPdInsuAgeInfo.pdMaxAppAgeUnit = undefined\r\n      }\r\n      if (!this.ageForm.pdMinAppAge) {\r\n        pdtempPdInsuAgeInfo.pdMinAppAgeUnit = undefined\r\n      }\r\n      this.$refs[\"ageForm\"].validate(valid => {\r\n        if (valid) {\r\n          updatePdtempPdInsuAgeInfo(pdtempPdInsuAgeInfo).then(res => {\r\n            if (res.data.message_type == \"repeat\") {\r\n              this.notifyError(this.$t(\"pdtempPdInsuAgeInfo.message_repeat\"))\r\n              return\r\n            }\r\n            this.notifySuccess(res.message)\r\n            this.$nextTick(() => {\r\n              this.handleSearch()\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    delRoleRow(index, row) {\r\n      let delKeys = this.ageFormArray.map(sale => sale.id)\r\n      deletePdtempPdInsuAgeInfoList(this.buildRequestData({delKeys: delKeys})).then(() => {\r\n        this.notifySuccess(this.$t('successMessage.delete'))\r\n        this.handleSearch()\r\n        this.$refs[\"ageForm\"].resetFields()\r\n        this.ageForm.pdMaxAppAgeUnit = \"A\"\r\n        this.ageForm.pdMinAppAgeUnit = \"A\"\r\n        this.ageForm.pdInsuPeriodUnit = \"Y\"\r\n        this.ageForm.pdPayPeriodUnit = \"Y\"\r\n      })\r\n    },\r\n    delCusRow(index, row) {\r\n      deletePdtempPdRules(row.id).then(() => {\r\n        this.notifySuccess(this.$t('successMessage.delete'))\r\n        this.$refs.page_current.reload()\r\n        this.$refs.page_brief.reload()\r\n      })\r\n    },\r\n    selectFirst(row) {\r\n      this.$refs.ageTable1.setCurrentRow(row)\r\n    },\r\n    chooseOne(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (this.radio1 != null) {\r\n          if (row.id === this.radio1.id) {\r\n            this.radio1 = null\r\n            this.$refs[\"ageForm\"].resetFields()\r\n            (this.ageForm.pdMaxAppAgeUnit = \"A\"),\r\n              (this.ageForm.pdMinAppAgeUnit = \"A\"),\r\n              (this.ageForm.pdInsuPeriodUnit = \"Y\"),\r\n              (this.ageForm.pdPayPeriodUnit = \"Y\")\r\n          }\r\n        }\r\n      }\r\n    },\r\n    chooseOneChange(row) {\r\n      this.ageForm.updatePdSlChanl = ''\r\n      this.ageFormArray = row\r\n      this.cleanAgeForm()\r\n      if (row.length == 1) {\r\n        this.pdSlChanlArray = [\"00\"]\r\n        Object.assign(this.ageForm, row[0])\r\n        this.ageForm.updatePdSlChanl = row[0].pdSlChanl\r\n        this.ageForm.pdSlChanl = [row[0].pdSlChanl]\r\n        this.ageForm.pdRoleNo = row[0].pdRoleNo + ''\r\n      }\r\n    },\r\n    chooseOne2(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.radio2) {\r\n          this.radio2 = null\r\n          this.$refs.cusTable.setCurrentRow()\r\n        } else {\r\n          this.radio2 = row.id\r\n          this.ruleView.flag = row.ruleAttr === '1' ? '1' : '2'\r\n          this.ruleView.performType = row.performType\r\n          this.ruleView.ruleCode = row.pdRuleCode\r\n          this.ruleView.visible = true\r\n        }\r\n      }\r\n    },\r\n    handleSelectionChangeInBrief(row) {\r\n      this.chooseRulesInBrief = row\r\n    },\r\n    handleSelectionChangeInAll(row) {\r\n      this.chooseRulesInAll = row\r\n    },\r\n    getCaption(obj, state) {\r\n      const index = obj.lastIndexOf(\":\")\r\n      if (state === 0) {\r\n        return obj.substring(0, index)\r\n      } else {\r\n        return obj.substring(index + 1, obj.length)\r\n      }\r\n    },\r\n    productDetailTypeChanged(val) {\r\n      this.params.eq_pdInfoId = undefined\r\n      this.productOptions = []\r\n      findAllProductByDetailType(this.buildRequestData({productDetailType: val})).then(response => {\r\n        this.productOptions = response.data\r\n      })\r\n    },\r\n    pdSlChanlFormat(va) {\r\n      let saleChan = this._.find(this.pdSaleChanlArray, {code: va})\r\n      if (saleChan) {\r\n        return va + ':' + saleChan.codename\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n\r\n</style>\r\n"]}]}