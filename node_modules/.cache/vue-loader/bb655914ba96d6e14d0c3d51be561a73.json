{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\package-audit\\comboFileRelase\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\package-audit\\comboFileRelase\\index.vue","mtime":1609847106604},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZmluZFBwSW5mb0ZpbGVMaXN0LHBkUHBFZGl0aW9uTGlzdH0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL2NvbWJvQXVkaXRJbmZvIjsKbGV0IF90aGlzOwogZXhwb3J0IGRlZmF1bHQgewogICAgIG5hbWU6ICJjb21ib0ZpbGVSZWxhc2UiLAogICAgIGRhdGEoKSB7CiAgICAgICAgIF90aGlzID0gdGhpczsKICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgIHBkRmlsZUF1ZGl0VGFibGU6W10sCiAgICAgICAgICAgICBwZEZpbGVEYXRhOiBbXSwKICAgICAgICAgICAgIGNoZWNrUGRGaWxlQXVkaXRUYWJsZTpbXSwKICAgICAgICAgICAgIHNlbGVjdEVkaXRpb246W10sCiAgICAgICAgICAgICBwZEVkaXRpb25JbmZvOiBbXSwKICAgICAgICAgICAgIC8v5p+l6K+i5Y+C5pWwCiAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICBwZFBwSW5mb0lkOicnLAogICAgICAgICAgICAgICAgIHBkSW5mb0lkOicnLAogICAgICAgICAgICAgICAgIHBkRmlsZVR5cGU6IFtdLAogICAgICAgICAgICAgICAgIHBkRWRpdGlvbjonJywKICAgICAgICAgICAgIH0sCiAgICAgICAgIH0KICAgICB9LAogICAgIHByb3BzOiB7CiAgICAgICAgIHBkSW5mbzogewogICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICAgZGVmYXVsdDoge30sCiAgICAgICAgIH0KICAgICB9LAogICAgIGZpbHRlcnM6IHsKICAgICAgICAgZmlsdGVyX2dldEZpbGVUeXBlKGNvZGUpIHsKICAgICAgICAgICAgIGlmIChjb2RlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0Q2FzY2FkZXJDb2RlTmFtZSgncGRmaWxldHlwZScsIGNvZGUpOwogICAgICAgICAgICAgfQogICAgICAgICB9LAogICAgICAgICBmaWx0ZXJfZ2V0RmlsZU5hbWUoY29kZSkgewogICAgICAgICAgICAgaWYgKGNvZGUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgIGxldCBmaWxlbmFtZSA9IEpTT04ucGFyc2UoY29kZSk7CiAgICAgICAgICAgICAgICAgbGV0IHJlbmFtZSA9ICcnOwogICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZW5hbWUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGZpbGVuYW1lLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmFtZSArPSBmaWxlbmFtZVtpXQogICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgcmVuYW1lICs9IGZpbGVuYW1lW2ldICsgIjsgIgogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIHJldHVybiByZW5hbWUKICAgICAgICAgICAgIH0KICAgICAgICAgfSwKICAgICAgICAgZmlsdGVyX2dldFVwZERlcG10KGNvZGUpIHsKICAgICAgICAgICAgIGlmIChjb2RlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkZGVwbXQnLCBjb2RlKQogICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgfSwKICAgICBjcmVhdGVkKCkgewogICAgICAgICB0aGlzLnBhcmFtcy5wZFBwSW5mb0lkPXRoaXMucGRJbmZvLmlkOwogICAgICAgICB0aGlzLmdldFBkRmlsZURhdGEoKTsKICAgICAgICAgdGhpcy5maW5kUGRFZGl0aW9uTGlzdCgpCiAgICAgfSwKICAgICBtZXRob2RzOnsKICAgICAgICAgZ2V0UGRGaWxlRGF0YSgpewogICAgICAgICAgICAgbGV0IHBhcmFtc0QgPSB7CiAgICAgICAgICAgICAgICAgcGRQcEluZm9JZDp0aGlzLnBkSW5mby5pZAogICAgICAgICAgICAgfTsKICAgICAgICAgICAgIC8v5aWX6aSQ6LWE5paZCiAgICAgICAgICAgICBmaW5kUHBJbmZvRmlsZUxpc3QodGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtc0QpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLmxlbmd0aD09PTApewogICAgICAgICAgICAgICAgIGxldCBwZEZpbGVBdWRpdFRhYmxlYmFjayA9IHRoaXMuZ2V0U3RyRGF0YSgncGRGaWxlQXVkaXRUYWJsZWJhY2snKQogICAgICAgICAgICAgICAgIHRoaXMucGRGaWxlQXVkaXRUYWJsZSA9IEpTT04ucGFyc2UocGRGaWxlQXVkaXRUYWJsZWJhY2spOwogICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICB0aGlzLnBkRmlsZUF1ZGl0VGFibGU9cmVzLmRhdGEKICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSkKICAgICAgICAgfSwKICAgICAgICAgZmluZFBkRWRpdGlvbkxpc3QoKXsKICAgICAgICAgICAgIGxldCBwYXJhbXNEID0gewogICAgICAgICAgICAgICAgIHBkUHBJbmZvSWQ6dGhpcy5wZEluZm8uaWQKICAgICAgICAgICAgIH07CiAgICAgICAgICAgICBwZFBwRWRpdGlvbkxpc3QodGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtc0QpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgdGhpcy5wZEVkaXRpb25JbmZvPXJlcy5kYXRhOwogICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGRFZGl0aW9uIG9mIHRoaXMucGRFZGl0aW9uSW5mbykgewogICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEVkaXRpb24ucHVzaChwZEVkaXRpb24pOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEVkaXRpb24gPSB0aGlzLnNlbGVjdEVkaXRpb24ucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgIGlmICghcHJldi5maW5kKGVsID0+IGVsLnBkRWRpdGlvbiA9PSBlbGVtZW50LnBkRWRpdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYucHVzaChlbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldjsKICAgICAgICAgICAgICAgICB9LCBbXSk7CiAgICAgICAgICAgICB9KQogICAgICAgICB9LAogICAgICAgICBzZWFyY2hEYXRhQnlDb25kaXRpb24oKXsKICAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnBkUGFnZSkgewogICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGRQYWdlLnJlbG9hZCgpOwogICAgICAgICAgICAgfQogICAgICAgICB9LAogICAgICAgICBiYWNrUGFnZSgpIHsKICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2JyaW5nUGRGaWxlQXVkaXREYXRhJywgdGhpcy5wZEZpbGVBdWRpdFRhYmxlKTsKICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZURpYWxvZ0ZpbGVSZWxlYXNlJywgZmFsc2UpOwogICAgICAgICAgICAgdGhpcy5jYWNoZVN0ckRhdGEoJ3BkRmlsZUF1ZGl0VGFibGViYWNrJywgSlNPTi5zdHJpbmdpZnkodGhpcy5wZEZpbGVBdWRpdFRhYmxlKSk7CiAgICAgICAgIH0sCiAgICAgICAgICBjaGVja1BkRmlsZUF1ZGl0KHZhbCl7CiAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1BkRmlsZUF1ZGl0VGFibGU9dmFsCiAgICAgICAgIH0sCiAgICAgICAgIHJlbGF0aW9uRmlsZSgpewogICAgICAgICAgICAgaWYodGhpcy5jaGVja1BkRmlsZUF1ZGl0VGFibGUubGVuZ3RoPjApIHsKICAgICAgICAgICAgICAgICB0aGlzLnBkRmlsZUF1ZGl0VGFibGU9dGhpcy5jaGVja1BkRmlsZUF1ZGl0VGFibGU7CiAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwZEF1ZGl0IG9mIHRoaXMuY2hlY2tQZEZpbGVBdWRpdFRhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5wZEZpbGVEYXRhLnNwbGljZShwZEF1ZGl0LDEpOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoIuivt+mAieaLqeS4gOadoeS6p+WTgei1hOaWmSIpCiAgICAgICAgICAgICB9CiAgICAgICAgIH0sCiAgICAgfQogfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-audit/package-audit/comboFileRelase","sourcesContent":["<template>\r\n    <cus-wraper>\r\n      <cus-page-title-back @backTo=\"backPage\" :label=\"$t('route.comboAudit')\"/>\r\n      <cus-table-title :label=\"$t('i18nView.auditPpData')\" />\r\n      <el-table :data=\"pdFileAuditTable\" border element-loading-text=\"Loading\" fit size=\"mini\" style=\"width: 98%\">\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\"   type=\"index\"></el-table-column>\r\n        <el-table-column :label=\"$t('customComponents.pdEdition')\" align=\"center\"\r\n                         prop=\"pdEdition\"></el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdFileType')\" align=\"center\"  prop=\"pdFileType\">\r\n          <template v-slot=\"scope\">{{scope.row.pdFileType | filter_getFileType}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdFileName')\" align=\"center\"  prop=\"pdFileName\">\r\n          <template v-slot=\"scope\">{{scope.row.pdFileName | filter_getFileName}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdFileDesc')\" align=\"center\" prop=\"pdFileDesc\"></el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdUpdDepmt')\" align=\"center\" prop=\"pdUpdDepmt\">\r\n          <template v-slot=\"scope\">{{scope.row.pdUpdDepmt | filter_getUpdDepmt}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdUpDate')\" align=\"center\" prop=\"createTime\"></el-table-column>\r\n      </el-table>\r\n      <br>\r\n      <cus-form-title :label=\"$t('i18nView.pdDataManage')\"/>\r\n      <el-form :model=\"params\" ref=\"params\" label-width=\"auto\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('customComponents.pdEdition')\"  prop=\"pdEdition\">\r\n              <el-select clearable filterable  v-model=\"params.pdEdition\">\r\n                <el-option\r\n                  :key=\"index\"\r\n                  :label=\"item.pdEdition\"\r\n                  :value=\"item.pdEdition\"\r\n                  v-for=\"(item,index) in selectEdition\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('comboFileRelase.pdFileType')\">\r\n              <cus-cascader :codetype=\"'pdfiletype'\" :placeholder=\"$t('comboFileRelase.pdFileType')\"\r\n                            clearable v-model=\"params.pdFileType\"></cus-cascader>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"8\">\r\n            <el-button  size=\"small\" style=\"float: right\" @click=\"searchDataByCondition\" icon=\"el-icon-search\" type=\"primary\"\r\n                       v-auth=\"'pdtemp-pd-file:queryData'\">{{$t('comboFileRelase.search') }}\r\n            </el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <cus-table-title :label=\"$t('i18nView.waitPdData')\"/>\r\n      <el-table :data=\"pdFileData\" border element-loading-text=\"Loading\" fit highlight-current-row max-height=\"500\"\r\n                @selection-change=\"checkPdFileAudit\" size=\"mini\" style=\"width: 98%\">\r\n        <el-table-column :label=\"$t('productValueAddedTax.select')\" type=\"selection\" align=\"center\" width=\"50px\"></el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\"   type=\"index\"></el-table-column>\r\n        <el-table-column :label=\"$t('customComponents.pdEdition')\" align=\"center\" prop=\"pdEdition\"></el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdFileType')\" align=\"center\"  prop=\"pdFileType\">\r\n          <template v-slot=\"scope\">{{scope.row.pdFileType | filter_getFileType}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdFileName')\" align=\"center\"  prop=\"pdFileName\">\r\n          <template v-slot=\"scope\">{{scope.row.pdFileName | filter_getFileName}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdFileDesc')\" align=\"center\" prop=\"pdFileDesc\"></el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdUpdDepmt')\" align=\"center\" prop=\"pdUpdDepmt\">\r\n          <template v-slot=\"scope\">{{scope.row.pdUpdDepmt | filter_getUpdDepmt}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('comboFileRelase.pdUpDate')\" align=\"center\" prop=\"createTime\"></el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <cus-pagination ref=\"pdPage\" url=\"/combo-audit-info/base/findPpInfoAllFileList\" :pageSize=\"10\" :params=\"params\"\r\n                      v-model=\"pdFileData\"/>\r\n      <br>\r\n      <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n        <el-col :span=\"24\" align=\"right\">\r\n          <el-button  size=\"small\" @click=\"relationFile\" icon=\"el-icon-success\"  type=\"primary\">\r\n            {{$t('pdFileRelease.relation')}}</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n   import {findPpInfoFileList,pdPpEditionList} from \"@/api/basicinfo/comboAuditInfo\";\r\n   let _this;\r\n    export default {\r\n        name: \"comboFileRelase\",\r\n        data() {\r\n            _this = this;\r\n            return {\r\n                pdFileAuditTable:[],\r\n                pdFileData: [],\r\n                checkPdFileAuditTable:[],\r\n                selectEdition:[],\r\n                pdEditionInfo: [],\r\n                //查询参数\r\n                params: {\r\n                    pdPpInfoId:'',\r\n                    pdInfoId:'',\r\n                    pdFileType: [],\r\n                    pdEdition:'',\r\n                },\r\n            }\r\n        },\r\n        props: {\r\n            pdInfo: {\r\n                type: Object,\r\n                default: {},\r\n            }\r\n        },\r\n        filters: {\r\n            filter_getFileType(code) {\r\n                if (code != null) {\r\n                    return _this.getCascaderCodeName('pdfiletype', code);\r\n                }\r\n            },\r\n            filter_getFileName(code) {\r\n                if (code != null) {\r\n                    let filename = JSON.parse(code);\r\n                    let rename = '';\r\n                    for (let i = 0; i < filename.length; i++) {\r\n                        if (i === filename.length - 1) {\r\n                            rename += filename[i]\r\n                        } else {\r\n                            rename += filename[i] + \"; \"\r\n                        }\r\n                    }\r\n                    return rename\r\n                }\r\n            },\r\n            filter_getUpdDepmt(code) {\r\n                if (code != null) {\r\n                    return _this.getCodeName('pddepmt', code)\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.params.pdPpInfoId=this.pdInfo.id;\r\n            this.getPdFileData();\r\n            this.findPdEditionList()\r\n        },\r\n        methods:{\r\n            getPdFileData(){\r\n                let paramsD = {\r\n                    pdPpInfoId:this.pdInfo.id\r\n                };\r\n                //套餐资料\r\n                findPpInfoFileList(this.buildRequestData(paramsD)).then(res => {\r\n                  if(res.data.length===0){\r\n                    let pdFileAuditTableback = this.getStrData('pdFileAuditTableback')\r\n                    this.pdFileAuditTable = JSON.parse(pdFileAuditTableback);\r\n                  }else{\r\n                    this.pdFileAuditTable=res.data\r\n                  }\r\n                })\r\n            },\r\n            findPdEditionList(){\r\n                let paramsD = {\r\n                    pdPpInfoId:this.pdInfo.id\r\n                };\r\n                pdPpEditionList(this.buildRequestData(paramsD)).then(res => {\r\n                    this.pdEditionInfo=res.data;\r\n                    for (const pdEdition of this.pdEditionInfo) {\r\n                        this.selectEdition.push(pdEdition);\r\n                    }\r\n                    this.selectEdition = this.selectEdition.reduce(function (prev, element) {\r\n                        if (!prev.find(el => el.pdEdition == element.pdEdition)) {\r\n                            prev.push(element);\r\n                        }\r\n                        return prev;\r\n                    }, []);\r\n                })\r\n            },\r\n            searchDataByCondition(){\r\n                if (this.$refs.pdPage) {\r\n                    this.$refs.pdPage.reload();\r\n                }\r\n            },\r\n            backPage() {\r\n                this.$emit('bringPdFileAuditData', this.pdFileAuditTable);\r\n                this.$emit('changeDialogFileRelease', false);\r\n                this.cacheStrData('pdFileAuditTableback', JSON.stringify(this.pdFileAuditTable));\r\n            },\r\n             checkPdFileAudit(val){\r\n                    this.checkPdFileAuditTable=val\r\n            },\r\n            relationFile(){\r\n                if(this.checkPdFileAuditTable.length>0) {\r\n                    this.pdFileAuditTable=this.checkPdFileAuditTable;\r\n                    for (const pdAudit of this.checkPdFileAuditTable) {\r\n                       // this.pdFileData.splice(pdAudit,1);\r\n                    }\r\n                }else{\r\n                    this.notifyError(\"请选择一条产品资料\")\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}