{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\combo-proginfo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\combo-proginfo\\index.vue","mtime":1609847107027},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHtpbml0Q29tYm9Qcm9nfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vY29tcGVuc2F0aW9uRGVmaW5pdGlvbiIKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwZHRlbXBwZGJuZnRpbmZvIiwKICBwcm9wczogewogICAgcGRCbmZ0Q3RybENvZGU6ewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6JycKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByYWRpbzI6bnVsbCwKICAgICAgcGR0ZW1wUHBJbmZvOnt9LAogICAgICBwYXJhbXM6ewogICAgICAgIGVxX3BwQ29kZTonJwogICAgICB9LAogICAgICBjb21ib1Byb2dUYWJsZTpbXSwKICAgICAgYm5mdENvbmZpZ3M6W10sCiAgICAgIGNvbWJvT3B0aW9uczpbXSwKICAgICAgY2hvb3NlQm5mdDpbXSwKICAgICAgY2hvb3NlQ29tYm9Qcm9nOltdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICdibmZ0Q29uZmlncycoKSB7CiAgICAgIGZvciAoY29uc3QgY29tYm8gb2YgdGhpcy5ibmZ0Q29uZmlncykgewogICAgICAgIGxldCBmbGFnID0gZmFsc2U7CiAgICAgICAgZm9yIChjb25zdCBjb21ib09wdGlvbiBvZiB0aGlzLmNvbWJvT3B0aW9ucykgewogICAgICAgICAgaWYgKGNvbWJvT3B0aW9uLnBwQ29kZSA9PT0gY29tYm8ucHBDb2RlKSB7CiAgICAgICAgICAgIGZsYWcgPSB0cnVlOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWZsYWcpIHsKICAgICAgICAgIHRoaXMuY29tYm9PcHRpb25zLnB1c2goY29tYm8pCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5wZHRlbXBQcEluZm8gPSB0aGlzLmdldFBkRGF0YSgpOwogICAgdGhpcy5pbml0Q29tYm9Qcm9nKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WIneWni+WMluWFs+iBlOaWueahiOS/oeaBrwogICAgaW5pdENvbWJvUHJvZygpewogICAgICBpZiAodGhpcy5wZEJuZnRDdHJsQ29kZSkgewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIHBkQm5mdEN0cmxDb2RlOnRoaXMucGRCbmZ0Q3RybENvZGUKICAgICAgICB9OwogICAgICAgIGluaXRDb21ib1Byb2codGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtcykpLnRoZW4ocmVzPT57CiAgICAgICAgICB0aGlzLmNvbWJvUHJvZ1RhYmxlPXJlcy5kYXRhCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYodGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlKXsKICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgICB9CiAgICB9LAogICAgLy/kv53lrZjlhbPogZTmlrnmoYgKICAgIGFkZENvbWJvUHJvZygpewogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jaG9vc2VDb21ib1Byb2cpIHsKICAgICAgICBsZXQgZHVwbGljYXRlZCA9IGZhbHNlOwogICAgICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRJdGVtIG9mIHRoaXMuY29tYm9Qcm9nVGFibGUpIHsKICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW0uaWQgPT09IGl0ZW0uaWQpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcihpdGVtLnBwUGxhbkNvZGUgKyAnOicgKyBpdGVtLnBwUGxhbk5hbWUgKyAn5bey5re75Yqg77yM6K+35Yu/6YeN5aSN5re75YqgJykKICAgICAgICAgICAgfSwgMSk7CiAgICAgICAgICAgIGR1cGxpY2F0ZWQgPSB0cnVlOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWR1cGxpY2F0ZWQpIHsKICAgICAgICAgIHRoaXMuY29tYm9Qcm9nVGFibGUucHVzaChpdGVtKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5Lqn5ZOB5aWX6aSQ5pa55qGI5pCc57SiCiAgICBjb21ib1Byb2dMaXN0KCl7CiAgICAgICAgdGhpcy4kcmVmcy5wYWdlLnJlbG9hZCgpCiAgICB9LAogICAgcmVmcmVzaCgpewogICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgfSwKICAgIGRlbFJvdyhpbmRleCkgewogICAgICB0aGlzLmNvbWJvUHJvZ1RhYmxlLnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY2hvb3NlQ29tYm9Qcm9nID0gdmFsOwogICAgfSwKICAgIGJhY2tUb01lbnUoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2JhY2tUb0ZlZUJpbGwnLCdjb21ib1Byb2cnLHRoaXMuY29tYm9Qcm9nVGFibGUpOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-compensation-def/combo-proginfo","sourcesContent":["<template>\r\n  <cus-wraper>\r\n\r\n    <cus-page-title-back :label=\"$t('i18nView.productPpSolution')\" @backTo=\"backToMenu\"></cus-page-title-back>\r\n    <el-form ref=\"params\" label-width=\"120px\" :model=\"params\" >\r\n        <el-row :gutter=\"10\" >\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('i18nView.productMeat')\">\r\n              <el-select v-model=\"params.eq_ppCode\" clearable filterable >\r\n                <el-option v-for=\"item in comboOptions\" :key=\"item.ppCode\" :label=\"item.ppCode+':'+item.ppName\" :value=\"item.ppCode\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <cus-btn-wrapper>\r\n          <el-button dialog-disable=\"disable\"  size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"comboProgList\">{{$t('pdtempProgInfo.search')}}</el-button>\r\n          </cus-btn-wrapper>\r\n        </el-row>\r\n      </el-form>\r\n      <cus-table-title :label=\"$t('i18nView.selectProductMeat')\" />\r\n      <el-table :data=\"bnftConfigs\" ref=\"multipleTable\" size=\"mini\" fit element-loading-text=\"Loading\" border @selection-change=\"handleSelectionChange\" highlight-current-row align=\"center\" class=\"wraper-table\">\r\n        <el-table-column type=\"selection\" width=\"50\"></el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" type=\"index\" width=\"50\" align=\"center\"></el-table-column>\r\n        <el-table-column width=\"60\" :label=\"$t('pdtempProgInfo.detail')\" prop align=\"center\" type=\"expand\">\r\n          <template slot-scope=\"props\">\r\n            <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n              <el-form-item :label=\"$t('i18nView.productPpCode')\" style=\"width: 50%\">\r\n                {{ props.row.ppCode }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpName')\" style=\"width: 50%\">\r\n                {{ props.row.ppName }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpType')\" style=\"width: 50%\">\r\n                {{ props.row.ppType }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpSolutionCode')\" style=\"width: 50%\">\r\n                {{ props.row.ppPlanCode }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpSolutionName')\" style=\"width: 50%\">\r\n                {{ props.row.ppPlanName }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.ppApplyDate')\" style=\"width: 50%\">\r\n                {{ props.row.applyTime }}\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpCode')\"  prop=\"ppCode\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpName')\"  prop=\"ppName\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpSolutionCode')\"  prop=\"ppPlanCode\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpSolutionName')\"  prop=\"ppPlanName\" align=\"center\"></el-table-column>\r\n      </el-table>\r\n      <cus-pagination :pageSize=\"5\" :params=\"params\" ref=\"page\"\r\n                    url=\"/combo-claim-compensation/base/comboProgList\" v-model=\"bnftConfigs\"/>\r\n      <br/>\r\n      <el-form>\r\n        <el-form-item align=\"right\">\r\n          <el-button dialog-disable=\"disable\" size=\"small\" type=\"primary\" icon=\"el-icon-circle-plus-outline\" @click=\"addComboProg\">\r\n            {{$t('i18nView.add')}}\r\n        </el-button>\r\n        <el-button dialog-disable=\"disable\" size=\"small\" type=\"primary\" icon=\"el-icon-refresh\"  @click=\"refresh\">\r\n          {{$t('table.refresh')}}\r\n        </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <cus-table-title :label=\"$t('i18nView.ppRelateProductItem')\"/>\r\n      <el-table :data=\"comboProgTable\" ref=\"comboProgTable\" size=\"mini\" fit element-loading-text=\"Loading\"  border highlight-current-row align=\"center\" max-height=\"300px\" class=\"wraper-table\">\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column width=\"60\" :label=\"$t('pdtempProgInfo.detail')\" prop align=\"center\" type=\"expand\">\r\n          <template slot-scope=\"props\">\r\n            <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n              <el-form-item :label=\"$t('i18nView.productPpCode')\" style=\"width: 50%\">\r\n                {{ props.row.ppCode }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpName')\" style=\"width: 50%\">\r\n                {{ props.row.ppName }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpSolutionCode')\" style=\"width: 50%\">\r\n                {{ props.row.ppPlanCode }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.productPpSolutionName')\" style=\"width: 50%\">\r\n                {{ props.row.ppPlanName }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.comboId')\" style=\"width: 50%\">\r\n                {{ props.row.pdInfoId }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$t('i18nView.relateCode')\" style=\"width: 50%\">\r\n                {{ props.row.pdBnftCtrlConCode }}\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpCode')\"  prop=\"ppCode\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpName')\"  prop=\"ppName\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpSolutionCode')\"  prop=\"ppPlanCode\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.productPpSolutionName')\"  prop=\"ppPlanName\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdgenlDblGrade.operator')\" align=\"center\" width=\"80px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button dialog-disable=\"disable\" type=\"danger\"  size=\"mini\" @click=\"delRow(scope.$index)\">-\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {initComboProg} from \"@/api/basicinfo/compensationDefinition\"\r\nexport default {\r\n  name: \"pdtemppdbnftinfo\",\r\n  props: {\r\n    pdBnftCtrlCode:{\r\n      type: String,\r\n      default:''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      radio2:null,\r\n      pdtempPpInfo:{},\r\n      params:{\r\n        eq_ppCode:''\r\n      },\r\n      comboProgTable:[],\r\n      bnftConfigs:[],\r\n      comboOptions:[],\r\n      chooseBnft:[],\r\n      chooseComboProg:[]\r\n    };\r\n  },\r\n  watch: {\r\n    'bnftConfigs'() {\r\n      for (const combo of this.bnftConfigs) {\r\n        let flag = false;\r\n        for (const comboOption of this.comboOptions) {\r\n          if (comboOption.ppCode === combo.ppCode) {\r\n            flag = true;\r\n            break\r\n          }\r\n        }\r\n        if (!flag) {\r\n          this.comboOptions.push(combo)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.pdtempPpInfo = this.getPdData();\r\n    this.initComboProg();\r\n  },\r\n  methods: {\r\n    //初始化关联方案信息\r\n    initComboProg(){\r\n      if (this.pdBnftCtrlCode) {\r\n        const params = {\r\n          pdBnftCtrlCode:this.pdBnftCtrlCode\r\n        };\r\n        initComboProg(this.buildRequestData(params)).then(res=>{\r\n          this.comboProgTable=res.data\r\n        });\r\n      }\r\n      if(this.$refs.multipleTable){\r\n        this.$refs.multipleTable.clearSelection()\r\n      }\r\n    },\r\n    //保存关联方案\r\n    addComboProg(){\r\n      for (const item of this.chooseComboProg) {\r\n        let duplicated = false;\r\n        for (const selectedItem of this.comboProgTable) {\r\n          if (selectedItem.id === item.id) {\r\n            setTimeout(() => {\r\n              this.notifyError(item.ppPlanCode + ':' + item.ppPlanName + '已添加，请勿重复添加')\r\n            }, 1);\r\n            duplicated = true;\r\n            break\r\n          }\r\n        }\r\n        if (!duplicated) {\r\n          this.comboProgTable.push(item)\r\n        }\r\n      }\r\n    },\r\n    //产品套餐方案搜索\r\n    comboProgList(){\r\n        this.$refs.page.reload()\r\n    },\r\n    refresh(){\r\n      this.$refs.multipleTable.clearSelection()\r\n    },\r\n    delRow(index) {\r\n      this.comboProgTable.splice(index, 1)\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.chooseComboProg = val;\r\n    },\r\n    backToMenu() {\r\n      this.$emit('backToFeeBill','comboProg',this.comboProgTable);\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.divider {\r\n  color: black;\r\n  background-color: black;\r\n  width: 1px;\r\n}\r\n</style>\r\n"]}]}