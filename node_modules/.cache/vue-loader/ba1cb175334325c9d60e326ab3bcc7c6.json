{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\general-config\\gen-paInfo-conf\\pdgenlPaFormula\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\general-config\\gen-paInfo-conf\\pdgenlPaFormula\\index.vue","mtime":1609847106722},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7Y29ubmVjdGlvblJ1bGUsIGdldEFsbFBhfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcGRnZW5sUGFJbmZvIg0KDQpsZXQgX3RoaXMNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncGRnZW5sUGFGb3JtdWxhJywNCiAgcHJvcHM6IHsNCiAgICBwZFBhSW5mbzogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9LA0KICAgIHBkQnVzc0RldGFpbFR5cGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBNYXJrOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0sDQogICAgbWFya1J1bGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfQ0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgZmlsdGVyX3J1bGVCdXNzTW9kdURldGEoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdydWxlQnVzaW5lc3NEZXRhaWxDbGFzcycsIGNvZGUpDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIF90aGlzID0gdGhpcw0KICAgIHJldHVybiB7DQogICAgICBmb3JtdWxhVmlldzogew0KICAgICAgICBmbGFnOiAnJywNCiAgICAgICAgcGVyZm9ybVR5cGU6ICcnLA0KICAgICAgICBydWxlQ29kZTogJycsDQogICAgICAgIHZpc2libGU6IGZhbHNlDQogICAgICB9LA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIHNlbGVjdGVkRm9ybXVsYTogW10sDQogICAgICBwYU9wdGlvbnM6IFtdLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHByb2R1Y3Q6IHVuZGVmaW5lZCwNCiAgICAgICAgbGlrZV9wZENhbGNDb2RlOiAnJywNCiAgICAgICAgcHJvZHVjdERldGFpbFR5cGU6ICcnLA0KICAgICAgICBwZEJ1c3NEZXRhaWxUeXBlOiAnJywNCiAgICAgICAgY3VycmVudF9wZFBhSW5mbzogdGhpcy5wZFBhSW5mbywNCiAgICAgICAgZXFfcGFJZDogdW5kZWZpbmVkLA0KICAgICAgICBNYXJrOiAnJw0KICAgICAgfSwNCiAgICAgIHByb2R1Y3Q6IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgYlR5cGU6ICcnLA0KICAgICAgICBjVHlwZTogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkRWRpdGlvbjogJycsDQogICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRTYWxlY2hubDogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIHBkU2hvcnRuYW1lOiAnJywNCiAgICAgICAgcGRFbk5hbWU6ICcnLA0KICAgICAgICBwZFNob3J0RW5OYW1lOiAnJywNCiAgICAgICAgb3BlcmF0b3I6ICcnLA0KICAgICAgICBwZEFwcGxEYXRlOiB1bmRlZmluZWQsDQogICAgICAgIHBkUHJvY2Vzc0lkOiB1bmRlZmluZWQsDQogICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgdXBkYXRlVGltZTogdW5kZWZpbmVkDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGlmICh0aGlzLk1hcmsgPT09ICdwZCcpIHsNCiAgICAgIGxldCBwZHRlbXBQZEluZm8gPSB0aGlzLmdldFBkRGF0YSgpDQogICAgICBpZiAoT2JqZWN0LmtleXMocGR0ZW1wUGRJbmZvKS5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMucHJvZHVjdCA9IHBkdGVtcFBkSW5mbw0KICAgICAgICB0aGlzLnBhcmFtcy5wcm9kdWN0ID0gcGR0ZW1wUGRJbmZvDQogICAgICAgIHRoaXMucGFyYW1zLk1hcmsgPSB0aGlzLk1hcmsNCiAgICAgICAgdGhpcy5wYXJhbXMucHJvZHVjdERldGFpbFR5cGUgPSB0aGlzLnByb2R1Y3QuY1R5cGUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgnbWVzc2FnZS5pbnZhbGlkUHJvZHVjdEluZm8nKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfQ0KICAgIC8vIOWIneWni+WMluaMh+WumuS/neWFqOmhueebruS4i+aLiQ0KICAgIHRoaXMucXVlcnlBbGxQYSgpDQogICAgdGhpcy5wYXJhbXMucGRCdXNzRGV0YWlsVHlwZSA9IHRoaXMucGRCdXNzRGV0YWlsVHlwZQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcnVsZU1ha2VDbG9zZWQoKSB7DQogICAgICB0aGlzLmZvcm11bGFWaWV3LnZpc2libGUgPSBmYWxzZQ0KICAgIH0sDQogICAgcXVlcnlBbGxQYSgpIHsNCiAgICAgIGdldEFsbFBhKCkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnBhT3B0aW9ucyA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd0Zvcm11bGEocm93KSB7DQogICAgICB0aGlzLmZvcm11bGFWaWV3LmZsYWcgPSAnMScNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcucGVyZm9ybVR5cGUgPSByb3cucGVyZm9ybVR5cGUNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcucnVsZUNvZGUgPSByb3cucGRDYWxjQ29kZQ0KICAgICAgdGhpcy5mb3JtdWxhVmlldy52aXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgYXNzb2NpYXRlKCkgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGb3JtdWxhLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3BkZ2VubFBhRm9ybXVsYS5wbGVhc2VTZWxlY3RGb3JtdWxhJykpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgbGV0IG1hcCA9IHsNCiAgICAgICAgInJ1bGVUeXBlIjogJzInLA0KICAgICAgICAiTWFyayI6IHRoaXMuTWFyaywNCiAgICAgICAgInBkSW5mbyI6IHRoaXMucHJvZHVjdCwNCiAgICAgICAgInBkQnVzc0RldGFpbFR5cGUiOiB0aGlzLnBkQnVzc0RldGFpbFR5cGUsDQogICAgICAgICJwZGdlbmxQZFBhSW5mbyI6IHRoaXMucGRQYUluZm8sDQogICAgICAgICJwZHRlbXBQZFBhSW5mb1ZvIjogdGhpcy5wZFBhSW5mbywNCiAgICAgICAgInBkdGVtcFBkQ2FsY1ZvTGlzdCI6IHRoaXMuc2VsZWN0ZWRGb3JtdWxhDQogICAgICB9DQogICAgICBjb25uZWN0aW9uUnVsZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEobWFwKSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdydWxlLmFzc29jaWF0aW9uU3VjY2VzcycpKQ0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDlhazlvI/liqjmgIHooajmoLzlpJrpgInmoYYNCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnNlbGVjdGVkRm9ybXVsYSA9IHZhbA0KICAgIH0sDQogICAgYmFjaygpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlRGlhbG9nRm9ybXVsYScpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/general-config/gen-paInfo-conf/pdgenlPaFormula","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back v-if=\"Mark !== 'pd'\" :isDialog=\"true\" :label=\"$t('pdgenlPaInfo.pdgenlPaInfo')\"\r\n                         @backTo=\"back\"></cus-page-title-back>\r\n    <cus-page-title-back v-if=\"Mark === 'pd'\" :isDialog=\"true\" :label=\"$t('pdgenlPaInfo.pdgenlPaFormula')\"\r\n                         @backTo=\"back\"></cus-page-title-back>\r\n\r\n    <el-form ref=\"searchForm\" :model=\"params\" label-width=\"auto\">\r\n      <cus-row :gutter=\"10\" type=\"flex\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdgenlPaInfo.designationSecurityProject')\" prop=\"eq_paId\">\r\n            <el-select v-model=\"params.eq_paId\" :placeholder=\"$t('form.please_select')\" clearable filterable>\r\n              <el-option v-for=\"item in paOptions\" :key=\"item.id\"\r\n                         :label=\"item.pdPaCode + ':' + item.pdPaName + (item.pdAttr==='1'?' - '+$t('pdgenlPaRule.personalInsurance'):' - '+$t('pdgenlPaRule.groupInsurance'))\"\r\n                         :value=\"item.id\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('rule.pdBussDetailType')\" prop=\"pdBussDetailType\">\r\n            <cus-select v-model=\"params.pdBussDetailType\" codetype=\"ruleBusinessDetailClass\" disabled></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('rule.pdCalcCode')\" prop=\"like_pdCalcCode\">\r\n            <el-input v-model=\"params.like_pdCalcCode\" :placeholder=\"$t('pay_def.message.please_enter')\"\r\n                      clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </cus-row>\r\n      <el-row :gutter=\"10\" type=\"flex\">\r\n        <el-col style=\"text-align: right\">\r\n          <el-button icon=\"el-icon-search\" size=\"small\" type=\"primary\" @click=\"$refs.page.reload()\">\r\n            {{ $t('pdgenlCmpnInfo.search') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <cus-table-title :label=\"$t('pdgenlPaFormula.paFormula')\"></cus-table-title>\r\n    <el-table :data=\"tableData\" border element-loading-text=\"Loading\" fit highlight-current-row size=\"mini\"\r\n              @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"50\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n        <template v-slot=\"scope\">\r\n          {{ initTableIndex('page', scope.$index) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdgenlPaInfo.details')\" align=\"center\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"small\" type=\"text\" @click=\"showFormula(scope.row)\">>></el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdgenlPaInfo.securityProject')\" align=\"center\" min-width=\"200\" prop=\"pdPaCode\"\r\n                       sortable>\r\n        <template slot-scope=\"scope\">\r\n          {{\r\n            scope.row.pdPaCode ? scope.row.pdPaCode + ':' + scope.row.pdPaName + (scope.row.pdAttr === '1' ? ' - ' + $t('pdgenlPaRule.personalInsurance') : ' - ' + $t('pdgenlPaRule.groupInsurance')) : ''\r\n          }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdBussDetailType')\" align=\"center\" min-width=\"200\" prop=\"pdBussDetailType\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdBussDetailType | filter_ruleBussModuDeta }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdCalcCode')\" align=\"center\" min-width=\"200\" prop=\"pdCalcCode\" sortable>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('rule.pdCalcDesc')\" align=\"center\" min-width=\"200\"\r\n                       prop=\"pdCalcDesc\"></el-table-column>\r\n      <el-table-column :label=\"$t('rule.ruleAttr')\" align=\"center\" min-width=\"200\">\r\n        <template v-slot=\"scope\">\r\n          {{\r\n            scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n          }}\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <cus-pagination ref=\"page\" v-model=\"tableData\" :autoBuild=\"false\" :pageSize=\"5\" :params=\"params\"\r\n                    url=\"/pd-pa-info-general/selectFormula\"/>\r\n\r\n    <el-row style=\"text-align: right\" type=\"flex\">\r\n      <el-col :span=\"8\"></el-col>\r\n      <el-col :span=\"8\"></el-col>\r\n      <el-col :span=\"8\">\r\n        <el-button icon=\"el-icon-connection\" size=\"small\" type=\"primary\" @click=\"associate\">\r\n          {{ $t('pdgenlPaInfo.select') }}\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 公式查看弹窗 -->\r\n    <cus-rule-modify :flag=\"formulaView.flag\" :performType=\"formulaView.performType\" :ruleCode=\"formulaView.ruleCode\"\r\n                     :ruleModifyClosed=\"ruleMakeClosed\" :ruleType=\"'2'\"\r\n                     :visible=\"formulaView.visible\"></cus-rule-modify>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {connectionRule, getAllPa} from \"@/api/basicinfo/pdgenlPaInfo\"\r\n\r\nlet _this\r\n\r\nexport default {\r\n  name: 'pdgenlPaFormula',\r\n  props: {\r\n    pdPaInfo: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    pdBussDetailType: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    Mark: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    markRule: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    }\r\n  },\r\n  filters: {\r\n    filter_ruleBussModuDeta(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      formulaView: {\r\n        flag: '',\r\n        performType: '',\r\n        ruleCode: '',\r\n        visible: false\r\n      },\r\n      tableData: [],\r\n      selectedFormula: [],\r\n      paOptions: [],\r\n      params: {\r\n        product: undefined,\r\n        like_pdCalcCode: '',\r\n        productDetailType: '',\r\n        pdBussDetailType: '',\r\n        current_pdPaInfo: this.pdPaInfo,\r\n        eq_paId: undefined,\r\n        Mark: ''\r\n      },\r\n      product: {\r\n        id: undefined,\r\n        bType: '',\r\n        cType: '',\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    if (this.Mark === 'pd') {\r\n      let pdtempPdInfo = this.getPdData()\r\n      if (Object.keys(pdtempPdInfo).length > 0) {\r\n        this.product = pdtempPdInfo\r\n        this.params.product = pdtempPdInfo\r\n        this.params.Mark = this.Mark\r\n        this.params.productDetailType = this.product.cType\r\n      } else {\r\n        this.notifyError(this.$t('message.invalidProductInfo'))\r\n        return\r\n      }\r\n    }\r\n    // 初始化指定保全项目下拉\r\n    this.queryAllPa()\r\n    this.params.pdBussDetailType = this.pdBussDetailType\r\n  },\r\n  methods: {\r\n    ruleMakeClosed() {\r\n      this.formulaView.visible = false\r\n    },\r\n    queryAllPa() {\r\n      getAllPa().then(res => {\r\n        this.paOptions = res.data\r\n      })\r\n    },\r\n    showFormula(row) {\r\n      this.formulaView.flag = '1'\r\n      this.formulaView.performType = row.performType\r\n      this.formulaView.ruleCode = row.pdCalcCode\r\n      this.formulaView.visible = true\r\n    },\r\n    associate() {\r\n      if (this.selectedFormula.length === 0) {\r\n        this.notifyError(this.$t('pdgenlPaFormula.pleaseSelectFormula'))\r\n        return\r\n      }\r\n      let map = {\r\n        \"ruleType\": '2',\r\n        \"Mark\": this.Mark,\r\n        \"pdInfo\": this.product,\r\n        \"pdBussDetailType\": this.pdBussDetailType,\r\n        \"pdgenlPdPaInfo\": this.pdPaInfo,\r\n        \"pdtempPdPaInfoVo\": this.pdPaInfo,\r\n        \"pdtempPdCalcVoList\": this.selectedFormula\r\n      }\r\n      connectionRule(this.buildRequestData(map)).then(() => {\r\n        this.notifySuccess(this.$t('rule.associationSuccess'))\r\n        this.$refs.page.reload()\r\n      })\r\n    },\r\n    // 公式动态表格多选框\r\n    handleSelectionChange(val) {\r\n      this.selectedFormula = val\r\n    },\r\n    back() {\r\n      this.$emit('closeDialogFormula')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n"]}]}