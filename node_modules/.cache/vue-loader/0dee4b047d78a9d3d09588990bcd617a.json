{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\objectManagement\\ruleMessageInfoBom\\index.vue?vue&type=style&index=0&id=3a6724bd&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\objectManagement\\ruleMessageInfoBom\\index.vue","mtime":1609847106744},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnYtbW9kYWx7DQogIHotaW5kZXg6IDIwMDA7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwSA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ibrms/objectManagement/ruleMessageInfoBom","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-filter-wraper>\r\n        <el-form style=\"margin: 20px 0 0 0\" label-width=\"auto\">\r\n          <el-row  :gutter=\"10\">\r\n            <cus-col  :span=\"7\">\r\n              <el-form-item :label=\"$t('ruleMessageInfoBom.keyId')\" prop>\r\n                <el-input placeholder clearable v-model=\"params.eq_keyId\" :disabled=\"true\"></el-input>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <cus-col  :span=\"7\">\r\n              <el-form-item :label=\"$t('ruleMessageInfoBom.language')\" prop>\r\n                <cus-select :codetype=\"'language'\" placeholder v-model=\"params.eq_language\"></cus-select>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <cus-col :span=\"7\">\r\n              <el-form-item :label=\"$t('ruleMessageInfoBom.msgType')\" prop>\r\n                <cus-select :codetype=\"'msgtype'\" placeholder v-model=\"params.eq_msgType\" :disabled=\"true\"></cus-select>\r\n              </el-form-item>\r\n            </cus-col>\r\n          </el-row>\r\n        <el-row :gutter=\"10\">\r\n         <cus-col :span=\"21\">\r\n          <div style=\"float: right;\">\r\n          <el-button  size=\"mini\"\r\n            v-waves\r\n            type=\"primary\"\r\n            @click=\"handleSearch\"\r\n            class=\"filter-button\"\r\n            icon=\"el-icon-search\"\r\n          >\r\n            {{\r\n            $t('ruleMessageInfoBom.search') }}\r\n          </el-button>\r\n          <el-button  size=\"mini\"\r\n            v-waves\r\n            type=\"primary\"\r\n            @click=\"handleCreate\"\r\n            icon=\"el-icon-plus\"\r\n            class=\"filter-button\"\r\n          >\r\n            {{\r\n            $t('ruleMessageInfoBom.add') }}\r\n          </el-button>\r\n        </div>\r\n         </cus-col>\r\n        </el-row>\r\n      </el-form>\r\n    </cus-filter-wraper>\r\n    <cus-table-title :label=\"$t('route.multilingual_information')\"></cus-table-title>\r\n    <el-table\r\n      :data=\"configs\"\r\n      size=\"mini\"\r\n      fit\r\n      element-loading-text=\"Loading\"\r\n      border\r\n      highlight-current-row\r\n      align=\"center\"\r\n      class=\"wraper-table\"\r\n    >\r\n      <el-table-column :label=\"$t('table.id')\" prop=\"id\" align=\"center\" sortable type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('ruleMessageInfoBom.language')\" prop=\"language\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('ruleMessageInfoBom.msgType')\" prop=\"msgType\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('ruleMessageInfoBom.msg')\" prop=\"msg\" align=\"center\"></el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('table.actions')\" fixed=\"right\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleUpdate(scope.row)\"\r\n            class=\"filter-button\"\r\n            icon=\"el-icon-edit\"\r\n          ></el-button>\r\n          <cus-del-btn @ok=\"handleDelete(scope.row)\"  style=\"margin-left: 5px;\"/>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination\r\n      ref=\"page\"\r\n      url=\"/rule-message-info-bom/list\"\r\n      :pageSize=\"10\"\r\n      :params=\"params\"\r\n      v-model=\"configs\"\r\n    />\r\n    <!---新增修改dialog---->\r\n    <el-dialog\r\n      :visible.sync=\"dialogVisible\"\r\n      @close=\"dialogVisible=false\"\r\n      append-to-body\r\n      v-dialog-drag width=\"40%\"\r\n    >\r\n      <cus-page-title-back @backTo=\"goBack\" :isDialog=\"true\" :label=\"titleMap[dialogStatus]\"/>\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-position=\"right\"\r\n        label-width=\"150px\"\r\n      >\r\n     <el-row :gutter=\"10\">\r\n       <cus-col :span=\"15\">\r\n        <el-form-item :label=\"$t('ruleMessageInfoBom.language')+':'\" prop=\"language\">\r\n          <cus-select :codetype=\"'language'\" placeholder v-model=\"form.language\"></cus-select>\r\n        </el-form-item>\r\n       </cus-col>\r\n      </el-row>\r\n      <el-row :gutter=\"10\">\r\n        <cus-col :span=\"15\">\r\n          <el-form-item :label=\"$t('ruleMessageInfoBom.msgType')+':'\" prop=\"msgtype\" >\r\n            <cus-select :codetype=\"'msgtype'\" placeholder v-model=\"form.msgType\" :disabled=\"true\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </el-row>\r\n      <el-row :gutter=\"10\">\r\n       <cus-col :span=\"15\">\r\n        <el-form-item :label=\"$t('ruleMessageInfoBom.msg')+':'\" prop=\"msg\">\r\n          <el-input\r\n            :placeholder=\"$t('ruleMessageInfoBom.msg') \"\r\n            :rows=\"5\"\r\n            type=\"textarea\"\r\n            v-model=\"form.msg\"\r\n          />\r\n        </el-form-item>\r\n       </cus-col>\r\n      </el-row>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button  size=\"mini\"\r\n          type=\"primary\"\r\n          @click=\"submitForm\"\r\n        ><i class=\"el-icon-success el-icon--left\"></i>{{ $t('table.save') }}</el-button>\r\n         <el-button  size=\"mini\"\r\n          @click=\"resetForm('dataForm')\"\r\n          type=\"warning\"\r\n        ><i class=\"el-icon-refresh el-icon--left\"></i>{{$t('table.refresh')}}</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  addRuleMessageInfoBom,\r\n  deleteRuleMessageInfoBom,\r\n  updateRuleMessageInfoBom,\r\n  checkBomRuleMessage\r\n} from \"@/api/ibrms/ruleMessageInfoBom\";\r\nimport { closeVisitTag } from \"@/utils/tagsView\";\r\nexport default {\r\n  name: \"ruleMessageInfoBom\",\r\n  data() {\r\n    return {\r\n      //表格数据\r\n      configs: [],\r\n      //查询参数\r\n      params: {\r\n        like_msg: \"\",\r\n        eq_language: \"\",\r\n        eq_msgType: \"\",\r\n        eq_keyId: \"\"\r\n      },\r\n      form: {\r\n        //表单数据与后端实体类对应\r\n        id: \"\", //主键ID\r\n        keyId: \"\",//\r\n        msgType:\"\",\r\n        language:\"\"\r\n      },\r\n      //检验规则\r\n      rules: {\r\n        msg: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"ruleMessageInfoBom.msgMessage\"),\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        language: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"ruleMessageInfoBom.languageMessage\"),\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      },\r\n      dialogVisible: false, //dialog显示还是隐藏\r\n      dialogStatus: \"\", //表单状态是新增还是修改\r\n      titleMap: {\r\n        update: this.$t(\"ruleMessageInfoBom.update\"),\r\n        create: this.$t(\"ruleMessageInfoBom.add\")\r\n      },\r\n      parentPage:\"\"\r\n    };\r\n  },\r\n  props: [\"keyId\", \"msgType\",\"state\"],\r\n  watch: {\r\n        state(newVal){\r\n              this.$refs.page.reload();\r\n        },\r\n        keyId(newVal){\r\n             this.params.eq_keyId = newVal;\r\n             this.$refs.page.reload();\r\n        },\r\n        msgType(newVal){\r\n            this.params.eq_msgType = newVal;\r\n            this.$refs.page.reload();\r\n        }\r\n\r\n    },\r\n  computed: {},\r\n  created() {\r\n    this.params.eq_keyId = this.keyId;\r\n    this.params.eq_msgType = this.msgType;\r\n  },\r\n  methods: {\r\n    handleSearch() {\r\n      this.$refs.page.reload();\r\n    },\r\n    handleCreate() {\r\n      this.resetForm();\r\n      this.form.keyId = this.params.eq_keyId;\r\n      this.form.language =this.params.eq_language;\r\n      this.form.msgType = this.params.eq_msgType;\r\n      this.dialogStatus = \"create\";\r\n      this.dialogVisible = true;\r\n    },\r\n    handleUpdate(row) {\r\n      this.form = Object.assign({}, row);\r\n      this.dialogStatus = \"update\";\r\n      this.dialogVisible = true;\r\n    },\r\n    handleDelete(row) {\r\n      deleteRuleMessageInfoBom(row.id).then(response => {\r\n       var rule_param = {\r\n                          key: row.keyId,\r\n                          type:row.msgType\r\n                        };\r\n        this.$store.dispatch(\"ruleMessage/deleteRuleMessage\",rule_param);\r\n        this.handleSearch();\r\n        this.notifySuccess(response.message);\r\n        this.dialogVisible = false;\r\n      });\r\n    },\r\n  async submitForm() {\r\n     if(!this.form.id && (await checkBomRuleMessage(this.buildRequestData(this.form))).data!= null){\r\n                    this.$message.error(this.$t(\"ruleMessageInfoBom.ruleMessageInfoBomMessage\"));\r\n                    return false;\r\n        }\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n          let back;\r\n          if (this.form.id) {\r\n            back = updateRuleMessageInfoBom(this.form);\r\n          } else {\r\n            back = addRuleMessageInfoBom(this.form);\r\n          }\r\n          back.then(response => {\r\n            if (response.code == 200) {\r\n                this.$refs.page.reload();\r\n                 var rule_param = {\r\n                              key:this.form.keyId,\r\n                              type:this.form.msgType\r\n                             };\r\n                this.$store.dispatch(\"ruleMessage/updateRuleMessage\",rule_param);\r\n                this.notifySuccess(response.message);\r\n                this.dialogVisible = false;\r\n            } else {\r\n              this.$alert(response.message);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n         //表单数据与后端实体类对应\r\n        id: \"\", //主键ID\r\n        keyId: \"\",//\r\n        msgType:\"\",\r\n        language:\"\"\r\n      };\r\n    },\r\n    goBack(){\r\n      this.dialogVisible=false;\r\n    },\r\n    goBackInfo(){\r\n       //跳转到父页面\r\n       closeVisitTag();\r\n       console.log(\"parentPage\",this.parentPage);\r\n       this.$router.push({name:this.parentPage});\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-modal{\r\n  z-index: 2000;\r\n}\r\n</style>\r\n"]}]}