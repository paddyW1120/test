{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\product-audit\\productAudit\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\product-audit\\productAudit\\index.vue","mtime":1609847106617},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBhZGRBdWRpdEluZm9EYXRhLA0KICBmaW5kTm9kZUZvcm11bGFMaXN0LA0KICBmaW5kTm9kZVJ1bGVzTGlzdCwNCiAgcXVlcnlSZXZpc2VEYXRhLA0KICBxdWVyeVN0b3ANCn0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL3BkYXVkaXRpbmZvIjsNCmltcG9ydCBwZEZpbGVSZWxlYXNlIGZyb20gIkAvdmlld3MvY29tbW9kaXR5LWF1ZGl0L3Byb2R1Y3QtYXVkaXQvcGRGaWxlUmVsZWFzZSINCmltcG9ydCBwZFRlc3RSZXN1bHQgZnJvbSAiQC92aWV3cy9jb21tb2RpdHktYXVkaXQvcHJvZHVjdC1hdWRpdC9wZFRlc3RSZXN1bHQiDQppbXBvcnQge2Nsb3NlVmlzaXRUYWd9IGZyb20gIkAvdXRpbHMvdGFnc1ZpZXciDQoNCmxldCBfdGhpczsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3Byb2R1Y3RBdWRpdCcsDQogIGZpbHRlcnM6IHsNCiAgICBmaWx0ZXJfcGROb2RlQ29kZSh2YWwpIHsNCiAgICAgIGxldCByZXR1cm5UZXh0ID0gJyc7DQogICAgICBzd2l0Y2ggKHZhbCkgew0KICAgICAgICBjYXNlICdwcm9kdWN0UnVsZUZsYWcnOg0KICAgICAgICAgIHJldHVyblRleHQgPSAn5Lqn5ZOB6KeE5YiZ6K6i5q2jJzsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncHJvZHVjdEZvcm11bGFGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgeWFrOW8j+iuouatoyc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RJbmZvRmxhZyc6DQogICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4HmoYbmnrblrprkuYknOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdwcm9kdWN0RGlzdHJpYnV0aW9uRmxhZyc6DQogICAgICAgICAgcmV0dXJuVGV4dCA9ICfkuqflk4HplIDllK7kv6Hmga8nOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdwcm9kdWN0Q292ZXJGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgeaJv+S/neS/oeaBryc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgeaguOS/neS/oeaBryc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RQcmVzZXJ2YXRpb25GbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgeS/neWFqOS/oeaBryc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RIZVBlaUZsYWcnOg0KICAgICAgICAgIHJldHVyblRleHQgPSAn5Lqn5ZOB5qC46LWU5L+h5oGvJzsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncHJvZHVjdFJlbmV3YWxGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gJ+S6p+WTgee7reacn+e7reS/neS/oeaBryc7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICByZXR1cm4gcmV0dXJuVGV4dDsNCiAgICB9LA0KICAgIGZpbHRlcl9wZEF1ZGl0Q29uY3RoaXMoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZEF1ZGl0Q29uYycsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfcGRJc0NhbmNlbERlZmluaXRpb24oY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdjYW5jZWxEZWZpbml0aW9uJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZFJ1bGVUeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzTW9kdWxlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZEZvcm11bGFUeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzTW9kdWxlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZFJ1bGVEZXRhaWxzKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzRGV0YWlsQ2xhc3MnLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX3BkRm9ybXVsYURldGFpbHMoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdydWxlQnVzaW5lc3NEZXRhaWxDbGFzcycsIGNvZGUpDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIF90aGlzID0gdGhpczsNCiAgICByZXR1cm4gew0KICAgICAgZGlhbG9nU2hvdzogZmFsc2UsDQogICAgICBkaWFsb2dUaXRsZTogJycsDQogICAgICBkaWFsb2dDb21wb25lbnQ6ICcnLA0KICAgICAgbm9kZU9wdGlvbnM6IFsNCiAgICAgICAgeydrZXknOiAncHJvZHVjdEluZm9GbGFnJywgJ2xhYmVsJzogJ+S6p+WTgeahhuaetuWumuS5iSd9LA0KICAgICAgICB7J2tleSc6ICdwcm9kdWN0RGlzdHJpYnV0aW9uRmxhZycsICdsYWJlbCc6ICfkuqflk4HplIDllK7kv6Hmga8nfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdENvdmVyRmxhZycsICdsYWJlbCc6ICfkuqflk4Hmib/kv53kv6Hmga8nfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5qC45L+d5L+h5oGvJ30sDQogICAgICAgIHsna2V5JzogJ3Byb2R1Y3RSZW5ld2FsRmxhZycsICdsYWJlbCc6ICfkuqflk4Hnu63mnJ/nu63kv53kv6Hmga8nfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdFByZXNlcnZhdGlvbkZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5L+d5YWo5L+h5oGvJ30sDQogICAgICAgIHsna2V5JzogJ3Byb2R1Y3RIZVBlaUZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5qC46LWU5L+h5oGvJ30sDQogICAgICAgIHsna2V5JzogJ3Byb2R1Y3RSdWxlRmxhZycsICdsYWJlbCc6ICfkuqflk4Hop4TliJnorqLmraMnfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdEZvcm11bGFGbGFnJywgJ2xhYmVsJzogJ+S6p+WTgeWFrOW8j+iuouatoyd9XSwNCiAgICAgIHJldHVybkZ1bmN0aW9uUG9pbnRzOiBbXSwNCiAgICAgIHBkRmlsZUF1ZGl0RGF0YTogW10sDQogICAgICBwZEluZm86IHt9LA0KICAgICAgYXVkaXRGb3JtOiB7DQogICAgICAgIHN0b3BEYXRlOiAnJywNCiAgICAgICAgc3RvcFJlYXNvbjogJycsDQogICAgICB9LA0KICAgICAgLy/lhoXlrrnlrprkuYnooajmoLwNCiAgICAgIHBkVGFibGVGb3JtOiB7DQogICAgICAgIHBkVHlwZTogJzEnLA0KICAgICAgICBwZEluZm9JZDogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkQXVkaXROb3Rlc0luZm9JZDogJycsDQogICAgICAgIHBkRGVmaW5lQ29udGVudDogW10sDQogICAgICAgIHBkQXVkaXRDb25jdGhpczogJycsDQogICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnJywNCiAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycNCiAgICAgIH0sDQogICAgICBydWxlVGFibGVGb3JtOiB7DQogICAgICAgIHBkVHlwZTogJzEnLA0KICAgICAgICBwZEluZm9JZDogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkQXVkaXROb3Rlc0luZm9JZDogJycsDQogICAgICAgIHBkRGVmaW5lQ29udGVudDogJycsDQogICAgICAgIHBkUmV2aXNlVHlwZTogJycsDQogICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiBbXSwNCiAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6ICcnLA0KICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogJycsDQogICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogJycsDQogICAgICAgIHBkQXVkaXRDb25jdGhpczogJycsDQogICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnJywNCiAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycNCiAgICAgIH0sDQogICAgICBmb3JtdWxhVGFibGVGb3JtOiB7DQogICAgICAgIHBkVHlwZTogJzEnLA0KICAgICAgICBwZEluZm9JZDogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkQXVkaXROb3Rlc0luZm9JZDogJycsDQogICAgICAgIHBkRGVmaW5lQ29udGVudDogJycsDQogICAgICAgIHBkUmV2aXNlVHlwZTogJycsDQogICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiBbXSwNCiAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6ICcnLA0KICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogJycsDQogICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogJycsDQogICAgICAgIHBkQXVkaXRDb25jdGhpczogJycsDQogICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnJywNCiAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycNCiAgICAgIH0sDQogICAgICBwZEF1ZGl0SW5mbzogew0KICAgICAgICBwZFR5cGU6ICcxJywNCiAgICAgICAgcGRWZXJJZDogJycsDQogICAgICAgIHBkSW5mb0lkOiAnJywNCiAgICAgICAgcGRDb2RlOiAnJywNCiAgICAgICAgcGRBdWRpdENvbmM6ICcnLA0KICAgICAgICBwZEF1ZGl0U3RhZmY6ICcnLA0KICAgICAgICBwZEF1ZGl0RGF0ZTogJycsDQogICAgICAgIHBkSXNQb3N0UmV0dXJuOiAnJywNCiAgICAgICAgcGRJc1Jldmlld1JldHVybjogJycsDQogICAgICAgIHBkQXVkaXRUaW1lczogJycsDQogICAgICAgIHBkUmV0dXJuVGltZXM6ICcnLA0KICAgICAgICBwZFJlbGVUeXBlOiAnJywNCiAgICAgICAgcGRSZWxlQ29udGVudDogJycsDQogICAgICAgIHBkUmVsZUNvbnRkZXQ6IFtdDQogICAgICB9LA0KICAgICAgcGRBdWRpdERldGFpbEluZm86IHsNCiAgICAgICAgcGRUeXBlOiAnMScsDQogICAgICAgIHBkSW5mb0lkOiAnJywNCiAgICAgICAgcGRDb2RlOiAnJywNCiAgICAgICAgcGRBdWRpdE9yZGVyTnVtOiAnJywNCiAgICAgICAgcGRBdWRpdEluZm9JZDogJycsDQogICAgICAgIHBkQXVkaXRDb25jOiAnJywNCiAgICAgICAgcGRBdWRpdFN0YWZmOiAnJywNCiAgICAgICAgcGRBdWRpdERhdGU6ICcnLA0KICAgICAgICBwZEF1ZGl0SWRlYTogJycsDQogICAgICAgIHBkUmV0dXJuRnVuY05vZGU6IFtdLA0KICAgICAgICBwZFJlbGVUeXBlOiAnJywNCiAgICAgICAgcGRSZWxlQ29udGVudDogJycsDQogICAgICAgIHBkUmVsZUNvbnRkZXQ6IFtdDQogICAgICB9LA0KICAgICAgLy/kuqflk4HlvaLmgIENCiAgICAgIHBkQXVkaXRUeXBlOiAnJywNCiAgICAgIHBkUmV2aXNlVHlwZTogJycsDQogICAgICBwZFJldmlzZURhdGU6ICcnLA0KICAgICAgcGRSZXR1cm5GdW5jQ29kZTogJycsDQogICAgICBwcm9kdWN0Tm9kZUxpc3Q6IFtdLA0KICAgICAgcnVsZU5vZGVMaXN0OiBbXSwNCiAgICAgIGZvcm11bGFOb2RlTGlzdDogW10sDQogICAgICBzaG93QXVkaXREYXRhRmxhZzogJ04nLA0KICAgICAgZGlhbG9nVGFibGVWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTE6IGZhbHNlLA0KICAgICAgc2hvd0ZpbGVSZWxlYXNlRmxhZzogZmFsc2UsDQogICAgICBzaG93UnVsZVRhYmxlRmxhZzogZmFsc2UsDQogICAgICBzaG93Rm9ybXVsYVRhYmxlRmxhZzogZmFsc2UsDQogICAgICBzaG93VGVzdFJlc3VsdEZsYWc6IGZhbHNlLA0KICAgICAgcGRVcGRhdGVGbGFnOiBmYWxzZSwNCiAgICAgIHJ1bGVVcGRhdGVGbGFnOiBmYWxzZSwNCiAgICAgIGZvcm11bGFVcGRhdGVGbGFnOiBmYWxzZSwNCiAgICAgIGRhdGFTZWxlY3Q6IGZhbHNlLA0KICAgICAgcnVsZVNlbGVjdDogZmFsc2UsDQogICAgICBmb3JtdWxhU2VsZWN0OiBmYWxzZSwNCiAgICAgIHNob3dOZWdhdGl2ZUZsYWc6IGZhbHNlLA0KICAgICAgcXVpY2tpY29uX2F1ZGl0OiAiZWwtaWNvbi1hcnJvdy1yaWdodCIsDQogICAgICAvL+ihqOagvOaVsOaNrg0KICAgICAgY29uZmlnczQ6IFtdLA0KICAgICAgY29uZmlnczU6IFtdLA0KICAgICAgY29uZmlnczY6IFtdLA0KICAgICAgY29uZmlnczc6IFtdLA0KICAgICAgY29uZmlnczg6IFtdLA0KICAgICAgY2hlY2tCb3hEYXRhOiBbXSwNCiAgICAgIGNoZWNrUnVsZURhdGE6IFtdLA0KICAgICAgY2hlY2tGb3JtdWxhRGF0YTogW10sDQogICAgICAvL+afpeivouWPguaVsA0KICAgICAgcGFyYW1zOiB7fSwNCiAgICAgIC8v5qOA6aqM6KeE5YiZDQogICAgICBydWxlczoge30sDQogICAgICBwZFRhYmxlRm9ybV9ydWxlczogew0KICAgICAgICBwZERlZmluZUNvbnRlbnQ6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkRGVmaW5lQ29udGVudCcpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkQXVkaXRDb25jdGhpcycpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wbGVhc2VJbnB1dCcpICsgdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkTm90UGFzc09waW5pb24nKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgfV0NCiAgICAgIH0sDQogICAgICBydWxlVGFibGVGb3JtX3J1bGVzOiB7DQogICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wbGVhc2VTZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wZERlZmluZUNvbnRlbnQnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XSwNCiAgICAgICAgcGRBdWRpdENvbmN0aGlzOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wbGVhc2VTZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wZEF1ZGl0Q29uY3RoaXMnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XSwNCiAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGxlYXNlSW5wdXQnKSArIHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wZE5vdFBhc3NPcGluaW9uJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgIH1dDQogICAgICB9LA0KICAgICAgZm9ybXVsYVRhYmxlRm9ybV9ydWxlczogew0KICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGxlYXNlU2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGREZWZpbmVDb250ZW50JyksDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgfV0sDQogICAgICAgIHBkQXVkaXRDb25jdGhpczogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGxlYXNlU2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGRBdWRpdENvbmN0aGlzJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgfV0sDQogICAgICAgIHBkTm90UGFzc09waW5pb246IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBsZWFzZUlucHV0JykgKyB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGROb3RQYXNzT3BpbmlvbicpLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XQ0KICAgICAgfSwNCiAgICAgIGF1ZGl0UnVsZXM6IHsNCiAgICAgICAgcGRBdWRpdENvbmM6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkQXVkaXRDb25jJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgfV0sDQogICAgICAgIHBkUmVsZVR5cGU6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkUmVsZVR5cGUnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XSwNCiAgICAgICAgcGRBdWRpdElkZWE6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBsZWFzZUlucHV0JykgKyB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGRBdWRpdElkZWEnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgfV0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgJ2NvbmZpZ3M2JygpIHsNCiAgICAgIHRoaXMuaXNTaG93TmVnYXRpdmUodGhpcy5jb25maWdzNikNCiAgICB9LA0KICAgICdjb25maWdzNycoKSB7DQogICAgICB0aGlzLmlzU2hvd05lZ2F0aXZlKHRoaXMuY29uZmlnczcpDQogICAgfSwNCiAgICAnY29uZmlnczgnKCkgew0KICAgICAgdGhpcy5pc1Nob3dOZWdhdGl2ZSh0aGlzLmNvbmZpZ3M4KQ0KICAgIH0sDQogICAgLy/kuqflk4HlrprkuYnlhoXlrrkNCiAgICAncGRUYWJsZUZvcm0ucGREZWZpbmVDb250ZW50JyhzZWxlY3RlZENvZGVzKSB7DQogICAgICBpZiAoc2VsZWN0ZWRDb2Rlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgZm9yIChjb25zdCBwZE5vZGUgb2YgdGhpcy5wcm9kdWN0Tm9kZUxpc3QpIHsNCiAgICAgICAgICBwZE5vZGUuZGlzYWJsZWQgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodGhpcy5fLmluY2x1ZGVzKHNlbGVjdGVkQ29kZXMsICcwMDAwMDAnKSkgew0KICAgICAgICAgIGZvciAoY29uc3QgcGROb2RlIG9mIHRoaXMucHJvZHVjdE5vZGVMaXN0KSB7DQogICAgICAgICAgICBwZE5vZGUuZGlzYWJsZWQgPSBwZE5vZGUudmFsdWUgIT09ICcwMDAwMDAnDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAoY29uc3QgcGROb2RlIG9mIHRoaXMucHJvZHVjdE5vZGVMaXN0KSB7DQogICAgICAgICAgICBwZE5vZGUuZGlzYWJsZWQgPSBwZE5vZGUudmFsdWUgPT09ICcwMDAwMDAnDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvL+S6p+WTgeWPkeW4g+WuoeaguOe7k+iuug0KICAgICdwZFRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMnKCkgew0KICAgICAgY29uc3QgdmFsID0gdGhpcy5wZFRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXM7DQogICAgICBpZiAodmFsID09ICdZJykgew0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOw0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJzsNCiAgICAgICAgdGhpcy5wZFRhYmxlRm9ybV9ydWxlcy5wZE5vdFBhc3NPcGluaW9uID0gW3tyZXF1aXJlZDogZmFsc2V9XQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5wZFRhYmxlRm9ybV9ydWxlcy5wZE5vdFBhc3NPcGluaW9uID0gW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGROb3RQYXNzT3BpbmlvbicpLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/kuqflk4Hop4TliJnorqLmraPlhoXlrrkNCiAgICAncnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZScoc2VsZWN0ZWRDb2Rlcykgew0KICAgICAgaWYgKHNlbGVjdGVkQ29kZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGZvciAoY29uc3QgcnVsZU5vZGUgb2YgdGhpcy5ydWxlTm9kZUxpc3QpIHsNCiAgICAgICAgICBydWxlTm9kZS5kaXNhYmxlZCA9IGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBjb2RlTGlzdCA9IFtdOw0KICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2Ygc2VsZWN0ZWRDb2Rlcykgew0KICAgICAgICAgIGNvZGVMaXN0LnB1c2goY29kZS52YWx1ZSkNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5fLmluY2x1ZGVzKGNvZGVMaXN0LCAnMDAwJykpIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGVOb2RlIG9mIHRoaXMucnVsZU5vZGVMaXN0KSB7DQogICAgICAgICAgICBydWxlTm9kZS5kaXNhYmxlZCA9IHJ1bGVOb2RlLnZhbHVlICE9PSAnMDAwJw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGVOb2RlIG9mIHRoaXMucnVsZU5vZGVMaXN0KSB7DQogICAgICAgICAgICBydWxlTm9kZS5kaXNhYmxlZCA9IHJ1bGVOb2RlLnZhbHVlID09PSAnMDAwJw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/kuqflk4Hop4TliJnorqLmraPlrqHmoLjmhI/op4ENCiAgICAncnVsZVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMnKCkgew0KICAgICAgY29uc3QgdmFsID0gdGhpcy5ydWxlVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpczsNCiAgICAgIGlmICh2YWwgPT0gJ1knKSB7DQogICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsNCiAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJzsNCiAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtX3J1bGVzLnBkTm90UGFzc09waW5pb24gPSBbe3JlcXVpcmVkOiBmYWxzZX1dDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm1fcnVsZXMucGROb3RQYXNzT3BpbmlvbiA9IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkTm90UGFzc09waW5pb24nKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgfV0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5Lqn5ZOB5YWs5byP6K6i5q2j5YWs5byPDQogICAgJ2Zvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUnKHNlbGVjdGVkQ29kZXMpIHsNCiAgICAgIGlmIChzZWxlY3RlZENvZGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBmb3IgKGNvbnN0IGZvcm11bGFOb2RlIG9mIHRoaXMuZm9ybXVsYU5vZGVMaXN0KSB7DQogICAgICAgICAgZm9ybXVsYU5vZGUuZGlzYWJsZWQgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBsZXQgY29kZUxpc3QgPSBbXTsNCiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHNlbGVjdGVkQ29kZXMpIHsNCiAgICAgICAgICBjb2RlTGlzdC5wdXNoKGNvZGUudmFsdWUpDQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuXy5pbmNsdWRlcyhjb2RlTGlzdCwgJzAwMCcpKSB7DQogICAgICAgICAgZm9yIChjb25zdCBmb3JtdWxhTm9kZSBvZiB0aGlzLmZvcm11bGFOb2RlTGlzdCkgew0KICAgICAgICAgICAgZm9ybXVsYU5vZGUuZGlzYWJsZWQgPSBmb3JtdWxhTm9kZS52YWx1ZSAhPT0gJzAwMCcNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZm9yIChjb25zdCBmb3JtdWxhTm9kZSBvZiB0aGlzLmZvcm11bGFOb2RlTGlzdCkgew0KICAgICAgICAgICAgZm9ybXVsYU5vZGUuZGlzYWJsZWQgPSBmb3JtdWxhTm9kZS52YWx1ZSA9PT0gJzAwMCcNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5Lqn5ZOB5YWs5byP6K6i5q2j5a6h5qC457uT6K66DQogICAgJ2Zvcm11bGFUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzJygpIHsNCiAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXM7DQogICAgICAvL+WuoeaguOmAmui/hw0KICAgICAgaWYgKHZhbCA9PSAnWScpIHsNCiAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOw0KICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOw0KICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm1fcnVsZXMucGROb3RQYXNzT3BpbmlvbiA9IFt7cmVxdWlyZWQ6IGZhbHNlfV0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybV9ydWxlcy5wZE5vdFBhc3NPcGluaW9uID0gW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGROb3RQYXNzT3BpbmlvbicpLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/mlbTkvZPlrqHmoLjnu5PorroNCiAgICAncGRBdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMnKCkgew0KICAgICAgY29uc3QgdmFsID0gdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZEF1ZGl0Q29uYzsNCiAgICAgIGlmICh2YWwgPT0gJ1knKSB7DQogICAgICAgIGlmICh0aGlzLnBkQXVkaXRUeXBlID09ICczJykgew0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIGlmICgodGhpcy5wZEF1ZGl0VHlwZSA9PT0gJzEnIHx8IHRoaXMucGRSZXZpc2VUeXBlID09PSAnMScpKSB7DQogICAgICAgICAgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZW50ID0gJzEnOw0KICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3M2Lmxlbmd0aCAhPSB0aGlzLnByb2R1Y3ROb2RlTGlzdC5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5jb25maXJtUGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwNCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IFtdOw0KICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBkTm9kZSBvZiB0aGlzLmNvbmZpZ3M2KSB7DQogICAgICAgICAgICAgICAgbm9kZUxpc3QucHVzaChwZE5vZGUucGREZWZpbmVDb250ZW50KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5wcm9kdWN0Tm9kZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLnByb2R1Y3ROb2RlTGlzdFtpXS52YWx1ZTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3M2LnB1c2goew0KICAgICAgICAgICAgICAgICAgICBwZERlZmluZUNvbnRlbnQ6IG5vZGVOYW1lLA0KICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdZJywNCiAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246ICdOJywNCiAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMuYXVkaXREYXRhKCkNCiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5hdWRpdERhdGEoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5hdWRpdERhdGEoKQ0KICAgICAgICAgICAgaWYgKHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRSZWxlQ29udGRldC5sZW5ndGggPCB0aGlzLmNvbmZpZ3M2Lmxlbmd0aCkgew0KICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5jb25maXJtUGFzc05vdERlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCg0KICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQoNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy/kuqflk4Hop4TliJnlhazlvI/orqLmraMNCiAgICAgICAgaWYgKHRoaXMucGRSZXZpc2VUeXBlID09PSAnMCcpIHsNCiAgICAgICAgICB0aGlzLnBkQXVkaXREZXRhaWxJbmZvLnBkUmVsZUNvbnRlbnQgPSAnMic7DQogICAgICAgICAgaWYgKHRoaXMuc2hvd1J1bGVUYWJsZUZsYWcgJiYgdGhpcy5zaG93Rm9ybXVsYVRhYmxlRmxhZykgew0KICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnczcubGVuZ3RoICE9IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aCAtIDEgfHwgdGhpcy5jb25maWdzOC5sZW5ndGggIT0gdGhpcy5mb3JtdWxhTm9kZUxpc3QubGVuZ3RoIC0gMSkgew0KICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5jb25maXJtUGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgbm9kZUxpc3QxID0gW107DQogICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0MiA9IFtdOw0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcnVsZU5vZGUgb2YgdGhpcy5jb25maWdzNykgew0KICAgICAgICAgICAgICAgICAgbm9kZUxpc3QxLnB1c2gocnVsZU5vZGUucGRGb3JtdWxhUnVsZUNvZGUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZm9ybXVhbE5vZGUgb2YgdGhpcy5jb25maWdzOCkgew0KICAgICAgICAgICAgICAgICAgbm9kZUxpc3QyLnB1c2goZm9ybXVhbE5vZGUucGRGb3JtdWxhUnVsZUNvZGUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ydWxlTm9kZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QxLCBub2RlTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzNy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcxJywNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0udmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwNCiAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdZJywNCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLA0KICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICcnDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5mb3JtdWxhTm9kZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QyLCBub2RlTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzOC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcyJywNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0udmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwNCiAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdZJywNCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLA0KICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICcnDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRSdWxlRGF0YSgpOw0KICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRGb3JtdWxhRGF0YSgpDQogICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0UnVsZURhdGEoKTsNCiAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0Rm9ybXVsYURhdGEoKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5hdWRpdFJ1bGVEYXRhKCk7DQogICAgICAgICAgICAgIHRoaXMuYXVkaXRGb3JtdWxhRGF0YSgpOw0KICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWdzNC5sZW5ndGggPCB0aGlzLmNvbmZpZ3M3Lmxlbmd0aCB8fCB0aGlzLmNvbmZpZ3M1Lmxlbmd0aCA8IHRoaXMuY29uZmlnczgubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0QXVkaXQuY29uZmlybVBhc3NOb3REZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCg0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCg0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1J1bGVUYWJsZUZsYWcpIHsNCiAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnczcubGVuZ3RoICE9IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5jb25maXJtUGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksDQogICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0ID0gW107DQogICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBkTm9kZSBvZiB0aGlzLmNvbmZpZ3M3KSB7DQogICAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2gocGROb2RlLnBkRm9ybXVsYVJ1bGVDb2RlKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLnJ1bGVOb2RlTGlzdFtpXS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QsIG5vZGVOYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnczcucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcxJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnWScsDQogICAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycNCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0UnVsZURhdGEoKQ0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRSdWxlRGF0YSgpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0UnVsZURhdGEoKTsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWdzNC5sZW5ndGggPCB0aGlzLmNvbmZpZ3M3Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0QXVkaXQuY29uZmlybVBhc3NOb3REZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksDQogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gew0KDQogICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQoNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5zaG93Rm9ybXVsYVRhYmxlRmxhZykgew0KICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWdzOC5sZW5ndGggIT0gdGhpcy5mb3JtdWxhTm9kZUxpc3QubGVuZ3RoIC0gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgncHJvZHVjdEF1ZGl0LmNvbmZpcm1QYXNzRGVmaW5pdGlvbicpLCB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS50aXAnKSwgew0KICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwNCiAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICBsZXQgbm9kZUxpc3QgPSBbXTsNCiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGROb2RlIG9mIHRoaXMuY29uZmlnczgpIHsNCiAgICAgICAgICAgICAgICAgICAgbm9kZUxpc3QucHVzaChwZE5vZGUucGRGb3JtdWxhUnVsZUNvZGUpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzOC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzInLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsDQogICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdZJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsDQogICAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAnJw0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRGb3JtdWxhRGF0YSgpDQogICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpdEZvcm11bGFEYXRhKCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRGb3JtdWxhRGF0YSgpOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3M1Lmxlbmd0aCA8IHRoaXMuY29uZmlnczgubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5jb25maXJtUGFzc05vdERlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwNCiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQoNCiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCg0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8v5a6h5qC45LiN6YCa6L+HDQogICAgICBpZiAodmFsID09ICdOJykgew0KICAgICAgICBpZiAodGhpcy5wZEF1ZGl0VHlwZSA9PSAnMycpIHsNCiAgICAgICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzID0gWyLkuqflk4HlgZzllK4iXTsNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICBpZiAoKHRoaXMucGRBdWRpdFR5cGUgPT09ICcxJyB8fCB0aGlzLnBkUmV2aXNlVHlwZSA9PT0gJzEnKSkgew0KICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3M2Lmxlbmd0aCAhPSB0aGlzLnByb2R1Y3ROb2RlTGlzdC5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5jb25maXJtTm90UGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwNCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IFtdOw0KICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBkTm9kZSBvZiB0aGlzLmNvbmZpZ3M2KSB7DQogICAgICAgICAgICAgICAgbm9kZUxpc3QucHVzaChwZE5vZGUucGREZWZpbmVDb250ZW50KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5wcm9kdWN0Tm9kZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLnByb2R1Y3ROb2RlTGlzdFtpXS52YWx1ZTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3M2LnB1c2goew0KICAgICAgICAgICAgICAgICAgICBwZERlZmluZUNvbnRlbnQ6IG5vZGVOYW1lLA0KICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdOJywNCiAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246ICdOJywNCiAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJ+WuoeaguOS4jemAmui/hycNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMucmVCYWNrKCkNCiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5yZUJhY2soKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5yZUJhY2soKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvL+S6p+WTgeinhOWImeWFrOW8j+iuouatow0KICAgICAgICBpZiAodGhpcy5wZFJldmlzZVR5cGUgPT09ICcwJykgew0KICAgICAgICAgIGlmICh0aGlzLnNob3dSdWxlVGFibGVGbGFnICYmIHRoaXMuc2hvd0Zvcm11bGFUYWJsZUZsYWcpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3M3Lmxlbmd0aCAhPSB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGggLSAxIHx8IHRoaXMuY29uZmlnczgubGVuZ3RoICE9IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0QXVkaXQuY29uZmlybU5vdFBhc3NEZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwNCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0MSA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdDIgPSBbXTsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGVOb2RlIG9mIHRoaXMuY29uZmlnczcpIHsNCiAgICAgICAgICAgICAgICAgIG5vZGVMaXN0MS5wdXNoKHJ1bGVOb2RlLnBkRm9ybXVsYVJ1bGVDb2RlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZvcm11bGFOb2RlIG9mIHRoaXMuY29uZmlnczgpIHsNCiAgICAgICAgICAgICAgICAgIG5vZGVMaXN0Mi5wdXNoKGZvcm11bGFOb2RlLnBkRm9ybXVsYVJ1bGVDb2RlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLnJ1bGVOb2RlTGlzdFtpXS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0MSwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnczcucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMScsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5ydWxlTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURldGFpbHMsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsDQogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnTicsDQogICAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246ICdOJywNCiAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAn5a6h5qC45LiN6YCa6L+HJw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0Miwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnczgucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMicsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURldGFpbHMsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsDQogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnTicsDQogICAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246ICdOJywNCiAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAn5a6h5qC45LiN6YCa6L+HJw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnJ1bGVPckZvcm11bGFCYWNrKCkNCiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucnVsZU9yRm9ybXVsYUJhY2soKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5ydWxlT3JGb3JtdWxhQmFjaygpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnNob3dSdWxlVGFibGVGbGFnKSB7DQogICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3M3Lmxlbmd0aCAhPSB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0QXVkaXQuY29uZmlybU5vdFBhc3NEZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IFtdOw0KICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBydWxlTm9kZSBvZiB0aGlzLmNvbmZpZ3M3KSB7DQogICAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2gocnVsZU5vZGUucGRGb3JtdWxhUnVsZUNvZGUpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzNy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsDQogICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdOJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsDQogICAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAn5a6h5qC45LiN6YCa6L+HJw0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIHRoaXMucnVsZU9yRm9ybXVsYUJhY2soKQ0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMucnVsZU9yRm9ybXVsYUJhY2soKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlT3JGb3JtdWxhQmFjaygpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnNob3dGb3JtdWxhVGFibGVGbGFnKSB7DQogICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3M4Lmxlbmd0aCAhPSB0aGlzLmZvcm11bGFOb2RlTGlzdC5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0QXVkaXQuY29uZmlybU5vdFBhc3NEZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IFtdOw0KICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmb3JtdWxhTm9kZSBvZiB0aGlzLmNvbmZpZ3M4KSB7DQogICAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2goZm9ybXVsYU5vZGUucGRGb3JtdWxhUnVsZUNvZGUpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgbm9kZU5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzOC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzInLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsDQogICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdOJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsDQogICAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAn5a6h5qC45LiN6YCa6L+HJw0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIHRoaXMucnVsZU9yRm9ybXVsYUJhY2soKQ0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMucnVsZU9yRm9ybXVsYUJhY2soKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlT3JGb3JtdWxhQmFjaygpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7fSwNCiAgY29tcG9uZW50czoge3BkRmlsZVJlbGVhc2UsIHBkVGVzdFJlc3VsdH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5wZEluZm8gPSB0aGlzLmdldFBkRGF0YSgpOw0KICAgIHRoaXMucGRBdWRpdFR5cGUgPSB0aGlzLnBkSW5mby5kZWZUeXBlOw0KICAgIHRoaXMucGRBdWRpdEluZm8ucGRDb2RlID0gdGhpcy5wZEluZm8ucGRDb2RlOw0KICAgIHRoaXMucGRBdWRpdEluZm8ucGRJbmZvSWQgPSB0aGlzLnBkSW5mby5pZDsNCiAgICB0aGlzLnBkQXVkaXRJbmZvLnBkVmVySWQgPSB0aGlzLnBkSW5mby5wZFZlcklkOw0KICAgIHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRDb2RlID0gdGhpcy5wZEluZm8ucGRDb2RlOw0KICAgIHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRJbmZvSWQgPSB0aGlzLnBkSW5mby5pZDsNCiAgICBpZiAodGhpcy5wZEF1ZGl0VHlwZSA9PSAnMScpIHsNCiAgICAgIHRoaXMucXVlcnlQZEluZm9EYXRhKCkNCiAgICB9DQogICAgaWYgKHRoaXMucGRBdWRpdFR5cGUgPT0gJzInKSB7DQogICAgICB0aGlzLnF1ZXJ5UmV2aXNlRGF0YSgpDQogICAgfQ0KICAgIGlmICh0aGlzLnBkQXVkaXRUeXBlID09ICczJykgew0KICAgICAgdGhpcy5xdWVyeVN0b3AoKQ0KICAgIH0NCiAgICB0aGlzLmNhY2hlU3RyRGF0YSgncGRGaWxlQXVkaXRUYWJsZWJhY2snLCBudWxsKTsNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHF1ZXJ5UGRJbmZvRGF0YSgpIHsNCiAgICAgIHRoaXMucHJvZHVjdE5vZGVMaXN0ID0gWw0KICAgICAgICB7J2tleSc6ICcwMDAwMDAnLCAndmFsdWUnOiAnMDAwMDAwJywgJ2xhYmVsJzogJ+WFqOmDqCcsICdkaXNhYmxlZCc6IGZhbHNlfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdEluZm9GbGFnJywgJ3ZhbHVlJzogJ3Byb2R1Y3RJbmZvRmxhZycsICdsYWJlbCc6ICfkuqflk4HmoYbmnrblrprkuYknLCAnZGlzYWJsZWQnOiBmYWxzZX0sDQogICAgICAgIHsna2V5JzogJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJywgJ3ZhbHVlJzogJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJywgJ2xhYmVsJzogJ+S6p+WTgemUgOWUruS/oeaBrycsICdkaXNhYmxlZCc6IGZhbHNlfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdENvdmVyRmxhZycsICd2YWx1ZSc6ICdwcm9kdWN0Q292ZXJGbGFnJywgJ2xhYmVsJzogJ+S6p+WTgeaJv+S/neS/oeaBrycsICdkaXNhYmxlZCc6IGZhbHNlfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLCAndmFsdWUnOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5qC45L+d5L+h5oGvJywgJ2Rpc2FibGVkJzogZmFsc2V9LA0KICAgICAgICB7J2tleSc6ICdwcm9kdWN0UmVuZXdhbEZsYWcnLCAndmFsdWUnOiAncHJvZHVjdFJlbmV3YWxGbGFnJywgJ2xhYmVsJzogJ+S6p+WTgee7reacn+e7reS/neS/oeaBrycsICdkaXNhYmxlZCc6IGZhbHNlfSwNCiAgICAgICAgeydrZXknOiAncHJvZHVjdFByZXNlcnZhdGlvbkZsYWcnLCAndmFsdWUnOiAncHJvZHVjdFByZXNlcnZhdGlvbkZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5L+d5YWo5L+h5oGvJywgJ2Rpc2FibGVkJzogZmFsc2V9LA0KICAgICAgICB7J2tleSc6ICdwcm9kdWN0SGVQZWlGbGFnJywgJ3ZhbHVlJzogJ3Byb2R1Y3RIZVBlaUZsYWcnLCAnbGFiZWwnOiAn5Lqn5ZOB5qC46LWU5L+h5oGvJywgJ2Rpc2FibGVkJzogZmFsc2V9DQogICAgICBdOw0KICAgICAgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVUeXBlID0gJzEnOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLnBkVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v5p+l6K+i6K6i5q2j55Sz6K+36KGo5pWw5o2uDQogICAgcXVlcnlSZXZpc2VEYXRhKCkgew0KICAgICAgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVUeXBlID0gJzInOw0KICAgICAgcXVlcnlSZXZpc2VEYXRhKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7DQogICAgICAgICJwZEluZm9JZCI6IHRoaXMucGRJbmZvLmlkLA0KICAgICAgICAicGRWZXJJZCI6IHRoaXMucGRJbmZvLnBkVmVySWQNCiAgICAgIH0pKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMucGRSZXZpc2VUeXBlID0gcmVzLmRhdGEucGRSZXZpc2VUeXBlOw0KICAgICAgICB0aGlzLnBkUmV0dXJuRnVuY0NvZGUgPSByZXMuZGF0YS5wZFJldHVybkZ1bmNDb2RlOw0KICAgICAgICB0aGlzLnBkUmV2aXNlRGF0ZSA9IHJlcy5kYXRhLnBkUmV2aXNlRGF0ZTsNCiAgICAgICAgY29uc3QgY29kZXMgPSB0aGlzLnBkUmV0dXJuRnVuY0NvZGUuc3BsaXQoIiwiKTsNCiAgICAgICAgaWYgKHRoaXMucGRSZXZpc2VUeXBlID09PSAnMScpIHsNCiAgICAgICAgICB0aGlzLnByb2R1Y3ROb2RlTGlzdCA9IFtdOw0KICAgICAgICAgIHRoaXMucHJvZHVjdE5vZGVMaXN0LnB1c2goew0KICAgICAgICAgICAga2V5OiAnMDAwMDAwJywNCiAgICAgICAgICAgIHZhbHVlOiAnMDAwMDAwJywNCiAgICAgICAgICAgIGxhYmVsOiAn5YWo6YOoJywNCiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb2Rlcykgew0KICAgICAgICAgICAgc3dpdGNoIChpdGVtKSB7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RJbmZvRmxhZyc6DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0Tm9kZUxpc3QucHVzaCh7DQogICAgICAgICAgICAgICAgICBrZXk6ICdwcm9kdWN0SW5mb0ZsYWcnLA0KICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwcm9kdWN0SW5mb0ZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4HmoYbmnrblrprkuYknLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJzoNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3ROb2RlTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGtleTogJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJywNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4HplIDllK7kv6Hmga8nLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RDb3ZlckZsYWcnOg0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdE5vZGVMaXN0LnB1c2goew0KICAgICAgICAgICAgICAgICAga2V5OiAncHJvZHVjdENvdmVyRmxhZycsDQogICAgICAgICAgICAgICAgICB2YWx1ZTogJ3Byb2R1Y3RDb3ZlckZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4Hmib/kv53kv6Hmga8nLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJzoNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3ROb2RlTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGtleTogJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJywNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4HmoLjkv53kv6Hmga8nLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RQcmVzZXJ2YXRpb25GbGFnJzoNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3ROb2RlTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGtleTogJ3Byb2R1Y3RQcmVzZXJ2YXRpb25GbGFnJywNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAncHJvZHVjdFByZXNlcnZhdGlvbkZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4Hkv53lhajkv6Hmga8nLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RIZVBlaUZsYWcnOg0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdE5vZGVMaXN0LnB1c2goew0KICAgICAgICAgICAgICAgICAga2V5OiAncHJvZHVjdEhlUGVpRmxhZycsDQogICAgICAgICAgICAgICAgICB2YWx1ZTogJ3Byb2R1Y3RIZVBlaUZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4HmoLjotZTkv6Hmga8nLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RSZW5ld2FsRmxhZyc6DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0Tm9kZUxpc3QucHVzaCh7DQogICAgICAgICAgICAgICAgICBrZXk6ICdwcm9kdWN0UmVuZXdhbEZsYWcnLA0KICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwcm9kdWN0UmVuZXdhbEZsYWcnLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6ICfkuqflk4Hnu63mnJ/nu63kv53kv6Hmga8nLA0KICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLnBkUmV2aXNlVHlwZSA9PT0gJzAnKSB7DQogICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGNvZGVzKSB7DQogICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHsNCiAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdFJ1bGVGbGFnJzoNCiAgICAgICAgICAgICAgICB0aGlzLnNob3dSdWxlVGFibGVGbGFnID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLmZpbmROb2RlUnVsZXNMaXN0KHRoaXMucGRSZXZpc2VEYXRlKTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdEZvcm11bGFGbGFnJzoNCiAgICAgICAgICAgICAgICB0aGlzLnNob3dGb3JtdWxhVGFibGVGbGFnID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLmZpbmROb2RlRm9ybXVsYUxpc3QodGhpcy5wZFJldmlzZURhdGUpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHF1ZXJ5U3RvcCgpIHsNCiAgICAgIC8v5p+l6K+i5YGc5ZSu5pe26Ze0LCDlgZzllK7ljp/lm6ANCiAgICAgIHF1ZXJ5U3RvcCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoeyJpZCI6IHRoaXMucGRJbmZvLmlkLCAicGRWZXJJZCI6IHRoaXMucGRJbmZvLnBkVmVySWR9KSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmF1ZGl0Rm9ybS5zdG9wRGF0ZSA9IHJlcy5kYXRhLnBkVmVyRGlzRGF0ZTsNCiAgICAgICAgdGhpcy5hdWRpdEZvcm0uc3RvcFJlYXNvbiA9IHJlcy5kYXRhLnBkVmVyRGlzUmVzbg0KICAgICAgfSkNCiAgICB9LA0KICAgIGZpbmROb2RlRm9ybXVsYUxpc3QodmFsKSB7DQogICAgICBmaW5kTm9kZUZvcm11bGFMaXN0KHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7InBkSW5mb0lkIjogdGhpcy5wZEluZm8uaWQsICJwZFJldmlzZURhdGUiOiB2YWx9KSkudGhlbihyZXMgPT4gew0KICAgICAgICBsZXQgZm9ybXVsYUxpc3ROb2RlID0gcmVzLmRhdGE7DQogICAgICAgIGlmIChmb3JtdWxhTGlzdE5vZGUubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMuZm9ybXVsYU5vZGVMaXN0ID0gW3sna2V5JzogJzAwMCcsICd2YWx1ZSc6ICcwMDAnLCAnbGFiZWwnOiAn5YWo6YOoJywgJ2Rpc2FibGVkJzogZmFsc2V9XTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZm9ybXVsYUxpc3ROb2RlKSB7DQogICAgICAgICAgdGhpcy5mb3JtdWxhTm9kZUxpc3QucHVzaCh7DQogICAgICAgICAgICBrZXk6IGl0ZW0ucGRDYWxjQ29kZSwNCiAgICAgICAgICAgIHZhbHVlOiBpdGVtLnBkQ2FsY0NvZGUsDQogICAgICAgICAgICBsYWJlbDogaXRlbS5wZENhbGNDb2RlLA0KICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IGl0ZW0ucGRCdXNzVHlwZSwNCiAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiBpdGVtLnBkQnVzc0RldGFpbFR5cGUsDQogICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IGl0ZW0ucGRDYWxjRGVzYywNCiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm11bGFUYWJsZUZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgZmluZE5vZGVSdWxlc0xpc3QodmFsKSB7DQogICAgICBmaW5kTm9kZVJ1bGVzTGlzdCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoeyJwZEluZm9JZCI6IHRoaXMucGRJbmZvLmlkLCAicGRSZXZpc2VEYXRlIjogdmFsfSkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgbGV0IHJ1bGVMaXN0Tm9kZSA9IHJlcy5kYXRhOw0KICAgICAgICBpZiAocnVsZUxpc3ROb2RlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICB0aGlzLnJ1bGVOb2RlTGlzdCA9IFt7J2tleSc6ICcwMDAnLCAndmFsdWUnOiAnMDAwJywgJ2xhYmVsJzogJ+WFqOmDqCcsICdkaXNhYmxlZCc6IGZhbHNlfV07DQogICAgICAgIH0NCiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJ1bGVMaXN0Tm9kZSkgew0KICAgICAgICAgIHRoaXMucnVsZU5vZGVMaXN0LnB1c2goew0KICAgICAgICAgICAga2V5OiBpdGVtLnBkUnVsZUNvZGUsDQogICAgICAgICAgICB2YWx1ZTogaXRlbS5wZFJ1bGVDb2RlLA0KICAgICAgICAgICAgbGFiZWw6IGl0ZW0ucGRSdWxlQ29kZSwNCiAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiBpdGVtLnBkUnVsZUNscywNCiAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiBpdGVtLnBkUnVsZUR0Q2xzLA0KICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiBpdGVtLnBkUnVsZURlc2MsDQogICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy5ydWxlVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCg0KICAgIH0sDQogICAgZ2V0RnVuY0NvZGUodmFsKSB7DQogICAgICBsZXQgcmV0dXJuVGV4dCA9ICcnOw0KICAgICAgc3dpdGNoICh2YWwpIHsNCiAgICAgICAgY2FzZSAncHJvZHVjdFJ1bGVGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gcmV0dXJuVGV4dCArICfkuqflk4Hop4TliJnorqLmraMnOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdwcm9kdWN0Rm9ybXVsYUZsYWcnOg0KICAgICAgICAgIHJldHVyblRleHQgPSByZXR1cm5UZXh0ICsgJ+S6p+WTgeWFrOW8j+iuouatoyc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RJbmZvRmxhZyc6DQogICAgICAgICAgcmV0dXJuVGV4dCA9IHJldHVyblRleHQgKyAn5Lqn5ZOB5qGG5p625a6a5LmJJzsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnOg0KICAgICAgICAgIHJldHVyblRleHQgPSByZXR1cm5UZXh0ICsgJ+S6p+WTgemUgOWUruS/oeaBryc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RDb3ZlckZsYWcnOg0KICAgICAgICAgIHJldHVyblRleHQgPSByZXR1cm5UZXh0ICsgJ+S6p+WTgeaJv+S/neS/oeaBryc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gcmV0dXJuVGV4dCArICfkuqflk4HmoLjkv53kv6Hmga8nOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZyc6DQogICAgICAgICAgcmV0dXJuVGV4dCA9IHJldHVyblRleHQgKyAn5Lqn5ZOB5L+d5YWo5L+h5oGvJzsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncHJvZHVjdEhlUGVpRmxhZyc6DQogICAgICAgICAgcmV0dXJuVGV4dCA9IHJldHVyblRleHQgKyAn5Lqn5ZOB5qC46LWU5L+h5oGvJzsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncHJvZHVjdFJlbmV3YWxGbGFnJzoNCiAgICAgICAgICByZXR1cm5UZXh0ID0gcmV0dXJuVGV4dCArICfkuqflk4Hnu63mnJ/nu63kv53kv6Hmga8nOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJldHVyblRleHQ7DQogICAgfSwNCiAgICAvL+WuoeaguOWujOavleaMiemSrg0KICAgIGF1ZGl0UGFzcygpIHsNCiAgICAgIHRoaXMuJHJlZnMucGRBdWRpdERldGFpbEluZm8udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRoaXMucGRBdWRpdEluZm8ucGRBdWRpdENvbmMgPSB0aGlzLnBkQXVkaXREZXRhaWxJbmZvLnBkQXVkaXRDb25jOw0KICAgICAgICAgIHRoaXMucGRBdWRpdEluZm8ucGRUeXBlID0gJzEnOw0KICAgICAgICAgIGxldCBwZG9wZXJBdWRpdERldGFpbE5vdGVzSW5mbyA9IFtdOw0KICAgICAgICAgIC8v6I635Y+W5a6h5qC45piO57uG6K+m5oOF6KGo5qC855qE5YC8DQogICAgICAgICAgaWYgKHRoaXMucGRSZXZpc2VUeXBlID09ICcxJyB8fCB0aGlzLnBkQXVkaXRUeXBlID09ICcxJykgew0KICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuY29uZmlnczYpIHsNCiAgICAgICAgICAgICAgcGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8ucHVzaChpdGVtKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5zaG93UnVsZVRhYmxlRmxhZyAmJiB0aGlzLnNob3dGb3JtdWxhVGFibGVGbGFnKSB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jb25maWdzNykgew0KICAgICAgICAgICAgICBwZG9wZXJBdWRpdERldGFpbE5vdGVzSW5mby5wdXNoKGl0ZW0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jb25maWdzOCkgew0KICAgICAgICAgICAgICBwZG9wZXJBdWRpdERldGFpbE5vdGVzSW5mby5wdXNoKGl0ZW0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnNob3dSdWxlVGFibGVGbGFnKSB7DQogICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmNvbmZpZ3M3KSB7DQogICAgICAgICAgICAgICAgcGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8ucHVzaChpdGVtKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5zaG93Rm9ybXVsYVRhYmxlRmxhZykgew0KICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jb25maWdzOCkgew0KICAgICAgICAgICAgICAgIHBkb3BlckF1ZGl0RGV0YWlsTm90ZXNJbmZvLnB1c2goaXRlbSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZEF1ZGl0Q29uYyA9PSAnWScgJiYgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZEF1ZGl0Q29uYyA9PSAnTicgJiYgcGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8ubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoIuivt+WujOWWhOWuoeaguOaYjue7huihqOagvOaVsOaNriIpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IG1hcCA9IHsNCiAgICAgICAgICAgICJwZEF1ZGl0SW5mbyI6IHRoaXMucGRBdWRpdEluZm8sDQogICAgICAgICAgICAicGRBdWRpdERldGFpbEluZm8iOiB0aGlzLnBkQXVkaXREZXRhaWxJbmZvLA0KICAgICAgICAgICAgInBkb3BlckF1ZGl0RGV0YWlsTm90ZXNJbmZvIjogcGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8sDQogICAgICAgICAgICAicGRGaWxlQXVkaXRMaXN0IjogdGhpcy5wZEZpbGVBdWRpdERhdGENCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMgPT0gJ1gnKSB7IC8v5Y+W5raI5pys5qyh5a6a5LmJDQogICAgICAgICAgICBsZXQgZGF0YSA9IHsNCiAgICAgICAgICAgICAgJ3Byb2Nlc3NJbnN0YW5jZUlkJzogdGhpcy5wZEluZm8ucGRQcm9jZXNzSWQNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBtYXBbJ3dvcmtmbG93RGF0YSddID0gZGF0YTsNCiAgICAgICAgICAgIHRoaXMuZG9BdWRpdEluZm9EYXRhKG1hcCkNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMgPT0gJ1onKSB7IC8v5YGc5ZSu5Lqn5ZOBDQogICAgICAgICAgICBsZXQgZGF0YSA9IHsNCiAgICAgICAgICAgICAgJ3Byb2Nlc3NJbnN0YW5jZUlkJzogdGhpcy5wZEluZm8ucGRQcm9jZXNzSWQNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBtYXBbJ3dvcmtmbG93RGF0YSddID0gZGF0YTsNCiAgICAgICAgICAgIHRoaXMuZG9BdWRpdEluZm9EYXRhKG1hcCkNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMgPT0gJ04nKSB7IC8v5a6h5qC45LiN6YCa6L+HDQogICAgICAgICAgICAvL+WBnOWUruS6p+WTgQ0KICAgICAgICAgICAgaWYgKHRoaXMucGRBdWRpdFR5cGUgPT0gJzMnKSB7DQogICAgICAgICAgICAgIGxldCBkYXRhID0gew0KICAgICAgICAgICAgICAgICdwcm9kdWN0QXVkaXRGbGFnJzogJzAnLA0KICAgICAgICAgICAgICAgICd2YXJpYWJsZXMnOiBbInByb2R1Y3REaXNjb250aW51ZWQiXSwNCiAgICAgICAgICAgICAgICAncHJvY2Vzc0luc3RhbmNlSWQnOiB0aGlzLnBkSW5mby5wZFByb2Nlc3NJZA0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICBtYXBbJ3dvcmtmbG93RGF0YSddID0gZGF0YTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIC8v5a6h5qC45LiN6YCa6L+HIOi/lOWbnuWumuS5ieiKgueCuQ0KICAgICAgICAgICAgICB0aGlzLnBkQXVkaXRJbmZvLnBkSXNSZXZpZXdSZXR1cm4gPSAnWSc7DQogICAgICAgICAgICAgIHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRSZXR1cm5GdW5jTm9kZSA9IHRoaXMucmV0dXJuUG9pbnRzKHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMpOw0KICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAncHJvZHVjdEF1ZGl0RmxhZyc6ICcwJywNCiAgICAgICAgICAgICAgICAndmFyaWFibGVzJzogdGhpcy5yZXR1cm5Qb2ludHModGhpcy5yZXR1cm5GdW5jdGlvblBvaW50cyksDQogICAgICAgICAgICAgICAgJ3Byb2Nlc3NJbnN0YW5jZUlkJzogdGhpcy5wZEluZm8ucGRQcm9jZXNzSWQNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgbWFwWyd3b3JrZmxvd0RhdGEnXSA9IGRhdGE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmRvQXVkaXRJbmZvRGF0YShtYXApDQogICAgICAgICAgfSBlbHNlIHsgIC8v5a6h5qC46YCa6L+H55qEDQogICAgICAgICAgICAvL+mAmui/h+eahOiKgueCuQ0KICAgICAgICAgICAgbGV0IHBhc3NOb2RlUG9pbnRzID0gdGhpcy5yZXR1cm5Qb2ludHModGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZGV0KTsNCiAgICAgICAgICAgIHRoaXMucGRBdWRpdEluZm8ucGRSZWxlQ29udGRldCA9IHBhc3NOb2RlUG9pbnRzOw0KICAgICAgICAgICAgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZGV0ID0gcGFzc05vZGVQb2ludHM7DQogICAgICAgICAgICB0aGlzLnBkQXVkaXRJbmZvLnBkUmVsZUNvbnRlbnQgPSB0aGlzLnBkQXVkaXREZXRhaWxJbmZvLnBkUmVsZUNvbnRlbnQ7DQogICAgICAgICAgICB0aGlzLnBkQXVkaXRJbmZvLnBkSXNSZXZpZXdSZXR1cm4gPSAnTic7DQogICAgICAgICAgICBpZiAodGhpcy5wZEF1ZGl0VHlwZSA9PSAnMycpIHsNCiAgICAgICAgICAgICAgLy/lgZzllK7pgJrov4fml7YgICDpu5jorqTlop7ph4/lj5HluIMNCiAgICAgICAgICAgICAgdGhpcy5wZEF1ZGl0SW5mby5wZFJlbGVUeXBlID0gIjIiOw0KICAgICAgICAgICAgICB0aGlzLnBkQXVkaXREZXRhaWxJbmZvLnBkUmVsZVR5cGUgPSAiMiINCiAgICAgICAgICAgICAgdGhpcy5wZEF1ZGl0SW5mby5wZFJlbGVDb250ZW50ID0gJzMnDQogICAgICAgICAgICAgIHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRSZWxlQ29udGVudCA9ICczJw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5wZEF1ZGl0SW5mby5wZFJlbGVUeXBlID0gdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVUeXBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgICAgICAgICdwcm9kdWN0QXVkaXRGbGFnJzogJzEnLA0KICAgICAgICAgICAgICAndmFyaWFibGVzJzogbnVsbCwNCiAgICAgICAgICAgICAgJ3Byb2Nlc3NJbnN0YW5jZUlkJzogdGhpcy5wZEluZm8ucGRQcm9jZXNzSWQNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBtYXBbJ3dvcmtmbG93RGF0YSddID0gZGF0YTsNCiAgICAgICAgICAgIHRoaXMuZG9BdWRpdEluZm9EYXRhKG1hcCkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBkb0F1ZGl0SW5mb0RhdGEobWFwKSB7DQogICAgICBhZGRBdWRpdEluZm9EYXRhKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShtYXApKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXMubWVzc2FnZSk7DQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdwcm9kdWN0L3N0b3JhZ2VQcm9kdWN0cycpDQogICAgICAgIGNsb3NlVmlzaXRUYWcoKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICIvZGFzaGJvYXJkIn0pOw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v5riF56m65oyJ6ZKuDQogICAgcmVmcmVzaCgpIHsNCiAgICAgIHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMgPSAnJzsNCiAgICAgIHRoaXMucGRBdWRpdERldGFpbEluZm8ucGRSZWxlVHlwZSA9ICcnOw0KICAgICAgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZEF1ZGl0SWRlYSA9ICcnOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLnBkQXVkaXREZXRhaWxJbmZvLmNsZWFyVmFsaWRhdGUoKTsNCiAgICAgICAgaWYgKHRoaXMuJHJlZnMucGRUYWJsZUZvcm0pIHsNCiAgICAgICAgICB0aGlzLiRyZWZzLnBkVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy4kcmVmcy5ydWxlVGFibGVGb3JtKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy5ydWxlVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/lrqHmoLjkuI3pgJrov4flpITnkIboioLngrkNCiAgICByZXR1cm5Qb2ludHModmFsKSB7DQogICAgICBsZXQgcmV0dXJuUG9pbnRzID0gW107DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykgew0KICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubm9kZU9wdGlvbnMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBpZiAodmFsW2ldID09IHRoaXMubm9kZU9wdGlvbnNbal0ubGFiZWwpIHsNCiAgICAgICAgICAgIHJldHVyblBvaW50cy5wdXNoKHRoaXMubm9kZU9wdGlvbnNbal0ua2V5KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJldHVyblBvaW50cw0KICAgIH0sDQogICAgLy/pgInkuK3kuI3pgJrov4fluKblm57nmoToioLngrkNCiAgICByZUJhY2soKSB7DQogICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzID0gW107DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnczYubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHRoaXMuY29uZmlnczZbaV0ucGRJc0NhbmNlbERlZmluaXRpb24gPT0gJ04nICYmIHRoaXMuY29uZmlnczZbaV0ucGRBdWRpdENvbmN0aGlzID09ICdOJykgew0KICAgICAgICAgIHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMucHVzaCh0aGlzLmdldEZ1bmNDb2RlKHRoaXMuY29uZmlnczZbaV0ucGREZWZpbmVDb250ZW50KSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMubGVuZ3RoID09ICcwJykgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCLpgIDlm57oioLngrnkuLrnqbrvvIzor7fkv67mlLnmmI7nu4blrqHmoLjlhoXlrrkiKTsNCiAgICAgICAgdGhpcy5yZWZyZXNoKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5Lqn5ZOB6KeE5YiZ6K6i5q2j6YCJ5Lit5LiN6YCa6L+H5bim5Zue55qE6IqC54K5DQogICAgcnVsZU9yRm9ybXVsYUJhY2soKSB7DQogICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzID0gW107DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnczcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHRoaXMuY29uZmlnczdbaV0ucGRJc0NhbmNlbERlZmluaXRpb24gPT0gJ04nICYmIHRoaXMuY29uZmlnczdbaV0ucGRBdWRpdENvbmN0aGlzID09ICdOJykgew0KICAgICAgICAgIHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMucHVzaCgi5Lqn5ZOB6KeE5YiZ6K6i5q2jIik7DQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpZ3M4Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh0aGlzLmNvbmZpZ3M4W2ldLnBkSXNDYW5jZWxEZWZpbml0aW9uID09ICdOJyAmJiB0aGlzLmNvbmZpZ3M4W2ldLnBkQXVkaXRDb25jdGhpcyA9PSAnTicpIHsNCiAgICAgICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLnB1c2goIuS6p+WTgeWFrOW8j+iuouatoyIpOw0KICAgICAgICAgIGJyZWFrDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLmxlbmd0aCA9PSAnMCcpIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcigi6YCA5Zue6IqC54K55Li656m677yM6K+35L+u5pS55piO57uG5a6h5qC45YaF5a65Iik7DQogICAgICAgIHRoaXMucmVmcmVzaCgpDQogICAgICB9DQogICAgfSwNCiAgICBzaG93RmlsZVJlbGVhc2VQYWdlKCkgew0KICAgICAgdGhpcy5zaG93RmlsZVJlbGVhc2VGbGFnID0gdHJ1ZQ0KICAgIH0sDQogICAgY2hhbmdlRGlhbG9nRmlsZVJlbGVhc2UoZmxhZykgew0KICAgICAgdGhpcy5zaG93RmlsZVJlbGVhc2VGbGFnID0gZmxhZw0KICAgIH0sDQogICAgYnJpbmdQZEZpbGVBdWRpdERhdGEodmFsKSB7DQogICAgICB0aGlzLnBkRmlsZUF1ZGl0RGF0YSA9IHZhbA0KICAgIH0sDQogICAgLy/pgInmi6npgJrov4fmmL7npLrlj5HluIPlhoXlrrkNCiAgICBhdWRpdERhdGEoKSB7DQogICAgICB0aGlzLnBkQXVkaXREZXRhaWxJbmZvLnBkUmVsZUNvbnRkZXQgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWdzNi5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy5jb25maWdzNltpXS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9PSAnTicgJiYgdGhpcy5jb25maWdzNltpXS5wZEF1ZGl0Q29uY3RoaXMgPT0gJ1knKSB7DQogICAgICAgICAgdGhpcy5wZEF1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZGV0LnB1c2godGhpcy5nZXRGdW5jQ29kZSh0aGlzLmNvbmZpZ3M2W2ldLnBkRGVmaW5lQ29udGVudCkpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6YCJ5oup6YCa6L+H5pi+56S66KeE5YiZ5Y+R5biD5YaF5a65DQogICAgYXVkaXRSdWxlRGF0YSgpIHsNCiAgICAgIHRoaXMuY29uZmlnczQgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWdzNy5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy5jb25maWdzN1tpXS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9PSAnTicgJiYgdGhpcy5jb25maWdzN1tpXS5wZEF1ZGl0Q29uY3RoaXMgPT0gJ1knKSB7DQogICAgICAgICAgdGhpcy5jb25maWdzNC5wdXNoKHRoaXMuY29uZmlnczdbaV0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6YCJ5oup6YCa6L+H5pi+56S65YWs5byP5Y+R5biD5YaF5a65DQogICAgYXVkaXRGb3JtdWxhRGF0YSgpIHsNCiAgICAgIHRoaXMuY29uZmlnczUgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWdzOC5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy5jb25maWdzOFtpXS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9PSAnTicgJiYgdGhpcy5jb25maWdzOFtpXS5wZEF1ZGl0Q29uY3RoaXMgPT0gJ1knKSB7DQogICAgICAgICAgdGhpcy5jb25maWdzNS5wdXNoKHRoaXMuY29uZmlnczhbaV0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5paw5Lqn5ZOB5oiW5Lqn5ZOB6K6i5q2j5re75Yqg5a6h5qC45pWw5o2uDQogICAgYWRkUGRBdWRpdFRhYmxlRGF0YSgpIHsNCiAgICAgIHRoaXMuJHJlZnMucGRUYWJsZUZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGlmICh0aGlzLnBkVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyA9PSAnWScpIHsNCiAgICAgICAgICAgIHRoaXMucGRUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7DQogICAgICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5jaGVja0JveERhdGEubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnBkVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudC5sZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgICBpZiAodGhpcy5wZFRhYmxlRm9ybS5wZERlZmluZUNvbnRlbnRbMF0gPT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucHJvZHVjdE5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1BkTW9yZUNvcHlEYXRhKHRoaXMucHJvZHVjdE5vZGVMaXN0W2ldLnZhbHVlLCB0aGlzLmNvbmZpZ3M2KSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3M2LnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgIHBkRGVmaW5lQ29udGVudDogdGhpcy5wcm9kdWN0Tm9kZUxpc3RbaV0udmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLnBkVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcywNCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogdGhpcy5wZFRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLnBkVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrUGRDb3B5RGF0YSh0aGlzLnBkVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudFswXSwgdGhpcy5jb25maWdzNikpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnczYucHVzaCh7DQogICAgICAgICAgICAgICAgICAgIHBkRGVmaW5lQ29udGVudDogdGhpcy5wZFRhYmxlRm9ybS5wZERlZmluZUNvbnRlbnRbMF0sDQogICAgICAgICAgICAgICAgICAgIHBkQXVkaXRDb25jdGhpczogdGhpcy5wZFRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsDQogICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLnBkVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLA0KICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLnBkVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24NCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5wZFRhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGRUYWJsZUZvcm0ucGREZWZpbmVDb250ZW50Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tQZENvcHlEYXRhKHRoaXMucGRUYWJsZUZvcm0ucGREZWZpbmVDb250ZW50W2ldLCB0aGlzLmNvbmZpZ3M2KSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzNi5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgcGREZWZpbmVDb250ZW50OiB0aGlzLnBkVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudFtpXSwNCiAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLnBkVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcywNCiAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246IHRoaXMucGRUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sDQogICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMucGRUYWJsZUZvcm0ucGROb3RQYXNzT3Bpbmlvbg0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoZWNrQm94RGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5jaGVja0JveERhdGFbaV0sICdwZEF1ZGl0Q29uY3RoaXMnLCB0aGlzLnBkVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyk7DQogICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrQm94RGF0YVtpXSwgJ3BkSXNDYW5jZWxEZWZpbml0aW9uJywgdGhpcy5wZFRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbik7DQogICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrQm94RGF0YVtpXSwgJ3BkTm90UGFzc09waW5pb24nLCB0aGlzLnBkVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmlzU2hvd05lZ2F0aXZlKHRoaXMuY29uZmlnczYpOw0KICAgICAgICAgIHRoaXMucGRUYWJsZUZvcm0ucGREZWZpbmVDb250ZW50ID0gW107DQogICAgICAgICAgdGhpcy5wZFRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMgPSAnJzsNCiAgICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOw0KICAgICAgICAgIHRoaXMucGRUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOw0KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMucGRUYWJsZUZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v6KeE5YiZ6K6i5q2j5re75Yqg5a6h5qC45pWw5o2uDQogICAgYWRkUnVsZUF1ZGl0VGFibGVEYXRhKCkgew0KICAgICAgdGhpcy4kcmVmcy5ydWxlVGFibGVGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5ydWxlVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyA9PSAnWScpIHsNCiAgICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsNCiAgICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJycNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHRoaXMuY2hlY2tSdWxlRGF0YS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZS5sZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgICBpZiAodGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlWzBdLnZhbHVlID09ICcwMDAnKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tNb3JlQ29weURhdGEodGhpcy5ydWxlTm9kZUxpc3RbaV0udmFsdWUsIHRoaXMuY29uZmlnczcpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnczcucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMScsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5ydWxlTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURldGFpbHMsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsDQogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzLA0KICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sDQogICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogdGhpcy5ydWxlVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQ29weURhdGEodGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlWzBdLnZhbHVlLCB0aGlzLmNvbmZpZ3M3KSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzNy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMScsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0udmFsdWUsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0ucGRGb3JtdWxhUnVsZVR5cGUsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0ucGRGb3JtdWxhUnVsZURldGFpbHMsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlWzBdLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwNCiAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzLA0KICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogdGhpcy5ydWxlVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLA0KICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGROb3RQYXNzT3Bpbmlvbg0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQ29weURhdGEodGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlW2ldLnZhbHVlLCB0aGlzLmNvbmZpZ3M3KSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzNy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMScsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0udmFsdWUsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZVR5cGUsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZURldGFpbHMsDQogICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlW2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwNCiAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzLA0KICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogdGhpcy5ydWxlVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLA0KICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGROb3RQYXNzT3Bpbmlvbg0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoZWNrUnVsZURhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2hlY2tSdWxlRGF0YVtpXSwgJ3BkQXVkaXRDb25jdGhpcycsIHRoaXMucnVsZVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMpOw0KICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5jaGVja1J1bGVEYXRhW2ldLCAncGRJc0NhbmNlbERlZmluaXRpb24nLCB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24pOw0KICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5jaGVja1J1bGVEYXRhW2ldLCAncGROb3RQYXNzT3BpbmlvbicsIHRoaXMucnVsZVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVJ1bGVUYWJsZS5jbGVhclNlbGVjdGlvbigpDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuaXNTaG93TmVnYXRpdmUodGhpcy5jb25maWdzNyk7DQogICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlID0gW107DQogICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyA9ICcnOw0KICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsNCiAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOw0KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZVRhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/lhazlvI/orqLmraPmt7vliqDlrqHmoLjmlbDmja4NCiAgICBhZGRGb3JtdWxhQXVkaXRUYWJsZURhdGEoKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm11bGFUYWJsZUZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGlmICh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID09ICdZJykgew0KICAgICAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOw0KICAgICAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5jaGVja0Zvcm11bGFEYXRhLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICBpZiAodGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlLmxlbmd0aCA9PSAxKSB7DQogICAgICAgICAgICAgIGlmICh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0udmFsdWUgPT0gJzAwMCcpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja01vcmVDb3B5RGF0YSh0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS52YWx1ZSwgdGhpcy5jb25maWdzOCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdzOC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcyJywNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0udmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLA0KICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywNCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwNCiAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsDQogICAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGROb3RQYXNzT3Bpbmlvbg0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3B5RGF0YSh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0udmFsdWUsIHRoaXMuY29uZmlnczgpKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3M4LnB1c2goew0KICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcyJywNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS5wZEZvcm11bGFSdWxlVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS5wZEZvcm11bGFSdWxlRGV0YWlscywNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLA0KICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsDQogICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sDQogICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uDQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZS5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3B5RGF0YSh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0udmFsdWUsIHRoaXMuY29uZmlnczgpKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3M4LnB1c2goew0KICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcyJywNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVtpXS52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVtpXS5wZEZvcm11bGFSdWxlVHlwZSwNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywNCiAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLA0KICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsDQogICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sDQogICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uDQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hlY2tGb3JtdWxhRGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5jaGVja0Zvcm11bGFEYXRhW2ldLCAncGRBdWRpdENvbmN0aGlzJywgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyk7DQogICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrRm9ybXVsYURhdGFbaV0sICdwZElzQ2FuY2VsRGVmaW5pdGlvbicsIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbik7DQogICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrRm9ybXVsYURhdGFbaV0sICdwZE5vdFBhc3NPcGluaW9uJywgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlRm9ybXVsYVRhYmxlLmNsZWFyU2VsZWN0aW9uKCkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5pc1Nob3dOZWdhdGl2ZSh0aGlzLmNvbmZpZ3M4KTsNCiAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUgPSBbXTsNCiAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID0gJyc7DQogICAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOw0KICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJyc7DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvL+WIpOaWremAieaLqeWFqOmDqOaXtuiKgueCueaYr+WQpumHjeWkjQ0KICAgIGNoZWNrUGRNb3JlQ29weURhdGEodmFsLCB0YWJsZU5hbWUpIHsNCiAgICAgIGxldCBub2RlTGlzdCA9IFtdOw0KICAgICAgZm9yIChjb25zdCBwZE5vZGUgb2YgdGFibGVOYW1lKSB7DQogICAgICAgIG5vZGVMaXN0LnB1c2gocGROb2RlLnBkRGVmaW5lQ29udGVudCkNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QsIHZhbCkpIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwcm9kdWN0QXVkaXQucGROb2RlUmVwZWF0JykpOw0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlDQogICAgfSwNCiAgICAvL+WIpOaWreiKgueCueaYr+WQpumHjeWkjQ0KICAgIGNoZWNrUGRDb3B5RGF0YSh2YWwsIHRhYmxlTmFtZSkgew0KICAgICAgbGV0IG5vZGVMaXN0ID0gW107DQogICAgICBmb3IgKGNvbnN0IHBkTm9kZSBvZiB0YWJsZU5hbWUpIHsNCiAgICAgICAgbm9kZUxpc3QucHVzaChwZE5vZGUucGREZWZpbmVDb250ZW50KQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgdmFsKSkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wZE5vZGVSZXBlYXQnKSk7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRydWUNCiAgICB9LA0KICAgIC8v5Yik5pat6YCJ5oup5YWo6YOo5pe26IqC54K55piv5ZCm6YeN5aSNDQogICAgY2hlY2tNb3JlQ29weURhdGEodmFsLCB0YWJsZU5hbWUpIHsNCiAgICAgIGxldCBub2RlTGlzdCA9IFtdOw0KICAgICAgZm9yIChjb25zdCBwZE5vZGUgb2YgdGFibGVOYW1lKSB7DQogICAgICAgIG5vZGVMaXN0LnB1c2gocGROb2RlLnBkRm9ybXVsYVJ1bGVDb2RlKQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuXy5pbmNsdWRlcyhub2RlTGlzdCwgdmFsKSkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RBdWRpdC5wZE5vZGVSZXBlYXQnKSk7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRydWUNCiAgICB9LA0KICAgIC8v5Yik5pat6IqC54K55piv5ZCm6YeN5aSNDQogICAgY2hlY2tDb3B5RGF0YSh2YWwsIHRhYmxlTmFtZSkgew0KICAgICAgbGV0IG5vZGVMaXN0ID0gW107DQogICAgICBmb3IgKGNvbnN0IHBkTm9kZSBvZiB0YWJsZU5hbWUpIHsNCiAgICAgICAgbm9kZUxpc3QucHVzaChwZE5vZGUucGRGb3JtdWxhUnVsZUNvZGUpDQogICAgICB9DQogICAgICBpZiAodGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0LCB2YWwpKSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdEF1ZGl0LnBkTm9kZVJlcGVhdCcpKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0sDQogICAgLy/pobXpnaLot7PovazmjInpkq4NCiAgICBnZXRQZERlc2lnblBhZ2UoKSB7DQogICAgICBpZiAodGhpcy5wZEluZm8pIHsNCiAgICAgICAgdGhpcy5jYWNoZUN1cnJQYWdlUGREYXRhKHRoaXMucGRJbmZvKQ0KICAgICAgICB0aGlzLmRpYWxvZ1Nob3cgPSB0cnVlDQogICAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5Lqn5ZOB5qGG5p625L+h5oGv5p+l55yLJw0KICAgICAgICB0aGlzLmRpYWxvZ0NvbXBvbmVudCA9ICdwcm9kdWN0LWRlZmluaXRpb24vcGQtZnJhbWV3b3JrLWRlZi9tYWluJw0KICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeahhuaetuWumuS5ieS4u+mhtScsIHF1ZXJ5OiB7c2hvd1BhZ2VGbGFnOiAnMSd9LHBhcmFtczp0aGlzLnBkSW5mb30pDQogICAgICB9DQogICAgfSwNCiAgICBnZXRQZFNhbGVQYWdlKCkgew0KICAgICAgaWYgKHRoaXMucGRJbmZvKSB7DQogICAgICAgIHRoaXMuY2FjaGVDdXJyUGFnZVBkRGF0YSh0aGlzLnBkSW5mbykNCiAgICAgICAgdGhpcy5kaWFsb2dTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+S6p+WTgemUgOWUruS/oeaBr+afpeeciycNCiAgICAgICAgdGhpcy5kaWFsb2dDb21wb25lbnQgPSAncHJvZHVjdC1kZWZpbml0aW9uL3BkLW9wZXJhdGlvbi1kZWYvcGQtc2FsZXMtZGVmL21haW4nDQogICAgICB9DQogICAgfSwNCiAgICBnZXRQZFVXUGFnZSgpIHsNCiAgICAgIGlmICh0aGlzLnBkSW5mbykgew0KICAgICAgICB0aGlzLmNhY2hlQ3VyclBhZ2VQZERhdGEodGhpcy5wZEluZm8pDQogICAgICAgIHRoaXMuZGlhbG9nU2hvdyA9IHRydWUNCiAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfkuqflk4Hmib/kv53kv6Hmga/mn6XnnIsnDQogICAgICAgIHRoaXMuZGlhbG9nQ29tcG9uZW50ID0gJ3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1vcGVyYXRpb24tZGVmL3BkLWFjY2VwdGFuY2UtZGVmL21haW4nDQogICAgICB9DQogICAgfSwNCiAgICBnZXRQZEFVUGFnZSgpIHsNCiAgICAgIGlmICh0aGlzLnBkSW5mbykgew0KICAgICAgICB0aGlzLmNhY2hlQ3VyclBhZ2VQZERhdGEodGhpcy5wZEluZm8pDQogICAgICAgIHRoaXMuZGlhbG9nU2hvdyA9IHRydWUNCiAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfkuqflk4HmoLjkv53kv6Hmga/mn6XnnIsnDQogICAgICAgIHRoaXMuZGlhbG9nQ29tcG9uZW50ID0gJ3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1vcGVyYXRpb24tZGVmL3BkLXVuZGVyd3JpdGluZy1kZWYvbWFpbicNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldFBkUldQYWdlKCkgew0KICAgICAgaWYgKHRoaXMucGRJbmZvKSB7DQogICAgICAgIHRoaXMuY2FjaGVDdXJyUGFnZVBkRGF0YSh0aGlzLnBkSW5mbykNCiAgICAgICAgdGhpcy5kaWFsb2dTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+S6p+WTgee7reacn+e7reS/neS/oeaBr+afpeeciycNCiAgICAgICAgdGhpcy5kaWFsb2dDb21wb25lbnQgPSAncHJvZHVjdC1kZWZpbml0aW9uL3BkLW9wZXJhdGlvbi1kZWYvcGQtcmVuZXdhbC1kZWYvbWFpbicNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldFBkUFZQYWdlKCkgew0KICAgICAgaWYgKHRoaXMucGRJbmZvKSB7DQogICAgICAgIHRoaXMuY2FjaGVDdXJyUGFnZVBkRGF0YSh0aGlzLnBkSW5mbykNCiAgICAgICAgdGhpcy5kaWFsb2dTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+S6p+WTgeS/neWFqOS/oeaBr+afpeeciycNCiAgICAgICAgdGhpcy5kaWFsb2dDb21wb25lbnQgPSAncHJvZHVjdC1kZWZpbml0aW9uL3BkLW9wZXJhdGlvbi1kZWYvcGQtcHJlc2VydmF0aW9uLWRlZi9tYWluJw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UGRDTFBhZ2UoKSB7DQogICAgICBpZiAodGhpcy5wZEluZm8pIHsNCiAgICAgICAgdGhpcy5jYWNoZUN1cnJQYWdlUGREYXRhKHRoaXMucGRJbmZvKQ0KICAgICAgICB0aGlzLmRpYWxvZ1Nob3cgPSB0cnVlDQogICAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5Lqn5ZOB5qC46LWU5L+h5oGv5p+l55yLJw0KICAgICAgICB0aGlzLmRpYWxvZ0NvbXBvbmVudCA9ICdwcm9kdWN0LWRlZmluaXRpb24vcGQtb3BlcmF0aW9uLWRlZi9wZC1jb21wZW5zYXRpb24tZGVmL21haW4nDQogICAgICB9DQogICAgfSwNCiAgICBnZXRUZXN0UGFnZSgpIHsNCiAgICAgIGlmICh0aGlzLnBkSW5mbykgew0KICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+aWsOWNlea1i+ivleivpuaDhScsIHF1ZXJ5OiB7c2hvd1BhZ2VGbGFnOiAnMSd9LCBwYXJhbXM6IHRoaXMucGRJbmZvfSkNCiAgICAgICAgdGhpcy5zaG93VGVzdFJlc3VsdEZsYWcgPSB0cnVlOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/ov5Tlm57kuqflk4HlrqHmoLjmn6Xor6LpobXpnaINCiAgICBiYWNrUGFnZSgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL2NvbW1vZGl0eS1hdWRpdC9wZC1hdWRpdC1pbmZvL3BkLWF1ZGl0LWFwcGx5J30pDQogICAgfSwNCiAgICBhdWRpdENsaWNrKCkgew0KICAgICAgaWYgKHRoaXMuc2hvd0F1ZGl0RGF0YUZsYWcgPT09ICdOJykgew0KICAgICAgICB0aGlzLnF1aWNraWNvbl9hdWRpdCA9ICJlbC1pY29uLWFycm93LWRvd24iOw0KICAgICAgICB0aGlzLnNob3dBdWRpdERhdGFGbGFnID0gJ1knDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnF1aWNraWNvbl9hdWRpdCA9ICJlbC1pY29uLWFycm93LXJpZ2h0IjsNCiAgICAgICAgdGhpcy5zaG93QXVkaXREYXRhRmxhZyA9ICdOJw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/ojrflj5blpI3pgInmoYbooajmoLzmlbDmja4NCiAgICBjaGFuZ2VGdW4odmFsKSB7DQogICAgICB0aGlzLmNoZWNrQm94RGF0YSA9IHZhbDsNCiAgICAgIGlmICh2YWwubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLnBkVXBkYXRlRmxhZyA9IHRydWUNCiAgICAgIH0NCiAgICAgIGlmICh2YWwubGVuZ3RoID4gMSkgew0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudCA9IFtdDQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdGhpcy5wZFRhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQucHVzaCh2YWxbaV0ucGREZWZpbmVDb250ZW50KTsNCiAgICAgICAgfQ0KICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMucGRUYWJsZUZvcm0sIHRoaXMucGRUYWJsZUZvcm0ucGREZWZpbmVDb250ZW50KTsNCiAgICAgICAgdGhpcy5wZFRhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQgPSB0aGlzLnBkVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudDsNCiAgICAgICAgdGhpcy5wZFVwZGF0ZUZsYWcgPSB0cnVlOw0KICAgICAgICB0aGlzLmRhdGFTZWxlY3QgPSB0cnVlDQogICAgICB9DQogICAgICBpZiAodmFsLmxlbmd0aCA9PSAxKSB7DQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5wZFRhYmxlRm9ybSwgdmFsWzBdKTsNCiAgICAgICAgdGhpcy5wZFRhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQgPSBbdmFsWzBdLnBkRGVmaW5lQ29udGVudF07DQogICAgICAgIHRoaXMucGRVcGRhdGVGbGFnID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5kYXRhU2VsZWN0ID0gdHJ1ZQ0KICAgICAgfQ0KICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMCkgew0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudCA9IFtdOw0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyA9ICcnOw0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOw0KICAgICAgICB0aGlzLnBkVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJzsNCiAgICAgICAgdGhpcy5wZFVwZGF0ZUZsYWcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5kYXRhU2VsZWN0ID0gZmFsc2U7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLnBkVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2hhbmdlUnVsZURhdGEodmFsKSB7DQogICAgICB0aGlzLmNoZWNrUnVsZURhdGEgPSB2YWw7DQogICAgICBpZiAodmFsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdGhpcy5ydWxlVXBkYXRlRmxhZyA9IHRydWUNCiAgICAgIH0NCiAgICAgIGlmICh2YWwubGVuZ3RoID09IDEpIHsNCiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnJ1bGVUYWJsZUZvcm0sIHZhbFswXSk7DQogICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZSA9IFt2YWxbMF0ucGRGb3JtdWxhUnVsZUNvZGVdOw0KICAgICAgICB0aGlzLnJ1bGVVcGRhdGVGbGFnID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5ydWxlU2VsZWN0ID0gdHJ1ZQ0KICAgICAgfQ0KICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMCkgew0KICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUgPSBbXTsNCiAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyA9ICcnOw0KICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7DQogICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJyc7DQogICAgICAgIHRoaXMucnVsZVVwZGF0ZUZsYWcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5ydWxlU2VsZWN0ID0gZmFsc2U7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLnJ1bGVUYWJsZUZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZVBhZ2VEaWFsb2coKSB7DQogICAgICB0aGlzLmRpYWxvZ1Nob3cgPSBmYWxzZQ0KICAgICAgdGhpcy5kaWFsb2dDb21wb25lbnQgPSAnJw0KICAgIH0sDQogICAgY2hhbmdlRm9ybXVsYURhdGEodmFsKSB7DQogICAgICB0aGlzLmNoZWNrRm9ybXVsYURhdGEgPSB2YWw7DQogICAgICBpZiAodmFsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdGhpcy5mb3JtdWxhVXBkYXRlRmxhZyA9IHRydWUNCiAgICAgIH0NCiAgICAgIGlmICh2YWwubGVuZ3RoID09IDEpIHsNCiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm11bGFUYWJsZUZvcm0sIHZhbFswXSk7DQogICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZSA9IFt2YWxbMF0ucGRGb3JtdWxhUnVsZUNvZGVdOw0KICAgICAgICB0aGlzLmZvcm11bGFVcGRhdGVGbGFnID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5mb3JtdWxhU2VsZWN0ID0gdHJ1ZQ0KICAgICAgfQ0KICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMCkgew0KICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUgPSBbXTsNCiAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcyA9ICcnOw0KICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7DQogICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJyc7DQogICAgICAgIHRoaXMuZm9ybXVsYVVwZGF0ZUZsYWcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5mb3JtdWxhU2VsZWN0ID0gZmFsc2U7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm11bGFUYWJsZUZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBpc1Nob3dOZWdhdGl2ZShyb3cpIHsNCiAgICAgIGNvbnN0IHZhbCA9IHJvdzsNCiAgICAgIGxldCBZU3VtID0gMDsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh2YWxbaV0ucGRBdWRpdENvbmN0aGlzID09ICdZJykgew0KICAgICAgICAgIFlTdW0rKzsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKFlTdW0gPCB2YWwubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuc2hvd05lZ2F0aXZlRmxhZyA9IHRydWU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNob3dOZWdhdGl2ZUZsYWcgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-audit/product-audit/productAudit","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :label=\"$t('route.productAudit')\" @backTo=\"backPage\"/>\r\n    <cus-product-info></cus-product-info>\r\n    <div>\r\n      <cus-form-title :label=\"$t('i18nView.productDetail')\"/>\r\n      <el-form ref=\"auditForm\" :model=\"auditForm\" :rules=\"rules\" label-width=\"auto\"\r\n               style=\"margin-top: 33px\">\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px; padding-bottom: 15px\">\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdDesignPage\">{{ $t('productAudit.productBase') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdSalePage\">{{ $t('productAudit.productSale') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdUWPage\">{{ $t('productAudit.productAcceptance') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdAUPage\">{{ $t('productAudit.productUnderwriting') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n        </el-row>\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdRWPage\">{{ $t('productAudit.productRenewal') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdPVPage\">{{ $t('productAudit.productPreservation') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdCLPage\">{{ $t('productAudit.productClaim') }}<i class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getTestPage\">{{ $t('productAudit.productTestResult') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n        </el-row>\r\n        <div v-if=\"this.pdAuditType=='3'\">\r\n          <cus-form-title :label=\"$t('route.productDiscontinuation')\"/>\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <cus-col :span=\"8\">\r\n              <el-form-item>{{ $t('productAudit.pdVerDisDate') }}\r\n                <el-tag type=\"info\">{{ auditForm.stopDate }}</el-tag>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <cus-col :span=\"16\">\r\n            </cus-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <cus-col :span=\"8\">\r\n              <el-form-item>{{ $t('productAudit.pdVerDisResn') }}\r\n                <el-tag type=\"info\">{{ auditForm.stopReason }}</el-tag>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <el-col :span=\"16\">\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <div v-if=\"this.pdAuditType!='3'\">\r\n          <cus-form-title :label=\"$t('i18nView.pdDetailsAudit')\"/>\r\n          <div v-if=\"this.pdAuditType=='1' ||this.pdReviseType =='1'\" style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n            <cus-table-title :label=\"$t('productAudit.pdPostAudit')\"></cus-table-title>\r\n            <el-table ref=\"multipleTable\" :data=\"configs6\" align=\"center\" border\r\n                      class=\"wraper-table\" element-loading-text=\"Loading\" fit highlight-current-row size=\"mini\"\r\n                      @selection-change=\"changeFun\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\"></el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                               type=\"index\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdDefineContent')\" align=\"center\"\r\n                               prop=\"pdDefineContent\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdDefineContent | filter_pdNodeCode }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdAuditConcthis')\" align=\"center\"\r\n                               prop=\"pdAuditConcthis\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdAuditConcthis | filter_pdAuditConcthis }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               align=\"center\" prop=\"pdIsCancelDefinition\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.notPassOpinion')\"\r\n                               align=\"center\"\r\n                               prop=\"pdNotPassOpinion\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form ref=\"pdTableForm\" :model=\"pdTableForm\" :rules=\"pdTableForm_rules\"\r\n                     label-width=\"auto\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <cus-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdDefineContent')\" prop=\"pdDefineContent\">\r\n                    <el-select v-model=\"pdTableForm.pdDefineContent\" :disabled=\"dataSelect\" clearable filterable\r\n                               multiple>\r\n                      <el-option v-for=\"item in productNodeList\" :key=\"item.value\" :disabled=\"item.disabled\"\r\n                                 :label=\"item.label\"\r\n                                 :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"16\"></cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.pdAuditConcthis')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"pdTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                      <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('productAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"pdTableForm.pdIsCancelDefinition\" :disabled=\"pdTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"pdTableForm.pdNotPassOpinion\" :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                              :disabled=\"pdTableForm.pdAuditConcthis=='Y'\" maxlength=\"130\" show-word-limit\r\n                              type=\"textarea\"></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row>\r\n                <cus-col :span=\"24\" align=\"right\">\r\n                  <el-button :icon=\"this.pdUpdateFlag? 'el-icon-success': 'el-icon-plus'\" size=\"small\" type=\"primary\"\r\n                             @click=\"addPdAuditTableData\">{{\r\n                      this.pdUpdateFlag ? $t('productAudit.update') :\r\n                        $t('productAudit.addData')\r\n                    }}\r\n                  </el-button>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div v-if=\"this.showRuleTableFlag\" style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n            <cus-table-title :label=\"$t('productAudit.rulesPostAudit')\"></cus-table-title>\r\n            <el-table ref=\"multipleRuleTable\" :data=\"configs7\" align=\"center\" border class=\"wraper-table\"\r\n                      element-loading-text=\"Loading\" fit highlight-current-row\r\n                      size=\"mini\" @selection-change=\"changeRuleData\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                               type=\"index\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleCode')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleCode\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussType')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleType\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdRuleType }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDetails\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdRuleDetails }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleDec')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdAuditConcthis')\" align=\"center\"\r\n                               prop=\"pdAuditConcthis\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdAuditConcthis | filter_pdAuditConcthis }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               align=\"center\" prop=\"pdIsCancelDefinition\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.notPassOpinion')\"\r\n                               align=\"center\"\r\n                               prop=\"pdNotPassOpinion\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form ref=\"ruleTableForm\" :model=\"ruleTableForm\" :rules=\"ruleTableForm_rules\"\r\n                     label-width=\"auto\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <cus-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdRules')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select v-model=\"ruleTableForm.pdFormulaRuleCode\" :disabled=\"ruleSelect\" clearable filterable\r\n                               multiple\r\n                               style=\"width: 238px\" value-key=\"label\">\r\n                      <el-option v-for=\"item in ruleNodeList\" :key=\"item.key\" :disabled=\"item.disabled\"\r\n                                 :label=\"item.label\" :value=\"item\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"16\"></cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.pdAuditConcthis')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"ruleTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                      <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('productAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"ruleTableForm.pdIsCancelDefinition\"\r\n                               :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"ruleTableForm.pdNotPassOpinion\" :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                              :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\" maxlength=\"130\" show-word-limit\r\n                              type=\"textarea\"></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\" align=\"right\">\r\n                  <el-button :icon=\"this.ruleUpdateFlag? 'el-icon-success': 'el-icon-plus'\" size=\"small\"\r\n                             type=\"primary\"\r\n                             @click=\"addRuleAuditTableData\">{{\r\n                      this.ruleUpdateFlag ? $t('productAudit.update') :\r\n                        $t('productAudit.addData')\r\n                    }}\r\n                  </el-button>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div v-if=\"this.showFormulaTableFlag\" style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n            <cus-table-title :label=\"$t('productAudit.formulaPostAudit')\"></cus-table-title>\r\n            <el-table ref=\"multipleFormulaTable\" :data=\"configs8\" align=\"center\" border class=\"wraper-table\"\r\n                      element-loading-text=\"Loading\" fit highlight-current-row\r\n                      size=\"mini\" @selection-change=\"changeFormulaData\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                               type=\"index\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaCode')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleCode\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussType')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleType\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdFormulaType }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDetails\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaDec')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdAuditConcthis')\" align=\"center\"\r\n                               prop=\"pdAuditConcthis\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdAuditConcthis | filter_pdAuditConcthis }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               align=\"center\"\r\n                               prop=\"pdIsCancelDefinition\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.notPassOpinion')\"\r\n                               align=\"center\"\r\n                               prop=\"pdNotPassOpinion\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form ref=\"formulaTableForm\" :model=\"formulaTableForm\" :rules=\"formulaTableForm_rules\"\r\n                     label-width=\"auto\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <cus-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdFormulas')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select v-model=\"formulaTableForm.pdFormulaRuleCode\" :disabled=\"formulaSelect\" clearable\r\n                               filterable\r\n                               multiple\r\n                               style=\"width: 238px\" value-key=\"label\">\r\n                      <el-option v-for=\"item in formulaNodeList\" :key=\"item.key\" :disabled=\"item.disabled\"\r\n                                 :label=\"item.label\"\r\n                                 :value=\"item\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"16\"></cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.pdAuditConcthis')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"formulaTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                      <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('productAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"formulaTableForm.pdIsCancelDefinition\"\r\n                               :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"formulaTableForm.pdNotPassOpinion\"\r\n                              :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                              :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\" maxlength=\"130\" show-word-limit\r\n                              type=\"textarea\"></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\" align=\"right\">\r\n                  <el-button :icon=\"this.formulaUpdateFlag? 'el-icon-success': 'el-icon-plus'\" size=\"small\"\r\n                             type=\"primary\"\r\n                             @click=\"addFormulaAuditTableData\">{{\r\n                      this.formulaUpdateFlag ? $t('productAudit.update') :\r\n                        $t('productAudit.addData')\r\n                    }}\r\n                  </el-button>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n        <!--审核结论模块-->\r\n        <cus-form-title :label=\"$t('productAudit.pdAuditResult')\"/>\r\n        <el-form ref=\"pdAuditDetailInfo\" :model=\"pdAuditDetailInfo\" :rules=\"auditRules\"\r\n                 label-width=\"auto\" style=\"margin-top: 33px\">\r\n          <el-row :gutter=\"10\">\r\n            <cus-col :span=\"24\">\r\n              <el-form-item :label=\"$t('i18nView.pdAllAuditConc')\" prop=\"pdAuditConc\">\r\n                <el-radio-group v-model=\"pdAuditDetailInfo.pdAuditConc\">\r\n                  <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                  <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                  <el-radio v-if=\"this.pdAuditType!='3'\" label=\"X\">{{ $t('productAudit.cancelDefinition') }}\r\n                  </el-radio>\r\n                  <el-radio v-if=\"this.pdAuditType!='2' && this.pdAuditType!='3'\" label=\"Z\">\r\n                    {{ $t('productAudit.productStop') }}\r\n                  </el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </cus-col>\r\n          </el-row>\r\n          <el-row v-if=\"pdAuditDetailInfo.pdAuditConc=='N'\" :gutter=\"10\">\r\n            <cus-col :span=\"24\">\r\n              <el-form-item :label=\"$t('productAudit.returnFunctionPoints')\">\r\n                <el-tag type=\"info\">{{ this.returnFunctionPoints }}</el-tag>\r\n              </el-form-item>\r\n            </cus-col>\r\n          </el-row>\r\n          <div>\r\n            <el-row v-if=\"this.pdAuditDetailInfo.pdAuditConc=='Y' && this.pdAuditType!='3'\" :gutter=\"10\">\r\n              <cus-col :span=\"8\">\r\n                <el-form-item :label=\"$t('productAudit.postContent')\">\r\n                  <span v-if=\"this.pdAuditType=='1' || this.pdReviseType=='1'\">{{ $t('route.ProductionRelease') }}</span>\r\n                  <span\r\n                    v-if=\"this.showFormulaTableFlag||this.showRuleTableFlag\">{{\r\n                      $t('productAudit.ruleOrFormulaRelease')\r\n                    }}</span>\r\n                  <i :class=\"quickicon_audit\" style=\"cursor: pointer\" @click=\"auditClick\"></i>\r\n                </el-form-item>\r\n              </cus-col>\r\n              <cus-col :span=\"8\">\r\n                <el-link @click=\"showFileReleasePage\">{{ $t('productAudit.pdFileContent') }}<i class=\"books\">\r\n                  <svg-icon icon-class=\"books\"/>\r\n                </i>\r\n                </el-link>\r\n              </cus-col>\r\n              <cus-col :span=\"8\">\r\n              </cus-col>\r\n            </el-row>\r\n            <div v-if=\"showAuditDataFlag==='Y'\">\r\n              <el-row :gutter=\"10\">\r\n                <cus-col v-if=\"(this.pdAuditType=='1' || this.pdReviseType=='1') && pdAuditDetailInfo.pdAuditConc=='Y'\"\r\n                         :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.pdPostContent')\">\r\n                    <el-tag type=\"info\">{{ pdAuditDetailInfo.pdReleContdet }}</el-tag>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n            </div>\r\n            <div v-if=\"this.showRuleTableFlag && pdAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\"\r\n                 style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n              <cus-table-title :label=\"$t('productAudit.rulesPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"configs4\" :span=\"8\" align=\"center\" border class=\"wraper-table\"\r\n                        element-loading-text=\"Loading\"\r\n                        fit highlight-current-row size=\"mini\">\r\n                <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                                 type=\"index\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleCode')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleCode\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussType')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleType\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdRuleType }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleDetails\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdRuleDetails }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleDec')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <div v-if=\"this.showFormulaTableFlag && pdAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\"\r\n                 style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n              <cus-table-title :label=\"$t('productAudit.formulaPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"configs5\" align=\"center\" border element-loading-text=\"Loading\" size=\"mini\">\r\n                <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                                 type=\"index\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaCode')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleCode\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussType')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleType\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdFormulaType }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleDetails\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaDec')\"\r\n                                 align=\"center\"\r\n                                 prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <el-row v-if=\"this.pdAuditType!='3'&&pdAuditDetailInfo.pdAuditConc=='Y'\" :gutter=\"10\">\r\n              <cus-col :span=\"24\">\r\n                <el-form-item :label=\"$t('productAudit.pdReleType')\" prop=\"pdReleType\">\r\n                  <cus-radio v-model=\"pdAuditDetailInfo.pdReleType\" :codetype=\"'releasetype'\"></cus-radio>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"20\">\r\n                <el-form-item :label=\"$t('i18nView.auditContent')\" prop=\"pdAuditIdea\">\r\n                  <el-input v-model=\"pdAuditDetailInfo.pdAuditIdea\" :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                            maxlength=\"130\" show-word-limit type=\"textarea\"></el-input>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n          </div>\r\n        </el-form>\r\n        <el-row :gutter=\"10\">\r\n          <cus-col :span=\"24\" align=\"right\">\r\n            <el-button icon=\"el-icon-finished\" size=\"small\" type=\"primary\" @click=\"auditPass()\">\r\n              {{ $t('productAudit.auditBut') }}\r\n            </el-button>\r\n            <el-button icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"refresh()\">\r\n              {{ $t('productAudit.refresh') }}\r\n            </el-button>\r\n          </cus-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n    <el-dialog v-if=\"showFileReleaseFlag\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :visible.sync=\"showFileReleaseFlag\" append-to-body center width=\"80%\">\r\n      <pdFileRelease :pdInfo=\"pdInfo\" @bringPdFileAuditData=\"bringPdFileAuditData\"\r\n                     @changeDialogFileRelease=\"changeDialogFileRelease\"></pdFileRelease>\r\n    </el-dialog>\r\n\r\n    <cus-page-dialog :component=\"dialogComponent\" :dialogShow=\"dialogShow\" :dialogTitle=\"dialogTitle\"\r\n                     @close=\"closePageDialog\"></cus-page-dialog>\r\n    <el-dialog v-if=\"showTestResultFlag\" v-dialog-drag :close-on-click-modal=\"false\" :visible.sync=\"showTestResultFlag\"\r\n               append-to-body center width=\"80%\">\r\n      <cus-page-title-back :isDiablg=\"true\" :label=\"$t('productAudit.productTestResult')\"\r\n                           @backTo=\"showTestResultFlag=false\"/>\r\n      <pd-test-result :pdInfo=\"pdInfo\"></pd-test-result>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  addAuditInfoData,\r\n  findNodeFormulaList,\r\n  findNodeRulesList,\r\n  queryReviseData,\r\n  queryStop\r\n} from \"@/api/basicinfo/pdauditinfo\";\r\nimport pdFileRelease from \"@/views/commodity-audit/product-audit/pdFileRelease\"\r\nimport pdTestResult from \"@/views/commodity-audit/product-audit/pdTestResult\"\r\nimport {closeVisitTag} from \"@/utils/tagsView\"\r\n\r\nlet _this;\r\nexport default {\r\n  name: 'productAudit',\r\n  filters: {\r\n    filter_pdNodeCode(val) {\r\n      let returnText = '';\r\n      switch (val) {\r\n        case 'productRuleFlag':\r\n          returnText = '产品规则订正';\r\n          break;\r\n        case 'productFormulaFlag':\r\n          returnText = '产品公式订正';\r\n          break;\r\n        case 'productInfoFlag':\r\n          returnText = '产品框架定义';\r\n          break;\r\n        case 'productDistributionFlag':\r\n          returnText = '产品销售信息';\r\n          break;\r\n        case 'productCoverFlag':\r\n          returnText = '产品承保信息';\r\n          break;\r\n        case 'productUnderwritingFlag':\r\n          returnText = '产品核保信息';\r\n          break;\r\n        case 'productPreservationFlag':\r\n          returnText = '产品保全信息';\r\n          break;\r\n        case 'productHePeiFlag':\r\n          returnText = '产品核赔信息';\r\n          break;\r\n        case 'productRenewalFlag':\r\n          returnText = '产品续期续保信息';\r\n          break;\r\n      }\r\n      return returnText;\r\n    },\r\n    filter_pdAuditConcthis(code) {\r\n      return _this.getCodeName('pdAuditConc', code)\r\n    },\r\n    filter_pdIsCancelDefinition(code) {\r\n      return _this.getCodeName('cancelDefinition', code)\r\n    },\r\n    filter_pdRuleType(code) {\r\n      return _this.getCodeName('ruleBusinessModule', code)\r\n    },\r\n    filter_pdFormulaType(code) {\r\n      return _this.getCodeName('ruleBusinessModule', code)\r\n    },\r\n    filter_pdRuleDetails(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    },\r\n    filter_pdFormulaDetails(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    }\r\n  },\r\n  data() {\r\n    _this = this;\r\n    return {\r\n      dialogShow: false,\r\n      dialogTitle: '',\r\n      dialogComponent: '',\r\n      nodeOptions: [\r\n        {'key': 'productInfoFlag', 'label': '产品框架定义'},\r\n        {'key': 'productDistributionFlag', 'label': '产品销售信息'},\r\n        {'key': 'productCoverFlag', 'label': '产品承保信息'},\r\n        {'key': 'productUnderwritingFlag', 'label': '产品核保信息'},\r\n        {'key': 'productRenewalFlag', 'label': '产品续期续保信息'},\r\n        {'key': 'productPreservationFlag', 'label': '产品保全信息'},\r\n        {'key': 'productHePeiFlag', 'label': '产品核赔信息'},\r\n        {'key': 'productRuleFlag', 'label': '产品规则订正'},\r\n        {'key': 'productFormulaFlag', 'label': '产品公式订正'}],\r\n      returnFunctionPoints: [],\r\n      pdFileAuditData: [],\r\n      pdInfo: {},\r\n      auditForm: {\r\n        stopDate: '',\r\n        stopReason: '',\r\n      },\r\n      //内容定义表格\r\n      pdTableForm: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditNotesInfoId: '',\r\n        pdDefineContent: [],\r\n        pdAuditConcthis: '',\r\n        pdIsCancelDefinition: '',\r\n        pdNotPassOpinion: ''\r\n      },\r\n      ruleTableForm: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditNotesInfoId: '',\r\n        pdDefineContent: '',\r\n        pdReviseType: '',\r\n        pdFormulaRuleCode: [],\r\n        pdFormulaRuleType: '',\r\n        pdFormulaRuleDetails: '',\r\n        pdFormulaRuleDescribe: '',\r\n        pdAuditConcthis: '',\r\n        pdIsCancelDefinition: '',\r\n        pdNotPassOpinion: ''\r\n      },\r\n      formulaTableForm: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditNotesInfoId: '',\r\n        pdDefineContent: '',\r\n        pdReviseType: '',\r\n        pdFormulaRuleCode: [],\r\n        pdFormulaRuleType: '',\r\n        pdFormulaRuleDetails: '',\r\n        pdFormulaRuleDescribe: '',\r\n        pdAuditConcthis: '',\r\n        pdIsCancelDefinition: '',\r\n        pdNotPassOpinion: ''\r\n      },\r\n      pdAuditInfo: {\r\n        pdType: '1',\r\n        pdVerId: '',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditConc: '',\r\n        pdAuditStaff: '',\r\n        pdAuditDate: '',\r\n        pdIsPostReturn: '',\r\n        pdIsReviewReturn: '',\r\n        pdAuditTimes: '',\r\n        pdReturnTimes: '',\r\n        pdReleType: '',\r\n        pdReleContent: '',\r\n        pdReleContdet: []\r\n      },\r\n      pdAuditDetailInfo: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditOrderNum: '',\r\n        pdAuditInfoId: '',\r\n        pdAuditConc: '',\r\n        pdAuditStaff: '',\r\n        pdAuditDate: '',\r\n        pdAuditIdea: '',\r\n        pdReturnFuncNode: [],\r\n        pdReleType: '',\r\n        pdReleContent: '',\r\n        pdReleContdet: []\r\n      },\r\n      //产品形态\r\n      pdAuditType: '',\r\n      pdReviseType: '',\r\n      pdReviseDate: '',\r\n      pdReturnFuncCode: '',\r\n      productNodeList: [],\r\n      ruleNodeList: [],\r\n      formulaNodeList: [],\r\n      showAuditDataFlag: 'N',\r\n      dialogTableVisible: false,\r\n      dialogTableVisible1: false,\r\n      showFileReleaseFlag: false,\r\n      showRuleTableFlag: false,\r\n      showFormulaTableFlag: false,\r\n      showTestResultFlag: false,\r\n      pdUpdateFlag: false,\r\n      ruleUpdateFlag: false,\r\n      formulaUpdateFlag: false,\r\n      dataSelect: false,\r\n      ruleSelect: false,\r\n      formulaSelect: false,\r\n      showNegativeFlag: false,\r\n      quickicon_audit: \"el-icon-arrow-right\",\r\n      //表格数据\r\n      configs4: [],\r\n      configs5: [],\r\n      configs6: [],\r\n      configs7: [],\r\n      configs8: [],\r\n      checkBoxData: [],\r\n      checkRuleData: [],\r\n      checkFormulaData: [],\r\n      //查询参数\r\n      params: {},\r\n      //检验规则\r\n      rules: {},\r\n      pdTableForm_rules: {\r\n        pdDefineContent: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdDefineContent'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditConcthis: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConcthis'),\r\n          trigger: 'change'\r\n        }],\r\n        pdNotPassOpinion: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      ruleTableForm_rules: {\r\n        pdFormulaRuleCode: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdDefineContent'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditConcthis: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConcthis'),\r\n          trigger: 'change'\r\n        }],\r\n        pdNotPassOpinion: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      formulaTableForm_rules: {\r\n        pdFormulaRuleCode: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdDefineContent'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditConcthis: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConcthis'),\r\n          trigger: 'change'\r\n        }],\r\n        pdNotPassOpinion: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      auditRules: {\r\n        pdAuditConc: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConc'),\r\n          trigger: 'change'\r\n        }],\r\n        pdReleType: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdReleType'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditIdea: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdAuditIdea'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    'configs6'() {\r\n      this.isShowNegative(this.configs6)\r\n    },\r\n    'configs7'() {\r\n      this.isShowNegative(this.configs7)\r\n    },\r\n    'configs8'() {\r\n      this.isShowNegative(this.configs8)\r\n    },\r\n    //产品定义内容\r\n    'pdTableForm.pdDefineContent'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const pdNode of this.productNodeList) {\r\n          pdNode.disabled = false\r\n        }\r\n      } else {\r\n        if (this._.includes(selectedCodes, '000000')) {\r\n          for (const pdNode of this.productNodeList) {\r\n            pdNode.disabled = pdNode.value !== '000000'\r\n          }\r\n        } else {\r\n          for (const pdNode of this.productNodeList) {\r\n            pdNode.disabled = pdNode.value === '000000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //产品发布审核结论\r\n    'pdTableForm.pdAuditConcthis'() {\r\n      const val = this.pdTableForm.pdAuditConcthis;\r\n      if (val == 'Y') {\r\n        this.pdTableForm.pdIsCancelDefinition = 'N';\r\n        this.pdTableForm.pdNotPassOpinion = '';\r\n        this.pdTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n      } else {\r\n        this.pdTableForm_rules.pdNotPassOpinion = [{\r\n          required: true,\r\n          message: this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    },\r\n    //产品规则订正内容\r\n    'ruleTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const ruleNode of this.ruleNodeList) {\r\n          ruleNode.disabled = false\r\n        }\r\n      } else {\r\n        let codeList = [];\r\n        for (const code of selectedCodes) {\r\n          codeList.push(code.value)\r\n        }\r\n        if (this._.includes(codeList, '000')) {\r\n          for (const ruleNode of this.ruleNodeList) {\r\n            ruleNode.disabled = ruleNode.value !== '000'\r\n          }\r\n        } else {\r\n          for (const ruleNode of this.ruleNodeList) {\r\n            ruleNode.disabled = ruleNode.value === '000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //产品规则订正审核意见\r\n    'ruleTableForm.pdAuditConcthis'() {\r\n      const val = this.ruleTableForm.pdAuditConcthis;\r\n      if (val == 'Y') {\r\n        this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n        this.ruleTableForm.pdNotPassOpinion = '';\r\n        this.ruleTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n      } else {\r\n        this.ruleTableForm_rules.pdNotPassOpinion = [{\r\n          required: true,\r\n          message: this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    },\r\n    //产品公式订正公式\r\n    'formulaTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const formulaNode of this.formulaNodeList) {\r\n          formulaNode.disabled = false\r\n        }\r\n      } else {\r\n        let codeList = [];\r\n        for (const code of selectedCodes) {\r\n          codeList.push(code.value)\r\n        }\r\n        if (this._.includes(codeList, '000')) {\r\n          for (const formulaNode of this.formulaNodeList) {\r\n            formulaNode.disabled = formulaNode.value !== '000'\r\n          }\r\n        } else {\r\n          for (const formulaNode of this.formulaNodeList) {\r\n            formulaNode.disabled = formulaNode.value === '000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //产品公式订正审核结论\r\n    'formulaTableForm.pdAuditConcthis'() {\r\n      const val = this.formulaTableForm.pdAuditConcthis;\r\n      //审核通过\r\n      if (val == 'Y') {\r\n        this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n        this.formulaTableForm.pdNotPassOpinion = '';\r\n        this.formulaTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n      } else {\r\n        this.formulaTableForm_rules.pdNotPassOpinion = [{\r\n          required: true,\r\n          message: this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    },\r\n    //整体审核结论\r\n    'pdAuditDetailInfo.pdAuditConc'() {\r\n      const val = this.pdAuditDetailInfo.pdAuditConc;\r\n      if (val == 'Y') {\r\n        if (this.pdAuditType == '3') {\r\n          return\r\n        }\r\n        if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n          this.pdAuditDetailInfo.pdReleContent = '1';\r\n          if (this.configs6.length != this.productNodeList.length - 1) {\r\n            this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n              type: 'warning'\r\n            }).then(() => {\r\n              let nodeList = [];\r\n              for (const pdNode of this.configs6) {\r\n                nodeList.push(pdNode.pdDefineContent)\r\n              }\r\n              for (let i = 1; i < this.productNodeList.length; i++) {\r\n                let nodeName = this.productNodeList[i].value;\r\n                if (!this._.includes(nodeList, nodeName)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: nodeName,\r\n                    pdAuditConcthis: 'Y',\r\n                    pdIsCancelDefinition: 'N',\r\n                    pdNotPassOpinion: ''\r\n                  })\r\n                }\r\n              }\r\n              this.auditData()\r\n            }).catch(() => {\r\n              this.auditData()\r\n            })\r\n          } else {\r\n            this.auditData()\r\n            if (this.pdAuditDetailInfo.pdReleContdet.length < this.configs6.length) {\r\n              this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n\r\n              }).catch(() => {\r\n\r\n              })\r\n            }\r\n          }\r\n        }\r\n        //产品规则公式订正\r\n        if (this.pdReviseType === '0') {\r\n          this.pdAuditDetailInfo.pdReleContent = '2';\r\n          if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n            if (this.configs7.length != this.ruleNodeList.length - 1 || this.configs8.length != this.formulaNodeList.length - 1) {\r\n              this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList1 = [];\r\n                let nodeList2 = [];\r\n                for (const ruleNode of this.configs7) {\r\n                  nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                }\r\n                for (const formualNode of this.configs8) {\r\n                  nodeList2.push(formualNode.pdFormulaRuleCode)\r\n                }\r\n                for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                  let nodeName = this.ruleNodeList[i].value;\r\n                  if (!this._.includes(nodeList1, nodeName)) {\r\n                    this.configs7.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                      pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'Y',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                  let nodeName = this.formulaNodeList[i].value;\r\n                  if (!this._.includes(nodeList2, nodeName)) {\r\n                    this.configs8.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                      pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'Y',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                this.auditRuleData();\r\n                this.auditFormulaData()\r\n              }).catch(() => {\r\n                this.auditRuleData();\r\n                this.auditFormulaData()\r\n              })\r\n            } else {\r\n              this.auditRuleData();\r\n              this.auditFormulaData();\r\n              if (this.configs4.length < this.configs7.length || this.configs5.length < this.configs8.length) {\r\n                this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n\r\n                }).catch(() => {\r\n\r\n                })\r\n              }\r\n            }\r\n          } else {\r\n            if (this.showRuleTableFlag) {\r\n              if (this.configs7.length != this.ruleNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const pdNode of this.configs7) {\r\n                    nodeList.push(pdNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs7.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.auditRuleData()\r\n                }).catch(() => {\r\n                  this.auditRuleData()\r\n                })\r\n              } else {\r\n                this.auditRuleData();\r\n                if (this.configs4.length < this.configs7.length) {\r\n                  this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n\r\n                  }).catch(() => {\r\n\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.showFormulaTableFlag) {\r\n              if (this.configs8.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const pdNode of this.configs8) {\r\n                    nodeList.push(pdNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs8.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.auditFormulaData()\r\n                }).catch(() => {\r\n                  this.auditFormulaData()\r\n                })\r\n              } else {\r\n                this.auditFormulaData();\r\n                if (this.configs5.length < this.configs8.length) {\r\n                  this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n\r\n                  }).catch(() => {\r\n\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //审核不通过\r\n      if (val == 'N') {\r\n        if (this.pdAuditType == '3') {\r\n          this.returnFunctionPoints = [\"产品停售\"];\r\n          return\r\n        }\r\n        if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n          if (this.configs6.length != this.productNodeList.length - 1) {\r\n            this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n              type: 'warning'\r\n            }).then(() => {\r\n              let nodeList = [];\r\n              for (const pdNode of this.configs6) {\r\n                nodeList.push(pdNode.pdDefineContent)\r\n              }\r\n              for (let i = 1; i < this.productNodeList.length; i++) {\r\n                let nodeName = this.productNodeList[i].value;\r\n                if (!this._.includes(nodeList, nodeName)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: nodeName,\r\n                    pdAuditConcthis: 'N',\r\n                    pdIsCancelDefinition: 'N',\r\n                    pdNotPassOpinion: '审核不通过'\r\n                  })\r\n                }\r\n              }\r\n              this.reBack()\r\n            }).catch(() => {\r\n              this.reBack()\r\n            })\r\n          } else {\r\n            this.reBack()\r\n          }\r\n        }\r\n        //产品规则公式订正\r\n        if (this.pdReviseType === '0') {\r\n          if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n            if (this.configs7.length != this.ruleNodeList.length - 1 || this.configs8.length != this.formulaNodeList.length - 1) {\r\n              this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList1 = [];\r\n                let nodeList2 = [];\r\n                for (const ruleNode of this.configs7) {\r\n                  nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                }\r\n                for (const formulaNode of this.configs8) {\r\n                  nodeList2.push(formulaNode.pdFormulaRuleCode)\r\n                }\r\n                for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                  let nodeName = this.ruleNodeList[i].value;\r\n                  if (!this._.includes(nodeList1, nodeName)) {\r\n                    this.configs7.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                      pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'N',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: '审核不通过'\r\n                    })\r\n                  }\r\n                }\r\n                for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                  let nodeName = this.formulaNodeList[i].value;\r\n                  if (!this._.includes(nodeList2, nodeName)) {\r\n                    this.configs8.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                      pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'N',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: '审核不通过'\r\n                    })\r\n                  }\r\n                }\r\n                this.ruleOrFormulaBack()\r\n              }).catch(() => {\r\n                this.ruleOrFormulaBack()\r\n              })\r\n            } else {\r\n              this.ruleOrFormulaBack()\r\n            }\r\n          } else {\r\n            if (this.showRuleTableFlag) {\r\n              if (this.configs7.length != this.ruleNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const ruleNode of this.configs7) {\r\n                    nodeList.push(ruleNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs7.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: '审核不通过'\r\n                      })\r\n                    }\r\n                  }\r\n                  this.ruleOrFormulaBack()\r\n                }).catch(() => {\r\n                  this.ruleOrFormulaBack()\r\n                })\r\n              } else {\r\n                this.ruleOrFormulaBack()\r\n              }\r\n            }\r\n            if (this.showFormulaTableFlag) {\r\n              if (this.configs8.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const formulaNode of this.configs8) {\r\n                    nodeList.push(formulaNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs8.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: '审核不通过'\r\n                      })\r\n                    }\r\n                  }\r\n                  this.ruleOrFormulaBack()\r\n                }).catch(() => {\r\n                  this.ruleOrFormulaBack()\r\n                })\r\n              } else {\r\n                this.ruleOrFormulaBack()\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {pdFileRelease, pdTestResult},\r\n  created() {\r\n    this.pdInfo = this.getPdData();\r\n    this.pdAuditType = this.pdInfo.defType;\r\n    this.pdAuditInfo.pdCode = this.pdInfo.pdCode;\r\n    this.pdAuditInfo.pdInfoId = this.pdInfo.id;\r\n    this.pdAuditInfo.pdVerId = this.pdInfo.pdVerId;\r\n    this.pdAuditDetailInfo.pdCode = this.pdInfo.pdCode;\r\n    this.pdAuditDetailInfo.pdInfoId = this.pdInfo.id;\r\n    if (this.pdAuditType == '1') {\r\n      this.queryPdInfoData()\r\n    }\r\n    if (this.pdAuditType == '2') {\r\n      this.queryReviseData()\r\n    }\r\n    if (this.pdAuditType == '3') {\r\n      this.queryStop()\r\n    }\r\n    this.cacheStrData('pdFileAuditTableback', null);\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    queryPdInfoData() {\r\n      this.productNodeList = [\r\n        {'key': '000000', 'value': '000000', 'label': '全部', 'disabled': false},\r\n        {'key': 'productInfoFlag', 'value': 'productInfoFlag', 'label': '产品框架定义', 'disabled': false},\r\n        {'key': 'productDistributionFlag', 'value': 'productDistributionFlag', 'label': '产品销售信息', 'disabled': false},\r\n        {'key': 'productCoverFlag', 'value': 'productCoverFlag', 'label': '产品承保信息', 'disabled': false},\r\n        {'key': 'productUnderwritingFlag', 'value': 'productUnderwritingFlag', 'label': '产品核保信息', 'disabled': false},\r\n        {'key': 'productRenewalFlag', 'value': 'productRenewalFlag', 'label': '产品续期续保信息', 'disabled': false},\r\n        {'key': 'productPreservationFlag', 'value': 'productPreservationFlag', 'label': '产品保全信息', 'disabled': false},\r\n        {'key': 'productHePeiFlag', 'value': 'productHePeiFlag', 'label': '产品核赔信息', 'disabled': false}\r\n      ];\r\n      this.pdAuditDetailInfo.pdReleType = '1';\r\n      this.$nextTick(() => {\r\n        this.$refs.pdTableForm.clearValidate()\r\n      })\r\n    },\r\n    //查询订正申请表数据\r\n    queryReviseData() {\r\n      this.pdAuditDetailInfo.pdReleType = '2';\r\n      queryReviseData(this.buildRequestData({\r\n        \"pdInfoId\": this.pdInfo.id,\r\n        \"pdVerId\": this.pdInfo.pdVerId\r\n      })).then(res => {\r\n        this.pdReviseType = res.data.pdReviseType;\r\n        this.pdReturnFuncCode = res.data.pdReturnFuncCode;\r\n        this.pdReviseDate = res.data.pdReviseDate;\r\n        const codes = this.pdReturnFuncCode.split(\",\");\r\n        if (this.pdReviseType === '1') {\r\n          this.productNodeList = [];\r\n          this.productNodeList.push({\r\n            key: '000000',\r\n            value: '000000',\r\n            label: '全部',\r\n            disabled: false\r\n          });\r\n          for (const item of codes) {\r\n            switch (item) {\r\n              case 'productInfoFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productInfoFlag',\r\n                  value: 'productInfoFlag',\r\n                  label: '产品框架定义',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productDistributionFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productDistributionFlag',\r\n                  value: 'productDistributionFlag',\r\n                  label: '产品销售信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productCoverFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productCoverFlag',\r\n                  value: 'productCoverFlag',\r\n                  label: '产品承保信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productUnderwritingFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productUnderwritingFlag',\r\n                  value: 'productUnderwritingFlag',\r\n                  label: '产品核保信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productPreservationFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productPreservationFlag',\r\n                  value: 'productPreservationFlag',\r\n                  label: '产品保全信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productHePeiFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productHePeiFlag',\r\n                  value: 'productHePeiFlag',\r\n                  label: '产品核赔信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productRenewalFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productRenewalFlag',\r\n                  value: 'productRenewalFlag',\r\n                  label: '产品续期续保信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n            }\r\n          }\r\n        }\r\n        if (this.pdReviseType === '0') {\r\n          for (const item of codes) {\r\n            switch (item) {\r\n              case 'productRuleFlag':\r\n                this.showRuleTableFlag = true;\r\n                this.findNodeRulesList(this.pdReviseDate);\r\n                break;\r\n              case 'productFormulaFlag':\r\n                this.showFormulaTableFlag = true;\r\n                this.findNodeFormulaList(this.pdReviseDate);\r\n                break;\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    queryStop() {\r\n      //查询停售时间, 停售原因\r\n      queryStop(this.buildRequestData({\"id\": this.pdInfo.id, \"pdVerId\": this.pdInfo.pdVerId})).then(res => {\r\n        this.auditForm.stopDate = res.data.pdVerDisDate;\r\n        this.auditForm.stopReason = res.data.pdVerDisResn\r\n      })\r\n    },\r\n    findNodeFormulaList(val) {\r\n      findNodeFormulaList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id, \"pdReviseDate\": val})).then(res => {\r\n        let formulaListNode = res.data;\r\n        if (formulaListNode.length > 0) {\r\n          this.formulaNodeList = [{'key': '000', 'value': '000', 'label': '全部', 'disabled': false}];\r\n        }\r\n        for (const item of formulaListNode) {\r\n          this.formulaNodeList.push({\r\n            key: item.pdCalcCode,\r\n            value: item.pdCalcCode,\r\n            label: item.pdCalcCode,\r\n            pdFormulaRuleType: item.pdBussType,\r\n            pdFormulaRuleDetails: item.pdBussDetailType,\r\n            pdFormulaRuleDescribe: item.pdCalcDesc,\r\n            disabled: false\r\n          });\r\n        }\r\n        this.$nextTick(() => {\r\n          this.$refs.formulaTableForm.clearValidate()\r\n        })\r\n      })\r\n    },\r\n    findNodeRulesList(val) {\r\n      findNodeRulesList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id, \"pdReviseDate\": val})).then(res => {\r\n        let ruleListNode = res.data;\r\n        if (ruleListNode.length > 0) {\r\n          this.ruleNodeList = [{'key': '000', 'value': '000', 'label': '全部', 'disabled': false}];\r\n        }\r\n        for (const item of ruleListNode) {\r\n          this.ruleNodeList.push({\r\n            key: item.pdRuleCode,\r\n            value: item.pdRuleCode,\r\n            label: item.pdRuleCode,\r\n            pdFormulaRuleType: item.pdRuleCls,\r\n            pdFormulaRuleDetails: item.pdRuleDtCls,\r\n            pdFormulaRuleDescribe: item.pdRuleDesc,\r\n            disabled: false\r\n          });\r\n        }\r\n        this.$nextTick(() => {\r\n          this.$refs.ruleTableForm.clearValidate()\r\n        })\r\n      })\r\n\r\n    },\r\n    getFuncCode(val) {\r\n      let returnText = '';\r\n      switch (val) {\r\n        case 'productRuleFlag':\r\n          returnText = returnText + '产品规则订正';\r\n          break;\r\n        case 'productFormulaFlag':\r\n          returnText = returnText + '产品公式订正';\r\n          break;\r\n        case 'productInfoFlag':\r\n          returnText = returnText + '产品框架定义';\r\n          break;\r\n        case 'productDistributionFlag':\r\n          returnText = returnText + '产品销售信息';\r\n          break;\r\n        case 'productCoverFlag':\r\n          returnText = returnText + '产品承保信息';\r\n          break;\r\n        case 'productUnderwritingFlag':\r\n          returnText = returnText + '产品核保信息';\r\n          break;\r\n        case 'productPreservationFlag':\r\n          returnText = returnText + '产品保全信息';\r\n          break;\r\n        case 'productHePeiFlag':\r\n          returnText = returnText + '产品核赔信息';\r\n          break;\r\n        case 'productRenewalFlag':\r\n          returnText = returnText + '产品续期续保信息';\r\n          break;\r\n      }\r\n      return returnText;\r\n    },\r\n    //审核完毕按钮\r\n    auditPass() {\r\n      this.$refs.pdAuditDetailInfo.validate((valid) => {\r\n        if (valid) {\r\n          this.pdAuditInfo.pdAuditConc = this.pdAuditDetailInfo.pdAuditConc;\r\n          this.pdAuditInfo.pdType = '1';\r\n          let pdoperAuditDetailNotesInfo = [];\r\n          //获取审核明细详情表格的值\r\n          if (this.pdReviseType == '1' || this.pdAuditType == '1') {\r\n            for (const item of this.configs6) {\r\n              pdoperAuditDetailNotesInfo.push(item)\r\n            }\r\n          }\r\n          if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n            for (const item of this.configs7) {\r\n              pdoperAuditDetailNotesInfo.push(item)\r\n            }\r\n            for (const item of this.configs8) {\r\n              pdoperAuditDetailNotesInfo.push(item)\r\n            }\r\n          } else {\r\n            if (this.showRuleTableFlag) {\r\n              for (const item of this.configs7) {\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }\r\n            if (this.showFormulaTableFlag) {\r\n              for (const item of this.configs8) {\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }\r\n          }\r\n          if (this.pdAuditDetailInfo.pdAuditConc == 'Y' && this.pdAuditDetailInfo.pdAuditConc == 'N' && pdoperAuditDetailNotesInfo.length == 0) {\r\n            this.notifyError(\"请完善审核明细表格数据\")\r\n            return\r\n          }\r\n          let map = {\r\n            \"pdAuditInfo\": this.pdAuditInfo,\r\n            \"pdAuditDetailInfo\": this.pdAuditDetailInfo,\r\n            \"pdoperAuditDetailNotesInfo\": pdoperAuditDetailNotesInfo,\r\n            \"pdFileAuditList\": this.pdFileAuditData\r\n          }\r\n          if (this.pdAuditDetailInfo.pdAuditConc == 'X') { //取消本次定义\r\n            let data = {\r\n              'processInstanceId': this.pdInfo.pdProcessId\r\n            };\r\n            map['workflowData'] = data;\r\n            this.doAuditInfoData(map)\r\n          } else if (this.pdAuditDetailInfo.pdAuditConc == 'Z') { //停售产品\r\n            let data = {\r\n              'processInstanceId': this.pdInfo.pdProcessId\r\n            };\r\n            map['workflowData'] = data;\r\n            this.doAuditInfoData(map)\r\n          } else if (this.pdAuditDetailInfo.pdAuditConc == 'N') { //审核不通过\r\n            //停售产品\r\n            if (this.pdAuditType == '3') {\r\n              let data = {\r\n                'productAuditFlag': '0',\r\n                'variables': [\"productDiscontinued\"],\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n            } else {\r\n              //审核不通过 返回定义节点\r\n              this.pdAuditInfo.pdIsReviewReturn = 'Y';\r\n              this.pdAuditDetailInfo.pdReturnFuncNode = this.returnPoints(this.returnFunctionPoints);\r\n              let data = {\r\n                'productAuditFlag': '0',\r\n                'variables': this.returnPoints(this.returnFunctionPoints),\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n            }\r\n            this.doAuditInfoData(map)\r\n          } else {  //审核通过的\r\n            //通过的节点\r\n            let passNodePoints = this.returnPoints(this.pdAuditDetailInfo.pdReleContdet);\r\n            this.pdAuditInfo.pdReleContdet = passNodePoints;\r\n            this.pdAuditDetailInfo.pdReleContdet = passNodePoints;\r\n            this.pdAuditInfo.pdReleContent = this.pdAuditDetailInfo.pdReleContent;\r\n            this.pdAuditInfo.pdIsReviewReturn = 'N';\r\n            if (this.pdAuditType == '3') {\r\n              //停售通过时   默认增量发布\r\n              this.pdAuditInfo.pdReleType = \"2\";\r\n              this.pdAuditDetailInfo.pdReleType = \"2\"\r\n              this.pdAuditInfo.pdReleContent = '3'\r\n              this.pdAuditDetailInfo.pdReleContent = '3'\r\n            } else {\r\n              this.pdAuditInfo.pdReleType = this.pdAuditDetailInfo.pdReleType;\r\n            }\r\n            let data = {\r\n              'productAuditFlag': '1',\r\n              'variables': null,\r\n              'processInstanceId': this.pdInfo.pdProcessId\r\n            };\r\n            map['workflowData'] = data;\r\n            this.doAuditInfoData(map)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    doAuditInfoData(map) {\r\n      addAuditInfoData(this.buildRequestData(map)).then(res => {\r\n        this.notifySuccess(res.message);\r\n        this.$store.dispatch('product/storageProducts')\r\n        closeVisitTag();\r\n        this.$router.push({path: \"/dashboard\"});\r\n      })\r\n    },\r\n    //清空按钮\r\n    refresh() {\r\n      this.pdAuditDetailInfo.pdAuditConc = '';\r\n      this.pdAuditDetailInfo.pdReleType = '';\r\n      this.pdAuditDetailInfo.pdAuditIdea = '';\r\n      this.$nextTick(() => {\r\n        this.$refs.pdAuditDetailInfo.clearValidate();\r\n        if (this.$refs.pdTableForm) {\r\n          this.$refs.pdTableForm.clearValidate();\r\n        }\r\n        if (this.$refs.ruleTableForm) {\r\n          this.$refs.ruleTableForm.clearValidate();\r\n        }\r\n        if (this.$refs.formulaTableForm) {\r\n          this.$refs.formulaTableForm.clearValidate()\r\n        }\r\n      })\r\n    },\r\n    //审核不通过处理节点\r\n    returnPoints(val) {\r\n      let returnPoints = [];\r\n      for (let i = 0; i < val.length; i++) {\r\n        for (let j = 0; j < this.nodeOptions.length; j++) {\r\n          if (val[i] == this.nodeOptions[j].label) {\r\n            returnPoints.push(this.nodeOptions[j].key)\r\n          }\r\n        }\r\n      }\r\n      return returnPoints\r\n    },\r\n    //选中不通过带回的节点\r\n    reBack() {\r\n      this.returnFunctionPoints = [];\r\n      for (let i = 0; i < this.configs6.length; i++) {\r\n        if (this.configs6[i].pdIsCancelDefinition == 'N' && this.configs6[i].pdAuditConcthis == 'N') {\r\n          this.returnFunctionPoints.push(this.getFuncCode(this.configs6[i].pdDefineContent))\r\n        }\r\n      }\r\n      if (this.returnFunctionPoints.length == '0') {\r\n        this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n        this.refresh()\r\n      }\r\n    },\r\n    //产品规则订正选中不通过带回的节点\r\n    ruleOrFormulaBack() {\r\n      this.returnFunctionPoints = [];\r\n      for (let i = 0; i < this.configs7.length; i++) {\r\n        if (this.configs7[i].pdIsCancelDefinition == 'N' && this.configs7[i].pdAuditConcthis == 'N') {\r\n          this.returnFunctionPoints.push(\"产品规则订正\");\r\n          break\r\n        }\r\n      }\r\n      for (let i = 0; i < this.configs8.length; i++) {\r\n        if (this.configs8[i].pdIsCancelDefinition == 'N' && this.configs8[i].pdAuditConcthis == 'N') {\r\n          this.returnFunctionPoints.push(\"产品公式订正\");\r\n          break\r\n        }\r\n      }\r\n      if (this.returnFunctionPoints.length == '0') {\r\n        this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n        this.refresh()\r\n      }\r\n    },\r\n    showFileReleasePage() {\r\n      this.showFileReleaseFlag = true\r\n    },\r\n    changeDialogFileRelease(flag) {\r\n      this.showFileReleaseFlag = flag\r\n    },\r\n    bringPdFileAuditData(val) {\r\n      this.pdFileAuditData = val\r\n    },\r\n    //选择通过显示发布内容\r\n    auditData() {\r\n      this.pdAuditDetailInfo.pdReleContdet = [];\r\n      for (let i = 0; i < this.configs6.length; i++) {\r\n        if (this.configs6[i].pdIsCancelDefinition == 'N' && this.configs6[i].pdAuditConcthis == 'Y') {\r\n          this.pdAuditDetailInfo.pdReleContdet.push(this.getFuncCode(this.configs6[i].pdDefineContent))\r\n        }\r\n      }\r\n    },\r\n    //选择通过显示规则发布内容\r\n    auditRuleData() {\r\n      this.configs4 = [];\r\n      for (let i = 0; i < this.configs7.length; i++) {\r\n        if (this.configs7[i].pdIsCancelDefinition == 'N' && this.configs7[i].pdAuditConcthis == 'Y') {\r\n          this.configs4.push(this.configs7[i])\r\n        }\r\n      }\r\n    },\r\n    //选择通过显示公式发布内容\r\n    auditFormulaData() {\r\n      this.configs5 = [];\r\n      for (let i = 0; i < this.configs8.length; i++) {\r\n        if (this.configs8[i].pdIsCancelDefinition == 'N' && this.configs8[i].pdAuditConcthis == 'Y') {\r\n          this.configs5.push(this.configs8[i])\r\n        }\r\n      }\r\n    },\r\n    //新产品或产品订正添加审核数据\r\n    addPdAuditTableData() {\r\n      this.$refs.pdTableForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.pdTableForm.pdAuditConcthis == 'Y') {\r\n            this.pdTableForm.pdIsCancelDefinition = 'N';\r\n            this.pdTableForm.pdNotPassOpinion = ''\r\n          }\r\n          if (this.checkBoxData.length == 0) {\r\n            if (this.pdTableForm.pdDefineContent.length == 1) {\r\n              if (this.pdTableForm.pdDefineContent[0] == '000000') {\r\n                for (let i = 1; i < this.productNodeList.length; i++) {\r\n                  if (this.checkPdMoreCopyData(this.productNodeList[i].value, this.configs6)) {\r\n                    this.configs6.push({\r\n                      pdDefineContent: this.productNodeList[i].value,\r\n                      pdAuditConcthis: this.pdTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.pdTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.pdTableForm.pdNotPassOpinion\r\n                    })\r\n                  } else {\r\n                    break\r\n                  }\r\n                }\r\n              } else {\r\n                if (this.checkPdCopyData(this.pdTableForm.pdDefineContent[0], this.configs6)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: this.pdTableForm.pdDefineContent[0],\r\n                    pdAuditConcthis: this.pdTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.pdTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.pdTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.pdTableForm.pdDefineContent.length > 1) {\r\n              for (let i = 0; i < this.pdTableForm.pdDefineContent.length; i++) {\r\n                if (this.checkPdCopyData(this.pdTableForm.pdDefineContent[i], this.configs6)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: this.pdTableForm.pdDefineContent[i],\r\n                    pdAuditConcthis: this.pdTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.pdTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.pdTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < this.checkBoxData.length; i++) {\r\n              this.$set(this.checkBoxData[i], 'pdAuditConcthis', this.pdTableForm.pdAuditConcthis);\r\n              this.$set(this.checkBoxData[i], 'pdIsCancelDefinition', this.pdTableForm.pdIsCancelDefinition);\r\n              this.$set(this.checkBoxData[i], 'pdNotPassOpinion', this.pdTableForm.pdNotPassOpinion)\r\n            }\r\n            this.$refs.multipleTable.clearSelection()\r\n          }\r\n          this.isShowNegative(this.configs6);\r\n          this.pdTableForm.pdDefineContent = [];\r\n          this.pdTableForm.pdAuditConcthis = '';\r\n          this.pdTableForm.pdIsCancelDefinition = 'N';\r\n          this.pdTableForm.pdNotPassOpinion = '';\r\n          this.$nextTick(() => {\r\n            this.$refs.pdTableForm.clearValidate()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //规则订正添加审核数据\r\n    addRuleAuditTableData() {\r\n      this.$refs.ruleTableForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.ruleTableForm.pdAuditConcthis == 'Y') {\r\n            this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n            this.ruleTableForm.pdNotPassOpinion = ''\r\n          }\r\n          if (this.checkRuleData.length == 0) {\r\n            if (this.ruleTableForm.pdFormulaRuleCode.length == 1) {\r\n              if (this.ruleTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                  if (this.checkMoreCopyData(this.ruleNodeList[i].value, this.configs7)) {\r\n                    this.configs7.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                      pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                    })\r\n                  } else {\r\n                    break\r\n                  }\r\n                }\r\n              } else {\r\n                if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[0].value, this.configs7)) {\r\n                  this.configs7.push({\r\n                    pdReviseType: '1',\r\n                    pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[0].value,\r\n                    pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.ruleTableForm.pdFormulaRuleCode.length > 1) {\r\n              for (let i = 0; i < this.ruleTableForm.pdFormulaRuleCode.length; i++) {\r\n                if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[i].value, this.configs7)) {\r\n                  this.configs7.push({\r\n                    pdReviseType: '1',\r\n                    pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[i].value,\r\n                    pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < this.checkRuleData.length; i++) {\r\n              this.$set(this.checkRuleData[i], 'pdAuditConcthis', this.ruleTableForm.pdAuditConcthis);\r\n              this.$set(this.checkRuleData[i], 'pdIsCancelDefinition', this.ruleTableForm.pdIsCancelDefinition);\r\n              this.$set(this.checkRuleData[i], 'pdNotPassOpinion', this.ruleTableForm.pdNotPassOpinion)\r\n            }\r\n            this.$refs.multipleRuleTable.clearSelection()\r\n          }\r\n          this.isShowNegative(this.configs7);\r\n          this.ruleTableForm.pdFormulaRuleCode = [];\r\n          this.ruleTableForm.pdAuditConcthis = '';\r\n          this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n          this.ruleTableForm.pdNotPassOpinion = '';\r\n          this.$nextTick(() => {\r\n            this.$refs.ruleTableForm.clearValidate()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //公式订正添加审核数据\r\n    addFormulaAuditTableData() {\r\n      this.$refs.formulaTableForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.formulaTableForm.pdAuditConcthis == 'Y') {\r\n            this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n            this.formulaTableForm.pdNotPassOpinion = ''\r\n          }\r\n          if (this.checkFormulaData.length == 0) {\r\n            if (this.formulaTableForm.pdFormulaRuleCode.length == 1) {\r\n              if (this.formulaTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                  if (this.checkMoreCopyData(this.formulaNodeList[i].value, this.configs8)) {\r\n                    this.configs8.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                      pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                    })\r\n                  } else {\r\n                    break\r\n                  }\r\n                }\r\n              } else {\r\n                if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[0].value, this.configs8)) {\r\n                  this.configs8.push({\r\n                    pdReviseType: '2',\r\n                    pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[0].value,\r\n                    pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.formulaTableForm.pdFormulaRuleCode.length > 1) {\r\n              for (let i = 0; i < this.formulaTableForm.pdFormulaRuleCode.length; i++) {\r\n                if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[i].value, this.configs8)) {\r\n                  this.configs8.push({\r\n                    pdReviseType: '2',\r\n                    pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[i].value,\r\n                    pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < this.checkFormulaData.length; i++) {\r\n              this.$set(this.checkFormulaData[i], 'pdAuditConcthis', this.formulaTableForm.pdAuditConcthis);\r\n              this.$set(this.checkFormulaData[i], 'pdIsCancelDefinition', this.formulaTableForm.pdIsCancelDefinition);\r\n              this.$set(this.checkFormulaData[i], 'pdNotPassOpinion', this.formulaTableForm.pdNotPassOpinion)\r\n            }\r\n            this.$refs.multipleFormulaTable.clearSelection()\r\n          }\r\n          this.isShowNegative(this.configs8);\r\n          this.formulaTableForm.pdFormulaRuleCode = [];\r\n          this.formulaTableForm.pdAuditConcthis = '';\r\n          this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n          this.formulaTableForm.pdNotPassOpinion = '';\r\n          this.$nextTick(() => {\r\n            this.$refs.formulaTableForm.clearValidate()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //判断选择全部时节点是否重复\r\n    checkPdMoreCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdDefineContent)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //判断节点是否重复\r\n    checkPdCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdDefineContent)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //判断选择全部时节点是否重复\r\n    checkMoreCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdFormulaRuleCode)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //判断节点是否重复\r\n    checkCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdFormulaRuleCode)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //页面跳转按钮\r\n    getPdDesignPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品框架信息查看'\r\n        this.dialogComponent = 'product-definition/pd-framework-def/main'\r\n        // this.$router.push({name: '产品框架定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n      }\r\n    },\r\n    getPdSalePage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品销售信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-sales-def/main'\r\n      }\r\n    },\r\n    getPdUWPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品承保信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-acceptance-def/main'\r\n      }\r\n    },\r\n    getPdAUPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品核保信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-underwriting-def/main'\r\n      }\r\n    },\r\n    getPdRWPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品续期续保信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-renewal-def/main'\r\n      }\r\n    },\r\n    getPdPVPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品保全信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-preservation-def/main'\r\n      }\r\n    },\r\n    getPdCLPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品核赔信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-compensation-def/main'\r\n      }\r\n    },\r\n    getTestPage() {\r\n      if (this.pdInfo) {\r\n        // this.$router.push({name: '新单测试详情', query: {showPageFlag: '1'}, params: this.pdInfo})\r\n        this.showTestResultFlag = true;\r\n      }\r\n    },\r\n    //返回产品审核查询页面\r\n    backPage() {\r\n      this.$router.push({path: '/commodity-audit/pd-audit-info/pd-audit-apply'})\r\n    },\r\n    auditClick() {\r\n      if (this.showAuditDataFlag === 'N') {\r\n        this.quickicon_audit = \"el-icon-arrow-down\";\r\n        this.showAuditDataFlag = 'Y'\r\n      } else {\r\n        this.quickicon_audit = \"el-icon-arrow-right\";\r\n        this.showAuditDataFlag = 'N'\r\n      }\r\n    },\r\n    //获取复选框表格数据\r\n    changeFun(val) {\r\n      this.checkBoxData = val;\r\n      if (val.length > 0) {\r\n        this.pdUpdateFlag = true\r\n      }\r\n      if (val.length > 1) {\r\n        this.pdTableForm.pdDefineContent = []\r\n        for (let i = 0; i < val.length; i++) {\r\n          this.pdTableForm.pdDefineContent.push(val[i].pdDefineContent);\r\n        }\r\n        Object.assign(this.pdTableForm, this.pdTableForm.pdDefineContent);\r\n        this.pdTableForm.pdDefineContent = this.pdTableForm.pdDefineContent;\r\n        this.pdUpdateFlag = true;\r\n        this.dataSelect = true\r\n      }\r\n      if (val.length == 1) {\r\n        Object.assign(this.pdTableForm, val[0]);\r\n        this.pdTableForm.pdDefineContent = [val[0].pdDefineContent];\r\n        this.pdUpdateFlag = true;\r\n        this.dataSelect = true\r\n      }\r\n      if (val.length == 0) {\r\n        this.pdTableForm.pdDefineContent = [];\r\n        this.pdTableForm.pdAuditConcthis = '';\r\n        this.pdTableForm.pdIsCancelDefinition = 'N';\r\n        this.pdTableForm.pdNotPassOpinion = '';\r\n        this.pdUpdateFlag = false;\r\n        this.dataSelect = false;\r\n        this.$nextTick(() => {\r\n          this.$refs.pdTableForm.clearValidate()\r\n        })\r\n      }\r\n    },\r\n    changeRuleData(val) {\r\n      this.checkRuleData = val;\r\n      if (val.length > 0) {\r\n        this.ruleUpdateFlag = true\r\n      }\r\n      if (val.length == 1) {\r\n        Object.assign(this.ruleTableForm, val[0]);\r\n        this.ruleTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n        this.ruleUpdateFlag = true;\r\n        this.ruleSelect = true\r\n      }\r\n      if (val.length == 0) {\r\n        this.ruleTableForm.pdFormulaRuleCode = [];\r\n        this.ruleTableForm.pdAuditConcthis = '';\r\n        this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n        this.ruleTableForm.pdNotPassOpinion = '';\r\n        this.ruleUpdateFlag = false;\r\n        this.ruleSelect = false;\r\n        this.$nextTick(() => {\r\n          this.$refs.ruleTableForm.clearValidate()\r\n        })\r\n      }\r\n    },\r\n    closePageDialog() {\r\n      this.dialogShow = false\r\n      this.dialogComponent = ''\r\n    },\r\n    changeFormulaData(val) {\r\n      this.checkFormulaData = val;\r\n      if (val.length > 0) {\r\n        this.formulaUpdateFlag = true\r\n      }\r\n      if (val.length == 1) {\r\n        Object.assign(this.formulaTableForm, val[0]);\r\n        this.formulaTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n        this.formulaUpdateFlag = true;\r\n        this.formulaSelect = true\r\n      }\r\n      if (val.length == 0) {\r\n        this.formulaTableForm.pdFormulaRuleCode = [];\r\n        this.formulaTableForm.pdAuditConcthis = '';\r\n        this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n        this.formulaTableForm.pdNotPassOpinion = '';\r\n        this.formulaUpdateFlag = false;\r\n        this.formulaSelect = false;\r\n        this.$nextTick(() => {\r\n          this.$refs.formulaTableForm.clearValidate()\r\n        })\r\n      }\r\n    },\r\n    isShowNegative(row) {\r\n      const val = row;\r\n      let YSum = 0;\r\n      for (let i = 0; i < val.length; i++) {\r\n        if (val[i].pdAuditConcthis == 'Y') {\r\n          YSum++;\r\n        }\r\n      }\r\n      if (YSum < val.length) {\r\n        this.showNegativeFlag = true;\r\n      } else {\r\n        this.showNegativeFlag = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.notTextarea .el-textarea__inner {\r\n  border: 0;\r\n  padding: 0;\r\n  resize: none;\r\n  color: #606266;\r\n  background-color: white;\r\n  overflow: hidden;\r\n}\r\n\r\n.el-link {\r\n  font-size: 12px;\r\n  margin-left: 0px;\r\n}\r\n</style>\r\n"]}]}