{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-underwriting-def\\main\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-underwriting-def\\main\\index.vue","mtime":1609847106975},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgb3BlcmF0aW9uYnV0dG9uIGZyb20gJ0Avdmlld3MvYmFzaWNpbmZvL29wZXJhdGlvbmVuZC9pbmRleCcNCmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAndnVleCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncGR0VW5kZXJ3cml0aW5nRGVmaW5pdGlvbicsDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ3RlbmFudENvZGUnXSkNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdHlwZTogJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJywNCiAgICAgIGFjdGl2ZU5hbWU6IDAsDQogICAgICBhY3RpdmVUYWJOYW1lOiAndW5kZXJ3cml0aW5nQWRkaXRpb24nLA0KICAgICAgYWN0aXZlOiAndW5kZXJ3cml0aW5nJywNCiAgICAgIGlzRml4ZWQ6IGZhbHNlLA0KICAgICAgb2Zmc2V0VG9wOiAyMCwNCiAgICAgIGNvbXBvbmVudE5hbWU6ICcnLA0KICAgICAgYW1vdW50RmxhZzogZmFsc2UsDQogICAgICBydWxlRmxhZzogZmFsc2UsDQogICAgICBhZGRpdGlvbkZsYWc6ZmFsc2UsDQogICAgICBub3dQb3NpdGlvbjogJ3VuZGVyd3JpdGluZ0FkZGl0aW9uJywNCiAgICAgIHN0ZXBPcmRlcjogeyd1bmRlcndyaXRpbmdBZGRpdGlvbic6MCwndW5kZXJ3cml0aW5nYW1vdW50JzogMSwgJ3VuZGVyd3JpdGluZ3J1bGUnOiAyfSwNCiAgICAgIHByb2R1Y3Q6IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRDb2RlOiAnJywNCiAgICAgICAgcGRFZGl0aW9uOiAnJywNCiAgICAgICAgcGRWZXJJZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFNhbGVjaG5sOiAnJywNCiAgICAgICAgcGROYW1lOiAnJywNCiAgICAgICAgcGRTaG9ydG5hbWU6ICcnLA0KICAgICAgICBwZEVuTmFtZTogJycsDQogICAgICAgIHBkU2hvcnRFbk5hbWU6ICcnLA0KICAgICAgICBvcGVyYXRvcjogJycsDQogICAgICAgIHBkQXBwbERhdGU6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRQcm9jZXNzSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgY3JlYXRlVGltZTogdW5kZWZpbmVkLA0KICAgICAgICB1cGRhdGVUaW1lOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICBwZFByb2Nlc3NJZDogJycNCiAgICB9DQogIH0sDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgYXdhaXQgdGhpcy5pbml0UHJvZHVjdEluZm8oKQ0KICAgIHRoaXMuc3dpdGNoQ29tcG9uZW50KCd1bmRlcndyaXRpbmdBZGRpdGlvbicpDQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBvcGVyYXRpb25idXR0b24NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5pbml0SGVpZ2h0KQ0KICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgIHRoaXMub2Zmc2V0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JveEZpeGVkJykub2Zmc2V0VG9wDQogICAgfSkNCiAgICB0aGlzLiRlbWl0KCdmaW5pc2gnKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZmluaXNoUGFnZSgpew0KICAgICAgdGhpcy4kZW1pdCgnZmluaXNoJykNCiAgICB9LA0KICAgIGFzeW5jIGluaXRQcm9kdWN0SW5mbygpIHsNCiAgICAgIGxldCBwZHRlbXBQZEluZm8gPSB0aGlzLmdldFBkRGF0YSgpDQogICAgICBpZiAocGR0ZW1wUGRJbmZvKSB7DQogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5wcm9kdWN0LCBwZHRlbXBQZEluZm8pDQogICAgICAgIHRoaXMucGRQcm9jZXNzSWQgPSBwZHRlbXBQZEluZm8ucGRQcm9jZXNzSWQNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVVuZGVyd3JpdGluZyh0eXBlKSB7DQogICAgICBsZXQgaW5kZXggPSB0aGlzLnN0ZXBPcmRlclt0eXBlXQ0KICAgICAgaWYgKHRoaXMubm93UG9zaXRpb24gIT09IHR5cGUpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNTYXZlZCkgew0KICAgICAgICAgIHRoaXMuaXNTYXZlZCA9IGZhbHNlDQogICAgICAgICAgdGhpcy5hY3RpdmVOYW1lID0gaW5kZXgNCiAgICAgICAgICB0aGlzLmFjdGl2ZVRhYk5hbWUgPSB0eXBlDQogICAgICAgICAgdGhpcy5ub3dQb3NpdGlvbiA9IHR5cGUNCiAgICAgICAgICB0aGlzLnN3aXRjaENvbXBvbmVudCh0eXBlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGNvbmZpcm0oDQogICAgICAgICAgICB0aGlzLiR0KCdwcm9kdWN0TWVudS5tZXNzYWdlVGl0bGUnKSwNCiAgICAgICAgICAgIHRoaXMuJHQoJ3Byb2R1Y3RNZW51Lm1lc3NhZ2VUaXAnKSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ3Byb2R1Y3RNZW51Lm1lc3NhZ2VCdXR0b24yJyksDQogICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ3Byb2R1Y3RNZW51Lm1lc3NhZ2VCdXR0b24xJyksDQogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmFjdGl2ZU5hbWUgPSBpbmRleA0KICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJOYW1lID0gdHlwZQ0KICAgICAgICAgICAgdGhpcy5ub3dQb3NpdGlvbiA9IHR5cGUNCiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKQ0KICAgICAgICAgICAgdGhpcy5zd2l0Y2hDb21wb25lbnQodHlwZSkNCiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYk5hbWUgPSB0aGlzLm5vd1Bvc2l0aW9uDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICB9DQogICAgfSwNCiAgICBzd2l0Y2hDb21wb25lbnQodHlwZSkgew0KICAgICAgdGhpcy5hbW91bnRGbGFnID0gZmFsc2UNCiAgICAgIHRoaXMucnVsZUZsYWcgPSBmYWxzZQ0KICAgICAgdGhpcy5hZGRpdGlvbkZsYWcgPWZhbHNlDQogICAgICBsZXQgbW9kdWxlTG9jYXRpb24gPSB0aGlzLmdldENvbXBvbmVudFBhdGgodHlwZSkNCiAgICAgIGNvbnN0IHBhdGggPSBtb2R1bGVMb2NhdGlvbiArICcvJyArIHRoaXMudGVuYW50Q29kZSArICcvaW5kZXgnDQogICAgICBsZXQgcGF0aDEgPSB0aGlzLmlzSW5BbGxWdWUocGF0aCkNCiAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IHJlc29sdmUgPT4gcmVxdWlyZS5lbnN1cmUoW10sICgpID0+IHJlc29sdmUocmVxdWlyZShgQC92aWV3cy8ke3BhdGgxfWApKSkNCiAgICB9LA0KICAgIGdldENvbXBvbmVudFBhdGgodHlwZSkgew0KICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgICBjYXNlICAndW5kZXJ3cml0aW5nQWRkaXRpb24nOg0KICAgICAgICAgIHRoaXMuYWRkaXRpb25GbGFnID0gdHJ1ZQ0KICAgICAgICAgIHJldHVybiAncHJvZHVjdC1kZWZpbml0aW9uL3BkLW9wZXJhdGlvbi1kZWYvcGQtdW5kZXJ3cml0aW5nLWRlZi91bmRlcndyaXRpbmctYWRkaXRpb24nDQogICAgICAgIGNhc2UgICd1bmRlcndyaXRpbmdhbW91bnQnOg0KICAgICAgICAgIHRoaXMuYW1vdW50RmxhZyA9IHRydWUNCiAgICAgICAgICByZXR1cm4gJ3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1vcGVyYXRpb24tZGVmL3BkLXVuZGVyd3JpdGluZy1kZWYvdW5kZXJ3cml0aW5nLWFtb3VudCcNCiAgICAgICAgY2FzZSAgJ3VuZGVyd3JpdGluZ3J1bGUnOg0KICAgICAgICAgIHRoaXMucnVsZUZsYWcgPSB0cnVlDQogICAgICAgICAgcmV0dXJuICdwcm9kdWN0LWRlZmluaXRpb24vcGQtb3BlcmF0aW9uLWRlZi9wZC11bmRlcndyaXRpbmctZGVmL3VuZGVyd3JpdGluZy1ydWxlJw0KICAgICAgICBkZWZhdWx0IDoNCiAgICAgICAgICByZXR1cm4gJycNCiAgICAgIH0NCiAgICB9LA0KICAgIHBhcmVudEZuKHZhbCkgew0KICAgICAgdGhpcy5pc1NhdmVkID0gdmFsDQogICAgfSwNCiAgICBiYWNrVG9NZW51KCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvcHJvZHVjdC1kZWZpbml0aW9uL3BkLW9wZXJhdGlvbi1kZWYvcGQtdW5kZXJ3cml0aW5nLWRlZi91bmRlcndyaXRpbmctYXBwbHknLCBwYXJhbXM6IHt9fSkNCiAgICB9LA0KICAgIGNsaWNrVGFiKHZhbCkgew0KICAgICAgbGV0IHR5cGUgPSB2YWwubmFtZQ0KICAgICAgdGhpcy5oYW5kbGVVbmRlcndyaXRpbmcodHlwZSkNCiAgICB9LA0KICAgIGluaXRIZWlnaHQoKSB7DQogICAgICBsZXQgc2Nyb2xsVG9wID0NCiAgICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0IHx8DQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwNCiAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ANCiAgICAgIHRoaXMuaXNGaXhlZCA9IHNjcm9sbFRvcCA+IHRoaXMub2Zmc2V0VG9wDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-operation-def/pd-underwriting-def/main","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div class=\"nav-container\">\r\n      <cus-page-title-back :label=\"$t('route.underwriting')\" @backTo=\"backToMenu\"/>\r\n\r\n      <cus-product-info></cus-product-info>\r\n\r\n      <van-sticky :offset-top=\"0\">\r\n      <el-collapse id=\"boxFixed\" v-model=\"active\" :class=\"{'is_fixed' : isFixed}\" accordion\r\n                   class=\"collapseCusPdUnderWriting collapseCus\">\r\n        <el-collapse-item name=\"underwriting\" title=\"产品核保定义\">\r\n          <div class=\"stepDiv\" style=\"height: 90px;\">\r\n            <el-steps :active=\"activeName\" direction=\"vertical\" finish-status=\"wait\" process-status=\"finish \">\r\n              <el-step icon=\"el-icon-info\" title=\"加费定义\"\r\n                       @click.native=\"handleUnderwriting('underwritingAddition')\"></el-step>\r\n              <el-step icon=\"el-icon-info\" title=\"核保保额定义\"\r\n                       @click.native=\"handleUnderwriting('underwritingamount')\"></el-step>\r\n              <el-step icon=\"el-icon-info\" title=\"核保规则定义\"\r\n                       @click.native=\"handleUnderwriting('underwritingrule')\"></el-step>\r\n            </el-steps>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n      </van-sticky>\r\n\r\n      <el-tabs v-model=\"activeTabName\" type=\"border-card\" @tab-click=\"clickTab\">\r\n        <el-tab-pane :label=\"$t('i18nView.pdAddFeeDef')\" name=\"underwritingAddition\">\r\n          <component :is=\"componentName\" v-if=\"additionFlag\" @childFn=\"parentFn\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n        <el-tab-pane :label=\"$t('route.underwritingAmount')\" name=\"underwritingamount\">\r\n          <component :is=\"componentName\" v-if=\"amountFlag\" @childFn=\"parentFn\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n        <el-tab-pane :label=\"$t('route.underwritingRulesMain')\" name=\"underwritingrule\">\r\n          <component :is=\"componentName\" v-if=\"ruleFlag\" @childFn=\"parentFn\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n\r\n      <operationbutton :procInsId=\"pdProcessId\" :type=\"type\"></operationbutton>\r\n    </div>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport operationbutton from '@/views/basicinfo/operationend/index'\r\nimport {mapGetters} from 'vuex'\r\n\r\nexport default {\r\n  name: 'pdtUnderwritingDefinition',\r\n  computed: {\r\n    ...mapGetters(['tenantCode'])\r\n  },\r\n  data() {\r\n    return {\r\n      type: 'productUnderwritingFlag',\r\n      activeName: 0,\r\n      activeTabName: 'underwritingAddition',\r\n      active: 'underwriting',\r\n      isFixed: false,\r\n      offsetTop: 20,\r\n      componentName: '',\r\n      amountFlag: false,\r\n      ruleFlag: false,\r\n      additionFlag:false,\r\n      nowPosition: 'underwritingAddition',\r\n      stepOrder: {'underwritingAddition':0,'underwritingamount': 1, 'underwritingrule': 2},\r\n      product: {\r\n        id: undefined,\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      pdProcessId: ''\r\n    }\r\n  },\r\n  async created() {\r\n    await this.initProductInfo()\r\n    this.switchComponent('underwritingAddition')\r\n  },\r\n  components: {\r\n    operationbutton\r\n  },\r\n  mounted() {\r\n    window.addEventListener('scroll', this.initHeight)\r\n    this.$nextTick(() => {\r\n      this.offsetTop = document.querySelector('#boxFixed').offsetTop\r\n    })\r\n    this.$emit('finish')\r\n  },\r\n  methods: {\r\n    finishPage(){\r\n      this.$emit('finish')\r\n    },\r\n    async initProductInfo() {\r\n      let pdtempPdInfo = this.getPdData()\r\n      if (pdtempPdInfo) {\r\n        Object.assign(this.product, pdtempPdInfo)\r\n        this.pdProcessId = pdtempPdInfo.pdProcessId\r\n      }\r\n    },\r\n    handleUnderwriting(type) {\r\n      let index = this.stepOrder[type]\r\n      if (this.nowPosition !== type) {\r\n        if (this.isSaved) {\r\n          this.isSaved = false\r\n          this.activeName = index\r\n          this.activeTabName = type\r\n          this.nowPosition = type\r\n          this.switchComponent(type)\r\n        } else {\r\n          this.$confirm(\r\n            this.$t('productMenu.messageTitle'),\r\n            this.$t('productMenu.messageTip'),\r\n            {\r\n              confirmButtonText: this.$t('productMenu.messageButton2'),\r\n              cancelButtonText: this.$t('productMenu.messageButton1'),\r\n              type: 'warning'\r\n            }\r\n          ).then(() => {\r\n            this.activeName = index\r\n            this.activeTabName = type\r\n            this.nowPosition = type\r\n            window.scrollTo(0, 0)\r\n            this.switchComponent(type)\r\n          }).catch(() => {\r\n            this.activeTabName = this.nowPosition\r\n          })\r\n        }\r\n\r\n      }\r\n    },\r\n    switchComponent(type) {\r\n      this.amountFlag = false\r\n      this.ruleFlag = false\r\n      this.additionFlag =false\r\n      let moduleLocation = this.getComponentPath(type)\r\n      const path = moduleLocation + '/' + this.tenantCode + '/index'\r\n      let path1 = this.isInAllVue(path)\r\n      this.componentName = resolve => require.ensure([], () => resolve(require(`@/views/${path1}`)))\r\n    },\r\n    getComponentPath(type) {\r\n      switch (type) {\r\n         case  'underwritingAddition':\r\n          this.additionFlag = true\r\n          return 'product-definition/pd-operation-def/pd-underwriting-def/underwriting-addition'\r\n        case  'underwritingamount':\r\n          this.amountFlag = true\r\n          return 'product-definition/pd-operation-def/pd-underwriting-def/underwriting-amount'\r\n        case  'underwritingrule':\r\n          this.ruleFlag = true\r\n          return 'product-definition/pd-operation-def/pd-underwriting-def/underwriting-rule'\r\n        default :\r\n          return ''\r\n      }\r\n    },\r\n    parentFn(val) {\r\n      this.isSaved = val\r\n    },\r\n    backToMenu() {\r\n      this.$router.push({path: '/product-definition/pd-operation-def/pd-underwriting-def/underwriting-apply', params: {}})\r\n    },\r\n    clickTab(val) {\r\n      let type = val.name\r\n      this.handleUnderwriting(type)\r\n    },\r\n    initHeight() {\r\n      let scrollTop =\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop\r\n      this.isFixed = scrollTop > this.offsetTop\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.showDiv {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: -40px;\r\n  margin-left: -40px;\r\n  position: absolute;\r\n  background: #ffffff00;\r\n  z-index: 999;\r\n}\r\n\r\n.collapseCusPdUnderWriting {\r\n  top: 129px !important;\r\n  right: 15px !important;\r\n  width: 150px !important;\r\n}\r\n\r\n\r\n.is_fixed {\r\n  position: fixed;\r\n  top: 0px !important;\r\n  z-index: 99;\r\n}\r\n\r\n</style>\r\n"]}]}