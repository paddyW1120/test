{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\basicinfo\\operationend\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\basicinfo\\operationend\\index.vue","mtime":1609847106557},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2Nsb3NlVmlzaXRUYWd9IGZyb20gIkAvdXRpbHMvdGFnc1ZpZXciCgppbXBvcnQge2V4ZWN1dGVPcGVyYXRpb25hbExhc3ROb2RlLCBleGVjdXRlT3BlcmF0aW9uYWxOb2RlfSBmcm9tICdAL2FwaS93b3JrZmxvdy93b3JrZmxvdycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3BlcmF0aW9uYWxCdXR0b24nLAogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgY2xheno6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OidvcGVyYXRpb25hbEZpbmlzaERlZldpdGhOYXYnCiAgICB9LAogICAgcHJvY0luc0lkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnV0dG9uVHlwZTogJycsCiAgICAgIHByb2Nlc3NJbnN0YW5jZUlkOiAnJywKICAgICAgZm9ybTogewogICAgICAgIG9wdGlvbnMzOiBbCiAgICAgICAgICB7J2tleSc6ICdwcm9kdWN0RGlzdHJpYnV0aW9uRmxhZycsICdsYWJlbCc6IHRoaXMuJHQoJ09wZXJhdGlvbmFsQnV0dG9uLlhTRGVmJyl9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdENvdmVyRmxhZycsICdsYWJlbCc6IHRoaXMuJHQoJ09wZXJhdGlvbmFsQnV0dG9uLkNCRGVmJyl9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLCAnbGFiZWwnOiB0aGlzLiR0KCdyb3V0ZS51bmRlcndyaXRpbmcnKX0sCiAgICAgICAgICB7J2tleSc6ICdwcm9kdWN0UmVuZXdhbEZsYWcnLCAnbGFiZWwnOiB0aGlzLiR0KCdyb3V0ZS5wZHRlbXBQZFJuSW5mb19hcHBseUxpc3QnKX0sCiAgICAgICAgICB7J2tleSc6ICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZycsICdsYWJlbCc6IHRoaXMuJHQoJ09wZXJhdGlvbmFsQnV0dG9uLkJRRGVmJyl9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdEhlUGVpRmxhZycsICdsYWJlbCc6IHRoaXMuJHQoJ09wZXJhdGlvbmFsQnV0dG9uLkhQRGVmJyl9CiAgICAgICAgXSwKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuYnV0dG9uVHlwZSA9IHRoaXMudHlwZTsKICAgIHRoaXMucHJvY2Vzc0luc3RhbmNlSWQgPSB0aGlzLnByb2NJbnNJZAogIH0sCiAgbW91bnRlZCgpIHsKCiAgfSwKICBtZXRob2RzOiB7CiAgICBmaW5pc2hlZE9wZXJhdGlvbmFsT25lKCkgewogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAncHJvY2Vzc0luc3RhbmNlSWQnOiB0aGlzLnByb2Nlc3NJbnN0YW5jZUlkLAogICAgICAgICd0eXBlJzogdGhpcy5idXR0b25UeXBlCiAgICAgIH07CiAgICAgIHRoaXMuY29uZmlybVdhcm5pbmcodGhpcy4kdCgnT3BlcmF0aW9uYWxCdXR0b24uY29uZmlybURlZkZpbmlzaCcpKS50aGVuKCgpID0+IHsKICAgICAgICBleGVjdXRlT3BlcmF0aW9uYWxOb2RlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShkYXRhKSkudGhlbihyZXMgPT4gewogICAgICAgICAgbGV0IGxlZnQgPSByZXMuZGF0YS5sZWZ0CiAgICAgICAgICBpZiAobGVmdCA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgICAvLyB0aGlzLmNvbmZpcm1XYXJuaW5nKHRoaXMuJHQoJ09wZXJhdGlvbmFsQnV0dG9uLmNvbmZpcm1FbnRlclRlc3RQcm9jZXNzJykpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAvLyAgIGRhdGFbJ3Byb2R1Y3RUZXN0RmxhZyddID0gJzAnCiAgICAgICAgICAgIC8vICAgZXhlY3V0ZU9wZXJhdGlvbmFsTGFzdE5vZGUodGhpcy5idWlsZFJlcXVlc3REYXRhKGRhdGEpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIC8vICAgICB0aGlzLmZpbmlzaGVkKCkKICAgICAgICAgICAgLy8gICB9KQogICAgICAgICAgICAvLyB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgZGF0YVsncHJvZHVjdFRlc3RGbGFnJ10gPSAnMSc7CiAgICAgICAgICAgICAgaWYodGhpcy5idXR0b25UeXBlPT0ncGFja2FnZURpc3RyaWJ1dGlvbkZsYWcnKXsKICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdwcm9kdWN0RGlzdHJpYnV0aW9uRmxhZycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih0aGlzLmJ1dHRvblR5cGU9PSdwYWNrYWdlQ292ZXJGbGFnJyl7CiAgICAgICAgICAgICAgICBkYXRhLnR5cGUgPSAncHJvZHVjdENvdmVyRmxhZycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYodGhpcy5idXR0b25UeXBlPT0ncGFja2FnZVVuZGVyd3JpdGluZ0ZsYWcnKXsKICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdwcm9kdWN0VW5kZXJ3cml0aW5nRmxhZycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYodGhpcy5idXR0b25UeXBlPT0ncGFja2FnZUhlUGVpRmxhZycpewogICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdwcm9kdWN0SGVQZWlGbGFnJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBleGVjdXRlT3BlcmF0aW9uYWxMYXN0Tm9kZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoZGF0YSkpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdwcm9kdWN0L3N0b3JhZ2VQcm9kdWN0c0FuZFBhY2thZ2VzJykKICAgICAgICAgICAgICAgIHRoaXMuZ290b0RlZk1haW5wUGFnZSgpCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgLy8gfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZ290b0RlZk1haW5wUGFnZSgpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICB9KQogICAgfSwKICAgIGZpbmlzaGVkKCkgewogICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnT3BlcmF0aW9uYWxCdXR0b24ubm9kZUNvbXBsZXRlZCcpKQogICAgICBjbG9zZVZpc2l0VGFnKCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICIvcHJvZHVjdC1kZWZpbml0aW9uL3BkLW9wZXJhdGlvbi1kZWYvcGQtb3BlcmF0aW9uLW1vbml0b3IifSk7CiAgICB9LAogICAgZ290b0RlZk1haW5wUGFnZSgpewogICAgICAgICBjbG9zZVZpc2l0VGFnKCkKICAgICAgICAgc3dpdGNoICh0aGlzLmJ1dHRvblR5cGUpIHsKICAgICAgICAgICBjYXNlICdwcm9kdWN0RGlzdHJpYnV0aW9uRmxhZyc6IHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn6ZSA5ZSu5a6a5LmJ5YWl5Y+jJ30pOyBicmVhazsKICAgICAgICAgICBjYXNlICdwcm9kdWN0Q292ZXJGbGFnJzogdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfmib/kv53lrprkuYnlhaXlj6MnfSk7IGJyZWFrOwogICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJzogdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfmoLjkv53lrprkuYnlhaXlj6MnfSk7IGJyZWFrOwogICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RSZW5ld2FsRmxhZyc6IHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn5Lqn5ZOB57ut5pyf57ut5L+d5a6a5LmJ5YWl5Y+jJ30pOyBicmVhazsKICAgICAgICAgICBjYXNlICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZyc6IHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn5L+d5YWo5a6a5LmJ5YWl5Y+jJ30pOyBicmVhazsKICAgICAgICAgICBjYXNlICdwcm9kdWN0SGVQZWlGbGFnJzogdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfmoLjotZTlrprkuYnlhaXlj6MnfSk7IGJyZWFrOwogICAgICAgICAgIGNhc2UgJ3BhY2thZ2VEaXN0cmlidXRpb25GbGFnJzogdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfkuqflk4HlpZfppJDplIDllK7lrprkuYnlhaXlj6MnfSk7IGJyZWFrOwogICAgICAgICAgIGNhc2UgJ3BhY2thZ2VDb3ZlckZsYWcnOiB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeWll+mkkOaJv+S/neWumuS5ieWFpeWPoyd9KTsgYnJlYWs7CiAgICAgICAgICAgY2FzZSAncGFja2FnZVVuZGVyd3JpdGluZ0ZsYWcnOiB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeWll+mkkOaguOS/neWumuS5ieWFpeWPoyd9KTsgYnJlYWs7CiAgICAgICAgICAgY2FzZSAncGFja2FnZUhlUGVpRmxhZyc6IHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn5Lqn5ZOB5aWX6aSQ5qC46LWU5a6a5LmJ5YWl5Y+jJ30pOyBicmVhazsKICAgICAgICAgICBkZWZhdWx0OiB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogIi9kYXNoYm9hcmQifSk7IGJyZWFrOwogICAgICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/basicinfo/operationend","sourcesContent":["<template>\r\n  <div :class=\"clazz\">\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\" type=\"primary\" v-if=\"buttonType==='productDistributionFlag'\"  dialog-disable=\"disable\">\r\n     <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.XSDef') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='productCoverFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.CBDef') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='productUnderwritingFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('route.underwriting') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='productRenewalFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('route.pdtempPdRnInfo_applyList') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='productPreservationFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.BQDef') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='productHePeiFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.HPDef') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='packageDistributionFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.packageDistributionFlag') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='packageCoverFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.packageCoverFlag') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='packageUnderwritingFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.packageUnderwritingFlag') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n    <el-button  size=\"mini\" @click=\"finishedOperationalOne\"  icon=\"end\"  type=\"primary\" v-if=\"buttonType==='packageHePeiFlag'\"  dialog-disable=\"disable\">\r\n      <svg-icon icon-class=\"end\"></svg-icon> {{ $t('OperationalButton.packageHePeiFlag') + $t('OperationalButton.completed') }}\r\n    </el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import {closeVisitTag} from \"@/utils/tagsView\"\r\n\r\n  import {executeOperationalLastNode, executeOperationalNode} from '@/api/workflow/workflow'\r\n\r\n  export default {\r\n    name: 'OperationalButton',\r\n    props: {\r\n      type: {\r\n        type: String,\r\n        required: true,\r\n      },\r\n      clazz: {\r\n        type: String,\r\n        default:'operationalFinishDefWithNav'\r\n      },\r\n      procInsId: {\r\n        type: String,\r\n        required: true,\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        buttonType: '',\r\n        processInstanceId: '',\r\n        form: {\r\n          options3: [\r\n            {'key': 'productDistributionFlag', 'label': this.$t('OperationalButton.XSDef')},\r\n            {'key': 'productCoverFlag', 'label': this.$t('OperationalButton.CBDef')},\r\n            {'key': 'productUnderwritingFlag', 'label': this.$t('route.underwriting')},\r\n            {'key': 'productRenewalFlag', 'label': this.$t('route.pdtempPdRnInfo_applyList')},\r\n            {'key': 'productPreservationFlag', 'label': this.$t('OperationalButton.BQDef')},\r\n            {'key': 'productHePeiFlag', 'label': this.$t('OperationalButton.HPDef')}\r\n          ],\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.buttonType = this.type;\r\n      this.processInstanceId = this.procInsId\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    methods: {\r\n      finishedOperationalOne() {\r\n        let data = {\r\n          'processInstanceId': this.processInstanceId,\r\n          'type': this.buttonType\r\n        };\r\n        this.confirmWarning(this.$t('OperationalButton.confirmDefFinish')).then(() => {\r\n          executeOperationalNode(this.buildRequestData(data)).then(res => {\r\n            let left = res.data.left\r\n            if (left === 'false') {\r\n              // this.confirmWarning(this.$t('OperationalButton.confirmEnterTestProcess')).then(() => {\r\n              //   data['productTestFlag'] = '0'\r\n              //   executeOperationalLastNode(this.buildRequestData(data)).then(res => {\r\n              //     this.finished()\r\n              //   })\r\n              // }).catch(() => {\r\n                data['productTestFlag'] = '1';\r\n                if(this.buttonType=='packageDistributionFlag'){\r\n                  data.type = 'productDistributionFlag'\r\n                }\r\n                  if(this.buttonType=='packageCoverFlag'){\r\n                  data.type = 'productCoverFlag'\r\n                }\r\n                if(this.buttonType=='packageUnderwritingFlag'){\r\n                  data.type = 'productUnderwritingFlag'\r\n                }\r\n                if(this.buttonType=='packageHePeiFlag'){\r\n                data.type = 'productHePeiFlag'\r\n                }\r\n                executeOperationalLastNode(this.buildRequestData(data)).then(res => {\r\n                  this.$store.dispatch('product/storageProductsAndPackages')\r\n                  this.gotoDefMainpPage()\r\n                })\r\n              // })\r\n            } else {\r\n              this.gotoDefMainpPage()\r\n            }\r\n          })\r\n        }).catch(() => {\r\n        })\r\n      },\r\n      finished() {\r\n        this.notifySuccess(this.$t('OperationalButton.nodeCompleted'))\r\n        closeVisitTag()\r\n        this.$router.push({path: \"/product-definition/pd-operation-def/pd-operation-monitor\"});\r\n      },\r\n      gotoDefMainpPage(){\r\n           closeVisitTag()\r\n           switch (this.buttonType) {\r\n             case 'productDistributionFlag': this.$router.push({name: '销售定义入口'}); break;\r\n             case 'productCoverFlag': this.$router.push({name: '承保定义入口'}); break;\r\n             case 'productUnderwritingFlag': this.$router.push({name: '核保定义入口'}); break;\r\n             case 'productRenewalFlag': this.$router.push({name: '产品续期续保定义入口'}); break;\r\n             case 'productPreservationFlag': this.$router.push({name: '保全定义入口'}); break;\r\n             case 'productHePeiFlag': this.$router.push({name: '核赔定义入口'}); break;\r\n             case 'packageDistributionFlag': this.$router.push({name: '产品套餐销售定义入口'}); break;\r\n             case 'packageCoverFlag': this.$router.push({name: '产品套餐承保定义入口'}); break;\r\n             case 'packageUnderwritingFlag': this.$router.push({name: '产品套餐核保定义入口'}); break;\r\n             case 'packageHePeiFlag': this.$router.push({name: '产品套餐核赔定义入口'}); break;\r\n             default: this.$router.push({path: \"/dashboard\"}); break;\r\n           }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}