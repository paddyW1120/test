{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-renewal-def\\main\\index.vue?vue&type=style&index=0&id=62dd099f&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-renewal-def\\main\\index.vue","mtime":1609847106960},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouY3N0IHsNCiAgd2lkdGg6IDEwMHB4Ow0KfQ0KDQouc2hvd0RpdiB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIG1hcmdpbi10b3A6IC00MHB4Ow0KICBtYXJnaW4tbGVmdDogLTQwcHg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYmFja2dyb3VuZDogI2ZmZmZmZjAwOw0KICB6LWluZGV4OiA5OTk7DQp9DQoNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0tBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-operation-def/pd-renewal-def/main","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div :class=\"{ 'showDiv': this.showPageFlag == 1 }\"></div>\r\n    <cus-page-title-back @backTo=\"backToMenu\" :label=\"$t('route.pdtempPdRnInfo_applyList')\"/>\r\n    <!-- 产品信息 -->\r\n    <cus-product-info></cus-product-info>\r\n    <operationbutton :procInsId=\"pdProcessId\" clazz=\"operationalFinishDef\" :type=\"type\"></operationbutton>\r\n    <cus-form-title :first=\"true\" :label=\"$t('route.pdtempPdRnInfo_applyList')\"></cus-form-title>\r\n    <el-form ref=\"searchForm\" :model=\"searchForm\" :rules=\"rules\" label-width=\"auto\" >\r\n      <cus-row :gutter=\"10\" >\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdUrgePayFlag')\" prop=\"call\">\r\n            <el-switch v-model=\"searchForm.call\" :disabled=\"true\">\r\n            </el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n         <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdGrcCalMode')\" prop=\"gracePeriodCalculationMethod\">\r\n            <cus-radio v-model=\"searchForm.gracePeriodCalculationMethod\"\r\n                       :codetype=\"'gracePeriodCalculation'\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdGrcPeriod')\" prop=\"gracePeriod\">\r\n              <el-input v-model=\"searchForm.gracePeriod\" type=\"number\">\r\n                <template slot=\"suffix\">{{ $t('i18nView.day') }}</template>\r\n              </el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <cus-row>\r\n        <cus-col :span=\"6\">\r\n          <el-form-item v-if=\"false\" label=\"id\" prop=\"id\">\r\n            <el-input v-model=\"searchForm.Id\" class=\"input-with-select\" type=\"number\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item  v-if=\"false\"   :label=\"$t('pdtempPdRnInfo.pdRnPremFlag')\" prop=\"renewalChargeMark\">\r\n              <el-switch v-model=\"searchForm.renewalChargeMark\" :disabled=\"true\">\r\n              </el-switch>\r\n            </el-form-item>\r\n        </cus-col>\r\n         <cus-col :span=\"11\">\r\n        </cus-col>\r\n      </cus-row>\r\n\r\n      <cus-row :gutter=\"10\" >\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdOverDueDealMode')\" prop=\"expectedTreatment\">\r\n            <cus-select v-model=\"searchForm.expectedTreatment\" :codetype=\"'expectedTreatment'\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdRnPolFlag')\" prop=\"renewalMark\">\r\n            <el-switch\r\n              v-model=\"searchForm.renewalMark\"\r\n              :disabled=\"true\">\r\n            </el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdClmRnFlag')\" prop=\"renewableAfterClaimSettlement\"\r\n          v-if=\"searchForm.renewalMark\" >\r\n            <el-switch\r\n              v-model=\"searchForm.renewableAfterClaimSettlement\"\r\n            >\r\n            </el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n\r\n      <cus-row :gutter=\"10\" >\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdRnCvliDate')\"  prop=\"renewalEffectiveDate\"\r\n                        v-if=\"searchForm.renewalMark\">\r\n            <cus-select v-model=\"searchForm.renewalEffectiveDate\" :codetype=\"'renewalEffectiveDate'\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdEndDateMode')\"\r\n                        prop=\"originalPolicyTerminationDate\" v-if=\"searchForm.renewalMark\">\r\n            <cus-select v-model=\"searchForm.originalPolicyTerminationDate\"\r\n                        :codetype=\"'originalPolicyTermination'\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.pdRnPolType')\"  prop=\"renewInsuranceMethod\"\r\n                        v-if=\"searchForm.renewalMark\">\r\n            <cus-select v-model=\"searchForm.renewInsuranceMethod\" :codetype=\"'renewInsuranceMethod'\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <cus-row :gutter=\"10\">\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.guaranteedRenewable')\"  prop=\"guaranteedRenewable\"\r\n                        v-if=\"searchForm.renewalMark\">\r\n            <el-switch v-model=\"searchForm.guaranteedRenewable\">\r\n            </el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.guaranteedRenewalPeriod')\"\r\n                        prop=\"guaranteedRenewalPeriod\" v-if=\"searchForm.renewalMark\">\r\n              <el-input v-model=\"searchForm.guaranteedRenewalPeriod\"\r\n                        :disabled=\"searchForm.guaranteedRenewable?false:true\"\r\n                        :placeholder=\"$t('pdtempPdRnInfo.placeholder')\"\r\n                        type=\"number\">\r\n                <cus-select slot=\"append\" v-model=\"searchForm.guaranteedRenewalPeriodUnit\" :codetype=\"'saledes'\"\r\n                            :disabled=\"searchForm.guaranteedRenewable?false:true\" :hideCode=\"true\" class=\"cst\"\r\n                            prop=\"guaranteedRenewalPeriodUnit\">\r\n                </cus-select>\r\n              </el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdRnInfo.maxGuaranteedRenewalPeriod')\"\r\n                        prop=\"maxGuaranteedRenewalPeriod\" v-if=\"searchForm.renewalMark\">\r\n              <el-input v-model=\"searchForm.maxGuaranteedRenewalPeriod\"\r\n                        :disabled=\"searchForm.guaranteedRenewable?false:true\"\r\n                        :placeholder=\"$t('pdtempPdRnInfo.placeholder')\"\r\n                        type=\"number\">\r\n                <cus-select slot=\"append\" v-model=\"searchForm.maxGuaranteedRenewalPeriodUnit\" :codetype=\"'saledes'\"\r\n                            :disabled=\"searchForm.guaranteedRenewable?false:true\" :hideCode=\"true\" class=\"cst\"\r\n                            prop=\"guaranteedRenewalPeriodUnit\">\r\n                </cus-select>\r\n              </el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <el-form-item style=\"float: right\">\r\n        <el-row>\r\n          <cus-col :span=\"24\">\r\n            <el-button dialog-disable=\"disable\"  size=\"small\" v-if=\"!searchForm.Id\" v-auth=\"'pdtemp-pd-rn-info:add'\" icon=\"el-icon-success\"\r\n                       type=\"primary\" @click=\"handleCreate\">\r\n              {{ $t('pdtempPdRnInfo.save') }}\r\n            </el-button>\r\n            <el-button dialog-disable=\"disable\"  size=\"small\" v-if=\"searchForm.Id\" v-auth=\"'pdtemp-pd-rn-info:update'\" icon=\"el-icon-success\"\r\n                       style=\"margin-right: 5px\"\r\n                       type=\"primary\" @click=\"handleUpdate\">\r\n              {{ $t('pdtempPdRnInfo.update') }}\r\n            </el-button>\r\n            <cus-del-btn v-if=\"searchForm.Id\" v-auth=\"'pdtemp-pd-rn-info:delete'\"\r\n                         :buttonText=\"$t('table.delete')\"\r\n                         size=\"medium\" style=\"margin-right: 5px\" @ok=\"handleDelete\">\r\n              {{ $t('table.delete') }}\r\n            </cus-del-btn>\r\n            <el-button dialog-disable=\"disable\"  size=\"small\" icon=\"el-icon-refresh\" type=\"primary\" @click=\"resetFormCopy\">\r\n              {{ $t('pdtempPdRnInfo.clear') }}\r\n            </el-button>\r\n          </cus-col>\r\n        </el-row>\r\n      </el-form-item>\r\n    </el-form>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {\r\n  addPdtempPdRnInfo,\r\n  deletePdtempPdRnInfo,\r\n  pdgenlAttrsInfoList,\r\n  pdtempPdClsLabList,\r\n  queryPdtempPdRptInfo,\r\n  updatePdtempPdRnInfo,\r\n    initChar\r\n} from '@/api/basicinfo/pdtemppdrninfo'\r\n\r\nimport operationbutton from '@/views/basicinfo/operationend/index'\r\nimport request from '@/utils/request'\r\nlet _this\r\nexport default {\r\n  name: 'pdtempPdRnInfo',\r\n  components: { operationbutton },\r\n  filters: {\r\n    filter_codeType(code, value) {\r\n      if (value === 'pdGrcCalMode') {\r\n        return _this.getCodeName('gracePeriodCalculation', code)\r\n      } else if (value == 'pdOverDueDealMode') {\r\n        return _this.getCodeName('expectedTreatment', code)\r\n      } else if (value == 'pdRnCvliDate') {\r\n        return _this.getCodeName('renewalEffectiveDate', code)\r\n      } else if (value == 'pdEndDateMode') {\r\n        return _this.getCodeName('originalPolicyTermination', code)\r\n      } else if (value == 'pdRnPolType') {\r\n        return _this.getCodeName('renewInsuranceMethod', code)\r\n      }\r\n    }\r\n  },\r\n  inject: ['reload'],\r\n  data() {\r\n    _this = this\r\n    return {\r\n      type: 'productRenewalFlag',\r\n      pdProcessId: '',\r\n      showPageFlag: 0,\r\n      // 产品信息\r\n      product: {\r\n        id: undefined,\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      //查询参数\r\n      params: {\r\n        eq_pdInfoId: ''\r\n      },\r\n      searchForm: {  //表单数据\r\n        Id: '',//主键\r\n        renewalChargeMark: false,//续期收费标记\r\n        call: false,//催缴\r\n        gracePeriodCalculationMethod: '',//宽限期计算方式\r\n        gracePeriod: '',//宽限期\r\n        renewalEffectiveDate: '',//续保生效日计算方式\r\n        originalPolicyTerminationDate: '',//原保单终止日期计算方式\r\n        renewInsuranceMethod: '',//续保保单方式\r\n        renewalMark: false,//续保标记\r\n        renewableAfterClaimSettlement: false,//理赔后可续保\r\n        guaranteedRenewable: true,//保证续保\r\n        guaranteedRenewalPeriod: '',//保证续保年限\r\n        guaranteedRenewalPeriodUnit: '',//保证续保年限 -- 年、岁\r\n        maxGuaranteedRenewalPeriod: '',//最高保证续保年限\r\n        maxGuaranteedRenewalPeriodUnit: '',//最高保证续保年限 -- 年、岁\r\n        expectedTreatment: ''//逾期处理方式\r\n      },\r\n      searchForm2: {  //表单数据\r\n        Id: '',//主键\r\n        renewalChargeMark: false,//续期收费标记\r\n        call: false,//催缴\r\n        gracePeriodCalculationMethod: '',//宽限期计算方式\r\n        gracePeriod: '',//宽限期\r\n        renewalEffectiveDate: '',//续保生效日计算方式\r\n        originalPolicyTerminationDate: '',//原保单终止日期计算方式\r\n        renewInsuranceMethod: '',//续保保单方式\r\n        renewalMark: false,//续保标记\r\n        renewableAfterClaimSettlement: false,//理赔后可续保\r\n        guaranteedRenewable: false,//保证续保\r\n        guaranteedRenewalPeriod: '',//保证续保年限\r\n        guaranteedRenewalPeriodUnit: '',//保证续保年限 -- 年、岁\r\n        maxGuaranteedRenewalPeriod: '',//最高保证续保年限\r\n        maxGuaranteedRenewalPeriodUnit: '',//最高保证续保年限 -- 年、岁\r\n        expectedTreatment: ''//逾期处理方式\r\n      },\r\n      //检验规则\r\n      rules: {\r\n        gracePeriod: [{ required: true, message: this.$t('pdtempPdRnInfo.message1'), trigger: 'blur' }],\r\n        gracePeriodCalculationMethod: [{\r\n          required: true,\r\n          message: this.$t('pdtempPdRnInfo.message2'),\r\n          trigger: 'blur'\r\n        }],\r\n        expectedTreatment: [{\r\n          required: true,\r\n          message: this.$t('pdtempPdRnInfo.message3'),\r\n          trigger: 'blur'\r\n        }],\r\n        originalPolicyTerminationDate: [{\r\n          required: true,\r\n          message: this.$t('pdtempPdRnInfo.message4'),\r\n          trigger: 'blur'\r\n        }],\r\n        renewInsuranceMethod: [{\r\n          required: true,\r\n          message: this.$t('pdtempPdRnInfo.message5'),\r\n          trigger: 'blur'\r\n        }],\r\n        renewalEffectiveDate: [{\r\n          required: true,\r\n          message: this.$t('pdtempPdRnInfo.message6'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted(){\r\n    this.$emit('finish')\r\n  },\r\n  async created() {\r\n    this.$emit('finish')\r\n    this.showPageFlag = this.$route.query.showPageFlag\r\n    await this.initProductInfo()\r\n    this.initializationShow()\r\n    this.initPageData();\r\n  },\r\n  methods: {\r\n    // 初始化产品信息 -- 从session\r\n    async initProductInfo() {\r\n      let pdtempPdInfo = this.getPdData()\r\n      if (pdtempPdInfo) {\r\n        Object.assign(this.product, pdtempPdInfo)\r\n        this.pdProcessId = pdtempPdInfo.pdProcessId\r\n        this.params.eq_pdInfoId = this.product.id\r\n        console.log(this.product)\r\n      }\r\n    },\r\n    initPageData() {\r\n        let test =  {  //表单数据\r\n            Id: '',//主键\r\n                renewalChargeMark: '',//续期收费标记\r\n                call: '',//催缴\r\n                gracePeriodCalculationMethod: '',//宽限期计算方式\r\n                gracePeriod: '',//宽限期\r\n                renewalEffectiveDate: '',//续保生效日计算方式\r\n                originalPolicyTerminationDate: '',//原保单终止日期计算方式\r\n                renewInsuranceMethod: '',//续保保单方式\r\n                renewalMark: false,//续保标记\r\n                renewableAfterClaimSettlement: '',//理赔后可续保\r\n                guaranteedRenewable: '',//保证续保\r\n                guaranteedRenewalPeriod: '',//保证续保年限\r\n                guaranteedRenewalPeriodUnit: '',//保证续保年限 -- 年、岁\r\n                maxGuaranteedRenewalPeriod: '',//最高保证续保年限\r\n                maxGuaranteedRenewalPeriodUnit: '',//最高保证续保年限 -- 年、岁\r\n                expectedTreatment: ''//逾期处理方式\r\n        };\r\n        this.searchForm=test;\r\n\r\n      let data = {\r\n        'page': null,\r\n        'params': {\r\n          'eq_pdInfoId': this.product.id\r\n        },\r\n        'limit': null\r\n      }\r\n      request({\r\n        url: '/pdtemp-pd-rn-info/base/list',\r\n        method: 'post',\r\n        data\r\n      }).then(res => {\r\n        if (res.data.records.length) {\r\n          let row = res.data.records[0];\r\n          this.searchForm.Id = row.id\r\n          if (row.pdRnPremFlag == 'Y') {//续期收费标记\r\n            this.searchForm.renewalChargeMark = true\r\n          } else {\r\n            this.searchForm.renewalChargeMark = false\r\n          }\r\n          if (row.pdUrgePayFlag == 'Y') {//催缴标记 Y--发催收 N--不催收\r\n            this.searchForm.call = true\r\n          } else {\r\n            this.searchForm.call = false\r\n          }\r\n          this.searchForm.gracePeriodCalculationMethod = row.pdGrcCalMode//宽限期计算方式 0 - 以计算为准1 - 下月一号2 - 下年一号\r\n          this.searchForm.gracePeriod = row.pdGrcPeriod//宽限期\r\n          this.searchForm.expectedTreatment = row.pdOverDueDealMode//逾期处理方式\r\n          if (row.pdRnPolFlag == 'Y') {//续保标记 0-否  1-是\r\n            this.searchForm.renewalMark = true\r\n          } else {\r\n            this.searchForm.renewalMark = false\r\n          }\r\n          if (row.pdClmRnFlag == 'Y') {//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n            this.searchForm.renewableAfterClaimSettlement = true\r\n          } else {\r\n            this.searchForm.renewableAfterClaimSettlement = false\r\n          }\r\n          this.searchForm.renewalEffectiveDate = row.pdRnCvliDate//续保生效日计算方式 0--表示当天生效  1--表示次日生效  2--可录入\r\n          this.searchForm.renewInsuranceMethod = row.pdRnPolType//续保保单方式 Y--生成新单  N--不生成新单\r\n          this.searchForm.originalPolicyTerminationDate = row.pdEndDateMode//原保单终止日期计算方式 0--当天终止 1--次日终止  2--录入终止日期\r\n          if (row.pdGuarRnFlag == 'Y') {//保证续保\r\n            this.searchForm.guaranteedRenewable = true\r\n            this.searchForm.guaranteedRenewalPeriod = row.pdGuarRnYears//保证续保年限\r\n             this.searchForm.guaranteedRenewalPeriodUnit = row.pdGuarRnYearsUnit//保证续保年限单位\r\n            this.searchForm.maxGuaranteedRenewalPeriod = row.pdMaxGuarRnYears//最高保证续保年限\r\n              this.searchForm.maxGuaranteedRenewalPeriodUnit = row.pdMaxGuarRnYearsUnit//最高保证续保年限单位\r\n          } else {\r\n            this.searchForm.guaranteedRenewable = false\r\n          }\r\n\r\n        }else {\r\n            let itemVo=this.getPdData();\r\n            let maps={\r\n                pdinfoId:itemVo.id,\r\n            };\r\n            initChar(this.buildRequestData(maps)).then(res=>{\r\n                let aa= res.data;\r\n                if (aa.length<1){\r\n\r\n                }else {\r\n                    if (aa[0].pdNbChoType=='00'){\r\n                        this.searchForm.renewalEffectiveDate=aa[0].pdNbChoVal\r\n                    }\r\n                }\r\n\r\n            })\r\n        }\r\n      })\r\n      if (this.searchForm.guaranteedRenewable == ''){\r\n        this.searchForm.guaranteedRenewable = true\r\n      }\r\n    },\r\n    backToMenu() {\r\n      this.$router.push({ path: '/product-definition/pd-operation-def/pd-renewal-def/renewal-apply', params: {} })\r\n    },\r\n    //页面初始化\r\n    initializationShow() {\r\n      //分类标记表\r\n      let back2 = ''\r\n      back2 = pdtempPdClsLabList(this.product.id)\r\n      back2.then(response => {\r\n        if (response.code == 200) {\r\n          for (let i = 0; i < response.data.length; i++) {\r\n            if (response.data[i].pdClsType == 2) {\r\n              this.searchForm.renewalChargeMark = response.data[i].pdCls5 == 'Y'\r\n              this.searchForm.renewalMark =  response.data[i].pdCls7 == 'Y'\r\n              this.searchForm.call = response.data[i].pdCls6 == 'Y'\r\n            }\r\n          }\r\n        };\r\n      })\r\n      //初始化 -- 宽限期\r\n      let back4 = ''\r\n      let pdgenlAttrsInfo = {\r\n        attrsClass: '',\r\n        rateClass: '',\r\n        rateCurr: '',\r\n        rateType: '',\r\n        feeType: '',\r\n        attrVal: '',\r\n        grcPeriod: '',\r\n        riskType: '',\r\n        riskDetail: ''\r\n      }\r\n      pdgenlAttrsInfo.attrsClass = 'PG'\r\n      back4 = pdgenlAttrsInfoList(pdgenlAttrsInfo)\r\n      back4.then(response => {\r\n        if (response.code == 200 && response.data.length > 0) {\r\n          for (let i = 0; i < response.data.length; i++) {\r\n            this.searchForm.gracePeriod = response.data[0].grcPeriod\r\n          }\r\n        }\r\n      })\r\n    },\r\n    resetFormData() {\r\n      this.$nextTick(function() {\r\n        this.searchForm2 = {  //表单数据\r\n          Id: '',//主键\r\n          renewalChargeMark: false,//续期收费标记\r\n          call: false,//催缴\r\n          gracePeriodCalculationMethod: '',//宽限期计算方式\r\n          gracePeriod: '',//宽限期\r\n          renewalEffectiveDate: '',//续保生效日计算方式\r\n          originalPolicyTerminationDate: '',//原保单终止日期计算方式\r\n          renewInsuranceMethod: '',//续保保单方式\r\n          renewalMark: false,//续保标记\r\n          renewableAfterClaimSettlement: false,//理赔后可续保\r\n          guaranteedRenewable: false,//保证续保\r\n          guaranteedRenewalPeriod: '',//保证续保年限\r\n          guaranteedRenewalPeriodUnit: '',//保证续保年限 -- 年、岁\r\n          maxGuaranteedRenewalPeriod: '',//最高保证续保年限\r\n          maxGuaranteedRenewalPeriodUnit: '',//最高保证续保年限 -- 年、岁\r\n          expectedTreatment: ''//逾期处理方式\r\n        }\r\n        this.searchForm = this.searchForm2\r\n      })\r\n    },\r\n    handleCreate() {\r\n      this.$refs['searchForm'].validate((valid) => {\r\n        if (valid) {\r\n          let pdtempPdRnInfo;\r\n          if (this.searchForm.renewalMark){\r\n            pdtempPdRnInfo = {\r\n              pdVerId: '',\r\n              pdType: '',//商品类型\r\n              pdInfoId: '',\r\n              pdCode: '',\r\n              pdRnPremFlag: '',//续期收费标记0-否1-是\r\n              pdUrgePayFlag: '',//催缴标记Y--发催收 N--不催收\r\n              pdGrcCalMode: '',//宽限期计算方式 0 - 以计算为准1 - 下月一号2 - 下年一号\r\n              pdGrcPeriod: '',//宽限期\r\n              pdGrcPeriodUnit: '',//宽限期单位Y--年M--月D--日\r\n              pdOverDueDealMode: '',//逾期处理方式\r\n              pdRnPolFlag: '',//续保标记 0-否  1-是\r\n              pdClmRnFlag: '',//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n              pdRnCvliDate: '',//续保生效日计算方式 0--表示当天生效  1--表示次日生效  2--可录入\r\n              pdRnPolType: '',//续保保单方式 Y--生成新单  N--不生成新单\r\n              pdEndDateMode: '',//原保单终止日期计算方式 0--当天终止 1--次日终止  2--录入终止日期\r\n              pdGuarRnFlag: '',//保证续保\r\n              pdGuarRnYears: '',//保证续保年限\r\n              pdGuarRnYearsUnit: '',//保证续保年限单位\r\n              pdMaxGuarRnYears: '',//最高保证续保年限\r\n              pdMaxGuarRnYearsUnit: ''//最高保证续保年限单位\r\n            }\r\n          }else {\r\n            pdtempPdRnInfo = {\r\n              pdVerId: '',\r\n              pdType: '',//商品类型\r\n              pdInfoId: '',\r\n              pdCode: '',\r\n              pdRnPremFlag: '',//续期收费标记0-否1-是\r\n              pdUrgePayFlag: '',//催缴标记Y--发催收 N--不催收\r\n              pdGrcCalMode: '',//宽限期计算方式 0 - 以计算为准1 - 下月一号2 - 下年一号\r\n              pdGrcPeriod: '',//宽限期\r\n              pdGrcPeriodUnit: '',//宽限期单位Y--年M--月D--日\r\n              pdOverDueDealMode: '',//逾期处理方式\r\n              pdRnPolFlag: '',//续保标记 0-否  1-是\r\n              pdClmRnFlag: '',//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n              pdRnCvliDate: '',//续保生效日计算方式 0--表示当天生效  1--表示次日生效  2--可录入\r\n              pdRnPolType: '',//续保保单方式 Y--生成新单  N--不生成新单\r\n              pdEndDateMode: '',//原保单终止日期计算方式 0--当天终止 1--次日终止  2--录入终止日期\r\n              pdGuarRnFlag: '',//保证续保\r\n              pdGuarRnYears: '',//保证续保年限\r\n              pdGuarRnYearsUnit: '',//保证续保年限单位\r\n              pdMaxGuarRnYears: '',//最高保证续保年限\r\n              pdMaxGuarRnYearsUnit: ''//最高保证续保年限单位\r\n            }\r\n          }\r\n\r\n          pdtempPdRnInfo.pdVerId = this.product.pdVerId//\r\n          pdtempPdRnInfo.pdInfoId = this.product.id//\r\n          pdtempPdRnInfo.pdCode = this.product.pdCode//\r\n          if (this.searchForm.renewalChargeMark == true) {//续期收费标记\r\n            pdtempPdRnInfo.pdRnPremFlag = 'Y'\r\n          } else {\r\n            pdtempPdRnInfo.pdRnPremFlag = 'N'\r\n          }\r\n          if (this.searchForm.call == true) {//催缴标记 Y--发催收 N--不催收\r\n            pdtempPdRnInfo.pdUrgePayFlag = 'Y'\r\n          } else {\r\n            pdtempPdRnInfo.pdUrgePayFlag = 'N'\r\n          }\r\n          pdtempPdRnInfo.pdGrcCalMode = this.searchForm.gracePeriodCalculationMethod//宽限期计算方式 0 - 以计算为准1 - 下月一号2 - 下年一号\r\n          pdtempPdRnInfo.pdGrcPeriod = this.searchForm.gracePeriod//宽限期\r\n          pdtempPdRnInfo.pdGrcPeriodUnit = 'D'//宽限期单位Y--年M--月D--日\r\n          pdtempPdRnInfo.pdOverDueDealMode = this.searchForm.expectedTreatment//逾期处理方式\r\n          if (this.searchForm.renewalMark == true) {//续保标记 0-否  1-是\r\n            pdtempPdRnInfo.pdRnPolFlag = 'Y'\r\n          } else {\r\n            pdtempPdRnInfo.pdRnPolFlag = 'N'\r\n          }\r\n\r\n          if (this.searchForm.renewalMark){ //隐藏判断  不隐藏\r\n            if (this.searchForm.renewableAfterClaimSettlement == true) {//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n              pdtempPdRnInfo.pdClmRnFlag = 'Y'\r\n            } else {\r\n              pdtempPdRnInfo.pdClmRnFlag = 'N'\r\n            }\r\n          }else {\r\n            if (this.searchForm.renewableAfterClaimSettlement == true) {//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n              pdtempPdRnInfo.pdClmRnFlag = 'N'\r\n            } else {\r\n              pdtempPdRnInfo.pdClmRnFlag = 'N'\r\n            }\r\n          }\r\n\r\n          if (this.searchForm.renewalMark){ //隐藏判断\r\n            pdtempPdRnInfo.pdRnCvliDate = this.searchForm.renewalEffectiveDate//续保生效日计算方式 0--表示当天生效  1--表示次日生效  2--可录入\r\n            pdtempPdRnInfo.pdRnPolType = this.searchForm.renewInsuranceMethod//续保保单方式 Y--生成新单  N--不生成新单\r\n            pdtempPdRnInfo.pdEndDateMode = this.searchForm.originalPolicyTerminationDate//原保单终止日期计算方式 0--当天终止 1--次日终止  2--录入终止日期\r\n          }else {\r\n            pdtempPdRnInfo.pdRnCvliDate = '';\r\n            pdtempPdRnInfo.pdRnPolType = '';\r\n            pdtempPdRnInfo.pdEndDateMode = '';\r\n          }\r\n\r\n          if (this.searchForm.renewalMark){ //隐藏判断\r\n            if (this.searchForm.guaranteedRenewable == true) {//保证续保\r\n              pdtempPdRnInfo.pdGuarRnFlag = 'Y'\r\n              pdtempPdRnInfo.pdGuarRnYears = this.searchForm.guaranteedRenewalPeriod//保证续保年限\r\n              pdtempPdRnInfo.pdGuarRnYearsUnit = this.searchForm.guaranteedRenewalPeriodUnit//保证续保年限单位\r\n              pdtempPdRnInfo.pdMaxGuarRnYears = this.searchForm.maxGuaranteedRenewalPeriod//最高保证续保年限\r\n              pdtempPdRnInfo.pdMaxGuarRnYearsUnit = this.searchForm.maxGuaranteedRenewalPeriodUnit//最高保证续保年限单位\r\n            } else {\r\n              pdtempPdRnInfo.pdGuarRnFlag = 'N'\r\n            }\r\n          }else {\r\n            if (this.searchForm.guaranteedRenewable == true) {//保证续保\r\n              pdtempPdRnInfo.pdGuarRnFlag = 'N'\r\n              pdtempPdRnInfo.pdGuarRnYears = ''\r\n              pdtempPdRnInfo.pdGuarRnYearsUnit = ''\r\n              pdtempPdRnInfo.pdMaxGuarRnYears = ''\r\n              pdtempPdRnInfo.pdMaxGuarRnYearsUnit = ''\r\n            } else {\r\n              pdtempPdRnInfo.pdGuarRnFlag = 'N'\r\n            }\r\n          }\r\n\r\n          let back\r\n          back = addPdtempPdRnInfo(pdtempPdRnInfo)\r\n          back.then(() => {\r\n            this.notifySuccess(this.$t('successMessage.save'))\r\n            this.params.eq_pdInfoId = this.product.id\r\n            this.reload()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleUpdate() {\r\n      this.$refs['searchForm'].validate((valid) => {\r\n        if (valid) {\r\n          if (this.searchForm.Id != '' && this.searchForm.Id != null) {\r\n            let pdtempPdRnInfo = {\r\n              id: '',\r\n              pdVerId: '',\r\n              pdType: '',//商品类型\r\n              pdInfoId: '',\r\n              pdCode: '',\r\n              pdRnPremFlag: '',//续期收费标记0-否1-是\r\n              pdUrgePayFlag: '',//催缴标记Y--发催收 N--不催收\r\n              pdGrcCalMode: '',//宽限期计算方式 0 - 以计算为准1 - 下月一号2 - 下年一号\r\n              pdGrcPeriod: '',//宽限期\r\n              pdGrcPeriodUnit: '',//宽限期单位Y--年M--月D--日\r\n              pdOverDueDealMode: '',//逾期处理方式\r\n              pdRnPolFlag: '',//续保标记 0-否  1-是\r\n              pdClmRnFlag: '',//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n              pdRnCvliDate: '',//续保生效日计算方式 0--表示当天生效  1--表示次日生效  2--可录入\r\n              pdRnPolType: '',//续保保单方式 Y--生成新单  N--不生成新单\r\n              pdEndDateMode: '',//原保单终止日期计算方式 0--当天终止 1--次日终止  2--录入终止日期\r\n              pdGuarRnFlag: '',//保证续保\r\n              pdGuarRnYears: '',//保证续保年限\r\n              pdGuarRnYearsUnit: '',//保证续保年限单位\r\n              pdMaxGuarRnYears: '',//最高保证续保年限\r\n              pdMaxGuarRnYearsUnit: ''//最高保证续保年限单位\r\n            }\r\n            pdtempPdRnInfo.pdVerId = this.product.pdVerId//\r\n            pdtempPdRnInfo.pdInfoId = this.product.id//\r\n            pdtempPdRnInfo.pdCode = this.product.pdCode//\r\n            pdtempPdRnInfo.id = this.searchForm.Id//\r\n            if (this.searchForm.renewalChargeMark == true) {//续期收费标记\r\n              pdtempPdRnInfo.pdRnPremFlag = 'Y'\r\n            } else {\r\n              pdtempPdRnInfo.pdRnPremFlag = 'N'\r\n            }\r\n            if (this.searchForm.call == true) {//催缴标记 Y--发催收 N--不催收\r\n              pdtempPdRnInfo.pdUrgePayFlag = 'Y'\r\n            } else {\r\n              pdtempPdRnInfo.pdUrgePayFlag = 'N'\r\n            }\r\n            pdtempPdRnInfo.pdGrcCalMode = this.searchForm.gracePeriodCalculationMethod//宽限期计算方式 0 - 以计算为准1 - 下月一号2 - 下年一号\r\n            pdtempPdRnInfo.pdGrcPeriod = this.searchForm.gracePeriod//宽限期\r\n            pdtempPdRnInfo.pdGrcPeriodUnit = 'D'//宽限期单位Y--年M--月D--日\r\n            pdtempPdRnInfo.pdOverDueDealMode = this.searchForm.expectedTreatment//逾期处理方式\r\n            if (this.searchForm.renewalMark == true) {//续保标记 0-否  1-是\r\n              pdtempPdRnInfo.pdRnPolFlag = 'Y'\r\n            } else {\r\n              pdtempPdRnInfo.pdRnPolFlag = 'N'\r\n            }\r\n            if (this.searchForm.renewableAfterClaimSettlement == true) {//理赔后可续保 N--理赔后不能续保 Y--理赔后能续保\r\n              pdtempPdRnInfo.pdClmRnFlag = 'Y'\r\n            } else {\r\n              pdtempPdRnInfo.pdClmRnFlag = 'N'\r\n            }\r\n            pdtempPdRnInfo.pdRnCvliDate = this.searchForm.renewalEffectiveDate//续保生效日计算方式 0--表示当天生效  1--表示次日生效  2--可录入\r\n            pdtempPdRnInfo.pdRnPolType = this.searchForm.renewInsuranceMethod//续保保单方式 Y--生成新单  N--不生成新单\r\n            pdtempPdRnInfo.pdEndDateMode = this.searchForm.originalPolicyTerminationDate//原保单终止日期计算方式 0--当天终止 1--次日终止  2--录入终止日期\r\n            if (this.searchForm.guaranteedRenewable == true) {//保证续保\r\n              pdtempPdRnInfo.pdGuarRnFlag = 'Y'\r\n                pdtempPdRnInfo.pdGuarRnYears = this.searchForm.guaranteedRenewalPeriod//保证续保年限\r\n                pdtempPdRnInfo.pdGuarRnYearsUnit = this.searchForm.guaranteedRenewalPeriodUnit//保证续保年限单位\r\n                pdtempPdRnInfo.pdMaxGuarRnYears = this.searchForm.maxGuaranteedRenewalPeriod//最高保证续保年限\r\n                pdtempPdRnInfo.pdMaxGuarRnYearsUnit = this.searchForm.maxGuaranteedRenewalPeriodUnit//最高保证续保年限单位\r\n\r\n            } else {\r\n              pdtempPdRnInfo.pdGuarRnFlag = 'N'\r\n            }\r\n            let back\r\n            back = updatePdtempPdRnInfo(pdtempPdRnInfo)\r\n            back.then(() => {\r\n              this.notifySuccess(this.$t('successMessage.save'))\r\n              this.params.eq_pdInfoId = this.product.id\r\n              this.resetFormCopy()\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    handleDelete() {\r\n      let id = this.searchForm.Id\r\n      let back = ''\r\n      back = deletePdtempPdRnInfo(id)\r\n      back.then(response => {\r\n        this.notifySuccess(response.message)\r\n        this.params.eq_pdInfoId = this.product.id\r\n        this.resetFormData();\r\n        this.initializationShow()//初始化\r\n      })\r\n    },\r\n    //清空\r\n    resetForm() {\r\n      this.$refs.searchForm.resetFields()\r\n      this.initializationShow()//初始化\r\n    },\r\n      resetFormCopy(){\r\n        if (this.searchForm.Id){\r\n            this.initPageData()\r\n        }else {\r\n            this.$refs.searchForm.resetFields()\r\n            this.initializationShow()//初始化\r\n        }\r\n      },\r\n  },\r\n  watch: {\r\n      'searchForm.guaranteedRenewalPeriod'(){\r\n          if (this.searchForm.guaranteedRenewalPeriod){\r\n              if (!this.searchForm.guaranteedRenewalPeriodUnit){\r\n                  this.searchForm.guaranteedRenewalPeriodUnit='S'\r\n              }\r\n          }\r\n      },\r\n      'searchForm.maxGuaranteedRenewalPeriod'(){\r\n          if (this.searchForm.maxGuaranteedRenewalPeriod){\r\n              if (!this.searchForm.maxGuaranteedRenewalPeriodUnit){\r\n                  this.searchForm.maxGuaranteedRenewalPeriodUnit='S'\r\n              }\r\n          }\r\n      },\r\n    //保证续保\r\n    'searchForm.guaranteedRenewable': function(newName, oldName) {\r\n      if (this.searchForm.guaranteedRenewable == false) {\r\n        this.searchForm.guaranteedRenewalPeriod = ''\r\n        this.searchForm.guaranteedRenewalPeriodUnit = ''\r\n        this.searchForm.maxGuaranteedRenewalPeriod = ''\r\n        this.searchForm.maxGuaranteedRenewalPeriodUnit = ''\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cst {\r\n  width: 100px;\r\n}\r\n\r\n.showDiv {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: -40px;\r\n  margin-left: -40px;\r\n  position: absolute;\r\n  background: #ffffff00;\r\n  z-index: 999;\r\n}\r\n\r\n</style>\r\n"]}]}