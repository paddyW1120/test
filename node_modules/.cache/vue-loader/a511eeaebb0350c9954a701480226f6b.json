{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\package-audit\\comboAudit\\index.vue?vue&type=style&index=0&id=46e7e0b9&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\package-audit\\comboAudit\\index.vue","mtime":1609847106599},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubm90VGV4dGFyZWEgLmVsLXRleHRhcmVhX19pbm5lciB7CiAgYm9yZGVyOiAwOwogIHBhZGRpbmc6IDA7CiAgcmVzaXplOiBub25lOwogIGNvbG9yOiAjNjA2MjY2OwogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA49DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-audit/package-audit/comboAudit","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back @backTo=\"backPage\"  :label=\"$t('route.comboAudit')\"/>\r\n    <!-- 产品套餐信息 -->\r\n    <el-form label-width=\"80px\">\r\n      <el-row>\r\n        <el-form-item :label=\"$t('comboAudit.comboMeat')\">\r\n          <el-tag type=\"info\">{{ this.pdInfo.ppCode + ' : ' + this.pdInfo.ppName }}</el-tag>\r\n        </el-form-item>\r\n      </el-row>\r\n    </el-form>\r\n    <div>\r\n      <cus-form-title :label=\"$t('i18nView.comboDetail')\"/>\r\n      <el-form :model=\"auditForm\" label-width=\"auto\" :rules=\"rules\"\r\n               style=\"margin-top: 33px\">\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px;padding-bottom: 14px\">\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdDesignPage\">{{$t('comboAudit.comboBase')}}<i class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdSalePage\">{{$t('comboAudit.comboSale')}}<i class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdUWPage\">{{$t('comboAudit.comboAcceptance')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdRWPage\">{{$t('comboAudit.comboUnderwriting')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdPVPage\">{{$t('comboAudit.comboClaim')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getTestPage\">{{$t('comboAudit.comboTest')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n        </el-row>\r\n        <div v-if=\"this.pdAuditType=='3'\">\r\n          <cus-form-title :label=\"$t('route.comboStop')\" />\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <el-col :span=\"6\">\r\n              <el-form-item>{{$t('comboAudit.pdVerDisDate')}}\r\n                <el-tag type=\"info\">{{auditForm.stopDate }}</el-tag>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <el-col :span=\"6\">\r\n              <el-form-item>{{$t('comboAudit.pdVerDisResn')}}\r\n                <el-tag type=\"info\">{{auditForm.stopReason }}</el-tag>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <div v-if=\"this.pdAuditType!='3'\">\r\n          <cus-form-title :label=\"$t('comboAudit.comboDetailsAudit')\" />\r\n          <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.pdAuditType=='1' ||this.pdReviseType =='1'\">\r\n            <cus-table-title  :label=\"$t('comboAudit.comboPostAudit')\"></cus-table-title>\r\n            <el-table :data=\"comboContentAudit\" ref=\"multipleTable\" size=\"mini\" @selection-change=\"changeFun\"\r\n                      fit element-loading-text=\"Loading\" border highlight-current-row align=\"center\"\r\n                      class=\"wraper-table\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\"></el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.defineContent')\" prop=\"pdDefineContent\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdDefineContent | filter_pdNodeCode}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdAuditConcthis | filter_pdAuditConcthis}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               prop=\"pdIsCancelDefinition\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.packageUnderwritingFlag')\"\r\n                               prop=\"pdIsCancelDefinition\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form :model=\"comboTableForm\" label-width=\"auto\" :rules=\"comboTableForm_rules\"\r\n                     ref=\"comboTableForm\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.defineContent')\" prop=\"pdDefineContent\">\r\n                    <el-select clearable filterable multiple v-model=\"comboTableForm.pdDefineContent\" value-key=\"id\"\r\n                               :disabled=\"dataSelect\">\r\n                      <el-option :key=\"item.id\" :label=\"item.label\" :value=\"item.value\" :disabled=\"item.disabled\"\r\n                                 v-for=\"item in comboNodeList\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"16\"></el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\" >\r\n                <el-col :span=\"12\">\r\n                  <el-form-item prop=\"pdAuditConcthis\" :label=\"$t('i18nView.auditRes')\">\r\n                    <el-radio-group v-model=\"comboTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                      <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                  <el-form-item prop=\"pdIsCancelDefinition\" :label=\"$t('comboAudit.pdIsCancelDefinition')\">\r\n                    <el-switch v-model=\"comboTableForm.pdIsCancelDefinition\" :disabled=\"comboTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\" >\r\n                <el-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"comboTableForm.pdNotPassOpinion\" :disabled=\"comboTableForm.pdAuditConcthis=='Y'\"\r\n                                type=\"text\" maxlength=\"130\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\" >\r\n                <el-col :span=\"24\" align=\"right\">\r\n                  <el-button  size=\"small\" type=\"primary\"\r\n                             :icon=\"this.comboUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                             @click=\"addComboAuditTableData\">{{this.comboUpdateFlag? $t('comboAudit.update') :\r\n                    $t('comboAudit.addData') }}\r\n                  </el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showRuleTableFlag\">\r\n            <cus-table-title  :label=\"$t('comboAudit.rulesPostAudit')\"></cus-table-title>\r\n            <el-table :data=\"comboRuleAudit\" @selection-change=\"changeRuleData\" ref=\"multipleRuleTable\" size=\"mini\" fit\r\n                      element-loading-text=\"Loading\" border highlight-current-row\r\n                      align=\"center\" class=\"wraper-table\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" type=\"index\" align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleCode')\" prop=\"pdFormulaRuleCode\" align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussType')\" prop=\"pdFormulaRuleType\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdRuleType}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" prop=\"pdFormulaRuleDetails\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdRuleDetails}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleDec')\" prop=\"pdFormulaRuleDescribe\" align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdAuditConcthis | filter_pdAuditConcthis}}</template>\r\n              </el-table-column>\r\n              <el-table-column  :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               prop=\"pdIsCancelDefinition\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\" align=\"center\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form label-width=\"auto\" :rules=\"ruleTableForm_rules\" :model=\"ruleTableForm\"\r\n                     ref=\"ruleTableForm\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdRules')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select clearable filterable multiple value-key=\"label\" v-model=\"ruleTableForm.pdFormulaRuleCode\"\r\n                               :disabled=\"ruleSelect\" >\r\n                      <el-option :key=\"item.key\" :label=\"item.label\" :value=\"item\"\r\n                                 v-for=\"item in ruleNodeList\" :disabled=\"item.disabled\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"16\"></el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"ruleTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                      <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('comboAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"ruleTableForm.pdIsCancelDefinition\" :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"ruleTableForm.pdNotPassOpinion\" :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\" :placeholder=\"$t('i18nView.pleInput')\" type=\"text\"\r\n                              maxlength=\"130\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\" align=\"right\">\r\n                  <el-button  size=\"small\" type=\"primary\"  :icon=\"this.ruleUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                             @click=\"addRuleAuditTableData\">{{this.ruleUpdateFlag? $t('comboAudit.update') :\r\n                    $t('comboAudit.addData') }}\r\n                  </el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showFormulaTableFlag\">\r\n            <cus-table-title  :label=\"$t('comboAudit.formulaPostAudit')\"></cus-table-title>\r\n            <el-table :data=\"comboFormulaAudit\" @selection-change=\"changeFormulaData\" ref=\"multipleFormulaTable\" size=\"mini\" fit\r\n                      element-loading-text=\"Loading\" border highlight-current-row\r\n                      align=\"center\" class=\"wraper-table\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaCode')\" prop=\"pdFormulaRuleCode\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussType')\" prop=\"pdFormulaRuleType\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdFormulaType}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" prop=\"pdFormulaRuleDetails\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaDec')\" prop=\"pdFormulaRuleDescribe\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdAuditConcthis | filter_pdAuditConcthis}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               prop=\"pdIsCancelDefinition\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\"\r\n                               align=\"center\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form  label-width=\"auto\" :rules=\"formulaTableForm_rules\" :model=\"formulaTableForm\"\r\n                     ref=\"formulaTableForm\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdFormulas')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select clearable filterable multiple value-key=\"label\"\r\n                               v-model=\"formulaTableForm.pdFormulaRuleCode\"\r\n                               :disabled=\"formulaSelect\" >\r\n                      <el-option :key=\"item.key\" :label=\"item.label\" :value=\"item\" :disabled=\"item.disabled\"\r\n                                 v-for=\"item in formulaNodeList\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"16\"></el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"formulaTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                      <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('comboAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"formulaTableForm.pdIsCancelDefinition\"\r\n                               :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"formulaTableForm.pdNotPassOpinion\"\r\n                              :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\"\r\n                              :placeholder=\"$t('i18nView.pleInput')\" type=\"text\"\r\n                              maxlength=\"130\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\" align=\"right\">\r\n                  <el-button  size=\"small\" type=\"primary\"  :icon=\"this.formulaUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                             @click=\"addFormulaAuditTableData\">{{this.formulaUpdateFlag? $t('comboAudit.update') :\r\n                    $t('comboAudit.addData') }}\r\n                  </el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n        <!--审核结论模块-->\r\n        <cus-form-title :label=\"$t('comboAudit.comboAuditResult')\"/>\r\n        <el-form :model=\"comboAuditDetailInfo\"  label-width=\"auto\" :rules=\"auditRules\"\r\n                 ref=\"comboAuditDetailInfo\" style=\"margin-top: 33px\">\r\n          <el-row :gutter=\"10\">\r\n            <el-col :span=\"24\">\r\n              <el-form-item :label=\"$t('i18nView.pdAllAuditConc')\" prop=\"pdAuditConc\">\r\n                <el-radio-group v-model=\"comboAuditDetailInfo.pdAuditConc\">\r\n                  <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                  <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                  <el-radio label=\"X\" v-if=\"this.pdAuditType!='3'\">{{$t('comboAudit.cancelDefinition')}}\r\n                  </el-radio>\r\n                  <el-radio label=\"Z\" v-if=\"this.pdAuditType!='2' && this.pdAuditType!='3'\">{{$t('comboAudit.comboStop')}}\r\n                  </el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" v-if=\"comboAuditDetailInfo.pdAuditConc=='N'\">\r\n            <el-col :span=\"24\">\r\n              <el-form-item :label=\"$t('comboAudit.returnFunctionPoints')\">\r\n                <el-tag type=\"info\">{{this.returnFunctionPoints}}</el-tag>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <div>\r\n            <el-row :gutter=\"10\" v-if=\"this.comboAuditDetailInfo.pdAuditConc=='Y' && this.pdAuditType!='3'\">\r\n              <el-col :span=\"8\">\r\n                <el-form-item :label=\"$t('comboAudit.postContent')\" v-model=\"comboAuditDetailInfo.pdReleContent\">\r\n                    <span v-if=\"this.pdAuditType=='1' || this.pdReviseType=='1'\" label=\"$t('i18nView.pdPostContent')\"\r\n                          v-model=\"comboAuditDetailInfo.pdReleContent\">{{$t('i18nView.pdPostContent')}}</span>\r\n                  <span v-if=\"this.showFormulaTableFlag||this.showRuleTableFlag\" label=\"$t('comboAudit.ruleOrFormulaRelease')\"\r\n                        v-model=\"comboAuditDetailInfo.pdReleContent\">{{$t('comboAudit.ruleOrFormulaRelease')}}</span>\r\n                  <i :class=\"quickicon_audit\" style=\"cursor: pointer\" @click=\"auditClick\"></i>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-link @click=\"showComboFileReleasePage\">{{$t('comboAudit.comboFiles')}}<i class=\"el-icon-office-building\"></i>\r\n                </el-link>\r\n              </el-col>\r\n              <el-col :span=\"8\"></el-col>\r\n            </el-row>\r\n            <div v-if=\"showAuditDataFlag==='Y'\">\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\"\r\n                        v-if=\"(this.pdAuditType=='1' || this.pdReviseType=='1') && comboAuditDetailInfo.pdAuditConc=='Y'\">\r\n                  <el-form-item :label=\"$t('i18nView.pdPostContent')\">\r\n                    <el-tag type=\"info\">{{comboAuditDetailInfo.pdReleContdet}}</el-tag>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n            <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showRuleTableFlag && comboAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\">\r\n              <cus-table-title  :label=\"$t('comboAudit.rulesPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"comboRuleRelease\" size=\"mini\" :span=\"8\" fit element-loading-text=\"Loading\" border\r\n                        highlight-current-row align=\"center\" class=\"wraper-table\">\r\n                <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleCode')\" prop=\"pdFormulaRuleCode\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussType')\" prop=\"pdFormulaRuleType\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdRuleType}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" prop=\"pdFormulaRuleDetails\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdRuleDetails}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleDec')\" prop=\"pdFormulaRuleDescribe\"\r\n                                 align=\"center\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showFormulaTableFlag && comboAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\">\r\n              <cus-table-title  :label=\"$t('comboAudit.formulaPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"comboFormulaRelease\" size=\"mini\" element-loading-text=\"Loading\" border align=\"center\">\r\n                <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaCode')\" prop=\"pdFormulaRuleCode\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussType')\" prop=\"pdFormulaRuleType\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdFormulaType}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" prop=\"pdFormulaRuleDetails\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaDec')\"\r\n                                 prop=\"pdFormulaRuleDescribe\"\r\n                                 align=\"center\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <el-row :gutter=\"10\" v-if=\"this.pdAuditType!='3'&&comboAuditDetailInfo.pdAuditConc=='Y'\">\r\n              <el-col :span=\"24\">\r\n                <el-form-item :label=\"$t('comboAudit.pdReleType')\" prop=\"pdReleType\">\r\n                  <cus-radio :codetype=\"'releasetype'\"  v-model=\"comboAuditDetailInfo.pdReleType\"></cus-radio>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\" v-if=\"comboAuditDetailInfo.pdAuditConc!='X'\">\r\n              <el-col :span=\"24\">\r\n                <el-form-item prop=\"pdAuditIdea\" :label=\"$t('i18nView.auditContent')\">\r\n                  <el-input v-model=\"comboAuditDetailInfo.pdAuditIdea\"  maxlength=\"130\"\r\n                            type=\"text\" show-word-limit></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </el-form>\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"24\" align=\"right\">\r\n            <el-button  size=\"small\" type=\"primary\" icon=\"el-icon-finished\" @click=\"auditPass()\">{{$t('comboAudit.auditBut')}}</el-button>\r\n            <el-button  size=\"small\" icon=\"el-icon-refresh\" type=\"primary\" @click=\"refresh()\">{{$t('comboAudit.refresh')}}</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <el-dialog :show-close=false v-dialog-drag :close-on-click-modal=\"false\" v-if=\"showComboFileReleaseFlag\"\r\n               :visible.sync=\"showComboFileReleaseFlag\" append-to-body center width=\"80%\">\r\n      <comboFileRelase  :pdInfo=\"pdInfo\"  @changeDialogFileRelease=\"changeDialogFileRelease\" @bringPdFileAuditData=\"bringPdFileAuditData\"></comboFileRelase>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {\r\n    addAuditInfoData,\r\n    queryStop,\r\n    queryReviseData,\r\n    findNodeRulesList,\r\n    findNodeFormulaList\r\n  } from \"@/api/basicinfo/comboAuditInfo\";\r\n  import {closeVisitTag} from \"@/utils/tagsView\"\r\nimport  comboFileRelase from \"@/views/commodity-audit/package-audit/comboFileRelase\"\r\n  let _this;\r\n  export default {\r\n      components: {comboFileRelase},\r\n    name: 'comboAudit',\r\n    filters: {\r\n      filter_pdNodeCode(val) {\r\n        let returnText = '';\r\n        switch (val) {\r\n          case 'productRuleFlag':\r\n            returnText = '套餐规则订正';\r\n            break;\r\n          case 'productFormulaFlag':\r\n            returnText = '套餐公式订正';\r\n            break;\r\n          case 'productInfoFlag':\r\n            returnText = '套餐基本信息';\r\n            break;\r\n          case 'productDistributionFlag':\r\n            returnText = '套餐销售信息';\r\n            break;\r\n          case 'productCoverFlag':\r\n            returnText = '套餐承保信息';\r\n            break;\r\n          case 'productUnderwritingFlag':\r\n            returnText = '套餐核保信息';\r\n            break;\r\n          case 'productPreservationFlag':\r\n            returnText = '套餐保全信息';\r\n            break;\r\n          case 'productHePeiFlag':\r\n            returnText = '套餐核赔信息';\r\n            break;\r\n          case 'productRenewalFlag':\r\n            returnText = '套餐续期续保信息';\r\n            break;\r\n        }\r\n        return returnText;\r\n      },\r\n      filter_pdAuditConcthis(code){\r\n        return _this.getCodeName('pdAuditConc', code)\r\n      },\r\n      filter_pdIsCancelDefinition(code){\r\n        return _this.getCodeName('cancelDefinition', code)\r\n      },\r\n      filter_pdRuleType(code) {\r\n        return _this.getCodeName('ruleBusinessModule', code)\r\n      },\r\n      filter_pdFormulaType(code) {\r\n        return _this.getCodeName('ruleBusinessModule', code)\r\n      },\r\n      filter_pdRuleDetails(code) {\r\n        return _this.getCodeName('ruleBusinessDetailClass', code)\r\n      },\r\n      filter_pdFormulaDetails(code) {\r\n        return _this.getCodeName('ruleBusinessDetailClass', code)\r\n      }\r\n    },\r\n    data() {\r\n      _this = this;\r\n      return {\r\n          showComboFileReleaseFlag:false,\r\n          pdFileAuditData:[],\r\n        nodeOptions: [\r\n          {'key': 'productInfoFlag', 'label': '套餐基本信息'},\r\n          {'key': 'productDistributionFlag', 'label': '套餐销售信息'},\r\n          {'key': 'productCoverFlag', 'label': '套餐承保信息'},\r\n          {'key': 'productUnderwritingFlag', 'label': '套餐核保信息'},\r\n          {'key': 'productRenewalFlag', 'label': '套餐续期续保信息'},\r\n          {'key': 'productPreservationFlag', 'label': '套餐保全信息'},\r\n          {'key': 'productHePeiFlag', 'label': '套餐核赔信息'},\r\n          {'key': 'productRuleFlag', 'label': '套餐规则订正'},\r\n          {'key': 'productFormulaFlag', 'label': '套餐公式订正'}],\r\n        returnFunctionPoints: [],\r\n        pdInfo: {},\r\n        auditForm: {\r\n          stopDate: '',\r\n          stopReason: '',\r\n        },\r\n        //套餐内容定义表格\r\n        comboTableForm: {\r\n            contentList:[],\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditNotesInfoId: '',\r\n          pdDefineContent: [],\r\n          pdAuditConcthis: '',\r\n          pdIsCancelDefinition: '',\r\n          pdNotPassOpinion: ''\r\n        },\r\n        ruleTableForm: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditNotesInfoId: '',\r\n          pdDefineContent: '',\r\n          pdReviseType: '',\r\n          pdFormulaRuleCode: [],\r\n          pdFormulaRuleType: '',\r\n          pdFormulaRuleDetails: '',\r\n          pdFormulaRuleDescribe: '',\r\n          pdAuditConcthis: '',\r\n          pdIsCancelDefinition: '',\r\n          pdNotPassOpinion: ''\r\n        },\r\n        formulaTableForm: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditNotesInfoId: '',\r\n          pdDefineContent: '',\r\n          pdReviseType: '',\r\n          pdFormulaRuleCode: [],\r\n          pdFormulaRuleType: '',\r\n          pdFormulaRuleDetails: '',\r\n          pdFormulaRuleDescribe: '',\r\n          pdAuditConcthis: '',\r\n          pdIsCancelDefinition: '',\r\n          pdNotPassOpinion: ''\r\n        },\r\n        comboAuditInfo: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditConc: '',\r\n          pdAuditStaff: '',\r\n          pdAuditDate: '',\r\n          pdIsPostReturn: '',\r\n          pdIsReviewReturn: '',\r\n          pdAuditTimes: '',\r\n          pdReturnTimes: '',\r\n          pdReleType: '',\r\n          pdReleContent: '',\r\n          pdReleContdet: []\r\n        },\r\n        comboAuditDetailInfo: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditOrderNum: '',\r\n          pdAuditInfoId: '',\r\n          pdAuditConc: '',\r\n          pdAuditStaff: '',\r\n          pdAuditDate: '',\r\n          pdAuditIdea: '',\r\n          pdReturnFuncNode: [],\r\n          pdReleType: '',\r\n          pdReleContent: '',\r\n          pdReleContdet: []\r\n        },\r\n        //产品形态\r\n        pdAuditType: '',\r\n        pdReviseType: '',\r\n        pdReviseDate:'',\r\n        pdReturnFuncCode: '',\r\n        comboNodeList: [],\r\n        ruleNodeList: [],\r\n        formulaNodeList: [],\r\n        showAuditDataFlag: 'N',\r\n        dialogTableVisible: false,\r\n        dialogTableVisible1: false,\r\n        showRuleTableFlag: false,\r\n        showFormulaTableFlag: false,\r\n        comboUpdateFlag: false,\r\n        ruleUpdateFlag: false,\r\n        formulaUpdateFlag: false,\r\n        dataSelect: false,\r\n        ruleSelect: false,\r\n        formulaSelect: false,\r\n        quickicon_audit: \"el-icon-arrow-right\",\r\n        //表格数据\r\n        comboContentAudit: [],\r\n        comboRuleAudit: [],\r\n        comboFormulaAudit: [],\r\n        comboRuleRelease: [],\r\n        comboFormulaRelease: [],\r\n        checkBoxData: [],\r\n        checkRuleData: [],\r\n        checkFormulaData: [],\r\n        //查询参数\r\n        params: {},\r\n        //检验规则\r\n        rules: {},\r\n        comboTableForm_rules: {\r\n          pdDefineContent: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdDefineContent'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditConcthis: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConcthis'),\r\n            trigger: 'change'\r\n          }],\r\n          pdNotPassOpinion: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        ruleTableForm_rules: {\r\n          pdFormulaRuleCode: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdDefineContent'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditConcthis: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConcthis'),\r\n            trigger: 'change'\r\n          }],\r\n          pdNotPassOpinion: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        formulaTableForm_rules: {\r\n          pdFormulaRuleCode: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdDefineContent'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditConcthis: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConcthis'),\r\n            trigger: 'change'\r\n          }],\r\n          pdNotPassOpinion: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        auditRules: {\r\n          pdAuditConc: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConc'),\r\n            trigger: 'change'\r\n          }],\r\n          pdReleType: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdReleType'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditIdea: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdAuditIdea'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      //产品定义内容\r\n      'comboTableForm.pdDefineContent'(selectedCodes) {\r\n        if (selectedCodes.length === 0) {\r\n          for (const comboNode of this.comboNodeList) {\r\n            comboNode.disabled = false\r\n          }\r\n        } else {\r\n          if (this._.includes(selectedCodes, '000000')) {\r\n            for (const comboNode of this.comboNodeList) {\r\n              comboNode.disabled = comboNode.value !== '000000'\r\n            }\r\n          } else {\r\n            for (const comboNode of this.comboNodeList) {\r\n              comboNode.disabled = comboNode.value === '000000'\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //套餐发布审核结论\r\n      'comboTableForm.pdAuditConcthis'() {\r\n        const val = this.comboTableForm.pdAuditConcthis;\r\n        if (val == 'Y') {\r\n          this.comboTableForm.pdIsCancelDefinition = 'N';\r\n          this.comboTableForm.pdNotPassOpinion = '';\r\n          this.comboTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n        } else {\r\n          this.comboTableForm_rules.pdNotPassOpinion = [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      },\r\n      //套餐规则订正内容\r\n      'ruleTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n        this.comboAuditDetailInfo.pdReleContent='2';\r\n        if (selectedCodes.length === 0) {\r\n          for (const ruleNode of this.ruleNodeList) {\r\n            ruleNode.disabled = false\r\n          }\r\n        } else {\r\n          let codeList = [];\r\n          for (const code of selectedCodes) {\r\n            codeList.push(code.value)\r\n          }\r\n          if (this._.includes(codeList, '000')) {\r\n            for (const ruleNode of this.ruleNodeList) {\r\n              ruleNode.disabled = ruleNode.value !== '000'\r\n            }\r\n          } else {\r\n            for (const ruleNode of this.ruleNodeList) {\r\n              ruleNode.disabled = ruleNode.value === '000'\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //套餐规则订正审核意见\r\n      'ruleTableForm.pdAuditConcthis'() {\r\n        const val = this.ruleTableForm.pdAuditConcthis;\r\n        if (val == 'Y') {\r\n          this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n          this.ruleTableForm.pdNotPassOpinion = '';\r\n          this.ruleTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n        } else {\r\n          this.ruleTableForm_rules.pdNotPassOpinion = [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      },\r\n      //产品公式订正公式\r\n      'formulaTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n        if (selectedCodes.length === 0) {\r\n          for (const formulaNode of this.formulaNodeList) {\r\n            formulaNode.disabled = false\r\n          }\r\n        } else {\r\n          let codeList = [];\r\n          for (const code of selectedCodes) {\r\n            codeList.push(code.value)\r\n          }\r\n          if (this._.includes(codeList, '000')) {\r\n            for (const formulaNode of this.formulaNodeList) {\r\n              formulaNode.disabled = formulaNode.value !== '000'\r\n            }\r\n          } else {\r\n            for (const formulaNode of this.formulaNodeList) {\r\n              formulaNode.disabled = formulaNode.value === '000'\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //产品公式订正审核结论\r\n      'formulaTableForm.pdAuditConcthis'() {\r\n        const val = this.formulaTableForm.pdAuditConcthis;\r\n        //审核通过\r\n        if (val == 'Y') {\r\n          this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n          this.formulaTableForm.pdNotPassOpinion = '';\r\n          this.formulaTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n        } else {\r\n          this.formulaTableForm_rules.pdNotPassOpinion = [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      },\r\n      //整体审核结论\r\n      'comboAuditDetailInfo.pdAuditConc'() {\r\n        const val = this.comboAuditDetailInfo.pdAuditConc;\r\n        if (val == 'Y') {\r\n          if (this.pdAuditType == '3') {\r\n            return\r\n          }\r\n          if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n            this.comboAuditDetailInfo.pdReleContent='1';\r\n            if (this.comboContentAudit.length != this.comboNodeList.length - 1) {\r\n              this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList = [];\r\n                for (const comboNode of this.comboContentAudit) {\r\n                  nodeList.push(comboNode.pdDefineContent)\r\n                }\r\n                for (let i = 1; i < this.comboNodeList.length; i++) {\r\n                  let nodeName = this.comboNodeList[i].value;\r\n                  if (!this._.includes(nodeList, nodeName)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: nodeName,\r\n                      pdAuditConcthis: 'Y',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                this.auditData()\r\n              }).catch(() => {\r\n                this.auditData()\r\n              })\r\n            } else {\r\n              this.auditData();\r\n              if (this.comboAuditDetailInfo.pdReleContdet.length < this.comboContentAudit.length) {\r\n                this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n\r\n                }).catch(() => {\r\n\r\n                })\r\n              }\r\n            }\r\n          }\r\n          //产品规则公式订正\r\n          if (this.pdReviseType === '0') {\r\n            if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n              if (this.comboRuleAudit.length != this.ruleNodeList.length - 1 || this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList1 = [];\r\n                  let nodeList2 = [];\r\n                  for (const ruleNode of this.comboRuleAudit) {\r\n                    nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (const formulaNode of this.comboFormulaAudit) {\r\n                    nodeList2.push(formulaNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList1, nodeName)) {\r\n                      this.comboRuleAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList2, nodeName)) {\r\n                      this.comboFormulaAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.auditRuleData();\r\n                  this.auditFormulaData()\r\n                }).catch(() => {\r\n                  this.auditRuleData();\r\n                  this.auditFormulaData()\r\n                })\r\n              } else {\r\n                this.auditRuleData();\r\n                if (this.comboRuleRelease.length < this.comboRuleAudit.length || this.comboFormulaRelease.length < this.comboFormulaAudit.length) {\r\n                  this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n\r\n                  }).catch(() => {\r\n\r\n                  })\r\n                }\r\n              }\r\n            } else {\r\n              if (this.showRuleTableFlag) {\r\n                if (this.comboRuleAudit.length != this.ruleNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const pdNode of this.comboRuleAudit) {\r\n                      nodeList.push(pdNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                      let nodeName = this.ruleNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboRuleAudit.push({\r\n                          pdReviseType: '1',\r\n                          pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                          pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'Y',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: ''\r\n                        })\r\n                      }\r\n                    }\r\n                    this.auditRuleData()\r\n                  }).catch(() => {\r\n                    this.auditRuleData()\r\n                  })\r\n                } else {\r\n                  this.auditRuleData();\r\n                  if (this.comboRuleRelease.length < this.comboRuleAudit.length) {\r\n                    this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                      confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                      cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                      type: 'warning'\r\n                    }).then(() => {\r\n\r\n                    }).catch(() => {\r\n\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.showFormulaTableFlag) {\r\n                if (this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const pdNode of this.comboFormulaAudit) {\r\n                      nodeList.push(pdNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                      let nodeName = this.formulaNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboFormulaAudit.push({\r\n                          pdReviseType: '2',\r\n                          pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                          pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'Y',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: ''\r\n                        })\r\n                      }\r\n                    }\r\n                    this.auditFormulaData()\r\n                  }).catch(() => {\r\n                    this.auditFormulaData()\r\n                  })\r\n                } else {\r\n                  this.auditFormulaData();\r\n                  if (this.comboFormulaRelease.length < this.comboFormulaAudit.length) {\r\n                    this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                      confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                      cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                      type: 'warning'\r\n                    }).then(() => {\r\n\r\n                    }).catch(() => {\r\n\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        //审核不通过\r\n        if (val == 'N') {\r\n          if (this.pdAuditType == '3') {\r\n            this.returnFunctionPoints = [\"套餐停售\"];\r\n            return\r\n          }\r\n          if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n            if (this.comboContentAudit.length != this.comboNodeList.length - 1) {\r\n              this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList = [];\r\n                for (const comboNode of this.comboContentAudit) {\r\n                  nodeList.push(comboNode.pdDefineContent)\r\n                }\r\n                for (let i = 1; i < this.comboNodeList.length; i++) {\r\n                  let nodeName = this.comboNodeList[i].value;\r\n                  if (!this._.includes(nodeList, nodeName)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: nodeName,\r\n                      pdAuditConcthis: 'N',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: '审核不通过'\r\n                    })\r\n                  }\r\n                }\r\n                this.reBack()\r\n              }).catch(() => {\r\n                this.reBack()\r\n              })\r\n            } else {\r\n              this.reBack()\r\n            }\r\n          }\r\n          //产品规则公式订正\r\n          if (this.pdReviseType === '0') {\r\n            if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n              if (this.comboRuleAudit.length != this.ruleNodeList.length - 1 || this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList1 = [];\r\n                  let nodeList2 = [];\r\n                  for (const ruleNode of this.comboRuleAudit) {\r\n                    nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (const formulaNode of this.comboFormulaAudit) {\r\n                    nodeList2.push(formulaNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList1, nodeName)) {\r\n                      this.comboRuleAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: '审核不通过'\r\n                      })\r\n                    }\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList2, nodeName)) {\r\n                      this.comboFormulaAudit.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: '审核不通过'\r\n                      })\r\n                    }\r\n                  }\r\n                  this.ruleBack();\r\n                  this.formulaBack()\r\n                }).catch(() => {\r\n                  this.ruleBack();\r\n                  this.formulaBack()\r\n                })\r\n              } else {\r\n                this.ruleBack();\r\n                this.formulaBack()\r\n              }\r\n            } else {\r\n              if (this.showRuleTableFlag) {\r\n                if (this.comboRuleAudit.length != this.ruleNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const ruleNode of this.comboRuleAudit) {\r\n                      nodeList.push(ruleNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                      let nodeName = this.ruleNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboRuleAudit.push({\r\n                          pdReviseType: '1',\r\n                          pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                          pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'N',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: '审核不通过'\r\n                        })\r\n                      }\r\n                    }\r\n                    this.ruleBack()\r\n                  }).catch(() => {\r\n                    this.ruleBack()\r\n                  })\r\n                } else {\r\n                  this.ruleBack()\r\n                }\r\n              }\r\n              if (this.showFormulaTableFlag) {\r\n                if (this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const formulaNode of this.comboFormulaAudit) {\r\n                      nodeList.push(formulaNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                      let nodeName = this.formulaNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboFormulaAudit.push({\r\n                          pdReviseType: '2',\r\n                          pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                          pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'N',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: '审核不通过'\r\n                        })\r\n                      }\r\n                    }\r\n                    this.formulaBack()\r\n                  }).catch(() => {\r\n                    this.formulaBack()\r\n                  })\r\n                } else {\r\n                  this.formulaBack()\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    computed: {},\r\n    created() {\r\n      this.pdInfo = this.getPdData();\r\n      this.pdAuditType = this.pdInfo.defType;\r\n      this.comboAuditInfo.pdCode = this.pdInfo.ppCode;\r\n      this.comboAuditInfo.pdInfoId = this.pdInfo.id;\r\n      this.comboAuditDetailInfo.pdCode = this.pdInfo.ppCode;\r\n      this.comboAuditDetailInfo.pdInfoId = this.pdInfo.id;\r\n      if (this.pdAuditType == '1') {\r\n        this.queryPdInfoData()\r\n      }\r\n      if (this.pdAuditType == '2') {\r\n        this.queryReviseData()\r\n      }\r\n      if (this.pdAuditType == '3') {\r\n        this.queryStop()\r\n      }\r\n      this.cacheStrData('pdFileAuditTableback', null);\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        changeDialogFileRelease(flag) {\r\n            this.showComboFileReleaseFlag = flag\r\n        },\r\n        bringPdFileAuditData(val){\r\n            this.pdFileAuditData = val\r\n        },\r\n        showComboFileReleasePage(){\r\n            this.showComboFileReleaseFlag =true;\r\n        },\r\n      queryPdInfoData() {\r\n        this.comboNodeList = [\r\n          {'key': '000000', 'value': '000000', 'label': '全部', 'disabled': false},\r\n          {'key': 'productInfoFlag', 'value': 'productInfoFlag', 'label': '套餐基本信息', 'disabled': false},\r\n          {'key': 'productDistributionFlag', 'value': 'productDistributionFlag', 'label': '套餐销售信息', 'disabled': false},\r\n          {'key': 'productCoverFlag', 'value': 'productCoverFlag', 'label': '套餐承保信息', 'disabled': false},\r\n          {'key': 'productUnderwritingFlag', 'value': 'productUnderwritingFlag', 'label': '套餐核保信息', 'disabled': false},\r\n          {'key': 'productHePeiFlag', 'value': 'productHePeiFlag', 'label': '套餐核赔信息', 'disabled': false}\r\n        ];\r\n        this.comboAuditDetailInfo.pdReleType='1';\r\n        this.$nextTick(() => {\r\n          this.$refs.comboTableForm.clearValidate()\r\n        })\r\n      },\r\n      //查询订正申请表数据\r\n      queryReviseData() {\r\n        this.comboAuditDetailInfo.pdReleType='2';\r\n        queryReviseData(this.buildRequestData({\r\n          \"pdInfoId\": this.pdInfo.id,\r\n          \"pdVerId\": this.pdInfo.pdVerId\r\n        })).then(res => {\r\n          this.pdReviseType = res.data.pdReviseType;\r\n          this.pdReturnFuncCode = res.data.pdReturnFuncCode;\r\n          this.pdReviseDate=res.data.pdReviseDate;\r\n          const codes = this.pdReturnFuncCode.split(\",\");\r\n          if (this.pdReviseType === '1') {\r\n            this.comboNodeList = [];\r\n            this.comboNodeList.push({\r\n              key: '000000',\r\n              value: '000000',\r\n              label: '全部',\r\n              disabled: false\r\n            });\r\n            for (const item of codes) {\r\n              switch (item) {\r\n                case 'productInfoFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productInfoFlag',\r\n                    value: 'productInfoFlag',\r\n                    label: '套餐基本信息',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n                case 'productDistributionFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productDistributionFlag',\r\n                    value: 'productDistributionFlag',\r\n                    label: '套餐销售信息',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n                case 'productCoverFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productCoverFlag',\r\n                    value: 'productCoverFlag',\r\n                    label: '套餐承保信息',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n                case 'productUnderwritingFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productUnderwritingFlag',\r\n                    value: 'productUnderwritingFlag',\r\n                    label: '套餐核保信息',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n               /* case 'productPreservationFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productPreservationFlag',\r\n                    value: 'productPreservationFlag',\r\n                    label: '套餐保全信息',\r\n                    disabled: false\r\n                  });\r\n                  break;*/\r\n                case 'productHePeiFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productHePeiFlag',\r\n                    value: 'productHePeiFlag',\r\n                    label: '套餐核赔信息',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n               /* case 'productRenewalFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productRenewalFlag',\r\n                    value: 'productRenewalFlag',\r\n                    label: '套餐续期续保信息',\r\n                    disabled: false\r\n                  });\r\n                  break;*/\r\n              }\r\n            }\r\n          }\r\n          if (this.pdReviseType === '0') {\r\n            for (const item of codes) {\r\n              switch (item) {\r\n                case 'productRuleFlag':\r\n                  this.showRuleTableFlag = true;\r\n                  this.findNodeRulesList(this.pdReviseDate);\r\n                  break;\r\n                case 'productFormulaFlag':\r\n                  this.showFormulaTableFlag = true;\r\n                  this.findNodeFormulaList(this.pdReviseDate);\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        })\r\n      },\r\n      queryStop() {\r\n        //查询停售时间, 停售原因\r\n        queryStop(this.buildRequestData({\"id\": this.pdInfo.id, \"pdVerId\": this.pdInfo.pdVerId})).then(res => {\r\n          this.auditForm.stopDate = res.data.pdVerDisDate;\r\n          this.auditForm.stopReason = res.data.pdVerDisResn\r\n        })\r\n      },\r\n      findNodeFormulaList(val) {\r\n        findNodeFormulaList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id,\"pdReviseDate\": val})).then(res => {\r\n          let formulaListNode = res.data;\r\n          if (formulaListNode.length > 0) {\r\n            this.formulaNodeList = [{'key': '000', 'value': '000', 'label': '全部', 'disabled': false}];\r\n          }\r\n          for (const item of formulaListNode) {\r\n            this.formulaNodeList.push({\r\n              key: item.pdCalcCode,\r\n              value: item.pdCalcCode,\r\n              label: item.pdCalcCode,\r\n              pdFormulaRuleType: item.pdBussType,\r\n              pdFormulaRuleDetails: item.pdBussDetailType,\r\n              pdFormulaRuleDescribe: item.pdCalcDesc,\r\n              disabled: false\r\n            });\r\n          }\r\n          this.$nextTick(() => {\r\n            if(this.$refs.formulaTableForm){\r\n              this.$refs.formulaTableForm.clearValidate()\r\n            }\r\n          })\r\n        })\r\n      },\r\n      findNodeRulesList(val) {\r\n        findNodeRulesList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id,\"pdReviseDate\": val,\"ppCode\": this.pdInfo.ppCode})).then(res => {\r\n          let ruleListNode = res.data;\r\n          if (ruleListNode.length > 0) {\r\n            this.ruleNodeList = [{'key': '000', 'value': '000', 'label': '全部', 'disabled': false}];\r\n          }\r\n          for (const item of ruleListNode) {\r\n            this.ruleNodeList.push({\r\n              key: item.pdRuleCode,\r\n              value: item.pdRuleCode,\r\n              label: item.pdRuleCode,\r\n              pdFormulaRuleType: item.pdRuleCls,\r\n              pdFormulaRuleDetails: item.pdRuleDtCls,\r\n              pdFormulaRuleDescribe: item.pdRuleDesc,\r\n              disabled: false\r\n            });\r\n          }\r\n          this.$nextTick(() => {\r\n            if(this.$refs.ruleTableForm){\r\n              this.$refs.ruleTableForm.clearValidate()\r\n            }\r\n          })\r\n        })\r\n\r\n      },\r\n      getFuncCode(val) {\r\n        let returnText = '';\r\n        switch (val) {\r\n          case 'productRuleFlag':\r\n            returnText = returnText + '套餐规则订正';\r\n            break;\r\n          case 'productFormulaFlag':\r\n            returnText = returnText + '套餐公式订正';\r\n            break;\r\n          case 'productInfoFlag':\r\n            returnText = returnText + '套餐基本信息';\r\n            break;\r\n          case 'productDistributionFlag':\r\n            returnText = returnText + '套餐销售信息';\r\n            break;\r\n          case 'productCoverFlag':\r\n            returnText = returnText + '套餐承保信息';\r\n            break;\r\n          case 'productUnderwritingFlag':\r\n            returnText = returnText + '套餐核保信息';\r\n            break;\r\n          case 'productPreservationFlag':\r\n            returnText = returnText + '套餐保全信息';\r\n            break;\r\n          case 'productHePeiFlag':\r\n            returnText = returnText + '套餐核赔信息';\r\n            break;\r\n          case 'productRenewalFlag':\r\n            returnText = returnText + '套餐续期续保信息';\r\n            break;\r\n        }\r\n        return returnText;\r\n      },\r\n      //审核完毕按钮\r\n      auditPass() {\r\n        this.$refs.comboAuditDetailInfo.validate((valid) => {\r\n          if (valid) {\r\n            this.comboAuditInfo.pdAuditConc = this.comboAuditDetailInfo.pdAuditConc;\r\n            this.comboAuditInfo.pdType = '2';\r\n            let pdoperAuditDetailNotesInfo =[];\r\n            //判断审核明细详情表格的值\r\n            if(this.pdReviseType=='1' ||this.pdAuditType=='1'){\r\n              for (const item of this.comboContentAudit){\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }\r\n            if(this.showRuleTableFlag && this.showFormulaTableFlag){\r\n              for (const item of this.comboRuleAudit){\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n              for (const item of this.comboFormulaAudit){\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }else {\r\n              if (this.showRuleTableFlag) {\r\n                for (const item of this.comboRuleAudit) {\r\n                  pdoperAuditDetailNotesInfo.push(item)\r\n                }\r\n              }\r\n              if (this.showFormulaTableFlag) {\r\n                for (const item of this.comboFormulaAudit) {\r\n                  pdoperAuditDetailNotesInfo.push(item)\r\n                }\r\n              }\r\n            }\r\n            if(this.comboAuditInfo.pdAuditConc=='Y' && this.comboAuditInfo.pdAuditConc=='N' && pdoperAuditDetailNotesInfo.length==0){\r\n              this.notifyError(\"请完善审核明细表格数据\")\r\n              return\r\n            }\r\n            let map = {\r\n              \"comboAuditInfo\": this.comboAuditInfo,\r\n              \"comboAuditDetailInfo\": this.comboAuditDetailInfo,\r\n              \"pdoperAuditDetailNotesInfo\": pdoperAuditDetailNotesInfo,\r\n              \"pdtempPpInfo\": this.pdInfo\r\n            };\r\n            //取消本次定义\r\n            if (this.comboAuditDetailInfo.pdAuditConc == 'X') {\r\n              let data = {\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n              this.doAuditInfoData(map)\r\n            }  //停售产品\r\n            else if (this.comboAuditDetailInfo.pdAuditConc == 'Z') {\r\n              let data = {\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n              this.doAuditInfoData(map)\r\n            }\r\n            //审核不通过\r\n            else if (this.comboAuditDetailInfo.pdAuditConc == 'N') {\r\n              //停售产品\r\n              if (this.pdAuditType == '3') {\r\n                let data = {\r\n                  'productAuditFlag': '0',\r\n                  'variables': [\"productDiscontinued\"],\r\n                  'processInstanceId': this.pdInfo.pdProcessId\r\n                };\r\n                map['workflowData'] = data;\r\n              } else {\r\n                //审核不通过 返回定义节点\r\n                this.comboAuditInfo.pdIsReviewReturn = 'Y';\r\n                this.comboAuditDetailInfo.pdReturnFuncNode = this.returnPoints(this.returnFunctionPoints);\r\n                let data = {\r\n                  'productAuditFlag': '0',\r\n                  'variables': this.returnPoints(this.returnFunctionPoints),\r\n                  'processInstanceId': this.pdInfo.pdProcessId\r\n                };\r\n                map['workflowData'] = data;\r\n              }\r\n              this.doAuditInfoData(map)\r\n            } else {  //审核通过的\r\n              let passNodePoints =this.returnPoints(this.comboAuditDetailInfo.pdReleContdet);\r\n              this.comboAuditInfo.pdReleContdet = passNodePoints;\r\n              this.comboAuditDetailInfo.pdReleContdet = passNodePoints;\r\n              this.comboAuditInfo.pdReleContent = this.comboAuditDetailInfo.pdReleContent;\r\n              this.comboAuditInfo.pdIsReviewReturn = 'N';\r\n              if (this.pdAuditType == '3') {\r\n                //停售通过时  默认增量发布\r\n                this.comboAuditInfo.pdReleType = \"2\";\r\n                this.comboAuditDetailInfo.pdReleType = \"2\"\r\n                this.comboAuditInfo.pdReleContent = '3'\r\n                this.comboAuditDetailInfo.pdReleContent = '3'\r\n              } else {\r\n                this.comboAuditInfo.pdReleType = this.comboAuditDetailInfo.pdReleType;\r\n              }\r\n              let data = {\r\n                'productAuditFlag': '1',\r\n                'variables': null,\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              }\r\n              map['workflowData'] = data;\r\n              this.doAuditInfoData(map)\r\n            }\r\n          }\r\n        })\r\n      },\r\n      doAuditInfoData(map){\r\n        addAuditInfoData(this.buildRequestData(map)).then(res => {\r\n            this.notifySuccess(res.message);\r\n            this.$store.dispatch('product/storagePackages')\r\n            closeVisitTag();\r\n            this.$router.push({path: \"/dashboard\"});\r\n        })\r\n      },\r\n      //刷新\r\n      refresh() {\r\n        this.comboAuditDetailInfo.pdAuditConc = '';\r\n        this.comboAuditDetailInfo.pdReleType = '';\r\n        this.comboAuditDetailInfo.pdAuditIdea = '';\r\n        this.$nextTick(() => {\r\n          this.$refs.comboAuditDetailInfo.clearValidate();\r\n          if (this.$refs.comboTableForm) {\r\n            this.$refs.comboTableForm.clearValidate();\r\n          }\r\n          if (this.$refs.ruleTableForm) {\r\n            this.$refs.ruleTableForm.clearValidate();\r\n          }\r\n          if (this.$refs.formulaTableForm) {\r\n            this.$refs.formulaTableForm.clearValidate()\r\n          }\r\n        })\r\n      },\r\n      //审核不通过处理节点\r\n      returnPoints(val) {\r\n        let returnPoints = [];\r\n        for (let i = 0; i < val.length; i++) {\r\n          for (let j = 0; j < this.nodeOptions.length; j++) {\r\n            if (val[i] == this.nodeOptions[j].label) {\r\n              returnPoints.push(this.nodeOptions[j].key)\r\n            }\r\n          }\r\n        }\r\n        return returnPoints\r\n      },\r\n      //选中不通过带回的节点\r\n      reBack() {\r\n        this.returnFunctionPoints = [];\r\n        for (let i = 0; i < this.comboContentAudit.length; i++) {\r\n          if (this.comboContentAudit[i].pdIsCancelDefinition == 'N' && this.comboContentAudit[i].pdAuditConcthis == 'N') {\r\n            this.returnFunctionPoints.push(this.getFuncCode(this.comboContentAudit[i].pdDefineContent))\r\n          }\r\n        }\r\n        if (this.returnFunctionPoints.length == '0') {\r\n          this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n          this.refresh()\r\n        }\r\n      },\r\n      //产品规则订正选中不通过带回的节点\r\n      ruleBack() {\r\n        this.returnFunctionPoints=[];\r\n        for (let i = 0; i < this.comboRuleAudit.length; i++) {\r\n          if (this.comboRuleAudit[i].pdIsCancelDefinition == 'N' && this.comboRuleAudit[i].pdAuditConcthis == 'N') {\r\n            this.returnFunctionPoints.push(\"套餐规则订正\");\r\n            break\r\n          }\r\n        }\r\n        if(this.comboRuleAudit.length === 0){\r\n          this.returnFunctionPoints.push(\"套餐规则订正\");\r\n        }\r\n        if (this.returnFunctionPoints.length == '0') {\r\n          this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n          this.refresh()\r\n        }\r\n      },\r\n      //产品公式订正选中不通过带回的节点\r\n      formulaBack() {\r\n        for (let i = 0; i < this.comboFormulaAudit.length; i++) {\r\n          if (this.comboFormulaAudit[i].pdIsCancelDefinition == 'N' && this.comboFormulaAudit[i].pdAuditConcthis == 'N') {\r\n            this.returnFunctionPoints.push(\"套餐公式订正\");\r\n            break\r\n          }\r\n        }\r\n        if(this.comboFormulaAudit.length === 0){\r\n          this.returnFunctionPoints.push(\"套餐公式订正\");\r\n        }\r\n        if (this.returnFunctionPoints.length == '0') {\r\n          this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n          this.refresh()\r\n        }\r\n      },\r\n      //选择通过显示发布内容\r\n      auditData() {\r\n        this.comboAuditDetailInfo.pdReleContdet = [];\r\n        for (let i = 0; i < this.comboContentAudit.length; i++) {\r\n          if (this.comboContentAudit[i].pdIsCancelDefinition == 'N' && this.comboContentAudit[i].pdAuditConcthis == 'Y') {\r\n            this.comboAuditDetailInfo.pdReleContdet.push(this.getFuncCode(this.comboContentAudit[i].pdDefineContent))\r\n          }\r\n        }\r\n      },\r\n      //选择通过显示规则发布内容\r\n      auditRuleData() {\r\n        this.comboRuleRelease = [];\r\n        for (let i = 0; i < this.comboRuleAudit.length; i++) {\r\n          if (this.comboRuleAudit[i].pdIsCancelDefinition == 'N' && this.comboRuleAudit[i].pdAuditConcthis == 'Y') {\r\n            this.comboRuleRelease.push(this.comboRuleAudit[i])\r\n          }\r\n        }\r\n      },\r\n      //选择通过显示公式发布内容\r\n      auditFormulaData() {\r\n        this.comboFormulaRelease = [];\r\n        for (let i = 0; i < this.comboFormulaAudit.length; i++) {\r\n          if (this.comboFormulaAudit[i].pdIsCancelDefinition == 'N' && this.comboFormulaAudit[i].pdAuditConcthis == 'Y') {\r\n            this.comboFormulaRelease.push(this.comboFormulaAudit[i])\r\n          }\r\n        }\r\n      },\r\n      //新产品或产品订正添加审核数据\r\n      addComboAuditTableData() {\r\n        this.$refs.comboTableForm.validate((valid) => {\r\n          if (valid) {\r\n            if (this.comboTableForm.pdAuditConcthis == 'Y') {\r\n              this.comboTableForm.pdIsCancelDefinition = 'N';\r\n              this.comboTableForm.pdNotPassOpinion = ''\r\n            }\r\n            if (this.checkBoxData.length == 0) {\r\n              if (this.comboTableForm.pdDefineContent.length == 1) {\r\n                if (this.comboTableForm.pdDefineContent[0] == '000000') {\r\n                  for (let i = 1; i < this.comboNodeList.length; i++) {\r\n                    if (this.checkComboMoreCopyData(this.comboNodeList[i].value, this.comboContentAudit)) {\r\n                      this.comboContentAudit.push({\r\n                        pdDefineContent: this.comboNodeList[i].value,\r\n                        pdAuditConcthis: this.comboTableForm.pdAuditConcthis,\r\n                        pdIsCancelDefinition: this.comboTableForm.pdIsCancelDefinition,\r\n                        pdNotPassOpinion: this.comboTableForm.pdNotPassOpinion\r\n                      })\r\n                    }else{\r\n                        break\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  if (this.checkComboCopyData(this.comboTableForm.pdDefineContent[0], this.comboContentAudit)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: this.comboTableForm.pdDefineContent[0],\r\n                      pdAuditConcthis: this.comboTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.comboTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.comboTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.comboTableForm.pdDefineContent.length > 1) {\r\n                for (let i = 0; i < this.comboTableForm.pdDefineContent.length; i++) {\r\n                  if (this.checkComboCopyData(this.comboTableForm.pdDefineContent[i], this.comboContentAudit)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: this.comboTableForm.pdDefineContent[i],\r\n                      pdAuditConcthis: this.comboTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.comboTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.comboTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              for (let i = 0; i < this.checkBoxData.length; i++) {\r\n                this.$set(this.checkBoxData[i], 'pdAuditConcthis', this.comboTableForm.pdAuditConcthis);\r\n                this.$set(this.checkBoxData[i], 'pdIsCancelDefinition', this.comboTableForm.pdIsCancelDefinition);\r\n                this.$set(this.checkBoxData[i], 'pdNotPassOpinion', this.comboTableForm.pdNotPassOpinion)\r\n              }\r\n              this.$refs.multipleTable.clearSelection()\r\n            }\r\n            this.comboTableForm.pdDefineContent = [];\r\n            this.comboTableForm.pdAuditConcthis = '';\r\n            this.comboTableForm.pdIsCancelDefinition = 'N';\r\n            this.comboTableForm.pdNotPassOpinion = '';\r\n            this.$nextTick(() => {\r\n              this.$refs.comboTableForm.clearValidate()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      //规则订正添加审核数据\r\n      addRuleAuditTableData() {\r\n        this.$refs.ruleTableForm.validate((valid) => {\r\n          if (valid) {\r\n            if (this.ruleTableForm.pdAuditConcthis == 'Y') {\r\n              this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n              this.ruleTableForm.pdNotPassOpinion = ''\r\n            }\r\n            if (this.checkRuleData.length == 0) {\r\n              if (this.ruleTableForm.pdFormulaRuleCode.length == 1) {\r\n                if (this.ruleTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    if (this.checkMoreCopyData(this.ruleNodeList[i].value, this.comboRuleAudit)) {\r\n                      this.comboRuleAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                        pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                        pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                      })\r\n                    }\r\n                    else{\r\n                      break\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[0].value, this.comboRuleAudit)) {\r\n                    this.comboRuleAudit.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[0].value,\r\n                      pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.ruleTableForm.pdFormulaRuleCode.length > 1) {\r\n                for (let i = 0; i < this.ruleTableForm.pdFormulaRuleCode.length; i++) {\r\n                  if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[i].value, this.comboRuleAudit)) {\r\n                    this.comboRuleAudit.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[i].value,\r\n                      pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              for (let i = 0; i < this.checkRuleData.length; i++) {\r\n                this.$set(this.checkRuleData[i], 'pdAuditConcthis', this.ruleTableForm.pdAuditConcthis);\r\n                this.$set(this.checkRuleData[i], 'pdIsCancelDefinition', this.ruleTableForm.pdIsCancelDefinition);\r\n                this.$set(this.checkRuleData[i], 'pdNotPassOpinion', this.ruleTableForm.pdNotPassOpinion)\r\n              }\r\n              this.$refs.multipleRuleTable.clearSelection()\r\n            }\r\n            this.ruleTableForm.pdFormulaRuleCode = [];\r\n            this.ruleTableForm.pdAuditConcthis = '';\r\n            this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n            this.ruleTableForm.pdNotPassOpinion = '';\r\n            this.$nextTick(() => {\r\n              this.$refs.ruleTableForm.clearValidate()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      //公式订正添加审核数据\r\n      addFormulaAuditTableData() {\r\n        this.$refs.formulaTableForm.validate((valid) => {\r\n          if (valid) {\r\n            if (this.formulaTableForm.pdAuditConcthis == 'Y') {\r\n              this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n              this.formulaTableForm.pdNotPassOpinion = ''\r\n            }\r\n            if (this.checkFormulaData.length == 0) {\r\n              if (this.formulaTableForm.pdFormulaRuleCode.length == 1) {\r\n                if (this.formulaTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    if (this.checkMoreCopyData(this.formulaNodeList[i].value, this.comboFormulaAudit)) {\r\n                      this.comboFormulaAudit.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                        pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                        pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                      })\r\n                    }\r\n                    else{\r\n                      break\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[0].value, this.comboFormulaAudit)) {\r\n                    this.comboFormulaAudit.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[0].value,\r\n                      pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.formulaTableForm.pdFormulaRuleCode.length > 1) {\r\n                for (let i = 0; i < this.formulaTableForm.pdFormulaRuleCode.length; i++) {\r\n                  if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[i].value, this.comboFormulaAudit)) {\r\n                    this.comboFormulaAudit.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[i].value,\r\n                      pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              for (let i = 0; i < this.checkFormulaData.length; i++) {\r\n                this.$set(this.checkFormulaData[i], 'pdAuditConcthis', this.formulaTableForm.pdAuditConcthis);\r\n                this.$set(this.checkFormulaData[i], 'pdIsCancelDefinition', this.formulaTableForm.pdIsCancelDefinition);\r\n                this.$set(this.checkFormulaData[i], 'pdNotPassOpinion', this.formulaTableForm.pdNotPassOpinion)\r\n              }\r\n              this.$refs.multipleFormulaTable.clearSelection()\r\n            }\r\n            this.formulaTableForm.pdFormulaRuleCode = [];\r\n            this.formulaTableForm.pdAuditConcthis = '';\r\n            this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n            this.formulaTableForm.pdNotPassOpinion = '';\r\n            this.$nextTick(() => {\r\n              this.$refs.formulaTableForm.clearValidate()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      //定义内容为新套餐\r\n      checkComboMoreCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdDefineContent)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //定义内容为新套餐\r\n      checkComboCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdDefineContent)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //定义内容为新套餐判断选择全部时节点是否重复\r\n      checkMoreCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdFormulaRuleCode)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //判断节点是否重复\r\n      checkCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdFormulaRuleCode)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //页面跳转按钮\r\n      getPdDesignPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '产品套餐框架定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdSalePage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '产品套餐销售定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdUWPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '产品套餐承保定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdRWPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '产品套餐核保定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdPVPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '产品套餐核赔定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getTestPage() {\r\n        if (this.pdInfo) {\r\n          //this.$router.push({name: '', query: {showPageFlag: '1'}})\r\n        }\r\n      },\r\n      //返回套餐审核查询页面\r\n      backPage() {\r\n        this.$router.push({path: '/commodity-audit/combo-audit-info/package-audit-apply'})\r\n      },\r\n      auditClick() {\r\n        if (this.showAuditDataFlag === 'N') {\r\n          this.quickicon_audit = \"el-icon-arrow-down\";\r\n          this.showAuditDataFlag = 'Y'\r\n        } else {\r\n          this.quickicon_audit = \"el-icon-arrow-right\";\r\n          this.showAuditDataFlag = 'N'\r\n        }\r\n      },\r\n      //获取复选框表格数据\r\n      changeFun(val) {\r\n        this.checkBoxData = val;\r\n        if (val.length > 0) {\r\n          this.comboUpdateFlag = true\r\n        }\r\n        if (val.length == 0) {\r\n          this.comboTableForm.pdDefineContent = [];\r\n          this.comboTableForm.pdAuditConcthis = '';\r\n          this.comboTableForm.pdIsCancelDefinition = 'N';\r\n          this.comboTableForm.pdNotPassOpinion = '';\r\n          this.comboUpdateFlag = false;\r\n          this.dataSelect = false;\r\n          this.$nextTick(() => {\r\n            this.$refs.comboTableForm.clearValidate();\r\n          })\r\n        }else{\r\n          this.comboTableForm.contentList = []\r\n          for(let i=0;i<val.length;i++){\r\n           this.comboTableForm.contentList.push(val[i].pdDefineContent);\r\n          }\r\n          Object.assign(this.comboTableForm, this.comboTableForm.contentList);\r\n          this.comboTableForm.pdDefineContent = this.comboTableForm.contentList;\r\n          this.comboUpdateFlag = true;\r\n          this.dataSelect = true\r\n        }\r\n      },\r\n      changeRuleData(val) {\r\n        this.checkRuleData = val;\r\n        if (val.length > 0) {\r\n          this.ruleUpdateFlag = true\r\n        }\r\n        if (val.length == 1) {\r\n          Object.assign(this.ruleTableForm, val[0]);\r\n          this.ruleTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n          this.ruleUpdateFlag = true;\r\n          this.ruleSelect = true\r\n        }\r\n        if (val.length == 0) {\r\n          this.ruleTableForm.pdFormulaRuleCode = [];\r\n          this.ruleTableForm.pdAuditConcthis = '';\r\n          this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n          this.ruleTableForm.pdNotPassOpinion = '';\r\n          this.ruleUpdateFlag = true;\r\n          this.ruleSelect = true;\r\n          this.$nextTick(() => {\r\n            this.$refs.ruleTableForm.clearValidate()\r\n          })\r\n        }\r\n      },\r\n      changeFormulaData(val) {\r\n        this.checkFormulaData = val;\r\n        if (val.length > 0) {\r\n          this.formulaUpdateFlag = true\r\n        }\r\n        if (val.length == 1) {\r\n          Object.assign(this.formulaTableForm, val[0]);\r\n          this.formulaTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n          this.formulaUpdateFlag = true;\r\n          this.formulaSelect = true\r\n        }\r\n        if (val.length == 0) {\r\n          this.formulaTableForm.pdFormulaRuleCode = [];\r\n          this.formulaTableForm.pdAuditConcthis = '';\r\n          this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n          this.formulaTableForm.pdNotPassOpinion = '';\r\n          this.formulaUpdateFlag = false;\r\n          this.formulaSelect = false;\r\n          this.$nextTick(() => {\r\n            this.$refs.formulaTableForm.clearValidate()\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .notTextarea .el-textarea__inner {\r\n    border: 0;\r\n    padding: 0;\r\n    resize: none;\r\n    color: #606266;\r\n    background-color: white;\r\n    overflow: hidden;\r\n  }\r\n</style>\r\n"]}]}