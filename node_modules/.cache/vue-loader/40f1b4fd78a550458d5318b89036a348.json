{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\workflow\\assign\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\workflow\\assign\\index.vue","mtime":1609847107223},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2Fzc2lnblRhc2ssIGdldEFsbFVzZXJzfSBmcm9tICdAL2FwaS93b3JrZmxvdy93b3JrZmxvdycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnd29ya2Zsb3cnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIHVzZXJDb2RlOiAnJywKICAgICAgICB0YXNrSWQ6ICcnCiAgICAgIH0sCiAgICAgIGNvbmZpZ3M6IFtdLAogICAgICBwYXJhbXM6IHsKICAgICAgICBwZENvZGU6ICcnLAogICAgICAgIHBkRWRpdGlvbjogJycsCiAgICAgICAgdXNlckNvZGU6ICcnLAogICAgICAgIHRhc2tOYW1lOiAnJywKICAgICAgfSwKICAgICAgdXNlck9wdGlvbnM6IFtdLAogICAgICBydWxlczogewogICAgICAgIHVzZXJDb2RlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCd1c2VyVmlldy5pbnB1dCcpICsgdGhpcy4kdCgndXNlclZpZXcudGFibGVfdXNlckNvZGUnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgfSwKICBtb3VudGVkKCkgewogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2VhcmNoKCkgewogICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCkKICAgIH0sIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgYXNzaWduVGFzayh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaCgpCiAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKQogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LCBhc3NpZ25UYXNrKHJvdykgewogICAgICB0aGlzLmZvcm0udXNlckNvZGUgPSByb3cuYXNzaWduTmFtZQogICAgICB0aGlzLmZvcm0udGFza0lkID0gcm93LnRhc2tJZAogICAgICB0aGlzLmdldEFsbFVzZXJzKCkKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGdldEFsbFVzZXJzKCkgewogICAgICBnZXRBbGxVc2VycygpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnVzZXJPcHRpb25zID0gW10KICAgICAgICBsZXQgdXNlcnMgPSByZXMuZGF0YQogICAgICAgIHVzZXJzLmZvckVhY2godXNlciA9PiB7CiAgICAgICAgICB0aGlzLnVzZXJPcHRpb25zLnB1c2goeydrZXknOiB1c2VyLnVzZXJDb2RlLCAnbGFiZWwnOiB1c2VyLnVzZXJOYW1lfSkKICAgICAgICB9KQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/workflow/assign","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <el-divider content-position=\"left\">{{$t('i18nView.workflowtask')}}</el-divider>\r\n    <cus-filter-wraper>\r\n      <el-form :inline=\"true\">\r\n        <el-form-item :label=\"$t('i18nView.pdCode')\" prop=\"\">\r\n          <el-input clearable placeholder=\"\" v-model=\"params.pdCode\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('customComponents.pdEdition')\" prop=\"\">\r\n          <el-input clearable placeholder=\"\" v-model=\"params.pdEdition\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('i18nView.taskName')\" prop=\"\">\r\n          <el-input clearable placeholder=\"\" v-model=\"params.taskName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('i18nView.userCode')\" prop=\"\">\r\n          <el-input clearable placeholder=\"\" v-model=\"params.userCode\"></el-input>\r\n        </el-form-item>\r\n        <el-button  size=\"small\" @click=\"handleSearch\" class=\"filter-button\" type=\"primary\">{{$t('i18nView.query')}}</el-button>\r\n      </el-form>\r\n    </cus-filter-wraper>\r\n\r\n\r\n    <el-table :data=\"configs\" align=\"center\" border class=\"wraper-table\" element-loading-text=\"Loading\" fit\r\n              highlight-current-row\r\n              size=\"mini\">>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\"></el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('i18nView.insuranceCode')\" prop=\"pdCode\"></el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('i18nView.editionNum')\" prop=\"pdEdition\"></el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('i18nView.taskName')\" prop=\"taskName\"></el-table-column>\r\n      <!--      <el-table-column label=\"任务ID\" align=\"center\" prop=\"taskId\" sortable></el-table-column>-->\r\n      <el-table-column align=\"center\" :label=\"$t('i18nView.transcatorCode')\" prop=\"assignName\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.actions')\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button  @click=\"assignTask(scope.row)\" class=\"filter-button\" icon=\"el-icon-edit\" size=\"mini\"\r\n                     type=\"primary\">{{ $t('compdMonitoring.redistributionBtn') }}\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination :pageSize=\"10\" :params=\"params\" ref=\"page\" url=\"/workflow/queryAssignedTask\" v-model=\"configs\"/>\r\n\r\n\r\n    <el-dialog :visible.sync=\"dialogVisible\" @close=\"dialogVisible=false\" title=\"用户选择\" v-dialog-drag>\r\n      <el-form :model=\"form\" :rules=\"rules\" label-position=\"right\" label-width=\"40%\"\r\n               ref=\"dataForm\"\r\n               style=\"width: 60%;margin-left: 10%\">\r\n        <el-form-item :label=\"$t('compdMonitoring.user')\" prop=\"userCode\">\r\n          <el-select :placeholder=\"$t('i18nView.selectPlaceholder')\" class=\"filter-item\" v-model=\"form.userCode\">\r\n            <el-option :key=\"item.key\" :label=\"item.label\" :value=\"item.key\"\r\n                       v-for=\"item in userOptions\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span class=\"dialog-footer\" slot=\"footer\">\r\n          <el-button  size=\"small\" icon='el-icon-circle-close' @click=\"dialogVisible = false\"> {{ $t('table.cancel') }} </el-button>\r\n          <el-button  size=\"small\" @click=\"submitForm\" class=\"el-icon-success\" type=\"primary\" v-auth=\"'sys-user:add'\"> {{ $t('table.confirm') }} </el-button>\r\n        </span>\r\n    </el-dialog>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\n  import {assignTask, getAllUsers} from '@/api/workflow/workflow'\r\n\r\n  export default {\r\n    name: 'workflow',\r\n    data() {\r\n      return {\r\n        dialogVisible: false,\r\n        form: {\r\n          userCode: '',\r\n          taskId: ''\r\n        },\r\n        configs: [],\r\n        params: {\r\n          pdCode: '',\r\n          pdEdition: '',\r\n          userCode: '',\r\n          taskName: '',\r\n        },\r\n        userOptions: [],\r\n        rules: {\r\n          userCode: [\r\n            {\r\n              required: true,\r\n              message: this.$t('userView.input') + this.$t('userView.table_userCode'),\r\n              trigger: 'change'\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n      handleSearch() {\r\n        this.$refs.page.reload()\r\n      }, submitForm() {\r\n        this.$refs.dataForm.validate(valid => {\r\n          if (valid) {\r\n            assignTask(this.form).then(response => {\r\n              this.handleSearch()\r\n              this.notifySuccess(response.message)\r\n              this.dialogVisible = false\r\n            })\r\n          }\r\n        })\r\n      }, assignTask(row) {\r\n        this.form.userCode = row.assignName\r\n        this.form.taskId = row.taskId\r\n        this.getAllUsers()\r\n        this.dialogVisible = true\r\n      },\r\n      getAllUsers() {\r\n        getAllUsers().then(res => {\r\n          this.userOptions = []\r\n          let users = res.data\r\n          users.forEach(user => {\r\n            this.userOptions.push({'key': user.userCode, 'label': user.userName})\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}