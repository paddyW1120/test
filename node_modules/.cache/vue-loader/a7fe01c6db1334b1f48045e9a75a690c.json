{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\system\\authority\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\system\\authority\\index.vue","mtime":1609847107189},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2RlbGV0ZU1lbnUsIHNhdmVNZW51LCB0cmVlTWVudX0gZnJvbSAnQC9hcGkvc3lzdGVtL2F1dGhvcml0eScNCg0KaW1wb3J0IHRyZWVUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvVHJlZVRhYmxlJw0KaW1wb3J0IHt2YWxpZGF0ZUNofSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJw0KaW1wb3J0IE15VnVlIGZyb20gJ0AvbWFpbicNCmltcG9ydCB7Z2V0VXNlcn0gZnJvbSAiQC91dGlscy9hdXRoIg0KDQpjb25zdCBtZW51VHlwZU9wdGlvbnMgPSBbDQogIHtrZXk6ICdtZW51JywgZGlzcGxheV9uYW1lOiBNeVZ1ZS4kdCgnYXV0aG9yaXR5Vmlldy5tZW51VHlwZU9wdGlvbnMubWVudScpfSwNCiAge2tleTogJ2J1dHRvbicsIGRpc3BsYXlfbmFtZTogTXlWdWUuJHQoJ2F1dGhvcml0eVZpZXcubWVudVR5cGVPcHRpb25zLmJ1dHRvbicpfQ0KXQ0KDQpjb25zdCBuZWVkVmlld09wdGlvbnMgPSBbDQogIHtrZXk6IHRydWUsIGRpc3BsYXlfbmFtZTogTXlWdWUuJHQoJ2F1dGhvcml0eVZpZXcubmVlZFZpZXdPcHRpb25zLnllcycpfSwNCiAge2tleTogZmFsc2UsIGRpc3BsYXlfbmFtZTogTXlWdWUuJHQoJ2F1dGhvcml0eVZpZXcubmVlZFZpZXdPcHRpb25zLm5vJyl9DQpdDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0F1dGhvcml0eU1hbmFnZW1lbnQnLA0KICBjb21wb25lbnRzOiB7dHJlZVRhYmxlfSwNCiAgZGF0YSgpIHsNCiAgICBjb25zdCBfdmFsaWRhdGVDaCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgIGlmICghIXZhbHVlICYmIHZhbGlkYXRlQ2godmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiR0KCdlcnJvck1lc3NhZ2Uubm9DaGluZXNlJykpKQ0KICAgICAgfQ0KICAgICAgY2FsbGJhY2soKQ0KICAgIH0NCiAgICByZXR1cm4gew0KICAgICAgZXhwYW5kQWxsOiBmYWxzZSwgLy8g5piv5ZCm5YWo6YOo5bGV5byADQogICAgICBleHBhbmRBbGxUaXRsZTogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5leHBhbmRBbGxUaXRsZScpLA0KICAgICAgY29sdW1uczogWw0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcubmFtZScpLA0KICAgICAgICAgIGtleTogJ25hbWUnLA0KICAgICAgICAgIGV4cGFuZDogdHJ1ZSwNCiAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgIGhlYWRlckFsaWduOiAnY2VudGVyJywNCiAgICAgICAgICB3aWR0aDogMzAwDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5wYXRoJyksDQogICAgICAgICAga2V5OiAncGF0aCcNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnR5cGUnKSwNCiAgICAgICAgICBrZXk6ICd0eXBlJywNCiAgICAgICAgICB3aWR0aDogODANCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJlc291cmNlcycpLA0KICAgICAgICAgIGtleTogJ3Jlc291cmNlcycNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LmNvbXBvbmVudCcpLA0KICAgICAgICAgIGtleTogJ2NvbXBvbmVudCcNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnNvcnQnKSwNCiAgICAgICAgICBrZXk6ICdzb3J0JywNCiAgICAgICAgICB3aWR0aDogODANCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIG1lbnVMaXN0OiBbXSwNCiAgICAgIG1lbnVUcmVlOiBbXSwvLyDmoJHlvaLoj5zljZUNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ1N0YXR1czogJycsDQogICAgICB0aXRsZU1hcDogew0KICAgICAgICB1cGRhdGU6ICfnvJbovpEnLA0KICAgICAgICBjcmVhdGU6ICflop7liqAnDQogICAgICB9LA0KICAgICAgZm9ybTogew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwYXJlbnRJZDogdW5kZWZpbmVkLA0KICAgICAgICBwYXRoOiB1bmRlZmluZWQsDQogICAgICAgIHJlc291cmNlczogdW5kZWZpbmVkLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIHRpdGxlOiB1bmRlZmluZWQsDQogICAgICAgIHNvcnQ6IHVuZGVmaW5lZCwNCiAgICAgICAgaWNvbjogdW5kZWZpbmVkLA0KICAgICAgICB0eXBlOiB1bmRlZmluZWQsDQogICAgICAgIGNvbXBvbmVudDogdW5kZWZpbmVkLA0KICAgICAgICByZWRpcmVjdDogdW5kZWZpbmVkLA0KICAgICAgICByZW1hcmtzOiB1bmRlZmluZWQsDQogICAgICAgIGhpZGRlbjogZmFsc2UsDQogICAgICAgIG5vQ2FjaGU6IHRydWUsDQogICAgICAgIGFsd2F5c1Nob3c6IGZhbHNlLA0KICAgICAgICBwYXJlbnROYW1lOiB1bmRlZmluZWQsDQogICAgICAgIG5lZWRWaWV3X2J1dHRvbjogdW5kZWZpbmVkLA0KICAgICAgICBuZWVkVmlld19tZW51OiB1bmRlZmluZWQsDQogICAgICAgIGJyZWFkY3J1bWI6IHRydWUNCiAgICAgIH0sDQogICAgICBtZW51VHlwZU9wdGlvbnMsDQogICAgICBuZWVkVmlld09wdGlvbnMsDQogICAgICBydWxlczogew0KICAgICAgICBuYW1lOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJ1bGVNZXNzYWdlLm5hbWUnKSwgdHJpZ2dlcjogJ2JsdXInfSwNCiAgICAgICAgICB7bWluOiAxLCBtYXg6IDEwMCwgbWVzc2FnZTogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5ydWxlTWVzc2FnZS5uYW1lX2xlbmd0aCcpLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIHR5cGU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcucnVsZU1lc3NhZ2UudHlwZScpLCB0cmlnZ2VyOiAnY2hhbmdlJ30NCiAgICAgICAgXSwNCiAgICAgICAgbmVlZFZpZXdfYnV0dG9uOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJ1bGVNZXNzYWdlLm5lZWRWaWV3X2J1dHRvbicpLCB0cmlnZ2VyOiAnY2hhbmdlJ30NCiAgICAgICAgXSwNCiAgICAgICAgbmVlZFZpZXdfbWVudTogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5ydWxlTWVzc2FnZS5uZWVkVmlld19tZW51JyksIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICBwYXRoOiBbDQogICAgICAgICAge3JlcXVpcmVkOiBmYWxzZSwgbWVzc2FnZTogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5ydWxlTWVzc2FnZS5wYXRoJyksIHRyaWdnZXI6ICdibHVyJ30sDQogICAgICAgICAge21pbjogMSwgbWF4OiAxMDAsIG1lc3NhZ2U6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcucnVsZU1lc3NhZ2UucGF0aF9sZW5ndGgnKSwgdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICByZXNvdXJjZXM6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcucnVsZU1lc3NhZ2UucmVzb3VyY2VzJyksIHRyaWdnZXI6ICdibHVyJ30sDQogICAgICAgICAge21pbjogMSwgbWF4OiAyNTUsIG1lc3NhZ2U6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcucnVsZU1lc3NhZ2UucmVzb3VyY2VzX2xlbmd0aCcpLCB0cmlnZ2VyOiAnYmx1cid9LA0KICAgICAgICAgIHt2YWxpZGF0b3I6IF92YWxpZGF0ZUNoLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIHRpdGxlOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJ1bGVNZXNzYWdlLnRpdGxlJyksIHRyaWdnZXI6ICdibHVyJ30sDQogICAgICAgICAge21pbjogMSwgbWF4OiAxMDAsIG1lc3NhZ2U6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcucnVsZU1lc3NhZ2UudGl0bGVfbGVuZ3RoJyksIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgY29tcG9uZW50OiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJ1bGVNZXNzYWdlLmNvbXBvbmVudCcpLCB0cmlnZ2VyOiAnYmx1cid9LA0KICAgICAgICAgIHttaW46IDEsIG1heDogMTAwLCBtZXNzYWdlOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJ1bGVNZXNzYWdlLmNvbXBvbmVudF9sZW5ndGgnKSwgdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBzb3J0OiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdhdXRob3JpdHlWaWV3LnJ1bGVNZXNzYWdlLnNvcnQnKSwgdHJpZ2dlcjogJ2JsdXInfSwNCiAgICAgICAgXSwNCiAgICAgICAgaWNvbjogWw0KICAgICAgICAgIHttYXg6IDEwMCwgbWVzc2FnZTogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5ydWxlTWVzc2FnZS5pY29uJyksIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgcmVtYXJrczogWw0KICAgICAgICAgIHttYXg6IDUwMCwgbWVzc2FnZTogdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5ydWxlTWVzc2FnZS5yZW1hcmtzJyksIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmNvbHVtbnMucHVzaCh7bGFiZWw6IHRoaXMuJHQoJ3RhYmxlLmFjdGlvbnMnKSwga2V5OiAnb3BlcmF0aW9uJywgd2lkdGg6IDMyMH0pDQogICAgdGhpcy5nZXRMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldExpc3QoKSB7DQogICAgICBjb25zdCB1c2VyID0gZ2V0VXNlcigpDQogICAgICB0cmVlTWVudSh7J3JvbGVDb2Rlcyc6IHVzZXIucm9sZUNvZGVzfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubWVudUxpc3QgPSByZXNwb25zZS5kYXRhLm1lbnVMaXN0DQogICAgICAgIHRoaXMubWVudVRyZWUgPSByZXNwb25zZS5kYXRhLm1lbnVUcmVlDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlQ3JlYXRlKHJvdykgew0KICAgICAgdGhpcy5yZXNldEZvcm0oKQ0KICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAnY3JlYXRlJw0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICAgIGlmICghcm93KSB7IC8vIOS4gOe6p+iPnOWNlQ0KICAgICAgICB0aGlzLmZvcm0ucGFyZW50SWQgPSAwDQogICAgICAgIHRoaXMuZm9ybS50eXBlID0gJ21lbnUnDQogICAgICAgIHRoaXMuZm9ybS5jb21wb25lbnQgPSAnTGF5b3V0Jw0KICAgICAgfSBlbHNlIHsgLy8g5a2Q6I+c5Y2VDQogICAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IHJvdy5pZA0KICAgICAgICB0aGlzLmZvcm0ucGFyZW50TmFtZSA9IHJvdy5uYW1lOw0KICAgICAgfQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLmRhdGFGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMuZGlhbG9nU3RhdHVzID0gJ3VwZGF0ZScNCiAgICAgIHRoaXMucmVzZXRGb3JtKCkNCiAgICAgIC8vIHRoaXMuZm9ybSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykgLy8gY29weSBvYmogIOatpOaWueazleWcqOi/memHjOaaguaXtuS4jeiDveS9v+eUqO+8jOS8muWHuumUmSAtPiDmnInlpJrkvZnlj4LmlbANCiAgICAgIHRoaXMuZm9ybS5pZCA9IHJvdy5pZA0KICAgICAgdGhpcy5mb3JtLm5hbWUgPSByb3cubmFtZQ0KICAgICAgdGhpcy5mb3JtLnBhcmVudElkID0gcm93LnBhcmVudElkDQogICAgICB0aGlzLmZvcm0udGl0bGUgPSByb3cudGl0bGUNCiAgICAgIHRoaXMuZm9ybS5wYXRoID0gcm93LnBhdGgNCiAgICAgIHRoaXMuZm9ybS5yZXNvdXJjZXMgPSByb3cucmVzb3VyY2VzDQogICAgICB0aGlzLmZvcm0udHlwZSA9IHJvdy50eXBlDQogICAgICB0aGlzLmZvcm0uaWNvbiA9IHJvdy5pY29uDQogICAgICB0aGlzLmZvcm0uc29ydCA9IHJvdy5zb3J0DQogICAgICB0aGlzLmZvcm0uY29tcG9uZW50ID0gcm93LmNvbXBvbmVudA0KICAgICAgdGhpcy5mb3JtLnJlZGlyZWN0ID0gcm93LnJlZGlyZWN0DQogICAgICB0aGlzLmZvcm0ucmVtYXJrcyA9IHJvdy5yZW1hcmtzDQogICAgICB0aGlzLmZvcm0uaGlkZGVuID0gcm93LmhpZGRlbg0KICAgICAgdGhpcy5mb3JtLm5vQ2FjaGUgPSByb3cubm9DYWNoZQ0KICAgICAgdGhpcy5mb3JtLmFsd2F5c1Nob3cgPSByb3cuYWx3YXlzU2hvdw0KICAgICAgdGhpcy5mb3JtLmJyZWFkY3J1bWIgPSByb3cuYnJlYWRjcnVtYg0KICAgICAgaWYgKHJvdy50eXBlID09PSAnYnV0dG9uJykgew0KICAgICAgICB0aGlzLmZvcm0ubmVlZFZpZXdfYnV0dG9uID0gISFyb3cuY29tcG9uZW50DQogICAgICB9IGVsc2UgaWYgKHJvdy50eXBlID09PSAnbWVudScpIHsNCiAgICAgICAgdGhpcy5mb3JtLm5lZWRWaWV3X21lbnUgPSAhIXJvdy5jb21wb25lbnQgfHwgISFyb3cudGl0bGUNCiAgICAgIH0NCiAgICAgIGNvbnN0IHBhcmVudE5vZGUgPSB0aGlzLmZpbmRUcmVlTm9kZShyb3cucGFyZW50SWQpDQogICAgICBpZiAocGFyZW50Tm9kZSkgew0KICAgICAgICB0aGlzLmZvcm0ucGFyZW50TmFtZSA9IHBhcmVudE5vZGUubmFtZQ0KICAgICAgfQ0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsNCiAgICAgIGRlbGV0ZU1lbnUocm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoJ3N1Y2Nlc3NNZXNzYWdlLmRlbGV0ZScpKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IocmVzcG9uc2UubWVzc2FnZSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHN1Ym1pdEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgLy8g5qC55o2u57G75Z6L5bCG5pWw5o2u5bqT5LiN6ZyA6KaB55qE5a2X5q61572u56m6DQogICAgICAgICAgaWYgKHRoaXMuZm9ybS50eXBlID09PSAnbWVudScpIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybS5yZXNvdXJjZXMgPSB1bmRlZmluZWQNCiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0ubmVlZFZpZXdfbWVudSA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLnRpdGxlID0gdW5kZWZpbmVkDQogICAgICAgICAgICAgIHRoaXMuZm9ybS5pY29uID0gdW5kZWZpbmVkDQogICAgICAgICAgICAgIHRoaXMuZm9ybS5jb21wb25lbnQgPSB1bmRlZmluZWQNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLnJlZGlyZWN0ID0gdW5kZWZpbmVkDQogICAgICAgICAgICAgIHRoaXMuZm9ybS5oaWRkZW4gPSB1bmRlZmluZWQNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLm5vQ2FjaGUgPSB1bmRlZmluZWQNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLmFsd2F5c1Nob3cgPSB1bmRlZmluZWQNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLmJyZWFkY3J1bWIgPSB1bmRlZmluZWQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybS50eXBlID09PSAnYnV0dG9uJykgew0KICAgICAgICAgICAgdGhpcy5mb3JtLnRpdGxlID0gdW5kZWZpbmVkDQogICAgICAgICAgICB0aGlzLmZvcm0uaWNvbiA9IHVuZGVmaW5lZA0KICAgICAgICAgICAgdGhpcy5mb3JtLnJlZGlyZWN0ID0gdW5kZWZpbmVkDQogICAgICAgICAgICB0aGlzLmZvcm0uaGlkZGVuID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5mb3JtLm5vQ2FjaGUgPSB1bmRlZmluZWQNCiAgICAgICAgICAgIHRoaXMuZm9ybS5hbHdheXNTaG93ID0gdW5kZWZpbmVkDQogICAgICAgICAgICBpZiAodGhpcy5mb3JtLm5lZWRWaWV3X2J1dHRvbiA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtLmNvbXBvbmVudCA9IHVuZGVmaW5lZA0KICAgICAgICAgICAgICB0aGlzLmZvcm0uaGlkZGVuID0gdW5kZWZpbmVkDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIC8qdGhpcy5mb3JtLnBhcmVudE5hbWUgPSB1bmRlZmluZWQNCiAgICAgICAgICB0aGlzLmZvcm0ubmVlZFZpZXdfYnV0dG9uID0gdW5kZWZpbmVkDQogICAgICAgICAgdGhpcy5mb3JtLm5lZWRWaWV3X21lbnUgPSB1bmRlZmluZWQqLw0KICAgICAgICAgIHNhdmVNZW51KHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgIC8vIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5zYXZlJykpDQogICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcihyZXNwb25zZS5tZXNzYWdlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICB0eXBlQ2hhbmdlZCgpIHsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS5jbGVhclZhbGlkYXRlKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBuZWVkVmlld0J1dHRvbkNoYW5nZWQoKSB7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpDQogICAgICB9KQ0KICAgIH0sDQogICAgbmVlZFZpZXdNZW51Q2hhbmdlZCgpIHsNCiAgICAgIGlmICh0aGlzLmZvcm0ubmVlZFZpZXdfbWVudSAmJiAhdGhpcy5mb3JtLnBhcmVudElkKSB7DQogICAgICAgIHRoaXMuZm9ybS5jb21wb25lbnQgPSAnTGF5b3V0Jw0KICAgICAgfQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHNob3dBZGRDaGlsZHJlbihyb3cpIHsNCiAgICAgIHJldHVybiAhIShyb3cudHlwZSA9PT0gJ21lbnUnICYmIHJvdy5jb21wb25lbnQgfHwgcm93LnR5cGUgPT09ICdidXR0b24nICYmIHJvdy5jb21wb25lbnQpDQogICAgfSwNCiAgICBmb3JtYXRNZW51VHlwZShyb3csIGNvbHVtbikgew0KICAgICAgc3dpdGNoIChyb3cudHlwZSkgew0KICAgICAgICBjYXNlICdtZW51JzoNCiAgICAgICAgICByZXR1cm4gdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5tZW51VHlwZU9wdGlvbnMubWVudScpDQogICAgICAgIGNhc2UgJ2J1dHRvbic6DQogICAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcubWVudVR5cGVPcHRpb25zLmJ1dHRvbicpDQogICAgICB9DQogICAgfSwNCiAgICBmaW5kVHJlZU5vZGUoaWQpIHsNCiAgICAgIHJldHVybiB0aGlzLl8uZmluZCh0aGlzLm1lbnVMaXN0LCB7aWQ6IHBhcnNlSW50KGlkKX0pDQogICAgfSwNCiAgICBoYW5kbGVFeHBhbmQoKSB7DQogICAgICB0aGlzLmV4cGFuZEFsbCA9ICF0aGlzLmV4cGFuZEFsbA0KICAgICAgdGhpcy5leHBhbmRBbGxUaXRsZSA9IHRoaXMuZXhwYW5kQWxsID8gdGhpcy4kdCgnYXV0aG9yaXR5Vmlldy5mb2xkQWxsVGl0bGUnKSA6IHRoaXMuJHQoJ2F1dGhvcml0eVZpZXcuZXhwYW5kQWxsVGl0bGUnKQ0KICAgIH0sDQogICAgcmVzZXRGb3JtKCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwYXJlbnRJZDogdW5kZWZpbmVkLA0KICAgICAgICBwYXRoOiB1bmRlZmluZWQsDQogICAgICAgIHJlc291cmNlczogdW5kZWZpbmVkLA0KICAgICAgICBuYW1lOiB1bmRlZmluZWQsDQogICAgICAgIHRpdGxlOiB1bmRlZmluZWQsDQogICAgICAgIHNvcnQ6IHVuZGVmaW5lZCwNCiAgICAgICAgaWNvbjogdW5kZWZpbmVkLA0KICAgICAgICB0eXBlOiB1bmRlZmluZWQsDQogICAgICAgIGNvbXBvbmVudDogdW5kZWZpbmVkLA0KICAgICAgICByZWRpcmVjdDogdW5kZWZpbmVkLA0KICAgICAgICByZW1hcmtzOiB1bmRlZmluZWQsDQogICAgICAgIGhpZGRlbjogZmFsc2UsDQogICAgICAgIG5vQ2FjaGU6IHRydWUsDQogICAgICAgIGFsd2F5c1Nob3c6IGZhbHNlLA0KICAgICAgICBwYXJlbnROYW1lOiB1bmRlZmluZWQsDQogICAgICAgIG5lZWRWaWV3X2J1dHRvbjogdW5kZWZpbmVkLA0KICAgICAgICBuZWVkVmlld19tZW51OiB1bmRlZmluZWQsDQogICAgICAgIGJyZWFkY3J1bWI6IHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOebkeWQrGRpYWxvZ+WFs+mXreaXtueahOWkhOeQhuS6i+S7tg0KICAgIGhhbmRsZURpYWxvZ0Nsb3NlKCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10pIHsNCiAgICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS5jbGVhclZhbGlkYXRlKCkgLy8g5riF6Zmk5pW05Liq6KGo5Y2V55qE5qCh6aqMDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/authority","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <el-button  size=\"small\" @click=\"getList()\" class=\"filter-item\" icon=\"el-icon-refresh\" style=\"margin-left: 10px;\" type=\"primary\"\r\n                 v-waves>{{ $t('tagsView.refresh') }}\r\n      </el-button>\r\n      <el-button  size=\"small\" :icon=\"expandAll ? 'el-icon-caret-bottom' : 'el-icon-caret-right'\" @click=\"handleExpand()\"\r\n                 class=\"filter-item\" style=\"margin-left: 10px;\"\r\n                 type=\"primary\" v-waves>\r\n        {{ expandAllTitle }}\r\n      </el-button>\r\n      <el-button  size=\"small\" @click=\"handleCreate()\" class=\"filter-item\" icon=\"el-icon-plus\" style=\"margin-left: 10px;\"\r\n                 type=\"primary\" v-auth=\"'sys-authority:save'\" v-waves>\r\n        {{ $t('table.add') }}\r\n      </el-button>\r\n    </div>\r\n\r\n    <cus-table-title :label=\"$t('authorityView.menuList')\"></cus-table-title>\r\n    <tree-table :columns=\"columns\" :data=\"menuTree\" :default-expand-all=\"expandAll\" border default-children=\"children\"\r\n                highlight-current-row>\r\n\r\n      <template slot=\"type\" slot-scope=\"{scope}\">\r\n        <span>{{ formatMenuType(scope.row) }}</span>\r\n      </template>\r\n\r\n      <template slot=\"operation\" slot-scope=\"{scope}\">\r\n        <el-button    @click=\"handleCreate(scope.row)\" icon=\"el-icon-plus\" size=\"mini\"\r\n                   type=\"primary\" v-auth=\"'sys-authority:save'\">\r\n          {{ $t('authorityView.addChildren') }}\r\n        </el-button>\r\n        <el-button    @click=\"handleUpdate(scope.row)\" icon=\"el-icon-edit\" size=\"mini\"\r\n                   type=\"primary\" v-auth=\"'sys-authority:save'\">\r\n          {{ $t('table.edit') }}\r\n        </el-button>\r\n        <cus-del-btn style=\"margin-left: 10px\" @ok=\"handleDelete(scope.row)\" v-auth=\"'sys-authority:delete'\"></cus-del-btn>\r\n      </template>\r\n    </tree-table>\r\n\r\n    <el-dialog :visible.sync=\"dialogFormVisible\" @close=\"handleDialogClose\" v-dialog-drag>\r\n      <cus-page-title-back :isDialog=\"true\" :label=\"titleMap[dialogStatus]\" @backTo=\"dialogFormVisible=false\" />\r\n      <el-form :model=\"form\" :rules=\"rules\" label-position=\"right\" label-width=\"auto\" ref=\"dataForm\">\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.parentName')\" prop=\"parentName\" v-show=\"form.parentId !== 0\">\r\n          <el-input :placeholder=\"$t('authorityView.parentName')\" disabled v-model=\"form.parentName\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"> <el-form-item :label=\"$t('authorityView.name')\" prop=\"name\">\r\n          <el-input :placeholder=\"$t('authorityView.pleaseEnter') + $t('authorityView.name')\" v-model=\"form.name\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.type')\" prop=\"type\">\r\n          <el-select :disabled=\"form.parentId === 0\"\r\n                     :placeholder=\"$t('authorityView.pleaseSelect') + $t('authorityView.type')\"\r\n                     @change=\"typeChanged\" class=\"filter-item\"\r\n                     clearable  v-model=\"form.type\">\r\n            <el-option :key=\"item.key\" :label=\"item.display_name\" :value=\"item.key\" v-for=\"item in menuTypeOptions\"/>\r\n          </el-select>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.needView_button')\" prop=\"needView_button\" v-if=\"form.type === 'button'\">\r\n          <el-select :placeholder=\"$t('authorityView.pleaseSelect') + $t('authorityView.needView_button')\"\r\n                     @change=\"needViewButtonChanged\"\r\n                     class=\"filter-item\" clearable v-model=\"form.needView_button\">\r\n            <el-option :key=\"item.key\" :label=\"item.display_name\" :value=\"item.key\" v-for=\"item in needViewOptions\"/>\r\n          </el-select>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.needView_menu')\" prop=\"needView_menu\" v-if=\"form.type === 'menu'\">\r\n          <el-select :placeholder=\"$t('authorityView.pleaseSelect') + $t('authorityView.needView_menu')\"\r\n                     @change=\"needViewMenuChanged\"\r\n                     class=\"filter-item\" clearable v-model=\"form.needView_menu\">\r\n            <el-option :key=\"item.key\" :label=\"item.display_name\" :value=\"item.key\" v-for=\"item in needViewOptions\"/>\r\n          </el-select>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.path')\" prop=\"path\">\r\n          <el-input :placeholder=\"$t('authorityView.placeholder.path')\" v-model=\"form.path\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.resources')\" prop=\"resources\" v-if=\"form.type === 'button'\">\r\n          <el-input :placeholder=\"$t('authorityView.pleaseEnter') + $t('authorityView.resources')\"\r\n                    v-model=\"form.resources\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.title')\" prop=\"title\"\r\n                                                 v-if=\"form.type === 'menu' && form.needView_menu === true || form.type === 'button' && form.needView_button === true\">\r\n          <el-input :placeholder=\"$t('authorityView.pleaseEnter') + $t('authorityView.title')\" v-model=\"form.title\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.component')\" prop=\"component\"\r\n                                                 v-if=\"form.type === 'menu' && form.needView_menu === true || form.type === 'button' && form.needView_button === true\">\r\n          <el-input :disabled=\"form.parentId === 0\" :placeholder=\"$t('authorityView.placeholder.component')\"\r\n                    v-model=\"form.component\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"> <el-form-item :label=\"$t('authorityView.redirect')\" prop=\"redirect\"\r\n                                                  v-if=\"form.type === 'menu' && form.needView_menu === true\">\r\n          <el-input :placeholder=\"$t('authorityView.placeholder.redirect')\" v-model=\"form.redirect\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.hidden')\" prop=\"hidden\"\r\n                                                 v-if=\"form.type === 'menu' && form.needView_menu === true\">\r\n          <el-switch v-model=\"form.hidden\"></el-switch>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\">    <el-form-item :label=\"$t('authorityView.noCache')\" prop=\"noCache\"\r\n                                                     v-if=\"form.type === 'menu' && form.needView_menu === true\">\r\n          <el-switch :active-value=\"false\" :inactive-value=\"true\" v-model=\"form.noCache\"></el-switch>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"><el-form-item :label=\"$t('authorityView.alwaysShow')\" prop=\"alwaysShow\"\r\n                                                 v-if=\"form.type === 'menu' && form.needView_menu === true\">\r\n          <el-switch v-model=\"form.alwaysShow\"></el-switch>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"> <el-form-item :label=\"$t('authorityView.breadcrumb')\" prop=\"breadcrumb\">\r\n          <el-switch :active-value=\"true\" :inactive-value=\"false\"  v-model=\"form.breadcrumb\"></el-switch>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"> <el-form-item :label=\"$t('authorityView.sort')\" prop=\"sort\">\r\n          <el-input :placeholder=\"$t('authorityView.pleaseEnter') + $t('authorityView.sort')\" type=\"number\"\r\n                    v-model=\"form.sort\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\">  <el-form-item :label=\"$t('authorityView.icon')\" prop=\"icon\">\r\n          <el-input :placeholder=\"$t('authorityView.pleaseEnter') + $t('authorityView.icon')\" v-model=\"form.icon\"/>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row><el-col :span=\"15\"> <el-form-item :label=\"$t('authorityView.remarks')\" prop=\"remarks\">\r\n          <el-input :placeholder=\"$t('authorityView.pleaseEnter') + $t('authorityView.remarks')\" :rows=\"7\"\r\n                    type=\"textarea\" v-model=\"form.remarks\"/>\r\n        </el-form-item></el-col></el-row>\r\n      </el-form>\r\n      <div class=\"dialog-footer\" slot=\"footer\" >\r\n        <el-button  size=\"small\" icon='el-icon-circle-close' type=\"primary\" @click=\"dialogFormVisible = false\">\r\n          {{ $t('table.cancel') }}\r\n        </el-button>\r\n        <el-button  size=\"small\" @click=\"submitForm\" class=\"el-icon-success\" type=\"primary\">\r\n          {{ $t('table.confirm') }}\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {deleteMenu, saveMenu, treeMenu} from '@/api/system/authority'\r\n\r\nimport treeTable from '@/components/TreeTable'\r\nimport {validateCh} from '@/utils/validate'\r\nimport MyVue from '@/main'\r\nimport {getUser} from \"@/utils/auth\"\r\n\r\nconst menuTypeOptions = [\r\n  {key: 'menu', display_name: MyVue.$t('authorityView.menuTypeOptions.menu')},\r\n  {key: 'button', display_name: MyVue.$t('authorityView.menuTypeOptions.button')}\r\n]\r\n\r\nconst needViewOptions = [\r\n  {key: true, display_name: MyVue.$t('authorityView.needViewOptions.yes')},\r\n  {key: false, display_name: MyVue.$t('authorityView.needViewOptions.no')}\r\n]\r\n\r\nexport default {\r\n  name: 'AuthorityManagement',\r\n  components: {treeTable},\r\n  data() {\r\n    const _validateCh = (rule, value, callback) => {\r\n      if (!!value && validateCh(value)) {\r\n        callback(new Error(this.$t('errorMessage.noChinese')))\r\n      }\r\n      callback()\r\n    }\r\n    return {\r\n      expandAll: false, // 是否全部展开\r\n      expandAllTitle: this.$t('authorityView.expandAllTitle'),\r\n      columns: [\r\n        {\r\n          label: this.$t('authorityView.name'),\r\n          key: 'name',\r\n          expand: true,\r\n          align: 'left',\r\n          headerAlign: 'center',\r\n          width: 300\r\n        },\r\n        {\r\n          label: this.$t('authorityView.path'),\r\n          key: 'path'\r\n        },\r\n        {\r\n          label: this.$t('authorityView.type'),\r\n          key: 'type',\r\n          width: 80\r\n        },\r\n        {\r\n          label: this.$t('authorityView.resources'),\r\n          key: 'resources'\r\n        },\r\n        {\r\n          label: this.$t('authorityView.component'),\r\n          key: 'component'\r\n        },\r\n        {\r\n          label: this.$t('authorityView.sort'),\r\n          key: 'sort',\r\n          width: 80\r\n        }\r\n      ],\r\n      menuList: [],\r\n      menuTree: [],// 树形菜单\r\n      dialogFormVisible: false,\r\n      dialogStatus: '',\r\n      titleMap: {\r\n        update: '编辑',\r\n        create: '增加'\r\n      },\r\n      form: {\r\n        id: undefined,\r\n        parentId: undefined,\r\n        path: undefined,\r\n        resources: undefined,\r\n        name: undefined,\r\n        title: undefined,\r\n        sort: undefined,\r\n        icon: undefined,\r\n        type: undefined,\r\n        component: undefined,\r\n        redirect: undefined,\r\n        remarks: undefined,\r\n        hidden: false,\r\n        noCache: true,\r\n        alwaysShow: false,\r\n        parentName: undefined,\r\n        needView_button: undefined,\r\n        needView_menu: undefined,\r\n        breadcrumb: true\r\n      },\r\n      menuTypeOptions,\r\n      needViewOptions,\r\n      rules: {\r\n        name: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.name'), trigger: 'blur'},\r\n          {min: 1, max: 100, message: this.$t('authorityView.ruleMessage.name_length'), trigger: 'blur'}\r\n        ],\r\n        type: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.type'), trigger: 'change'}\r\n        ],\r\n        needView_button: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.needView_button'), trigger: 'change'}\r\n        ],\r\n        needView_menu: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.needView_menu'), trigger: 'change'}\r\n        ],\r\n        path: [\r\n          {required: false, message: this.$t('authorityView.ruleMessage.path'), trigger: 'blur'},\r\n          {min: 1, max: 100, message: this.$t('authorityView.ruleMessage.path_length'), trigger: 'blur'}\r\n        ],\r\n        resources: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.resources'), trigger: 'blur'},\r\n          {min: 1, max: 255, message: this.$t('authorityView.ruleMessage.resources_length'), trigger: 'blur'},\r\n          {validator: _validateCh, trigger: 'blur'}\r\n        ],\r\n        title: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.title'), trigger: 'blur'},\r\n          {min: 1, max: 100, message: this.$t('authorityView.ruleMessage.title_length'), trigger: 'blur'}\r\n        ],\r\n        component: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.component'), trigger: 'blur'},\r\n          {min: 1, max: 100, message: this.$t('authorityView.ruleMessage.component_length'), trigger: 'blur'}\r\n        ],\r\n        sort: [\r\n          {required: true, message: this.$t('authorityView.ruleMessage.sort'), trigger: 'blur'},\r\n        ],\r\n        icon: [\r\n          {max: 100, message: this.$t('authorityView.ruleMessage.icon'), trigger: 'blur'}\r\n        ],\r\n        remarks: [\r\n          {max: 500, message: this.$t('authorityView.ruleMessage.remarks'), trigger: 'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.columns.push({label: this.$t('table.actions'), key: 'operation', width: 320})\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    getList() {\r\n      const user = getUser()\r\n      treeMenu({'roleCodes': user.roleCodes}).then(response => {\r\n        this.menuList = response.data.menuList\r\n        this.menuTree = response.data.menuTree\r\n      })\r\n    },\r\n    handleCreate(row) {\r\n      this.resetForm()\r\n      this.dialogStatus = 'create'\r\n      this.dialogFormVisible = true\r\n      if (!row) { // 一级菜单\r\n        this.form.parentId = 0\r\n        this.form.type = 'menu'\r\n        this.form.component = 'Layout'\r\n      } else { // 子菜单\r\n        this.form.parentId = row.id\r\n        this.form.parentName = row.name;\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.dataForm.clearValidate()\r\n      })\r\n    },\r\n    handleUpdate(row) {\r\n      this.dialogStatus = 'update'\r\n      this.resetForm()\r\n      // this.form = Object.assign({}, row) // copy obj  此方法在这里暂时不能使用，会出错 -> 有多余参数\r\n      this.form.id = row.id\r\n      this.form.name = row.name\r\n      this.form.parentId = row.parentId\r\n      this.form.title = row.title\r\n      this.form.path = row.path\r\n      this.form.resources = row.resources\r\n      this.form.type = row.type\r\n      this.form.icon = row.icon\r\n      this.form.sort = row.sort\r\n      this.form.component = row.component\r\n      this.form.redirect = row.redirect\r\n      this.form.remarks = row.remarks\r\n      this.form.hidden = row.hidden\r\n      this.form.noCache = row.noCache\r\n      this.form.alwaysShow = row.alwaysShow\r\n      this.form.breadcrumb = row.breadcrumb\r\n      if (row.type === 'button') {\r\n        this.form.needView_button = !!row.component\r\n      } else if (row.type === 'menu') {\r\n        this.form.needView_menu = !!row.component || !!row.title\r\n      }\r\n      const parentNode = this.findTreeNode(row.parentId)\r\n      if (parentNode) {\r\n        this.form.parentName = parentNode.name\r\n      }\r\n      this.dialogFormVisible = true\r\n    },\r\n    handleDelete(row) {\r\n      deleteMenu(row.id).then(response => {\r\n        if (response.code === 200) {\r\n          this.getList()\r\n          this.notifySuccess(this.$t('successMessage.delete'))\r\n        } else {\r\n          this.notifyError(response.message)\r\n        }\r\n      })\r\n    },\r\n    submitForm() {\r\n      this.$refs['dataForm'].validate(valid => {\r\n        if (valid) {\r\n          // 根据类型将数据库不需要的字段置空\r\n          if (this.form.type === 'menu') {\r\n            this.form.resources = undefined\r\n            if (this.form.needView_menu === false) {\r\n              this.form.title = undefined\r\n              this.form.icon = undefined\r\n              this.form.component = undefined\r\n              this.form.redirect = undefined\r\n              this.form.hidden = undefined\r\n              this.form.noCache = undefined\r\n              this.form.alwaysShow = undefined\r\n              this.form.breadcrumb = undefined\r\n            }\r\n          } else if (this.form.type === 'button') {\r\n            this.form.title = undefined\r\n            this.form.icon = undefined\r\n            this.form.redirect = undefined\r\n            this.form.hidden = true\r\n            this.form.noCache = undefined\r\n            this.form.alwaysShow = undefined\r\n            if (this.form.needView_button === false) {\r\n              this.form.component = undefined\r\n              this.form.hidden = undefined\r\n            }\r\n          }\r\n          /*this.form.parentName = undefined\r\n          this.form.needView_button = undefined\r\n          this.form.needView_menu = undefined*/\r\n          saveMenu(this.form).then(response => {\r\n            if (response.code === 200) {\r\n              // this.getList()\r\n              this.notifySuccess(this.$t('successMessage.save'))\r\n              this.dialogFormVisible = false\r\n            } else {\r\n              this.notifyError(response.message)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    typeChanged() {\r\n      this.$nextTick(() => {\r\n        this.$refs['dataForm'].clearValidate()\r\n      })\r\n    },\r\n    needViewButtonChanged() {\r\n      this.$nextTick(() => {\r\n        this.$refs['dataForm'].clearValidate()\r\n      })\r\n    },\r\n    needViewMenuChanged() {\r\n      if (this.form.needView_menu && !this.form.parentId) {\r\n        this.form.component = 'Layout'\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs['dataForm'].clearValidate()\r\n      })\r\n    },\r\n    showAddChildren(row) {\r\n      return !!(row.type === 'menu' && row.component || row.type === 'button' && row.component)\r\n    },\r\n    formatMenuType(row, column) {\r\n      switch (row.type) {\r\n        case 'menu':\r\n          return this.$t('authorityView.menuTypeOptions.menu')\r\n        case 'button':\r\n          return this.$t('authorityView.menuTypeOptions.button')\r\n      }\r\n    },\r\n    findTreeNode(id) {\r\n      return this._.find(this.menuList, {id: parseInt(id)})\r\n    },\r\n    handleExpand() {\r\n      this.expandAll = !this.expandAll\r\n      this.expandAllTitle = this.expandAll ? this.$t('authorityView.foldAllTitle') : this.$t('authorityView.expandAllTitle')\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n        id: undefined,\r\n        parentId: undefined,\r\n        path: undefined,\r\n        resources: undefined,\r\n        name: undefined,\r\n        title: undefined,\r\n        sort: undefined,\r\n        icon: undefined,\r\n        type: undefined,\r\n        component: undefined,\r\n        redirect: undefined,\r\n        remarks: undefined,\r\n        hidden: false,\r\n        noCache: true,\r\n        alwaysShow: false,\r\n        parentName: undefined,\r\n        needView_button: undefined,\r\n        needView_menu: undefined,\r\n        breadcrumb: true\r\n      }\r\n    },\r\n    // 监听dialog关闭时的处理事件\r\n    handleDialogClose() {\r\n      if (this.$refs['dataForm']) {\r\n        this.$refs['dataForm'].clearValidate() // 清除整个表单的校验\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n.el-select {\r\nwidth: 100%;\r\n}\r\n"]}]}