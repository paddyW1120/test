{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-revision\\pd-formula-rev\\pd-preservation-formula-rev\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-revision\\pd-formula-rev\\pd-preservation-formula-rev\\index.vue","mtime":1609847107077},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7cXVlcnlDYWxjQnlQZENvZGUsIHF1ZXJ5UGFCeVBkQ29kZSwgdXBsb2FkUGFUYWJsZX0gZnJvbSAnQC9hcGkvYmFzaWNpbmZvL3Byb2R1Y3RSdWxlUmV2aXNpb25RdWVyeScNCmltcG9ydCB7cXVlcnlBbGxQYX0gZnJvbSAnQC9hcGkvYmFzaWNpbmZvL3BkZ2VubFBhSW5mbycNCmltcG9ydCBwZGdlbmxQYUZvcm11bGEgZnJvbSAiQC92aWV3cy9nZW5lcmFsLWNvbmZpZy9nZW4tcGFJbmZvLWNvbmYvcGRnZW5sUGFGb3JtdWxhL2luZGV4Ig0KaW1wb3J0IHtkZWxldGVSdWxlT3JDYWxjfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcG9JbmZvRGVzaWduIg0KDQpsZXQgX3RoaXMNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3Byb2R1Y3RDYWxjUmV2aXNpb25RdWVyeScsDQogIGZpbHRlcnM6IHsNCiAgICBmaWx0ZXJfcnVsZUJ1c3NNb2R1RGV0YShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3J1bGVCdXNpbmVzc0RldGFpbENsYXNzJywgY29kZSkNCiAgICB9LA0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgcGRnZW5sUGFGb3JtdWxhDQogIH0sDQogIGRhdGEoKSB7DQogICAgX3RoaXMgPSB0aGlzDQogICAgcmV0dXJuIHsNCiAgICAgIHJ1bGVWaWV3OiB7DQogICAgICAgIHZpc2libGU6IGZhbHNlLA0KICAgICAgICBmbGFnOiAnJywNCiAgICAgICAgcnVsZUNvZGU6ICcnDQogICAgICB9LA0KICAgICAgcnVsZVJldmlzaW9uU2hvd0lOZm86IHRydWUsDQogICAgICBwcm9kdWN0Q2FsY1JldmlzaW9uU2hvd0lOZm86IGZhbHNlLA0KICAgICAgcHJvZHVjdDogew0KICAgICAgICBwZENvZGU6ICcnLA0KICAgICAgICBwZE5hbWU6ICcnLA0KICAgICAgICBwZEVkaXRpb246ICcnDQogICAgICB9LA0KICAgICAgcGRwYUZvcm06IHsNCiAgICAgICAgc2VjdXJpdHlQcm9qZWN0OiAnJywNCiAgICAgICAgcnVsZXNTdWJjbGFzczogJycsDQogICAgICAgIGZvcm11bGFUeXBlOiAnJywNCiAgICAgIH0sDQogICAgICBmaWxlTGlzdDogW10sDQogICAgICBwZFBhSW5mbzogew0KICAgICAgICBpZDogJycsDQogICAgICAgIHBkUGFDb2RlOiAnJywNCiAgICAgICAgcGRQYU5hbWU6ICcnLA0KICAgICAgICBwZEF0dHI6ICcnLA0KICAgICAgICBwZFBhVHlwZTogW10sDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkZ2VubFBkUGFEZXNUeXBlTGlzdDogW10sDQogICAgICB9LA0KICAgICAgZGlhbG9nVGFibGVWaXNpYmxlMjogZmFsc2UsDQogICAgICBkaWFsb2dWaXNpYmxlVXBsb2FkOiBmYWxzZSwNCiAgICAgIHRhYmxlRGF0YV9mb3JtdWxhUGFyYW06IFtdLA0KICAgICAgY29uZmlnc0NhbGM6IFtdLA0KICAgICAgY29sdW1uczE6IFtdLA0KICAgICAgcGRPcHRpb25zOiBbXSwNCiAgICAgIHNlbGVjdGVkRGVmMToge30sDQogICAgICAvL+ajgOmqjOinhOWImQ0KICAgICAgcnVsZXM6IHt9LA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnByb2R1Y3RDYWxjUmV2aXNpb25TaG93SU5mbyA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2R1Y3RDYWxjUmV2aXNpb25TaG93SU5mbw0KICAgIHRoaXMucnVsZVJldmlzaW9uU2hvd0lOZm8gPSB0aGlzLiRyb3V0ZS5xdWVyeS5ydWxlUmV2aXNpb25TaG93SU5mbw0KICAgIGlmICghdGhpcy5ydWxlUmV2aXNpb25TaG93SU5mbykgew0KICAgICAgdGhpcy5ydWxlUmV2aXNpb25TaG93SU5mbyA9IHRydWU7DQogICAgfQ0KICAgIGlmICghdGhpcy5wcm9kdWN0Q2FsY1JldmlzaW9uU2hvd0lOZm8pIHsNCiAgICAgIHRoaXMucHJvZHVjdENhbGNSZXZpc2lvblNob3dJTmZvID0gZmFsc2U7DQogICAgfQ0KICAgIHRoaXMucHJvZHVjdCA9IHRoaXMuZ2V0UGREYXRhKCkNCiAgICB0aGlzLnF1ZXJ5UGFCeVBkQ29kZSgpDQogICAgdGhpcy5xdWVyeUNhbGNCeVBkQ29kZSgpDQogICAgdGhpcy5vcGVuKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8q5qC55o2u5Lqn5ZOB5p+l6K+i5b2T5YmN5Lqn5ZOB5LiL55qE5omA5pyJ5L+d5YWo6aG555uuKi8NCiAgICBxdWVyeVBhQnlQZENvZGUoKSB7DQogICAgICBxdWVyeVBhQnlQZENvZGUodGhpcy5idWlsZFJlcXVlc3REYXRhKHRoaXMucHJvZHVjdCkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5wZE9wdGlvbnMgPSBbXQ0KICAgICAgICBmb3IgKGxldCBkYXRhIG9mIHJlcy5kYXRhKSB7DQogICAgICAgICAgbGV0IG9wdGlvbiA9IHtwYUNvZGU6ICcnLCBwYU5hbWU6ICcnfTsNCiAgICAgICAgICBvcHRpb24ucGFDb2RlID0gZGF0YS5wYUNvZGU7DQogICAgICAgICAgb3B0aW9uLnBhTmFtZSA9IGRhdGEucGFOYW1lOw0KICAgICAgICAgIHRoaXMucGRPcHRpb25zLnB1c2gob3B0aW9uKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRlbGV0ZUZvcm11bGFQYXJhbShyb3cpIHsNCiAgICAgIHRoaXMudGFibGVEYXRhX2Zvcm11bGFQYXJhbS5zcGxpY2UodGhpcy50YWJsZURhdGFfZm9ybXVsYVBhcmFtLmluZGV4T2Yocm93KSwgMSkNCiAgICB9LA0KICAgIGRvd25sb2FkUGFUYWJsZSgpIHsNCiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnNlbGVjdGVkRGVmMSkubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncGR0ZW1wUGRDdi5wbGVhc2VTZWxlY3RGb3JtdWxhJykpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgbGV0IGNvbHVtbnMgPSBbXQ0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGNvbHVtbnMucHVzaCh7DQogICAgICAgICAgdGl0bGU6IHRoaXMuY29sdW1uczFbaV0ubGFiZWwsDQogICAgICAgICAga2V5OiBTdHJpbmcoaSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIHRoaXMuZXhwb3J0MkV4Y2VsKGNvbHVtbnMsIHRoaXMudGFibGVEYXRhX2Zvcm11bGFQYXJhbSwgJ+WFrOW8j+aVsOWAvF8nICsgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCksICd5eXl5LU1NLWRkX2ho77yabW3vvJpzcycpKQ0KICAgIH0sDQogICAgdXBsb2FkUGFUYWJsZSgpIHsNCiAgICAgIGlmICh0aGlzLmZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3BkdGVtcFBkQ3YucGxlYXNlU2VsZWN0RmlsZScpKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1cGxvYWRGb3JtIikNCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pDQogICAgICAgIHVwbG9hZFBhVGFibGUoZm9ybURhdGEpLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdwZHRlbXBQZEN2LnVwbG9hZFN1Y2Nlc3NmdWxseScpKQ0KICAgICAgICAgIHRoaXMuJHJlZnMudXBsb2FkLmNsZWFyRmlsZXMoKQ0KICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgdG9VcGxvYWRQYVRhYmxlKCkgew0KICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuc2VsZWN0ZWREZWYxKS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwZHRlbXBQZEN2LnBsZWFzZVNlbGVjdEZvcm11bGEnKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGVVcGxvYWQgPSB0cnVlDQogICAgfSwNCiAgICAvL+aWh+S7tueKtuaAgeaUueWPmOaXtueahOmSqeWtkO+8jOa3u+WKoOaWh+S7tuOAgeS4iuS8oOaIkOWKn+WSjOS4iuS8oOWksei0peaXtumDveS8muiiq+iwg+eUqA0KICAgIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgLy/liKTmlq3mlofku7blpKflsI8NCiAgICAgIGlmICghKGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMTApKSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+S4iuS8oOaWh+S7tuWkp+Wwj+S4jeiDvei2hei/hyAxME1CIScpDQogICAgICAgIGZpbGVMaXN0LnNwbGljZShmaWxlTGlzdC5pbmRleE9mKGZpbGUpLCAxKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsNCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0Ow0KICAgIH0sDQogICAgcmVtb3ZlUnVsZShyb3cpIHsNCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICBydWxlVGVtcGxhdGVBdHRyaWJ1dGVJZDogcm93LmlkLA0KICAgICAgICBwcm9kdWN0OiB0aGlzLnByb2R1Y3QNCiAgICAgIH0NCiAgICAgIGRlbGV0ZVJ1bGVPckNhbGModGhpcy5idWlsZFJlcXVlc3REYXRhKGRhdGEpKS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKCfliKDpmaTmiJDlip8nKQ0KICAgICAgICBxdWVyeUNhbGNCeVBkQ29kZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEodGhpcy5wcm9kdWN0KSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuY29uZmlnc0NhbGMgPSByZXMuZGF0YQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8q5qC55o2u5Lqn5ZOB5p+l6K+i5b2T5YmN5Lqn5ZOB5LiL55qE5omA5pyJ5L+d5YWo6aG555uu5YWz6IGU55qE5YWs5byPKi8NCiAgICBxdWVyeUNhbGNCeVBkQ29kZSgpIHsNCiAgICAgIHF1ZXJ5Q2FsY0J5UGRDb2RlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh0aGlzLnByb2R1Y3QpKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuY29uZmlnc0NhbGMgPSByZXMuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHNlbGVjdGVkRm9ybXVsYUNoYW5nZWQoKSB7DQogICAgICB0aGlzLnJ1bGVWaWV3LmZsYWcgPSAnMicNCiAgICAgIHRoaXMucnVsZVZpZXcucnVsZUNvZGUgPSB0aGlzLnNlbGVjdGVkRGVmMS5jb2RlDQogICAgICB0aGlzLnJ1bGVWaWV3LnZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBydWxlTWFrZUNsb3NlZCgpIHsNCiAgICAgIHRoaXMucnVsZVZpZXcudmlzaWJsZSA9IGZhbHNlDQogICAgICB0aGlzLnNlbGVjdGVkRGVmMSA9IHt9DQogICAgfSwNCiAgICBzaG93UnVsZShjb2RlKSB7DQogICAgICB0aGlzLnJ1bGVWaWV3LmZsYWcgPSAnMScNCiAgICAgIHRoaXMucnVsZVZpZXcucnVsZUNvZGUgPSBjb2RlDQogICAgICB0aGlzLnJ1bGVWaWV3LnZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICAvKiDliLfmlrDph43nva7pgInmi6nnmoTkv53lhajpobnnm64gKi8NCiAgICByZWZyZXNoU2VsT3B0aW9ucygpIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWREZWYxID0ge307DQogICAgICB0aGlzLmNvbHVtbnMxID0gW10NCiAgICAgIHRoaXMudGFibGVEYXRhX2Zvcm11bGFQYXJhbSA9IFtdDQogICAgfSwNCiAgICAvKuWPlua2iOmAieS4reS4gOihjOinhOWImSovDQogICAgY2hvb3NlT25lUm93Q29uZmlnczIocm93LCBjb2x1bW4sIGV2ZW50KSB7DQogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7DQogICAgICAgIGlmIChyb3cuaWQgPT09IHRoaXMuc2VsZWN0ZWREZWYxLmlkKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZERlZjEgPSB7fTsNCiAgICAgICAgICB0aGlzLmNvbHVtbnMxID0gW10NCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9mb3JtdWxhUGFyYW0gPSBbXQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZURpYWxvZ0Zvcm11bGEoKSB7DQogICAgICB0aGlzLmRpYWxvZ1RhYmxlVmlzaWJsZTIgPSBmYWxzZQ0KICAgICAgcXVlcnlDYWxjQnlQZENvZGUodGhpcy5idWlsZFJlcXVlc3REYXRhKHRoaXMucHJvZHVjdCkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5jb25maWdzQ2FsYyA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgZ29SdWxlKCkgew0KICAgICAgaWYgKCF0aGlzLnBkcGFGb3JtLnNlY3VyaXR5UHJvamVjdCkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RSdWxlUmV2aXNpb25RdWVyeS50b1J1bGUnKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBxdWVyeUFsbFBhKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7InBkUGFDb2RlIjogdGhpcy5wZHBhRm9ybS5zZWN1cml0eVByb2plY3R9KSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnBkUGFJbmZvID0gcmVzLmRhdGEucmVjb3Jkc1swXQ0KICAgICAgICB0aGlzLnBkUGFJbmZvLnBkQ29kZSA9IHRoaXMucHJvZHVjdC5wZENvZGUNCiAgICAgICAgdGhpcy5kaWFsb2dUYWJsZVZpc2libGUyID0gdHJ1ZQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG9wZW4oKSB7DQogICAgICBsZXQgZGF0YSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5ydWxlQXR0cmlidXRlOw0KICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgcXVlcnlBbGxQYSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoeyJwZFBhQ29kZSI6IGRhdGEucnVsZVBvc0l0ZW19KSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMucGRQYUluZm8gPSByZXMuZGF0YS5yZWNvcmRzWzBdDQogICAgICAgICAgdGhpcy5wZFBhSW5mby5wZENvZGUgPSB0aGlzLnByb2R1Y3QucGRDb2RlDQogICAgICAgICAgdGhpcy5kaWFsb2dUYWJsZVZpc2libGUyID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZS5wYXJhbXMucnVsZUF0dHJpYnV0ZSA9IG51bGw7DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBiYWNrVG9NZW51KCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfkuqflk4Hop4TliJnorqLmraPkuLvpobUnLCBwYXJhbXM6IHt9fSkNCiAgICB9LA0KICAgIGJhY2tUb01lbnUyKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfkuqflk4HlhazlvI/orqLmraPkuLvpobUnLCBwYXJhbXM6IHt9fSkNCiAgICB9LA0KDQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/views/product-revision/pd-formula-rev/pd-preservation-formula-rev","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <!--关联公式-->\r\n    <div v-if=\"!ruleRevisionShowINfo\">\r\n      <cus-page-title-back :label=\"$t('i18nView.pdFormulaQuery')\" @backTo=\"backToMenu\"/>\r\n    </div>\r\n    <div v-if=\"productCalcRevisionShowINfo\">\r\n      <cus-page-title-back :label=\"$t('i18nView.pdFormulaQuery')\" @backTo=\"backToMenu2\"/>\r\n    </div>\r\n    <!-- 产品信息 -->\r\n    <el-form ref=\"form\" :model=\"product\" label-width=\"auto\">\r\n      <el-row :gutter=\"20\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n        <el-col :span=\"6\">\r\n          <el-form-item :label=\"$t('productCalcRevisionQuery.product')\">\r\n            <el-tag type=\"info\">{{ product.pdCode + \" : \" + product.pdName }}</el-tag>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item :label=\"$t('productCalcRevisionQuery.pdEdition')\">\r\n            <el-tag type=\"info\">{{ product.pdEdition }}</el-tag>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\"></el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <!--新增保全规则-->\r\n    <el-form ref=\"pdpaForm\" :model=\"pdpaForm\" label-width=\"auto\">\r\n      <el-row :gutter=\"20\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productCalcRevisionQuery.securityProject')\">\r\n            <el-select v-model=\"pdpaForm.securityProject\" @change=\"\">\r\n              <el-option v-for=\"(item,index) in pdOptions\" :key=\"index\" :label=\"item.paCode+':'+item.paName\"\r\n                         :value=\"item.paCode\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productCalcRevisionQuery.countformulaType')\" prop=\"formulaType\">\r\n            <cus-select v-model=\"pdpaForm.formulaType\" codetype=\"ruleBusinessDetailClass\"\r\n                        filter=\"1$43$44$45$46$47$48$49\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"10\"></el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"6\">\r\n        <el-button icon=\"el-icon-circle-plus\" size=\"small\" type=\"primary\" @click=\"goRule\">\r\n          {{ $t('productCalcRevisionQuery.relatedCalc') }}\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <cus-table-title :label=\"$t('productCalcRevisionQuery.pdCalc')\"></cus-table-title>\r\n    <el-table :data=\"configsCalc\" :span=\"8\" border element-loading-text=\"Loading\" fit highlight-current-row size=\"mini\"\r\n              @row-click=\"chooseOneRowConfigs2\">\r\n      <el-table-column :label=\"$t('table.select')\" width=\"50\"  align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group v-model=\"selectedDef1\">\r\n            <span><el-radio :label=\"scope.row\" @change=\"selectedFormulaChanged\">{{ '' }}</el-radio></span>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdgenlPaInfo.details')\" align=\"center\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"small\" type=\"text\" @click=\"showRule(scope.row.code)\">>></el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productCalcRevisionQuery.projectCode')\" align=\"center\"\r\n                       prop=\"rulePosItem\" sortable>\r\n        <template v-slot=\"scope\">{{ scope.row.rulePosItem + \":\" + scope.row.pdPaName }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.formulaCode')\" align=\"center\"\r\n                       prop=\"code\" sortable></el-table-column>\r\n      <el-table-column :label=\"$t('productCalcRevisionQuery.calcSubclass')\" align=\"center\"\r\n                       prop=\"ruleBussModuDeta\" sortable>\r\n        <template v-slot=\"scope\">{{ scope.row.ruleBussModuDeta | filter_ruleBussModuDeta }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productCalcRevisionQuery.calcDescription')\" align=\"center\"\r\n                       prop=\"description\"\r\n      ></el-table-column>\r\n      <el-table-column :label=\"$t('pdgenlPaInfo.operating')\" align=\"center\" prop=\"\" width=\"100\">\r\n        <template v-slot=\"scope\">\r\n          <cus-del-btn @ok=\"removeRule(scope.row)\"></cus-del-btn>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--关联规则-->\r\n    <el-dialog v-if=\"dialogTableVisible2\" v-dialog-drag :close-on-click-modal=\"false\" :show-close=\"false\"\r\n               :visible.sync=\"dialogTableVisible2\"\r\n               center modal-append-to-body width=\"75%\">\r\n      <pdgenlPaFormula :pdPaInfo=\"pdPaInfo\" Mark=\"pd\" markRule=\"markRule\"\r\n                       @closeDialogFormula=\"closeDialogFormula\"></pdgenlPaFormula>\r\n    </el-dialog>\r\n\r\n    <!-- 公式查看弹窗 -->\r\n    <cus-rule-modify :flag=\"ruleView.flag\" :ruleCode=\"ruleView.ruleCode\" :ruleModifyClosed=\"ruleMakeClosed\"\r\n                     :ruleType=\"'2'\" :visible=\"ruleView.visible\"></cus-rule-modify>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {queryCalcByPdCode, queryPaByPdCode, uploadPaTable} from '@/api/basicinfo/productRuleRevisionQuery'\r\nimport {queryAllPa} from '@/api/basicinfo/pdgenlPaInfo'\r\nimport pdgenlPaFormula from \"@/views/general-config/gen-paInfo-conf/pdgenlPaFormula/index\"\r\nimport {deleteRuleOrCalc} from \"@/api/basicinfo/poInfoDesign\"\r\n\r\nlet _this\r\nexport default {\r\n  name: 'productCalcRevisionQuery',\r\n  filters: {\r\n    filter_ruleBussModuDeta(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    },\r\n  },\r\n  components: {\r\n    pdgenlPaFormula\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      ruleView: {\r\n        visible: false,\r\n        flag: '',\r\n        ruleCode: ''\r\n      },\r\n      ruleRevisionShowINfo: true,\r\n      productCalcRevisionShowINfo: false,\r\n      product: {\r\n        pdCode: '',\r\n        pdName: '',\r\n        pdEdition: ''\r\n      },\r\n      pdpaForm: {\r\n        securityProject: '',\r\n        rulesSubclass: '',\r\n        formulaType: '',\r\n      },\r\n      fileList: [],\r\n      pdPaInfo: {\r\n        id: '',\r\n        pdPaCode: '',\r\n        pdPaName: '',\r\n        pdAttr: '',\r\n        pdPaType: [],\r\n        pdCode: '',\r\n        pdgenlPdPaDesTypeList: [],\r\n      },\r\n      dialogTableVisible2: false,\r\n      dialogVisibleUpload: false,\r\n      tableData_formulaParam: [],\r\n      configsCalc: [],\r\n      columns1: [],\r\n      pdOptions: [],\r\n      selectedDef1: {},\r\n      //检验规则\r\n      rules: {},\r\n    }\r\n  },\r\n  created() {\r\n    this.productCalcRevisionShowINfo = this.$route.query.productCalcRevisionShowINfo\r\n    this.ruleRevisionShowINfo = this.$route.query.ruleRevisionShowINfo\r\n    if (!this.ruleRevisionShowINfo) {\r\n      this.ruleRevisionShowINfo = true;\r\n    }\r\n    if (!this.productCalcRevisionShowINfo) {\r\n      this.productCalcRevisionShowINfo = false;\r\n    }\r\n    this.product = this.getPdData()\r\n    this.queryPaByPdCode()\r\n    this.queryCalcByPdCode()\r\n    this.open()\r\n  },\r\n  methods: {\r\n    /*根据产品查询当前产品下的所有保全项目*/\r\n    queryPaByPdCode() {\r\n      queryPaByPdCode(this.buildRequestData(this.product)).then(res => {\r\n        this.pdOptions = []\r\n        for (let data of res.data) {\r\n          let option = {paCode: '', paName: ''};\r\n          option.paCode = data.paCode;\r\n          option.paName = data.paName;\r\n          this.pdOptions.push(option);\r\n        }\r\n      })\r\n    },\r\n    deleteFormulaParam(row) {\r\n      this.tableData_formulaParam.splice(this.tableData_formulaParam.indexOf(row), 1)\r\n    },\r\n    downloadPaTable() {\r\n      if (Object.keys(this.selectedDef1).length === 0) {\r\n        this.notifyError(this.$t('pdtempPdCv.pleaseSelectFormula'))\r\n        return\r\n      }\r\n      let columns = []\r\n      for (let i = 0; i < this.columns1.length; i++) {\r\n        columns.push({\r\n          title: this.columns1[i].label,\r\n          key: String(i)\r\n        })\r\n      }\r\n      this.export2Excel(columns, this.tableData_formulaParam, '公式数值_' + this.formatDate(new Date(), 'yyyy-MM-dd_hh：mm：ss'))\r\n    },\r\n    uploadPaTable() {\r\n      if (this.fileList.length === 0) {\r\n        this.notifyError(this.$t('pdtempPdCv.pleaseSelectFile'))\r\n      } else {\r\n        const form = document.getElementById(\"uploadForm\")\r\n        let formData = new FormData(form)\r\n        uploadPaTable(formData).then(() => {\r\n          this.notifySuccess(this.$t('pdtempPdCv.uploadSuccessfully'))\r\n          this.$refs.upload.clearFiles()\r\n          this.fileList = []\r\n        })\r\n      }\r\n    },\r\n    toUploadPaTable() {\r\n      if (Object.keys(this.selectedDef1).length === 0) {\r\n        this.notifyError(this.$t('pdtempPdCv.pleaseSelectFormula'))\r\n        return\r\n      }\r\n      this.dialogVisibleUpload = true\r\n    },\r\n    //文件状态改变时的钩子，添加文件、上传成功和上传失败时都会被调用\r\n    handleChange(file, fileList) {\r\n      //判断文件大小\r\n      if (!(file.size / 1024 / 1024 < 10)) {\r\n        this.notifyError('上传文件大小不能超过 10MB!')\r\n        fileList.splice(fileList.indexOf(file), 1)\r\n        return\r\n      }\r\n      this.fileList = fileList;\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList;\r\n    },\r\n    removeRule(row) {\r\n      let data = {\r\n        ruleTemplateAttributeId: row.id,\r\n        product: this.product\r\n      }\r\n      deleteRuleOrCalc(this.buildRequestData(data)).then(() => {\r\n        this.notifySuccess('删除成功')\r\n        queryCalcByPdCode(this.buildRequestData(this.product)).then(res => {\r\n          this.configsCalc = res.data\r\n        })\r\n      })\r\n    },\r\n    /*根据产品查询当前产品下的所有保全项目关联的公式*/\r\n    queryCalcByPdCode() {\r\n      queryCalcByPdCode(this.buildRequestData(this.product)).then(res => {\r\n        this.configsCalc = res.data\r\n      })\r\n    },\r\n    selectedFormulaChanged() {\r\n      this.ruleView.flag = '2'\r\n      this.ruleView.ruleCode = this.selectedDef1.code\r\n      this.ruleView.visible = true\r\n    },\r\n    ruleMakeClosed() {\r\n      this.ruleView.visible = false\r\n      this.selectedDef1 = {}\r\n    },\r\n    showRule(code) {\r\n      this.ruleView.flag = '1'\r\n      this.ruleView.ruleCode = code\r\n      this.ruleView.visible = true\r\n    },\r\n    /* 刷新重置选择的保全项目 */\r\n    refreshSelOptions() {\r\n      this.selectedDef1 = {};\r\n      this.columns1 = []\r\n      this.tableData_formulaParam = []\r\n    },\r\n    /*取消选中一行规则*/\r\n    chooseOneRowConfigs2(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedDef1.id) {\r\n          this.selectedDef1 = {};\r\n          this.columns1 = []\r\n          this.tableData_formulaParam = []\r\n        }\r\n      }\r\n    },\r\n    closeDialogFormula() {\r\n      this.dialogTableVisible2 = false\r\n      queryCalcByPdCode(this.buildRequestData(this.product)).then(res => {\r\n        this.configsCalc = res.data\r\n      })\r\n    },\r\n    goRule() {\r\n      if (!this.pdpaForm.securityProject) {\r\n        this.notifyError(this.$t('productRuleRevisionQuery.toRule'))\r\n        return\r\n      }\r\n      queryAllPa(this.buildRequestData({\"pdPaCode\": this.pdpaForm.securityProject})).then(res => {\r\n        this.pdPaInfo = res.data.records[0]\r\n        this.pdPaInfo.pdCode = this.product.pdCode\r\n        this.dialogTableVisible2 = true\r\n      })\r\n    },\r\n    open() {\r\n      let data = this.$route.params.ruleAttribute;\r\n      if (data) {\r\n        queryAllPa(this.buildRequestData({\"pdPaCode\": data.rulePosItem})).then(res => {\r\n          this.pdPaInfo = res.data.records[0]\r\n          this.pdPaInfo.pdCode = this.product.pdCode\r\n          this.dialogTableVisible2 = true;\r\n          this.$route.params.ruleAttribute = null;\r\n        })\r\n      }\r\n    },\r\n    backToMenu() {\r\n      this.$router.push({name: '产品规则订正主页', params: {}})\r\n    },\r\n    backToMenu2() {\r\n      this.$router.push({name: '产品公式订正主页', params: {}})\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}