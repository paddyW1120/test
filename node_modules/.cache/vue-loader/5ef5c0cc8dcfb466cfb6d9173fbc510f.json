{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\income-def\\index.vue?vue&type=style&index=0&id=0c5382c3&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\income-def\\index.vue","mtime":1609847106882},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoNCg0KDQouZWwtcm93IHsNCiAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KfQ0KDQouZGVtby10YWJsZS1leHBhbmQgew0KICBmb250LXNpemU6IDA7DQp9DQoNCi5kZW1vLXRhYmxlLWV4cGFuZCBsYWJlbCB7DQogIHdpZHRoOiAxNTBweDsNCiAgY29sb3I6ICM5OWE5YmY7DQp9DQoNCi5kZW1vLXRhYmxlLWV4cGFuZCAuZWwtZm9ybS1pdGVtIHsNCiAgbWFyZ2luLXJpZ2h0OiAwOw0KICBtYXJnaW4tYm90dG9tOiAwOw0KICB3aWR0aDogNTAlOw0KfQ0KDQouZWwtdGFibGUtY29sdW1uIHsNCiAgd2lkdGg6IDEyMHB4Ow0KfQ0KDQouc2hvd0RpdiB7DQogIHdpZHRoOiA5MCU7DQogIGhlaWdodDogMTAwJTsNCiAgbWFyZ2luLXRvcDogLTQwcHg7DQogIG1hcmdpbi1sZWZ0OiAtNDBweDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBiYWNrZ3JvdW5kOiAjZmZmZmZmMDA7DQogIHotaW5kZXg6IDk5OTsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAk/CA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-framework-def/pd-structure-def/income-def","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title :first=\"true\" :label=\"$t('pdtempPdInv.firstTitle')\"></cus-page-title>\r\n    <div :class=\"{ 'showDiv': this.showPageFlag == 1 }\"></div>\r\n    <cus-product-info></cus-product-info>\r\n    <el-form ref=\"form\" :disabled=\"!!invCode\" :model=\"form\" :rules=\"rules\" label-position=\"right\" label-width=\"160px\">\r\n      <cus-filter-wraper>\r\n        <div>\r\n          <el-button size=\"small\" type=\"text\" @click=\"isShowQuick\" dialog-disable=\"disable\">{{ $t('pdtempPdInv.quick_inv') }}<i\r\n            :class=\"quickicon\"></i>\r\n          </el-button>\r\n        </div>\r\n        <div>\r\n          <el-collapse-transition>\r\n            <div v-show=\"quickshow\">\r\n              <cus-form-title :first=\"true\" :label=\"$t('pdtempPdInv.profit_library')\"></cus-form-title>\r\n              <el-form ref=\"profitParams\" :model=\"params\" :rules=\"productrules\" label-width=\"auto\">\r\n                <el-row :gutter=\"10\">\r\n                  <el-col :span=\"6\">\r\n                    <el-form-item :label=\"$t('pay_def.finelinesRegion')\" prop=\"finelinesRegion\">\r\n                      <cus-select v-model=\"params.finelinesRegion\" @change=\"findReferenceProducts\"\r\n                                  :codetype=\"'ProductCategory'\"></cus-select>\r\n                    </el-form-item>\r\n                  </el-col>\r\n                  <el-col :span=\"6\">\r\n                    <el-form-item :label=\"$t('pdtempPdInv.product_id')\" prop=\"eq_pdInfoId\">\r\n                      <el-select v-model=\"params.product\"\r\n                                 :placeholder=\"$t('pay_def.message.typeRegion_finelinesRegion_first')\" clearable\r\n                                 filterable>\r\n                        <el-option v-for=\"product in productList\" :label=\"product.pdCode + ':' + product.pdName\"\r\n                                   :value=\"product.id\"></el-option>\r\n                      </el-select>\r\n                    </el-form-item>\r\n                  </el-col>\r\n                  <el-col :span=\"6\">\r\n                    <el-button size=\"small\" icon=\"el-icon-search\"\r\n                               type=\"primary\"\r\n                               @click=\"handleSearchInCurrentProduct\">\r\n                      {{ $t('table.search') }}\r\n                    </el-button>\r\n                  </el-col>\r\n                </el-row>\r\n                <div>\r\n                  <cus-table-title :label=\"$t('pdtempPdInv.profit')\"/>\r\n                  <el-table :data=\"unRelationInvTable\" border class=\"wraper-table\" size=\"mini\"\r\n                            @row-click=\"rowClick_inv\">\r\n\r\n                    <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"60px\">\r\n                      <template v-slot=\"scope\">\r\n                        {{ initTableIndex('page', scope.$index) }}\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column :label=\"$t('pdtempPdInv.details')\" type=\"expand\">\r\n                      <template slot-scope=\"props\">\r\n                        <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n                          <el-form-item :label=\"$t('i18nView.pdCode')\">\r\n                            <span>{{ props.row.pdCode }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('i18nView.pdName')\">\r\n                            <span>{{ props.row.pdName }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('pdtempPdInv.pd_bonus_mode')\">\r\n                            <span>{{ form.pdBonusMode | filter_pdBonusMode }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('pdtempPdInv.get_pd_bonus_dw_mode')\">\r\n                            <span>{{ form.pdBonusDwMode | filter_getPdBonusDwMode }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('pdtempPdInv.get_way')\">\r\n                            <span>{{ props.row.getWay | filter_getWay }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('pdtempPdInv.get_frequency')\">\r\n                            <span>{{ props.row.getFrequency | filter_getFrequency }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('pdtempPdInv.pdInvCalcCode')\">\r\n                            <span>{{ props.row.pdInvCalcCode }}</span>\r\n                          </el-form-item>\r\n                          <el-form-item :label=\"$t('pdtempPdInv.pdSrvlDwCdRule')\">\r\n                            <span>{{ props.row.pdInvDwCdRuleCode }}</span>\r\n                          </el-form-item>\r\n                        </el-form>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column :filter-method=\"filterHandler\" :filters=\"feeTypeFilters2\"\r\n                                     :label=\"$t('pdtempPdInv.pd_inv_code')\"\r\n                                     align=\"center\" prop=\"pdInvCode\" sortable width=\"105px\">\r\n                      <template v-slot=\"scope\">{{ scope.row.pdInvCode }}</template>\r\n                    </el-table-column>\r\n                    <el-table-column :label=\"$t('pdtempPdInv.pd_inv_name')\" align=\"center\"\r\n                                     prop=\"pdInvName\"></el-table-column>\r\n                    <el-table-column :filter-method=\"filterHandler\" :filters=\"feeTypeFilters1\"\r\n                                     :label=\"$t('pdtempPdInv.pd_inv_type')\"\r\n                                     align=\"center\" prop=\"pdInvType\" sortable width=\"105px\">\r\n                      <template v-slot=\"scope\">{{ scope.row.pdInvType | filter_getType }}</template>\r\n                    </el-table-column>\r\n                    <el-table-column :label=\"$t('pdtempPdInv.pd_inv_start_period')\" align=\"center\" prop=\"pdInvStartPeriod\">\r\n                      <template v-slot=\"scope\">{{ scope.row.pdInvStartPeriod }}{{ scope.row.pdInvStartPeriodUnit |filter_pdsbnftdy }}</template>\r\n                    </el-table-column>\r\n                    <el-table-column :label=\"$t('pdtempPdInv.pd_inv_end_period')\" align=\"center\" prop=\"pdInvEndPeriod\">\r\n                      <template v-slot=\"scope\">{{ scope.row.pdInvEndPeriod }}{{ scope.row.pdInvEndPeriodUnit |filter_pdsbnftdy }}</template>\r\n                    </el-table-column>\r\n                    <el-table-column :label=\"$t('pdtempPdInv.pd_inv_guar_period')\" align=\"center\" prop=\"pdInvGuarPeriod\">\r\n                      <template v-slot=\"scope\">{{ scope.row.pdInvGuarPeriod }}{{ scope.row.pdInvGuarPeriodUnit |filter_pdsbnftdy }}</template>\r\n                    </el-table-column>\r\n                    <el-table-column :label=\"$t('pdtempPdInv.operation')\" align=\"center\" width=\"120px\">\r\n                      <template slot-scope=\"scope\">\r\n                        <el-button size=\"small\" type=\"primary\" @click=\"copyInv(scope.row)\"><i\r\n                          class=\"el-icon-document-copy\"></i>{{ $t('pdtempPdInv.invCopy') }}\r\n                        </el-button>\r\n                      </template>\r\n                    </el-table-column>\r\n                  </el-table>\r\n                  <cus-pagination ref=\"page\" v-model=\"unRelationInvTable\" :pageSize=\"5\" :params=\"params\"\r\n                                  url=\"/pdtemp-pd-inv/base/getInvConn\"/>\r\n                  <!--<el-row>\r\n                      <el-button  size=\"small\" :disabled=\"pageFlag.copyRadio\" @click=\"copyInv\" type=\"primary\">\r\n                        <i class=\"el-icon-document-copy\"></i>{{$t('pdtempPdInv.copy_inv') }}\r\n                      </el-button>\r\n                      <el-button  size=\"small\" :disabled=\"pageFlag.copyRadio\" @click=\"likeInv\" type=\"primary\">\r\n                        <i class=\"el-icon-s-help\"></i>{{$t('pdtempPdInv.reference_inv') }}\r\n                      </el-button>\r\n                  </el-row>-->\r\n                </div>\r\n              </el-form>\r\n            </div>\r\n          </el-collapse-transition>\r\n        </div>\r\n      </cus-filter-wraper>\r\n      <div>\r\n        <cus-table-title :label=\"$t('pdtempPdInv.product_inv')\"/>\r\n        <el-table ref=\"invTable\" :data=\"invTable\" align=\"center\" border class=\"wraper-table\"\r\n                  element-loading-text=\"Loading\" fit highlight-current-row size=\"mini\" @row-click=\"rowClick_invbnft\">\r\n          <el-table-column :label=\"$t('pdtempPdInv.selection')\" align=\"center\" width=\"60px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-radio-group v-model=\"selectedInvBnft\" @change=\"selectedInvBnftChanged\">\r\n                <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n              </el-radio-group>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.details')\" type=\"expand\">\r\n            <template slot-scope=\"props\">\r\n              <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n                <el-form-item :label=\"$t('pdtempPdInv.pd_bonus_mode')\">\r\n                  <span>{{ form.pdBonusMode | filter_pdBonusMode }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdtempPdInv.get_pd_bonus_dw_mode')\">\r\n                  <span>{{ form.pdBonusDwMode | filter_getPdBonusDwMode }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdtempPdInv.get_way')\">\r\n                  <span>{{ props.row.getWay | filter_getWay }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdtempPdInv.get_frequency')\">\r\n                  <span>{{ props.row.getFrequency | filter_getFrequency }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdtempPdInv.pdInvCalcCode')\">\r\n                  <span>{{ props.row.pdInvCalcCode }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdtempPdInv.pdSrvlDwCdRule')\">\r\n                  <span>{{ props.row.pdInvDwCdRuleCode }}</span>\r\n                </el-form-item>\r\n              </el-form>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"60\"></el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.pd_inv_code')\" align=\"center\" prop=\"pdInvCode\"\r\n                           sortable>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.pd_inv_name')\" align=\"center\" prop=\"pdInvName\"></el-table-column>\r\n          <el-table-column :filter-method=\"filterHandler\" :filters=\"feeTypeFilters\"\r\n                           :label=\"$t('pdtempPdInv.pd_inv_type')\"\r\n                           align=\"center\" prop=\"pdInvType\" sortable width=\"120px\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdInvType | filter_getType }}</template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.pd_inv_start_period')\" align=\"center\" prop=\"pdInvStartPeriod\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdInvStartPeriod }}{{ scope.row.pdInvStartPeriodUnit |filter_pdsbnftdy }}</template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.pd_inv_end_period')\" align=\"center\" prop=\"pdInvEndPeriod\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdInvEndPeriod }}{{ scope.row.pdInvEndPeriodUnit |filter_pdsbnftdy }}</template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.pd_inv_guar_period')\" align=\"center\" prop=\"pdInvGuarPeriod\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdInvGuarPeriod }}{{ scope.row.pdInvGuarPeriodUnit |filter_pdsbnftdy }}</template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdInv.operation')\" align=\"center\" width=\"100px\">\r\n            <template slot-scope=\"scope\">\r\n              <cus-del-btn v-auth=\"'pdtemp-pd-inv:delete'\"\r\n                           @ok=\"handleDeleteInv\"></cus-del-btn>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button v-if=\"showMore\" size=\"small\" type=\"text\" @click=\"isShowMore\">\r\n          {{ $t('pdtempPdInv.inv_more') }}\r\n          <i class=\"el-icon-arrow-down\"></i>\r\n        </el-button>\r\n        <el-button v-if=\"showBack\" size=\"small\" type=\"text\" @click=\"isShowBack\">\r\n          {{ $t('pdtempPdInv.inv_retract') }}\r\n          <i class=\"el-icon-arrow-up\"></i>\r\n        </el-button>\r\n      </div>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <cus-form-title :first=\"true\" :label=\"$t('pdtempPdInv.inv_definition')\"></cus-form-title>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"16\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_name')\" prop=\"form_inv.pdInvName\">\r\n            <el-input v-model=\"form.form_inv.pdInvName\" clearable maxlength=\"60\" show-word-limit></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n           <el-form-item :label=\"$t('pdtempPdInv.pd_inv_type')\" prop=\"form_inv.pdInvType\">\r\n            <cus-select v-model=\"form.form_inv.pdInvType\" :codetype=\"'pdinvtype'\" @change=\"changeAmountFlag\"\r\n                        :filter=\"finelinesdesignTypeFilter\" :placeholder=\"$t('pdtempPdInv.message.please_check')\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div v-if=\"pageFlag.amountFlag\">\r\n        <el-row>\r\n          <el-col :span=\"16\">\r\n            <el-form-item :label=\"$t('pdtempPdInv.get_pd_bonus_dw_mode')\">\r\n              <cus-checkbox v-model=\"form.pdBonusDwMode\" :codetype=\"'DividendCollectionType'\"\r\n                            :disabled=\"pageFlag.bonusMode\"\r\n                            :filter=\"finelinesRegionFilterBonus\"></cus-checkbox>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('pdtempPdInv.pd_bonus_mode')\">\r\n              <cus-radio v-model=\"form.pdBonusMode\" :codetype=\"'BonusType'\" :disabled=\"pageFlag.bonusMode\">\r\n              </cus-radio>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n        </el-row>\r\n      </div>\r\n       <el-row>\r\n        <!--        <el-col :span=\"8\">\r\n                  <el-form-item  v-if=\"false\" :label=\"$t('pdtempPdInv.pd_duty_type')\" prop=\"form_inv.pdInvDutyType\">\r\n                    <cus-select :codetype=\"'pdsbnftdutytype'\" :filter=\"finelinesRegionFilterInvType\"\r\n                                :placeholder=\"$t('pdtempPdInv.message.please_check')\"\r\n                                style=\"width: 220px\" v-model=\"form.form_inv.pdInvDutyType\"></cus-select>\r\n                  </el-form-item>\r\n                </el-col>-->\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_start_period')\">\r\n            <el-input v-model=\"form.form_inv.pdInvStartPeriod\" :placeholder=\"$t('pdtempPdInv.message.please_input')\"\r\n                      type=\"number\">\r\n              <cus-select slot=\"append\" v-model=\"form.form_inv.pdInvStartPeriodUnit\" :codetype=\"'pdsbnftdy'\"\r\n                          class=\"cst\"></cus-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_end_period')\">\r\n            <el-input v-model=\"form.form_inv.pdInvEndPeriod\"\r\n                      :placeholder=\"$t('pdtempPdInv.message.please_input')\" type=\"number\">\r\n              <cus-select slot=\"append\" v-model=\"form.form_inv.pdInvEndPeriodUnit\" :codetype=\"'pdsbnftdy'\"\r\n                          class=\"cst\"></cus-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_guar_period')\">\r\n            <el-input v-model=\"form.form_inv.pdInvGuarPeriod\" :placeholder=\"$t('pdtempPdInv.message.please_input')\"\r\n                       type=\"number\">\r\n              <cus-select slot=\"append\" v-model=\"form.form_inv.pdInvGuarPeriodUnit\" :codetype=\"'pdsbnftdy'\"\r\n                          class=\"cst\"></cus-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <!--   <el-col :span=\"8\">\r\n             <el-form-item :label=\"$t('pdtempPdInv.pd_inv_recl_flag')\">\r\n               <el-switch\r\n                          active-value=\"Y\"\r\n                          inactive-value=\"N\"\r\n                          v-model=\"form.form_inv.pdInvReclFlag\">\r\n               </el-switch>\r\n             </el-form-item>\r\n\r\n           </el-col>-->\r\n      </el-row>\r\n      <el-row>\r\n        <el-col>\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_start_date_rule')\" prop=\"form_inv.pdInvStartDateRule\">\r\n            <cus-radio v-model=\"form.form_inv.pdInvStartDateRule\"\r\n                       :changeMethod=\"changeRuleSE(form.form_inv.pdInvStartDateRule)\"\r\n                       :codetype=\"'pdsbnftstartrule'\" :isRequired=\"true\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col>\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_start_date_mode')\" prop=\"form_inv.pdInvStartDateMode\">\r\n            <cus-radio v-model=\"form.form_inv.pdInvStartDateMode\" :codetype=\"'pdsbnftstarttype'\"\r\n                        :placeholder=\"$t('pdtempPdInv.message.please_check')\"\r\n                        :isRequired=\"true\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col>\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_end_date_rule')\" prop=\"form_inv.pdInvEndDateRule\">\r\n            <cus-radio v-model=\"form.form_inv.pdInvEndDateRule\" :codetype=\"'pdsbnftendrule'\"\r\n                       :isRequired=\"true\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_end_date_mode')\" prop=\"form_inv.pdInvEndDateMode\">\r\n            <cus-radio v-model=\"form.form_inv.pdInvEndDateMode\" :codetype=\"'pdsbnftendtype'\"\r\n                        :placeholder=\"$t('pdtempPdInv.message.please_check')\"\r\n                        :isRequired=\"true\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.get_way')\" prop=\"form_atrsinfo_f.pdatrsval\">\r\n            <cus-checkbox v-model=\"form.form_atrsinfo_f.pdatrsval\" :codetype=\"'pdsbnftgettype'\"></cus-checkbox>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n      </el-row>\r\n      <el-row>\r\n      <el-col :span=\"24\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.get_frequency')\" prop=\"form_atrsinfo_p.pdatrsval\">\r\n            <cus-checkbox v-model=\"form.form_atrsinfo_p.pdatrsval\" :codetype=\"'pdsbnftgettimes'\"></cus-checkbox>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-form-item style=\"float: right\">\r\n          <el-button v-if=\"selectedInvBnft.id\" v-auth=\"'pdtemp-pd-inv:update'\" icon=\"el-icon-success\" size=\"small\" dialog-disable=\"disable\"\r\n                     style=\"margin-right: 5px\"\r\n                     type=\"primary\"\r\n                     @click=\"handleUpdateInv\">{{ $t('pdtempPdInv.inv_update') }}\r\n          </el-button>\r\n          <el-button v-if=\"!selectedInvBnft.id\" v-auth=\"'pdtemp-pd-inv:add'\" icon=\"el-icon-success\" size=\"small\" dialog-disable=\"disable\"\r\n                     style=\"margin-right: 5px\"\r\n                     type=\"primary\"\r\n                     @click=\"handleAddInv\">{{ $t('pdtempPdInv.inv_add') }}\r\n          </el-button>\r\n\r\n          <el-button icon=\"el-icon-refresh el-icon--left\" size=\"small\" type=\"primary\" @click=\"clearFormInv\" dialog-disable=\"disable\">\r\n            {{ $t('pdtempPdInv.inv_refresh') }}\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-row>\r\n\r\n      <cus-form-title :label=\"$t('pdtempPdInv.profitRulesFormulaDef')\"></cus-form-title>\r\n      <el-row :gutter=\"100\" class=\"row-bg\" justify=\"space-between\" type=\"flex\">\r\n        <el-col :span=\"6\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pd_inv_code')\">\r\n            <el-tag type=\"info\">{{ form.form_inv.pdInvCode || form_invAdd.pdInvCode }}</el-tag>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"9\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pdInvCalcCode')\">\r\n            <el-input v-model=\"form.form_inv.pdInvCalcCode\" readonly >\r\n              <el-tooltip\r\n                slot=\"suffix\"\r\n                :content=\"invCode?$t('pay_def.message.readonly'):(Object.keys(selectedInvBnft).length===0&&Object.keys(form_invAdd).length===0?$t('pdtempPdInv.message.pleaseSelectInv'):'')\"\r\n                :disabled=\"!invCode&&(Object.keys(selectedInvBnft).length>0||Object.keys(form_invAdd).length>0)\"\r\n                effect=\"dark\" placement=\"top\">\r\n                <svg-icon\r\n                  :style=\"{cursor:!invCode&&(Object.keys(selectedInvBnft).length>0||Object.keys(form_invAdd).length>0)?'pointer':'not-allowed'}\"\r\n                  icon-class=\"calc\"\r\n                  style=\"color: #606266;font-size: 18px\"\r\n                  @click=\"!invCode && (Object.keys(selectedInvBnft).length>0||Object.keys(form_invAdd).length>0) && goClicks(3,32)\"/>\r\n              </el-tooltip>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"9\">\r\n          <el-form-item :label=\"$t('pdtempPdInv.pdSrvlDwCdRuleCode')\">\r\n            <el-input v-model=\"form.form_inv.pdInvDwCdRuleCode\" readonly >\r\n              <el-tooltip\r\n                slot=\"suffix\"\r\n                :content=\"invCode?$t('pay_def.message.readonly'):(Object.keys(selectedInvBnft).length===0&&Object.keys(form_invAdd).length===0?$t('pdtempPdInv.message.pleaseSelectInv'):'')\"\r\n                :disabled=\"!invCode&&(Object.keys(selectedInvBnft).length>0||Object.keys(form_invAdd).length>0)\"\r\n                effect=\"dark\" placement=\"top\">\r\n                <i\r\n                  :style=\"{cursor:!invCode&&(Object.keys(selectedInvBnft).length>0||Object.keys(form_invAdd).length>0)?'pointer':'not-allowed'}\"\r\n                  class=\"el-icon-monitor\"\r\n                  style=\"color: #606266;font-size: 18px\"\r\n                  @click=\"!invCode && (Object.keys(selectedInvBnft).length>0||Object.keys(form_invAdd).length>0) && goRules('3','7')\"></i>\r\n              </el-tooltip>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <br/>\r\n      <br/>\r\n      <el-row v-if=\"false\">\r\n        <el-button icon=\"el-icon-monitor\" size=\"small\" type=\"primary\" @click=\"goRules('3',undefined)\">\r\n          收益规则定义\r\n        </el-button>\r\n      </el-row>\r\n      <br/>\r\n    </el-form>\r\n    <!-- 弹窗（规则定义） -->\r\n    <el-dialog v-if=\"dialogRulesShow.invRules\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :visible.sync=\"dialogRulesShow.invRules\"\r\n               center width=\"80%\" @close=\"changeDialogVisible_invRules(false)\">\r\n      <invRules :calculationFormulaType=\"calculationFormulaType\"\r\n                :global=\"global\" :guaranteeDetails=\"guaranteeDetails\"\r\n                :pdUwSiTypeDtOptions=\"pdUwSiTypeDtOptions\"\r\n                :pdUwSiTypeOptions=\"pdUwSiTypeOptions\" @changeDialogVisible_invRules=\"changeDialogVisible_invRules\"\r\n                @changeDialogVisible_invRulesSelect=\"changeDialogVisible_invRulesSelect\"></invRules>\r\n      <!-- 弹窗（规则选择） -->\r\n      <el-dialog v-if=\"dialogRulesShow.invRulesSelect\" v-dialog-drag :close-on-click-modal=\"false\"\r\n                 :visible.sync=\"dialogRulesShow.invRulesSelect\" append-to-body\r\n                 center width=\"70%\" @close=\"changeDialogVisible_invRulesSelect(false)\">\r\n        <invRulesSelect :calculationFormulaType=\"calculationFormulaType\" :guaranteeDetails=\"guaranteeDetails\"\r\n                        :pdUwSiTypeDtOptions=\"pdUwSiTypeDtOptions\" :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                        @changeDialogVisible_invRulesSelect=\"changeDialogVisible_invRulesSelect\"></invRulesSelect>\r\n      </el-dialog>\r\n    </el-dialog>\r\n    <!-- 弹窗（公式定义） -->\r\n    <el-dialog v-if=\"dialogShow.invAmountFormula\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :visible.sync=\"dialogShow.invAmountFormula\"\r\n               center width=\"80%\" @close=\"changeDialogVisible_invFormula(false)\">\r\n      <invAmountFormula :calculationFormulaType=\"calculationFormulaType\"\r\n                        :guaranteeDetails=\"guaranteeDetails\"\r\n                        :pdUwSiTypeDtOptions=\"pdUwSiTypeDtOptions\"\r\n                        :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                        @changeDialogVisible_invFormula=\"changeDialogVisible_invFormula\"\r\n                        @changeDialogVisible_invFormulaSelect=\"changeDialogVisible_invFormulaSelect\"></invAmountFormula>\r\n      <!-- 弹窗（公式选择） -->\r\n      <el-dialog v-if=\"dialogShow.invAmountFormulaSelect\" v-dialog-drag :close-on-click-modal=\"false\"\r\n                 :visible.sync=\"dialogShow.invAmountFormulaSelect\"\r\n                 append-to-body\r\n                 center\r\n                 width=\"70%\"\r\n                 @close=\"changeDialogVisible_invFormulaSelect(false)\">\r\n        <invAmountFormulaSelect :calculationFormulaType=\"calculationFormulaType\" :guaranteeDetails=\"guaranteeDetails\"\r\n                                :pdUwSiTypeDtOptions=\"pdUwSiTypeDtOptions\"\r\n                                :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                                @changeDialogVisible_invFormulaSelect=\"changeDialogVisible_invFormulaSelect\">\r\n        </invAmountFormulaSelect>\r\n      </el-dialog>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addPdtempPdInv,\r\n  deletePdtempPdInv,\r\n  findInvBypdInvType,\r\n  getProfit,\r\n  updatePdtempPdInv\r\n} from '@/api/basicinfo/pdtemppdinv'\r\nimport {pdtempPdAtrsInfoList, pdtempPdClsLabList} from \"@/api/basicinfo/ProductAttributeDefinition\"\r\nimport invRules from \"@/views/basicinfo/inv-rule/invRules\"\r\nimport invRulesSelect from \"@/views/basicinfo/inv-rule/invRulesSelect\"\r\nimport invAmountFormula from \"@/views/basicinfo/inv-formula/invAmountFormula\"\r\nimport invAmountFormulaSelect from \"@/views/basicinfo/inv-formula/invAmountFormulaSelect\"\r\n\r\nlet _this\r\nexport default {\r\n  name: 'pdtempPdInv',\r\n  filters: {\r\n    filter_pdsbnftdy(code) {\r\n      return _this.getCodeName('pdsbnftdy', code, true)\r\n    },\r\n    filter_pdInvStartDateRule(code) {\r\n      return _this.getCodeName('pdsbnftstartrule', code)\r\n    },\r\n    filter_pdInvStartDateMode(code) {\r\n      return _this.getCodeName('pdsbnftstarttype', code)\r\n    },\r\n    filter_pdInvEndDateRule(code) {\r\n      return _this.getCodeName('pdsbnftendrule', code)\r\n    },\r\n    filter_pdInvEndDateMode(code) {\r\n      return _this.getCodeName('pdsbnftendtype', code)\r\n    },\r\n    filter_pdBonusMode(code) {\r\n      return _this.getCodeName('BonusType', code)\r\n    },\r\n    filter_getpdInvDutyType(code) {\r\n      return _this.getCodeName('pdsbnftdutytype', code)\r\n    },\r\n    filter_getType(code) {\r\n      return _this.getCodeName('pdinvtype', code)\r\n    },\r\n    filter_getWay(code) {\r\n      if (code != null) {\r\n        let getWay = JSON.parse(code)\r\n        return _this.getCodeName('pdsbnftgettype', getWay)\r\n      }\r\n    },\r\n    filter_getFrequency(code) {\r\n      if (code != null) {\r\n        let getFrequency = JSON.parse(code)\r\n        return _this.getCodeName('pdsbnftgettimes', getFrequency)\r\n      }\r\n    },\r\n    filter_getPdBonusDwMode(code) {\r\n      return _this.getCodeName('DividendCollectionType', code)\r\n    }\r\n  },\r\n  props: {\r\n    invCode: {\r\n      required: false,\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      productOriginalList: [],\r\n      productList: [],\r\n      //公式\r\n      tableCount: 0,\r\n      dialogShow: {\r\n        invAmountFormula: false,\r\n        invAmountFormulaSelect: false\r\n      },\r\n      //规则\r\n      global: false,\r\n      guaranteeDetails: '',\r\n      calculationFormulaType: '',\r\n      pdUwSiTypeOptions: '',\r\n      pdUwSiTypeDtOptions: '',\r\n      dialogRulesShow: {\r\n        invRules: false,\r\n        invRulesSelect: false\r\n      },\r\n      //表格数据\r\n      unRelationInvTable: [],\r\n      invTable: [],\r\n      //接受收益表格数据\r\n      pdInvData: [],\r\n      feeTypeFilters: [],\r\n      feeTypeFilters1: [],\r\n      feeTypeFilters2: [],\r\n      // 过滤项\r\n      finelinesRegionFilterInvType: '1$9900$1400',\r\n      finelinesRegionFilterBonus: '',\r\n      finelinesdesignTypeFilter: '',\r\n      finelinesTypeRegionFilter: '',\r\n      //初始化\r\n      invOptions: [],\r\n      showPageFlag: 0,\r\n      showMore: false,\r\n      showBack: false,\r\n      quickshow: false,\r\n      quickicon: 'el-icon-arrow-right',\r\n      //分红方式和领取方式\r\n      pdBonusMode: '',\r\n      pdBonusDwMode: [],\r\n      //查询参数\r\n      params: {\r\n        eq_pdInfoId: undefined,\r\n        finelinesRegion: '',\r\n        product:'',\r\n        firstOpenPageFlag: 'Y'\r\n      },\r\n      profitParams: {\r\n        eq_product: '',\r\n        product: '',\r\n      },\r\n      selectedInv: {},\r\n      selectedInvBnft: {},\r\n      form_invAdd: {},\r\n      form: {  //表单数据与后端实体类对应\r\n        typeRegion: '',\r\n        designType: '',\r\n        form_inv: {\r\n          id: undefined,\r\n          pdVerId: undefined,\r\n          operator: '',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdInvCode: '',\r\n          pdInvName: '',\r\n          pdInvType: '',\r\n          pdInvReclFlag: 'Y',\r\n          pdInvStartDateRule: '1',\r\n          pdInvStartDateMode: '0',\r\n          pdInvStartPeriod: '',\r\n          pdInvStartPeriodUnit: 'Y',\r\n          pdInvEndDateRule: '1',\r\n          pdInvEndDateMode: '0',\r\n          pdInvEndPeriod: '',\r\n          pdInvEndPeriodUnit: 'Y',\r\n          pdInvGuarPeriod: '',\r\n          pdInvGuarPeriodUnit: 'Y',\r\n          pdInvCalcCode: '',\r\n          pdInvDwCdRuleCode: '',\r\n          pdInvRuleCode: ''\r\n        },\r\n        form_atrsinfo_f: {\r\n          /*产品定义-产品属性信息表  pdtemp_pd_atrs_info*/\r\n          pdatrscode: 'pdsbnftgettype', pdatrsname: '领取方式', pdatrsval: ['1'], pdverid: '', pdinfoid: '', pdcode: '',\r\n          pdtype: '1', /* 1-产品 2-产品计划 */\r\n          pdasclevel: 'Inve', pdasclevelcode: '', pdatrstype: '1',\r\n        },\r\n        form_atrsinfo_p: {\r\n          pdatrscode: 'pdsbnftgettimes', pdatrsname: '领取频率', pdatrsval: [], pdverid: '', pdinfoid: '', pdcode: '',\r\n          pdtype: '1', pdasclevel: 'Inve', pdasclevelcode: '', pdatrstype: '1',\r\n        }\r\n      },\r\n      pageFlag: {\r\n        amountFlag: false,\r\n        delButtonShow: false,\r\n        bonusMode: true\r\n      },\r\n      //检验规则\r\n      rules: {\r\n        'form_inv.pdInvName': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_input') + this.$t('pdtempPdInv.pd_inv_name'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_inv.pdInvCalcCode': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_input') + this.$t('pdtempPdInv.pdInvCalcCode'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_inv.pdInvType': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.pd_inv_type'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_inv.pdInvStartDateRule': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.pd_inv_start_date_rule'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_inv.pdInvStartDateMode': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.pd_inv_start_date_mode'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_inv.pdInvEndDateRule': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.pd_inv_end_date_rule'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_inv.pdInvEndDateMode': [{\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.pd_inv_end_date_mode'),\r\n          trigger: 'change'\r\n        }],\r\n        'form_atrsinfo_f.pdatrsval': [{\r\n          type: 'array',\r\n          required: true,\r\n          message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.get_way'),\r\n          trigger: 'change'\r\n        }],\r\n        // 'form_atrsinfo_p.pdatrsval': [{\r\n        //   type: 'array',\r\n        //   required: true,\r\n        //   message: this.$t('pdtempPdInv.message.please_check') + this.$t('pdtempPdInv.get_frequency'),\r\n        //   trigger: 'change'\r\n        // }],\r\n      },\r\n      productrules: {\r\n        product: {required: true, message: '请选择参考产品', trigger: 'blur'},\r\n        finelinesRegion:{required: true, message: '请选择产品细类', trigger: 'blur'}\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {\r\n    invRules,\r\n    invRulesSelect,\r\n    invAmountFormula,\r\n    invAmountFormulaSelect,\r\n  },\r\n  created() {\r\n    this.showPageFlag = this.$route.query.showPageFlag\r\n    this.initProductQueryData();\r\n    this.linkTable()\r\n    this.findTypeRegion()\r\n    this.getProfit()\r\n    this.findDesignType()\r\n    this.findPdBonusMode()\r\n    this.findPdBonusDwMode()\r\n\r\n    this.$nextTick(() => {\r\n      this.$refs[\"form\"].clearValidate()\r\n    })\r\n  },\r\n  mounted() {\r\n  },\r\n  watch: {\r\n    'form.form_inv.pdInvStartPeriod'() {\r\n      if (this.form.form_inv.pdInvStartPeriod) {\r\n        if (!this.form.form_inv.pdInvStartPeriodUnit) {\r\n          this.form.form_inv.pdInvStartPeriodUnit = 'Y'\r\n        }\r\n      }\r\n    },\r\n    'form.form_inv.pdInvEndPeriod'() {\r\n      if (this.form.form_inv.pdInvEndPeriod) {\r\n        if (!this.form.form_inv.pdInvEndPeriodUnit) {\r\n          this.form.form_inv.pdInvEndPeriodUnit = 'Y'\r\n        }\r\n      }\r\n    },\r\n    'form.form_inv.pdInvGuarPeriod'() {\r\n      if (this.form.form_inv.pdInvGuarPeriod) {\r\n        if (!this.form.form_inv.pdInvGuarPeriodUnit) {\r\n          this.form.form_inv.pdInvGuarPeriodUnit = 'Y'\r\n        }\r\n      }\r\n    },\r\n    'unRelationInvTable'() {\r\n      if (this.unRelationInvTable.length > 0) {\r\n        this.feeTypeFilters1 = [];\r\n        this.unRelationInvTable.forEach(val => {\r\n          this.feeTypeFilters1.push({\r\n            text: this.getCodeName('pdinvtype', val.pdInvType),\r\n            value: val.pdInvType\r\n          });\r\n        });\r\n        this.feeTypeFilters1 = this.feeTypeFilters1.reduce(function (prev, element) {\r\n          if (!prev.find(el => el.text == element.text)) {\r\n            prev.push(element);\r\n          }\r\n          return prev;\r\n        }, []);\r\n      }\r\n\r\n      if (this.unRelationInvTable.length > 0) {\r\n        this.feeTypeFilters2 = [];\r\n        this.unRelationInvTable.forEach(val => {\r\n          this.feeTypeFilters2.push({\r\n            text: val.pdInvCode,\r\n            value: val.pdInvCode\r\n          });\r\n        });\r\n        this.feeTypeFilters2 = this.feeTypeFilters2.reduce(function (prev, element) {\r\n          if (!prev.find(el => el.text == element.text)) {\r\n            prev.push(element);\r\n          }\r\n          return prev;\r\n        }, []);\r\n      }\r\n    },\r\n    'invTable'() {\r\n        if (this.invTable.length > 0) {\r\n          this.feeTypeFilters = [];\r\n          this.invTable.forEach(val => {\r\n            this.feeTypeFilters.push({\r\n              text: this.getCodeName('pdinvtype', val.pdInvType),\r\n              value: val.pdInvType\r\n            });\r\n          });\r\n          this.feeTypeFilters = this.feeTypeFilters.reduce(function (prev, element) {\r\n            if (!prev.find(el => el.text == element.text)) {\r\n              prev.push(element);\r\n            }\r\n            return prev;\r\n          }, []);\r\n        }\r\n    }\r\n  },\r\n  methods: {\r\n    changeAmountFlag(val){\r\n      let pdInvType = val;\r\n      if (this.form.designType == '1' && pdInvType == '1' || pdInvType == '2' || pdInvType == '3') {\r\n        this.pageFlag.amountFlag = true\r\n        this.$nextTick(() => {\r\n          this.$refs[\"form\"].clearValidate()\r\n        })\r\n      } else {\r\n        this.pageFlag.amountFlag = false\r\n      }\r\n\r\n      this.changeBonusFilter();\r\n    },\r\n    filterHandler(value, row, column) {\r\n      if (column) {\r\n        const property = column[\"property\"];\r\n        return row[property] === value;\r\n      }\r\n    },\r\n    //公式\r\n    goClicks(num1, num2) {\r\n      this.guaranteeDetails = String(num1) //业务大类\r\n      this.calculationFormulaType = String(num2) //业务细类\r\n      this.pdUwSiTypeOptions = this.form.form_inv.id ? this.form.form_inv.pdInvCode : this.form_invAdd.pdInvCode\r\n      this.pdUwSiTypeDtOptions = this.form.form_inv.id ? this.form.form_inv.pdInvType : this.form_invAdd.pdInvType\r\n      this.dialogShow.invAmountFormula = true\r\n    },\r\n    changeDialogVisible_invFormula(flag) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = this.form.form_inv.pdInvCode\r\n      } else {\r\n        this.selectedInvBnft = {}\r\n        let pdInvCode = String(this.form.form_inv.pdInvCode)\r\n        let showBack = Boolean(this.showBack)\r\n        if (pdInvCode) {\r\n          this.getProfit().then(() => {\r\n            if (this.pdInvData.length > 10 && showBack === true) {\r\n              for (let i = 0; i < 10; i++) {\r\n                this.$set(this.invTable, i, this.pdInvData[i])\r\n              }\r\n            }\r\n            for (const inv of this.invTable) {\r\n              if (inv.pdInvCode === pdInvCode) {\r\n                this.selectedInvBnft = inv\r\n                this.selectedInvBnftChanged()\r\n                break\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n      this.dialogShow.invAmountFormula = flag\r\n    },\r\n    changeDialogVisible_invFormulaSelect(flag, guaranteeDetails, calculationFormulaType, type, inv) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = inv\r\n        this.pdUwSiTypeDtOptions = type\r\n        this.guaranteeDetails = guaranteeDetails\r\n        this.calculationFormulaType = calculationFormulaType\r\n      } else {\r\n        this.dialogShow.invAmountFormula = false\r\n        this.$nextTick(() => {\r\n          this.dialogShow.invAmountFormula = true\r\n        })\r\n      }\r\n      this.dialogShow.invAmountFormulaSelect = flag\r\n    },\r\n    //规则\r\n    goRules(num1, num2) {\r\n      this.global = !num2\r\n      this.guaranteeDetails = num1//业务大类\r\n      this.calculationFormulaType = num2//业务细类\r\n      this.pdUwSiTypeOptions = this.form.form_inv.id ? this.form.form_inv.pdInvCode : this.form_invAdd.pdInvCode\r\n      this.pdUwSiTypeDtOptions = this.form.form_inv.id ? this.form.form_inv.pdInvType : this.form_invAdd.pdInvType\r\n      this.dialogRulesShow.invRules = true\r\n    },\r\n    changeDialogVisible_invRules(flag) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = this.form.form_inv.pdInvCode\r\n      } else {\r\n        let pdInvCode = String(this.form.form_inv.pdInvCode)\r\n        let showBack = Boolean(this.showBack)\r\n        if (pdInvCode) {\r\n          this.getProfit().then(() => {\r\n            if (this.pdInvData.length > 10 && showBack === true) {\r\n              for (let i = 0; i < 10; i++) {\r\n                this.$set(this.invTable, i, this.pdInvData[i])\r\n              }\r\n            }\r\n            for (const inv of this.invTable) {\r\n              if (inv.pdInvCode === pdInvCode) {\r\n                this.selectedInvBnft = inv\r\n                this.selectedInvBnftChanged()\r\n                break\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n      this.dialogRulesShow.invRules = flag\r\n    },\r\n    changeDialogVisible_invRulesSelect(flag, guaranteeDetails, calculationFormulaType, type, inv) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = inv\r\n        this.pdUwSiTypeDtOptions = type\r\n        this.guaranteeDetails = guaranteeDetails\r\n        this.calculationFormulaType = calculationFormulaType\r\n      } else if (flag === false) {\r\n        this.dialogRulesShow.invRules = false\r\n        this.$nextTick(() => {\r\n          this.dialogRulesShow.invRules = true\r\n        })\r\n      }\r\n      this.dialogRulesShow.invRulesSelect = flag\r\n    },\r\n    getProfit() {\r\n      return new Promise(resolve => {\r\n        let data = {\r\n          page: null,\r\n          params: {\r\n            eq_pdInfoId: this.params.eq_pdInfoId\r\n          },\r\n          limit: null\r\n        }\r\n        getProfit(data).then(res => {\r\n          this.pdInvData = res.data.records\r\n          this.invTable = []\r\n          if (this.pdInvData.length > 10) {\r\n            this.showMore = true\r\n            this.showBack = false\r\n            for (let i = 0; i < 10; i++) {\r\n              this.$set(this.invTable, i, this.pdInvData[i])\r\n            }\r\n          } else {\r\n            this.showMore = false\r\n            this.showBack = false\r\n            for (let i = 0; i < this.pdInvData.length; i++) {\r\n              this.$set(this.invTable, i, this.pdInvData[i])\r\n            }\r\n          }\r\n          // 带入需要显示的收益信息\r\n          if (!!this.invCode) {\r\n            let flag = false\r\n            for (const inv of this.pdInvData) {\r\n              if (inv.pdInvCode === this.invCode) {\r\n                flag = true\r\n                this.selectedInvBnft = inv\r\n                this.selectedInvBnftChanged()\r\n                break\r\n              }\r\n            }\r\n            if (false === flag) {\r\n              this.notifyError('未找到匹配的收益信息')\r\n            }\r\n          }\r\n          resolve()\r\n        })\r\n      })\r\n    },\r\n    isShowMore() {\r\n      this.showMore = false\r\n      this.showBack = true\r\n      this.invTable = []\r\n      for (let i = 0; i < this.pdInvData.length; i++) {\r\n        this.$set(this.invTable, i, this.pdInvData[i])\r\n      }\r\n    },\r\n    isShowBack() {\r\n      this.showMore = true\r\n      this.showBack = false\r\n      this.invTable = []\r\n      for (let i = 0; i < 10; i++) {\r\n        this.$set(this.invTable, i, this.pdInvData[i])\r\n      }\r\n    },\r\n    //快捷定义\r\n    isShowQuick() {\r\n      if (!this.quickshow) {\r\n        this.quickicon = 'el-icon-arrow-down'\r\n      } else {\r\n        this.quickicon = 'el-icon-arrow-right'\r\n      }\r\n      return this.quickshow = !this.quickshow\r\n    },\r\n    //搜索按钮\r\n    handleSearchInCurrentProduct() {\r\n      this.$refs.profitParams.validate((valid) => {\r\n        if (valid) {\r\n          this.params.firstOpenPageFlag = 'N'\r\n          this.$refs.page.reload()\r\n        }\r\n      })\r\n    },\r\n    //查找产品分红方式\r\n    findPdBonusMode() {\r\n      pdtempPdClsLabList(this.params.eq_pdInfoId).then(response => {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (response.data[i].pdClsType === '1') {\r\n            this.form.pdBonusMode = response.data[i].pdCls10\r\n          }\r\n        }\r\n      })\r\n    },\r\n    changeBonusFilter(){\r\n      let val = this.form.pdBonusMode\r\n      console.log('bonusMode:'+val)\r\n      if (val == '1') {\r\n        this.finelinesRegionFilterBonus = '1$5'\r\n        this.$nextTick(() => {\r\n          this.form.pdBonusDwMode = ['5']\r\n        })\r\n      } else if (val == '2') {\r\n        this.finelinesRegionFilterBonus = '1$1$2$3$4'\r\n        let pdBonusDwMode = this.form.pdBonusDwMode\r\n\r\n        if (pdBonusDwMode.length > 0) {\r\n          this.$nextTick(() => {\r\n            this.form.pdBonusDwMode = pdBonusDwMode\r\n          })\r\n        }\r\n      } else {\r\n        this.finelinesRegionFilterBonus = ''\r\n      }\r\n    },\r\n    //查找产品分红领取方式\r\n    findPdBonusDwMode() {\r\n      pdtempPdAtrsInfoList(this.params.eq_pdInfoId).then(response => {\r\n        this.form.pdBonusDwMode = []\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (response.data[i].pdAtrsCode === 'DividendCollection') {\r\n            this.form.pdBonusDwMode.push(\r\n              response.data[i].pdAtrsVal,\r\n            )\r\n          }\r\n        }\r\n      })\r\n    },\r\n    //查找产品设计类型\r\n    findDesignType() {\r\n      pdtempPdClsLabList(this.params.eq_pdInfoId).then(response => {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (response.data[i].pdClsType === '1') {\r\n            this.form.designType = response.data[i].pdCls4\r\n\r\n            let val = this.form.designType\r\n            if (val != '1') {\r\n              this.finelinesdesignTypeFilter = \"1$4$5$6$7$8$9\"\r\n              this.pageFlag.amountFlag = false\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    //查找产品类型\r\n    findTypeRegion() {\r\n      pdtempPdClsLabList(this.params.eq_pdInfoId).then(response => {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (response.data[i].pdClsType === '1') {\r\n            this.form.typeRegion = response.data[i].pdCls1\r\n            let val = this.form.typeRegion\r\n            if (val === \"L\") {\r\n              this.finelinesTypeRegionFilter = \"1$L\"\r\n            } else if (val === \"R\") {\r\n              this.finelinesTypeRegionFilter = \"1$R\"\r\n            } else if (val === \"H\") {\r\n              this.finelinesTypeRegionFilter = \"1$H\"\r\n            } else if (val === \"A\") {\r\n              this.finelinesTypeRegionFilter = \"1$A\"\r\n            } else {\r\n              this.finelinesTypeRegionFilter = \"\"\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    //产品信息\r\n    findReferenceProducts(val) {\r\n      this.params.eq_pdInfoId = ''\r\n      val === '' ? this.initProductQueryData() : this.filterProductByCategory(this, val)\r\n    },\r\n    initProductQueryData() {\r\n      this.filterProductByNode(this, '1')\r\n    },\r\n    //收益信息\r\n    findInv(val) {\r\n      let paramsinv = {\r\n        productId: this.profitParams.product,\r\n        pdInvType: val\r\n      }\r\n      findInvBypdInvType(paramsinv).then(res => {\r\n        this.invOptions = []\r\n        res.data.forEach(inv => {\r\n          this.invOptions.push({\r\n            value: inv.id,\r\n            label: inv.pdInvCode + ':' + inv.pdInvName\r\n          })\r\n        })\r\n      })\r\n    },\r\n    /*收益起期-止期关联*/\r\n    changeRuleSE(startCode) {\r\n      if (startCode === '1' || startCode === '2' || startCode === '3') {\r\n        this.form.form_inv.pdInvEndDateRule = startCode\r\n      } else if (startCode === '4' || startCode === '5' || startCode === '6') {\r\n        this.form.form_inv.pdInvEndDateRule = '3'\r\n      } else {\r\n        this.form.form_inv.pdInvEndDateRule = ''\r\n      }\r\n    },\r\n    //关联表初始化值\r\n    linkTable() {\r\n      let pdtempPdInfo = this.getPdData()\r\n      //页面传值给关联表赋值\r\n      this.params.eq_pdInfoId = pdtempPdInfo.id\r\n      this.form.form_inv.pdInfoId = pdtempPdInfo.id\r\n      this.form.form_inv.pdCode = pdtempPdInfo.pdCode\r\n      this.form.form_inv.pdVerId = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_f.pdinfoid = pdtempPdInfo.id\r\n      this.form.form_atrsinfo_p.pdinfoid = pdtempPdInfo.id\r\n      this.form.form_atrsinfo_f.pdverid = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_p.pdverid = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_f.pdcode = pdtempPdInfo.pdCode\r\n      this.form.form_atrsinfo_p.pdcode = pdtempPdInfo.pdCode\r\n      this.profitParams.eq_product = this.getPdData().cType\r\n    },\r\n    //复制收益\r\n    copyInv(row) {\r\n      let pdtempPdInfo = this.getPdData()\r\n      this.form.form_inv.pdInfoId = pdtempPdInfo.id\r\n      this.form.form_inv.pdCode = pdtempPdInfo.pdCode\r\n      this.form.form_inv.pdVerId = pdtempPdInfo.pdVerId\r\n      this.form.form_inv.pdInvName = row.pdInvName\r\n      /*收益名称*/\r\n      this.form.form_inv.pdInvType = row.pdInvType\r\n      /*收益类型*/\r\n      // this.form.form_inv.pdInvDutyType = row.pdInvDutyType//人身险责任类型\r\n      //复选框数据\r\n      this.form.form_atrsinfo_f.pdatrsval = JSON.parse(row.getWay)\r\n      /*领取方式*/\r\n      this.form.form_atrsinfo_p.pdatrsval = JSON.parse(row.getFrequency)\r\n      /*领取频率*/\r\n      this.form.form_inv.pdInvGuarPeriod = row.pdInvGuarPeriod\r\n      /*保证收益期间*/\r\n      this.form.form_inv.pdInvGuarPeriodUnit = row.pdInvGuarPeriodUnit\r\n      /*保证收益期间单位*/\r\n      /*     this.form.form_inv.pdInvReclFlag = row.pdInvReclFlag\r\n           /!*领取时重新计算*!/*/\r\n      this.form.form_inv.pdInvStartDateRule = row.pdInvStartDateRule\r\n      /*收益起期计算规则*/\r\n      this.form.form_inv.pdInvStartDateMode = row.pdInvStartDateMode\r\n      /*收益起期计算方式*/\r\n      this.form.form_inv.pdInvStartPeriod = row.pdInvStartPeriod\r\n      /*收益起期*/\r\n      this.form.form_inv.pdInvStartPeriodUnit = row.pdInvStartPeriodUnit\r\n      /*收益起期单位*/\r\n      this.form.form_inv.pdInvEndDateRule = row.pdInvEndDateRule\r\n      /*收益止期计算规则*/\r\n      this.form.form_inv.pdInvEndDateMode = row.pdInvEndDateMode\r\n      /*收益止期计算方式*/\r\n      this.form.form_inv.pdInvEndPeriod = row.pdInvEndPeriod\r\n      /*收益止期*/\r\n      this.form.form_inv.pdInvEndPeriodUnit = row.pdInvEndPeriodUnit\r\n      /*收益止期单位*/\r\n      this.form.form_inv.pdInvCalcCode = row.pdInvCalcCode\r\n      /*收益计算公式*/\r\n      this.form.form_atrsinfo_f.pdinfoid = pdtempPdInfo.id\r\n      this.form.form_atrsinfo_p.pdinfoid = pdtempPdInfo.id\r\n      this.form.form_atrsinfo_f.pdverid = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_p.pdverid = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_f.pdcode = pdtempPdInfo.pdCode\r\n      this.form.form_atrsinfo_p.pdcode = pdtempPdInfo.pdCode\r\n      let pdInvType = this.form.form_inv.pdInvType\r\n      if (this.form.designType !== '1' && (pdInvType === '1' || pdInvType === '2' || pdInvType === '3')) {\r\n        this.messageError(this.$t('pdtempPdInv.message.inv_product_warning'))\r\n        this.clearFormInv()\r\n        return\r\n      }\r\n      if (pdInvType !== '1' && pdInvType !== '2' && pdInvType !== '3') {\r\n        this.pageFlag.amountFlag = false\r\n      }\r\n      addPdtempPdInv(this.form).then(() => {\r\n        this.pageFlag.amountFlag = true\r\n        /*产品定义-产品属性信息表  pdtemp_pd_atrs_info*/\r\n        this.clearFormInv()\r\n        this.$refs.page.reload()\r\n        this.getProfit()\r\n        this.findPdBonusMode()\r\n        this.findPdBonusDwMode()\r\n        this.notifySuccess(this.$t('successMessage.add'))\r\n      })\r\n    },\r\n    likeInv() {\r\n      this.selectedInvChanged()\r\n      let pdInvType = this.form.form_inv.pdInvType\r\n      if (this.form.designType !== '1' && (pdInvType === '1' || pdInvType === '2' || pdInvType === '3')) {\r\n        this.messageError(this.$t('pdtempPdInv.message.inv_product_warning'))\r\n        this.clearFormInv()\r\n        return\r\n      }\r\n      if (pdInvType !== '1' && pdInvType !== '2' && pdInvType !== '3') {\r\n        this.pageFlag.amountFlag = false\r\n      }\r\n    },\r\n    selectedInvChanged() {\r\n      this.selectedInvBnft = ''\r\n      this.resetFormInv()\r\n      this.$nextTick(() => {\r\n        this.$refs[\"form\"].clearValidate()\r\n      })\r\n      //获取当前产品信息\r\n      let pdtempPdInfo = this.getPdData()\r\n      let row = Object.assign({}, this.selectedInv)\r\n      this.form.form_inv.pdInfoId = pdtempPdInfo.id\r\n      this.form.form_inv.pdCode = pdtempPdInfo.pdCode\r\n      this.form.form_inv.pdVerId = pdtempPdInfo.pdVerId\r\n      this.form.form_inv.pdInvName = row.pdInvName\r\n      /*收益名称*/\r\n      this.form.form_inv.pdInvType = row.pdInvType\r\n      /*收益类型*/\r\n      // this.form.form_inv.pdInvDutyType = row.pdInvDutyType//人身险责任类型\r\n      //复选框数据\r\n      this.form.form_atrsinfo_f.pdatrsval = JSON.parse(row.getWay)\r\n      /*领取方式*/\r\n      this.form.form_atrsinfo_p.pdatrsval = JSON.parse(row.getFrequency)\r\n      /*领取频率*/\r\n      this.form.form_inv.pdInvGuarPeriod = row.pdInvGuarPeriod\r\n      /*保证收益期间*/\r\n      this.form.form_inv.pdInvGuarPeriodUnit = row.pdInvGuarPeriodUnit\r\n      /*保证收益期间单位*/\r\n      /*      this.form.form_inv.pdInvReclFlag = row.pdInvReclFlag\r\n            /!*领取时重新计算*!/*/\r\n      this.form.form_inv.pdInvStartDateRule = row.pdInvStartDateRule\r\n      /*收益起期计算规则*/\r\n      this.form.form_inv.pdInvStartDateMode = row.pdInvStartDateMode\r\n      /*收益起期计算方式*/\r\n      this.form.form_inv.pdInvStartPeriod = row.pdInvStartPeriod\r\n      /*收益起期*/\r\n      this.form.form_inv.pdInvStartPeriodUnit = row.pdInvStartPeriodUnit\r\n      /*收益起期单位*/\r\n      this.form.form_inv.pdInvEndDateRule = row.pdInvEndDateRule\r\n      /*收益止期计算规则*/\r\n      this.form.form_inv.pdInvEndDateMode = row.pdInvEndDateMode\r\n      /*收益止期计算方式*/\r\n      this.form.form_inv.pdInvEndPeriod = row.pdInvEndPeriod\r\n      /*收益止期*/\r\n      this.form.form_inv.pdInvEndPeriodUnit = row.pdInvEndPeriodUnit\r\n      /*收益止期单位*/\r\n      this.form.form_inv.pdInvCalcCode = row.pdInvCalcCode\r\n      /*收益计算公式*/\r\n      this.form.form_atrsinfo_f.pdinfoid = pdtempPdInfo.id\r\n      this.form.form_atrsinfo_p.pdinfoid = pdtempPdInfo.id\r\n      this.form.form_atrsinfo_f.pdverid = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_p.pdverid = pdtempPdInfo.pdVerId\r\n      this.form.form_atrsinfo_f.pdcode = pdtempPdInfo.pdCode\r\n      this.form.form_atrsinfo_p.pdcode = pdtempPdInfo.pdCode\r\n    },\r\n    rowClick_inv(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        this.pageFlag.delButtonShow = false\r\n        this.selectedInvBnft = ''\r\n        this.resetFormInv()\r\n        if (row.id === this.selectedInv.id) {\r\n          this.clearFormInv()\r\n        }\r\n      }\r\n    },\r\n    //关联收益选中数据回显\r\n    selectedInvBnftChanged() {\r\n      this.selectedInv = ''\r\n      this.resetFormInv()\r\n      this.pageFlag.delButtonShow = true\r\n      this.form.form_inv.pdInvDwCdRuleCode = this.selectedInvBnft.pdInvDwCdRuleCode\r\n      this.form.form_inv.pdInvRuleCode = this.selectedInvBnft.pdInvRuleCode\r\n      this.form.form_inv.id = this.selectedInvBnft.id\r\n      this.form.form_inv.pdInfoId = this.selectedInvBnft.pdInfoId\r\n      this.form.form_inv.pdCode = this.selectedInvBnft.pdCode\r\n      this.form.form_inv.pdVerId = this.selectedInvBnft.pdVerId\r\n      this.form.form_inv.pdInvCode = this.selectedInvBnft.pdInvCode\r\n      /*收益编码*/\r\n      this.form.form_inv.pdInvName = this.selectedInvBnft.pdInvName\r\n      /*收益名称*/\r\n      this.form.form_inv.pdInvType = this.selectedInvBnft.pdInvType\r\n      /*收益类型*/\r\n      // this.form.form_inv.pdInvDutyType = row.pdInvDutyType//人身险责任类型\r\n      //复选框数据\r\n      if (this.selectedInvBnft.getWay) this.form.form_atrsinfo_f.pdatrsval = JSON.parse(this.selectedInvBnft.getWay)\r\n      /*领取方式*/\r\n      if (this.selectedInvBnft.getFrequency) this.form.form_atrsinfo_p.pdatrsval = JSON.parse(this.selectedInvBnft.getFrequency)\r\n      /*领取频率*/\r\n      this.form.form_inv.pdInvGuarPeriod = this.selectedInvBnft.pdInvGuarPeriod\r\n      /*保证收益期间*/\r\n      this.form.form_inv.pdInvGuarPeriodUnit = this.selectedInvBnft.pdInvGuarPeriodUnit\r\n      /*保证收益期间单位*/\r\n      /*      this.form.form_inv.pdInvReclFlag = this.selectedInvBnft.pdInvReclFlag\r\n            /!*领取时重新计算*!/*/\r\n      this.form.form_inv.pdInvStartDateRule = this.selectedInvBnft.pdInvStartDateRule\r\n      /*收益起期计算规则*/\r\n      this.form.form_inv.pdInvStartDateMode = this.selectedInvBnft.pdInvStartDateMode\r\n      /*收益起期计算方式*/\r\n      this.form.form_inv.pdInvStartPeriod = this.selectedInvBnft.pdInvStartPeriod\r\n      /*收益起期*/\r\n      this.form.form_inv.pdInvStartPeriodUnit = this.selectedInvBnft.pdInvStartPeriodUnit\r\n      /*收益起期单位*/\r\n      this.form.form_inv.pdInvEndDateRule = this.selectedInvBnft.pdInvEndDateRule\r\n      /*收益止期计算规则*/\r\n      this.form.form_inv.pdInvEndDateMode = this.selectedInvBnft.pdInvEndDateMode\r\n      /*收益止期计算方式*/\r\n      this.form.form_inv.pdInvEndPeriod = this.selectedInvBnft.pdInvEndPeriod\r\n      /*收益止期*/\r\n      this.form.form_inv.pdInvEndPeriodUnit = this.selectedInvBnft.pdInvEndPeriodUnit\r\n      /*收益止期单位*/\r\n      this.form.form_inv.pdInvCalcCode = this.selectedInvBnft.pdInvCalcCode\r\n      /*收益计算公式*/\r\n      this.form.form_atrsinfo_f.pdinfoid = this.selectedInvBnft.pdInfoId\r\n      this.form.form_atrsinfo_p.pdinfoid = this.selectedInvBnft.pdInfoId\r\n      this.form.form_atrsinfo_f.pdverid = this.selectedInvBnft.pdVerId\r\n      this.form.form_atrsinfo_p.pdverid = this.selectedInvBnft.pdVerId\r\n      this.form.form_atrsinfo_f.pdcode = this.selectedInvBnft.pdCode\r\n      this.form.form_atrsinfo_p.pdcode = this.selectedInvBnft.pdCode\r\n      this.form.form_atrsinfo_p.pdasclevelcode = this.selectedInvBnft.pdInvCode\r\n      /*收益编码*/\r\n      this.form.form_atrsinfo_f.pdasclevelcode = this.selectedInvBnft.pdInvCode\r\n\r\n      this.changeAmountFlag(this.form.form_inv.pdInvType);\r\n      this.$nextTick(() => {\r\n        this.$refs.form.clearValidate()\r\n      })\r\n    },\r\n    rowClick_invbnft(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        this.pageFlag.delButtonShow = true\r\n        if (row.id === this.selectedInvBnft.id) {\r\n          this.resetFormInv()\r\n          this.$nextTick(() => {\r\n            this.$refs[\"form\"].clearValidate()\r\n          })\r\n          this.selectedInv = ''\r\n          this.selectedInvBnft = ''\r\n          this.pageFlag.delButtonShow = false\r\n        }\r\n      }\r\n    },\r\n    //更新方法\r\n    handleUpdateInv() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          var rowId = this.form.form_inv.id\r\n          let pdInvType = this.form.form_inv.pdInvType\r\n          if (pdInvType !== '1' && pdInvType !== '2' && pdInvType !== '3') {\r\n            this.pageFlag.amountFlag = false\r\n          }\r\n          updatePdtempPdInv(this.form).then(() => {\r\n            this.resetFormInv()\r\n            this.$refs.page.buildData().then(() => {\r\n              this.$nextTick(() => {\r\n                this.selectedRow(rowId);\r\n              })\r\n            })\r\n            this.getProfit()\r\n            this.findPdBonusMode()\r\n            this.findPdBonusDwMode()\r\n            this.$emit('childFn', true)\r\n            this.notifySuccess(this.$t('successMessage.update'))\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //选中修改项\r\n    selectedRow(id) {\r\n      this.$refs.page.buildData().then(() => {\r\n        if (id) {\r\n          var idRow = id;\r\n          let num = 0;\r\n          for (num = 0; num < this.invTable.length; num++) {\r\n            if (this.invTable[num].id === idRow) {\r\n              this.$refs.invTable.setCurrentRow(this.invTable[num])\r\n              this.selectedInvBnft = this.invTable[num]\r\n              this.selectedInvBnftChanged()\r\n              break;\r\n            }\r\n          }\r\n        } else {\r\n          this.$refs.invTable.setCurrentRow(this.invTable[0])\r\n          this.selectedInvBnft = this.invTable[0]\r\n          this.selectedInvBnftChanged()\r\n        }\r\n      })\r\n    },\r\n\r\n    //新增方法\r\n    handleAddInv() {\r\n      this.linkTable()\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          let pdInvType = this.form.form_inv.pdInvType\r\n          if (pdInvType !== '1' && pdInvType !== '2' && pdInvType !== '3') {\r\n            this.pageFlag.amountFlag = false\r\n          }\r\n          addPdtempPdInv(this.form).then(response => {\r\n            this.form_invAdd = response.data\r\n            /*产品定义-产品属性信息表  pdtemp_pd_atrs_info*/\r\n            this.clearFormInv()\r\n            this.$refs.page.buildData().then(() => {\r\n              this.$nextTick(() => {\r\n                this.selectedRow();\r\n              })\r\n            })\r\n            this.getProfit()\r\n            this.findPdBonusMode()\r\n            this.findPdBonusDwMode()\r\n            this.$emit('childFn', true)\r\n            this.notifySuccess(this.$t('successMessage.add'))\r\n          })\r\n          this.tableCount++;\r\n\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    //删除方法\r\n    handleDeleteInv() {\r\n      if (this.selectedInvBnft.id > 0) {\r\n        deletePdtempPdInv(this.selectedInvBnft.id).then(() => {\r\n          if (this.selectedInvBnft.id === this.form_invAdd.id) {\r\n            this.form_invAdd = {}\r\n          }\r\n          this.$refs.page.buildData().then(() => {\r\n            this.clearFormInv1()\r\n          })\r\n          this.getProfit()\r\n          this.notifySuccess(this.$t('successMessage.delete'))\r\n        })\r\n      } else {\r\n        this.messageError(this.$t('pdtempPdInv.message.delete_warning'))\r\n      }\r\n    },\r\n    clearFormInv1() {\r\n      this.pageFlag.delButtonShow = false\r\n      this.resetFormInv()\r\n      this.$nextTick(() => {\r\n        this.$refs[\"form\"].clearValidate()\r\n      })\r\n      this.selectedInv = ''\r\n      this.selectedInvBnft = ''\r\n    },\r\n    // 清空收益定义表单\r\n    clearFormInv() {\r\n      if (this.selectedInvBnft != null && this.selectedInvBnft != '' && this.selectedInvBnft != undefined) {\r\n        var row = this.selectedInvBnft;\r\n        this.selectedInv = ''\r\n        this.resetFormInv()\r\n        this.pageFlag.delButtonShow = true\r\n        this.form.form_inv.pdInvDwCdRuleCode = row.pdInvDwCdRuleCode\r\n        this.form.form_inv.pdInvRuleCode = row.pdInvRuleCode\r\n        this.form.form_inv.id = row.id\r\n        this.form.form_inv.pdInfoId = row.pdInfoId\r\n        this.form.form_inv.pdCode = row.pdCode\r\n        this.form.form_inv.pdVerId = row.pdVerId\r\n        this.form.form_inv.pdInvCode = row.pdInvCode\r\n        /*收益编码*/\r\n        this.form.form_inv.pdInvName = row.pdInvName\r\n        /*收益名称*/\r\n        this.form.form_inv.pdInvType = row.pdInvType\r\n        /*收益类型*/\r\n        // this.form.form_inv.pdInvDutyType = row.pdInvDutyType//人身险责任类型\r\n        //复选框数据\r\n        if (row.getWay) this.form.form_atrsinfo_f.pdatrsval = JSON.parse(row.getWay)\r\n        /*领取方式*/\r\n        if (row.getFrequency) this.form.form_atrsinfo_p.pdatrsval = JSON.parse(row.getFrequency)\r\n        /*领取频率*/\r\n        this.form.form_inv.pdInvGuarPeriod = row.pdInvGuarPeriod\r\n        /*保证收益期间*/\r\n        this.form.form_inv.pdInvGuarPeriodUnit = row.pdInvGuarPeriodUnit\r\n        /*保证收益期间单位*/\r\n        /*            this.form.form_inv.pdInvReclFlag = row.pdInvReclFlag\r\n                    /!*领取时重新计算*!/*/\r\n        this.form.form_inv.pdInvStartDateRule = row.pdInvStartDateRule\r\n        /*收益起期计算规则*/\r\n        this.form.form_inv.pdInvStartDateMode = row.pdInvStartDateMode\r\n        /*收益起期计算方式*/\r\n        this.form.form_inv.pdInvStartPeriod = row.pdInvStartPeriod\r\n        /*收益起期*/\r\n        this.form.form_inv.pdInvStartPeriodUnit = row.pdInvStartPeriodUnit\r\n        /*收益起期单位*/\r\n        this.form.form_inv.pdInvEndDateRule = row.pdInvEndDateRule\r\n        /*收益止期计算规则*/\r\n        this.form.form_inv.pdInvEndDateMode = row.pdInvEndDateMode\r\n        /*收益止期计算方式*/\r\n        this.form.form_inv.pdInvEndPeriod = row.pdInvEndPeriod\r\n        /*收益止期*/\r\n        this.form.form_inv.pdInvEndPeriodUnit = row.pdInvEndPeriodUnit\r\n        /*收益止期单位*/\r\n        this.form.form_inv.pdInvCalcCode = row.pdInvCalcCode\r\n        /*收益计算公式*/\r\n        this.form.form_atrsinfo_f.pdinfoid = row.pdInfoId\r\n        this.form.form_atrsinfo_p.pdinfoid = row.pdInfoId\r\n        this.form.form_atrsinfo_f.pdverid = row.pdVerId\r\n        this.form.form_atrsinfo_p.pdverid = row.pdVerId\r\n        this.form.form_atrsinfo_f.pdcode = row.pdCode\r\n        this.form.form_atrsinfo_p.pdcode = row.pdCode\r\n        this.form.form_atrsinfo_p.pdasclevelcode = row.pdInvCode\r\n        /*收益编码*/\r\n        this.form.form_atrsinfo_f.pdasclevelcode = row.pdInvCode\r\n        this.$nextTick(() => {\r\n          this.$refs.form.clearValidate()\r\n        })\r\n      } else {\r\n        this.resetFormInv()\r\n        this.$nextTick(() => {\r\n          this.$refs[\"form\"].clearValidate()\r\n        })\r\n        this.selectedInv = ''\r\n        this.selectedInvBnft = ''\r\n      }\r\n\r\n    },\r\n    // 重置收益对象（相当于 new 了一个对象，具有解除双向绑定的效果）\r\n    resetFormInv() {\r\n      this.$nextTick(() => {\r\n        this.$refs[\"form\"].clearValidate()\r\n      })\r\n      this.form.form_inv = {\r\n        pdInvCode: '',\r\n        pdInvName: '',\r\n        pdInvType: '',\r\n        pdInvReclFlag: 'Y',\r\n        pdBonusMode: this.form.form_inv.pdBonusMode,\r\n        pdBonusDwMode: this.form.form_inv.pdBonusDwMode,\r\n        pdInvStartDateRule: '1',\r\n        pdInvStartDateMode: '0',\r\n        pdInvStartPeriod: '',\r\n        pdInvStartPeriodUnit: 'Y',\r\n        pdInvEndDateRule: '1',\r\n        pdInvEndDateMode: '0',\r\n        pdInvEndPeriod: '',\r\n        pdInvEndPeriodUnit: 'Y',\r\n        pdInvGuarPeriod: '',\r\n        pdInvGuarPeriodUnit: 'Y',\r\n        pdInvCalcCode: '',\r\n        pdInvDwCdRuleCode: '',\r\n        pdInvRuleCode: ''\r\n      }\r\n      this.form.form_atrsinfo_f.pdatrsval = ['1']\r\n      this.form.form_atrsinfo_p.pdatrsval = []\r\n\r\n      this.pageFlag.amountFlag = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n\r\n.el-row {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.demo-table-expand {\r\n  font-size: 0;\r\n}\r\n\r\n.demo-table-expand label {\r\n  width: 150px;\r\n  color: #99a9bf;\r\n}\r\n\r\n.demo-table-expand .el-form-item {\r\n  margin-right: 0;\r\n  margin-bottom: 0;\r\n  width: 50%;\r\n}\r\n\r\n.el-table-column {\r\n  width: 120px;\r\n}\r\n\r\n.showDiv {\r\n  width: 90%;\r\n  height: 100%;\r\n  margin-top: -40px;\r\n  margin-left: -40px;\r\n  position: absolute;\r\n  background: #ffffff00;\r\n  z-index: 999;\r\n}\r\n</style>\r\n"]}]}