{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\package-revision\\package-def-rev\\index.vue?vue&type=style&index=1&id=8a53c7b8&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\package-revision\\package-def-rev\\index.vue","mtime":1609847106805},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1pbi10YWJsZSB7CiAgd2lkdGg6IDUwJQp9CgoubGlzdFJpZ2h0IHsKICBwYWRkaW5nLXJpZ2h0OiAzMHB4Owp9CgoK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkrBA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/package-revision/package-def-rev","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <el-form   label-width=\"auto\" ref=\"pdSelForm\" :model=\"params\">\r\n      <el-row  :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdppRevision.package')\" prop=\"pdParams\">\r\n            <el-select v-model=\"params.eq_ppCode\" :placeholder=\"$t('pdppRevision.pleaseSelect')\" clearable>\r\n              <el-option\r\n                v-for=\"(item,index) in ppOptions\"\r\n                :key=\"index\"\r\n                :label=\"item.ppCode+':'+item.ppName\"\r\n                :value=\"item.ppCode\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdppRevision.ppApplDate')\">\r\n            <el-date-picker\r\n              v-model=\"eq_ppApplDate\"\r\n              type=\"daterange\"\r\n              :range-separator=\"$t('pdppRevision.to')\"\r\n              :start-placeholder=\"$t('pdppRevision.startDate')\"\r\n              :end-placeholder=\"$t('pdppRevision.endDate')\"\r\n              :picker-options=\"pickerOptions\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n        <cus-btn-wrapper>\r\n          <el-button size=\"small\" icon=\"el-icon-search\" type=\"primary\" @click=\"queryTableData\">{{$t('pdgenlCmpnInfo.search') }}\r\n          </el-button>\r\n        </cus-btn-wrapper>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <cus-table-title :label=\"$t('pdppRevision.releasedPackage')\"></cus-table-title>\r\n    <el-table :data=\"configs\" size=\"mini\" fit element-loading-text=\"Loading\" border highlight-current-row\r\n              align=\"center\"\r\n              @row-click=\"chooseOneRow\"\r\n              class=\"wraper-table\">\r\n      <el-table-column width=\"50px\" align=\"center\"  :label=\"$t('table.select')\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio v-model=\"chooseRowId\" :label=\"scope.row.id\">\r\n            <span class=\"el-radio__label\"></span>\r\n          </el-radio>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" type=\"index\" align=\"center\" ></el-table-column>\r\n      <el-table-column :label=\"$t('pdppRevision.ppCode')\" prop=\"ppCode\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppRevision.ppName')\" prop=\"ppName\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppRevision.completeData')\" prop=\"pdppReviseDate\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppRevision.ppReviseTimes')\" prop=\"pdppReviseCount\"\r\n                       align=\"center\"></el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('pdppRevision.operate')\" fixed=\"right\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n\r\n          <el-button @click=\"toPdRevise(scope.row)\" class=\"filter-button\" icon=\"el-icon-view\" size=\"mini\"\r\n                     type=\"primary\">{{$t('pdppRevision.ppReviseRecords')}}\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination ref=\"page\" url=\"/pdpp-definition-revision/base/searchProductPackage\" :pageSize=\"10\" :params=\"params\"\r\n                    v-model=\"configs\"/>\r\n\r\n    <cus-form-title v-if=\"showRow\" :label=\"$t('pdppRevision.pdInfo')\"></cus-form-title>\r\n    <el-form  label-width=\"auto\" :rules=\"rules\" :ref=\"refForm\"\r\n             :model=\"refForm\">\r\n      <el-row v-if=\"showRow\" :gutter=\"10\" style=\"margin-left:20px;margin-top: 20px\">\r\n        <el-col :span=\"6\">\r\n          <el-link :underline=\"false\" @click=\"getPackDesignPage\">{{ $t('PPReleasedstatistics.packageInfo') }}<i\r\n            class=\"el-icon-info\"></i></el-link>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-link :underline=\"false\" @click=\"getPackSalePage\">{{ $t('PPReleasedstatistics.packageSaleInfo') }}<i\r\n            class=\"el-icon-info\"></i></el-link>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-link :underline=\"false\" @click=\"getPackProposalPage\">{{ $t('PPReleasedstatistics.packageProposalInfo') }}<i\r\n            class=\"el-icon-info\"></i></el-link>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row v-if=\"showRow\" :gutter=\"10\" style=\"margin-left:20px;margin-top: 20px\">\r\n        <el-col :span=\"6\">\r\n          <el-link :underline=\"false\" @click=\"getPackUnderwritingPage\">{{ $t('PPReleasedstatistics.packageUnderwritingInfo') }}<i\r\n            class=\"el-icon-info\"></i></el-link>\r\n        </el-col>\r\n\r\n        <el-col :span=\"6\">\r\n          <el-link :underline=\"false\" @click=\"getPackClaimPage\">{{ $t('PPReleasedstatistics.packageClaimInfo') }}<i\r\n            class=\"el-icon-info\"></i></el-link>\r\n        </el-col>\r\n      </el-row>\r\n      <div v-if=\"chooseRowId\">\r\n        <el-row style=\" padding-top: 10px\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item :label=\"$t('pdppRevision.ppReviseType')\" prop=\"reviseFlag\">\r\n              <el-radio-group v-model=\"refForm.reviseFlag\" @change=\"resetCheck\">\r\n                <el-radio label=\"1\">{{$t('pdppRevision.ppDefineRevise')}}</el-radio>\r\n                <el-radio label=\"0\">{{$t('pdppRevision.ppFormulaRuleRevise')}}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-form-item>\r\n            <el-checkbox-group v-model=\"refForm.changeCheckList\">\r\n                <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='0'\">\r\n                  <el-checkbox label=\"productRuleFlag\">{{$t('pdppRevision.packageRuleFlag')}}</el-checkbox>\r\n                </el-col>\r\n                <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='0'\">\r\n                  <el-checkbox label=\"productFormulaFlag\">\r\n                    {{$t('route.comboCalcRevision')}}\r\n                  </el-checkbox>\r\n                </el-col>\r\n              <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='1'\">\r\n                <el-checkbox label=\"productInfoFlag\">{{$t('pdppRevision.packageInfoFlag')}}\r\n                </el-checkbox>\r\n              </el-col>\r\n                <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='1'\">\r\n                  <el-checkbox label=\"productDistributionFlag\">{{$t('pdppRevision.packageDistributionFlag')}}\r\n                  </el-checkbox>\r\n                </el-col>\r\n                <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='1'\">\r\n                  <el-checkbox label=\"productCoverFlag\">{{$t('pdppRevision.packageCoverFlag')}}</el-checkbox>\r\n                </el-col>\r\n                <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='1'\">\r\n                  <el-checkbox label=\"productUnderwritingFlag\">{{$t('pdppRevision.packageUnderwritingFlag')}}\r\n                  </el-checkbox>\r\n                </el-col>\r\n                <el-col :span=\"3\" v-if=\"refForm.reviseFlag==='1'\">\r\n                  <el-checkbox label=\"productHePeiFlag\">{{$t('pdppRevision.packageHePeiFlag')}}</el-checkbox>\r\n                </el-col>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"16\">\r\n        <el-form-item :label=\"$t('pdppRevision.ppReviseExpl')\" prop=\"ppReviseIdea\">\r\n          <el-input type=\"textarea\"\r\n                    :autosize=\"{ minRows: 3, maxRows: 10}\"\r\n                    :placeholder=\"$t('pdppRevision.pleaseInput')+$t('pdppRevision.ppReviseExpl')\"\r\n                    v-model=\"refForm.ppReviseIdea\">\r\n          </el-input>\r\n        </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <el-row style=\"margin-top: 20px\">\r\n        <el-form-item align=\"left\">\r\n          <el-button type=\"primary\" @click=\"revisePass(refForm)\"\r\n                     icon=\"el-icon-circle-check\" :disabled=\"canUse\"\r\n                     v-auth=\"'pdpp-definition-revision:revisePdInfoData'\">{{$t('pdppRevision.applyRevise')}}\r\n          </el-button>\r\n          <el-button type=\"primary\" @click=\"refresh()\"  icon=\"el-icon-refresh\">{{$t('pdppRevision.refresh')}}\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <el-dialog :visible.sync=\"dialogTableVisible1\" v-if=\"dialogTableVisible1\" v-dialog-drag center :close-on-click-modal=\"false\" width=\"75%\"  @open=\"reloadDetail()\">\r\n      <cus-page-title-back :label=\"$t('pdppRevision.pageTitle')\"  @backTo=\"closeDialog\" :isDialog=\"true\"/>\r\n      <el-form label-width=\"auto\" ref=\"pdInfoForm\" :model=\"pdInfoForm\">\r\n        <el-row>\r\n          <el-col :cols=\"8\">\r\n            <el-form-item :label=\"$t('pdppRevision.package')\">\r\n              <el-tag effect=\"light\" size=\"medium\" type=\"info\">{{pdInfoForm.ppCode}}:{{pdInfoForm.ppName}}</el-tag>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <cus-table-title  :label=\"$t('pdppRevision.ppReviseRecords')\" />\r\n      <el-table :data=\"tables\" size=\"mini\" fit element-loading-text=\"Loading\" border highlight-current-row\r\n                align=\"center\" class=\"wraper-table\">\r\n        <el-table-column :label=\"$t('table.id')\" prop=\"id\" align=\"center\" width=\"50px\" sortable></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.detail')\" align=\"center\" type=\"expand\" @click=\"getCompleteData\">\r\n          <template slot-scope=\"props\">\r\n            <el-form class=\"demo-table-expand\" inline label-position=\"right\">\r\n              <el-row>\r\n                <el-form-item :label=\"$t('pdppRevision.ppReviseOrder')\">\r\n                  <span>{{ props.row.pdReviseOrder }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdppRevision.pdppReviseDate')\">\r\n                  <span>{{ props.row.pdReviseDate }}</span>\r\n                </el-form-item>\r\n              </el-row>\r\n              <el-row>\r\n                <el-form-item :label=\"$t('pdppRevision.returnFuncNode')\" class=\"expandWidth\">\r\n                  <el-input class=\"notTextarea\" type=\"textarea\" autosize\r\n                            :value=\"getFuncCode(props.row.pdReturnFuncCode)\"\r\n                            readonly></el-input>\r\n                </el-form-item>\r\n              </el-row>\r\n              <el-row>\r\n                <el-form-item :label=\"$t('pdppRevision.ppReviseStaff')\">\r\n                  <span>{{ props.row.pdReviseStaff }}</span>\r\n                </el-form-item>\r\n\r\n                <el-form-item :label=\"$t('pdppRevision.completeData')\">\r\n                  <span>{{ props.row.completeDate }}</span>\r\n                </el-form-item>\r\n              </el-row>\r\n              <el-row>\r\n                <el-form-item :label=\"$t('pdppRevision.ppReviseExpl')\" class=\"expandWidth\">\r\n                  <el-col :span=\"24\">\r\n                    <el-input class=\"notTextarea\" type=\"textarea\" autosize :value=\"props.row.pdReviseExpl\"\r\n                              readonly></el-input>\r\n                  </el-col>\r\n                </el-form-item>\r\n              </el-row>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.ppCode')\" prop=\"pdCode\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.ppName')\" prop=\"pdName\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.ppReviseOrder')\" prop=\"pdReviseOrder\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.pdppReviseDate')\" prop=\"pdReviseDate\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.ppReviseType')\" prop=\"pdReviseType\" align=\"center\" :formatter=getReviseType></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.ppReviseStaff')\" prop=\"pdReviseStaff\" align=\"center\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdppRevision.completeData')\" prop=\"completeDate\" align=\"center\"></el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <cus-pagination ref=\"detailPage\" url=\"/pdpp-definition-revision/base/queryDetailData\" :pageSize=\"10\"\r\n                      :params=\"detailParams\"\r\n                      v-model=\"tables\"/>\r\n    </el-dialog>\r\n\r\n    <cus-page-dialog :dialogShow=\"dialogShow\" :dialogTitle=\"dialogTitle\" :component=\"dialogComponent\" @close=\"closePageDialog\"></cus-page-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\n  import {queryPdInfo, revisePdInfoData} from '@/api/basicinfo/pdppDefinitionRevision'\r\n\r\n  let count = 0;\r\n  export default {\r\n    name: 'productDefinitionRevision',\r\n    data() {\r\n      return {\r\n        showRow:false,\r\n        dialogShow:false,\r\n        dialogTitle:'',\r\n        dialogComponent:'',\r\n        form: {\r\n          processInstanceId: '6367efa2-73fc-11ea-906a-1263c8728199'\r\n        },\r\n        pdInfoForm: {\r\n          ppCode: '',\r\n          ppName: '',\r\n        },\r\n        pdSelForm: {\r\n          ppCode: '',\r\n          ppName: '',\r\n          ppApplDate: '',\r\n        },\r\n        /*产品信息*/\r\n        pdpdInfo: {\r\n          id: '',\r\n          ppType: '2',\r\n          ppName: '',\r\n          ppInfoId: '',\r\n          ppCode: '',\r\n          ppApplDate: ''\r\n        },\r\n        /*订正产品信息*/\r\n        pdpdReviseInfo: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdName: '',\r\n          pdReviseType: '',\r\n          pdReturnFuncCode: '',\r\n          pdReviseOrder: '',\r\n          pdReviseExpl: ''\r\n        },\r\n        productDefineRevise: '',\r\n        productRuleRevise: '',\r\n        dialogTableVisible1: false,\r\n        dialogTableVisible2: false,\r\n        chooseRowId: '',\r\n        canUse: true,\r\n        /*套餐下拉选数据*/\r\n        ppOptions: [],\r\n        //表格数据\r\n        configs: [],\r\n        tables: [],\r\n        pdInfo: {},\r\n        //查询参数\r\n        refForm: {\r\n          changeCheckList: [],\r\n          ppReviseIdea: '',\r\n          reviseFlag: ''\r\n        },\r\n        detailParams: {\r\n          eq_ppInfoId: '',\r\n        },\r\n        //日期\r\n        eq_ppApplDate: '',\r\n        params: {\r\n          like_pdName: '',\r\n          eq_ppCode: '',\r\n          eq_onlineId: '',\r\n          pdApplyStartDate:'',\r\n          pdApplyEndDate:''\r\n        },\r\n        pickerOptions: {\r\n          shortcuts: [{\r\n            text: '最近一周',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }, {\r\n            text: '最近一个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }, {\r\n            text: '最近三个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }]\r\n        },\r\n        //检验规则\r\n        rules: {\r\n          // ppReviseIdea: [{required: true, message: '必须输入xxxxxxxxxx', trigger: 'blur'}]\r\n          reviseFlag: [{required: true, message: this.$t('productRevision.pleaseSelectReviseFlag'), trigger: 'blur'}, {\r\n            required: true,\r\n            message: this.$t('productRevision.pleaseSelectReviseFlag'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        dialogVisible: false, //dialog显示还是隐藏\r\n        dialogStatus: '', //表单状态是新增还是修改\r\n        titleMap: {\r\n          update: this.$t('pdPdInfo.update'),\r\n          create: this.$t('pdPdInfo.add')\r\n        },\r\n      }\r\n    },\r\n    computed: {},\r\n    created() {\r\n      this.getSelectOptions();\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n      closePageDialog(){\r\n        this.dialogShow = false\r\n        this.dialogComponent = ''\r\n      },\r\n      getFuncCode(val) {\r\n        const codes = val.split(\",\");\r\n        var returnText = '';\r\n        let i = 0;\r\n        for (const item of codes) {\r\n          i++;\r\n          if (i === 4 || i === 7) {\r\n            returnText = returnText + \"\\r\\n\"\r\n          }\r\n          switch (item) {\r\n            case 'productRuleFlag':\r\n              returnText = returnText + '套餐规则订正;';\r\n              break;\r\n            case 'productFormulaFlag':\r\n              returnText = returnText + '套餐公式订正;'\r\n              break;\r\n            case 'productInfoFlag':\r\n              returnText = returnText + '套餐信息定义;'\r\n              break;\r\n            case 'productDistributionFlag':\r\n              returnText = returnText + '套餐销售定义;'\r\n              break;\r\n            case 'productCoverFlag':\r\n              returnText = returnText + '套餐承保定义;'\r\n              break;\r\n            case 'productUnderwritingFlag':\r\n              returnText = returnText + '套餐核保定义;'\r\n              break;\r\n            case 'productPreservationFlag':\r\n              returnText = returnText + '套餐保全定义;'\r\n              break;\r\n            case 'productHePeiFlag':\r\n              returnText = returnText + '套餐核赔定义;'\r\n              break;\r\n            case 'productRenewalFlag':\r\n              returnText = returnText + '套餐续期续保定义;'\r\n              break;\r\n          }\r\n        }\r\n        return returnText;\r\n      },\r\n      reloadDetail() {\r\n        if (this.$refs.detailPage) {\r\n          this.$refs.detailPage.reload();\r\n        }\r\n      },\r\n      closeDialog() {\r\n        this.dialogTableVisible1 = false\r\n      },\r\n      getReviseType(row, column) {\r\n        if (row.pdReviseType === '1') {\r\n          return '产品定义变更'\r\n        } else if (row.pdReviseType === '0') {\r\n          return '产品公式/规则变更'\r\n        } else if (row.pdReviseType === '2') {\r\n          return '产品停售变更'\r\n        }\r\n      },\r\n      resetCheck() {\r\n        this.refForm.changeCheckList = [];\r\n      },\r\n      /*页面跳转按钮组*/\r\n      getPackDesignPage() {\r\n        if (this.pdInfo) {\r\n          this.cacheCurrPagePdData(this.pdInfo)\r\n          this.dialogShow = true\r\n          this.dialogTitle = '套餐框架信息查看'\r\n          this.dialogComponent = 'product-package-definition/pp-framework-def/pp-main'\r\n          // this.$router.push({name: '产品框架定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPackSalePage() {\r\n        if (this.pdInfo) {\r\n          this.cacheCurrPagePdData(this.pdInfo)\r\n          this.dialogShow = true\r\n          this.dialogTitle = '套餐销售信息查看'\r\n          this.dialogComponent = 'product-package-definition/pp-operation-def/pp-sales-def/sale-main'\r\n        }\r\n      },\r\n      getPackProposalPage() {\r\n        if (this.pdInfo) {\r\n          this.cacheCurrPagePdData(this.pdInfo)\r\n          this.dialogShow = true\r\n          this.dialogTitle = '套餐承保信息查看'\r\n          this.dialogComponent = 'product-package-definition/pp-operation-def/pp-acceptance-def/accpt-main'\r\n        }\r\n      },\r\n      getPackUnderwritingPage() {\r\n        if (this.pdInfo) {\r\n          this.cacheCurrPagePdData(this.pdInfo)\r\n          this.dialogShow = true\r\n          this.dialogTitle = '套餐核保信息查看'\r\n          this.dialogComponent = 'product-package-definition/pp-operation-def/pp-underwriting-def/unw-main'\r\n        }\r\n      },\r\n      getPackClaimPage() {\r\n        if (this.pdInfo) {\r\n          this.cacheCurrPagePdData(this.pdInfo)\r\n          this.dialogShow = true\r\n          this.dialogTitle = '套餐核保信息查看'\r\n          this.dialogComponent = 'product-package-definition/pp-operation-def/pp-compensation-def/comp-main'\r\n        }\r\n      },\r\n      refresh(refForm) {\r\n        this.refForm.reviseFlag = '';\r\n        this.refForm.changeCheckList = [];\r\n        this.refForm.ppReviseIdea = '';\r\n      },\r\n      closeDialog1() {\r\n        this.dialogTableVisible1 = false;\r\n      },\r\n      closeDialog2() {\r\n        this.dialogTableVisible2 = false;\r\n      },\r\n      //点开详情时调用\r\n      getCompleteData() {\r\n\r\n      },\r\n      /*前往产品订正详情界面*/\r\n      toPdRevise(row) {\r\n\r\n        this.dialogTableVisible1 = true;\r\n        this.pdInfoForm.ppCode = row.ppCode;\r\n        this.pdInfoForm.ppName = row.ppName;\r\n        this.detailParams.eq_ppInfoId = row.id;\r\n\r\n      },\r\n      /*前往产品信息弹窗页面*/\r\n      toPdInfo(row) {\r\n        this.pdInfo = row;\r\n        this.dialogTableVisible2 = true;\r\n        this.pdInfoForm.ppCode = row.ppCode;\r\n        this.pdInfoForm.ppName = row.ppName;\r\n      },\r\n      /*查询表格数据*/\r\n      queryTableData() {\r\n        if (this.params.eq_ppCode || this.params.eq_ppApplDate) {\r\n          this.$refs.page.reload();\r\n        } else {\r\n          this.params.eq_ppCode = '';\r\n          this.$refs.page.reload();\r\n          count = 0;\r\n        }\r\n      },\r\n      /*选中表格的一行*/\r\n      chooseOneRow(row, column, event) {\r\n        if (event.target.nodeName === \"INPUT\") {\r\n          this.pdInfo = row;\r\n          if (row.id == this.chooseRowId) {\r\n            this.chooseRowId = '';\r\n            this.canUse = true;\r\n            this.showRow=false;\r\n          } else {\r\n            this.showRow=true;\r\n            this.chooseRowId = row.id;\r\n            this.pdpdInfo.ppCode = row.ppCode;\r\n            this.pdpdInfo.ppName = row.ppName;\r\n            this.pdpdInfo.id = row.id;\r\n            this.pdpdInfo.ppApplDate = row.ppApplDate;\r\n            this.pdpdReviseInfo.pdCode = row.ppCode;\r\n            this.pdpdReviseInfo.pdName = row.ppName;\r\n            this.pdpdReviseInfo.pdInfoId = row.id;\r\n            this.refForm.reviseFlag = '';\r\n            this.refForm.checkList1 = [];\r\n            this.refForm.checkList2 = [];\r\n            this.refForm.checkList3 = [];\r\n            this.refForm.ppReviseIdea = '';\r\n\r\n            this.canUse = false;\r\n\r\n          }\r\n        }\r\n      },\r\n      /*获取产品下拉选数据*/\r\n      getSelectOptions() {\r\n        queryPdInfo(this.buildRequestData()).then(res => {\r\n          this.ppOptions = [];\r\n          console.log(res.data)\r\n          for (let data of res.data) {\r\n            let option = {ppCode: '', ppName: ''};\r\n            option.ppCode = data.ppCode;\r\n            option.ppName = data.ppName;\r\n            this.ppOptions.push(option);\r\n            this.params.eq_ppCode = '';\r\n          }\r\n        })\r\n      },\r\n      handleSearch() {\r\n        this.$refs.page.reload()\r\n      },\r\n      handleCreate() {\r\n        this.resetForm()\r\n        this.dialogStatus = 'create'\r\n        this.dialogVisible = true\r\n      },\r\n      handleUpdate(row) {\r\n        this.form = Object.assign({}, row)\r\n        this.dialogStatus = 'update'\r\n        this.dialogVisible = true\r\n      },\r\n      handleDelete(id) {\r\n        deletePdPdInfo(id).then(response => {\r\n          this.handleSearch()\r\n          this.notifySuccess(response.message)\r\n          this.dialogVisible = false\r\n        })\r\n      },\r\n      submitForm() {\r\n        this.$refs.dataForm.validate(valid => {\r\n          if (valid) {\r\n            let back;\r\n            if (this.form.id) {\r\n              back = updatePdPdInfo(this.form)\r\n            } else {\r\n              back = addPdPdInfo(this.form)\r\n            }\r\n            back.then(response => {\r\n              this.handleSearch()\r\n              this.notifySuccess(response.message)\r\n              this.dialogVisible = false\r\n            })\r\n          }\r\n        })\r\n      },\r\n      resetForm() {\r\n        this.form = {  //表单数据与后端实体类对应\r\n          id: '', //主键ID\r\n          xxxx: ''\r\n        }\r\n      },\r\n\r\n      /*订正确认*/\r\n      revisePass(refForm) {\r\n        this.$refs[refForm].validate((valid) => {\r\n            if (valid) {\r\n              this.pdpdReviseInfo.pdReviseExpl = this.refForm.ppReviseIdea;\r\n              //准备数据\r\n              this.prepareData();\r\n\r\n              let map = {\r\n                \"pdpdInfo\": this.pdpdInfo,\r\n                \"pdpdReviseInfo\": this.pdpdReviseInfo,\r\n                \"eq_ppCode\": this.pdSelForm.ppCode,\r\n                \"like_pdName\": this.pdSelForm.ppName,\r\n                \"eq_ppApplDate\": this.pdSelForm.ppApplDate\r\n              };\r\n              console.log(map)\r\n              if (refForm.reviseFlag) {\r\n                if (this.refForm.changeCheckList.length === 0) {\r\n                  this.messageError(this.$t('productRevision.pleaseSelectReturn'))\r\n                  return\r\n                }\r\n              } else {\r\n                this.messageError(this.$t('productRevision.pleaseSelectReviseFlag'))\r\n                return\r\n              }\r\n\r\n\r\n              revisePdInfoData(this.buildRequestData(map)).then(res => {\r\n                if (res.code == 200) {\r\n                  this.notifySuccess(res.message);\r\n                  this.$refs.page.reload();\r\n                  this.chooseRowId = '';\r\n                  count = 0;\r\n                }\r\n\r\n              });\r\n            }\r\n          }\r\n        )\r\n      },\r\n      prepareData() {\r\n        if (this.refForm.reviseFlag) {\r\n          this.pdpdReviseInfo.pdReturnFuncCode = this.refForm.changeCheckList;\r\n          this.pdpdReviseInfo.pdReviseType = this.refForm.reviseFlag;\r\n        }\r\n        this.pdSelForm.ppName = this.pdpdInfo.ppName;\r\n        this.pdSelForm.ppCode = this.pdpdInfo.ppCode;\r\n        this.pdSelForm.ppApplDate = this.pdpdInfo.ppApplDate;\r\n      }\r\n\r\n\r\n    },\r\n    watch: {\r\n      configs(newVal, oldVal) {\r\n        if (count == 0) {\r\n          this.getSelectOptions(newVal);\r\n          count = 1\r\n        }\r\n      },\r\n      eq_ppApplDate(val) {\r\n        if (val) {\r\n          this.params.pdApplyStartDate = val[0];\r\n          this.params.pdApplyEndDate = val[1];\r\n        } else {\r\n          this.params.pdApplyStartDate = '';\r\n          this.params.pdApplyEndDate = ''\r\n        }\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n  .expandWidth {\r\n    width: 100% !important;\r\n  }\r\n\r\n  .expandWidth .el-form-item__content {\r\n    width: 70%;\r\n  }\r\n\r\n  .notTextarea .el-textarea__inner {\r\n    border: 0;\r\n    color: #606266;\r\n    resize: none;\r\n    background-color: white;\r\n    padding: 0;\r\n    overflow: hidden;\r\n    margin-top: 3px;\r\n    width: 65%;\r\n  }\r\n\r\n  .pre-icon .el-form-item__label:before {\r\n    content: \"\\007C\"\r\n  }\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n  .min-table {\r\n    width: 50%\r\n  }\r\n\r\n  .listRight {\r\n    padding-right: 30px;\r\n  }\r\n\r\n\r\n</style>\r\n"]}]}