{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-sales-def\\sale-main\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-sales-def\\sale-main\\index.vue","mtime":1609847107049},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBvcGVyYXRpb25idXR0b24gZnJvbSAnQC92aWV3cy9iYXNpY2luZm8vb3BlcmF0aW9uZW5kL2luZGV4Jw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQoNCmxldCBfdGhpcw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncHJvZHVjdFBhY2thZ2VTYWxlTWFpbicsDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ3RlbmFudENvZGUnXSkNCiAgfSwNCiAgZmlsdGVyczoge30sDQogIGRhdGEoKSB7DQogICAgX3RoaXMgPSB0aGlzDQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHsNCiAgICAgICAgcHBDb2RlOiAnJywNCiAgICAgICAgcHBOYW1lOiAnJw0KICAgICAgfSwNCiAgICAgIHBhZ2VGbGFnOicnLA0KICAgICAgY29tYm9JbmZvOnt9LA0KICAgICAgc2hvd1BhZ2VGbGFnOiAwLA0KICAgICAgdHlwZTogJ3BhY2thZ2VEaXN0cmlidXRpb25GbGFnJywNCiAgICAgIHBkUHJvY2Vzc0lkOiAnJywNCiAgICAgIGFjdGl2ZU5hbWU6IDAsDQogICAgICBhY3RpdmVUYWJOYW1lOiAncGFja2FnZVNhbGVCYXNlJywNCiAgICAgIGFjdGl2ZTogJ3NhbGUnLA0KICAgICAgaXNGaXhlZDogZmFsc2UsDQogICAgICBzYWxlRmxhZzE6IGZhbHNlLA0KICAgICAgc2FsZUZsYWcyOiBmYWxzZSwNCiAgICAgIG9mZnNldFRvcDogMjAsDQogICAgICBjb21wb25lbnROYW1lOiAnJywNCiAgICAgIG5vd1Bvc2l0aW9uOiAncGFja2FnZVNhbGVCYXNlJywNCiAgICAgIHN0ZXBPcmRlcjogeyAncGFja2FnZVNhbGVCYXNlJzogMCwgJ3BhY2thZ2VTYWxlRmVlJzogMSB9DQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgb3BlcmF0aW9uYnV0dG9uDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaW5pdEhlaWdodCkNCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICB0aGlzLm9mZnNldFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib3hGaXhlZCcpLm9mZnNldFRvcA0KICAgIH0pDQogICAgdGhpcy4kZW1pdCgnZmluaXNoJykNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICAvLyB0aGlzLnNob3dQYWdlRmxhZyA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnNob3dQYWdlRmxhZw0KICAgIHRoaXMucGFnZUZsYWc9dGhpcy4kcm91dGUucXVlcnkucGFnZUZsYWcNCiAgICBsZXQgcGRJbmZvRGF0YSA9IHRoaXMuZ2V0UGREYXRhKCk7DQogICAgdGhpcy5jb21ib0luZm89cGRJbmZvRGF0YQ0KICAgIHRoaXMuZm9ybS5wcENvZGUgPSBwZEluZm9EYXRhLnBwQ29kZQ0KICAgIHRoaXMuZm9ybS5wcE5hbWUgPSBwZEluZm9EYXRhLnBwTmFtZQ0KICAgIHRoaXMucGRQcm9jZXNzSWQgPSBwZEluZm9EYXRhLnBkUHJvY2Vzc0lkDQogICAgdGhpcy5zd2l0Y2hDb21wb25lbnQoJ3BhY2thZ2VTYWxlQmFzZScpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmaW5pc2hQYWdlKCl7DQogICAgICB0aGlzLiRlbWl0KCdmaW5pc2gnKQ0KICAgIH0sDQogICAgaGFuZGxlU2FsZSh0eXBlKSB7DQogICAgICBsZXQgaW5kZXggPSB0aGlzLnN0ZXBPcmRlclt0eXBlXQ0KICAgICAgaWYgKHRoaXMubm93UG9zaXRpb24gIT09IHR5cGUpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNTYXZlZCkgew0KICAgICAgICAgIHRoaXMuYWN0aXZlVGFiTmFtZSA9IHR5cGUNCiAgICAgICAgICB0aGlzLmlzU2F2ZWQgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuYWN0aXZlTmFtZSA9IGluZGV4DQogICAgICAgICAgdGhpcy5ub3dQb3NpdGlvbiA9IHR5cGUNCiAgICAgICAgICB0aGlzLnN3aXRjaENvbXBvbmVudCh0eXBlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGNvbmZpcm0oDQogICAgICAgICAgICB0aGlzLiR0KCdwcm9kdWN0TWVudS5tZXNzYWdlVGl0bGUnKSwNCiAgICAgICAgICAgIHRoaXMuJHQoJ3Byb2R1Y3RNZW51Lm1lc3NhZ2VUaXAnKSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ3Byb2R1Y3RNZW51Lm1lc3NhZ2VCdXR0b24yJyksDQogICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ3Byb2R1Y3RNZW51Lm1lc3NhZ2VCdXR0b24xJyksDQogICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYk5hbWUgPSB0eXBlDQogICAgICAgICAgICB0aGlzLmFjdGl2ZU5hbWUgPSBpbmRleA0KICAgICAgICAgICAgdGhpcy5ub3dQb3NpdGlvbiA9IHR5cGUNCiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKQ0KICAgICAgICAgICAgdGhpcy5zd2l0Y2hDb21wb25lbnQodHlwZSkNCiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYk5hbWUgPSB0aGlzLm5vd1Bvc2l0aW9uDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICB9DQogICAgfSwNCiAgICBzd2l0Y2hDb21wb25lbnQodHlwZSkgew0KICAgICAgbGV0IG1vZHVsZUxvY2F0aW9uID0gdGhpcy5nZXRDb21wb25lbnRQYXRoKHR5cGUpDQogICAgICBjb25zdCBwYXRoID0gbW9kdWxlTG9jYXRpb24gKyAnLycgKyB0aGlzLnRlbmFudENvZGUgKyAnL2luZGV4Jw0KICAgICAgbGV0IHBhdGgxID0gdGhpcy5pc0luQWxsVnVlKHBhdGgpDQogICAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSByZXNvbHZlID0+IHJlcXVpcmUuZW5zdXJlKFtdLCAoKSA9PiByZXNvbHZlKHJlcXVpcmUoYEAvdmlld3MvJHtwYXRoMX1gKSkpDQogICAgfSwNCiAgICBnZXRDb21wb25lbnRQYXRoKHR5cGUpIHsNCiAgICAgIHRoaXMuc2FsZUZsYWcxID1mYWxzZQ0KICAgICAgdGhpcy5zYWxlRmxhZzIgPWZhbHNlDQogICAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgICAgY2FzZSAgJ3BhY2thZ2VTYWxlQmFzZSc6DQogICAgICAgICAgdGhpcy5zYWxlRmxhZzEgPXRydWUNCiAgICAgICAgICByZXR1cm4gJ3Byb2R1Y3QtcGFja2FnZS1kZWZpbml0aW9uL3BwLW9wZXJhdGlvbi1kZWYvcHAtc2FsZXMtZGVmL3NhbGUtYXR0ci1kZWYnDQogICAgICAgIGNhc2UgICdwYWNrYWdlU2FsZUZlZSc6DQogICAgICAgICAgdGhpcy5zYWxlRmxhZzIgPXRydWUNCiAgICAgICAgICByZXR1cm4gJ3Byb2R1Y3QtcGFja2FnZS1kZWZpbml0aW9uL3BwLW9wZXJhdGlvbi1kZWYvcHAtc2FsZXMtZGVmL3NhbGUtZmVlLWRlZicNCiAgICAgICAgZGVmYXVsdCA6DQogICAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfSwNCiAgICBwYXJlbnRGbih2YWwpIHsNCiAgICAgIHRoaXMuaXNTYXZlZCA9IHZhbA0KICAgIH0sDQogICAgZ29CYWNrKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL3Byb2R1Y3QtcGFja2FnZS1kZWZpbml0aW9uL3BwLW9wZXJhdGlvbi1kZWYvcHAtc2FsZXMtZGVmL3BwLXNhbGVzLWRlZi9zYWxlLWFwcGx5JywgcGFyYW1zOiB7fSB9KQ0KICAgIH0sDQogICAgLy8gYmFja1RvU2FsZVN0b3AoKXsNCiAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ+Wll+mkkOWBnOWUricsIHF1ZXJ5Ontjb21ib0luZm86dGhpcy5jb21ib0luZm8scGFnZUZsYWc6dGhpcy5wYWdlRmxhZ319KQ0KICAgIC8vIH0sDQogICAgY2xpY2tUYWIodmFsKSB7DQogICAgICBsZXQgdHlwZSA9IHZhbC5uYW1lDQogICAgICB0aGlzLmhhbmRsZVNhbGUodHlwZSkNCiAgICB9LA0KICAgIGluaXRIZWlnaHQoKSB7DQogICAgICBsZXQgc2Nyb2xsVG9wID0NCiAgICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0IHx8DQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwNCiAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ANCiAgICAgIHRoaXMuaXNGaXhlZCA9IHNjcm9sbFRvcCA+IHRoaXMub2Zmc2V0VG9wDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-sales-def/sale-main","sourcesContent":["<template>\r\n  <cus-wraper>\r\n\r\n    <div class=\"package-sale-container\">\r\n\r\n      <cus-page-title-back @backTo=\"goBack\" :label=\"$t('route.pdPackageSaleDefinition')\"/>\r\n<!--      <cus-page-title-back v-if=\"showPageFlag=='1'\" @backTo=\"backToSaleStop\" :label=\"$t('productPackageSaleMain.comboStopPage')\"/>-->\r\n\r\n      <!-- 产品套餐信息 -->\r\n      <el-form>\r\n        <el-row>\r\n          <el-form-item :label=\"$t('productPackageSaleMain.productMeat')\">\r\n            <el-tag type=\"info\">{{ form.ppCode + ' : ' + form.ppName }}</el-tag>\r\n          </el-form-item>\r\n        </el-row>\r\n      </el-form>\r\n      <el-collapse v-model=\"active\" accordion class=\"collapseCus collapsePPCusSale\" id=\"boxFixed\"\r\n                   :class=\"{'is_fixed' : isFixed}\">\r\n        <el-collapse-item :title=\"$t('route.pdPackageSaleDefinition')\" name=\"sale\">\r\n          <div style=\"height: 64px;\" class=\"stepDiv\">\r\n            <el-steps process-status=\"finish \" finish-status=\"wait\" direction=\"vertical\" :active=\"activeName\">\r\n              <el-step icon=\"el-icon-info\" :title=\"$t('productPackageSaleMain.stepbasicInfoDefinition')\"\r\n                       @click.native=\"handleSale('packageSaleBase')\"></el-step>\r\n              <el-step icon=\"el-icon-info\" :title=\"$t('productPackageSaleMain.steppackageSaleFeeMenu')\"\r\n                       @click.native=\"handleSale('packageSaleFee')\"></el-step>\r\n            </el-steps>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n\r\n      <el-tabs @tab-click=\"clickTab\" type=\"border-card\" v-model=\"activeTabName\">\r\n        <el-tab-pane :label=\"$t('productPackageSaleMain.basicInfoDefinition')\" name=\"packageSaleBase\">\r\n          <div :class=\"{ 'showDiv': this.showPageFlag == 1 }\"></div>\r\n          <component @childFn=\"parentFn\" :is=\"componentName\" v-if=\"saleFlag1\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n        <el-tab-pane :label=\"$t('productPackageSaleMain.packageSaleFeeMenu')\" name=\"packageSaleFee\">\r\n          <div :class=\"{ 'showDiv': this.showPageFlag == 1 }\"></div>\r\n          <component @childFn=\"parentFn\" :is=\"componentName\" v-if=\"saleFlag2\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n\r\n      <operationbutton :type=\"type\" :procInsId=\"pdProcessId\" clazz=\"packageFinishDefWithNav\"></operationbutton>\r\n    </div>\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n\r\nimport operationbutton from '@/views/basicinfo/operationend/index'\r\nimport { mapGetters } from 'vuex'\r\n\r\nlet _this\r\nexport default {\r\n  name: 'productPackageSaleMain',\r\n  computed: {\r\n    ...mapGetters(['tenantCode'])\r\n  },\r\n  filters: {},\r\n  data() {\r\n    _this = this\r\n    return {\r\n      form: {\r\n        ppCode: '',\r\n        ppName: ''\r\n      },\r\n      pageFlag:'',\r\n      comboInfo:{},\r\n      showPageFlag: 0,\r\n      type: 'packageDistributionFlag',\r\n      pdProcessId: '',\r\n      activeName: 0,\r\n      activeTabName: 'packageSaleBase',\r\n      active: 'sale',\r\n      isFixed: false,\r\n      saleFlag1: false,\r\n      saleFlag2: false,\r\n      offsetTop: 20,\r\n      componentName: '',\r\n      nowPosition: 'packageSaleBase',\r\n      stepOrder: { 'packageSaleBase': 0, 'packageSaleFee': 1 }\r\n    }\r\n  },\r\n  components: {\r\n    operationbutton\r\n  },\r\n  mounted() {\r\n    window.addEventListener('scroll', this.initHeight)\r\n    this.$nextTick(() => {\r\n      this.offsetTop = document.querySelector('#boxFixed').offsetTop\r\n    })\r\n    this.$emit('finish')\r\n  },\r\n  created() {\r\n    // this.showPageFlag = this.$route.query.showPageFlag\r\n    this.pageFlag=this.$route.query.pageFlag\r\n    let pdInfoData = this.getPdData();\r\n    this.comboInfo=pdInfoData\r\n    this.form.ppCode = pdInfoData.ppCode\r\n    this.form.ppName = pdInfoData.ppName\r\n    this.pdProcessId = pdInfoData.pdProcessId\r\n    this.switchComponent('packageSaleBase')\r\n  },\r\n  methods: {\r\n    finishPage(){\r\n      this.$emit('finish')\r\n    },\r\n    handleSale(type) {\r\n      let index = this.stepOrder[type]\r\n      if (this.nowPosition !== type) {\r\n        if (this.isSaved) {\r\n          this.activeTabName = type\r\n          this.isSaved = false\r\n          this.activeName = index\r\n          this.nowPosition = type\r\n          this.switchComponent(type)\r\n        } else {\r\n          this.$confirm(\r\n            this.$t('productMenu.messageTitle'),\r\n            this.$t('productMenu.messageTip'),\r\n            {\r\n              confirmButtonText: this.$t('productMenu.messageButton2'),\r\n              cancelButtonText: this.$t('productMenu.messageButton1'),\r\n              type: 'warning'\r\n            }\r\n          ).then(() => {\r\n            this.activeTabName = type\r\n            this.activeName = index\r\n            this.nowPosition = type\r\n            window.scrollTo(0, 0)\r\n            this.switchComponent(type)\r\n          }).catch(() => {\r\n            this.activeTabName = this.nowPosition\r\n          })\r\n        }\r\n\r\n      }\r\n    },\r\n    switchComponent(type) {\r\n      let moduleLocation = this.getComponentPath(type)\r\n      const path = moduleLocation + '/' + this.tenantCode + '/index'\r\n      let path1 = this.isInAllVue(path)\r\n      this.componentName = resolve => require.ensure([], () => resolve(require(`@/views/${path1}`)))\r\n    },\r\n    getComponentPath(type) {\r\n      this.saleFlag1 =false\r\n      this.saleFlag2 =false\r\n      switch (type) {\r\n        case  'packageSaleBase':\r\n          this.saleFlag1 =true\r\n          return 'product-package-definition/pp-operation-def/pp-sales-def/sale-attr-def'\r\n        case  'packageSaleFee':\r\n          this.saleFlag2 =true\r\n          return 'product-package-definition/pp-operation-def/pp-sales-def/sale-fee-def'\r\n        default :\r\n          return ''\r\n      }\r\n    },\r\n    parentFn(val) {\r\n      this.isSaved = val\r\n    },\r\n    goBack() {\r\n      this.$router.push({ path: '/product-package-definition/pp-operation-def/pp-sales-def/pp-sales-def/sale-apply', params: {} })\r\n    },\r\n    // backToSaleStop(){\r\n    //   this.$router.push({ name: '套餐停售', query:{comboInfo:this.comboInfo,pageFlag:this.pageFlag}})\r\n    // },\r\n    clickTab(val) {\r\n      let type = val.name\r\n      this.handleSale(type)\r\n    },\r\n    initHeight() {\r\n      let scrollTop =\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop\r\n      this.isFixed = scrollTop > this.offsetTop\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n\r\n\r\n.showDiv {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: -40px;\r\n  margin-left: -40px;\r\n  position: absolute;\r\n  background: #ffffff00;\r\n  z-index: 999;\r\n}\r\n\r\n\r\n.collapsePPCusSale {\r\n  top: 130px ;\r\n  right: 0px !important;\r\n  width: 166px !important;\r\n}\r\n\r\n\r\n\r\n.package-sale-container {\r\n  width: calc(100% - 150px);\r\n}\r\n\r\n\r\n</style>\r\n"]}]}