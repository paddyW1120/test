{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\program-def\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\program-def\\index.vue","mtime":1609847106903},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7YWRkUGR0ZW1wUGRQcm9nLCBkZWxldGVQZHRlbXBQZFByb2csIHVwZGF0ZVBkdGVtcFBkUHJvZyxnZXRCbmZJbmZvLGZpbmRBbGxQcmVtaXVtQnlQcm9kdWN0SWR9IGZyb20gIkAvYXBpL2Jhc2ljaW5mby9wZHRlbXBwZHByb2ciDQppbXBvcnQge2dldFBkQ2xzTGFiSW5mb30gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL1Byb2R1Y3RBdHRyaWJ1dGVEZWZpbml0aW9uIg0KaW1wb3J0IHByZW1pdW0gZnJvbSAiQC92aWV3cy9wcm9kdWN0LWRlZmluaXRpb24vcGQtZnJhbWV3b3JrLWRlZi9wZC1zdHJ1Y3R1cmUtZGVmL3BheW1lbnQtZGVmL2luZGV4Ig0KaW1wb3J0IGNsbUJuZnQgZnJvbSAiQC92aWV3cy9wcm9kdWN0LWRlZmluaXRpb24vcGQtZnJhbWV3b3JrLWRlZi9wZC1zdHJ1Y3R1cmUtZGVmL2d1YXJhbnRlZS1kZWYvZ2VuZXJhbC1tZWRpY2FsL2luZGV4Ig0KaW1wb3J0IHNydkJuZnQgZnJvbSAiQC92aWV3cy9wcm9kdWN0LWRlZmluaXRpb24vcGQtZnJhbWV3b3JrLWRlZi9wZC1zdHJ1Y3R1cmUtZGVmL2d1YXJhbnRlZS1kZWYvc3Vydml2YWwvaW5kZXgiDQppbXBvcnQgbm9DbG1CbmZ0IGZyb20gIkAvdmlld3MvcHJvZHVjdC1kZWZpbml0aW9uL3BkLWZyYW1ld29yay1kZWYvcGQtc3RydWN0dXJlLWRlZi9ndWFyYW50ZWUtZGVmL25vLWdlbmVyYWwtbWVkaWNhbC9pbmRleCINCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnUHJvZ3JhbW1lRGVmaW5pdGlvbicsDQogIHByb3BzOnsNCiAgICByZWFhZE9ubHlQcFByb2c6ew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHtwcmVtaXVtLCBjbG1CbmZ0LCBzcnZCbmZ0LG5vQ2xtQm5mdH0sDQogIGZpbHRlcnM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAgIGluaXRGb3JtRGF0YTE6ZmFsc2UsDQogICAgICAgIGluaXRGb3JtRGF0YTI6ZmFsc2UsDQogICAgICAgIGluaXRGb3JtRGF0YTM6ZmFsc2UsDQogICAgICAgIGluaXRGb3JtRGF0YTQ6ZmFsc2UsDQogICAgICBzaG93UGFnZUZsYWdTOiAwLA0KICAgICAgc2hvd1BhZ2VGbGFnOiAwLA0KICAgICAgc2VsZWN0ZWRQcmVtaXVtQ29kZTogJycsDQogICAgICBzZWxlY3RlZENsbUJuZnQ6IHt9LA0KICAgICAgc2VsZWN0ZWRTcnZCbmZ0OiB7fSwNCiAgICAgIC8vIOS6p+WTgeS/oeaBrw0KICAgICAgcHJvZHVjdDogew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwZENvZGU6ICcnLA0KICAgICAgICBwZEVkaXRpb246ICcnLA0KICAgICAgICBwZFZlcklkOiB1bmRlZmluZWQsDQogICAgICAgIHBkU2FsZWNobmw6ICcnLA0KICAgICAgICBwZE5hbWU6ICcnLA0KICAgICAgICBwZFNob3J0bmFtZTogJycsDQogICAgICAgIHBkRW5OYW1lOiAnJywNCiAgICAgICAgcGRTaG9ydEVuTmFtZTogJycsDQogICAgICAgIG9wZXJhdG9yOiAnJywNCiAgICAgICAgcGRTdGFydERhdGVSdWxlOiAnJywNCiAgICAgICAgcGRTdGFydERhdGVNb2RlOiAnJywNCiAgICAgICAgcGRTdGFydFBlcmlvZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFN0YXJ0UGVyaW9kVW5pdDogJycsDQogICAgICAgIHBkRW5kRGF0ZVJ1bGU6ICcnLA0KICAgICAgICBwZEVuZERhdGVNb2RlOiAnJywNCiAgICAgICAgcGRFbmRQZXJpb2Q6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRFbmRQZXJpb2RVbml0OiAnJywNCiAgICAgICAgcGRHcmFjZVBlcmlvZDogdW5kZWZpbmVkLA0KICAgICAgICBwZE9ic2VydmF0aW9uRGF5OiB1bmRlZmluZWQsDQogICAgICAgIHBkQXBwbERhdGU6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRQcm9jZXNzSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRTdGFydERhdGU6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRTdG9wRGF0ZTogdW5kZWZpbmVkLA0KICAgICAgICBjcmVhdGVUaW1lOiB1bmRlZmluZWQsDQogICAgICAgIHVwZGF0ZVRpbWU6IHVuZGVmaW5lZA0KICAgICAgfSwNCiAgICAgIHByb2R1Y3RfZXh0cmE6IHsNCiAgICAgICAgdHlwZVJlZ2lvbjogJycNCiAgICAgIH0sDQogICAgICAvLyDmlrnmoYjooajmoLwNCiAgICAgIHRhYmxlRGF0YV9wcm9ncmFtbWU6IFtdLA0KICAgICAgcGFyYW1zX3Byb2dyYW1tZTogew0KICAgICAgICBwcm9kdWN0SWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgbGlrZV9wZFByb2dOYW1lOiAnJywNCiAgICAgICAgZXFfcGRQcm9nQ29kZTogJycNCiAgICAgIH0sDQogICAgICBzZWxlY3RlZFByb2dyYW1tZTogew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwcm9ncmFtbWVDb2RlOiAnJywNCiAgICAgICAgcHJvZ3JhbW1lTmFtZTogJycsDQogICAgICAgIHByZW1pdW1Db2RlOiAnJywNCiAgICAgICAgcHJlbWl1bU5hbWU6ICcnLA0KICAgICAgICBiZW5lZml0Q29kZTogJycsDQogICAgICAgIGJlbmVmaXROYW1lOiAnJywNCiAgICAgICAgYmVuZWZpdFR5cGU6ICcnLA0KICAgICAgICBwcm9ncmFtbWU6IHt9LA0KICAgICAgICBwcmVtaXVtOiB7fQ0KICAgICAgfSwNCiAgICAgIC8vIOaWueahiOe7hOWQiOihqOagvA0KICAgICAgdGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZDogW10sDQogICAgICB0YWJsZURhdGFfY29tYmluYXRpb25fYmVmb3JlX2FkZDogW10sDQogICAgICB0YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQ6IFtdLA0KICAgICAgb3JkZXJJbmRleEFycl9wcm9ncmFtbWU6IFtdLA0KICAgICAgb3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGQ6IFtdLA0KICAgICAgb3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZDogW10sDQogICAgICBwcmVtaXVtTGlzdDogW10sDQogICAgICBzdXJ2aXZhbExpc3Q6IFtdLA0KICAgICAgY2xhaW1MaXN0OiBbXSwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IHsNCiAgICAgICAgcHJlbWl1bTogZmFsc2UsDQogICAgICAgIGNsYWltQmVuZWZpdDogZmFsc2UsDQogICAgICAgIG5vQ2xhaW1CZW5lZml0OiBmYWxzZSwNCiAgICAgICAgc3Vydml2YWxCZW5lZml0OiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIC8vIOaWueahiOWvueixoQ0KICAgICAgZm9ybV9wcm9ncmFtbWU6IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRJbmZvSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRWZXJJZDogdW5kZWZpbmVkLA0KICAgICAgICBwZENvZGU6ICcnLA0KICAgICAgICBwZFByb2dDb2RlOiAnJywNCiAgICAgICAgcGRQcm9nTmFtZTogJycsDQogICAgICAgIHBkT3B0RmxhZzogJ04nLA0KICAgICAgICBwZEluc3VQZXJpb2Q6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRJbnN1UGVyaW9kVW5pdDogJycsDQogICAgICAgIHBkSW5zdVBlcmlvZENhbE1vZGU6ICcwJywNCiAgICAgICAgcGRJbnN1RW5kQ2FsUnVsZTogJzAnLA0KICAgICAgICBwZEFtbnRDYWxSdWxlOiAnJywNCiAgICAgICAgcGRBZGRBbW50RmxhZzogJ1knLA0KICAgICAgICBwZFBheUVuZENhbE1vZGU6ICcnLA0KICAgICAgICBwZEFtbnRTYWxlVHlwZTogJycsDQogICAgICAgIG9wZXJhdG9yOiAnJywNCiAgICAgICAgY3JlYXRlVGltZTogJycsDQogICAgICAgIHVwZGF0ZVRpbWU6ICcnDQogICAgICB9LA0KICAgICAgLy8g5pa55qGI57uE5ZCI5a+56LGhDQogICAgICBmb3JtX2NvbWJpbmF0aW9uOiB7DQogICAgICAgIHByZW1pdW06IHVuZGVmaW5lZCwNCiAgICAgICAgc3Vydml2YWxGbGFnOiBmYWxzZSwNCiAgICAgICAgY2xhaW1GbGFnOiBmYWxzZSwNCiAgICAgICAgc3Vydml2YWw6IFtdLA0KICAgICAgICBjbGFpbTogW10NCiAgICAgIH0sDQogICAgICAvLyDmlrnmoYjnu4TlkIjmlrDlop7lr7nosaENCiAgICAgIGZvcm1fY29tYmluYXRpb25fYWRkOiB7DQogICAgICAgIC8vIFBkdGVtcFBkQm5mdCDlrp7kvZPnsbvlsZ7mgKcNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRCbmZ0Q29kZTogJycsDQogICAgICAgIHBkQm5mdE5hbWU6ICcnLA0KICAgICAgICBwZEJuZnRUeXBlOiAnJywNCiAgICAgICAgcGRBZGRBbW50RmxhZzogJycsDQogICAgICAgIHBkQm5mdENhbE1vZGU6ICcnLA0KICAgICAgICBwZENhbGNJZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFVyZ2VQYXlGbGFnOiAnJywNCiAgICAgICAgY3JlYXRlVGltZTogJycsDQogICAgICAgIHVwZGF0ZVRpbWU6ICcnLA0KICAgICAgICBvcGVyYXRvcjogJycsDQogICAgICAgIC8vIHZv5bGe5oCnDQogICAgICAgIHByZW1pdW1JZDogdW5kZWZpbmVkLA0KICAgICAgICBwcmVtaXVtQ29kZTogJycsDQogICAgICAgIHByZW1pdW1OYW1lOiAnJywNCiAgICAgICAgcGRBZGRBbW50UHJvZ0ZsYWc6ICcnDQogICAgICB9LA0KICAgICAgZGlhbG9nVmlzaWJsZV9kdXBsaWNhdGVkOiBmYWxzZSwNCiAgICAgIC8vIOWIneWni+WMluagh+ivhg0KICAgICAgaW5pdEZsYWc6IHsNCiAgICAgICAgcHJlbWl1bTogZmFsc2UsDQogICAgICAgIGJlbmVmaXQ6IGZhbHNlDQogICAgICB9LA0KICAgICAgcGFnZUZsYWc6IHsNCiAgICAgICAgcHJlbWl1bTogdHJ1ZSwNCiAgICAgICAgc3Vydml2YWw6IHRydWUsDQogICAgICAgIGNsYWltOiB0cnVlDQogICAgICB9LA0KICAgICAgaW5kZXRlcm1pbmF0ZTogew0KICAgICAgICBzdXJ2aXZhbDogZmFsc2UsDQogICAgICAgIGNsYWltOiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIC8vIOihqOWNlemqjOivgQ0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgcGRQcm9nTmFtZTogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX2VudGVyJykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkUHJvZ05hbWUnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgfV0sDQogICAgICAgIHBkQWRkQW1udEZsYWc6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRBZGRBbW50RmxhZycpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZE9wdEZsYWc6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRPcHRGbGFnJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgfV0sDQogICAgICAgIHBkSW5zdVBlcmlvZENhbE1vZGU6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRJbnN1UGVyaW9kQ2FsTW9kZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZEluc3VQZXJpb2Q6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2VfZW50ZXInKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRJbnN1UGVyaW9kJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgIH1dLA0KICAgICAgICBwZEluc3VQZXJpb2RVbml0OiBbew0KICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX3NlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5wZEluc3VQZXJpb2RVbml0JyksDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgfV0sDQogICAgICAgIHBkSW5zdUVuZENhbFJ1bGU6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRJbnN1RW5kQ2FsUnVsZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZEFtbnRTYWxlVHlwZTogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX3NlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5wZEFtbnRTYWxlVHlwZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZEFtbnRDYWxSdWxlOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkQW1udENhbFJ1bGUnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XSwNCiAgICAgICAgcGRQYXlFbmRDYWxNb2RlOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkUGF5RW5kQ2FsTW9kZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dDQogICAgICB9LA0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAgICdmb3JtX3Byb2dyYW1tZS5wZEluc3VQZXJpb2RDYWxNb2RlJygpew0KICAgICAgICAgIGlmICghKHRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbnN1UGVyaW9kQ2FsTW9kZT09JzAnIHx8dGhpcy5mb3JtX3Byb2dyYW1tZS5wZEluc3VQZXJpb2RDYWxNb2RlPT0nMycpICl7DQogICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbnN1UGVyaW9kPScnOw0KICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkSW5zdVBlcmlvZFVuaXQ9Jyc7DQogICAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgICdmb3JtX3Byb2dyYW1tZS5wZEluc3VQZXJpb2QnKCl7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbnN1UGVyaW9kKXsNCiAgICAgICAgICAgICAgaWYgKCF0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkSW5zdVBlcmlvZFVuaXQpew0KICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZS5wZEluc3VQZXJpb2RVbml0PSdZJzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZS5wZEluc3VQZXJpb2RVbml0PScnOw0KICAgICAgICAgIH0NCiAgICAgIH0sDQogICAgICAnZm9ybV9wcm9ncmFtbWUucGRJbnN1UGVyaW9kVW5pdCcoKXsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtX3Byb2dyYW1tZS5wZEluc3VQZXJpb2Qpew0KICAgICAgICAgICAgICBpZiAoIXRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbnN1UGVyaW9kVW5pdCl7DQogICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkSW5zdVBlcmlvZFVuaXQ9J1knOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkSW5zdVBlcmlvZFVuaXQ9Jyc7DQogICAgICAgICAgfQ0KICAgICAgfSwNCiAgICAnZm9ybV9jb21iaW5hdGlvbi5jbGFpbUZsYWcnKHZhbCkgew0KICAgICAgdGhpcy5pbmRldGVybWluYXRlLmNsYWltID0gZmFsc2UNCiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsNCiAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltID0gW10NCiAgICAgICAgZm9yIChjb25zdCBjbGFpbSBvZiB0aGlzLmNsYWltTGlzdCkgew0KICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5jbGFpbS5wdXNoKGNsYWltKQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uY2xhaW0gPSBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgJ2Zvcm1fY29tYmluYXRpb24uY2xhaW0nKHZhbCkgew0KICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltRmxhZyA9IGZhbHNlDQogICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZS5jbGFpbSA9IGZhbHNlDQogICAgICB9IGVsc2UgaWYgKHZhbC5sZW5ndGggPCB0aGlzLmNsYWltTGlzdC5sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlLmNsYWltID0gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlLmNsYWltID0gZmFsc2UNCiAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltRmxhZyA9IHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgICdmb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsRmxhZycodmFsKSB7DQogICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSBmYWxzZQ0KICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgew0KICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWwgPSBbXQ0KICAgICAgICBmb3IgKGNvbnN0IHN1cnZpdmFsIG9mIHRoaXMuc3Vydml2YWxMaXN0KSB7DQogICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsLnB1c2goc3Vydml2YWwpDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5zdXJ2aXZhbCA9IFtdDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybV9jb21iaW5hdGlvbi5zdXJ2aXZhbCcodmFsKSB7DQogICAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWxGbGFnID0gZmFsc2UNCiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlLnN1cnZpdmFsID0gZmFsc2UNCiAgICAgIH0gZWxzZSBpZiAodmFsLmxlbmd0aCA8IHRoaXMuc3Vydml2YWxMaXN0Lmxlbmd0aCkgew0KICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSBmYWxzZQ0KICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWxGbGFnID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHt9LA0KICBtb3VudGVkKCl7DQogICAgdGhpcy4kZW1pdCgnZmluaXNoJyk7DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgaWYgKHRoaXMucmVhYWRPbmx5UHBQcm9nPT09ZmFsc2Upew0KICAgICAgdGhpcy5yZWFhZE9ubHlQcFByb2c9ZmFsc2U7DQogICAgICB0aGlzLmdldFByb2R1Y3RJbmZvKCk7DQogICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lPUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZm9ybV9wcm9ncmFtbWUiKSk7DQogICAgICB0aGlzLnBhZ2VGbGFnLnN1cnZpdmFsID0gdHJ1ZQ0KICAgICAgdGhpcy5wYWdlRmxhZy5wcmVtaXVtID0gdHJ1ZQ0KICAgICAgdGhpcy5wYWdlRmxhZy5jbGFpbSA9IHRydWU7DQogICAgICB0aGlzLnByZW1pdW1MaXN0PVtdOw0KICAgICAgdGhpcy5jbGFpbUxpc3Q9W107DQogICAgICB0aGlzLnN1cnZpdmFsTGlzdD1bXTsNCiAgICAgIHRoaXMudGFibGVEYXRhX3Byb2dyYW1tZT1bXTsNCiAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbj17DQogICAgICAgIHByZW1pdW06IHVuZGVmaW5lZCwNCiAgICAgICAgICBzdXJ2aXZhbEZsYWc6IGZhbHNlLA0KICAgICAgICAgIGNsYWltRmxhZzogZmFsc2UsDQogICAgICAgICAgc3Vydml2YWw6IFtdLA0KICAgICAgICAgIGNsYWltOiBbXQ0KICAgICAgfTsNCiAgICAgIHRoaXMucHJlbWl1bUxpc3Q9SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJwcmVtaXVtTGlzdCIpKTsNCiAgICAgIHRoaXMuY2xhaW1MaXN0PUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiY2xhaW1MaXN0IikpOw0KICAgICAgdGhpcy5zdXJ2aXZhbExpc3Q9SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzdXJ2aXZhbExpc3QiKSk7DQogICAgICB0aGlzLnRhYmxlRGF0YV9wcm9ncmFtbWU9SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0YWJsZURhdGFfcHJvZ3JhbW1lIikpOw0KICAgICAgaWYgKHRoaXMudGFibGVEYXRhX3Byb2dyYW1tZS5sZW5ndGg+MCl7DQogICAgICAgIGZvcihjb25zdCBkZW1vMSBvZiB0aGlzLnRhYmxlRGF0YV9wcm9ncmFtbWUpew0KICAgICAgICAgIGZvciAoY29uc3QgaXRlbXMgb2YgdGhpcy5jbGFpbUxpc3Qpew0KICAgICAgICAgICAgaWYgKGRlbW8xLmJlbmVmaXRDb2RlPT1pdGVtcy5wZEJuZnRDb2RlKXsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uY2xhaW0ucHVzaChpdGVtcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZvcihjb25zdCBkZW1vMSBvZiB0aGlzLnRhYmxlRGF0YV9wcm9ncmFtbWUpew0KICAgICAgICAgIGZvciAoY29uc3QgaXRlbXMgb2YgdGhpcy5wcmVtaXVtTGlzdCl7DQogICAgICAgICAgICBpZiAoZGVtbzEucHJlbWl1bUNvZGU9PWl0ZW1zLnBkUHJlbUNvZGUpew0KICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24ucHJlbWl1bT1pdGVtczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZm9yKGNvbnN0IGRlbW8xIG9mIHRoaXMudGFibGVEYXRhX3Byb2dyYW1tZSl7DQogICAgICAgICAgZm9yIChjb25zdCBpdGVtcyBvZiB0aGlzLnN1cnZpdmFsTGlzdCl7DQogICAgICAgICAgICBpZiAoZGVtbzEuYmVuZWZpdENvZGU9PWl0ZW1zLnBkQm5mdENvZGUpew0KICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWwucHVzaChpdGVtcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfWVsc2Ugew0KICAgICAgdGhpcy5yZWFhZE9ubHlQcFByb2c9dHJ1ZQ0KICAgICAgdGhpcy5jYW5jZWxVcGRhdGVQcm9ncmFtbWUoKTsNCiAgICAgIHRoaXMuaW5pdCgpDQogICAgICB0aGlzLnNob3dQYWdlRmxhZyA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnNob3dQYWdlRmxhZw0KICAgICAgdGhpcy5zaG93UGFnZUZsYWdTID0gdGhpcy5zaG93UGFnZUZsYWc7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2V0RGVmYXVsdFByb2dOYW1lKCl7DQoNCiAgICAgIGlmKCF0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkUHJvZ05hbWUpew0KICAgICAgICB0aGlzLnByZW1pdW1MaXN0LmZvckVhY2goZGF0YT0+ew0KICAgICAgICAgIGlmKHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtLnBkUHJlbUNvZGUgPT0gZGF0YS5wZFByZW1Db2RlKXsNCiAgICAgICAgICAgIGlmKGRhdGEucGRQYXlOYW1lLmxhc3RJbmRleE9mKCLnvLTotLkiKSl7DQogICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRQcm9nTmFtZSA9IGRhdGEucGRQYXlOYW1lLnN1YnN0cmluZygwLGRhdGEucGRQYXlOYW1lLmxhc3RJbmRleE9mKCLnvLTotLkiKSkrIuaWueahiCINCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkUHJvZ05hbWUgPSBkYXRhLnBkUGF5TmFtZSsi5pa55qGIIg0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgICBjbG9zZWREaWEoKXsNCg0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUuc3Vydml2YWxCZW5lZml0PWZhbHNlOw0KICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlLmNsYWltQmVuZWZpdD1mYWxzZTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZS5ub0NsYWltQmVuZWZpdD1mYWxzZTsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lLnByb2dyYW1tZS5pZDsNCiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy50YWJsZURhdGFfcHJvZ3JhbW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnByb2dyYW1tZS5pZCA9PT0gYSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb2dyYW1tZSA9IGl0ZW07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lQ2hhbmdlZCgpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGNsb3NlRGlhKCl7DQogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlLnByZW1pdW09ZmFsc2U7DQogICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUpew0KICAgICAgICAgICAgICBsZXQgYSA9IHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUucHJvZ3JhbW1lLmlkOw0KICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy50YWJsZURhdGFfcHJvZ3JhbW1lKSB7DQogICAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9ncmFtbWUuaWQgPT09IGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lID0gaXRlbTsNCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lQ2hhbmdlZCgpOw0KICAgICAgICAgIH0NCiAgICAgIH0sDQogICAgaW5pdCgpIHsNCiAgICAgIHRoaXMuZ2V0UHJvZHVjdEluZm8oKTsNCiAgICAgIHRoaXMuaW5pdExpc3RTaG93KCk7DQogICAgICB0aGlzLmluaXRfdHlwZVJlZ2lvbigpOw0KICAgIH0sDQogICAgZ2V0UHJvZHVjdEluZm8oKSB7DQogICAgICAvLyDluKblhaXkuqflk4Hkv6Hmga8NCiAgICAgIHRoaXMucHJvZHVjdCA9IHRoaXMuZ2V0UGREYXRhKCkNCiAgICAgIHRoaXMucGFyYW1zX3Byb2dyYW1tZS5wcm9kdWN0SWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICB9LA0KICAgICAgaW5pdExpc3RTaG93KCl7DQoNCiAgICAgICAgdGhpcy5wcmVtaXVtTGlzdD1bXTsNCiAgICAgICAgdGhpcy5jbGFpbUxpc3Q9W107DQogICAgICAgIHRoaXMuc3Vydml2YWxMaXN0PVtdOw0KICAgICAgICBmaW5kQWxsUHJlbWl1bUJ5UHJvZHVjdElkKHRoaXMucHJvZHVjdC5pZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIGZvciAoY29uc3QgcHJlbWl1bSBvZiByZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnByZW1pdW1MaXN0LnB1c2gocHJlbWl1bSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLmluaXRGbGFnLnByZW1pdW0gPSB0cnVlDQogICAgICAgICAgICAgIGdldEJuZkluZm8odGhpcy5wcm9kdWN0LmlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgIGxldCBtYXAgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgICAgdGhpcy5zdXJ2aXZhbExpc3QgPSBtYXAuc3Vydml2YWw7DQogICAgICAgICAgICAgICAgICB0aGlzLmNsYWltTGlzdCA9IG1hcC5jbGFpbTsNCiAgICAgICAgICAgICAgICAgIGxldCBqPTA7DQogICAgICAgICAgICAgICAgICBmb3IoaiA9IDA7IGogPCB0aGlzLmNsYWltTGlzdC5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5jbGFpbUxpc3Rbal0ucGRBZGRBbW50UHJvZ0ZsYWchPScnIHx8IHRoaXMuY2xhaW1MaXN0W2pdLnBkQWRkQW1udFByb2dGbGFnIT1udWxsKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFpbUxpc3Rbal0ucGRBZGRBbW50UHJvZ0ZsYWc9Jyc7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgZm9yKGogPSAwOyBqIDwgdGhpcy5zdXJ2aXZhbExpc3QubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuc3Vydml2YWxMaXN0W2pdLnBkQWRkQW1udFByb2dGbGFnIT0nJyB8fCB0aGlzLnN1cnZpdmFsTGlzdFtqXS5wZEFkZEFtbnRQcm9nRmxhZyE9bnVsbCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vydml2YWxMaXN0W2pdLnBkQWRkQW1udFByb2dGbGFnPScnOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEZsYWcuYmVuZWZpdCA9IHRydWUNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRGbGFnLnByZW1pdW0gPT09IHRydWUgJiYgdGhpcy5pbml0RmxhZy5iZW5lZml0ID09PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRvQnVpbGRQcm9ncmFtbWUoKQ0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybV9wcm9ncmFtbWUucGRBZGRBbW50RmxhZyA9PT0gJ1knKXsNCiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwIDsgaTwgdGhpcy5zdXJ2aXZhbExpc3QubGVuZ3RoIDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXJ2aXZhbExpc3RbaV0ucGRBZGRBbW50UHJvZ0ZsYWcgPSAnWScNCg0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkQWRkQW1udEZsYWcgPT09ICdZJyl7DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCA7IGk8IHRoaXMuY2xhaW1MaXN0Lmxlbmd0aCA7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhaW1MaXN0W2ldLnBkQWRkQW1udFByb2dGbGFnID0gJ1knDQoNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KQ0KDQogICAgICB9LA0KDQogICAgLy8g6I635Y+W6Zmp56eN57G75Z6L77yI5Lqn5ZOB57G75Z6L77yJDQogICAgaW5pdF90eXBlUmVnaW9uKCkgew0KICAgICAgY29uc3QgcGFyYW1zTWFwID0gew0KICAgICAgICBwZF9pbmZvX2lkOiB0aGlzLnByb2R1Y3QuaWQsDQogICAgICAgIHBkX2Nsc190eXBlOiAnMScNCiAgICAgIH0NCiAgICAgIGdldFBkQ2xzTGFiSW5mbyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW1zTWFwKSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIGNvbnN0IHBkVGVtcENsc0xhYkxpc3QgPSByZXNwb25zZS5kYXRhDQogICAgICAgIGNvbnN0IHBkQ2xzMUFycmF5ID0gdGhpcy5fLm1hcChwZFRlbXBDbHNMYWJMaXN0LCAncGRDbHMxJykNCiAgICAgICAgaWYgKHBkQ2xzMUFycmF5Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICB0aGlzLnByb2R1Y3RfZXh0cmEudHlwZVJlZ2lvbiA9IHBkQ2xzMUFycmF5WzBdDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGF1dG9CdWlsZFByb2dyYW1tZSgpIHsNCg0KICAgICAgaWYgKHRoaXMucHJlbWl1bUxpc3QubGVuZ3RoICE9PSAxIHx8IHRoaXMuc3Vydml2YWxMaXN0Lmxlbmd0aCA9PT0gMCAmJiB0aGlzLmNsYWltTGlzdC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLnBhZ2VGbGFnLnByZW1pdW0gPSB0cnVlDQogICAgICB0aGlzLnBhZ2VGbGFnLnN1cnZpdmFsID0gdHJ1ZQ0KICAgICAgdGhpcy5wYWdlRmxhZy5jbGFpbSA9IHRydWUNCiAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtID0gdGhpcy5wcmVtaXVtTGlzdFswXQ0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mb3JtX2NvbWJpbmF0aW9uLnByZW1pdW0pDQogICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uY2xhaW0gPSB0aGlzLmNsYWltTGlzdA0KICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsID0gdGhpcy5zdXJ2aXZhbExpc3Q7DQogICAgICBpZiAodGhpcy5jbGFpbUxpc3QubGVuZ3RoPjApew0KICAgICAgICAgIGZvcihjb25zdCBpdGVtIG9mIHRoaXMuY2xhaW1MaXN0KXsNCiAgICAgICAgICAgICAgaWYgKGl0ZW0ucGRPcHRGbGFnPT0nTicpew0KICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Rm9ybURhdGEzPXRydWU7DQogICAgICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEZvcm1EYXRhMz1mYWxzZTsNCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgfWVsc2V7DQogICAgICAgICAgdGhpcy5pbml0Rm9ybURhdGEzPXRydWU7DQogICAgICB9DQogICAgICAgIGlmICh0aGlzLnN1cnZpdmFsTGlzdC5sZW5ndGg+MCl7DQogICAgICAgICAgICBmb3IoY29uc3QgaXRlbSBvZiB0aGlzLnN1cnZpdmFsTGlzdCl7DQogICAgICAgICAgICAgICAgaWYgKGl0ZW0ucGRPcHRGbGFnPT0nTicpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRGb3JtRGF0YTI9dHJ1ZTsNCiAgICAgICAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEZvcm1EYXRhMj1mYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICB0aGlzLmluaXRGb3JtRGF0YTI9dHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5wcmVtaXVtTGlzdC5sZW5ndGg9PTEpew0KICAgICAgICAgICAgdGhpcy5pbml0Rm9ybURhdGExPXRydWUNCiAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgdGhpcy5pbml0Rm9ybURhdGExPWZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmluaXRGb3JtRGF0YTIgJiYgdGhpcy5pbml0Rm9ybURhdGExICYmIHRoaXMuaW5pdEZvcm1EYXRhMyl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfcHJvZ3JhbW1lLmJ1aWxkRGF0YSgpLnRoZW4oKCk9PnsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy50YWJsZURhdGFfcHJvZ3JhbW1lLmxlbmd0aDwxKXsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFyclN0ciA9IHRoaXMucHJlbWl1bUxpc3RbMF0ucGRQYXlOYW1lLnJlcGxhY2UoIue8tOi0uSIsIiIpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkUHJvZ05hbWU9YXJyU3RyKyfmlrnmoYgnOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkT3B0RmxhZz0nTic7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZW1pdW1MaXN0WzBdLnBkUHJlbUNhbE1vZGU9PSdQJyl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkQW1udFNhbGVUeXBlPSc0Jw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkQW1udFNhbGVUeXBlPScxJw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRBbW50Q2FsUnVsZT0nMSc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbnN1UGVyaW9kQ2FsTW9kZT0nMSc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRQYXlFbmRDYWxNb2RlPScxJzsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Rm9ybURhdGEyPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmluaXRIYW5kbGVTYXZlQWxsKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgLy8gdGhpcy5oYW5kbGVBZGRQcm9ncmFtbWUodGhpcy5wcmVtaXVtTGlzdFswXSwgdGhpcy5zdXJ2aXZhbExpc3QsIHRoaXMuY2xhaW1MaXN0LCBmYWxzZSkNCiAgICB9LA0KICAgIGhhbmRsZVNlYXJjaCgpIHsNCg0KICAgICAgdGhpcy4kcmVmcy5wYWdlX3Byb2dyYW1tZS5yZWxvYWQoKQ0KICAgIH0sDQogICAgcm93Q2xpY2socm93LCBjb2x1bW4sIGV2ZW50KSB7DQoNCiAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICJJTlBVVCIpIHsNCiAgICAgICAgaWYgKHJvdy5pZCA9PT0gdGhpcy5zZWxlY3RlZFByb2dyYW1tZS5pZCkgew0KICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlUHJvZ3JhbW1lKCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2VsZWN0ZWRQcm9ncmFtbWVDaGFuZ2VkKCkgew0KDQogICAgICBsZXQgaj0wOw0KICAgICAgICBmb3IoaiA9IDA7IGogPCB0aGlzLmNsYWltTGlzdC5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgaWYgKCB0aGlzLmNsYWltTGlzdFtqXS5wZEFkZEFtbnRQcm9nRmxhZyE9JycgfHwgdGhpcy5jbGFpbUxpc3Rbal0ucGRBZGRBbW50UHJvZ0ZsYWchPW51bGwpew0KICAgICAgICAgICAgICAgIHRoaXMuY2xhaW1MaXN0W2pdLnBkQWRkQW1udFByb2dGbGFnPScnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGxldCBqaj0wOw0KICAgICAgICBmb3IoamogPSAwOyBqaiA8IHRoaXMuc3Vydml2YWxMaXN0Lmxlbmd0aDsgamorKykgew0KICAgICAgICAgICAgaWYgKCB0aGlzLnN1cnZpdmFsTGlzdFtqal0ucGRBZGRBbW50UHJvZ0ZsYWchPScnIHx8IHRoaXMuc3Vydml2YWxMaXN0W2pqXS5wZEFkZEFtbnRQcm9nRmxhZyE9bnVsbCl7DQogICAgICAgICAgICAgICAgdGhpcy5zdXJ2aXZhbExpc3RbampdLnBkQWRkQW1udFByb2dGbGFnPScnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB0aGlzLnJlc2V0Rm9ybVByb2dyYW1tZSgpDQogICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uKCkNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgLy8g5bim5YWl5pa55qGI5Z+65pys5L+h5oGvDQogICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lLnByb2dyYW1tZSkNCiAgICAgICAgLy8g5bim5YWl57y06LS55L+h5oGvDQogICAgICAgIHRoaXMucGFnZUZsYWcucHJlbWl1bSA9IHRydWUNCiAgICAgICAgbGV0IGV4aXN0ZWRQcmVtaXVtID0gdGhpcy5zZWxlY3RlZFByb2dyYW1tZS5wcmVtaXVtDQogICAgICAgIGZvciAoY29uc3QgcHJlbWl1bSBvZiB0aGlzLnByZW1pdW1MaXN0KSB7DQogICAgICAgICAgaWYgKHByZW1pdW0uaWQgPT09IGV4aXN0ZWRQcmVtaXVtLmlkKSB7DQogICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24ucHJlbWl1bSA9IHByZW1pdW0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLyDluKblhaXkv53pmpznu4TlkIjkv6Hmga8NCiAgICAgICAgbGV0IGV4aXN0ZWRTdXJ2aXZhbExpc3QgPSBbXQ0KICAgICAgICBsZXQgZXhpc3RlZENsYWltTGlzdCA9IFtdDQogICAgICAgIGZvciAoY29uc3QgYmVuZWZpdFZvIG9mIHRoaXMudGFibGVEYXRhX3Byb2dyYW1tZSkgew0KICAgICAgICAgIGlmIChiZW5lZml0Vm8ucHJvZ3JhbW1lQ29kZSA9PT0gdGhpcy5mb3JtX3Byb2dyYW1tZS5wZFByb2dDb2RlKSB7DQogICAgICAgICAgICBzd2l0Y2ggKGJlbmVmaXRWby5iZW5lZml0VHlwZSkgew0KICAgICAgICAgICAgICBjYXNlICJBIjoNCiAgICAgICAgICAgICAgY2FzZSAiTSI6DQogICAgICAgICAgICAgICAgZXhpc3RlZFN1cnZpdmFsTGlzdC5wdXNoKGJlbmVmaXRWbykNCiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VGbGFnLnN1cnZpdmFsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgIGNhc2UgIkMiOg0KICAgICAgICAgICAgICAgIGV4aXN0ZWRDbGFpbUxpc3QucHVzaChiZW5lZml0Vm8pDQogICAgICAgICAgICAgICAgdGhpcy5wYWdlRmxhZy5jbGFpbSA9IHRydWUNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZvciAoY29uc3QgZXhpc3RlZFN1cnZpdmFsIG9mIGV4aXN0ZWRTdXJ2aXZhbExpc3QpIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IHN1cnZpdmFsIG9mIHRoaXMuc3Vydml2YWxMaXN0KSB7DQogICAgICAgICAgICBpZiAoc3Vydml2YWwuaWQgPT09IGV4aXN0ZWRTdXJ2aXZhbC5pZCkgew0KICAgICAgICAgICAgICAgIHN1cnZpdmFsLnBkQWRkQW1udFByb2dGbGFnID0gZXhpc3RlZFN1cnZpdmFsLnBkQWRkQW1udFByb2dGbGFnOw0KICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWwucHVzaChzdXJ2aXZhbCk7DQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZvciAoY29uc3QgZXhpc3RlZENsYWltIG9mIGV4aXN0ZWRDbGFpbUxpc3QpIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IGNsYWltIG9mIHRoaXMuY2xhaW1MaXN0KSB7DQogICAgICAgICAgICBpZiAoY2xhaW0uaWQgPT09IGV4aXN0ZWRDbGFpbS5pZCkgew0KICAgICAgICAgICAgICAgIGNsYWltLnBkQWRkQW1udFByb2dGbGFnPWV4aXN0ZWRDbGFpbS5wZEFkZEFtbnRQcm9nRmxhZw0KICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uY2xhaW0ucHVzaChjbGFpbSkNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGNhbmNlbFVwZGF0ZVByb2dyYW1tZSgpIHsNCg0KICAgICAgbGV0IGo9MDsNCiAgICAgICAgZm9yKGogPSAwOyBqIDwgdGhpcy5jbGFpbUxpc3QubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgIGlmICggdGhpcy5jbGFpbUxpc3Rbal0ucGRBZGRBbW50UHJvZ0ZsYWchPScnIHx8IHRoaXMuY2xhaW1MaXN0W2pdLnBkQWRkQW1udFByb2dGbGFnIT1udWxsKXsNCiAgICAgICAgICAgICAgICB0aGlzLmNsYWltTGlzdFtqXS5wZEFkZEFtbnRQcm9nRmxhZz0nJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBsZXQgamo9MDsNCiAgICAgICAgZm9yKGpqID0gMDsgamogPCB0aGlzLnN1cnZpdmFsTGlzdC5sZW5ndGg7IGpqKyspIHsNCiAgICAgICAgICAgIGlmICggdGhpcy5zdXJ2aXZhbExpc3RbampdLnBkQWRkQW1udFByb2dGbGFnIT0nJyB8fCB0aGlzLnN1cnZpdmFsTGlzdFtqal0ucGRBZGRBbW50UHJvZ0ZsYWchPW51bGwpew0KICAgICAgICAgICAgICAgIHRoaXMuc3Vydml2YWxMaXN0W2pqXS5wZEFkZEFtbnRQcm9nRmxhZz0nJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgdGhpcy5yZXNldFNlbGVjdGVkUHJvZ3JhbW1lKCkNCiAgICAgIHRoaXMucmVzZXRGb3JtUHJvZ3JhbW1lKCkNCiAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb24oKQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLmZvcm1fcHJvZ3JhbW1lLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVBZGRQcm9ncmFtbWUocHJlbWl1bSwgc3Vydml2YWwsIGNsYWltLCBzaG93VGlwcykgew0KDQogICAgICBpZiAoIXByZW1pdW0pIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX3NlbGVjdF9wcmVtaXVtJykpDQogICAgICAgIHJldHVybg0KICAgICAgfSBlbHNlIGlmIChzdXJ2aXZhbC5sZW5ndGggPT09IDAgJiYgY2xhaW0ubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3RfYmVuZWZpdCcpKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0gZWxzZSB7DQoNCiAgICAgIH0NCiAgICAgIC8vIHRoaXMucmVzZXRUYWJsZURhdGFDb21iaW5hdGlvbkJlZm9yZUFkZCgpDQogICAgICBpZiAoc3Vydml2YWwubGVuZ3RoID4gMCkgew0KICAgICAgICBmb3IgKGNvbnN0IHN1cnZpdmFsSXRlbSBvZiBzdXJ2aXZhbCkgew0KICAgICAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb25BZGQoKQ0KICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZCwgc3Vydml2YWxJdGVtKQ0KICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQucHJlbWl1bUlkID0gcHJlbWl1bS5pZA0KICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQucHJlbWl1bUNvZGUgPSBwcmVtaXVtLnBkUHJlbUNvZGUNCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1OYW1lID0gcHJlbWl1bS5wZFBheU5hbWUNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9iZWZvcmVfYWRkLnB1c2godGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGNsYWltLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZm9yIChjb25zdCBjbGFpbUl0ZW0gb2YgY2xhaW0pIHsNCiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uQWRkKCkNCiAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQsIGNsYWltSXRlbSkNCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1JZCA9IHByZW1pdW0uaWQNCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1Db2RlID0gcHJlbWl1bS5wZFByZW1Db2RlDQogICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZC5wcmVtaXVtTmFtZSA9IHByZW1pdW0ucGRQYXlOYW1lDQogICAgICAgICAgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYmVmb3JlX2FkZC5wdXNoKHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIOmqjOivgeaYr+WQpuaciemHjeWkjeS/oeaBrw0KICAgICAgdGhpcy5yZXNldFRhYmxlRGF0YUNvbWJpbmF0aW9uRHVwbGljYXRlZEFkZCgpDQogICAgICBmb3IgKGNvbnN0IGZvcm1fY29tYmluYXRpb25fYmVmb3JlX2FkZCBvZiB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9iZWZvcmVfYWRkKSB7DQoNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZC5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMuZ2V0T3JkZXJOdW1iZXIoJ2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkJykNCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlX2R1cGxpY2F0ZWQgPSB0cnVlDQogICAgICB9IGVsc2Ugew0KDQogICAgICAgIHRoaXMuZ2V0T3JkZXJOdW1iZXIoJ2NvbWJpbmF0aW9uX2FkZCcpDQogICAgICAgIGlmIChzaG93VGlwcyA9PT0gdHJ1ZSkgew0KICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuYWRkX3N1Y2Nlc3MnKSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlRGVsZXRlQ29tYmluYXRpb25BZGQocm93KSB7DQoNCiAgICAgIHRoaXMuZ2V0T3JkZXJOdW1iZXIoJ2NvbWJpbmF0aW9uX2FkZCcpDQogICAgfSwNCiAgICBoYW5kbGVVcGRhdGVBbGwoKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm1fcHJvZ3JhbW1lLnZhbGlkYXRlKHBhc3MgPT4gew0KICAgICAgICBpZiAocGFzcykgew0KICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkQ29kZSA9IHRoaXMucHJvZHVjdC5wZENvZGU7DQogICAgICAgICAgICBsZXQgYXJyID0gW107DQogICAgICAgICAgICBhcnI9dGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltOw0KICAgICAgICAgICAgYXJyPWFyci5jb25jYXQodGhpcy5mb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsKTsNCiAgICAgICAgICAgIGxldCBtYXA9ew0KICAgICAgICAgICAgICAgIHByb2dyYW1tZTogdGhpcy5mb3JtX3Byb2dyYW1tZSwNCiAgICAgICAgICAgICAgICBwcmVtaXVtSWQ6IHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtLmlkLA0KICAgICAgICAgICAgICAgIHByZW1pdW1Db2RlOiB0aGlzLmZvcm1fY29tYmluYXRpb24ucHJlbWl1bS5wZFByZW1Db2RlLA0KICAgICAgICAgICAgICAgIGJlbmVmaXRMaXN0OiBhcnINCiAgICAgICAgICAgIH0NCiAgICAgICAgICB1cGRhdGVQZHRlbXBQZFByb2codGhpcy5idWlsZFJlcXVlc3REYXRhKG1hcCkpLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICBsZXQgYSA9IHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUucHJvZ3JhbW1lLmlkOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2hpbGRGbicsIHRydWUpOw0KICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS51cGRhdGVfYWxsX3N1Y2Nlc3MnKSkNCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX3Byb2dyYW1tZS5idWlsZERhdGEoKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlUHJvZ3JhbW1lKCk7DQogICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKT0+ew0KICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMudGFibGVEYXRhX3Byb2dyYW1tZSl7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ucHJvZ3JhbW1lLmlkPT09YSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb2dyYW1tZT1pdGVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lQ2hhbmdlZCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5mb3JtX3ZhbGlkYXRpb25fZmFpbGVkJykpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAgIGluaXRIYW5kbGVTYXZlQWxsKCl7DQoNCiAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS52YWxpZGF0ZShwYXNzID0+IHsNCiAgICAgICAgICAgICAgaWYgKHBhc3MpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkDQogICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkQ29kZSA9IHRoaXMucHJvZHVjdC5wZENvZGU7DQogICAgICAgICAgICAgICAgICBsZXQgYXJyID0gW107DQogICAgICAgICAgICAgICAgICBhcnI9dGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltOw0KICAgICAgICAgICAgICAgICAgYXJyPWFyci5jb25jYXQodGhpcy5mb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsKTsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW1tZTogdGhpcy5mb3JtX3Byb2dyYW1tZSwNCiAgICAgICAgICAgICAgICAgICAgICBwcmVtaXVtSWQ6IHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtLmlkLA0KICAgICAgICAgICAgICAgICAgICAgIHByZW1pdW1Db2RlOiB0aGlzLmZvcm1fY29tYmluYXRpb24ucHJlbWl1bS5wZFByZW1Db2RlLA0KICAgICAgICAgICAgICAgICAgICAgIGJlbmVmaXRMaXN0OiBhcnIsDQogICAgICAgICAgICAgICAgICAgICAgdHlwZVJlZ2lvbjogdGhpcy5wcm9kdWN0X2V4dHJhLnR5cGVSZWdpb24sDQogICAgICAgICAgICAgICAgICAgICAgbmVlZENoZWNraW5nUHJlbWl1bTogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgYWRkUGR0ZW1wUGRQcm9nKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbSkpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWNjZXNzRmxhZyA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc0ZsYWcgPT09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX3Byb2dyYW1tZS5idWlsZERhdGEoKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlUHJvZ3JhbW1lKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGlsZEZuJywgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuY29uZmlybV9vdmVyd3JpdGVfcHJvZ3JhbW1lJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbS5uZWVkQ2hlY2tpbmdQcmVtaXVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBkdGVtcFBkUHJvZyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2VsZWN0ZWRQcm9ncmFtbWUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybVByb2dyYW1tZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1Db21iaW5hdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2hpbGRGbicsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2Uuc2F2ZV9hbGxfc3VjY2VzcycpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9wcm9ncmFtbWUucmVsb2FkKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybV9wcm9ncmFtbWUuY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuY2FuY2VsZWQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLmZvcm1fdmFsaWRhdGlvbl9mYWlsZWQnKSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICB9LA0KICAgIGhhbmRsZVNhdmVBbGwoKSB7DQoNCiAgICAgIHRoaXMuJHJlZnMuZm9ybV9wcm9ncmFtbWUudmFsaWRhdGUocGFzcyA9PiB7DQogICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtID09IG51bGwgfHwgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnByZW1pdW0gPT0gJycpew0KICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcigi57y06LS55L+h5oGv5LiN6IO95Li656m6IikNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltLmxlbmd0aCA9PSAwICYmIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5zdXJ2aXZhbC5sZW5ndGggPT0gMCl7DQogICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCLkv53pmpzkv6Hmga/kuI3og73kuLrnqboiKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgfQ0KDQogICAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZS5wZEluZm9JZCA9IHRoaXMucHJvZHVjdC5pZA0KICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkDQogICAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZS5wZENvZGUgPSB0aGlzLnByb2R1Y3QucGRDb2RlOw0KICAgICAgICAgIGxldCBhcnIgPSBbXTsNCiAgICAgICAgICBhcnI9dGhpcy5mb3JtX2NvbWJpbmF0aW9uLmNsYWltOw0KICAgICAgICAgIGFycj1hcnIuY29uY2F0KHRoaXMuZm9ybV9jb21iaW5hdGlvbi5zdXJ2aXZhbCk7DQogICAgICAgICAgY29uc3QgcGFyYW0gPSB7DQogICAgICAgICAgICBwcm9ncmFtbWU6IHRoaXMuZm9ybV9wcm9ncmFtbWUsDQogICAgICAgICAgICBwcmVtaXVtSWQ6IHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtLmlkLA0KICAgICAgICAgICAgcHJlbWl1bUNvZGU6IHRoaXMuZm9ybV9jb21iaW5hdGlvbi5wcmVtaXVtLnBkUHJlbUNvZGUsDQogICAgICAgICAgICBiZW5lZml0TGlzdDogYXJyLA0KICAgICAgICAgICAgdHlwZVJlZ2lvbjogdGhpcy5wcm9kdWN0X2V4dHJhLnR5cGVSZWdpb24sDQogICAgICAgICAgICBuZWVkQ2hlY2tpbmdQcmVtaXVtOiB0cnVlDQogICAgICAgICAgfQ0KICAgICAgICAgIGFkZFBkdGVtcFBkUHJvZyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIGxldCBzdWNjZXNzRmxhZyA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgIGlmIChzdWNjZXNzRmxhZyA9PT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9wcm9ncmFtbWUuYnVpbGREYXRhKCkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlUHJvZ3JhbW1lKCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoaWxkRm4nLCB0cnVlKTsNCiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5zYXZlX2FsbF9zdWNjZXNzJykpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5jb25maXJtX292ZXJ3cml0ZV9wcm9ncmFtbWUnKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLA0KICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICBwYXJhbS5uZWVkQ2hlY2tpbmdQcmVtaXVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICBhZGRQZHRlbXBQZFByb2codGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtKSkudGhlbigoKSA9PiB7DQoNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3RlZFByb2dyYW1tZSgpOw0KICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1Qcm9ncmFtbWUoKQ0KICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1Db21iaW5hdGlvbigpDQogICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGlsZEZuJywgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnNhdmVfYWxsX3N1Y2Nlc3MnKSkNCiAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9wcm9ncmFtbWUucmVsb2FkKCkNCiAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFVwZGF0ZVByb2dyYW1tZSgpOw0KICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuY2FuY2VsZWQnKQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuZm9ybV92YWxpZGF0aW9uX2ZhaWxlZCcpKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlRGVsZXRlUHJvZ3JhbW1lKCkgew0KDQogICAgICBkZWxldGVQZHRlbXBQZFByb2codGhpcy5zZWxlY3RlZFByb2dyYW1tZS5wcm9ncmFtbWUuaWQpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UuZGVsZXRlJykpOw0KICAgICAgICB0aGlzLmluaXQoKTsNCiAgICAgICAgdGhpcy4kcmVmcy5wYWdlX3Byb2dyYW1tZS5idWlsZERhdGEoKS50aGVuKCgpID0+ew0KICAgICAgICAgICAgdGhpcy5jYW5jZWxVcGRhdGVQcm9ncmFtbWUoKTsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybV9wcm9ncmFtbWUuY2xlYXJWYWxpZGF0ZSgpOw0KDQogICAgICAgIH0pOw0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNsZWFyRm9ybVByb2dyYW1tZSgpIHsNCg0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUucHJvZ3JhbW1lKXsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWVDaGFuZ2VkKCk7DQogICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlUHJvZ3JhbW1lKCk7DQogICAgICAgIH0NCg0KICAgIH0sDQogICAgLy8g6I635Y+W55u45ZCM57yW5Y+355qE5pWw57uE77yI5q+P5qyh6KGo5qC85pWw5o2u5pS55Y+Y5ZCO6ZyA6KaB6LCD55So6L+Z5Liq5pa55rOV77yJDQogICAgZ2V0T3JkZXJOdW1iZXIoYXJyYXlOYW1lKSB7DQoNCiAgICAgIGxldCB0YWJsZURhdGENCiAgICAgIGxldCBvcmRlckluZGV4QXJyDQogICAgICBpZiAoYXJyYXlOYW1lID09PSAnY29tYmluYXRpb25fYWRkJykgew0KICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdjb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCcpIHsNCiAgICAgICAgdGFibGVEYXRhID0gdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgb3JkZXJJbmRleEFyciA9IFtdDQogICAgICAvLyDmjInnhacgcHJlbWl1bUNvZGUg5o6S5bqP77yM5bCGIHByZW1pdW1Db2RlIOebuOWQjOeahOaVsOaNrui/nuWcqOS4gOi1tw0KICAgICAgdGFibGVEYXRhID0gdGhpcy5fLm9yZGVyQnkodGFibGVEYXRhLCBbJ3ByZW1pdW1Db2RlJywgJ3BkQm5mdENvZGUnXSwgWydhc2MnLCAnYXNjJ10pDQogICAgICBpZiAoYXJyYXlOYW1lID09PSAnY29tYmluYXRpb25fYWRkJykgew0KICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdjb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCcpIHsNCiAgICAgICAgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQgPSB0YWJsZURhdGENCiAgICAgIH0NCiAgICAgIGxldCBvcmRlck9iaiA9IHt9DQogICAgICB0YWJsZURhdGEuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHsNCiAgICAgICAgZWxlbWVudC5yb3dJbmRleCA9IGluZGV4DQogICAgICAgIGlmIChvcmRlck9ialtlbGVtZW50LnByZW1pdW1Db2RlXSkgew0KICAgICAgICAgIG9yZGVyT2JqW2VsZW1lbnQucHJlbWl1bUNvZGVdLnB1c2goaW5kZXgpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgb3JkZXJPYmpbZWxlbWVudC5wcmVtaXVtQ29kZV0gPSBbXQ0KICAgICAgICAgIG9yZGVyT2JqW2VsZW1lbnQucHJlbWl1bUNvZGVdLnB1c2goaW5kZXgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAvLyDpnIDopoHlkIjlubbnmoTooYznmoQgaW5kZXgg5bey57uP5a2Y5Zyo5LqG5ZCM5LiA5Liq5pWw57uE6YeM77yM5oqK6L+Z5Lqb5pWw57uE5a2Y5YKo5YiwIHRoaXMub3JkZXJJbmRleEFycg0KICAgICAgZm9yIChjb25zdCBrIGluIG9yZGVyT2JqKSB7DQogICAgICAgIG9yZGVySW5kZXhBcnIucHVzaChvcmRlck9ialtrXSkNCiAgICAgIH0NCiAgICAgIGlmIChhcnJheU5hbWUgPT09ICdjb21iaW5hdGlvbl9hZGQnKSB7DQogICAgICAgIHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGQgPSBvcmRlckluZGV4QXJyDQogICAgICB9IGVsc2UgaWYgKGFycmF5TmFtZSA9PT0gJ2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkJykgew0KICAgICAgICB0aGlzLm9yZGVySW5kZXhBcnJfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQgPSBvcmRlckluZGV4QXJyDQogICAgICAgIHRoaXMuZ2V0TWVyZ2VkUm93SW5kZXgodGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQsIHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldE1lcmdlZFJvd0luZGV4KHRhYmxlRGF0YSwgb3JkZXJJbmRleEFycikgew0KDQogICAgICBhOmZvciAoY29uc3Qgcm93IG9mIHRhYmxlRGF0YSkgew0KICAgICAgICBjb25zdCByb3dJbmRleCA9IHJvdy5yb3dJbmRleA0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVySW5kZXhBcnIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjb25zdCB2YWwgPSBvcmRlckluZGV4QXJyW2ldDQogICAgICAgICAgZm9yIChjb25zdCBudW1iZXIgb2YgdmFsKSB7DQogICAgICAgICAgICBpZiAocm93SW5kZXggPT09IG51bWJlcikgew0KICAgICAgICAgICAgICByb3cubWVyZ2VkUm93SW5kZXggPSBpDQogICAgICAgICAgICAgIGNvbnRpbnVlIGENCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIG9iamVjdFNwYW5NZXRob2RfcHJvZ3JhbW1lKHtyb3csIGNvbHVtbiwgcm93SW5kZXgsIGNvbHVtbkluZGV4fSkgew0KDQogICAgICBpZiAoY29sdW1uSW5kZXggPT09IDAgfHwgY29sdW1uSW5kZXggPT09IDEgfHwgY29sdW1uSW5kZXggPT09IDIgfHwgY29sdW1uSW5kZXggPT09IDMgfHwgY29sdW1uSW5kZXggPT09IDQgfHwgY29sdW1uSW5kZXggPT09IDUpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9yZGVySW5kZXhBcnJfcHJvZ3JhbW1lLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLm9yZGVySW5kZXhBcnJfcHJvZ3JhbW1lW2ldDQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbGVtZW50Lmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICBsZXQgaXRlbSA9IGVsZW1lbnRbal0NCiAgICAgICAgICAgIGlmIChyb3dJbmRleCA9PT0gaXRlbSkgew0KICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICByb3dzcGFuOiBlbGVtZW50Lmxlbmd0aCwNCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IDAsDQogICAgICAgICAgICAgICAgICBjb2xzcGFuOiAwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1Qcm9ncmFtbWUoKQ0KICAgICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb24oKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgb2JqZWN0U3Bhbk1ldGhvZF9jb21iaW5hdGlvbl9hZGQoe3JvdywgY29sdW1uLCByb3dJbmRleCwgY29sdW1uSW5kZXh9KSB7DQoNCiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMCB8fCBjb2x1bW5JbmRleCA9PT0gMSB8fCBjb2x1bW5JbmRleCA9PT0gMikgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBsZXQgZWxlbWVudCA9IHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGRbaV0NCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVsZW1lbnQubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgIGxldCBpdGVtID0gZWxlbWVudFtqXQ0KICAgICAgICAgICAgaWYgKHJvd0luZGV4ID09PSBpdGVtKSB7DQogICAgICAgICAgICAgIGlmIChqID09PSAwKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IGVsZW1lbnQubGVuZ3RoLA0KICAgICAgICAgICAgICAgICAgY29sc3BhbjogMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgcm93c3BhbjogMCwNCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIG9iamVjdFNwYW5NZXRob2RfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQoe3JvdywgY29sdW1uLCByb3dJbmRleCwgY29sdW1uSW5kZXh9KSB7DQoNCiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMCB8fCBjb2x1bW5JbmRleCA9PT0gMSB8fCBjb2x1bW5JbmRleCA9PT0gMiB8fCBjb2x1bW5JbmRleCA9PT0gNSkgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5vcmRlckluZGV4QXJyX2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkW2ldDQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbGVtZW50Lmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICBsZXQgaXRlbSA9IGVsZW1lbnRbal0NCiAgICAgICAgICAgIGlmIChyb3dJbmRleCA9PT0gaXRlbSkgew0KICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICByb3dzcGFuOiBlbGVtZW50Lmxlbmd0aCwNCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IDAsDQogICAgICAgICAgICAgICAgICBjb2xzcGFuOiAwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICByZXNldFNlbGVjdGVkUHJvZ3JhbW1lKCkgew0KDQogICAgICB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwcm9ncmFtbWVDb2RlOiAnJywNCiAgICAgICAgcHJvZ3JhbW1lTmFtZTogJycsDQogICAgICAgIHByZW1pdW1Db2RlOiAnJywNCiAgICAgICAgcHJlbWl1bU5hbWU6ICcnLA0KICAgICAgICBiZW5lZml0Q29kZTogJycsDQogICAgICAgIGJlbmVmaXROYW1lOiAnJywNCiAgICAgICAgYmVuZWZpdFR5cGU6ICcnLA0KICAgICAgICBwcm9ncmFtbWU6IHt9LA0KICAgICAgICBwcmVtaXVtOiB7fQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g6YeN572u77yI5paw5bu677yJ5a+56LGh5LiO5pWw57uEDQogICAgcmVzZXRGb3JtUHJvZ3JhbW1lKCkgew0KDQogICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwZEluZm9JZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFZlcklkOiB1bmRlZmluZWQsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkUHJvZ0NvZGU6ICcnLA0KICAgICAgICBwZFByb2dOYW1lOiAnJywNCiAgICAgICAgcGRPcHRGbGFnOiAnTicsDQogICAgICAgIHBkSW5zdVBlcmlvZDogdW5kZWZpbmVkLA0KICAgICAgICBwZEluc3VQZXJpb2RVbml0OiAnJywNCiAgICAgICAgcGRJbnN1UGVyaW9kQ2FsTW9kZTogJycsDQogICAgICAgIHBkSW5zdUVuZENhbFJ1bGU6ICcwJywNCiAgICAgICAgcGRBbW50Q2FsUnVsZTogJycsDQogICAgICAgIHBkQWRkQW1udEZsYWc6ICdZJywNCiAgICAgICAgcGRQYXlFbmRDYWxNb2RlOiAnJywNCiAgICAgICAgcGRBbW50U2FsZVR5cGU6ICcnLA0KICAgICAgICBvcGVyYXRvcjogJycsDQogICAgICAgIGNyZWF0ZVRpbWU6ICcnLA0KICAgICAgICB1cGRhdGVUaW1lOiAnJw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVzZXRGb3JtQ29tYmluYXRpb24oKSB7DQoNCiAgICAgIHRoaXMucGFnZUZsYWcucHJlbWl1bSA9IHRydWUNCiAgICAgIHRoaXMucGFnZUZsYWcuY2xhaW0gPSB0cnVlDQogICAgICB0aGlzLnBhZ2VGbGFnLnN1cnZpdmFsID0gdHJ1ZQ0KICAgICAgdGhpcy5pbmRldGVybWluYXRlLnN1cnZpdmFsID0gZmFsc2UNCiAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZS5jbGFpbSA9IGZhbHNlDQogICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24gPSB7DQogICAgICAgIHByZW1pdW06IHVuZGVmaW5lZCwNCiAgICAgICAgc3Vydml2YWxGbGFnOiBmYWxzZSwNCiAgICAgICAgY2xhaW1GbGFnOiBmYWxzZSwNCiAgICAgICAgc3Vydml2YWw6IFtdLA0KICAgICAgICBjbGFpbTogW10NCiAgICAgIH0NCiAgICB9LA0KICAgIHJlc2V0Rm9ybUNvbWJpbmF0aW9uQWRkKCkgew0KDQogICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkID0gew0KICAgICAgICAvLyBQZHRlbXBQZEJuZnQg5a6e5L2T57G75bGe5oCnDQogICAgICAgIGlkOiB1bmRlZmluZWQsDQogICAgICAgIHBkQm5mdENvZGU6ICcnLA0KICAgICAgICBwZEJuZnROYW1lOiAnJywNCiAgICAgICAgcGRCbmZ0VHlwZTogJycsDQogICAgICAgIHBkQWRkQW1udEZsYWc6ICcnLA0KICAgICAgICBwZEJuZnRDYWxNb2RlOiAnJywNCiAgICAgICAgcGRDYWxjSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRVcmdlUGF5RmxhZzogJycsDQogICAgICAgIGNyZWF0ZVRpbWU6ICcnLA0KICAgICAgICB1cGRhdGVUaW1lOiAnJywNCiAgICAgICAgb3BlcmF0b3I6ICcnLA0KICAgICAgICAvLyB2b+WxnuaApw0KICAgICAgICBwcmVtaXVtSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcHJlbWl1bUNvZGU6ICcnLA0KICAgICAgICBwcmVtaXVtTmFtZTogJycsDQogICAgICAgIHBkQWRkQW1udFByb2dGbGFnOiAnJw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVzZXRUYWJsZURhdGFDb21iaW5hdGlvbkJlZm9yZUFkZCgpIHsNCg0KICAgICAgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYmVmb3JlX2FkZCA9IFtdDQogICAgfSwNCiAgICByZXNldFRhYmxlRGF0YUNvbWJpbmF0aW9uRHVwbGljYXRlZEFkZCgpIHsNCg0KICAgICAgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQgPSBbXQ0KICAgIH0sDQogICAgdG9QcmVtaXVtUGFnZShwZFByZW1Db2RlKSB7DQoNCiAgICAgIGlmICghcGRQcmVtQ29kZSkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5pbnZhbGlkUHJlbUNvZGUnKSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRQcmVtaXVtQ29kZSA9IHBkUHJlbUNvZGUNCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlLnByZW1pdW0gPSB0cnVlDQogICAgICB9DQogICAgfSwNCiAgICB0b1NydkJuZnRQYWdlKHN1cnZpdmFsKSB7DQoNCiAgICAgIGlmIChPYmplY3Qua2V5cyhzdXJ2aXZhbCkubGVuZ3RoID4gMCkgew0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTcnZCbmZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdXJ2aXZhbCkpOw0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUuc3Vydml2YWxCZW5lZml0ID0gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuaW52YWxpZEJlbmVmaXQnKSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHRvQ2xtQm5mdFBhZ2Uoc3Vydml2YWwpIHsNCg0KICAgICAgaWYgKE9iamVjdC5rZXlzKHN1cnZpdmFsKS5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRDbG1CbmZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdXJ2aXZhbCkpDQogICAgICAgIHRoaXMuc2VsZWN0ZWRDbG1CbmZ0LnJlYWRvbmx5ID0gdHJ1ZQ0KICAgICAgICBpZihzdXJ2aXZhbC5wZEJuZnREZXRhaWxUeXBlPT09JzcnKXsNCiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUuY2xhaW1CZW5lZml0ID0gdHJ1ZQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUubm9DbGFpbUJlbmVmaXQgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLmludmFsaWRCZW5lZml0JykpDQogICAgICB9DQogICAgfSwNCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-framework-def/pd-structure-def/program-def","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div :class=\"{ 'showDiv': this.showPageFlagS == 1 }\"></div>\r\n    <cus-page-title :label=\"$t('productProgramme1.pageTitle')\"/>\r\n    <!--  -->\r\n    <cus-product-info></cus-product-info>\r\n    <div v-if=\"reaadOnlyPpProg\">\r\n\r\n    <el-divider content-position=\"left\"><i class=\"el-icon-s-grid\">{{$t('i18nView.productSolution')}}</i></el-divider>\r\n    <!--  -->\r\n    <el-table :data=\"tableData_programme\" :span-method=\"objectSpanMethod_programme\" @row-click=\"rowClick\"\r\n              border element-loading-text=\"Loading\"\r\n              fit max-height=\"500\" ref=\"page_programme\" size=\"mini\">\r\n      <el-table-column :label=\"$t('table.select')\" align=\"center\" width=\"80px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group @change=\"selectedProgrammeChanged\" v-model=\"selectedProgramme\">\r\n            <span>\r\n              <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n            </span>\r\n            <span\r\n              v-if=\"selectedProgramme.programme.id && scope.row.programme.id && selectedProgramme.programme.id === scope.row.programme.id\"></span>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\">\r\n        <template v-slot=\"scope\">\r\n          {{ scope.row.mergedRowIndex + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productProgramme.pdProgCode')\" align=\"center\" prop=\"programmeCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('productProgramme.pdProgName')\" align=\"center\" prop=\"programmeName\"></el-table-column>\r\n      <el-table-column :label=\"$t('productProgramme1.premiumCode')\" align=\"center\" prop=\"premiumCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('productProgramme1.premiumName')\" align=\"center\" prop=\"premiumName\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.guaranteeCode')\" align=\"center\" prop=\"benefitCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('productProgramme.pdBnftName')\" align=\"center\" prop=\"benefitName\"></el-table-column>\r\n    </el-table>\r\n    <!--  -->\r\n    <cus-pagination :mergedAttrName=\"'programmeCode'\" :needMerging=\"true\"\r\n                    :orderBy=\"{attrNames: ['programmeCode', 'benefitType'], orders: ['asc', 'asc']}\"\r\n                    :orderIndexArrName=\"'orderIndexArr_programme'\" :pageSize=\"10\" :params=\"params_programme\"\r\n                    :showMergedIndex=\"true\" :tableData=\"tableData_programme\" @updateOrderIndexArr=\"updateOrderIndexArr\"\r\n                    ref=\"page_programme\" url=\"/pdtemp-pd-prog/base/list\" v-model=\"tableData_programme\"/>\r\n\r\n    </div>\r\n\r\n\r\n\r\n        <cus-form-title :label=\"$t('productProgramme.combination')\" ></cus-form-title>\r\n    <!--  -->\r\n    <div style=\"width: 80%\" :model=\"form_combination\">\r\n      <el-row style=\"margin-bottom: 10px\">\r\n        <span @click=\"pageFlag.premium = !pageFlag.premium\" class=\"tree-ctrl\">\r\n          <i class=\"el-icon-caret-bottom\" style=\"color: #606266;font-size: 12px\"\r\n             v-if=\"true === pageFlag.premium\"/>\r\n          <i class=\"el-icon-caret-right\" style=\"color: #606266;font-size: 12px\"\r\n             v-if=\"false === pageFlag.premium\"/>\r\n        </span>\r\n        <span @click=\"pageFlag.premium = !pageFlag.premium\"\r\n              style=\"margin-left: 20px;cursor: pointer ;font-size: 12px\">{{ $t('productProgramme1.premiumInfo') }}</span>\r\n        <div style=\"margin: 0 0 0 25px\" v-if=\"pageFlag.premium\">\r\n          <el-radio-group  :disabled=\"reaadOnlyPpProg==false\" v-model=\"form_combination.premium\">\r\n            <div v-for=\"premium in premiumList\">\r\n              <el-radio style=\"margin: 0 0 0 0px\" :label=\"premium\" v-model=\"premium.pdPremCode\">{{ premium.pdPremCode + ' - ' + premium.pdPayName }}</el-radio>\r\n              <el-button   @click=\"toPremiumPage(premium.pdPremCode)\" size=\"mini\" style=\"margin-left: 5px\" type=\"text\" dialog-disable=\"disable\">>></el-button>\r\n            </div>\r\n          </el-radio-group>\r\n        </div>\r\n      </el-row>\r\n\r\n      <el-row style=\"margin-bottom: 10px\">\r\n        <el-col :span=\"24\">\r\n          <span @click=\"pageFlag.survival = !pageFlag.survival\" class=\"tree-ctrl\">\r\n            <i class=\"el-icon-caret-bottom\" style=\"color: #606266;font-size: 12px\"\r\n               v-if=\"true === pageFlag.survival\"/>\r\n            <i class=\"el-icon-caret-right\" style=\"color: #606266;font-size: 12px\"\r\n               v-if=\"false === pageFlag.survival\"/>\r\n          </span>\r\n          <el-checkbox  :disabled=\"reaadOnlyPpProg==false\" :indeterminate=\"indeterminate.survival\" v-model=\"form_combination.survivalFlag\"></el-checkbox>\r\n          <span @click=\"pageFlag.survival = !pageFlag.survival\"\r\n                style=\"margin-left: 5px;cursor: pointer;font-size: 12px\">{{ $t('route.pdtemppdsrvlbnft') }}</span>\r\n          <div style=\"margin: 5px 0 0 25px\" v-if=\"pageFlag.survival\">\r\n            <el-checkbox-group  :disabled=\"reaadOnlyPpProg==false\" v-model=\"form_combination.survival\">\r\n              <div v-for=\"survival in survivalList\">\r\n                <el-row>\r\n                  <el-col :span=\"12\">\r\n                <el-checkbox :label=\"survival\" :key=\"survival.id\">{{ survival.pdBnftCode + ' - ' + survival.pdBnftName }}</el-checkbox>\r\n                <el-button    @click=\"toSrvBnftPage(survival)\" size=\"mini\" style=\"margin-left: 5px\" type=\"text\" dialog-disable=\"disable\">>>\r\n                </el-button>\r\n                  </el-col>\r\n                    <el-col :span=\"12\">\r\n                        <el-switch active-text=\"\" active-value=\"Y\" inactive-value=\"N\" v-model=\"survival.pdAddAmntProgFlag\" ></el-switch>\r\n                    </el-col>\r\n                </el-row>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </div>\r\n        </el-col>\r\n        </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <span @click=\"pageFlag.claim = !pageFlag.claim\" class=\"tree-ctrl\">\r\n            <i class=\"el-icon-caret-bottom\" style=\"color: #606266;font-size: 12px\"\r\n               v-if=\"true === pageFlag.claim\"/>\r\n            <i class=\"el-icon-caret-right\" style=\"color: #606266;font-size: 12px\"\r\n               v-if=\"false === pageFlag.claim\"/>\r\n          </span>\r\n          <el-checkbox  :disabled=\"reaadOnlyPpProg==false\" :indeterminate=\"indeterminate.claim\" v-model=\"form_combination.claimFlag\"></el-checkbox>\r\n          <span @click=\"pageFlag.claim = !pageFlag.claim\"\r\n                style=\"margin-left: 5px;cursor: pointer ;font-size: 12px\">{{ $t('productProgramme.claimBenefit') }}</span>\r\n          <span style=\"margin-left: 45%\" v-show=\"true === pageFlag.claim\"></span>\r\n\r\n          <div style=\"margin: 5px 0 0 25px\" v-if=\"pageFlag.claim\">\r\n            <el-checkbox-group  :disabled=\"reaadOnlyPpProg==false\" v-model=\"form_combination.claim\">\r\n              <div v-for=\"claim in claimList\">\r\n                <el-row>\r\n                  <el-col :span=\"12\">\r\n                    <el-checkbox :label=\"claim\"  :key=\"claim.id\">{{ claim.pdBnftCode + ' - ' + claim.pdBnftName }}</el-checkbox>\r\n                    <el-button    @click=\"toClmBnftPage(claim)\" size=\"mini\" style=\"margin-left: 5px\" type=\"text\" dialog-disable=\"disable\">>></el-button>\r\n                  </el-col>\r\n                  <el-col :span=\"12\">\r\n                      <el-switch  active-text=\"\"  active-value=\"Y\" inactive-value=\"N\" v-model=\"claim.pdAddAmntProgFlag\" ></el-switch>\r\n                  </el-col>\r\n                </el-row>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n\r\n  <cus-form-title :label=\"$t('productProgramme.basicInformation')\" :first=\"true\"></cus-form-title>\r\n    <!--  -->\r\n    <el-form :disabled=\"reaadOnlyPpProg==false\" :model=\"form_programme\" :rules=\"rules\"  label-width=\"auto\"\r\n             ref=\"form_programme\">\r\n      <cus-row>\r\n        <cus-col :span=\"16\">\r\n          <el-form-item :label=\"$t('productProgramme.pdProgName')\" prop=\"pdProgName\">\r\n            <el-input :placeholder=\"$t('productProgramme.message.please_enter')\" clearable @focus=\"setDefaultProgName\"\r\n                      v-model=\"form_programme.pdProgName\"></el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n\r\n      </cus-row>\r\n      <cus-row>\r\n        <cus-col>\r\n          <el-form-item :label=\"$t('productProgramme1.pdOptFlag')\" prop=\"pdOptFlag\">\r\n            <cus-radio codetype=\"pdOptFlag\" v-model=\"form_programme.pdOptFlag\" :disabled=\"premiumList.length===1\" :isRequired=\"true\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"16\">\r\n          <el-form-item :label=\"$t('productProgramme.pdAddAmntFlag')\" prop=\"pdAddAmntFlag\" >\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"form_programme.pdAddAmntFlag\" ></el-switch>\r\n          </el-form-item>\r\n        </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n        <cus-col :span=\"24\">\r\n          <el-form-item :label=\"$t('productProgramme.pdAmntCalRule')\" prop=\"pdAmntCalRule\">\r\n            <cus-radio :codetype=\"'pdAmntCalRule'\" v-model=\"form_programme.pdAmntCalRule\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n        <cus-row>\r\n          <cus-col :span=\"24\">\r\n          <el-form-item :label=\"$t('productProgramme.pdAmntSaleType')\" prop=\"pdAmntSaleType\">\r\n            <cus-radio :codetype=\"'pdAmntSaleType'\" v-model=\"form_programme.pdAmntSaleType\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n        </cus-row>\r\n      <cus-row v-if = \"false\">\r\n        <cus-col>\r\n          <el-form-item :label=\"$t('productProgramme.pdInsuPeriodCalMode')\" prop=\"pdInsuPeriodCalMode\">\r\n            <cus-select :codetype=\"'pdInsuPeriodCalMode'\" v-model=\"form_programme.pdInsuPeriodCalMode\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col>\r\n          <el-form-item :label=\"$t('productProgramme.pdInsuPeriod')\">\r\n            <el-form-item prop=\"pdInsuPeriod\" style=\"margin: auto 0 auto auto\">\r\n              <el-input :placeholder=\"$t('productProgramme.message.please_enter')\" clearable\r\n                        :disabled=\"!(form_programme.pdInsuPeriodCalMode=='0' ||form_programme.pdInsuPeriodCalMode=='3')\"\r\n                         type=\"number\" style=\"width: auto\" v-model=\"form_programme.pdInsuPeriod\">\r\n                <cus-select :codetype=\"'pdInsuPeriodUnit'\" :disabled=\"!(form_programme.pdInsuPeriodCalMode=='0' ||form_programme.pdInsuPeriodCalMode=='3')\" style=\"width: 80px\" slot=\"append\"\r\n                            v-model=\"form_programme.pdInsuPeriodUnit\"></cus-select>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col>\r\n          <el-form-item :label=\"$t('productProgramme.pdInsuEndCalRule')\" prop=\"pdInsuEndCalRule\">\r\n            <cus-select :codetype=\"'pdInsuEndCalRule'\" v-model=\"form_programme.pdInsuEndCalRule\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <cus-row v-if = \"false\">\r\n          <cus-col>\r\n          <el-form-item :label=\"$t('productProgramme.pdPayEndCalMode')\" prop=\"pdPayEndCalMode\">\r\n            <cus-select :codetype=\"'pdPayEndCalMode'\" v-model=\"form_programme.pdPayEndCalMode\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col>\r\n        </cus-col>\r\n        <cus-col>\r\n        </cus-col>\r\n      </cus-row>\r\n    </el-form>\r\n\r\n    <!--  -->\r\n    <el-row v-if=\"reaadOnlyPpProg\" style=\"float: right;margin: 50px 0 50px 0\">\r\n      <el-button  size=\"small\" @click=\"handleUpdateAll\" icon=\"el-icon-success\" style=\"margin: 0 10px 0 0\" type=\"primary\"\r\n                 v-auth=\"'pdtemp-pd-prog:update'\" v-if=\"selectedProgramme.id\" dialog-disable=\"disable\">{{ $t('table.update') }}\r\n      </el-button>\r\n      <cus-popover :buttonText=\"$t('table.delete')\" :content=\"$t('confirmMessage.delete')\"\r\n                   @confirm=\"handleDeleteProgramme\" icon=\"el-icon-delete\" style=\"margin: 0 10px 0 0\" type=\"danger\"\r\n                   v-auth=\"'pdtemp-pd-prog:delete'\" v-if=\"selectedProgramme.id\" dialog-disable=\"disable\"></cus-popover>\r\n      <el-button  size=\"small\" @click=\"handleSaveAll\" icon=\"el-icon-success\" style=\"margin: 0 10px 0 0\" type=\"primary\"\r\n                 v-auth=\"'pdtemp-pd-prog:add'\" v-if=\"!selectedProgramme.id\" dialog-disable=\"disable\">{{ $t('table.save') }}\r\n      </el-button>\r\n      <el-button  size=\"small\" @click=\"handleClearFormProgramme\" icon=\"el-icon-refresh\" style=\"margin: 0\" type=\"primary\" dialog-disable=\"disable\" >\r\n        {{ $t('table.refresh') }}\r\n      </el-button>\r\n    </el-row>\r\n    <!--  -->\r\n    <el-dialog :title=\"$t('productProgramme.message.duplicated_programme')\" :visible.sync=\"dialogVisible_duplicated\"\r\n               v-dialog-drag width=\"50%\">\r\n      <el-table :data=\"tableData_combination_duplicated_add\" :span-method=\"objectSpanMethod_combination_duplicated_add\"\r\n                border class=\"wraper-table\" element-loading-text=\"Loading\" fit max-height=\"500px\" size=\"mini\">\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.mergedRowIndex + 1 }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.premiumCode')\" align=\"center\"\r\n                         prop=\"premiumCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.premiumName')\" align=\"center\"\r\n                         prop=\"premiumName\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.guaranteeCode')\" align=\"center\" prop=\"pdBnftCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.pdBnftName')\" align=\"center\" prop=\"pdBnftName\"></el-table-column>\r\n      </el-table>\r\n      <el-row style=\"text-align: center;margin-top: 20px\">\r\n        <el-col :offset=\"6\" :span=\"12\">\r\n          <el-button  size=\"small\" @click=\"dialogVisible_duplicated = false\" type=\"danger\" dialog-disable=\"disable\">{{ $t('productProgramme.close') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n    <!--  -->\r\n    <el-dialog :visible.sync=\"dialogVisible.premium\" title=\"\" v-dialog-drag v-if=\"dialogVisible.premium\"\r\n               width=\"70%\" @close='closeDia' :close-on-click-modal=\"false\">\r\n      <premium :premiumCode=\"selectedPremiumCode\"></premium>\r\n    </el-dialog>\r\n    <!--  -->\r\n    <el-dialog :visible.sync=\"dialogVisible.claimBenefit\" title=\"\" v-dialog-drag v-if=\"dialogVisible.claimBenefit\"\r\n               width=\"70%\" @close=\"closedDia\" :close-on-click-modal=\"false\">\r\n      <clmBnft :pdBnft=\"selectedClmBnft\"></clmBnft>\r\n    </el-dialog>\r\n    <!--  -->\r\n    <el-dialog :visible.sync=\"dialogVisible.noClaimBenefit\" title=\"\" v-dialog-drag v-if=\"dialogVisible.noClaimBenefit\"\r\n               width=\"70%\" @close=\"closedDia\" :close-on-click-modal=\"false\">\r\n      <noClmBnft :pdBnft=\"selectedClmBnft\"></noClmBnft>\r\n    </el-dialog>\r\n    <!--  -->\r\n    <el-dialog :visible.sync=\"dialogVisible.survivalBenefit\" title=\"\" v-dialog-drag v-if=\"dialogVisible.survivalBenefit\"\r\n               width=\"70%\" :before-close=\"closedDia\" :close-on-click-modal=\"false\">\r\n        <srvBnft :pdBnftReadOnly=\"selectedSrvBnft\"></srvBnft>\r\n    </el-dialog>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {addPdtempPdProg, deletePdtempPdProg, updatePdtempPdProg,getBnfInfo,findAllPremiumByProductId} from \"@/api/basicinfo/pdtemppdprog\"\r\nimport {getPdClsLabInfo} from \"@/api/basicinfo/ProductAttributeDefinition\"\r\nimport premium from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/index\"\r\nimport clmBnft from \"@/views/product-definition/pd-framework-def/pd-structure-def/guarantee-def/general-medical/index\"\r\nimport srvBnft from \"@/views/product-definition/pd-framework-def/pd-structure-def/guarantee-def/survival/index\"\r\nimport noClmBnft from \"@/views/product-definition/pd-framework-def/pd-structure-def/guarantee-def/no-general-medical/index\"\r\n\r\nexport default {\r\n  name: 'ProgrammeDefinition',\r\n  props:{\r\n    reaadOnlyPpProg:{\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  components: {premium, clmBnft, srvBnft,noClmBnft},\r\n  filters: {},\r\n  data() {\r\n    return {\r\n        initFormData1:false,\r\n        initFormData2:false,\r\n        initFormData3:false,\r\n        initFormData4:false,\r\n      showPageFlagS: 0,\r\n      showPageFlag: 0,\r\n      selectedPremiumCode: '',\r\n      selectedClmBnft: {},\r\n      selectedSrvBnft: {},\r\n      // \r\n      product: {\r\n        id: undefined,\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdStartDateRule: '',\r\n        pdStartDateMode: '',\r\n        pdStartPeriod: undefined,\r\n        pdStartPeriodUnit: '',\r\n        pdEndDateRule: '',\r\n        pdEndDateMode: '',\r\n        pdEndPeriod: undefined,\r\n        pdEndPeriodUnit: '',\r\n        pdGracePeriod: undefined,\r\n        pdObservationDay: undefined,\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        pdStartDate: undefined,\r\n        pdStopDate: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      product_extra: {\r\n        typeRegion: ''\r\n      },\r\n      // \r\n      tableData_programme: [],\r\n      params_programme: {\r\n        productId: undefined,\r\n        like_pdProgName: '',\r\n        eq_pdProgCode: ''\r\n      },\r\n      selectedProgramme: {\r\n        id: undefined,\r\n        programmeCode: '',\r\n        programmeName: '',\r\n        premiumCode: '',\r\n        premiumName: '',\r\n        benefitCode: '',\r\n        benefitName: '',\r\n        benefitType: '',\r\n        programme: {},\r\n        premium: {}\r\n      },\r\n      // \r\n      tableData_combination_add: [],\r\n      tableData_combination_before_add: [],\r\n      tableData_combination_duplicated_add: [],\r\n      orderIndexArr_programme: [],\r\n      orderIndexArr_combination_add: [],\r\n      orderIndexArr_combination_duplicated_add: [],\r\n      premiumList: [],\r\n      survivalList: [],\r\n      claimList: [],\r\n      dialogVisible: {\r\n        premium: false,\r\n        claimBenefit: false,\r\n        noClaimBenefit: false,\r\n        survivalBenefit: false\r\n      },\r\n      // \r\n      form_programme: {\r\n        id: undefined,\r\n        pdInfoId: undefined,\r\n        pdVerId: undefined,\r\n        pdCode: '',\r\n        pdProgCode: '',\r\n        pdProgName: '',\r\n        pdOptFlag: 'N',\r\n        pdInsuPeriod: undefined,\r\n        pdInsuPeriodUnit: '',\r\n        pdInsuPeriodCalMode: '0',\r\n        pdInsuEndCalRule: '0',\r\n        pdAmntCalRule: '',\r\n        pdAddAmntFlag: 'Y',\r\n        pdPayEndCalMode: '',\r\n        pdAmntSaleType: '',\r\n        operator: '',\r\n        createTime: '',\r\n        updateTime: ''\r\n      },\r\n      // \r\n      form_combination: {\r\n        premium: undefined,\r\n        survivalFlag: false,\r\n        claimFlag: false,\r\n        survival: [],\r\n        claim: []\r\n      },\r\n      // \r\n      form_combination_add: {\r\n        // PdtempPdBnft \r\n        id: undefined,\r\n        pdBnftCode: '',\r\n        pdBnftName: '',\r\n        pdBnftType: '',\r\n        pdAddAmntFlag: '',\r\n        pdBnftCalMode: '',\r\n        pdCalcId: undefined,\r\n        pdUrgePayFlag: '',\r\n        createTime: '',\r\n        updateTime: '',\r\n        operator: '',\r\n        // vo\r\n        premiumId: undefined,\r\n        premiumCode: '',\r\n        premiumName: '',\r\n        pdAddAmntProgFlag: ''\r\n      },\r\n      dialogVisible_duplicated: false,\r\n      // \r\n      initFlag: {\r\n        premium: false,\r\n        benefit: false\r\n      },\r\n      pageFlag: {\r\n        premium: true,\r\n        survival: true,\r\n        claim: true\r\n      },\r\n      indeterminate: {\r\n        survival: false,\r\n        claim: false\r\n      },\r\n      // \r\n      rules: {\r\n        pdProgName: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_enter') + this.$t('productProgramme.pdProgName'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdAddAmntFlag: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdAddAmntFlag'),\r\n          trigger: 'change'\r\n        }],\r\n        pdOptFlag: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdOptFlag'),\r\n          trigger: 'change'\r\n        }],\r\n        pdInsuPeriodCalMode: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdInsuPeriodCalMode'),\r\n          trigger: 'change'\r\n        }],\r\n        pdInsuPeriod: [{\r\n          required: false,\r\n          message: this.$t('productProgramme.message.please_enter') + this.$t('productProgramme.pdInsuPeriod'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdInsuPeriodUnit: [{\r\n          required: false,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdInsuPeriodUnit'),\r\n          trigger: 'change'\r\n        }],\r\n        pdInsuEndCalRule: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdInsuEndCalRule'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAmntSaleType: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdAmntSaleType'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAmntCalRule: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdAmntCalRule'),\r\n          trigger: 'change'\r\n        }],\r\n        pdPayEndCalMode: [{\r\n          required: true,\r\n          message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdPayEndCalMode'),\r\n          trigger: 'change'\r\n        }]\r\n      },\r\n    }\r\n  },\r\n  watch: {\r\n      'form_programme.pdInsuPeriodCalMode'(){\r\n          if (!(this.form_programme.pdInsuPeriodCalMode=='0' ||this.form_programme.pdInsuPeriodCalMode=='3') ){\r\n              this.form_programme.pdInsuPeriod='';\r\n              this.form_programme.pdInsuPeriodUnit='';\r\n          }\r\n      },\r\n      'form_programme.pdInsuPeriod'(){\r\n          if (this.form_programme.pdInsuPeriod){\r\n              if (!this.form_programme.pdInsuPeriodUnit){\r\n                  this.form_programme.pdInsuPeriodUnit='Y';\r\n              }\r\n          }else {\r\n              this.form_programme.pdInsuPeriodUnit='';\r\n          }\r\n      },\r\n      'form_programme.pdInsuPeriodUnit'(){\r\n          if (this.form_programme.pdInsuPeriod){\r\n              if (!this.form_programme.pdInsuPeriodUnit){\r\n                  this.form_programme.pdInsuPeriodUnit='Y';\r\n              }\r\n          }else {\r\n              this.form_programme.pdInsuPeriodUnit='';\r\n          }\r\n      },\r\n    'form_combination.claimFlag'(val) {\r\n      this.indeterminate.claim = false\r\n      if (val === true) {\r\n        this.form_combination.claim = []\r\n        for (const claim of this.claimList) {\r\n          this.form_combination.claim.push(claim)\r\n        }\r\n      } else {\r\n        this.form_combination.claim = []\r\n      }\r\n    },\r\n    'form_combination.claim'(val) {\r\n      if (val.length === 0) {\r\n        this.form_combination.claimFlag = false\r\n        this.indeterminate.claim = false\r\n      } else if (val.length < this.claimList.length) {\r\n        this.indeterminate.claim = true\r\n      } else {\r\n        this.indeterminate.claim = false\r\n        this.form_combination.claimFlag = true\r\n      }\r\n    },\r\n    'form_combination.survivalFlag'(val) {\r\n      this.indeterminate.survival = false\r\n      if (val === true) {\r\n        this.form_combination.survival = []\r\n        for (const survival of this.survivalList) {\r\n          this.form_combination.survival.push(survival)\r\n        }\r\n      } else {\r\n        this.form_combination.survival = []\r\n      }\r\n    },\r\n    'form_combination.survival'(val) {\r\n      if (val.length === 0) {\r\n        this.form_combination.survivalFlag = false\r\n        this.indeterminate.survival = false\r\n      } else if (val.length < this.survivalList.length) {\r\n        this.indeterminate.survival = true\r\n      } else {\r\n        this.indeterminate.survival = false\r\n        this.form_combination.survivalFlag = true\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  mounted(){\r\n    this.$emit('finish');\r\n  },\r\n  created() {\r\n    if (this.reaadOnlyPpProg===false){\r\n      this.reaadOnlyPpProg=false;\r\n      this.getProductInfo();\r\n      this.form_programme=JSON.parse(sessionStorage.getItem(\"form_programme\"));\r\n      this.pageFlag.survival = true\r\n      this.pageFlag.premium = true\r\n      this.pageFlag.claim = true;\r\n      this.premiumList=[];\r\n      this.claimList=[];\r\n      this.survivalList=[];\r\n      this.tableData_programme=[];\r\n      this.form_combination={\r\n        premium: undefined,\r\n          survivalFlag: false,\r\n          claimFlag: false,\r\n          survival: [],\r\n          claim: []\r\n      };\r\n      this.premiumList=JSON.parse(sessionStorage.getItem(\"premiumList\"));\r\n      this.claimList=JSON.parse(sessionStorage.getItem(\"claimList\"));\r\n      this.survivalList=JSON.parse(sessionStorage.getItem(\"survivalList\"));\r\n      this.tableData_programme=JSON.parse(sessionStorage.getItem(\"tableData_programme\"));\r\n      if (this.tableData_programme.length>0){\r\n        for(const demo1 of this.tableData_programme){\r\n          for (const items of this.claimList){\r\n            if (demo1.benefitCode==items.pdBnftCode){\r\n                this.form_combination.claim.push(items);\r\n            }\r\n          }\r\n        }\r\n        for(const demo1 of this.tableData_programme){\r\n          for (const items of this.premiumList){\r\n            if (demo1.premiumCode==items.pdPremCode){\r\n              this.form_combination.premium=items;\r\n            }\r\n          }\r\n        }\r\n        for(const demo1 of this.tableData_programme){\r\n          for (const items of this.survivalList){\r\n            if (demo1.benefitCode==items.pdBnftCode){\r\n              this.form_combination.survival.push(items);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }else {\r\n      this.reaadOnlyPpProg=true\r\n      this.cancelUpdateProgramme();\r\n      this.init()\r\n      this.showPageFlag = this.$route.query.showPageFlag\r\n      this.showPageFlagS = this.showPageFlag;\r\n    }\r\n  },\r\n  methods: {\r\n    setDefaultProgName(){\r\n\r\n      if(!this.form_programme.pdProgName){\r\n        this.premiumList.forEach(data=>{\r\n          if(this.form_combination.premium.pdPremCode == data.pdPremCode){\r\n            if(data.pdPayName.lastIndexOf(\"\")){\r\n              this.form_programme.pdProgName = data.pdPayName.substring(0,data.pdPayName.lastIndexOf(\"\"))+\"\"\r\n            }else{\r\n              this.form_programme.pdProgName = data.pdPayName+\"\"\r\n            }\r\n\r\n          }\r\n        })\r\n      }\r\n    },\r\n      closedDia(){\r\n\r\n        this.dialogVisible.survivalBenefit=false;\r\n                  this.dialogVisible.claimBenefit=false;\r\n                  this.dialogVisible.noClaimBenefit=false;\r\n                  if (this.selectedProgramme) {\r\n                      let a = this.selectedProgramme.programme.id;\r\n                      for (const item of this.tableData_programme) {\r\n                          if (item.programme.id === a) {\r\n                              this.selectedProgramme = item;\r\n                              break;\r\n                          }\r\n                      }\r\n                      this.selectedProgrammeChanged();\r\n                  }\r\n      },\r\n      closeDia(){\r\n          this.dialogVisible.premium=false;\r\n          if (this.selectedProgramme){\r\n              let a = this.selectedProgramme.programme.id;\r\n              for (const item of this.tableData_programme) {\r\n                  if (item.programme.id === a) {\r\n                      this.selectedProgramme = item;\r\n                      break;\r\n                  }\r\n              }\r\n              this.selectedProgrammeChanged();\r\n          }\r\n      },\r\n    init() {\r\n      this.getProductInfo();\r\n      this.initListShow();\r\n      this.init_typeRegion();\r\n    },\r\n    getProductInfo() {\r\n      // \r\n      this.product = this.getPdData()\r\n      this.params_programme.productId = this.product.id\r\n    },\r\n      initListShow(){\r\n\r\n        this.premiumList=[];\r\n        this.claimList=[];\r\n        this.survivalList=[];\r\n        findAllPremiumByProductId(this.product.id).then(response => {\r\n              for (const premium of response.data) {\r\n                  this.premiumList.push(premium)\r\n              }\r\n              this.initFlag.premium = true\r\n              getBnfInfo(this.product.id).then(response => {\r\n                  let map = response.data;\r\n                  this.survivalList = map.survival;\r\n                  this.claimList = map.claim;\r\n                  let j=0;\r\n                  for(j = 0; j < this.claimList.length; j++) {\r\n                      if ( this.claimList[j].pdAddAmntProgFlag!='' || this.claimList[j].pdAddAmntProgFlag!=null){\r\n                          this.claimList[j].pdAddAmntProgFlag='';\r\n                      }\r\n                  }\r\n                  for(j = 0; j < this.survivalList.length; j++) {\r\n                      if ( this.survivalList[j].pdAddAmntProgFlag!='' || this.survivalList[j].pdAddAmntProgFlag!=null){\r\n                          this.survivalList[j].pdAddAmntProgFlag='';\r\n                      }\r\n                  }\r\n                  this.initFlag.benefit = true\r\n                  if (this.initFlag.premium === true && this.initFlag.benefit === true) {\r\n                      this.autoBuildProgramme()\r\n                  }\r\n\r\n                if (this.form_programme.pdAddAmntFlag === 'Y'){\r\n                  for (let i = 0 ; i< this.survivalList.length ; i++){\r\n                    this.survivalList[i].pdAddAmntProgFlag = 'Y'\r\n\r\n                  }\r\n                }\r\n\r\n                if (this.form_programme.pdAddAmntFlag === 'Y'){\r\n                  for (let i = 0 ; i< this.claimList.length ; i++){\r\n                    this.claimList[i].pdAddAmntProgFlag = 'Y'\r\n\r\n                  }\r\n                }\r\n\r\n              })\r\n          })\r\n\r\n      },\r\n\r\n    // \r\n    init_typeRegion() {\r\n      const paramsMap = {\r\n        pd_info_id: this.product.id,\r\n        pd_cls_type: '1'\r\n      }\r\n      getPdClsLabInfo(this.buildRequestData(paramsMap)).then(response => {\r\n        const pdTempClsLabList = response.data\r\n        const pdCls1Array = this._.map(pdTempClsLabList, 'pdCls1')\r\n        if (pdCls1Array.length > 0) {\r\n          this.product_extra.typeRegion = pdCls1Array[0]\r\n        }\r\n      })\r\n\r\n    },\r\n    autoBuildProgramme() {\r\n\r\n      if (this.premiumList.length !== 1 || this.survivalList.length === 0 && this.claimList.length === 0) {\r\n        return\r\n      }\r\n      this.pageFlag.premium = true\r\n      this.pageFlag.survival = true\r\n      this.pageFlag.claim = true\r\n      this.form_combination.premium = this.premiumList[0]\r\n      // console.log(this.form_combination.premium)\r\n      this.form_combination.claim = this.claimList\r\n      this.form_combination.survival = this.survivalList;\r\n      if (this.claimList.length>0){\r\n          for(const item of this.claimList){\r\n              if (item.pdOptFlag=='N'){\r\n                  this.initFormData3=true;\r\n              }else {\r\n                  this.initFormData3=false;\r\n                  break;\r\n              }\r\n          }\r\n      }else{\r\n          this.initFormData3=true;\r\n      }\r\n        if (this.survivalList.length>0){\r\n            for(const item of this.survivalList){\r\n                if (item.pdOptFlag=='N'){\r\n                    this.initFormData2=true;\r\n                }else {\r\n                    this.initFormData2=false;\r\n                    break;\r\n                }\r\n            }\r\n        }else {\r\n            this.initFormData2=true;\r\n        }\r\n        if (this.premiumList.length==1){\r\n            this.initFormData1=true\r\n        }else {\r\n            this.initFormData1=false;\r\n        }\r\n        if (this.initFormData2 && this.initFormData1 && this.initFormData3){\r\n            this.$refs.page_programme.buildData().then(()=>{\r\n                if (this.tableData_programme.length<1){\r\n                    let arrStr = this.premiumList[0].pdPayName.replace(\"\",\"\");\r\n                    this.form_programme.pdProgName=arrStr+'';\r\n                    this.form_programme.pdOptFlag='N';\r\n                    if (this.premiumList[0].pdPremCalMode=='P'){\r\n                        this.form_programme.pdAmntSaleType='4'\r\n                    }else {\r\n                        this.form_programme.pdAmntSaleType='1'\r\n                    }\r\n                    this.form_programme.pdAmntCalRule='1';\r\n                    this.form_programme.pdInsuPeriodCalMode='1';\r\n                    this.form_programme.pdPayEndCalMode='1';\r\n                    this.initFormData2=false;\r\n                    // this.initHandleSaveAll();\r\n                }\r\n            })\r\n        }\r\n      // this.handleAddProgramme(this.premiumList[0], this.survivalList, this.claimList, false)\r\n    },\r\n    handleSearch() {\r\n\r\n      this.$refs.page_programme.reload()\r\n    },\r\n    rowClick(row, column, event) {\r\n\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedProgramme.id) {\r\n          this.cancelUpdateProgramme()\r\n        }\r\n      }\r\n    },\r\n    selectedProgrammeChanged() {\r\n\r\n      let j=0;\r\n        for(j = 0; j < this.claimList.length; j++) {\r\n            if ( this.claimList[j].pdAddAmntProgFlag!='' || this.claimList[j].pdAddAmntProgFlag!=null){\r\n                this.claimList[j].pdAddAmntProgFlag='';\r\n            }\r\n        }\r\n        let jj=0;\r\n        for(jj = 0; jj < this.survivalList.length; jj++) {\r\n            if ( this.survivalList[jj].pdAddAmntProgFlag!='' || this.survivalList[jj].pdAddAmntProgFlag!=null){\r\n                this.survivalList[jj].pdAddAmntProgFlag='';\r\n            }\r\n        }\r\n      this.resetFormProgramme()\r\n      this.resetFormCombination()\r\n      this.$nextTick(() => {\r\n        // \r\n        this.form_programme = Object.assign({}, this.selectedProgramme.programme)\r\n        // \r\n        this.pageFlag.premium = true\r\n        let existedPremium = this.selectedProgramme.premium\r\n        for (const premium of this.premiumList) {\r\n          if (premium.id === existedPremium.id) {\r\n            this.form_combination.premium = premium\r\n            break;\r\n          }\r\n        }\r\n        // \r\n        let existedSurvivalList = []\r\n        let existedClaimList = []\r\n        for (const benefitVo of this.tableData_programme) {\r\n          if (benefitVo.programmeCode === this.form_programme.pdProgCode) {\r\n            switch (benefitVo.benefitType) {\r\n              case \"A\":\r\n              case \"M\":\r\n                existedSurvivalList.push(benefitVo)\r\n                this.pageFlag.survival = true\r\n                break\r\n              case \"C\":\r\n                existedClaimList.push(benefitVo)\r\n                this.pageFlag.claim = true\r\n                break\r\n              default:\r\n                break\r\n            }\r\n          }\r\n        }\r\n        for (const existedSurvival of existedSurvivalList) {\r\n          for (const survival of this.survivalList) {\r\n            if (survival.id === existedSurvival.id) {\r\n                survival.pdAddAmntProgFlag = existedSurvival.pdAddAmntProgFlag;\r\n              this.form_combination.survival.push(survival);\r\n              break\r\n            }\r\n          }\r\n        }\r\n        for (const existedClaim of existedClaimList) {\r\n          for (const claim of this.claimList) {\r\n            if (claim.id === existedClaim.id) {\r\n                claim.pdAddAmntProgFlag=existedClaim.pdAddAmntProgFlag\r\n              this.form_combination.claim.push(claim)\r\n              break\r\n            }\r\n          }\r\n        }\r\n      })\r\n\r\n    },\r\n    cancelUpdateProgramme() {\r\n\r\n      let j=0;\r\n        for(j = 0; j < this.claimList.length; j++) {\r\n            if ( this.claimList[j].pdAddAmntProgFlag!='' || this.claimList[j].pdAddAmntProgFlag!=null){\r\n                this.claimList[j].pdAddAmntProgFlag='';\r\n            }\r\n        }\r\n        let jj=0;\r\n        for(jj = 0; jj < this.survivalList.length; jj++) {\r\n            if ( this.survivalList[jj].pdAddAmntProgFlag!='' || this.survivalList[jj].pdAddAmntProgFlag!=null){\r\n                this.survivalList[jj].pdAddAmntProgFlag='';\r\n            }\r\n        }\r\n      this.resetSelectedProgramme()\r\n      this.resetFormProgramme()\r\n      this.resetFormCombination()\r\n      this.$nextTick(() => {\r\n        this.$refs.form_programme.clearValidate()\r\n      });\r\n    },\r\n    handleAddProgramme(premium, survival, claim, showTips) {\r\n\r\n      if (!premium) {\r\n        this.notifyError(this.$t('productProgramme.message.please_select_premium'))\r\n        return\r\n      } else if (survival.length === 0 && claim.length === 0) {\r\n        this.notifyError(this.$t('productProgramme.message.please_select_benefit'))\r\n        return\r\n      } else {\r\n\r\n      }\r\n      // this.resetTableDataCombinationBeforeAdd()\r\n      if (survival.length > 0) {\r\n        for (const survivalItem of survival) {\r\n          this.resetFormCombinationAdd()\r\n          Object.assign(this.form_combination_add, survivalItem)\r\n          this.form_combination_add.premiumId = premium.id\r\n          this.form_combination_add.premiumCode = premium.pdPremCode\r\n          this.form_combination_add.premiumName = premium.pdPayName\r\n          this.tableData_combination_before_add.push(this.form_combination_add)\r\n        }\r\n      }\r\n      if (claim.length > 0) {\r\n        for (const claimItem of claim) {\r\n          this.resetFormCombinationAdd()\r\n          Object.assign(this.form_combination_add, claimItem)\r\n          this.form_combination_add.premiumId = premium.id\r\n          this.form_combination_add.premiumCode = premium.pdPremCode\r\n          this.form_combination_add.premiumName = premium.pdPayName\r\n          this.tableData_combination_before_add.push(this.form_combination_add)\r\n        }\r\n      }\r\n      // \r\n      this.resetTableDataCombinationDuplicatedAdd()\r\n      for (const form_combination_before_add of this.tableData_combination_before_add) {\r\n\r\n      }\r\n      if (this.tableData_combination_duplicated_add.length > 0) {\r\n        this.getOrderNumber('combination_duplicated_add')\r\n        this.dialogVisible_duplicated = true\r\n      } else {\r\n\r\n        this.getOrderNumber('combination_add')\r\n        if (showTips === true) {\r\n          this.notifySuccess(this.$t('productProgramme.message.add_success'))\r\n        }\r\n      }\r\n    },\r\n    handleDeleteCombinationAdd(row) {\r\n\r\n      this.getOrderNumber('combination_add')\r\n    },\r\n    handleUpdateAll() {\r\n      this.$refs.form_programme.validate(pass => {\r\n        if (pass) {\r\n          this.form_programme.pdInfoId = this.product.id\r\n          this.form_programme.pdCode = this.product.pdCode;\r\n            let arr = [];\r\n            arr=this.form_combination.claim;\r\n            arr=arr.concat(this.form_combination.survival);\r\n            let map={\r\n                programme: this.form_programme,\r\n                premiumId: this.form_combination.premium.id,\r\n                premiumCode: this.form_combination.premium.pdPremCode,\r\n                benefitList: arr\r\n            }\r\n          updatePdtempPdProg(this.buildRequestData(map)).then(() => {\r\n              let a = this.selectedProgramme.programme.id;\r\n            this.$emit('childFn', true);\r\n            this.notifySuccess(this.$t('productProgramme.message.update_all_success'))\r\n              this.$refs.page_programme.buildData().then(() => {\r\n                  this.cancelUpdateProgramme();\r\n                  this.$nextTick(()=>{\r\n                  for (const item of this.tableData_programme){\r\n                      if (item.programme.id===a){\r\n                         this.selectedProgramme=item;\r\n                          this.selectedProgrammeChanged();\r\n                          break;\r\n                      }\r\n                  }\r\n\r\n                  })\r\n              })\r\n          })\r\n        } else {\r\n          this.notifyError(this.$t('productProgramme.message.form_validation_failed'))\r\n        }\r\n      })\r\n    },\r\n      initHandleSaveAll(){\r\n\r\n        this.$refs.form_programme.validate(pass => {\r\n              if (pass) {\r\n                  this.form_programme.pdInfoId = this.product.id\r\n                  this.form_programme.pdVerId = this.product.pdVerId\r\n                  this.form_programme.pdCode = this.product.pdCode;\r\n                  let arr = [];\r\n                  arr=this.form_combination.claim;\r\n                  arr=arr.concat(this.form_combination.survival);\r\n                  const param = {\r\n                      programme: this.form_programme,\r\n                      premiumId: this.form_combination.premium.id,\r\n                      premiumCode: this.form_combination.premium.pdPremCode,\r\n                      benefitList: arr,\r\n                      typeRegion: this.product_extra.typeRegion,\r\n                      needCheckingPremium: true\r\n                  }\r\n                  addPdtempPdProg(this.buildRequestData(param)).then(response => {\r\n                      let successFlag = response.data\r\n                      if (successFlag === true) {\r\n                          this.$refs.page_programme.buildData().then(() => {\r\n                              this.cancelUpdateProgramme();\r\n                          });\r\n                          this.$emit('childFn', true);\r\n                      } else {\r\n                          this.$confirm(this.$t('productProgramme.message.confirm_overwrite_programme'), this.$t('confirmMessage.tip'), {\r\n                              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                              type: 'warning'\r\n                          }).then(() => {\r\n                              param.needCheckingPremium = false\r\n                              addPdtempPdProg(this.buildRequestData(param)).then(() => {\r\n                                  this.resetSelectedProgramme();\r\n                                  this.resetFormProgramme()\r\n                                  this.resetFormCombination()\r\n                                  this.$emit('childFn', true);\r\n                                  this.notifySuccess(this.$t('productProgramme.message.save_all_success'))\r\n                                  this.$refs.page_programme.reload()\r\n                                  this.$nextTick(() => {\r\n                                      this.$refs.form_programme.clearValidate()\r\n                                  })\r\n                              })\r\n                          }).catch(() => {\r\n                              this.$message({\r\n                                  type: 'info',\r\n                                  message: this.$t('productProgramme.message.canceled')\r\n                              });\r\n                          })\r\n                      }\r\n                  })\r\n              } else {\r\n                  this.notifyError(this.$t('productProgramme.message.form_validation_failed'))\r\n              }\r\n          })\r\n      },\r\n    handleSaveAll() {\r\n\r\n      this.$refs.form_programme.validate(pass => {\r\n        if (pass) {\r\n          if (this.form_combination.premium == null || this.form_combination.premium == ''){\r\n            this.notifyError(\"\")\r\n            return\r\n          }\r\n          if (this.form_combination.claim.length == 0 && this.form_combination.survival.length == 0){\r\n            this.notifyError(\"\")\r\n            return\r\n          }\r\n\r\n          this.form_programme.pdInfoId = this.product.id\r\n          this.form_programme.pdVerId = this.product.pdVerId\r\n          this.form_programme.pdCode = this.product.pdCode;\r\n          let arr = [];\r\n          arr=this.form_combination.claim;\r\n          arr=arr.concat(this.form_combination.survival);\r\n          const param = {\r\n            programme: this.form_programme,\r\n            premiumId: this.form_combination.premium.id,\r\n            premiumCode: this.form_combination.premium.pdPremCode,\r\n            benefitList: arr,\r\n            typeRegion: this.product_extra.typeRegion,\r\n            needCheckingPremium: true\r\n          }\r\n          addPdtempPdProg(this.buildRequestData(param)).then(response => {\r\n            let successFlag = response.data\r\n            if (successFlag === true) {\r\n                this.$refs.page_programme.buildData().then(() => {\r\n                    this.cancelUpdateProgramme();\r\n                });\r\n              this.$emit('childFn', true);\r\n              this.notifySuccess(this.$t('productProgramme.message.save_all_success'))\r\n            } else {\r\n              this.$confirm(this.$t('productProgramme.message.confirm_overwrite_programme'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                param.needCheckingPremium = false\r\n                addPdtempPdProg(this.buildRequestData(param)).then(() => {\r\n\r\n                  this.resetSelectedProgramme();\r\n                  this.resetFormProgramme()\r\n                  this.resetFormCombination()\r\n                  this.$emit('childFn', true);\r\n                  this.notifySuccess(this.$t('productProgramme.message.save_all_success'))\r\n                  this.$refs.page_programme.reload()\r\n                  this.$nextTick(() => {\r\n                    this.$refs.form_programme.clearValidate()\r\n                  })\r\n                })\r\n                this.cancelUpdateProgramme();\r\n              }).catch(() => {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: this.$t('productProgramme.message.canceled')\r\n                });\r\n              })\r\n            }\r\n          })\r\n        } else {\r\n          this.notifyError(this.$t('productProgramme.message.form_validation_failed'))\r\n        }\r\n      })\r\n    },\r\n    handleDeleteProgramme() {\r\n\r\n      deletePdtempPdProg(this.selectedProgramme.programme.id).then(() => {\r\n        this.notifySuccess(this.$t('successMessage.delete'));\r\n        this.init();\r\n        this.$refs.page_programme.buildData().then(() =>{\r\n            this.cancelUpdateProgramme();\r\n            this.$refs.form_programme.clearValidate();\r\n\r\n        });\r\n      })\r\n    },\r\n    handleClearFormProgramme() {\r\n\r\n      if (this.selectedProgramme.programme){\r\n            this.selectedProgrammeChanged();\r\n        }else {\r\n            this.cancelUpdateProgramme();\r\n        }\r\n\r\n    },\r\n    // \r\n    getOrderNumber(arrayName) {\r\n\r\n      let tableData\r\n      let orderIndexArr\r\n      if (arrayName === 'combination_add') {\r\n      } else if (arrayName === 'combination_duplicated_add') {\r\n        tableData = this.tableData_combination_duplicated_add\r\n      } else {\r\n        return\r\n      }\r\n      orderIndexArr = []\r\n      //  premiumCode  premiumCode \r\n      tableData = this._.orderBy(tableData, ['premiumCode', 'pdBnftCode'], ['asc', 'asc'])\r\n      if (arrayName === 'combination_add') {\r\n      } else if (arrayName === 'combination_duplicated_add') {\r\n        this.tableData_combination_duplicated_add = tableData\r\n      }\r\n      let orderObj = {}\r\n      tableData.forEach((element, index) => {\r\n        element.rowIndex = index\r\n        if (orderObj[element.premiumCode]) {\r\n          orderObj[element.premiumCode].push(index)\r\n        } else {\r\n          orderObj[element.premiumCode] = []\r\n          orderObj[element.premiumCode].push(index)\r\n        }\r\n      })\r\n      //  index  this.orderIndexArr\r\n      for (const k in orderObj) {\r\n        orderIndexArr.push(orderObj[k])\r\n      }\r\n      if (arrayName === 'combination_add') {\r\n        this.orderIndexArr_combination_add = orderIndexArr\r\n      } else if (arrayName === 'combination_duplicated_add') {\r\n        this.orderIndexArr_combination_duplicated_add = orderIndexArr\r\n        this.getMergedRowIndex(this.tableData_combination_duplicated_add, this.orderIndexArr_combination_duplicated_add)\r\n      }\r\n    },\r\n    getMergedRowIndex(tableData, orderIndexArr) {\r\n\r\n      a:for (const row of tableData) {\r\n        const rowIndex = row.rowIndex\r\n        for (let i = 0; i < orderIndexArr.length; i++) {\r\n          const val = orderIndexArr[i]\r\n          for (const number of val) {\r\n            if (rowIndex === number) {\r\n              row.mergedRowIndex = i\r\n              continue a\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    objectSpanMethod_programme({row, column, rowIndex, columnIndex}) {\r\n\r\n      if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2 || columnIndex === 3 || columnIndex === 4 || columnIndex === 5) {\r\n        for (let i = 0; i < this.orderIndexArr_programme.length; i++) {\r\n          let element = this.orderIndexArr_programme[i]\r\n          for (let j = 0; j < element.length; j++) {\r\n            let item = element[j]\r\n            if (rowIndex === item) {\r\n              if (j === 0) {\r\n                return {\r\n                  rowspan: element.length,\r\n                  colspan: 1\r\n                }\r\n              } else {\r\n                return {\r\n                  rowspan: 0,\r\n                  colspan: 0\r\n                }\r\n              }\r\n            }else {\r\n                this.resetFormProgramme()\r\n                this.resetFormCombination()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    objectSpanMethod_combination_add({row, column, rowIndex, columnIndex}) {\r\n\r\n      if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2) {\r\n        for (let i = 0; i < this.orderIndexArr_combination_add.length; i++) {\r\n          let element = this.orderIndexArr_combination_add[i]\r\n          for (let j = 0; j < element.length; j++) {\r\n            let item = element[j]\r\n            if (rowIndex === item) {\r\n              if (j === 0) {\r\n                return {\r\n                  rowspan: element.length,\r\n                  colspan: 1\r\n                }\r\n              } else {\r\n                return {\r\n                  rowspan: 0,\r\n                  colspan: 0\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    objectSpanMethod_combination_duplicated_add({row, column, rowIndex, columnIndex}) {\r\n\r\n      if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2 || columnIndex === 5) {\r\n        for (let i = 0; i < this.orderIndexArr_combination_duplicated_add.length; i++) {\r\n          let element = this.orderIndexArr_combination_duplicated_add[i]\r\n          for (let j = 0; j < element.length; j++) {\r\n            let item = element[j]\r\n            if (rowIndex === item) {\r\n              if (j === 0) {\r\n                return {\r\n                  rowspan: element.length,\r\n                  colspan: 1\r\n                }\r\n              } else {\r\n                return {\r\n                  rowspan: 0,\r\n                  colspan: 0\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    resetSelectedProgramme() {\r\n\r\n      this.selectedProgramme = {\r\n        id: undefined,\r\n        programmeCode: '',\r\n        programmeName: '',\r\n        premiumCode: '',\r\n        premiumName: '',\r\n        benefitCode: '',\r\n        benefitName: '',\r\n        benefitType: '',\r\n        programme: {},\r\n        premium: {}\r\n      }\r\n    },\r\n    // \r\n    resetFormProgramme() {\r\n\r\n      this.form_programme = {\r\n        id: undefined,\r\n        pdInfoId: undefined,\r\n        pdVerId: undefined,\r\n        pdCode: '',\r\n        pdProgCode: '',\r\n        pdProgName: '',\r\n        pdOptFlag: 'N',\r\n        pdInsuPeriod: undefined,\r\n        pdInsuPeriodUnit: '',\r\n        pdInsuPeriodCalMode: '',\r\n        pdInsuEndCalRule: '0',\r\n        pdAmntCalRule: '',\r\n        pdAddAmntFlag: 'Y',\r\n        pdPayEndCalMode: '',\r\n        pdAmntSaleType: '',\r\n        operator: '',\r\n        createTime: '',\r\n        updateTime: ''\r\n      }\r\n    },\r\n    resetFormCombination() {\r\n\r\n      this.pageFlag.premium = true\r\n      this.pageFlag.claim = true\r\n      this.pageFlag.survival = true\r\n      this.indeterminate.survival = false\r\n      this.indeterminate.claim = false\r\n      this.form_combination = {\r\n        premium: undefined,\r\n        survivalFlag: false,\r\n        claimFlag: false,\r\n        survival: [],\r\n        claim: []\r\n      }\r\n    },\r\n    resetFormCombinationAdd() {\r\n\r\n      this.form_combination_add = {\r\n        // PdtempPdBnft \r\n        id: undefined,\r\n        pdBnftCode: '',\r\n        pdBnftName: '',\r\n        pdBnftType: '',\r\n        pdAddAmntFlag: '',\r\n        pdBnftCalMode: '',\r\n        pdCalcId: undefined,\r\n        pdUrgePayFlag: '',\r\n        createTime: '',\r\n        updateTime: '',\r\n        operator: '',\r\n        // vo\r\n        premiumId: undefined,\r\n        premiumCode: '',\r\n        premiumName: '',\r\n        pdAddAmntProgFlag: ''\r\n      }\r\n    },\r\n    resetTableDataCombinationBeforeAdd() {\r\n\r\n      this.tableData_combination_before_add = []\r\n    },\r\n    resetTableDataCombinationDuplicatedAdd() {\r\n\r\n      this.tableData_combination_duplicated_add = []\r\n    },\r\n    toPremiumPage(pdPremCode) {\r\n\r\n      if (!pdPremCode) {\r\n        this.notifyError(this.$t('productProgramme.message.invalidPremCode'))\r\n      } else {\r\n        this.selectedPremiumCode = pdPremCode\r\n        this.dialogVisible.premium = true\r\n      }\r\n    },\r\n    toSrvBnftPage(survival) {\r\n\r\n      if (Object.keys(survival).length > 0) {\r\n          this.selectedSrvBnft = JSON.parse(JSON.stringify(survival));\r\n        this.dialogVisible.survivalBenefit = true\r\n      } else {\r\n        this.notifyError(this.$t('productProgramme.message.invalidBenefit'))\r\n      }\r\n    },\r\n    toClmBnftPage(survival) {\r\n\r\n      if (Object.keys(survival).length > 0) {\r\n        this.selectedClmBnft = JSON.parse(JSON.stringify(survival))\r\n        this.selectedClmBnft.readonly = true\r\n        if(survival.pdBnftDetailType==='7'){\r\n          this.dialogVisible.claimBenefit = true\r\n        }else{\r\n          this.dialogVisible.noClaimBenefit = true\r\n        }\r\n      } else {\r\n        this.notifyError(this.$t('productProgramme.message.invalidBenefit'))\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.showDiv {\r\n  width: 90%;\r\n  height: 100%;\r\n  margin-top: -40px;\r\n  margin-left: -40px;\r\n  position: absolute;\r\n  background: #ffffff00;\r\n  z-index: 999;\r\n}\r\n\r\n.divider {\r\n  color: black;\r\n  background-color: black;\r\n  width: 1px;\r\n}\r\n\r\n</style>\r\n"]}]}