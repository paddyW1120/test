{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-underwriting-def\\unw-main\\index.vue?vue&type=style&index=0&id=440fb9de&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-underwriting-def\\unw-main\\index.vue","mtime":1609847107055},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KDQouc2hvd0RpdiB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIG1hcmdpbi10b3A6IC00MHB4Ow0KICBtYXJnaW4tbGVmdDogLTQwcHg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYmFja2dyb3VuZDogI2ZmZmZmZjAwOw0KICB6LWluZGV4OiA5OTk7DQp9DQoNCg0KLmNvbGxhcHNlQ3VzUGRVbmRlcldyaXRpbmcgew0KICB0b3A6IDEzMHB4ICFpbXBvcnRhbnQ7DQogIHJpZ2h0OiAwcHggIWltcG9ydGFudDsNCiAgd2lkdGg6IDE3MHB4ICFpbXBvcnRhbnQ7DQp9DQoNCi5wYWNrYWdlLXVuZGVyV3JpdGluZy1jb250YWluZXIgew0KICB3aWR0aDogY2FsYygxMDAlIC0gMTU1cHgpOw0KfQ0KDQouaXNfZml4ZWQgew0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHRvcDogMHB4ICFpbXBvcnRhbnQ7DQogIHotaW5kZXg6IDk5Ow0KfQ0KDQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-underwriting-def/unw-main","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div class=\"package-underWriting-container\">\r\n      <cus-page-title-back :label=\"$t('underwritingDefinitionMain.packageUnderWritingMenu')\" @backTo=\"backToMenu\"/>\r\n<!--      <cus-page-title-back v-if=\"revisionFlag\" label=\"套餐校验规则订正\" @backTo=\"backToRevision\"/>-->\r\n<!--      <cus-page-title-back v-if=\"showPageFlag=='1'\" @backTo=\"backToSaleStop\" :label=\"$t('underwritingDefinitionMain.comboStopPage')\"/>-->\r\n      <!-- 产品套餐信息 -->\r\n      <el-form ref=\"form\" :model=\"form\">\r\n        <el-row>\r\n          <el-form-item :label=\"$t('underwritingDefinitionMain.productMeat')\">\r\n            <el-tag type=\"info\">{{ form.ppCode + ' : ' + form.ppName }}</el-tag>\r\n          </el-form-item>\r\n        </el-row>\r\n      </el-form>\r\n      <el-collapse id=\"boxFixed\" v-model=\"active\" :class=\"{'is_fixed' : isFixed}\" accordion\r\n                   class=\"collapseCus collapseCusPdUnderWriting\">\r\n        <el-collapse-item :title=\"$t('underwritingDefinitionMain.packageUnderWritingMenu')\" name=\"packageUnderwriting\">\r\n          <div class=\"stepDiv\" style=\"height: 64px;\">\r\n            <el-steps :active=\"activeName\" direction=\"vertical\" finish-status=\"wait\" process-status=\"finish \">\r\n              <el-step :title=\"$t('underwritingDefinitionMain.stepunderwritingRule')\" icon=\"el-icon-info\"\r\n                       @click.native=\"handleUnderwriting('underwritingRule')\"></el-step>\r\n              <el-step :title=\"$t('underwritingDefinitionMain.steprenewInsuranceRule')\" icon=\"el-icon-info\"\r\n                       @click.native=\"handleUnderwriting('renewInsuranceRule')\"></el-step>\r\n            </el-steps>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n\r\n      <el-tabs v-model=\"activeTabName\" type=\"border-card\" @tab-click=\"clickTab\">\r\n        <el-tab-pane :label=\"$t('underwritingDefinitionMain.underwritingRule')\" name=\"underwritingRule\">\r\n          <div :class=\"{ 'showDiv': showPageFlag == 1 }\"></div>\r\n          <component :is=\"componentName\" v-if=\"underWritingFlag1\" @childFn=\"parentFn\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n        <el-tab-pane :label=\"$t('underwritingDefinitionMain.renewInsuranceRule')\" name=\"renewInsuranceRule\">\r\n          <div :class=\"{ 'showDiv': showPageFlag == 1 }\"></div>\r\n          <component :is=\"componentName\" v-if=\"underWritingFlag2\" @childFn=\"parentFn\" @hook:mounted=\"finishPage\"/>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n\r\n      <operationbutton :procInsId=\"pdProcessId\" :type=\"type\" clazz=\"packageFinishDefWithNav\"></operationbutton>\r\n    </div>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport operationbutton from '@/views/basicinfo/operationend/index'\r\nimport {mapGetters} from 'vuex'\r\n\r\nexport default {\r\n  name: 'underwritingDefinitionMain',\r\n  computed: {\r\n    ...mapGetters(['tenantCode'])\r\n  },\r\n  data() {\r\n    return {\r\n      revisionFlag: false,\r\n      type: 'packageUnderwritingFlag',\r\n      showPageFlag: '',\r\n      activeName: 0,\r\n      activeTabName: 'underwritingRule',\r\n      active: 'packageUnderwriting',\r\n      isFixed: false,\r\n      offsetTop: 20,\r\n      componentName: '',\r\n      underWritingFlag1: false,\r\n      underWritingFlag2: false,\r\n      nowPosition: 'underwritingRule',\r\n      stepOrder: {'underwritingRule': 0, 'renewInsuranceRule': 1},\r\n      form: {\r\n        ppCode: '',\r\n        ppName: ''\r\n      },\r\n      pageFlag:'',\r\n      comboInfo:{},\r\n      pdProcessId: ''\r\n    }\r\n  },\r\n  async created() {\r\n    this.revisionFlag = this.$route.query.productCalcRevisionShowINfo === 'true'\r\n    this.pageFlag=this.$route.query.pageFlag\r\n    let pdInfoData = this.getPdData();\r\n    this.comboInfo=pdInfoData\r\n    this.form.ppCode = pdInfoData.ppCode\r\n    this.form.ppName = pdInfoData.ppName\r\n    this.pdProcessId = pdInfoData.pdProcessId\r\n    this.switchComponent('underwritingRule')\r\n  },\r\n  components: {operationbutton},\r\n  mounted() {\r\n    window.addEventListener(\"scroll\", this.initHeight);\r\n    this.$nextTick(() => {\r\n      this.offsetTop = document.querySelector(\"#boxFixed\").offsetTop;\r\n    });\r\n    this.$emit('finish')\r\n  },\r\n  methods: {\r\n    finishPage(){\r\n      this.$emit('finish')\r\n    },\r\n    handleUnderwriting(type) {\r\n      let index = this.stepOrder[type]\r\n      if (this.nowPosition !== type) {\r\n        if (this.isSaved) {\r\n          this.isSaved = false\r\n          this.activeName = index\r\n          this.activeTabName = type\r\n          this.nowPosition = type\r\n          this.switchComponent(type)\r\n        } else {\r\n          this.$confirm(\r\n            this.$t('productMenu.messageTitle'),\r\n            this.$t('productMenu.messageTip'),\r\n            {\r\n              confirmButtonText: this.$t('productMenu.messageButton2'),\r\n              cancelButtonText: this.$t('productMenu.messageButton1'),\r\n              type: 'warning'\r\n            }\r\n          ).then(() => {\r\n            this.activeName = index\r\n            this.activeTabName = type\r\n            this.nowPosition = type\r\n            window.scrollTo(0, 0)\r\n            this.switchComponent(type)\r\n          }).catch(() => {\r\n            this.activeTabName = this.nowPosition\r\n          })\r\n        }\r\n\r\n      }\r\n    },\r\n    switchComponent(type) {\r\n      let moduleLocation = this.getComponentPath(type)\r\n      const path = moduleLocation + '/' + this.tenantCode + '/index'\r\n      let path1 = this.isInAllVue(path)\r\n      this.componentName = resolve => require.ensure([], () => resolve(require(`@/views/${path1}`)))\r\n    },\r\n    getComponentPath(type) {\r\n      this.underWritingFlag1 = false;\r\n      this.underWritingFlag2 = false;\r\n      switch (type) {\r\n        case  'underwritingRule':\r\n          this.underWritingFlag1 = true;\r\n          return 'product-package-definition/pp-operation-def/pp-underwriting-def/unw-new-rule'\r\n        case  'renewInsuranceRule':\r\n          this.underWritingFlag2 = true;\r\n          return 'product-package-definition/pp-operation-def/pp-underwriting-def/unw-renew-rule'\r\n        default :\r\n          return ''\r\n      }\r\n    },\r\n    parentFn(val) {\r\n      this.isSaved = val\r\n    },\r\n    // backToRevision() {\r\n    //   this.$router.push({name: '套餐校验规则订正主页'})\r\n    // },\r\n    backToMenu() {\r\n      this.$router.push({path: '/product-package-definition/pp-operation-def/pp-underwriting-def/pp-underwriting-def/unw-apply', params: {}})    },\r\n    // backToSaleStop(){\r\n    //   this.$router.push({ name: '套餐停售', query:{comboInfo:this.comboInfo,pageFlag:this.pageFlag}})\r\n    // },\r\n    clickTab(val) {\r\n      let type = val.name\r\n      this.handleUnderwriting(type)\r\n    },\r\n    initHeight() {\r\n      let scrollTop =\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop;\r\n      this.isFixed = scrollTop > this.offsetTop;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.showDiv {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: -40px;\r\n  margin-left: -40px;\r\n  position: absolute;\r\n  background: #ffffff00;\r\n  z-index: 999;\r\n}\r\n\r\n\r\n.collapseCusPdUnderWriting {\r\n  top: 130px !important;\r\n  right: 0px !important;\r\n  width: 170px !important;\r\n}\r\n\r\n.package-underWriting-container {\r\n  width: calc(100% - 155px);\r\n}\r\n\r\n.is_fixed {\r\n  position: fixed;\r\n  top: 0px !important;\r\n  z-index: 99;\r\n}\r\n\r\n</style>\r\n"]}]}