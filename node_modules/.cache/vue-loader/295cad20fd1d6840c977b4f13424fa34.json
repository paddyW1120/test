{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\guarantee-def\\general-medical\\pdtemppdmedfeebill\\index.vue?vue&type=style&index=0&id=2ac81591&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-structure-def\\guarantee-def\\general-medical\\pdtemppdmedfeebill\\index.vue","mtime":1609847106869},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5kaXZpZGVyIHsNCiAgY29sb3I6IGJsYWNrOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsNCiAgd2lkdGg6IDFweA0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwoBA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-framework-def/pd-structure-def/guarantee-def/general-medical/pdtemppdmedfeebill","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :isDialog=\"true\" :label=\"$t('i18nView.clmMedFeeCus')\" @backTo=\"backToMenu\"></cus-page-title-back>\r\n\r\n    <el-form ref=\"medForm\" :model=\"medForm\" :rules=\"rulesmedBillType\" label-width=\"auto\">\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.guaranteeItem')\">\r\n            <el-input v-model=\"bnftForm.pdBnftCode+':'+bnftForm.pdBnftName\" disabled></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.pdClmbnft')\">\r\n            <el-input v-model=\"configsForm.pdClmBnftCode+':'+configsForm.pdClmBnftName\" disabled></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n        </el-col>\r\n      </el-row>\r\n      <!-- <div v-show=\"configsForm.pdClmMoyAmtCalMthd === '3'\">\r\n        <cus-form-title label=\"赔付明细规则公式定义\"/>\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"赔付金计算公式\">\r\n              <el-input v-model=\"configsForm.pdClmBnftCalcCode\" readonly>\r\n                <svg-icon slot=\"suffix\" icon-class=\"calc\" style=\"color: #606266;font-size: 18px;cursor: pointer\"\r\n                          @click=\"goClicks(bnftForm.pdBnftDetailType,'20')\"/>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n          </el-col>\r\n        </el-row>\r\n      </div> -->\r\n      <el-row v-show=\"false\" :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.medBillType')\" prop=\"medBillType\">\r\n            <cus-select v-model=\"medForm.medBillType\" :codetype=\"'medBillType'\"\r\n                        @change=\"medBillTypeChange\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <cus-table-title :label=\"$t('pdtempPdMedFeeBill.clmMedFee')\"/>\r\n      <el-table ref=\"feeTable\" :data=\"feeConfigs\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                size=\"mini\" @selection-change=\"checkFeeTable\">\r\n        <!-- <el-table ref=\"feeTable\" :data=\"feeConfigs\" align=\"center\" border class=\"wraper-table\"\r\n                  element-loading-text=\"Loading\" fit highlight-current-row max-height=\"300px\" size=\"mini\"\r\n                  @row-click=\"chooseone1\"> -->\r\n        <!-- <el-table-column :label=\"$t('pdtempPdBnft.choose')\" width=\"55\">\r\n          <template slot-scope=\"scope\">\r\n            <el-radio v-model=\"radio1\" :label=\"scope.row.id\">\r\n              <span class=\"el-radio__label\"></span>\r\n            </el-radio>\r\n          </template>\r\n        </el-table-column> -->\r\n        <el-table-column align=\"center\" type=\"selection\" width=\"55px\"></el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdMedFeeBill.bnft')\" align=\"center\">\r\n          <template v-slot=\"scope\">{{ bnftForm.pdBnftCode }}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('pdtempPdMedFeeBill.clmBnft')\" align=\"center\">\r\n          <template v-slot=\"scope\">{{ configsForm.pdClmBnftCode }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.feeType')\" prop=\"pdMedFeeBillType\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdMedFeeBillType | filter_pdMedFeeBillType }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdMedBillCode')\" prop=\"pdMedFeeCode\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.feeName')\" prop=\"pdMedFeeName\"></el-table-column>\r\n        <!-- <el-table-column align=\"center\" label=\"费用计算方式\" prop=\"pdMedFeeCalMode\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdMedFeeCalMode | filter_pdMedFeeCalMode }}</template>\r\n        </el-table-column> -->\r\n        <!-- <el-table-column align=\"center\" label=\"观察期标记\" prop=\"obperiodFlag\">\r\n          <template v-slot=\"scope\">{{ scope.row.obperiodFlag | filter_dataFlag }}</template>\r\n        </el-table-column> -->\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdBeduFlag')\" prop=\"deductibleFlag\">\r\n          <template v-slot=\"scope\">{{ scope.row.deductibleFlag | filter_dataFlag }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.limitFlag')\" prop=\"limitFlag\">\r\n          <template v-slot=\"scope\">{{ scope.row.limitFlag | filter_dataFlag }}</template>\r\n        </el-table-column>\r\n        <!-- <el-table-column align=\"center\" label=\"操作\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <cus-del-btn icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" @ok=\"deleteMedForm(scope.row)\"></cus-del-btn>\r\n          </template>\r\n        </el-table-column> -->\r\n      </el-table>\r\n      <br/>\r\n      <cus-form-title :label=\"$t('pdtempPdMedFeeBill.clmMedFeeCus')\"/>\r\n      <cus-row>\r\n        <cus-col :span=\"16\">\r\n          <el-form-item :label=\"$t('i18nView.pdAccFeeCalcMode')\" prop=\"pdMedFeeCalMode\">\r\n            <cus-radio v-model=\"medForm.pdMedFeeCalMode\" :codetype=\"'pdMedFeeCalMode'\"></cus-radio>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <el-col :span=\"8\">\r\n        </el-col>\r\n      </cus-row>\r\n      <!-- <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item label=\"费用类型\" prop=\"pdMedFeeBillType\">\r\n            <el-select v-model=\"medForm.pdMedFeeBillType\" :disabled=\"!!radio1\"\r\n                       :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable filterable multiple>\r\n              <el-option v-for=\"item in Options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item label=\"费用名称\" prop=\"pdMedFeeName\">\r\n            <el-input v-model=\"medForm.pdMedFeeName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n\r\n        </el-col>\r\n      </el-row> -->\r\n      <cus-row :gutter=\"10\">\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.feesAmount')\" prop=\"pdMedFeeDefVal\">\r\n            <el-input v-model=\"medForm.pdMedFeeDefVal\"></el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.paySelfCus')\" prop=\"pdMedPayScale\">\r\n            <el-input v-model=\"medForm.pdMedPayScale\">\r\n              <template slot=\"suffix\">%</template>\r\n            </el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.hospitalType')\" prop=\"pdMedHospType\">\r\n            <cus-select v-model=\"medForm.pdMedHospType\" :codetype=\"'pdMedHospType'\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      <el-form-item style=\"text-align: right\">\r\n        <el-button v-if=\"FeeData.length\" v-auth=\"'pdtemppdclmbnft:update'\" icon=\"el-icon-success\"\r\n                   size=\"small\" style=\"margin-right: 5px\" type=\"primary\" @click=\"saveMedForm\" dialog-disable=\"disable\">\r\n          {{ \"保存\" }}\r\n        </el-button>\r\n        <!-- <cus-popover v-if=\"FeeData.length\" v-auth=\"'pdtemppdclmbnft:delete'\"\r\n                     :buttonText=\"$t('table.delete')\" :content=\"$t('confirmMessage.delete')\" icon=\"el-icon-success\"\r\n                     style=\"margin-right: 5px\"\r\n                     type=\"danger\" @confirm=\"deleteMedForm\"></cus-popover> -->\r\n        <!-- <el-button v-if=\"radio1\" icon=\"el-icon-success\" size=\"small\" type=\"primary\" @click=\"updateMedForm\">\r\n         {{$t('table.update')}}\r\n        </el-button> -->\r\n        <el-button icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"cleanMedForm\" dialog-disable=\"disable\">\r\n          {{$t('table.refresh')}}\r\n        </el-button>\r\n      </el-form-item>\r\n      <div v-show=\"medForm.pdMedFeeCalMode==3\">\r\n      <cus-form-title :label=\"$t('pdtempPdMedFeeBill.clmMedFeeCalc')\"/>\r\n      <cus-row>\r\n        <cus-col :span=\"8\">\r\n          <el-form-item :label=\"$t('pdtempPdMedFeeBill.medFeeCalc')\">\r\n            <el-input v-if=\"FeeData.length === 1\" v-model=\"FeeData[0].pdCalcCode\" readonly>\r\n              <svg-icon slot=\"suffix\" icon-class=\"calc\" style=\"color: #606266;font-size: 18px;cursor: pointer;\"\r\n                        @click=\"toFeeFormula\"/>\r\n            </el-input>\r\n            <el-input v-if=\"FeeData.length !== 1\" v-model=\"none\" readonly>\r\n              <svg-icon slot=\"suffix\" icon-class=\"calc\" style=\"color: #606266;font-size: 18px;cursor: pointer;\"\r\n                        @click=\"toFeeFormula\"/>\r\n            </el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n      </div>\r\n      <!-- <el-table ref=\"cusTable\" :data=\"calcConfigs\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                max-height=\"300px\" size=\"mini\" @row-click=\"chooseone2\">\r\n        <el-table-column :label=\"$t('table.select')\" width=\"55\">\r\n          <template slot-scope=\"scope\">\r\n            <el-radio-group v-model=\"radio2\" @change=\"selectedFormulaChanged\">\r\n              <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n            </el-radio-group>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"费用类型\" prop=\"pdMedFeeBillType\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdMedFeeBillType | filter_pdMedFeeBillType }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"费用名称\" prop=\"pdMedFeeName\"></el-table-column>\r\n        <el-table-column align=\"center\" label=\"费用计算公式\" prop=\"pdCalcCode\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdCalcCode }}\r\n            <svg-icon icon-class=\"calc\" style=\"color: #606266font-size: 18pxcursor: pointerfloat: right\"\r\n                      @click=\"toFeeFormula(scope.row)\"/>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table> -->\r\n\r\n      <br/>\r\n      <cus-form-title :label=\"$t('pdtempPdMedFeeBill.clmMedFeeCtrl')\" />\r\n        <el-button icon=\"el-icon-edit\" size=\"small\" type=\"primary\" @click=\"openChooseDialog('medPeriod')\">\r\n          {{$t('i18nView.operiodDef')}}\r\n        </el-button>\r\n        <el-button icon=\"el-icon-edit\" size=\"small\" type=\"primary\" @click=\"openChooseDialog('medDeductible')\">\r\n          {{$t('i18nView.deductibleExcessDefinition')}}\r\n        </el-button>\r\n        <el-button icon=\"el-icon-edit\" size=\"small\" type=\"primary\" @click=\"openChooseDialog('medLimit')\">\r\n          {{ \"赔付限额定义\" }}\r\n        </el-button>\r\n    </el-form>\r\n\r\n    <!-- 弹窗（保障公式） -->\r\n    <!-- <el-dialog v-if=\"dialogShow.underwritingAmountFormula\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :close-on-press-escape=\"false\"\r\n               :show-close=\"false\" :visible.sync=\"dialogShow.underwritingAmountFormula\" append-to-body center\r\n               width=\"80%\" @close=\"changeDialogVisible_formula2(false)\">\r\n      <bnftAmountFormula :calculationFormulaType=\"calculationFormulaType\" :guaranteeDetails=\"guaranteeDetails\"\r\n                         :pdBnftOptions=\"pdSrvlOptions\" :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                         @bringInCalcCode=\"bringInCalcCode\" @changeDialogVisible_formula2=\"changeDialogVisible_formula2\"\r\n                         @changeDialogVisible_formulaSelect2=\"changeDialogVisible_formulaSelect2\"></bnftAmountFormula> -->\r\n    <!-- 弹窗（公式选择） -->\r\n    <!-- <el-dialog v-if=\"dialogShow.bnftAmountFormulaSelect\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :close-on-press-escape=\"false\"\r\n               :show-close=\"false\" :visible.sync=\"dialogShow.bnftAmountFormulaSelect\" append-to-body center\r\n               width=\"70%\" @close=\"changeDialogVisible_formulaSelect2(false)\">\r\n      <bnftAmountFormulaSelect :calculationFormulaType=\"calculationFormulaType\" :guaranteeDetails=\"guaranteeDetails\"\r\n                               :pdBnftOptions=\"pdSrvlOptions\" :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                               @bringInCalcCode=\"bringInCalcCode\"\r\n                               @changeDialogVisible_formulaSelect2=\"changeDialogVisible_formulaSelect2\"></bnftAmountFormulaSelect>\r\n    </el-dialog>\r\n  </el-dialog> -->\r\n\r\n    <!-- 弹窗（账单费用公式） -->\r\n    <el-dialog v-if=\"dialogShow.medFeeFormula\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :close-on-press-escape=\"false\" :visible.sync=\"dialogShow.medFeeFormula\"\r\n               append-to-body center width=\"80%\" @close=\"changeDialogVisible_feeFormula(false)\">\r\n      <medFeeFormula :pdtempPdMedFeeBills=\"selectedFeeBills\"\r\n                     @changeDialogVisible_feeFormula=\"changeDialogVisible_feeFormula\"\r\n                     @changeDialogVisible_feeFormulaSelect=\"changeDialogVisible_feeFormulaSelect\"></medFeeFormula>\r\n      <!-- 弹窗（公式选择） -->\r\n      <el-dialog v-if=\"dialogShow.medFeeFormulaSelect\" v-dialog-drag :close-on-click-modal=\"false\"\r\n                 :close-on-press-escape=\"false\" :visible.sync=\"dialogShow.medFeeFormulaSelect\"\r\n                 append-to-body center width=\"70%\" @close=\"changeDialogVisible_feeFormulaSelect(false)\">\r\n        <medFeeFormulaSelect :pdtempPdMedFeeBills=\"selectedFeeBills\"\r\n                             @changeDialogVisible_feeFormulaSelect=\"changeDialogVisible_feeFormulaSelect\"></medFeeFormulaSelect>\r\n      </el-dialog>\r\n    </el-dialog>\r\n\r\n    <!-- 公式查看和决策树编辑弹窗 -->\r\n    <cus-rule-modify :flag=\"formulaView.flag\" :performType=\"formulaView.performType\" :ruleCode=\"formulaView.ruleCode\"\r\n                     :ruleModifyClosed=\"formulaViewClosed\" :ruleType=\"'2'\"\r\n                     :visible=\"formulaView.visible\"></cus-rule-modify>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  deletePdtempPdMedFeeBill,\r\n  getAllPdgenlMedFeeBill,\r\n  getCalcInfoByCode,\r\n  selectPdMedFeeBillOptions,\r\n  selectpdtempPdMedFeeBills,\r\n  updatePdtempPdMedFeeBill,\r\n} from \"@/api/basicinfo/pdtemppdclmbnft\"\r\n// import bnftAmountFormula from \"@/views/basicinfo/bnft-formula/bnftAmountFormula\"\r\n// import bnftAmountFormulaSelect from \"@/views/basicinfo/bnft-formula/bnftAmountFormulaSelect\"\r\nimport medFeeFormula from \"@/views/basicinfo/med-formula/medFeeFormula\"\r\nimport medFeeFormulaSelect from \"@/views/basicinfo/med-formula/medFeeFormulaSelect\"\r\n\r\nlet _this\r\nexport default {\r\n  name: \"pdtemppdmedfeebill\",\r\n  filters: {\r\n    filter_pdMedFeeCalMode(code) {\r\n      return _this.getCodeName(\"pdMedFeeCalMode\", code)\r\n    },\r\n    filter_pdMedFeeBillType(code) {\r\n      for (const pdgenlMedFeeBill of _this.pdgenlMedFeeBillList) {\r\n        if (pdgenlMedFeeBill.medFeeBillCode === code) {\r\n          return pdgenlMedFeeBill.medFeeBillCode + ':' + pdgenlMedFeeBill.medFeeBillName\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    filter_dataFlag(code) {\r\n      if (code === \"Y\") {\r\n        return code\r\n      } else {\r\n        return \"N\"\r\n      }\r\n    },\r\n  },\r\n  components: {medFeeFormula, medFeeFormulaSelect},\r\n  props: {\r\n    bnftForm: {\r\n      type: Object,\r\n      default: undefined,\r\n    },\r\n    configsForm: {\r\n      type: Object,\r\n      default: undefined,\r\n    },\r\n    showMedFeeBill: {\r\n      type: Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      formulaView: {\r\n        flag: '',\r\n        performType: '',\r\n        ruleCode: '',\r\n        visible: false\r\n      },\r\n      selectedFeeBills: [],\r\n      rulesmedBillType: {\r\n        medBillType: [\r\n          {required: true, message: \"字段不能为空\", trigger: \"blur\"}\r\n        ],\r\n      },\r\n      dialogShow: {\r\n        underwritingAmountFormula: false,\r\n        bnftAmountFormulaSelect: false,\r\n        medFeeFormula: false,\r\n        medFeeFormulaSelect: false\r\n      },\r\n      pdgenlMedFeeBillList: [],\r\n      calculationFormulaType: \"\",\r\n      pdSrvlOptions: {},\r\n      pdUwSiTypeOptions: {},\r\n      guaranteeDetails: [],\r\n      radio1: null,\r\n      radio2: {},\r\n      pdtempPdInfo: {},\r\n      medData: {},\r\n      medForm: {\r\n        medBillType: null,\r\n        pdMedFeeCode: null,\r\n        pdMedFeeName: null,\r\n        pdMedFeeCalMode: null,\r\n        pdMedFeeDefVal: null,\r\n        pdMedHospType: null,\r\n        pdMedPayScale: null,\r\n      },\r\n      feeConfigs: [],\r\n      cusConfigs: [],\r\n      Options: [],\r\n      pdMedOptions: [],\r\n      calcConfigs: [],\r\n      FeeData: [],\r\n      none: ''\r\n      // calcConfigs1: []\r\n    }\r\n  },\r\n  watch: {\r\n    showMedFeeBill: function () {\r\n      if (this.showMedFeeBill == true) {\r\n        if (this.configsForm.pdClmBnftCode != null) {\r\n          this.selectpdtempPdMedFeeBills(this.configsForm.pdClmBnftCode)\r\n        }\r\n      }\r\n    },\r\n    feeConfigs() {\r\n      this.calcConfigs = []\r\n      for (let i = 0; i < this.feeConfigs.length; i++) {\r\n        if (this.feeConfigs[i].pdMedFeeCalMode === '3') {\r\n          const calcInfo = Object.assign({}, this.feeConfigs[i])\r\n          this.calcConfigs.push(calcInfo)\r\n        }\r\n      }\r\n      this.pdMedOptions = []\r\n      this.feeConfigs.forEach((data) => {\r\n        this.pdMedOptions.push({\r\n          value: data.pdMedFeeCode,\r\n          label: data.pdMedFeeCode + \":\" + data.pdMedFeeName,\r\n        })\r\n      })\r\n    },\r\n\r\n  },\r\n  created() {\r\n    this.pdtempPdInfo = this.getPdData()\r\n    if (this.configsForm.pdClmBnftCode != null) {\r\n      this.selectpdtempPdMedFeeBills(this.configsForm.pdClmBnftCode)\r\n    }\r\n    this.getAllPdgenlMedFeeBill()\r\n  },\r\n  methods: {\r\n    formulaViewClosed() {\r\n      this.formulaView.visible = false\r\n      this.radio2 = {}\r\n    },\r\n    getAllPdgenlMedFeeBill() {\r\n      getAllPdgenlMedFeeBill().then(response => {\r\n        this.pdgenlMedFeeBillList = response.data\r\n      })\r\n    },\r\n    bringInCalcCode(pdBussDetailType, pdBussCode, ruleCode) {\r\n      this.configsForm.pdClmBnftCalcCode = ruleCode\r\n      this.$emit(\"bringInCalcCode\", pdBussCode, ruleCode)\r\n    },\r\n    changeDialogVisible_formula2(flag) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = this.bnftForm\r\n      }\r\n      this.dialogShow.underwritingAmountFormula = flag\r\n    },\r\n    changeDialogVisible_formulaSelect2(\r\n      flag,\r\n      guaranteeDetails,\r\n      calculationFormulaType,\r\n      bnft,\r\n      bnftDt\r\n    ) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = this.bnftForm\r\n        if (\r\n          calculationFormulaType === \"27\" ||\r\n          calculationFormulaType === \"28\"\r\n        ) {\r\n          this.pdSrvlOptions = this.configsForm\r\n        }\r\n        this.pdUwSiTypeDtOptions = bnftDt\r\n        this.guaranteeDetails = guaranteeDetails\r\n        this.calculationFormulaType = calculationFormulaType\r\n      } else {\r\n        this.dialogShow.underwritingAmountFormula = false\r\n        this.$nextTick(() => {\r\n          this.dialogShow.underwritingAmountFormula = true\r\n        })\r\n      }\r\n      this.dialogShow.bnftAmountFormulaSelect = flag\r\n    },\r\n    changeDialogVisible_feeFormula(flag) {\r\n      this.dialogShow.medFeeFormula = flag\r\n      if (flag === false) {\r\n        if (this.configsForm.pdClmBnftCode != null) {\r\n          this.selectpdtempPdMedFeeBills(this.configsForm.pdClmBnftCode)\r\n        }\r\n      }\r\n    },\r\n    changeDialogVisible_feeFormulaSelect(flag) {\r\n      this.dialogShow.medFeeFormulaSelect = flag\r\n      if (flag === false) {\r\n        this.dialogShow.medFeeFormula = false\r\n        this.$nextTick(() => {\r\n          this.dialogShow.medFeeFormula = true\r\n        })\r\n      }\r\n    },\r\n    //公式弹窗\r\n    goClicks(num1, num2) {\r\n      let arr = []\r\n      arr.push(this.bnftForm.pdBnftType)\r\n      arr.push(num1)\r\n      this.guaranteeDetails = arr //业务大类\r\n      this.calculationFormulaType = num2 //业务细类\r\n      this.dialogShow.underwritingAmountFormula = true\r\n      this.pdUwSiTypeOptions = this.bnftForm\r\n      this.pdSrvlOptions = this.configsForm\r\n    },\r\n    selectpdtempPdMedFeeBills(code) {\r\n      selectpdtempPdMedFeeBills(code).then((res) => {\r\n        this.feeConfigs = res.data\r\n        /*this.$nextTick(() => {\r\n          if (this.medForm.pdMedFeeCalMode == 3) {\r\n            this.calcConfigs1.pdMedFeeBillType = this.medForm.pdMedFeeBillType\r\n            this.calcConfigs1.pdMedFeeName = this.medForm.pdMedFeeName\r\n            this.calcConfigs1.calcCode = this.medForm.pdCalcCode\r\n            this.calcConfigs.push(this.calcConfigs1)\r\n          }\r\n        })*/\r\n      })\r\n    },\r\n    medBillTypeChange(code) {\r\n      if (code) {\r\n        selectPdMedFeeBillOptions(code).then((res) => {\r\n          let data = res.data\r\n          this.Options = []\r\n          data.forEach((medFeeBill) => {\r\n            this.Options.push({\r\n              value: medFeeBill.medFeeBillCode,\r\n              label: medFeeBill.medFeeBillCode + \":\" + medFeeBill.medFeeBillName\r\n            })\r\n          })\r\n        })\r\n      } else {\r\n        this.Options = []\r\n      }\r\n    },\r\n    saveMedForm() {\r\n      // if(this.medForm.medBillType == null || this.medForm.medBillType == undefined){\r\n      //   this.$message.error({message: '请选择账单类型！', type: 'warning'})\r\n\r\n      //   return\r\n      // }\r\n      if (!this.FeeData.length) {\r\n        this.$message.error({message: '请选择至少一条账单类型！', type: 'warning'})\r\n      } else {\r\n        //   let pdtempPdMedBill = {\r\n        //   pdVerId: this.pdtempPdInfo.pdVerId,\r\n        //   operator: this.pdtempPdInfo.operator,\r\n        //   pdClmBnftId: this.configsForm.id,\r\n        //   pdClmBnftCode: this.configsForm.pdClmBnftCode,\r\n        //   pdMedBillType: this.medForm.medBillType,\r\n        // }\r\n        let pdtempPdMedFeeBills = []\r\n        this.FeeData.forEach((data) => {\r\n          let pdtempPdMedFeeBill = {\r\n            id: data.id,\r\n            pdVerId: data.pdVerId,\r\n            operator: data.operator,\r\n            pdMedBillId: data.pdMedBillId,\r\n            pdMedBillType: data.pdMedBillType,\r\n            pdMedFeeBillType: data.pdMedFeeBillType,\r\n            pdMedFeeName: data.pdMedFeeName,\r\n            pdMedFeeCode: data.pdMedFeeCode,\r\n            pdMedFeeCalMode: this.medForm.pdMedFeeCalMode,\r\n            pdMedFeeDefVal: this.medForm.pdMedFeeDefVal,\r\n            pdMedHospType: this.medForm.pdMedHospType,\r\n            pdMedPayScale: this.medForm.pdMedPayScale,\r\n          }\r\n          pdtempPdMedFeeBills.push(pdtempPdMedFeeBill)\r\n        })\r\n        // let data = {\r\n        //   pdtempPdMedBill: pdtempPdMedBill,\r\n        //   pdtempPdMedFeeBills: pdtempPdMedFeeBills,\r\n        // }\r\n        updatePdtempPdMedFeeBill(this.buildRequestData({pdtempPdMedFeeBills: pdtempPdMedFeeBills})).then((res) => {\r\n          this.notifySuccess(res.message)\r\n          this.selectpdtempPdMedFeeBills(this.configsForm.pdClmBnftCode)\r\n        })\r\n      }\r\n    },\r\n    updateMedForm() {\r\n      let pdtempPdMedFeeBill = {\r\n        id: this.medForm.id,\r\n        pdVerId: this.pdtempPdInfo.pdVerId,\r\n        operator: this.pdtempPdInfo.operator,\r\n        pdMedFeeBillType: this.medForm.pdMedFeeBillType[0],\r\n        pdMedFeeName: this.medForm.pdMedFeeName,\r\n        pdMedFeeCalMode: this.medForm.pdMedFeeCalMode,\r\n        pdMedFeeDefVal: this.medForm.pdMedFeeDefVal,\r\n        pdMedHospType: this.medForm.pdMedHospType,\r\n        pdMedPayScale: this.medForm.pdMedPayScale,\r\n        pdMedBillId: this.medForm.pdMedBillId,\r\n        pdMedBillType: this.medForm.pdMedBillType,\r\n        pdMedFeeCode: this.medForm.pdMedFeeCode,\r\n      }\r\n      let data = {\r\n        pdtempPdMedFeeBill: pdtempPdMedFeeBill,\r\n      }\r\n      updatePdtempPdMedFeeBill(this.buildRequestData(data)).then((res) => {\r\n        this.notifySuccess(res.message)\r\n        this.selectpdtempPdMedFeeBills(this.configsForm.pdClmBnftCode)\r\n      })\r\n    },\r\n    cleanMedForm() {\r\n      this.$refs[\"medForm\"].resetFields()\r\n      this.Options = []\r\n      this.radio1 = null\r\n      this.radio2 = {}\r\n    },\r\n    deleteMedForm() {\r\n      let pdtempPdMedFeeBills = []\r\n      this.FeeData.forEach((data) => {\r\n        let pdtempPdMedFeeBill = {\r\n          id: data.id,\r\n          operator: data.operator,\r\n          pdMedFeeCode: data.pdMedFeeCode,\r\n        }\r\n        pdtempPdMedFeeBills.push(pdtempPdMedFeeBill)\r\n      })\r\n\r\n      let data = {\r\n        pdtempPdMedFeeBills: pdtempPdMedFeeBills,\r\n      }\r\n      deletePdtempPdMedFeeBill(this.buildRequestData(data)).then((res) => {\r\n        if (res.code == 200) {\r\n          this.notifySuccess(res.message)\r\n          this.selectpdtempPdMedFeeBills(this.configsForm.pdClmBnftCode)\r\n        }\r\n      })\r\n    },\r\n    chooseone1(row, column, event) {\r\n      if (event.target.nodeName == \"INPUT\") {\r\n        if (row.id == this.radio1) {\r\n          this.radio1 = null\r\n          this.$refs.feeTable.setCurrentRow()\r\n          this.medForm = {}\r\n          this.medForm.pdMedFeeBillType = []\r\n        } else {\r\n          this.radio1 = row.id\r\n          this.medData = row\r\n          this.medForm = JSON.parse(JSON.stringify(row))\r\n          this.medForm.pdMedFeeBillType = []\r\n          this.medForm.pdMedFeeBillType.push(row.pdMedFeeBillType)\r\n\r\n\r\n        }\r\n      }\r\n    },\r\n    chooseone2(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.radio2.id) {\r\n          this.radio2 = {}\r\n        }\r\n      }\r\n    },\r\n    selectedFormulaChanged() {\r\n      getCalcInfoByCode(this.radio2.pdCalcCode).then(response => {\r\n        const ruleTemplateAttribute = response.data\r\n        this.formulaView.flag = ruleTemplateAttribute.ruleAttr === '1' ? '1' : '2'\r\n        this.formulaView.performType = ruleTemplateAttribute.performType\r\n        this.formulaView.ruleCode = ruleTemplateAttribute.code\r\n        this.formulaView.visible = true\r\n      })\r\n    },\r\n    backToMenu() {\r\n      this.$emit(\"showFeeBillFlag\", false)\r\n    },\r\n    openChooseDialog(flag) {\r\n      if (this.FeeData.length!==1) {\r\n        this.notifyError(\"请选择一条账单费用\")\r\n        return\r\n      }else{\r\n        this.$emit(\"showFeeBillTypeFlag\", flag)\r\n        this.$emit(\"sendFeeBillData\", this.FeeData[0])\r\n      }\r\n\r\n    },\r\n    toFeeFormula() {\r\n      if (this.FeeData.length === 0) {\r\n        this.notifyError('请选择赔付费用')\r\n        return\r\n      }\r\n      this.selectedFeeBills = this.FeeData\r\n      this.dialogShow.medFeeFormula = true\r\n    },\r\n    checkFeeTable(val) {\r\n      this.FeeData = val\r\n      if(val.length==1){\r\n         Object.assign(this.medForm,val[0])\r\n      }else{\r\n        this.cleanMedForm();\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.divider {\r\n  color: black;\r\n  background-color: black;\r\n  width: 1px\r\n}\r\n</style>\r\n"]}]}