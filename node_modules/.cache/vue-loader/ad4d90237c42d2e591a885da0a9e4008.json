{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\ruleManagement\\ruleModule\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\ruleManagement\\ruleModule\\index.vue","mtime":1609847106780},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcnVsZUJhc2VEZWZpbml0aW9uIGZyb20gIkAvdmlld3MvaWJybXMvcnVsZU1hbmFnZW1lbnQvcnVsZUJhc2VEZWZpbml0aW9uIjsNCmltcG9ydCBydWxlQ2FsY3VsYXRvck1ha2UgZnJvbSAiQC92aWV3cy9pYnJtcy9ydWxlTWFuYWdlbWVudC9ydWxlQ2FsY3VsYXRvck1ha2UiOw0KaW1wb3J0IHJ1bGVNYWtlIGZyb20gIkAvdmlld3MvaWJybXMvcnVsZU1hbmFnZW1lbnQvcnVsZU1ha2UiOw0KaW1wb3J0IHJ1bGVTcWxEZWZpbml0aW9uIGZyb20gIkAvdmlld3MvaWJybXMvcnVsZU1hbmFnZW1lbnQvcnVsZVNxbERlZmluaXRpb24iOw0KaW1wb3J0IHJ1bGVUZXN0UGFyYW0gZnJvbSAiQC92aWV3cy9pYnJtcy9ydWxlTWFuYWdlbWVudC9ydWxlVGVzdFBhcmFtIjsNCmltcG9ydCBydWxlUmVsZWFzZSBmcm9tICJAL3ZpZXdzL2licm1zL3J1bGVNYW5hZ2VtZW50L3J1bGVSZWxlYXNlIjsNCmltcG9ydCB7IHVwZGF0ZVJ1bGVTdGF0ZSxmaW5kUnVsZU1haW5CeUNvZGV9IGZyb20gIkAvYXBpL2licm1zL3J1bGVNYWluIjsNCmltcG9ydCB7IGNsb3NlVmlzaXRUYWcgfSBmcm9tICJAL3V0aWxzL3RhZ3NWaWV3IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicnVsZU1vZHVsZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzRml4ZWQ6IGZhbHNlLA0KICAgICAgb2Zmc2V0VG9wOiAyMCwNCiAgICAgIHF1aWNraWNvbjogImVsLWljb24tYXJyb3ctZG93biIsDQogICAgICBxdWlja3Nob3c6IGZhbHNlLA0KICAgICAgcnVsZUF0dHJpYnV0ZTogew0KICAgICAgICAgICBwZXJmb3JtVHlwZToiMSIsDQogICAgICB9LA0KICAgICAgcnVsZVR5cGU6ICIxIiwNCiAgICAgIHJ1bGVDb2RlOiAiIiwNCiAgICAgIHJ1bGVGbGFnOiAiMCIsDQogICAgICBydWxlQ29weVN0YXRlOiBmYWxzZSwNCiAgICAgIGF0dHJBY3RpdmU6IDAsDQogICAgICBydWxlQWN0aXZlOiAtMSwNCiAgICAgIGFjdGl2ZU5hbWU6ICJydWxlRGVmaW5pdGlvbiIsDQogICAgICBwYWdlTmFtZTogInJ1bGVBdHRyaWJ1dGVEZWZpbml0aW9uIiwNCiAgICAgIHNob3dQYWdlRmxhZzogZmFsc2UsDQogICAgICBydWxlUXVlcnk6IGZhbHNlLA0KICAgICAgcGFnZVN0YXRlOiB0cnVlLA0KICAgICAgYXR0clN0YXRlOiB0cnVlLA0KICAgICAgbWd0QWN0aXZlOiAtMSwNCiAgICAgIHJ1bGVNb2R1bGU6IHRydWUsDQogICAgICBub2RlOiAiIiwNCiAgICAgIGVuZE5vZGU6IHRydWUsDQogICAgICBlbmROYW1lOiAiIiwNCiAgICAgIGN1cnJlbnRQYWdlOiAiZGV0YWlsIiwNCiAgICAgIHRlc3RUYWI6ICJydWxlSW5mbyIsDQogICAgICBtZW51UGFnZTogdHJ1ZSwNCiAgICAgIG5leHRTdGF0ZTogIjEiLA0KICAgICAgcnVsZUF0dHJpYnV0ZVN0YXRlOiBmYWxzZSwNCiAgICAgIHJ1bGVNYWtpbmdTdGF0ZTogZmFsc2UsDQogICAgICBydWxlSW5mb1N0YXRlOiBmYWxzZSwNCiAgICAgIHByZXBhcmVEYXRhU3RhdGU6IGZhbHNlLA0KICAgICAgdGVzdFJlc3VsdFN0YXRlOiBmYWxzZSwNCiAgICAgIHB1Ymxpc2hlZFN0YXRlOiBmYWxzZSwNCiAgICAgIHN0ZXBCYWNrU3RhdGU6dHJ1ZSwNCiAgICAgIHN0ZXBOZXh0U3RhdGU6dHJ1ZSwNCiAgICAgIGNycnVldFN0YXRlOjAsDQogICAgICB1cGRhdGU6ZmFsc2UsDQogICAgICBjb3B5Q29kZTogIiIsDQogICAgICBjdXJySW5kZXg6MCwNCiAgICAgIHJ1bGVNaWFuOnt9LA0KICAgICAgc3RlcHNBdHRyOiBbew0KICAgICAgICBtb2R1bGU6InJ1bGVEZWZpbml0aW9uIiwNCiAgICAgICAgcnVsZURlZmluaXRpb246IHsNCiAgICAgICAgICBub2RlOiBbew0KICAgICAgICAgICAgICBuYW1lOiJydWxlQXR0cmlidXRlRGVmaW5pdGlvbiIsDQogICAgICAgICAgICAgIHZhbDowDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBuYW1lOiJydWxlTWFraW5nIiwNCiAgICAgICAgICAgICAgICB2YWw6MQ0KICAgICAgICAgICAgICB9XSwNCiAgICAgICAgICBub2RlVHlwZTogZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICB9LHsNCiAgICAgICAgICAgICAgbW9kdWxlOiJydWxlVGVzdCIsDQogICAgICAgICAgICAgIHJ1bGVUZXN0OiB7DQogICAgICAgICAgICAgIG5vZGU6IFt7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6InJ1bGVJbmZvIiwNCiAgICAgICAgICAgICAgICAgICAgdmFsOjANCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6InByZXBhcmVEYXRhIiwNCiAgICAgICAgICAgICAgICAgICAgdmFsOjENCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICx7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6InRlc3RSZXN1bHQiLA0KICAgICAgICAgICAgICAgICAgICB2YWw6Mg0KICAgICAgICAgICAgICAgICAgfV0sDQogICAgICAgICAgICAgIG5vZGVUeXBlOiBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgfSx7DQogICAgICAgICAgbW9kdWxlOiJydWxlUHVibGlzaGVkIiwNCiAgICAgICAgICBydWxlUHVibGlzaGVkOiB7DQogICAgICAgICAgICBub2RlOiBbew0KICAgICAgICAgICAgICAgICAgbmFtZToicHVibGlzaGVkIiwNCiAgICAgICAgICAgICAgICAgIHZhbDowDQogICAgICAgICAgICAgICAgfV0sDQogICAgICAgICAgICBub2RlVHlwZTogZmFsc2UNCiAgICAgICAgICB9DQogICAgICB9XSwNCiAgICAgIHRlc3Q6IHsNCiAgICAgICAgICAgICAgbW9kdWxlOiJydWxlVGVzdCIsDQogICAgICAgICAgICAgIHJ1bGVUZXN0OiB7DQogICAgICAgICAgICAgIG5vZGU6IFt7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6InJ1bGVJbmZvIiwNCiAgICAgICAgICAgICAgICAgICAgdmFsOjANCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6InByZXBhcmVEYXRhIiwNCiAgICAgICAgICAgICAgICAgICAgdmFsOjENCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICx7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6InRlc3RSZXN1bHQiLA0KICAgICAgICAgICAgICAgICAgICB2YWw6Mg0KICAgICAgICAgICAgICAgICAgfV0sDQogICAgICAgICAgICAgIG5vZGVUeXBlOiBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIHJ1bGVCYXNlRGVmaW5pdGlvbiwNCiAgICBydWxlQ2FsY3VsYXRvck1ha2UsDQogICAgcnVsZU1ha2UsDQogICAgcnVsZVRlc3RQYXJhbSwNCiAgICBydWxlUmVsZWFzZSwNCiAgICBydWxlU3FsRGVmaW5pdGlvbg0KICB9LA0KICBwcm9wczogWyAiZmxhZyIsJ2F0dHJpYnV0ZU9iaiddLA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucnVsZUZsYWcgPSB0aGlzLmdldEpzb25EYXRhKCdydWxlRmxhZycpOw0KICAgIHRoaXMubWVudVBhZ2UgPSB0aGlzLmdldEpzb25EYXRhKCdtZW51UGFnZScpOw0KICAgIHRoaXMubm9kZU5hbWUgPSB0aGlzLmdldEpzb25EYXRhKCdub2RlTmFtZScpOw0KICAgIHRoaXMucnVsZUF0dHJpYnV0ZSA9IHRoaXMuZ2V0SnNvbkRhdGEoJ2F0dHJpYnV0ZU9iaicpOw0KICAgIHRoaXMucnVsZVR5cGUgPSB0aGlzLmdldEpzb25EYXRhKCdydWxlVHlwZScpOw0KICAgIGlmKHRoaXMuZmxhZyAmJiB0eXBlb2YoIHRoaXMuZmxhZykgIT0gJ3VuZGVmaW5lZCcgKXsNCiAgICAgICAgdGhpcy5ydWxlRmxhZyA9IHRoaXMuZmxhZw0KICAgIH0NCiAgICBpZighdGhpcy5ub2RlTmFtZSB8fCB0eXBlb2YodGhpcy5ub2RlTmFtZSkgPT0gJ3VuZGVmaW5lZCcgKXsNCiAgICAgICAgdGhpcy5ub2RlTmFtZSA9IHRoaXMuYWN0aXZlTmFtZTsNCiAgICB9DQogICAgaWYodGhpcy5hdHRyaWJ1dGVPYmogJiYgdHlwZW9mKCB0aGlzLmF0dHJpYnV0ZU9iaikgIT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LmtleXModGhpcy5hdHRyaWJ1dGVPYmopLmxlbmd0aCA+IDApew0KICAgICAgICB0aGlzLnJ1bGVBdHRyaWJ1dGUgPSB0aGlzLmF0dHJpYnV0ZU9iag0KICAgIH0NCiAgICB0aGlzLnJ1bGVDb2RlID0gdGhpcy5ydWxlQXR0cmlidXRlLmNvZGU7DQoNCiAgICAvL+agueaNruiPnOWNlemhtemdoiDlsZXnpLrlr7zoiKrmnaENCiAgICBpZiAodGhpcy5tZW51UGFnZSAmJiB0aGlzLm5vZGVOYW1lICE9ICJydWxlRGVmaW5pdGlvbiIpIHsNCiAgICAgICAgdGhpcy5ydWxlQWN0aXZlID0gMDsNCiAgICAgICAgdGhpcy5tZ3RBY3RpdmUgPSAwOw0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLnJ1bGVUeXBlID0gdGhpcy5ydWxlQXR0cmlidXRlLnJ1bGVUeXBlOw0KICAgIH0NCiAgICB0aGlzLm5hdmlnYXRpb25JbmZvKHRoaXMubm9kZU5hbWUsICIiKTsNCg0KICAgIC8vd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMuaW5pdEhlaWdodCk7DQogICAvL3RoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgIC8vICAgdGhpcy5vZmZzZXRUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYm94Rml4ZWQiKS5vZmZzZXRUb3A7DQogICAvLyB9KTsNCiAgfSwNCiAgd2F0Y2g6ew0KICAgJ3J1bGVBdHRyaWJ1dGUucGVyZm9ybVR5cGUnOnsNCiAgICAgICAgIGhhbmRsZXIobmV3VmFsLCBvYmpWYWwpIHsNCiAgICAgICAgICAgICAgbGV0IHR5cGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aSA8IHRoaXMuc3RlcHNBdHRyLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0ZXBzQXR0cltpXS5tb2R1bGUgPT0icnVsZVRlc3QiKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV3VmFsID09ICcyJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IHRoaXMuJHQoInJ1bGVNb2R1bGUucnVsZUV4YW1pbmUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwc0F0dHIuc3BsaWNlKGksMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmKCF0eXBlICYmIG5ld1ZhbCA9PSAnMScpew0KICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IHRoaXMuJHQoInJvdXRlLnJ1bGVUZXN0Iik7DQogICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwc0F0dHIuc3BsaWNlKDEsMCx0aGlzLnRlc3QpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICBjb25zb2xlLmxvZygibmV3VmFsIHRoaXMuc3RlcHNBdHRyIix0aGlzLnN0ZXBzQXR0cik7DQogICAgICAgICAgfSwNCiAgICAgICAgICBkZWVwOiB0cnVlLA0KICAgICAgICAgIGltbWVkaWF0ZTp0cnVlDQogICAgICB9DQoNCiAgfSwNCiAgbW91bnRlZCgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgbmF2aWdhdGlvbkluZm8obm9kZU5hbWUsIHBhZ2VOYW1lKSB7DQogICAgICBsZXQgbmFtZTsNCiAgICAgIGxldCBjdXJyZW50TmF2Ow0KICAgICAgc3dpdGNoIChub2RlTmFtZSkgew0KICAgICAgICBjYXNlICJydWxlRGVmaW5pdGlvbiI6DQogICAgICAgICAgbmFtZSA9ICJydWxlQXR0cmlidXRlRGVmaW5pdGlvbiI7DQogICAgICAgICAgdGhpcy5hY3RpdmVOYW1lID0gInJ1bGVEZWZpbml0aW9uIjsNCiAgICAgICAgICB0aGlzLmVuZE5hbWUgPSB0aGlzLiR0KCJydWxlTW9kdWxlLnJ1bGVEZWZpbml0aW9uRnVuY3Rpb24iKTsNCiAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMuJHQoInJvdXRlLnJ1bGVUZXN0Iik7DQogICAgICAgICAgY3VycmVudE5hdiA9IHRoaXMuJHQoInJvdXRlLnJ1bGVfY3VzdG9tIik7DQogICAgICAgICAgaWYodGhpcy5ydWxlQXR0cmlidXRlICYmIHRoaXMucnVsZUF0dHJpYnV0ZS5wZXJmb3JtVHlwZSA9PSAiMiIpew0KICAgICAgICAgICAgICBub2RlID0gIHRoaXMuJHQoInJ1bGVNb2R1bGUucnVsZUV4YW1pbmUiKTsNCiAgICAgICAgICAgICAgLy/liKDpmaTmlbDnu4TkuK3nmoTmtYvor5XoioLngrkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5ub2RlID0gbm9kZTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicnVsZVRlc3QiOg0KICAgICAgICAgIG5hbWUgPSAicnVsZUluZm8iOw0KICAgICAgICAgIHRoaXMuYWN0aXZlTmFtZSA9ICJydWxlVGVzdCI7DQogICAgICAgICAgdGhpcy5lbmROYW1lID0gdGhpcy4kdCgicnVsZU1vZHVsZS5ydWxlVGVzdEZ1bmN0aW9uIik7DQogICAgICAgICAgdGhpcy5ub2RlID0gdGhpcy4kdCgicm91dGUucnVsZV9yZWxlYXNlIik7DQogICAgICAgICAgY3VycmVudE5hdiA9IHRoaXMuJHQoInJvdXRlLnJ1bGVUZXN0Iik7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgInJ1bGVQdWJsaXNoZWQiOg0KICAgICAgICAgIG5hbWUgPSAicnVsZVB1Ymxpc2hlZCI7DQogICAgICAgICAgdGhpcy5ub2RlID0gdGhpcy4kdCgicnVsZU1vZHVsZS5lbmQiKTsNCiAgICAgICAgICB0aGlzLmFjdGl2ZU5hbWUgPSAicnVsZVB1Ymxpc2hlZCI7DQogICAgICAgICAgdGhpcy5lbmROYW1lID0gdGhpcy4kdCgicnVsZU1vZHVsZS5ydWxlUHVibGlzaGVkRnVuY3Rpb24iKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIGlmIChwYWdlTmFtZSAmJiB0eXBlb2YgcGFnZU5hbWUgIT0gInVuZGVmaW5lZCIgJiYgcGFnZU5hbWUgIT0gIiIpIHsNCiAgICAgICAgICB0aGlzLnBhZ2VOYW1lID0gcGFnZU5hbWU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMucGFnZU5hbWUgPSBuYW1lOw0KICAgICAgfQ0KICAgICAgaWYodGhpcy5tZW51UGFnZSl7DQogICAgICAgICAgdGhpcy5jaGFuZ2VDdXJyZW50TmF2VGl0bGUoY3VycmVudE5hdik7DQogICAgICB9DQogICAgIHRoaXMuc3RlcFNob3coImJhY2siKTsNCiAgICAgdGhpcy5zdGVwU2hvdygibmV4dCIpOw0KICAgIH0sDQogICBhc3luYyBqdW1wKHZhbCwgdHlwZSxuZXh0QWN0aXZlKSB7DQogICAgICBsZXQganVtcCA9IGZhbHNlOw0KICAgICAgbGV0IHRpdGxlID0gdGhpcy4kdCgicnVsZU1vZHVsZS5tZXNzYWdlVGlwIik7DQogICAgICB2YXIgc3RhdGUgPSB0cnVlOw0KICAgICAgaWYobmV4dEFjdGl2ZSAmJiBuZXh0QWN0aXZlICE9ICcnICYmIHR5cGVvZihuZXh0QWN0aXZlKSAhPSB1bmRlZmluZWQpew0KICAgICAgICAgIGlmKHRoaXMuYWN0aXZlTmFtZSAhPSBuZXh0QWN0aXZlKXsNCiAgICAgICAgICAgICAgc3RhdGUgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIGxldCBydWxlTWFpbiA9IHsNCiAgICAgICAgICBjb2RlOiIiLA0KICAgICAgICAgIHN0YXRlOiIiDQogICAgICB9Ow0KICAgICAgcnVsZU1haW4uY29kZSA9IHRoaXMucnVsZUNvZGU7DQogICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlTmFtZSkgew0KICAgICAgICBjYXNlICJydWxlRGVmaW5pdGlvbiI6DQogICAgICAgICAgaWYocnVsZU1haW4ucGVyZm9ybVR5cGUgPT0gJzEnKXsNCiAgICAgICAgICAgICAgIHJ1bGVNYWluLnN0YXRlID0gIjEiOyAvL+a1i+ivlQ0KICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgIHJ1bGVNYWluLnN0YXRlID0gIjQiOyAvL+a1i+ivlQ0KICAgICAgICAgICB9DQoNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicnVsZVRlc3QiOg0KICAgICAgICAgIC8v5LiN6YCa6L+HDQogICAgICAgICAgaWYgKHRoaXMubmV4dFN0YXRlID09ICIxIikgew0KICAgICAgICAgICAgICAvL+a1i+ivlemAmui/hw0KICAgICAgICAgICAgICBpZiAodGhpcy5tZW51UGFnZSkgew0KICAgICAgICAgICAgICAgICAgcnVsZU1haW4uc3RhdGUgPSAiMyI7IC8v5a6h5om5DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBydWxlTWFpbi5zdGF0ZSA9ICI0IjsgLy/lvoXlj5HluIMNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBydWxlTWFpbi5zdGF0ZSA9ICIyIjsgLy/kv67mlLkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAicnVsZVB1Ymxpc2hlZCI6DQogICAgICAgICAgICAgIHJ1bGVNYWluLnN0YXRlID0gIjUiOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICB0aGlzLnVwZGF0ZSA9ZmFsc2U7DQogICAgICBjb25zb2xlLmxvZygidGhpcy5wYWdlTmFtZTExMSIsdGhpcy5wYWdlTmFtZSk7DQogICAgICBpZih0aGlzLnBhZ2VOYW1lICE9ICJydWxlQXR0cmlidXRlRGVmaW5pdGlvbiIpew0KICAgICAgICAgdHJ5ew0KICAgICAgICAgICAgbGV0wqBwYXJhbcKgPcKgeyJjb2RlIjp0aGlzLnJ1bGVDb2RlfQ0KICAgICAgICAgICAgYXdhaXQgZmluZFJ1bGVNYWluQnlDb2RlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbSkpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlICE9IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UocmVzcG9uc2UubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JydWV0U3RhdGUgPSByZXNwb25zZS5kYXRhLnN0YXRlOw0KICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5pyJ54q25oCB5pS55Y+YDQogICAgICAgICAgICAgICAgICAgICAgaWYocGFyc2VJbnQocnVsZU1haW4uc3RhdGUpID4gcGFyc2VJbnQodGhpcy5jcnJ1ZXRTdGF0ZSkpew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSA9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgIH0pOw0KICAgICAgICB9Y2F0Y2goZXJyKXsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2coImNycnVldFN0YXRlIix0aGlzLmNycnVldFN0YXRlKTsNCiAgICAgIGNvbnNvbGUubG9nKCJwYWdlTmFtZSIsdGhpcy5wYWdlTmFtZSk7DQogICAgICBjb25zb2xlLmxvZygiIHRoaXMudXBkYXRlIiwgdGhpcy51cGRhdGUpOw0KICAgICAgc3dpdGNoICh0aGlzLnBhZ2VOYW1lKSB7DQogICAgICAgIGNhc2UgInJ1bGVBdHRyaWJ1dGVEZWZpbml0aW9uIjoNCiAgICAgICAgICBpZigodGhpcy5ydWxlQXR0cmlidXRlLmlkICYmIHRoaXMucnVsZUF0dHJpYnV0ZS5pZCAhPScnICl8fCAodGhpcy5wYWdlTmFtZSA9PSB0eXBlICYmIHN0YXRlKSB8fCB0aGlzLnVwZGF0ZSB8fCBwYXJzZUludCh0aGlzLmNycnVldFN0YXRlKSA+IDApew0KICAgICAgICAgICAgICBqdW1wID0gdHJ1ZTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aXRsZSAgPSB0aGlzLiR0KCJydWxlTW9kdWxlLnJ1bGVNYWtpbmdUaXRsZSIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicnVsZU1ha2luZyI6DQogICAgICAgICAgaWYgKHRoaXMucnVsZU1ha2luZ1N0YXRlIHx8ICh0aGlzLnBhZ2VOYW1lID09IHR5cGUgICYmIHN0YXRlKXx8IHRoaXMudXBkYXRlIHx8IHBhcnNlSW50KHRoaXMuY3JydWV0U3RhdGUpID4gMCkgew0KICAgICAgICAgICAgICAgIGp1bXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluaXNoKG5leHRBY3RpdmUscnVsZU1haW4pOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRpdGxlID0gdGhpcy4kdCgicnVsZU1vZHVsZS5ydWxlTWFraW5nVGl0bGUiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJydWxlSW5mbyI6DQogICAgICAgICAgIHRpdGxlID0gdGhpcy4kdCgicnVsZU1vZHVsZS5ydWxlVGVzdFRpdGxlIik7DQogICAgICAgICAgaWYgKHRoaXMudGVzdFJlc3VsdFN0YXRlIHx8ICh0aGlzLmFjdGl2ZU5hbWUgPT0gInJ1bGVUZXN0IiAmJiBzdGF0ZSkgfHwgdGhpcy51cGRhdGUgfHwgIHBhcnNlSW50KHRoaXMuY3JydWV0U3RhdGUpPj0xKSB7DQogICAgICAgICAgICAgIGp1bXAgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJwcmVwYXJlRGF0YSI6DQogICAgICAgICAgdGl0bGUgPSB0aGlzLiR0KCJydWxlTW9kdWxlLnJ1bGVUZXN0VGl0bGUiKTsNCiAgICAgICAgICBpZiAodGhpcy50ZXN0UmVzdWx0U3RhdGUgfHwgKHRoaXMuYWN0aXZlTmFtZSA9PSAicnVsZVRlc3QiICYmIHN0YXRlKXx8IHRoaXMudXBkYXRlIHx8ICBwYXJzZUludCh0aGlzLmNycnVldFN0YXRlKT49MSkgew0KICAgICAgICAgICAganVtcCA9IHRydWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJ0ZXN0UmVzdWx0IjoNCiAgICAgICAgICB0aXRsZSA9IHRoaXMuJHQoInJ1bGVNb2R1bGUucnVsZVRlc3RUaXRsZSIpOw0KICAgICAgICAgIGlmICh0aGlzLnRlc3RSZXN1bHRTdGF0ZSB8fCAodGhpcy5hY3RpdmVOYW1lID09ICJydWxlVGVzdCIgJiYgc3RhdGUpfHx0aGlzLnVwZGF0ZSB8fCAgcGFyc2VJbnQodGhpcy5jcnJ1ZXRTdGF0ZSk+PTEpIHsNCiAgICAgICAgICAgICAganVtcCA9IHRydWU7DQogICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluaXNoKG5leHRBY3RpdmUscnVsZU1haW4pOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJwdWJsaXNoZWQiOg0KICAgICAgICAgIHRpdGxlID0gdGhpcy4kdCgicnVsZU1vZHVsZS5wdWJsaXNoZWRUaXRsZSIpOw0KICAgICAgICAgIGlmKHRoaXMucHVibGlzaGVkU3RhdGUgfHwgKHRoaXMuYWN0aXZlTmFtZSA9PSAicnVsZVB1Ymxpc2hlZCIgJiYgc3RhdGUpIHx8IHRoaXMudXBkYXRlIHx8IHBhcnNlSW50KHRoaXMuY3JydWV0U3RhdGUpID09NSkgew0KICAgICAgICAgICAgICBqdW1wID0gdHJ1ZTsNCiAgICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgICAgIGNvbnNvbGUubG9nKCJqdW1wIixqdW1wKTsNCiAgICAgIGlmICghanVtcCkgew0KICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aXRsZSwgdGl0bGUsIHsNCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoInJ1bGVNb2R1bGUubWVzc2FnZUJ1dHRvbjIiKSwNCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgicnVsZU1vZHVsZS5tZXNzYWdlQnV0dG9uMSIpLA0KICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyINCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAvL+a1gei9rOa1geeoiw0KICAgICAgICAgICAgICB0aGlzLnJ1bGVQYWdlKHZhbCwgdHlwZSk7DQogICAgICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5ydWxlUGFnZSh2YWwsIHR5cGUpOw0KICAgICAgfQ0KICAgIH0sDQogICBhc3luYyBmaW5pc2gobmV4dEFjdGl2ZSxydWxlTWFpbil7DQogICAgICAgIGxldCBudW07DQogICAgICAgIHRoaXMuc3RlcHNBdHRyLnNvbWUoKGl0ZW0sIGkpID0+ew0KICAgICAgICAgICAgaWYgKGl0ZW1bdGhpcy5hY3RpdmVOYW1lXSAmJiBPYmplY3Qua2V5cyhpdGVtW3RoaXMuYWN0aXZlTmFtZV0pLmxlbmd0aCE9MCl7DQogICAgICAgICAgICAgICAgbnVtID1pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KDQogICAgICAgaWYoIXRoaXMubWVudVBhZ2UgJiYgdGhpcy5zdGVwc0F0dHJbbnVtKzFdICYmICh0aGlzLnBhZ2VOYW1lID09ICJydWxlTWFraW5nIiB8fCB0aGlzLnBhZ2VOYW1lID09ICJ0ZXN0UmVzdWx0IiB8fCB0aGlzLnBhZ2VOYW1lID09ICJwdWJsaXNoZWQiKSAmJiBuZXh0QWN0aXZlID09IHRoaXMuc3RlcHNBdHRyW251bSsxXS5tb2R1bGUpew0KICAgICAgICAgICAgICAgaWYodGhpcy51cGRhdGUpew0KICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlUnVsZVN0YXRlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShydWxlTWFpbikpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZW51UGFnZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VWaXNpdFRhZygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAi6KeE5YiZ5a6a5LmJIiB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHJlc3BvbnNlLmRhdGEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICIwIjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgicnVsZU1vZHVsZS5ub2RlMSIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiMSI6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoInJ1bGVNb2R1bGUubm9kZTIiKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICB9DQogICAgfSwNCiAgICBydWxlUGFnZSh2YWwsIHR5cGUpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJydWxlUGFnZSIsdHlwZSsiXyIrdmFsKTsNCiAgICAgIHRoaXMucXVpY2tzaG93ID0gZmFsc2U7DQogICAgICB0aGlzLmVuZE5vZGUgPSB0cnVlOw0KICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgIGNhc2UgInJ1bGVBdHRyaWJ1dGVEZWZpbml0aW9uIjoNCiAgICAgICAgICB0aGlzLmF0dHJBY3RpdmUgPSB2YWw7DQogICAgICAgICAgdGhpcy5tZ3RBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLnJ1bGVBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLnJ1bGVRdWVyeSA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMucGFnZU5hbWUgPSB0eXBlOw0KICAgICAgICAgIHRoaXMuYWN0aXZlTmFtZSA9ICJydWxlRGVmaW5pdGlvbiI7DQogICAgICAgICAgdGhpcy5lbmROYW1lID0gdGhpcy4kdCgicnVsZU1vZHVsZS5ydWxlRGVmaW5pdGlvbkZ1bmN0aW9uIik7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgInJ1bGVNYWtpbmciOg0KICAgICAgICAgIC8v5omn6KGM57yT5a2YDQogICAgICAgICAgdGhpcy5hdHRyQWN0aXZlID0gdmFsOw0KICAgICAgICAgIHRoaXMubWd0QWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5ydWxlQWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5ydWxlVHlwZSA9IHRoaXMucnVsZUF0dHJpYnV0ZS5ydWxlVHlwZTsNCiAgICAgICAgICB0aGlzLnJ1bGVRdWVyeSA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMucGFnZVN0YXRlID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5wYWdlTmFtZSA9IHR5cGU7DQogICAgICAgICAgdGhpcy5hY3RpdmVOYW1lID0gInJ1bGVEZWZpbml0aW9uIjsNCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiAodGhpcy5wYWdlU3RhdGUgPSB0cnVlKSk7DQogICAgICAgICAgdGhpcy5lbmROYW1lID0gdGhpcy4kdCgicnVsZU1vZHVsZS5ydWxlRGVmaW5pdGlvbkZ1bmN0aW9uIik7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgInJ1bGVJbmZvIjoNCiAgICAgICAgICB0aGlzLmF0dHJBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLm1ndEFjdGl2ZSA9IC0xOw0KICAgICAgICAgIHRoaXMucnVsZUFjdGl2ZSA9IHZhbDsNCiAgICAgICAgICB0aGlzLnJ1bGVRdWVyeSA9IHRydWU7DQogICAgICAgICAgdGhpcy5wYWdlU3RhdGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLnRlc3RUYWIgPSAicnVsZUluZm8iOw0KICAgICAgICAgIHRoaXMucGFnZU5hbWUgPSB0eXBlOw0KICAgICAgICAgIHRoaXMuYWN0aXZlTmFtZSA9ICJydWxlVGVzdCI7DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gKHRoaXMucGFnZVN0YXRlID0gdHJ1ZSkpOw0KICAgICAgICAgIHRoaXMuZW5kTmFtZSA9IHRoaXMuJHQoInJ1bGVNb2R1bGUucnVsZVRlc3RGdW5jdGlvbiIpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJwcmVwYXJlRGF0YSI6DQogICAgICAgICAgdGhpcy5ydWxlQWN0aXZlID0gdmFsOw0KICAgICAgICAgIHRoaXMubWd0QWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5hdHRyQWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy50ZXN0VGFiID0gInByZXBhcmVEYXRhIjsNCiAgICAgICAgICB0aGlzLmFjdGl2ZU5hbWUgPSAicnVsZVRlc3QiOw0KICAgICAgICAgIHRoaXMucGFnZU5hbWUgPSB0eXBlOw0KICAgICAgICAgIHRoaXMuZW5kTmFtZSA9IHRoaXMuJHQoInJ1bGVNb2R1bGUucnVsZVRlc3RGdW5jdGlvbiIpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJ0ZXN0UmVzdWx0IjoNCiAgICAgICAgICB0aGlzLnJ1bGVBY3RpdmUgPSB2YWw7DQogICAgICAgICAgdGhpcy5tZ3RBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLmF0dHJBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLnRlc3RUYWIgPSAidGVzdFJlc3VsdCI7DQogICAgICAgICAgdGhpcy5hY3RpdmVOYW1lID0gInJ1bGVUZXN0IjsNCiAgICAgICAgICB0aGlzLnBhZ2VOYW1lID0gdHlwZTsNCiAgICAgICAgICB0aGlzLmVuZE5hbWUgPSB0aGlzLiR0KCJydWxlTW9kdWxlLnJ1bGVUZXN0RnVuY3Rpb24iKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicHVibGlzaGVkIjoNCiAgICAgICAgICB0aGlzLmVuZE5vZGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLm5vZGUgPXRoaXMuJHQoInJ1bGVNb2R1bGUuZW5kIik7DQogICAgICAgICAgdGhpcy5hdHRyQWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5ydWxlQWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5tZ3RBY3RpdmUgPSB2YWw7DQogICAgICAgICAgdGhpcy5wYWdlTmFtZSA9IHR5cGU7DQogICAgICAgICAgdGhpcy5hY3RpdmVOYW1lID0gInJ1bGVQdWJsaXNoZWQiOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgICAgdGhpcy5uYXZpZ2F0aW9uSW5mbyh0aGlzLmFjdGl2ZU5hbWUsIHRoaXMucGFnZU5hbWUpOw0KICAgIH0sDQogICAgLy/oj5zljZXlip/og73lrprkuYnlrozmiJANCiAgICBmaW5pc2hGdW5jdGlvbigpIHsNCiAgICAgIGxldCBydWxlTWFpbiA9IHt9Ow0KICAgICAgcnVsZU1haW4uY29kZSA9IHRoaXMucnVsZUNvZGU7DQogICAgICAvL+WKn+iDvee7k+adnw0KICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZU5hbWUpIHsNCiAgICAgICAgY2FzZSAicnVsZURlZmluaXRpb24iOg0KICAgICAgICAgICAgbGV0IHN0YXRlID0gIjEiOw0KICAgICAgICAgICAgaWYodGhpcy5ydWxlQXR0cmlidXRlICAmJiB0aGlzLnJ1bGVBdHRyaWJ1dGUucGVyZm9ybVR5cGUgPT0gIjIiKXsNCiAgICAgICAgICAgICAgc3RhdGUgPSAiMyI7Ly8g5aaC5p6c5Li6c3Fs5a6a5LmJ5bCx6L+b5YWl5a6h5om5DQogICAgICAgICAgICB9DQogICAgICAgICAgICBydWxlTWFpbi5zdGF0ZSA9c3RhdGU7IC8v5rWL6K+VDQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicnVsZVRlc3QiOg0KICAgICAgICAgIC8v5LiN6YCa6L+HDQogICAgICAgICAgaWYgKHRoaXMubmV4dFN0YXRlID09ICIxIikgew0KICAgICAgICAgICAgLy/mtYvor5XpgJrov4cNCiAgICAgICAgICAgIGlmICh0aGlzLm1lbnVQYWdlKSB7DQogICAgICAgICAgICAgIHJ1bGVNYWluLnN0YXRlID0gIjMiOyAvL+WuoeaJuQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcnVsZU1haW4uc3RhdGUgPSAiNCI7IC8v5Y+R5biDDQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJ1bGVNYWluLnN0YXRlID0gIjIiOyAvL+S/ruaUuQ0KICAgICAgICAgIH0NCiAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgInJ1bGVQdWJsaXNoZWQiOg0KICAgICAgICAgIHJ1bGVNYWluLnN0YXRlID0gIjUiOyAvL+WPr+S9v+eUqA0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgICAgdXBkYXRlUnVsZVN0YXRlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShydWxlTWFpbikpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICAgICAgY2xvc2VWaXNpdFRhZygpOw0KICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICLop4TliJnlrprkuYkiIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubWVzc2FnZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaW5pdEhlaWdodCgpIHsNCiAgICAgIGxldCBzY3JvbGxUb3AgPQ0KICAgICAgICB3aW5kb3cucGFnZVlPZmZzZXQgfHwNCiAgICAgICAgRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fA0KICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsNCiAgICAgIHRoaXMuaXNGaXhlZCA9IHNjcm9sbFRvcCA+IHRoaXMub2Zmc2V0VG9wID8gdHJ1ZSA6IGZhbHNlOw0KICAgIH0sDQogICAgaXNBY3RpdmVkKGZsYWcpIHsNCiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQYWdlID09IGZsYWc7DQogICAgfSwNCiAgICBkZXN0cm95ZWQoKSB7DQogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhpcy5oYW5kbGVTY3JvbGwpOw0KICAgIH0sDQogICAgc2V0UnVsZUNvZGUoY29kZSkgew0KICAgICAgdGhpcy5ydWxlQ29kZSA9IGNvZGU7DQogICAgfSwNCiAgICBzZXRBdHRyKHN0YXRlLCBhdHRyLCBydWxlRmxhZywgY29weUNvZGUsIGNvcHkpIHsNCiAgICAgIGxldCBhY3RpdmUgPSB0aGlzLmFjdGl2ZU5hbWU7DQogICAgICB0aGlzLnJ1bGVBdHRyaWJ1dGUgPSBhdHRyOw0KICAgICAgdGhpcy5ydWxlQ29kZSA9IGF0dHIuY29kZTsNCiAgICAgIHRoaXMuY29weUNvZGUgPSBjb3B5Q29kZTsNCiAgICAgIHRoaXMucnVsZUF0dHJpYnV0ZVN0YXRlID0gc3RhdGU7DQogICAgICBpZiAocnVsZUZsYWcgIT0gIiIgJiYgdHlwZW9mIHJ1bGVGbGFnICE9ICJ1bmRlZmluZWQiKSB7DQogICAgICAgICAgIHRoaXMucnVsZUZsYWcgPSBydWxlRmxhZzsNCiAgICAgIH0NCiAgICAgIHRoaXMuYXR0clN0YXRlID1mYWxzZTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+ICh0aGlzLmF0dHJTdGF0ZSA9IHRydWUpKTsNCiAgICB9LA0KICAgIHNldFJ1bGVNYWtpbmcoc3RhdGUpIHsNCiAgICAgIHRoaXMucGFnZVN0YXRlID1mYWxzZTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+ICh0aGlzLnBhZ2VTdGF0ZSA9IHRydWUpKTsNCiAgICAgIHRoaXMucnVsZU1ha2luZ1N0YXRlID0gc3RhdGU7DQogICAgICB0aGlzLnJ1bGVGbGFnID0nMSc7DQogICAgfSwNCiAgICBzZXRQdWJsaXNoZWQoc3RhdGUpIHsNCiAgICAgIHRoaXMucHVibGlzaGVkU3RhdGUgPSBzdGF0ZTsNCiAgICB9LA0KICAgIHNldFRlc3RSZXN1bHQoc3RhdGUpIHsNCiAgICAgIHRoaXMudGVzdFJlc3VsdFN0YXRlID0gc3RhdGU7DQogICAgfSwNCiAgICBzdGVwU2hvdyh0eXBlKSB7DQogICAgICB2YXIgYWN0aXZlID0gdGhpcy5hY3RpdmVOYW1lOw0KICAgICAgdmFyIG5vZGU7DQogICAgICB0aGlzLnN0ZXBzQXR0ci5zb21lKChpdGVtLCBpKSA9PnsNCiAgICAgICAgICAgIGlmIChpdGVtW2FjdGl2ZV0gJiYgT2JqZWN0LmtleXMoaXRlbVthY3RpdmVdKS5sZW5ndGghPTApew0KICAgICAgICAgICAgICAgIG5vZGUgPWl0ZW1bYWN0aXZlXS5ub2RlOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICB9KQ0KICAgICAgdmFyIHZhbCA9IDA7DQogICAgICBsZXQgcmVzdWx0ID0geyB0b3RhbDogMCwgY3VyckluZGV4OiAwIH07DQogICAgICAvL+afpeeci+aYr+WQpuaYvuekug0KICAgICAgc3dpdGNoIChhY3RpdmUpIHsNCiAgICAgICAgY2FzZSAicnVsZURlZmluaXRpb24iOg0KICAgICAgICAgIHZhbCA9IHRoaXMuYXR0ckFjdGl2ZTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicnVsZVRlc3QiOg0KICAgICAgICAgIHZhbCA9IHRoaXMucnVsZUFjdGl2ZTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAicnVsZVB1Ymxpc2hlZCI6DQogICAgICAgICAgdmFsID0gdGhpcy5tZ3RBY3RpdmU7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICByZXN1bHQuY3VyckluZGV4ID0gdmFsOw0KICAgICAgcmVzdWx0LnRvdGFsID0gcGFyc2VJbnQobm9kZS5sZW5ndGgpOw0KICAgICAgdmFyIGN1cnJNb2RlbEluZGV4Ow0KICAgICAgdmFyIGJhY2sgPSB0cnVlOw0KICAgICAgdmFyIG5leHQgPSB0cnVlOw0KICAgICAgaWYoIXRoaXMubWVudVBhZ2Upew0KICAgICAgICAgIGlmKGFjdGl2ZSA9PSAicnVsZURlZmluaXRpb24iICYmIHRoaXMucGFnZU5hbWUgPT0gInJ1bGVBdHRyaWJ1dGVEZWZpbml0aW9uIil7DQogICAgICAgICAgICAgIGJhY2sgPWZhbHNlOw0KICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICBiYWNrID10cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihhY3RpdmUgPT0gInJ1bGVQdWJsaXNoZWQiICYmIHRoaXMucGFnZU5hbWUgPT0gInB1Ymxpc2hlZCIpew0KICAgICAgICAgICAgICBuZXh0ID1mYWxzZTsNCiAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgbmV4dCA9dHJ1ZTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodHlwZSA9PSAiYmFjayIpIHsNCiAgICAgICAgICB0aGlzLnN0ZXBCYWNrU3RhdGUgPSB0aGlzLm1lbnVQYWdlID8gcmVzdWx0LmN1cnJJbmRleCAhPSAwIDogYmFjazsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnN0ZXBOZXh0U3RhdGUgPSB0aGlzLm1lbnVQYWdlID8gcmVzdWx0LmN1cnJJbmRleCAhPSByZXN1bHQudG90YWwgLSAxIDogbmV4dDsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgLy/kuIrkuIDmraXkuIvkuIDmraUgIOmcgOimgeS4pOWll+mAu+i+kQ0KICAgIGNsaWNrU3RlcCh0eXBlKSB7DQogICAgICB2YXIgYWN0aXZlID0gdGhpcy5hY3RpdmVOYW1lOw0KICAgICAgdmFyIG5vZGU7DQogICAgICB2YXIgaW5kZXg7DQogICAgICB2YXIgbmV4dEFjdGl2ZU5hbWU7DQogICAgICB0aGlzLnN0ZXBzQXR0ci5zb21lKChpdGVtLCBpKSA9PnsNCiAgICAgICAgICAgIGlmIChhY3RpdmUgPT0gaXRlbS5tb2R1bGUpew0KICAgICAgICAgICAgICAgICAgbm9kZSA9aXRlbVthY3RpdmVdLm5vZGU7DQogICAgICAgICAgICAgICAgICBpbmRleD0gaTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgfSkNCiAgICAgIHZhciB2YWwgPSAwOw0KICAgICAgLy/mn6XnnIvmmK/lkKbmmL7npLog5LiN6IO96I635Y+W5qih5Z2X6aG16Z2iDQogICAgICBzd2l0Y2ggKGFjdGl2ZSkgew0KICAgICAgICAgIGNhc2UgInJ1bGVEZWZpbml0aW9uIjoNCiAgICAgICAgICAgIHZhbCA9IHRoaXMuYXR0ckFjdGl2ZTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgInJ1bGVUZXN0IjoNCiAgICAgICAgICAgIHZhbCA9IHRoaXMucnVsZUFjdGl2ZTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgInJ1bGVQdWJsaXNoZWQiOg0KICAgICAgICAgICAgdmFsID0gdGhpcy5tZ3RBY3RpdmU7DQogICAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKCIgY2xpY2tTdGVwIixhY3RpdmUpOw0KICAgICAgLy/lsZXlvIDpobXpnaINCiAgICAgIGxldCBuZXh0SW5kZXg7DQogICAgICBpZiAodHlwZSA9PSAiYmFjayIpIHsNCiAgICAgICAgICBuZXh0SW5kZXggPSB2YWwgLSAxOw0KICAgICAgICAgIGluZGV4ID0gaW5kZXggLTE7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAgIG5leHRJbmRleCA9IHZhbCArIDE7DQogICAgICAgICAgaW5kZXggPSBpbmRleCArMTsNCiAgICAgIH0NCiAgICAgIHZhciBuZXh0QWN0aXZlID0gdGhpcy5zdGVwc0F0dHJbaW5kZXhdOw0KICAgICAgLy8g6I635Y+W5LiL5LiA6aG16Z2i55qE57G75Z6LDQogICAgICBpZighdGhpcy5tZW51UGFnZSl7DQogICAgICAgICAvL+iOt+WPluW9k+mhtemdouaYr+WQpuaYr+aooeWdl+acgOWQjiDmiJYg56ys5LiA5Liq6IqC54K5DQogICAgICAgICAgbm9kZS5zb21lKChpdGVtLCBpKSA9PnsNCiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VOYW1lID09IGl0ZW0ubmFtZSl7DQogICAgICAgICAgICAgICAgdmFsID1pOw0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICBpZihub2RlLmxlbmd0aC0xID09IHZhbCAmJiB0eXBlICE9ICJiYWNrIil7DQogICAgICAgICAgICAgIC8vIOiOt+WPluS4iuS4gOaooeWdlyDmiJbogIXkuIvkuIDmqKHlnZfoioLngrkNCiAgICAgICAgICAgICAgbmV4dEFjdGl2ZU5hbWUgPW5leHRBY3RpdmUubW9kdWxlOw0KICAgICAgICAgICAgICB2YXIgbmV4dE5vZGUgPSBuZXh0QWN0aXZlW25leHRBY3RpdmVOYW1lXS5ub2RlOw0KICAgICAgICAgICAgICB0eXBlID0gbmV4dE5vZGVbMF0ubmFtZTsNCiAgICAgICAgICAgICAgbmV4dEluZGV4ID1uZXh0Tm9kZVswXS52YWw7DQogICAgICAgIH1lbHNlIGlmKHZhbCA9PSAwICAmJiB0eXBlID09ICJiYWNrIil7DQogICAgICAgICAgICAgIG5leHRBY3RpdmVOYW1lID1uZXh0QWN0aXZlLm1vZHVsZTsNCiAgICAgICAgICAgICAgdmFyIG5leHROb2RlID0gbmV4dEFjdGl2ZVtuZXh0QWN0aXZlTmFtZV0ubm9kZTsNCiAgICAgICAgICAgICAgdHlwZSA9IG5leHROb2RlW25leHROb2RlLmxlbmd0aC0xXS5uYW1lOw0KICAgICAgICAgICAgICBuZXh0SW5kZXggPW5leHROb2RlW25leHROb2RlLmxlbmd0aC0xXS52YWw7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgIC8v5YWI5Y+W5LiL5LiA5qih5Z2XICDlnKjlj5bmqKHlnZflr7nlupToioLngrkNCiAgICAgICAgICAgIHR5cGUgPSBub2RlW25leHRJbmRleF0ubmFtZTsNCiAgICAgICAgICAgIG5leHRJbmRleCA9bm9kZVtuZXh0SW5kZXhdLnZhbDsNCiAgICAgICAgICAgIG5leHRBY3RpdmVOYW1lID1hY3RpdmU7DQogICAgICAgIH0NCg0KICAgICAgfWVsc2V7DQogICAgICAgICB2YXIgdHlwZSA9IG5vZGVbbmV4dEluZGV4XS5uYW1lOw0KICAgICAgfQ0KICAgICAgLy/kvKDlhaXkuIvkuIDmqKHlnZcg6ZyA6KaB5qCh6aqMDQogICAgICB0aGlzLmp1bXAobmV4dEluZGV4LCB0eXBlLG5leHRBY3RpdmVOYW1lKTsNCiAgICB9LA0KICAgIGdldENoaWxkQWN0aXZlVGFiKGRhdGEpIHsNCiAgICAgIHRoaXMudGVzdFRhYiA9IGRhdGE7DQogICAgICBzd2l0Y2ggKHRoaXMudGVzdFRhYikgew0KICAgICAgICBjYXNlICJydWxlSW5mbyI6DQogICAgICAgICAgdGhpcy5hdHRyQWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5tZ3RBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLnJ1bGVBY3RpdmUgPSAwOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJwcmVwYXJlRGF0YSI6DQogICAgICAgICAgdGhpcy5hdHRyQWN0aXZlID0gLTE7DQogICAgICAgICAgdGhpcy5tZ3RBY3RpdmUgPSAtMTsNCiAgICAgICAgICB0aGlzLnJ1bGVBY3RpdmUgPSAxOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJ0ZXN0UmVzdWx0IjoNCiAgICAgICAgICB0aGlzLnJ1bGVQYWdlKDIsICJ0ZXN0UmVzdWx0Iik7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfSwNCiAgICBzZXROZXh0U3RhdGUoZGF0YSkgew0KICAgICAgdGhpcy5uZXh0U3RhdGUgPSBkYXRhOw0KICAgIH0sDQogICAgc2V0TmV4dFN0YXRlKGRhdGEpIHsNCiAgICAgIHRoaXMubmV4dFN0YXRlID0gZGF0YTsNCiAgICB9LA0KICAgIGlzU2hvd1F1aWNrKHR5cGUpIHsNCiAgICAgIGlmICghdGhpcy5xdWlja3Nob3cpIHsNCiAgICAgICAgdGhpcy5xdWlja2ljb24gPSAiZWwtaWNvbi1hcnJvdy11cCI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnF1aWNraWNvbiA9ICJlbC1pY29uLWFycm93LWRvd24iOw0KICAgICAgfQ0KICAgICAgcmV0dXJuICh0aGlzLnF1aWNrc2hvdyA9ICF0aGlzLnF1aWNrc2hvdyk7DQogICAgfSwNCiAgICBzZXRBdHRyaWJ1dGVBbmRGYWxnKGF0dHIsIGZsYWcsIGNvcHkpIHsNCiAgICAgIHRoaXMucnVsZUF0dHJpYnV0ZSA9IGF0dHI7DQogICAgICB0aGlzLnJ1bGVGbGFnID0gZmxhZzsNCiAgICAgIHRoaXMucnVsZUNvcHlTdGF0ZSA9IGNvcHk7DQogICAgfSwNCiAgICBydWxlRGVmaW5pdGlvblRvKCl7DQogICAgICB0aGlzLmNsaWNrU3RlcCgnYmFjaycpOw0KICAgIH0sDQogICAgY2hhbmdlQ3VycmVudE5hdlRpdGxlKG5hbWUpIHsNCiAgICAgIGxldCBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RhZ3Mtdmlldy1pdGVtIGFjdGl2ZScpDQogICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID4gMCkgew0KICAgICAgICBsZXQgZWxlID0gZWxlbWVudHNbMF0NCiAgICAgICAgZWxlLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlID0gbmFtZQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ibrms/ruleManagement/ruleModule","sourcesContent":["<template>\r\n  <cus-wraper>\r\n   <div>\r\n    <el-collapse\r\n      v-model=\"activeName\"\r\n      accordion\r\n      class=\"collapseCus collapseCusRule\"\r\n      id=\"boxFixed\"\r\n      :class=\"{'is_fixed-rule' : isFixed}\"\r\n    >\r\n      <el-collapse-item\r\n        v-if=\"nodeName == 'ruleDefinition' || !menuPage\"\r\n        :title=\"$t('route.rule_custom')\"\r\n        name=\"ruleDefinition\"\r\n      >\r\n        <div style=\"height: 64px;\" class=\"stepDiv\">\r\n          <el-steps\r\n            process-status=\"finish \"\r\n            finish-status=\"wait\"\r\n            direction=\"vertical\"\r\n            :active=\"attrActive\">\r\n            <el-step\r\n              icon=\"el-icon-info\"\r\n              :title=\"$t('ruleModule.ruleBasePropertyDefinition')\"\r\n              @click.native=\"jump(0,'ruleAttributeDefinition','ruleDefinition')\"\r\n            ></el-step>\r\n            <el-step\r\n              icon=\"el-icon-info\"\r\n              :title=\"$t('ruleModule.ruleDetailDefinition')\"\r\n              @click.native=\"jump(1,'ruleMaking','ruleDefinition')\"\r\n            ></el-step>\r\n          </el-steps>\r\n        </div>\r\n      </el-collapse-item>\r\n      <el-collapse-item\r\n        v-if=\"(nodeName == 'ruleTest' || !menuPage) && ruleAttribute.performType == '1' \"\r\n        :title=\"$t('route.ruleTest')\"\r\n        name=\"ruleTest\">\r\n        <div style=\"height: 100px;\" class=\"stepDiv\">\r\n          <el-steps\r\n            process-status=\"finish \"\r\n            finish-status=\"wait\"\r\n            direction=\"vertical\"\r\n            :active=\"ruleActive\">\r\n            <el-step\r\n              icon=\"el-icon-info\"\r\n              :title=\"$t('ruleModule.ruleDetailed')\"\r\n              @click.native=\"jump(0,'ruleInfo','ruleTest')\"\r\n            ></el-step>\r\n            <el-step\r\n              icon=\"el-icon-info\"\r\n              :title=\"$t('ruleModule.prepareData')\"\r\n              @click.native=\"jump(1,'prepareData','ruleTest')\"\r\n            ></el-step>\r\n            <el-step\r\n              icon=\"el-icon-info\"\r\n              :title=\"$t('ruleModule.testResult')\"\r\n              @click.native=\"jump(2,'testResult','ruleTest')\"\r\n            ></el-step>\r\n          </el-steps>\r\n        </div>\r\n      </el-collapse-item>\r\n      <el-collapse-item\r\n        v-if=\"nodeName == 'rulePublished' || !menuPage\"\r\n        :title=\"$t('route.rule_release')\"\r\n        name=\"rulePublished\">\r\n        <div style=\"height: 70px;\" class=\"stepDiv\">\r\n          <el-steps\r\n            process-status=\"finish \"\r\n            finish-status=\"wait\"\r\n            direction=\"vertical\"\r\n            :active=\"mgtActive\">\r\n            <el-step\r\n              icon=\"el-icon-info\"\r\n              :title=\"$t('ruleModule.release')\"\r\n              @click.native=\"jump(0,'published','rulePublished')\"\r\n            ></el-step>\r\n          </el-steps>\r\n        </div>\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n    <div class=\"rule-container\">\r\n    <div>\r\n      <template v-if=\"(pageName == 'ruleAttributeDefinition')\">\r\n        <template v-if=\"attrState\">\r\n          <rule-base-definition\r\n            :ruleCode=\"ruleCode\"\r\n            :flag=\"ruleFlag\"\r\n            :ruleAttribute.sync=\"ruleAttribute\"\r\n            :menuPage='menuPage'\r\n          ></rule-base-definition>\r\n        </template>\r\n      </template>\r\n      <template v-if=\"(pageName == 'ruleMaking' && ruleType == '1' && pageState  && ruleAttribute.performType == '1')\">\r\n        <rule-make\r\n          :ruleCode.sync=\"ruleCode\"\r\n          :flag.sync=\"ruleFlag\"\r\n          :ruleQuery.sync=\"ruleQuery\"\r\n          :copyCode.sync=\"copyCode\"\r\n          :menuPage='menuPage'\r\n          :performType='1'\r\n        ></rule-make>\r\n      </template>\r\n      <template v-if=\"(pageName == 'ruleMaking' && ruleType == '2' && pageState && ruleAttribute.performType == '1')\">\r\n        <rule-calculator-make\r\n          :ruleCode.sync=\"ruleCode\"\r\n          :flag.sync=\"ruleFlag\"\r\n          :ruleQuery.sync=\"ruleQuery\"\r\n          :copyCode.sync=\"copyCode\"\r\n          :menuPage='menuPage'\r\n          :performType='1'\r\n        ></rule-calculator-make>\r\n      </template>\r\n      <template v-if=\"( pageName == 'ruleMaking' && ruleAttribute.performType == '2' && pageState)\">\r\n        <rule-sql-definition\r\n          :ruleCode.sync=\"ruleCode\"\r\n          :flag.sync=\"ruleFlag\"\r\n          :ruleQuery.sync=\"ruleQuery\"\r\n          :copyCode.sync=\"copyCode\"\r\n          :menuPage='menuPage'\r\n          :ruleType ='ruleType'\r\n          :performType='ruleAttribute.performType'\r\n        ></rule-sql-definition>\r\n      </template>\r\n      <template\r\n        v-if=\"(pageName == 'ruleInfo'||pageName == 'prepareData'||pageName == 'testResult')\">\r\n        <rule-test-Param\r\n          :ruleCode.sync=\"ruleCode\"\r\n          :type.sync=\"ruleType\"\r\n          :testTab.sync=\"testTab\"\r\n          :nextState=\"nextState\"\r\n          :menuPage =\"menuPage\"\r\n          @getChildActiveTab=\"getChildActiveTab\"\r\n        ></rule-test-Param>\r\n      </template>\r\n      <template v-if=\"(pageName == 'ruleImport')\">\r\n        <rule-import :ruleCode.sync=\"ruleCode\"></rule-import>\r\n      </template>\r\n      <template v-if=\"(pageName == 'published')\">\r\n        <rule-release :ruleCode.sync=\"ruleCode\" :ruleModule.sync=\"ruleModule\"></rule-release>\r\n      </template>\r\n    </div>\r\n      <div :class=\"[menuPage  === true ? 'footer-step-rule': 'footer-step2-rule']\">\r\n        <el-button  size=\"mini\"\r\n          v-if=\"stepBackState\"\r\n          icon=\"back_step\"\r\n          type=\"text\"\r\n          @click=\"clickStep('back')\"\r\n          circle\r\n        >\r\n        <svg-icon icon-class=\"back_step\" />上一步\r\n        </el-button>\r\n        <el-button  size=\"mini\"\r\n          v-if=\"stepNextState\"\r\n          icon=\"next_step\"\r\n          type=\"text\"\r\n          @click=\"clickStep('next')\"\r\n          circle\r\n        >\r\n          <svg-icon icon-class=\"next_step\" />下一步\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"collapseCus_finishDef-rule is_fixed_finishDef-rule\">\r\n      <el-form>\r\n        <el-form-item :label=\"$t('ruleModule.node_selection')\">\r\n          <el-input\r\n            v-model=\"node\"\r\n            clearable\r\n            filterable\r\n            :disabled=\"true\"\r\n            style=\"width: 150px;margin-bottom: 10px\"\r\n          ></el-input>\r\n          <el-button  size=\"mini\"\r\n            :disabled=\"showPageFlag\"\r\n            @click=\"finishFunction\"\r\n            style=\"width: 150px\"\r\n            type=\"primary\"\r\n            v-if=\"menuPage\"\r\n          >\r\n          <svg-icon icon-class=\"end\"></svg-icon>\r\n            {{endName}}\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n </cus-wraper>\r\n</template>\r\n<script>\r\nimport ruleBaseDefinition from \"@/views/ibrms/ruleManagement/ruleBaseDefinition\";\r\nimport ruleCalculatorMake from \"@/views/ibrms/ruleManagement/ruleCalculatorMake\";\r\nimport ruleMake from \"@/views/ibrms/ruleManagement/ruleMake\";\r\nimport ruleSqlDefinition from \"@/views/ibrms/ruleManagement/ruleSqlDefinition\";\r\nimport ruleTestParam from \"@/views/ibrms/ruleManagement/ruleTestParam\";\r\nimport ruleRelease from \"@/views/ibrms/ruleManagement/ruleRelease\";\r\nimport { updateRuleState,findRuleMainByCode} from \"@/api/ibrms/ruleMain\";\r\nimport { closeVisitTag } from \"@/utils/tagsView\";\r\n\r\nexport default {\r\n  name: \"ruleModule\",\r\n  data() {\r\n    return {\r\n      isFixed: false,\r\n      offsetTop: 20,\r\n      quickicon: \"el-icon-arrow-down\",\r\n      quickshow: false,\r\n      ruleAttribute: {\r\n           performType:\"1\",\r\n      },\r\n      ruleType: \"1\",\r\n      ruleCode: \"\",\r\n      ruleFlag: \"0\",\r\n      ruleCopyState: false,\r\n      attrActive: 0,\r\n      ruleActive: -1,\r\n      activeName: \"ruleDefinition\",\r\n      pageName: \"ruleAttributeDefinition\",\r\n      showPageFlag: false,\r\n      ruleQuery: false,\r\n      pageState: true,\r\n      attrState: true,\r\n      mgtActive: -1,\r\n      ruleModule: true,\r\n      node: \"\",\r\n      endNode: true,\r\n      endName: \"\",\r\n      currentPage: \"detail\",\r\n      testTab: \"ruleInfo\",\r\n      menuPage: true,\r\n      nextState: \"1\",\r\n      ruleAttributeState: false,\r\n      ruleMakingState: false,\r\n      ruleInfoState: false,\r\n      prepareDataState: false,\r\n      testResultState: false,\r\n      publishedState: false,\r\n      stepBackState:true,\r\n      stepNextState:true,\r\n      crruetState:0,\r\n      update:false,\r\n      copyCode: \"\",\r\n      currIndex:0,\r\n      ruleMian:{},\r\n      stepsAttr: [{\r\n        module:\"ruleDefinition\",\r\n        ruleDefinition: {\r\n          node: [{\r\n              name:\"ruleAttributeDefinition\",\r\n              val:0\r\n              },\r\n              {\r\n                name:\"ruleMaking\",\r\n                val:1\r\n              }],\r\n          nodeType: false\r\n        }\r\n        },{\r\n              module:\"ruleTest\",\r\n              ruleTest: {\r\n              node: [{\r\n                    name:\"ruleInfo\",\r\n                    val:0\r\n                  },\r\n                  {\r\n                    name:\"prepareData\",\r\n                    val:1\r\n                  }\r\n                  ,{\r\n                    name:\"testResult\",\r\n                    val:2\r\n                  }],\r\n              nodeType: false\r\n            }\r\n      },{\r\n          module:\"rulePublished\",\r\n          rulePublished: {\r\n            node: [{\r\n                  name:\"published\",\r\n                  val:0\r\n                }],\r\n            nodeType: false\r\n          }\r\n      }],\r\n      test: {\r\n              module:\"ruleTest\",\r\n              ruleTest: {\r\n              node: [{\r\n                    name:\"ruleInfo\",\r\n                    val:0\r\n                  },\r\n                  {\r\n                    name:\"prepareData\",\r\n                    val:1\r\n                  }\r\n                  ,{\r\n                    name:\"testResult\",\r\n                    val:2\r\n                  }],\r\n              nodeType: false\r\n            }\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    ruleBaseDefinition,\r\n    ruleCalculatorMake,\r\n    ruleMake,\r\n    ruleTestParam,\r\n    ruleRelease,\r\n    ruleSqlDefinition\r\n  },\r\n  props: [ \"flag\",'attributeObj'],\r\n  created() {\r\n    this.ruleFlag = this.getJsonData('ruleFlag');\r\n    this.menuPage = this.getJsonData('menuPage');\r\n    this.nodeName = this.getJsonData('nodeName');\r\n    this.ruleAttribute = this.getJsonData('attributeObj');\r\n    this.ruleType = this.getJsonData('ruleType');\r\n    if(this.flag && typeof( this.flag) != 'undefined' ){\r\n        this.ruleFlag = this.flag\r\n    }\r\n    if(!this.nodeName || typeof(this.nodeName) == 'undefined' ){\r\n        this.nodeName = this.activeName;\r\n    }\r\n    if(this.attributeObj && typeof( this.attributeObj) != 'undefined' && Object.keys(this.attributeObj).length > 0){\r\n        this.ruleAttribute = this.attributeObj\r\n    }\r\n    this.ruleCode = this.ruleAttribute.code;\r\n\r\n    //根据菜单页面 展示导航条\r\n    if (this.menuPage && this.nodeName != \"ruleDefinition\") {\r\n        this.ruleActive = 0;\r\n        this.mgtActive = 0;\r\n    } else {\r\n      this.ruleType = this.ruleAttribute.ruleType;\r\n    }\r\n    this.navigationInfo(this.nodeName, \"\");\r\n\r\n    //window.addEventListener(\"scroll\", this.initHeight);\r\n   //this.$nextTick(() => {\r\n   //   this.offsetTop = document.querySelector(\"#boxFixed\").offsetTop;\r\n   // });\r\n  },\r\n  watch:{\r\n   'ruleAttribute.performType':{\r\n         handler(newVal, objVal) {\r\n              let type = false;\r\n              for(let i=0;i < this.stepsAttr.length;i++){\r\n                    if(this.stepsAttr[i].module ==\"ruleTest\"){\r\n                        type = true;\r\n                        if(newVal == '2'){\r\n                             this.node = this.$t(\"ruleModule.ruleExamine\");\r\n                             this.stepsAttr.splice(i,1);\r\n                        }\r\n\r\n                    }\r\n               }\r\n                if(!type && newVal == '1'){\r\n                   this.node = this.$t(\"route.ruleTest\");\r\n                   this.stepsAttr.splice(1,0,this.test);\r\n                }\r\n\r\n           console.log(\"newVal this.stepsAttr\",this.stepsAttr);\r\n          },\r\n          deep: true,\r\n          immediate:true\r\n      }\r\n\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    navigationInfo(nodeName, pageName) {\r\n      let name;\r\n      let currentNav;\r\n      switch (nodeName) {\r\n        case \"ruleDefinition\":\r\n          name = \"ruleAttributeDefinition\";\r\n          this.activeName = \"ruleDefinition\";\r\n          this.endName = this.$t(\"ruleModule.ruleDefinitionFunction\");\r\n          let node = this.$t(\"route.ruleTest\");\r\n          currentNav = this.$t(\"route.rule_custom\");\r\n          if(this.ruleAttribute && this.ruleAttribute.performType == \"2\"){\r\n              node =  this.$t(\"ruleModule.ruleExamine\");\r\n              //删除数组中的测试节点\r\n          }\r\n          this.node = node;\r\n          break;\r\n        case \"ruleTest\":\r\n          name = \"ruleInfo\";\r\n          this.activeName = \"ruleTest\";\r\n          this.endName = this.$t(\"ruleModule.ruleTestFunction\");\r\n          this.node = this.$t(\"route.rule_release\");\r\n          currentNav = this.$t(\"route.ruleTest\");\r\n          break;\r\n        case \"rulePublished\":\r\n          name = \"rulePublished\";\r\n          this.node = this.$t(\"ruleModule.end\");\r\n          this.activeName = \"rulePublished\";\r\n          this.endName = this.$t(\"ruleModule.rulePublishedFunction\");\r\n          break;\r\n      }\r\n      if (pageName && typeof pageName != \"undefined\" && pageName != \"\") {\r\n          this.pageName = pageName;\r\n      } else {\r\n          this.pageName = name;\r\n      }\r\n      if(this.menuPage){\r\n          this.changeCurrentNavTitle(currentNav);\r\n      }\r\n     this.stepShow(\"back\");\r\n     this.stepShow(\"next\");\r\n    },\r\n   async jump(val, type,nextActive) {\r\n      let jump = false;\r\n      let title = this.$t(\"ruleModule.messageTip\");\r\n      var state = true;\r\n      if(nextActive && nextActive != '' && typeof(nextActive) != undefined){\r\n          if(this.activeName != nextActive){\r\n              state = false;\r\n          }\r\n        }\r\n      let ruleMain = {\r\n          code:\"\",\r\n          state:\"\"\r\n      };\r\n      ruleMain.code = this.ruleCode;\r\n      switch (this.activeName) {\r\n        case \"ruleDefinition\":\r\n          if(ruleMain.performType == '1'){\r\n               ruleMain.state = \"1\"; //测试\r\n           }else{\r\n               ruleMain.state = \"4\"; //测试\r\n           }\r\n\r\n          break;\r\n        case \"ruleTest\":\r\n          //不通过\r\n          if (this.nextState == \"1\") {\r\n              //测试通过\r\n              if (this.menuPage) {\r\n                  ruleMain.state = \"3\"; //审批\r\n              } else {\r\n                  ruleMain.state = \"4\"; //待发布\r\n              }\r\n            } else {\r\n                ruleMain.state = \"2\"; //修改\r\n            }\r\n            break;\r\n            case \"rulePublished\":\r\n              ruleMain.state = \"5\";\r\n              break;\r\n          }\r\n      this.update =false;\r\n      console.log(\"this.pageName111\",this.pageName);\r\n      if(this.pageName != \"ruleAttributeDefinition\"){\r\n         try{\r\n            let param = {\"code\":this.ruleCode}\r\n            await findRuleMainByCode(this.buildRequestData(param)).then(response => {\r\n                if (response.code != 200) {\r\n                      this.$message(response.message);\r\n                    }else{\r\n                      this.crruetState = response.data.state;\r\n                      //如果有状态改变\r\n                      if(parseInt(ruleMain.state) > parseInt(this.crruetState)){\r\n                          this.update =true;\r\n                      }\r\n                    }\r\n\r\n          });\r\n        }catch(err){\r\n        }\r\n      }\r\n      console.log(\"crruetState\",this.crruetState);\r\n      console.log(\"pageName\",this.pageName);\r\n      console.log(\" this.update\", this.update);\r\n      switch (this.pageName) {\r\n        case \"ruleAttributeDefinition\":\r\n          if((this.ruleAttribute.id && this.ruleAttribute.id !='' )|| (this.pageName == type && state) || this.update || parseInt(this.crruetState) > 0){\r\n              jump = true;\r\n          } else {\r\n              title  = this.$t(\"ruleModule.ruleMakingTitle\");\r\n          }\r\n          break;\r\n        case \"ruleMaking\":\r\n          if (this.ruleMakingState || (this.pageName == type  && state)|| this.update || parseInt(this.crruetState) > 0) {\r\n                jump = true;\r\n                await this.finish(nextActive,ruleMain);\r\n              } else {\r\n                title = this.$t(\"ruleModule.ruleMakingTitle\");\r\n              }\r\n          break;\r\n        case \"ruleInfo\":\r\n           title = this.$t(\"ruleModule.ruleTestTitle\");\r\n          if (this.testResultState || (this.activeName == \"ruleTest\" && state) || this.update ||  parseInt(this.crruetState)>=1) {\r\n              jump = true;\r\n            }\r\n          break;\r\n        case \"prepareData\":\r\n          title = this.$t(\"ruleModule.ruleTestTitle\");\r\n          if (this.testResultState || (this.activeName == \"ruleTest\" && state)|| this.update ||  parseInt(this.crruetState)>=1) {\r\n            jump = true;\r\n          }\r\n          break;\r\n        case \"testResult\":\r\n          title = this.$t(\"ruleModule.ruleTestTitle\");\r\n          if (this.testResultState || (this.activeName == \"ruleTest\" && state)||this.update ||  parseInt(this.crruetState)>=1) {\r\n              jump = true;\r\n              await this.finish(nextActive,ruleMain);\r\n          }\r\n\r\n          break;\r\n        case \"published\":\r\n          title = this.$t(\"ruleModule.publishedTitle\");\r\n          if(this.publishedState || (this.activeName == \"rulePublished\" && state) || this.update || parseInt(this.crruetState) ==5) {\r\n              jump = true;\r\n           }\r\n          break;\r\n      }\r\n       console.log(\"jump\",jump);\r\n      if (!jump) {\r\n            this.$confirm(title, title, {\r\n              confirmButtonText: this.$t(\"ruleModule.messageButton2\"),\r\n              cancelButtonText: this.$t(\"ruleModule.messageButton1\"),\r\n              type: \"warning\"\r\n            }).then(() => {\r\n              //流转流程\r\n              this.rulePage(val, type);\r\n            });\r\n      } else {\r\n          this.rulePage(val, type);\r\n      }\r\n    },\r\n   async finish(nextActive,ruleMain){\r\n        let num;\r\n        this.stepsAttr.some((item, i) =>{\r\n            if (item[this.activeName] && Object.keys(item[this.activeName]).length!=0){\r\n                num =i;\r\n            }\r\n        })\r\n\r\n       if(!this.menuPage && this.stepsAttr[num+1] && (this.pageName == \"ruleMaking\" || this.pageName == \"testResult\" || this.pageName == \"published\") && nextActive == this.stepsAttr[num+1].module){\r\n               if(this.update){\r\n                  await updateRuleState(this.buildRequestData(ruleMain)).then(response => {\r\n                    if (response.code == 200) {\r\n                         if (this.menuPage) {\r\n                              closeVisitTag();\r\n                              this.$router.push({ name: \"规则定义\" });\r\n                         }else{\r\n                             switch(response.data){\r\n                                case \"0\":\r\n                                  this.notifySuccess(this.$t(\"ruleModule.node1\"));\r\n                                break\r\n                                case \"1\":\r\n                                  this.notifySuccess(this.$t(\"ruleModule.node2\"));\r\n                                break\r\n                            }\r\n\r\n                         }\r\n\r\n\r\n                    } else\r\n                    {\r\n                      this.$message.error(response.message);\r\n                    }\r\n                  });\r\n                }\r\n         }\r\n    },\r\n    rulePage(val, type) {\r\n      console.log(\"rulePage\",type+\"_\"+val);\r\n      this.quickshow = false;\r\n      this.endNode = true;\r\n      switch (type) {\r\n        case \"ruleAttributeDefinition\":\r\n          this.attrActive = val;\r\n          this.mgtActive = -1;\r\n          this.ruleActive = -1;\r\n          this.ruleQuery = false;\r\n          this.pageName = type;\r\n          this.activeName = \"ruleDefinition\";\r\n          this.endName = this.$t(\"ruleModule.ruleDefinitionFunction\");\r\n          break;\r\n        case \"ruleMaking\":\r\n          //执行缓存\r\n          this.attrActive = val;\r\n          this.mgtActive = -1;\r\n          this.ruleActive = -1;\r\n          this.ruleType = this.ruleAttribute.ruleType;\r\n          this.ruleQuery = false;\r\n          this.pageState = false;\r\n          this.pageName = type;\r\n          this.activeName = \"ruleDefinition\";\r\n          this.$nextTick(() => (this.pageState = true));\r\n          this.endName = this.$t(\"ruleModule.ruleDefinitionFunction\");\r\n          break;\r\n        case \"ruleInfo\":\r\n          this.attrActive = -1;\r\n          this.mgtActive = -1;\r\n          this.ruleActive = val;\r\n          this.ruleQuery = true;\r\n          this.pageState = false;\r\n          this.testTab = \"ruleInfo\";\r\n          this.pageName = type;\r\n          this.activeName = \"ruleTest\";\r\n          this.$nextTick(() => (this.pageState = true));\r\n          this.endName = this.$t(\"ruleModule.ruleTestFunction\");\r\n          break;\r\n        case \"prepareData\":\r\n          this.ruleActive = val;\r\n          this.mgtActive = -1;\r\n          this.attrActive = -1;\r\n          this.testTab = \"prepareData\";\r\n          this.activeName = \"ruleTest\";\r\n          this.pageName = type;\r\n          this.endName = this.$t(\"ruleModule.ruleTestFunction\");\r\n          break;\r\n        case \"testResult\":\r\n          this.ruleActive = val;\r\n          this.mgtActive = -1;\r\n          this.attrActive = -1;\r\n          this.testTab = \"testResult\";\r\n          this.activeName = \"ruleTest\";\r\n          this.pageName = type;\r\n          this.endName = this.$t(\"ruleModule.ruleTestFunction\");\r\n          break;\r\n        case \"published\":\r\n          this.endNode = false;\r\n          this.node =this.$t(\"ruleModule.end\");\r\n          this.attrActive = -1;\r\n          this.ruleActive = -1;\r\n          this.mgtActive = val;\r\n          this.pageName = type;\r\n          this.activeName = \"rulePublished\";\r\n          break;\r\n      }\r\n      this.navigationInfo(this.activeName, this.pageName);\r\n    },\r\n    //菜单功能定义完成\r\n    finishFunction() {\r\n      let ruleMain = {};\r\n      ruleMain.code = this.ruleCode;\r\n      //功能结束\r\n      switch (this.activeName) {\r\n        case \"ruleDefinition\":\r\n            let state = \"1\";\r\n            if(this.ruleAttribute  && this.ruleAttribute.performType == \"2\"){\r\n              state = \"3\";// 如果为sql定义就进入审批\r\n            }\r\n            ruleMain.state =state; //测试\r\n            break;\r\n        case \"ruleTest\":\r\n          //不通过\r\n          if (this.nextState == \"1\") {\r\n            //测试通过\r\n            if (this.menuPage) {\r\n              ruleMain.state = \"3\"; //审批\r\n            } else {\r\n              ruleMain.state = \"4\"; //发布\r\n            }\r\n          } else {\r\n            ruleMain.state = \"2\"; //修改\r\n          }\r\n        break;\r\n        case \"rulePublished\":\r\n          ruleMain.state = \"5\"; //可使用\r\n          break;\r\n      }\r\n      updateRuleState(this.buildRequestData(ruleMain)).then(response => {\r\n        if (response.code == 200) {\r\n              closeVisitTag();\r\n              this.$router.push({ name: \"规则定义\" });\r\n        } else {\r\n          this.$message.error(response.message);\r\n        }\r\n      });\r\n    },\r\n    initHeight() {\r\n      let scrollTop =\r\n        window.pageYOffset ||\r\n        Document.documentElement.scrollTop ||\r\n        document.body.scrollTop;\r\n      this.isFixed = scrollTop > this.offsetTop ? true : false;\r\n    },\r\n    isActived(flag) {\r\n      return this.currentPage == flag;\r\n    },\r\n    destroyed() {\r\n      window.removeEventListener(\"scroll\", this.handleScroll);\r\n    },\r\n    setRuleCode(code) {\r\n      this.ruleCode = code;\r\n    },\r\n    setAttr(state, attr, ruleFlag, copyCode, copy) {\r\n      let active = this.activeName;\r\n      this.ruleAttribute = attr;\r\n      this.ruleCode = attr.code;\r\n      this.copyCode = copyCode;\r\n      this.ruleAttributeState = state;\r\n      if (ruleFlag != \"\" && typeof ruleFlag != \"undefined\") {\r\n           this.ruleFlag = ruleFlag;\r\n      }\r\n      this.attrState =false;\r\n      this.$nextTick(() => (this.attrState = true));\r\n    },\r\n    setRuleMaking(state) {\r\n      this.pageState =false;\r\n      this.$nextTick(() => (this.pageState = true));\r\n      this.ruleMakingState = state;\r\n      this.ruleFlag ='1';\r\n    },\r\n    setPublished(state) {\r\n      this.publishedState = state;\r\n    },\r\n    setTestResult(state) {\r\n      this.testResultState = state;\r\n    },\r\n    stepShow(type) {\r\n      var active = this.activeName;\r\n      var node;\r\n      this.stepsAttr.some((item, i) =>{\r\n            if (item[active] && Object.keys(item[active]).length!=0){\r\n                node =item[active].node;\r\n                return true;\r\n            }\r\n     })\r\n      var val = 0;\r\n      let result = { total: 0, currIndex: 0 };\r\n      //查看是否显示\r\n      switch (active) {\r\n        case \"ruleDefinition\":\r\n          val = this.attrActive;\r\n          break;\r\n        case \"ruleTest\":\r\n          val = this.ruleActive;\r\n          break;\r\n        case \"rulePublished\":\r\n          val = this.mgtActive;\r\n          break;\r\n      }\r\n      result.currIndex = val;\r\n      result.total = parseInt(node.length);\r\n      var currModelIndex;\r\n      var back = true;\r\n      var next = true;\r\n      if(!this.menuPage){\r\n          if(active == \"ruleDefinition\" && this.pageName == \"ruleAttributeDefinition\"){\r\n              back =false;\r\n          }else{\r\n              back =true;\r\n          }\r\n          if(active == \"rulePublished\" && this.pageName == \"published\"){\r\n              next =false;\r\n          }else{\r\n              next =true;\r\n          }\r\n      }\r\n      if (type == \"back\") {\r\n          this.stepBackState = this.menuPage ? result.currIndex != 0 : back;\r\n        } else {\r\n          this.stepNextState = this.menuPage ? result.currIndex != result.total - 1 : next;\r\n        }\r\n    },\r\n    //上一步下一步  需要两套逻辑\r\n    clickStep(type) {\r\n      var active = this.activeName;\r\n      var node;\r\n      var index;\r\n      var nextActiveName;\r\n      this.stepsAttr.some((item, i) =>{\r\n            if (active == item.module){\r\n                  node =item[active].node;\r\n                  index= i;\r\n                return true;\r\n            }\r\n     })\r\n      var val = 0;\r\n      //查看是否显示 不能获取模块页面\r\n      switch (active) {\r\n          case \"ruleDefinition\":\r\n            val = this.attrActive;\r\n            break;\r\n          case \"ruleTest\":\r\n            val = this.ruleActive;\r\n            break;\r\n          case \"rulePublished\":\r\n            val = this.mgtActive;\r\n            break;\r\n      }\r\n      console.log(\" clickStep\",active);\r\n      //展开页面\r\n      let nextIndex;\r\n      if (type == \"back\") {\r\n          nextIndex = val - 1;\r\n          index = index -1;\r\n      } else {\r\n          nextIndex = val + 1;\r\n          index = index +1;\r\n      }\r\n      var nextActive = this.stepsAttr[index];\r\n      // 获取下一页面的类型\r\n      if(!this.menuPage){\r\n         //获取当页面是否是模块最后 或 第一个节点\r\n          node.some((item, i) =>{\r\n            if (this.pageName == item.name){\r\n                val =i;\r\n                return true;\r\n            }\r\n        })\r\n        if(node.length-1 == val && type != \"back\"){\r\n              // 获取上一模块 或者下一模块节点\r\n              nextActiveName =nextActive.module;\r\n              var nextNode = nextActive[nextActiveName].node;\r\n              type = nextNode[0].name;\r\n              nextIndex =nextNode[0].val;\r\n        }else if(val == 0  && type == \"back\"){\r\n              nextActiveName =nextActive.module;\r\n              var nextNode = nextActive[nextActiveName].node;\r\n              type = nextNode[nextNode.length-1].name;\r\n              nextIndex =nextNode[nextNode.length-1].val;\r\n        }else{\r\n             //先取下一模块  在取模块对应节点\r\n            type = node[nextIndex].name;\r\n            nextIndex =node[nextIndex].val;\r\n            nextActiveName =active;\r\n        }\r\n\r\n      }else{\r\n         var type = node[nextIndex].name;\r\n      }\r\n      //传入下一模块 需要校验\r\n      this.jump(nextIndex, type,nextActiveName);\r\n    },\r\n    getChildActiveTab(data) {\r\n      this.testTab = data;\r\n      switch (this.testTab) {\r\n        case \"ruleInfo\":\r\n          this.attrActive = -1;\r\n          this.mgtActive = -1;\r\n          this.ruleActive = 0;\r\n          break;\r\n        case \"prepareData\":\r\n          this.attrActive = -1;\r\n          this.mgtActive = -1;\r\n          this.ruleActive = 1;\r\n          break;\r\n        case \"testResult\":\r\n          this.rulePage(2, \"testResult\");\r\n          break;\r\n      }\r\n    },\r\n    setNextState(data) {\r\n      this.nextState = data;\r\n    },\r\n    setNextState(data) {\r\n      this.nextState = data;\r\n    },\r\n    isShowQuick(type) {\r\n      if (!this.quickshow) {\r\n        this.quickicon = \"el-icon-arrow-up\";\r\n      } else {\r\n        this.quickicon = \"el-icon-arrow-down\";\r\n      }\r\n      return (this.quickshow = !this.quickshow);\r\n    },\r\n    setAttributeAndFalg(attr, flag, copy) {\r\n      this.ruleAttribute = attr;\r\n      this.ruleFlag = flag;\r\n      this.ruleCopyState = copy;\r\n    },\r\n    ruleDefinitionTo(){\r\n      this.clickStep('back');\r\n    },\r\n    changeCurrentNavTitle(name) {\r\n      let elements = document.getElementsByClassName('tags-view-item active')\r\n      if (elements.length > 0) {\r\n        let ele = elements[0]\r\n        ele.childNodes[0].nodeValue = name\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-collapse-item {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.collapseCus_finishDef-rule {\r\n  z-index: 99;\r\n  bottom: 20px;\r\n  right: 0px;\r\n  position: absolute;\r\n  border-top: none;\r\n  border-bottom: none;\r\n  margin-left: 50px;\r\n  width: 140px;\r\n  -webkit-transform: scale(0.85);\r\n  transform: scale(0.85);\r\n}\r\n\r\n.collapseCusRule{\r\n  top: 30px;\r\n  right: 0px;\r\n  position: absolute;\r\n  width: 140px;\r\n}\r\n\r\n.footer-step-rule {\r\n  text-align: center;\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 13%;\r\n  margin-bottom: 0px;\r\n}\r\n\r\n.footer-step2-rule {\r\n  text-align: center;\r\n  bottom: 0;\r\n  margin-right: 15px;\r\n  margin-bottom: 0px;\r\n  float: right;\r\n}\r\n\r\n\r\n.rule-container {\r\n  width: calc(100% - 140px)\r\n}\r\n\r\n.is_fixed-rule {\r\n  position: absolute;\r\n  top: 20px;\r\n  z-index: 99;\r\n}\r\n\r\n.is_fixed_finishDef-rule {\r\n  position: absolute;\r\n  margin-right: 5px;\r\n  bottom: 20px;\r\n  z-index: 99;\r\n}\r\n\r\n.cusProcess {\r\n  float: left;\r\n\r\n  .el-card {\r\n    margin-bottom: 20px !important;\r\n    width: 148px !important;\r\n    cursor: pointer;\r\n    border-radius: 8px;\r\n    height: 36px;\r\n    line-height: 11px;\r\n  }\r\n\r\n  .is_Selected {\r\n    color: #fff;\r\n    background-color: #348ce7 !important;\r\n  }\r\n\r\n  .el-card__body {\r\n    padding: 12px;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.cusSubCard {\r\n  margin-left: 40px;\r\n\r\n  .el-step__main .is-finish {\r\n    color: #fff;\r\n    background-color: #ebeef5 !important;\r\n    font-size: 14px;\r\n    height: 26px;\r\n    text-align: center;\r\n  }\r\n\r\n  .el-step__main .el-step__description {\r\n    height: 0px;\r\n  }\r\n\r\n  .el-step__title {\r\n    color: gray;\r\n    background-color: #ebeef5;\r\n    font-size: 14px;\r\n    border: 1px solid #ebeef5;\r\n    text-align: center;\r\n    height: 24px;\r\n  }\r\n\r\n  .el-step.is-vertical .el-step__main {\r\n    padding-left: 1px;\r\n  }\r\n\r\n  .el-step__icon-inner[class*=\"el-icon\"]:not(.is-status) {\r\n    font-size: 23px;\r\n  }\r\n}\r\n\r\n</style>\r\n"]}]}