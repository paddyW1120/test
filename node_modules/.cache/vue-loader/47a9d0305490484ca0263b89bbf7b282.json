{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-statistic\\product-evaluate\\evaluate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-statistic\\product-evaluate\\evaluate\\index.vue","mtime":1609847106676},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3Byb2R1Y3RTZWxlY3RJbmRleERhdGEsIGdldFN0YXR1c30gZnJvbSAnQC9hcGkvYmFzaWNpbmZvL3Byb2R1Y3RJbmZvU2VsZWN0Jw0KaW1wb3J0IHtmaW5kQWxsUHJvZHVjdEJ5UGREZXRhaWxUeXBlfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcGRjbGFpbXZlcmlmaWNhdGlvbiINCg0KbGV0IF90aGlzDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdwcm9kdWN0RXZhbHVhdGUnLA0KICBmaWx0ZXJzOiB7DQogICAgZmlsdGVyX3BkUHJvY2Vzcyhjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMucGRQcm9jZXNzU1tjb2RlXQ0KICAgIH0NCg0KICB9LA0KICBkYXRhKCkgew0KICAgIF90aGlzID0gdGhpczsNCiAgICByZXR1cm4gew0KICAgICAgcnVsZXM6ew0KICAgICAgICBzZXg6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RFdmFsdWF0ZS5uZWVkU2V4JyksIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgYWdlOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0RXZhbHVhdGUubmVlZEFnZScpLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIG9jY3VwYXRpb25UeXBlOlsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RFdmFsdWF0ZS5uZWVkT2NjdXBhdGlvblR5cGUnKSwgdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBhbW50OlsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RFdmFsdWF0ZS5uZWVkQW1udCcpLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIHByZW06Ww0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdEV2YWx1YXRlLm5lZWRQcmVtJyksIHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIHBhcmFtczogew0KICAgICAgICBwcm9kdWN0Q2F0ZWdvcnk6ICcnDQogICAgICB9LA0KICAgICAgZXZhbHVhdGVUYWJsZURhdGE6IFtdLA0KICAgICAgY2FzZUluZm86IHsNCiAgICAgICAgc2V4OiAnJywNCiAgICAgICAgYWdlOiAnJywNCiAgICAgICAgYWdlVW5pdDogJycsDQogICAgICAgIG9jY3VwYXRpb25UeXBlOiAnJywNCiAgICAgICAgYW1udDogJycsDQogICAgICAgIHByZW06ICcnLA0KICAgICAgfSwNCiAgICAgIHByb0Nhc2VEYXRhOiBbXSwNCiAgICAgIHBkUHJvY2Vzc1M6IHsnMSc6ICflrprkuYnkuK0nLCAnMic6ICfmtYvor5XkuK0nLCAnMyc6ICflrqHmoLjkuK0nLCAnNCc6ICflvoXlj5HluIMnLCAnNSc6ICflt7Llj5HluIMnLCAnNic6ICflt7LlgZzllK4nfSwNCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwNCiAgICAgIHNlbGVjdEtleTogW10sDQoNCg0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAvLyBldmFsdWF0ZVRhYmxlRGF0YTogew0KICAgIC8vICAgaGFuZGxlcih2YWx1ZSwgb2xkVmFsdWUpIHsNCiAgICAvLyAgICAgdGhpcy50b2dnbGVTZWxlY3Rpb24oKTsNCiAgICAvLyAgIH0sDQogICAgLy8gICBkZWVwOiB0cnVlDQogICAgLy8gfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFJvd0tleShyb3cpIHsNCiAgICAgIHJldHVybiByb3cuaWQNCiAgICB9LA0KICAgIC8vIOihqOagvOaNoumhteWkmumAieWMheWQq+S5i+WJjemhtemdoumAieS4reeahOaVsOaNrg0KICAgIHNlbGVjdFByb2R1Y3QodmFsKSB7DQoNCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB2YWw7DQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLnBhZ2UpDQogICAgICAvLyBsZXQgY3VycmVudCA9IHRoaXMuJHJlZnMucGFnZS5wYWdlOw0KICAgICAgLy8gLy8gbGV0IGN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLm11bHRpcGxlU2VsZWN0aW9uW2N1cnJlbnRdOw0KICAgICAgLy8gLy8gdGhpcy5jaGVja1NlbGVjdChjdXJyZW50U2VsZWN0aW9uLHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pOw0KICAgICAgLy8NCiAgICAgIC8vIGxldCBjdXJyZW50U2VsZWN0aW9uID0gW107DQogICAgICAvLw0KICAgICAgLy8gT2JqZWN0LmFzc2lnbihjdXJyZW50U2VsZWN0aW9uLCB2YWwpOw0KICAgICAgLy8gdGhpcy5tdWx0aXBsZVNlbGVjdGlvbltjdXJyZW50XSA9IGN1cnJlbnRTZWxlY3Rpb247DQogICAgICAvLw0KICAgICAgLy8gdGhpcy5wcm9DYXNlRGF0YSA9IFtdOw0KICAgICAgLy8gdGhpcy5zZWxlY3RLZXkgPSBbXTsNCiAgICAgIC8vIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgIC8vICAgaXRlbS5mb3JFYWNoKGl0ZW0xID0+IHsNCiAgICAgIC8vICAgICBsZXQgY2FzZUluZm8gPSB7DQogICAgICAvLyAgICAgICBwcm9kdWN0OiBpdGVtMS5wZENvZGUgKyAnOicgKyBpdGVtMS5wZE5hbWUsDQogICAgICAvLyAgICAgICBiZW5lZml0TGlzdDogaXRlbTEuYmVuZWZpdExpc3QsDQogICAgICAvLyAgICAgICBwYXlMaXN0OiBpdGVtMS5wYXlMaXN0LA0KICAgICAgLy8gICAgICAgYmVuZWZpdFRlcm06ICcnLA0KICAgICAgLy8gICAgICAgcGF5VGVybTogJycNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgICAgdGhpcy5wcm9DYXNlRGF0YS5wdXNoKGNhc2VJbmZvKQ0KICAgICAgLy8gICAgIGlmICghdGhpcy5zZWxlY3RLZXkuaW5jbHVkZXMoaXRlbTEuaWQpKSB7DQogICAgICAvLyAgICAgICB0aGlzLnNlbGVjdEtleS5wdXNoKGl0ZW0xLmlkKTsNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgIH0pDQogICAgICAvLyB9KQ0KICAgICAgLy8NCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pOw0KICAgICAgdGhpcy5wcm9DYXNlRGF0YSA9IFtdOw0KICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICBsZXQgY2FzZUluZm8gPSB7DQogICAgICAgICAgICAgICAgcHJvZHVjdDogaXRlbS5wZENvZGUgKyAnOicgKyBpdGVtLnBkTmFtZSwNCiAgICAgICAgICAgICAgICBiZW5lZml0TGlzdDogaXRlbS5iZW5lZml0TGlzdCwNCiAgICAgICAgICAgICAgICBwYXlMaXN0OiBpdGVtLnBheUxpc3QsDQogICAgICAgICAgICAgICAgYmVuZWZpdFRlcm06ICcnLA0KICAgICAgICAgICAgICAgIHBheVRlcm06ICcnDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy5wcm9DYXNlRGF0YS5wdXNoKGNhc2VJbmZvKQ0KICAgICAgICAgICAgICAvLyBpZiAoIXRoaXMuc2VsZWN0S2V5LmluY2x1ZGVzKGl0ZW0xLmlkKSkgew0KICAgICAgICAgICAgICAvLyAgIHRoaXMuc2VsZWN0S2V5LnB1c2goaXRlbTEuaWQpOw0KICAgICAgICAgICAgICAvLyB9DQogICAgICAgICAgfSkNCiAgICB9LA0KICAgIGNoZWNrU2VsZWN0KGN1cnJlbnRTZWxlY3Rpb24sIG11bHRpU2VsZWN0aW9uKSB7DQogICAgICBjdXJyZW50U2VsZWN0aW9uLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGxldCBpdGVtSWQgPSBpdGVtLmlkOw0KICAgICAgICBtdWx0aVNlbGVjdGlvbi5mb3JFYWNoKG1JdGVtID0+IHsNCiAgICAgICAgICBsZXQgcCA9IDA7DQogICAgICAgICAgaWYgKGl0ZW1JZCA9PSBtSXRlbS5pZCkgew0KICAgICAgICAgICAgcCsrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAocCA+IDApIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCiAgICBldmFsdWF0aW9uKCkgew0KICAgICAgaWYodGhpcy5wcm9DYXNlRGF0YSA9PSB1bmRlZmluZWQgfHwgIHRoaXMucHJvQ2FzZURhdGEubGVuZ3RoIDwgMil7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+iHs+WwkemAieaLqeS4pOadoeS6p+WTgei/m+ihjOWvueavlCcpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRyZWZzWydjYXNlSW5mbyddLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAvLyDov5vooYzmtYvor4QNCiAgICAgICAgICBsZXQgcGFyYW1zPXsNCiAgICAgICAgICAgIHByb2R1Y3Q6dGhpcy5wcm9DYXNlRGF0YSwNCiAgICAgICAgICAgIGJhc2ljSW5mbzp7DQogICAgICAgICAgICAgIHNleDogdGhpcy5jYXNlSW5mby5zZXgsDQogICAgICAgICAgICAgIGFnZTogdGhpcy5jYXNlSW5mby5hZ2UsDQogICAgICAgICAgICAgIGFnZVVuaXQ6IHRoaXMuY2FzZUluZm8uYWdlVW5pdCwNCiAgICAgICAgICAgICAgb2NjdXBhdGlvblR5cGU6IHRoaXMuY2FzZUluZm8ub2NjdXBhdGlvblR5cGUsDQogICAgICAgICAgICAgIGFtbnQ6IHRoaXMuY2FzZUluZm8uYW1udCwNCiAgICAgICAgICAgICAgcHJlbTogdGhpcy5jYXNlSW5mby5wcmVtDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuY2FjaGVKc29uRGF0YSgiZXZhbHVhdGVEYXRhIiwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSkNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9jb21tb2RpdHktc3RhdGlzdGljL3Byb2R1Y3QtZXZhbHVhdGUvZXZhbHVhdGUtZGV0YWlsJ30pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBkb1NlYXJjaCgpew0KICAgICAgLy8g5p+l6K+iDQogICAgfSwNCiAgICB0b2dnbGVTZWxlY3Rpb24oKSB7DQogICAgICBjb25zb2xlLmxvZygn6L+b5YWldG9nZ2xlJykNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0S2V5KQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLmV2YWx1YXRlVGFibGVEYXRhLmZvckVhY2gocm93ID0+IHsNCiAgICAgICAgICBpZiAodGhpcy5zZWxlY3RLZXkuaW5jbHVkZXMocm93LmlkKSApIHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93KTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfpgInkuK3kuoYnICsgcm93LmlkICsgJ+ihjCcpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGZpbHRlckhhbmRsZXIoY29kZXR5cGUsIHZhbHVlKSB7DQogICAgICByZXR1cm4gdGhpcy5nZXRDb2RlTmFtZShjb2RldHlwZSwgdmFsdWUpOw0KICAgIH0sDQogICAgZmlsdGVyUGRQcm9jZXNzSGFuZGxlcih2YWx1ZSwgcm93LCBjb2x1bW4pIHsNCiAgICAgIGNvbnN0IHByb3BlcnR5ID0gY29sdW1uWydwcm9wZXJ0eSddDQogICAgICByZXR1cm4gcm93W3Byb3BlcnR5XSA9PT0gdmFsdWUNCiAgICB9LA0KICAgIGZpbHRlclBkVHlwZUhhbmRsZXIodmFsdWUsIHJvdywgY29sdW1uKSB7DQogICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsncHJvcGVydHknXQ0KICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlDQogICAgfSwNCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-statistic/product-evaluate/evaluate","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title :label=\"$t('route.productSelect')\"></cus-page-title>\r\n\r\n    <el-form :inline=\"true\" label-width=\"auto\" ref=\"params\" :model=\"params\">\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productEvaluate.pdDetailType')\">\r\n            <cus-select :codetype=\"'ProductCategory'\" clearable filterable v-model=\"params.productCategory\"\r\n                        style=\"width:220px\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <el-col :span=\"8\"></el-col>\r\n\r\n        <el-col :span=\"8\">\r\n          <el-button size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"doSearch\">\r\n            {{ $t('productEvaluate.search') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <el-divider content-position=\"left\"><i class=\"el-icon-s-grid\"></i>{{ $t('productEvaluate.product') }}\r\n    </el-divider>\r\n    <el-table :data=\"evaluateTableData\" size=\"mini\" @selection-change=\"selectProduct\" highlight-current-row :row-key=\"getRowKey\"\r\n              fit element-loading-text=\"Loading\" border align=\"center\" class=\"wraper-table\" ref=\"multipleTable\">\r\n      <el-table-column width=\"60\" :reserve-selection=\"true\" :label=\"$t('productEvaluate.selection')\" align=\"center\" type=\"selection\">\r\n        <!--        <template slot-scope=\"scope\">-->\r\n        <!--          <el-checkbox-group v-model=\"selectOperation\">-->\r\n        <!--            <el-checkbox :label=\"scope.row.id\">{{ '' }}</el-checkbox>-->\r\n        <!--          </el-checkbox-group>-->\r\n        <!--        </template>-->\r\n      </el-table-column>\r\n\r\n      <el-table-column :label=\"$t('table.id')\" prop=\"index\" align=\"center\" width=\"50\">\r\n        <template v-slot=\"scope\">\r\n          {{ initTableIndex('page', scope.$index) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdCode')\" prop=\"pdCode\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdName')\" prop=\"pdName\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('customComponents.pdEdition')\" prop=\"pdEdition\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productEvaluate.pdProcess')\" prop=\"pdProcess\" align=\"center\"\r\n                       :filters=\"[{text: '定义中', value: '1'}, {text: '测试中', value: '2'}, {text: '审核中', value: '3'}, {text: '待发布', value: '4'}, {text: '已发布', value: '5'}, {text: '已停售', value: '6'}]\"\r\n                       :filter-method=\"filterPdProcessHandler\" column-key=\"pdProcess\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdProcess | filter_pdProcess }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productEvaluate.defType')\" prop=\"defType\" align=\"center\"\r\n                       :filters=\"[{text: '新产品', value: '1'}, {text: '订正产品', value: '2'}, {text: '停售产品', value: '3'}]\"\r\n                       :filter-method=\"filterPdTypeHandler\" column-key=\"defType\">\r\n        <template v-slot=\"scope\">{{ filterHandler('pdAuditType', scope.row.defType) }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdDefApplyDate')\" prop=\"pdApplDate\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productEvaluate.pdRelDate')\" prop=\"pdStartDate\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productEvaluate.pdDisDate')\" prop=\"pdStopDate\" align=\"center\"></el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination ref=\"page\" url=\"/product-evaluate/base/pdtempPdInfoRelaList\" :pageSize=\"10\" :params=\"params\"\r\n                    v-model=\"evaluateTableData\"/>\r\n    <br>\r\n\r\n\r\n    <cus-form-title :label=\"$t('productEvaluate.evaluationCase')\"/>\r\n    <el-table :data=\"proCaseData\" size=\"mini\" highlight-current-row fit element-loading-text=\"Loading\"\r\n              border align=\"center\" class=\"wraper-table\" ref=\"proCaseData\">\r\n      <el-table-column :label=\"$t('productEvaluate.product')\" prop=\"product\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productEvaluate.benefitTerm')\" prop=\"benefitTerm\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-select v-model.required=\"scope.row.benefitTerm\" :placeholder=\"$t('form.please_select')\">\r\n            <el-option\r\n              v-for=\"item in scope.row.benefitList\"\r\n              :key=\"item.term + item.termUnit\"\r\n              :label=\"item.term + item.termUnit\"\r\n              :value=\"item.term + item.termUnit\">\r\n            </el-option>\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.payTerm')\" prop=\"payTerm\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-select v-model.required=\"scope.row.payTerm\" :placeholder=\"$t('form.please_select')\">\r\n            <el-option\r\n              v-for=\"item in scope.row.payList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n\r\n    </el-table>\r\n    <el-form :inline=\"true\" label-width=\"auto\" ref=\"caseInfo\" :model=\"caseInfo\" style=\"margin-top: 20px\" :rules=\"rules\">\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.sex')\" prop=\"sex\" required>\r\n            <cus-select v-model=\"caseInfo.sex\" :codetype=\"'sex'\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.customerage')\" prop=\"age\"\r\n                        required>\r\n            <el-input v-model.number=\"caseInfo.age\" :placeholder=\"$t('pay_def.message.please_enter')\" clearable\r\n                      style=\"width:217px\">\r\n              <el-select slot=\"append\" v-model=\"caseInfo.ageUnit\" class=\"cst\">\r\n                <el-option :label=\"$t('i18nView.ageY')\" value=\"Y\"/>\r\n                <el-option :label=\"$t('i18nView.dayD')\" value=\"D\"/>\r\n              </el-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.occupationGrade')\" required\r\n                        prop=\"occupationType\">\r\n            <cus-select v-model=\"caseInfo.occupationType\" :codetype=\"'occupationtype'\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.sumAssured')\" required\r\n                        prop=\"amnt\">\r\n            <el-input v-model.number=\"caseInfo.amnt\" clearable :placeholder=\"$t('pay_def.message.please_enter')\"\r\n                      style=\"width:217px\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.premium')\" required\r\n                        prop=\"prem\">\r\n            <el-input v-model.number=\"caseInfo.prem\" clearable :placeholder=\"$t('pay_def.message.please_enter')\"\r\n                      style=\"width:217px\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <el-row style=\"margin-top: 35px\">\r\n      <el-col :span=\"24\" align=\"right\">\r\n        <el-button icon=\"el-icon-success\" size=\"small\" style=\"width: 100px\"\r\n                   type=\"primary\"\r\n                   @click=\"evaluation\">\r\n          {{ $t('productEvaluate.excuteEvaluation') }}\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\nimport {productSelectIndexData, getStatus} from '@/api/basicinfo/productInfoSelect'\r\nimport {findAllProductByPdDetailType} from \"@/api/basicinfo/pdclaimverification\"\r\n\r\nlet _this\r\nexport default {\r\n  name: 'productEvaluate',\r\n  filters: {\r\n    filter_pdProcess(code) {\r\n      return _this.pdProcessS[code]\r\n    }\r\n\r\n  },\r\n  data() {\r\n    _this = this;\r\n    return {\r\n      rules:{\r\n        sex: [\r\n          {required: true, message: this.$t('productEvaluate.needSex'), trigger: 'blur'}\r\n        ],\r\n        age: [\r\n          {required: true, message: this.$t('productEvaluate.needAge'), trigger: 'blur'}\r\n        ],\r\n        occupationType:[\r\n          {required: true, message: this.$t('productEvaluate.needOccupationType'), trigger: 'blur'}\r\n        ],\r\n        amnt:[\r\n          {required: true, message: this.$t('productEvaluate.needAmnt'), trigger: 'blur'}\r\n        ],\r\n        prem:[\r\n          {required: true, message: this.$t('productEvaluate.needPrem'), trigger: 'blur'}\r\n        ]\r\n      },\r\n      params: {\r\n        productCategory: ''\r\n      },\r\n      evaluateTableData: [],\r\n      caseInfo: {\r\n        sex: '',\r\n        age: '',\r\n        ageUnit: '',\r\n        occupationType: '',\r\n        amnt: '',\r\n        prem: '',\r\n      },\r\n      proCaseData: [],\r\n      pdProcessS: {'1': '定义中', '2': '测试中', '3': '审核中', '4': '待发布', '5': '已发布', '6': '已停售'},\r\n      multipleSelection: [],\r\n      selectKey: [],\r\n\r\n\r\n    }\r\n  },\r\n  watch: {\r\n    // evaluateTableData: {\r\n    //   handler(value, oldValue) {\r\n    //     this.toggleSelection();\r\n    //   },\r\n    //   deep: true\r\n    // },\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    getRowKey(row) {\r\n      return row.id\r\n    },\r\n    // 表格换页多选包含之前页面选中的数据\r\n    selectProduct(val) {\r\n\r\n      this.multipleSelection = val;\r\n      // console.log(this.$refs.page)\r\n      // let current = this.$refs.page.page;\r\n      // // let currentSelection = this.multipleSelection[current];\r\n      // // this.checkSelect(currentSelection,this.multipleSelection);\r\n      //\r\n      // let currentSelection = [];\r\n      //\r\n      // Object.assign(currentSelection, val);\r\n      // this.multipleSelection[current] = currentSelection;\r\n      //\r\n      // this.proCaseData = [];\r\n      // this.selectKey = [];\r\n      // this.multipleSelection.forEach(item => {\r\n      //   item.forEach(item1 => {\r\n      //     let caseInfo = {\r\n      //       product: item1.pdCode + ':' + item1.pdName,\r\n      //       benefitList: item1.benefitList,\r\n      //       payList: item1.payList,\r\n      //       benefitTerm: '',\r\n      //       payTerm: ''\r\n      //     }\r\n      //     this.proCaseData.push(caseInfo)\r\n      //     if (!this.selectKey.includes(item1.id)) {\r\n      //       this.selectKey.push(item1.id);\r\n      //     }\r\n      //   })\r\n      // })\r\n      //\r\n      // console.log(this.multipleSelection);\r\n      this.proCaseData = [];\r\n      this.multipleSelection.forEach(item => {\r\n              let caseInfo = {\r\n                product: item.pdCode + ':' + item.pdName,\r\n                benefitList: item.benefitList,\r\n                payList: item.payList,\r\n                benefitTerm: '',\r\n                payTerm: ''\r\n              }\r\n              this.proCaseData.push(caseInfo)\r\n              // if (!this.selectKey.includes(item1.id)) {\r\n              //   this.selectKey.push(item1.id);\r\n              // }\r\n          })\r\n    },\r\n    checkSelect(currentSelection, multiSelection) {\r\n      currentSelection.forEach(item => {\r\n        let itemId = item.id;\r\n        multiSelection.forEach(mItem => {\r\n          let p = 0;\r\n          if (itemId == mItem.id) {\r\n            p++;\r\n          }\r\n          if (p > 0) {\r\n            return true;\r\n          }\r\n        })\r\n      })\r\n      return false;\r\n    },\r\n    evaluation() {\r\n      if(this.proCaseData == undefined ||  this.proCaseData.length < 2){\r\n        this.$message.error('请至少选择两条产品进行对比');\r\n        return;\r\n      }\r\n      this.$refs['caseInfo'].validate((valid) => {\r\n        if (valid) {\r\n          // 进行测评\r\n          let params={\r\n            product:this.proCaseData,\r\n            basicInfo:{\r\n              sex: this.caseInfo.sex,\r\n              age: this.caseInfo.age,\r\n              ageUnit: this.caseInfo.ageUnit,\r\n              occupationType: this.caseInfo.occupationType,\r\n              amnt: this.caseInfo.amnt,\r\n              prem: this.caseInfo.prem\r\n            }\r\n          }\r\n          this.cacheJsonData(\"evaluateData\", JSON.stringify(params))\r\n          this.$router.push({path: '/commodity-statistic/product-evaluate/evaluate-detail'})\r\n        }\r\n      })\r\n    },\r\n    doSearch(){\r\n      // 查询\r\n    },\r\n    toggleSelection() {\r\n      console.log('进入toggle')\r\n      console.log(this.selectKey)\r\n      this.$nextTick(() => {\r\n        this.evaluateTableData.forEach(row => {\r\n          if (this.selectKey.includes(row.id) ) {\r\n            this.$refs.multipleTable.toggleRowSelection(row);\r\n            console.log('选中了' + row.id + '行');\r\n          }\r\n        })\r\n      })\r\n\r\n    },\r\n    filterHandler(codetype, value) {\r\n      return this.getCodeName(codetype, value);\r\n    },\r\n    filterPdProcessHandler(value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n    filterPdTypeHandler(value, row, column) {\r\n      const property = column['property']\r\n      return row[property] === value\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}