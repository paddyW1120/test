{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\system\\role\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\system\\role\\list\\index.vue","mtime":1609847107193},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7YWRkUm9sZSwgZGVsZXRlUm9sZSwgZmluZFVzZXJzQnlSb2xlSWQsIHVwZGF0ZVJvbGV9IGZyb20gJ0AvYXBpL3N5c3RlbS9yb2xlJw0KaW1wb3J0IHtnZXRBbGxUZW5hbnR9IGZyb20gIkAvYXBpL3dvcmtmbG93L3dvcmtmbG93IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnUm9sZScsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCg0KICAgICAgLy/ooajmoLzmlbDmja4NCiAgICAgIGNvbmZpZ3M6IFtdLA0KICAgICAgdGVuYW50TGlzdDogW10sLy8g56ef5oi35YiX6KGoDQogICAgICAvL+afpeivouWPguaVsOWPr+S7peaYr+aooeeziuaIluiAheetieWAvCBsaWtlXyAgZXFfDQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgcm9sZU5hbWU6ICcnLA0KICAgICAgICByb2xlQ29kZTogJycNCiAgICAgIH0sDQogICAgICBmb3JtOiB7ICAvL+ihqOWNleaVsOaNruS4juWQjuerr+WunuS9k+exu+WvueW6lA0KICAgICAgICBpZDogJycsIC8v5Li76ZSuSUQNCiAgICAgICAgcm9sZUNvZGU6ICcnLCAvL+i0puWPtw0KICAgICAgICByb2xlTmFtZTogJycsIC8v6LSm5Y+3DQogICAgICAgIHRlbmFudElkOiAnJywgLy/np5/miLdJZA0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHJvbGVDb2RlOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy57yW56CBJywgdHJpZ2dlcjogJ2JsdXInfSwNCiAgICAgICAgXSwNCiAgICAgICAgcm9sZU5hbWU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLlkI0nLCB0cmlnZ2VyOiAnYmx1cid9LA0KICAgICAgICBdDQogICAgICB9LA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsIC8vZGlhbG9n5pi+56S66L+Y5piv6ZqQ6JePDQogICAgICBkaWFsb2dTdGF0dXM6ICcnLCAvL+ihqOWNleeKtuaAgeaYr+aWsOWinui/mOaYr+S/ruaUuQ0KICAgICAgdGl0bGVNYXA6IHsNCiAgICAgICAgdXBkYXRlOiB0aGlzLiR0KCdyb2xlVmlldy51cGRhdGUnKSwNCiAgICAgICAgY3JlYXRlOiB0aGlzLiR0KCdyb2xlVmlldy5hZGQnKQ0KICAgICAgfSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQoNCiAgfSwNCiAgd2F0Y2g6IHsNCg0KICB9LA0KICBtb3VudGVkKCkgew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlU2VhcmNoKCkgew0KICAgICAgdGhpcy4kcmVmcy5wYWdlLnJlbG9hZCgpDQogICAgfSwNCiAgICBoYW5kbGVDcmVhdGUoKSB7DQogICAgICB0aGlzLnJlc2V0Rm9ybSgpDQogICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICdjcmVhdGUnDQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICB0aGlzLmZvcm0gPSBPYmplY3QuYXNzaWduKHt9LCByb3cpDQogICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICd1cGRhdGUnDQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBoYW5kbGVEZWxldGUoaWQpIHsNCiAgICAgIGZpbmRVc2Vyc0J5Um9sZUlkKGlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgZGVsZXRlUm9sZShpZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaCgpDQogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSkNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfop5LoibLkuIvlrZjlnKjnlKjmiLfvvIzkuI3lhYHorrjliKDpmaTop5LoibLvvIEnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgc3VibWl0Rm9ybSgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBsZXQgYmFjazsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkKSB7DQogICAgICAgICAgICBiYWNrID0gdXBkYXRlUm9sZSh0aGlzLmZvcm0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGJhY2sgPSBhZGRSb2xlKHRoaXMuZm9ybSkNCiAgICAgICAgICB9DQogICAgICAgICAgYmFjay50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKCkNCiAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKQ0KICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgcmVzZXRGb3JtKCkgew0KICAgICAgdGhpcy5mb3JtID0geyAgLy/ooajljZXmlbDmja7kuI7lkI7nq6/lrp7kvZPnsbvlr7nlupQNCiAgICAgICAgaWQ6ICcnLCAvL+S4u+mUrklEDQogICAgICAgIHJvbGVDb2RlOiAnJywgLy/op5LoibLnvJbnoIENCiAgICAgICAgcm9sZU5hbWU6ICcnLCAvL+inkuiJsuWQjQ0KICAgICAgICB0ZW5hbnRJZDogJycNCiAgICAgIH0NCiAgICB9LA0KICAgIHRvQXV0aFNldHRpbmcocm93KSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ2F1dGhTZXR0aW5nJywgcGFyYW1zOiB7cm9sZUlkOiByb3cuaWQsZmxhZzogJzEnfX0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/role/list","sourcesContent":["<template>\r\n  <cus-wraper>\r\n       <el-form label-width=\"auto\">\r\n         <el-row :gutter=\"10\">\r\n           <cus-col>\r\n                  <el-form-item :label=\"$t('roleView.table_roleName')\">\r\n                    <el-input v-model=\"params.like_roleName\" :placeholder=\"$t('form.please_enter')\" class=\"filter-item\"\r\n                              clearable></el-input>\r\n                  </el-form-item>\r\n           </cus-col>\r\n\r\n           <cus-col>\r\n             <el-form-item :label=\"$t('roleView.table_roleCode')\">\r\n               <el-input v-model=\"params.like_roleCode\" :placeholder=\"$t('form.please_enter')\" class=\"filter-item\"\r\n                         clearable></el-input>\r\n             </el-form-item>\r\n           </cus-col>\r\n\r\n           <cus-btn-wrapper>\r\n             <el-button v-waves class=\"filter-button\" icon=\"el-icon-search\" size=\"small\" type=\"primary\" @click=\"handleSearch\">\r\n               {{$t('table.search') }}\r\n             </el-button>\r\n             <el-button v-auth=\"'sys-role:add'\" v-waves class=\"filter-button\" icon=\"el-icon-plus\" size=\"small\" type=\"primary\"\r\n                        @click=\"handleCreate\">{{ $t('table.add') }}\r\n             </el-button>\r\n           </cus-btn-wrapper>\r\n         </el-row>\r\n       </el-form>\r\n\r\n\r\n    <cus-table-title :label=\"$t('route.sys_role_list')\"></cus-table-title>\r\n    <el-table :data=\"configs\" border element-loading-text=\"Loading\" fit highlight-current-row size=\"mini\">\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" sortable type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('roleView.table_roleName')\" align=\"center\" prop=\"roleName\"></el-table-column>\r\n      <el-table-column :label=\"$t('roleView.table_roleCode')\" align=\"center\" prop=\"roleCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.actions')\" align=\"center\" fixed=\"right\" width=\"350\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button v-auth=\"'sys-role:update'\" class=\"filter-button\" icon=\"el-icon-edit\" size=\"small\"\r\n                     type=\"primary\" @click=\"handleUpdate(scope.row)\">\r\n            {{ $t('table.edit') }}\r\n          </el-button>\r\n          <el-button v-auth=\"'sys-role:toAuthSetting'\" class=\"filter-button\" icon=\"el-icon-edit\" size=\"small\"\r\n                     type=\"primary\" @click=\"toAuthSetting(scope.row)\">\r\n            {{ $t('roleView.roleAuthoritySettings') }}\r\n          </el-button>\r\n          <cus-del-btn v-auth=\"'sys-role:delete'\" :buttonText=\"$t('table.delete')\" style=\"margin-left: 10px\"\r\n                       @ok=\"handleDelete(scope.row.id)\"/>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination ref=\"page\" v-model=\"configs\" :pageSize=\"10\" :params=\"params\" url=\"/sys-role/list\"/>\r\n\r\n    <!---新增修改dialog---->\r\n\r\n    <el-dialog v-dialog-drag  :visible.sync=\"dialogVisible\" @close=\"dialogVisible=false\" >\r\n      <cus-page-title-back @backTo=\"dialogVisible=false\" :isDialog=\"true\" :label=\"titleMap[dialogStatus]\" />\r\n      <el-form ref=\"dataForm\" :model=\"form\" :rules=\"rules\" label-width=\"auto\" style=\"margin-left: 10%\">\r\n        <el-row :gutter=\"20\"><el-col :span=\"15\"><el-form-item :label=\"$t('roleView.table_roleCode')+':'\" prop=\"roleCode\">\r\n          <el-input v-model=\"form.roleCode\"\r\n                    :placeholder=\"$t('roleView.input')+$t('roleView.table_roleCode')\"></el-input>\r\n        </el-form-item></el-col></el-row>\r\n        <el-row :gutter=\"20\"><el-col :span=\"15\"><el-form-item :label=\"$t('roleView.table_roleName')+':'\" prop=\"roleName\">\r\n          <el-input v-model=\"form.roleName\"\r\n                    :placeholder=\"$t('roleView.input')+$t('roleView.table_roleName')\"></el-input>\r\n        </el-form-item></el-col></el-row>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button size=\"small\" icon='el-icon-circle-close' type=\"primary\" @click=\"dialogVisible = false\"> {{ $t('table.cancel') }} </el-button>\r\n          <el-button v-auth=\"'sys-role:add'\" class=\"el-icon-success\" size=\"small\" type=\"primary\" @click=\"submitForm\"> {{\r\n              $t('table.confirm')\r\n            }} </el-button>\r\n        </span>\r\n    </el-dialog>\r\n\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {addRole, deleteRole, findUsersByRoleId, updateRole} from '@/api/system/role'\r\nimport {getAllTenant} from \"@/api/workflow/workflow\";\r\n\r\nexport default {\r\n  name: 'Role',\r\n  data() {\r\n    return {\r\n\r\n      //表格数据\r\n      configs: [],\r\n      tenantList: [],// 租户列表\r\n      //查询参数可以是模糊或者等值 like_  eq_\r\n      params: {\r\n        roleName: '',\r\n        roleCode: ''\r\n      },\r\n      form: {  //表单数据与后端实体类对应\r\n        id: '', //主键ID\r\n        roleCode: '', //账号\r\n        roleName: '', //账号\r\n        tenantId: '', //租户Id\r\n      },\r\n      rules: {\r\n        roleCode: [\r\n          {required: true, message: '请输入角色编码', trigger: 'blur'},\r\n        ],\r\n        roleName: [\r\n          {required: true, message: '请输入角色名', trigger: 'blur'},\r\n        ]\r\n      },\r\n      dialogVisible: false, //dialog显示还是隐藏\r\n      dialogStatus: '', //表单状态是新增还是修改\r\n      titleMap: {\r\n        update: this.$t('roleView.update'),\r\n        create: this.$t('roleView.add')\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  watch: {\r\n\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    handleSearch() {\r\n      this.$refs.page.reload()\r\n    },\r\n    handleCreate() {\r\n      this.resetForm()\r\n      this.dialogStatus = 'create'\r\n      this.dialogVisible = true\r\n    },\r\n    handleUpdate(row) {\r\n      this.form = Object.assign({}, row)\r\n      this.dialogStatus = 'update'\r\n      this.dialogVisible = true\r\n    },\r\n    handleDelete(id) {\r\n      findUsersByRoleId(id).then(response => {\r\n        if (response.data.length === 0) {\r\n          deleteRole(id).then(response => {\r\n            this.handleSearch()\r\n            this.notifySuccess(response.message)\r\n            this.dialogVisible = false\r\n          })\r\n        } else {\r\n          this.notifyError('角色下存在用户，不允许删除角色！')\r\n        }\r\n      })\r\n    },\r\n    submitForm() {\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n          let back;\r\n          if (this.form.id) {\r\n            back = updateRole(this.form)\r\n          } else {\r\n            back = addRole(this.form)\r\n          }\r\n          back.then(response => {\r\n            this.handleSearch()\r\n            this.notifySuccess(response.message)\r\n            this.dialogVisible = false\r\n          })\r\n        }\r\n      })\r\n    },\r\n    resetForm() {\r\n      this.form = {  //表单数据与后端实体类对应\r\n        id: '', //主键ID\r\n        roleCode: '', //角色编码\r\n        roleName: '', //角色名\r\n        tenantId: ''\r\n      }\r\n    },\r\n    toAuthSetting(row) {\r\n      this.$router.push({name: 'authSetting', params: {roleId: row.id,flag: '1'}})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}