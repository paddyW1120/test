{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\objectManagement\\ruleMessageInfoBom\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\objectManagement\\ruleMessageInfoBom\\index.vue","mtime":1609847106744},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBhZGRSdWxlTWVzc2FnZUluZm9Cb20sDQogIGRlbGV0ZVJ1bGVNZXNzYWdlSW5mb0JvbSwNCiAgdXBkYXRlUnVsZU1lc3NhZ2VJbmZvQm9tLA0KICBjaGVja0JvbVJ1bGVNZXNzYWdlDQp9IGZyb20gIkAvYXBpL2licm1zL3J1bGVNZXNzYWdlSW5mb0JvbSI7DQppbXBvcnQgeyBjbG9zZVZpc2l0VGFnIH0gZnJvbSAiQC91dGlscy90YWdzVmlldyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJydWxlTWVzc2FnZUluZm9Cb20iLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAvL+ihqOagvOaVsOaNrg0KICAgICAgY29uZmlnczogW10sDQogICAgICAvL+afpeivouWPguaVsA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIGxpa2VfbXNnOiAiIiwNCiAgICAgICAgZXFfbGFuZ3VhZ2U6ICIiLA0KICAgICAgICBlcV9tc2dUeXBlOiAiIiwNCiAgICAgICAgZXFfa2V5SWQ6ICIiDQogICAgICB9LA0KICAgICAgZm9ybTogew0KICAgICAgICAvL+ihqOWNleaVsOaNruS4juWQjuerr+WunuS9k+exu+WvueW6lA0KICAgICAgICBpZDogIiIsIC8v5Li76ZSuSUQNCiAgICAgICAga2V5SWQ6ICIiLC8vDQogICAgICAgIG1zZ1R5cGU6IiIsDQogICAgICAgIGxhbmd1YWdlOiIiDQogICAgICB9LA0KICAgICAgLy/mo4Dpqozop4TliJkNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIG1zZzogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgicnVsZU1lc3NhZ2VJbmZvQm9tLm1zZ01lc3NhZ2UiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBsYW5ndWFnZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgicnVsZU1lc3NhZ2VJbmZvQm9tLmxhbmd1YWdlTWVzc2FnZSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwgLy9kaWFsb2fmmL7npLrov5jmmK/pmpDol48NCiAgICAgIGRpYWxvZ1N0YXR1czogIiIsIC8v6KGo5Y2V54q25oCB5piv5paw5aKe6L+Y5piv5L+u5pS5DQogICAgICB0aXRsZU1hcDogew0KICAgICAgICB1cGRhdGU6IHRoaXMuJHQoInJ1bGVNZXNzYWdlSW5mb0JvbS51cGRhdGUiKSwNCiAgICAgICAgY3JlYXRlOiB0aGlzLiR0KCJydWxlTWVzc2FnZUluZm9Cb20uYWRkIikNCiAgICAgIH0sDQogICAgICBwYXJlbnRQYWdlOiIiDQogICAgfTsNCiAgfSwNCiAgcHJvcHM6IFsia2V5SWQiLCAibXNnVHlwZSIsInN0YXRlIl0sDQogIHdhdGNoOiB7DQogICAgICAgIHN0YXRlKG5ld1ZhbCl7DQogICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKTsNCiAgICAgICAgfSwNCiAgICAgICAga2V5SWQobmV3VmFsKXsNCiAgICAgICAgICAgICB0aGlzLnBhcmFtcy5lcV9rZXlJZCA9IG5ld1ZhbDsNCiAgICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCk7DQogICAgICAgIH0sDQogICAgICAgIG1zZ1R5cGUobmV3VmFsKXsNCiAgICAgICAgICAgIHRoaXMucGFyYW1zLmVxX21zZ1R5cGUgPSBuZXdWYWw7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCk7DQogICAgICAgIH0NCg0KICAgIH0sDQogIGNvbXB1dGVkOiB7fSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnBhcmFtcy5lcV9rZXlJZCA9IHRoaXMua2V5SWQ7DQogICAgdGhpcy5wYXJhbXMuZXFfbXNnVHlwZSA9IHRoaXMubXNnVHlwZTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVNlYXJjaCgpIHsNCiAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKTsNCiAgICB9LA0KICAgIGhhbmRsZUNyZWF0ZSgpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCk7DQogICAgICB0aGlzLmZvcm0ua2V5SWQgPSB0aGlzLnBhcmFtcy5lcV9rZXlJZDsNCiAgICAgIHRoaXMuZm9ybS5sYW5ndWFnZSA9dGhpcy5wYXJhbXMuZXFfbGFuZ3VhZ2U7DQogICAgICB0aGlzLmZvcm0ubXNnVHlwZSA9IHRoaXMucGFyYW1zLmVxX21zZ1R5cGU7DQogICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICJjcmVhdGUiOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMuZm9ybSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdyk7DQogICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICJ1cGRhdGUiOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsNCiAgICAgIGRlbGV0ZVJ1bGVNZXNzYWdlSW5mb0JvbShyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KwqDCoMKgwqDCoMKgwqB2YXLCoHJ1bGVfcGFyYW3CoD3CoHsNCsKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBrZXk6wqByb3cua2V5SWQsDQrCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgdHlwZTpyb3cubXNnVHlwZQ0KwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgfTsNCsKgwqDCoMKgwqDCoMKgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJydWxlTWVzc2FnZS9kZWxldGVSdWxlTWVzc2FnZSIscnVsZV9wYXJhbSk7DQogICAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKCk7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKTsNCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICB9KTsNCiAgICB9LA0KICBhc3luYyBzdWJtaXRGb3JtKCkgew0KICAgICBpZighdGhpcy5mb3JtLmlkICYmIChhd2FpdCBjaGVja0JvbVJ1bGVNZXNzYWdlKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh0aGlzLmZvcm0pKSkuZGF0YSE9IG51bGwpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuJHQoInJ1bGVNZXNzYWdlSW5mb0JvbS5ydWxlTWVzc2FnZUluZm9Cb21NZXNzYWdlIikpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBsZXQgYmFjazsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkKSB7DQogICAgICAgICAgICBiYWNrID0gdXBkYXRlUnVsZU1lc3NhZ2VJbmZvQm9tKHRoaXMuZm9ybSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGJhY2sgPSBhZGRSdWxlTWVzc2FnZUluZm9Cb20odGhpcy5mb3JtKTsNCiAgICAgICAgICB9DQogICAgICAgICAgYmFjay50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICDCoHZhcsKgcnVsZV9wYXJhbcKgPcKgew0KwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKga2V5OnRoaXMuZm9ybS5rZXlJZCwNCsKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHR5cGU6dGhpcy5mb3JtLm1zZ1R5cGUNCsKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqB9Ow0KICAgIMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJydWxlTWVzc2FnZS91cGRhdGVSdWxlTWVzc2FnZSIscnVsZV9wYXJhbSk7DQogICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy4kYWxlcnQocmVzcG9uc2UubWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVzZXRGb3JtKCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICAgLy/ooajljZXmlbDmja7kuI7lkI7nq6/lrp7kvZPnsbvlr7nlupQNCiAgICAgICAgaWQ6ICIiLCAvL+S4u+mUrklEDQogICAgICAgIGtleUlkOiAiIiwvLw0KICAgICAgICBtc2dUeXBlOiIiLA0KICAgICAgICBsYW5ndWFnZToiIg0KICAgICAgfTsNCiAgICB9LA0KICAgIGdvQmFjaygpew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlPWZhbHNlOw0KICAgIH0sDQogICAgZ29CYWNrSW5mbygpew0KICAgICAgIC8v6Lez6L2s5Yiw54i26aG16Z2iDQogICAgICAgY2xvc2VWaXNpdFRhZygpOw0KICAgICAgIGNvbnNvbGUubG9nKCJwYXJlbnRQYWdlIix0aGlzLnBhcmVudFBhZ2UpOw0KICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOnRoaXMucGFyZW50UGFnZX0pOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ibrms/objectManagement/ruleMessageInfoBom","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-filter-wraper>\r\n        <el-form style=\"margin: 20px 0 0 0\" label-width=\"auto\">\r\n          <el-row  :gutter=\"10\">\r\n            <cus-col  :span=\"7\">\r\n              <el-form-item :label=\"$t('ruleMessageInfoBom.keyId')\" prop>\r\n                <el-input placeholder clearable v-model=\"params.eq_keyId\" :disabled=\"true\"></el-input>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <cus-col  :span=\"7\">\r\n              <el-form-item :label=\"$t('ruleMessageInfoBom.language')\" prop>\r\n                <cus-select :codetype=\"'language'\" placeholder v-model=\"params.eq_language\"></cus-select>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <cus-col :span=\"7\">\r\n              <el-form-item :label=\"$t('ruleMessageInfoBom.msgType')\" prop>\r\n                <cus-select :codetype=\"'msgtype'\" placeholder v-model=\"params.eq_msgType\" :disabled=\"true\"></cus-select>\r\n              </el-form-item>\r\n            </cus-col>\r\n          </el-row>\r\n        <el-row :gutter=\"10\">\r\n         <cus-col :span=\"21\">\r\n          <div style=\"float: right;\">\r\n          <el-button  size=\"mini\"\r\n            v-waves\r\n            type=\"primary\"\r\n            @click=\"handleSearch\"\r\n            class=\"filter-button\"\r\n            icon=\"el-icon-search\"\r\n          >\r\n            {{\r\n            $t('ruleMessageInfoBom.search') }}\r\n          </el-button>\r\n          <el-button  size=\"mini\"\r\n            v-waves\r\n            type=\"primary\"\r\n            @click=\"handleCreate\"\r\n            icon=\"el-icon-plus\"\r\n            class=\"filter-button\"\r\n          >\r\n            {{\r\n            $t('ruleMessageInfoBom.add') }}\r\n          </el-button>\r\n        </div>\r\n         </cus-col>\r\n        </el-row>\r\n      </el-form>\r\n    </cus-filter-wraper>\r\n    <cus-table-title :label=\"$t('route.multilingual_information')\"></cus-table-title>\r\n    <el-table\r\n      :data=\"configs\"\r\n      size=\"mini\"\r\n      fit\r\n      element-loading-text=\"Loading\"\r\n      border\r\n      highlight-current-row\r\n      align=\"center\"\r\n      class=\"wraper-table\"\r\n    >\r\n      <el-table-column :label=\"$t('table.id')\" prop=\"id\" align=\"center\" sortable type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('ruleMessageInfoBom.language')\" prop=\"language\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('ruleMessageInfoBom.msgType')\" prop=\"msgType\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('ruleMessageInfoBom.msg')\" prop=\"msg\" align=\"center\"></el-table-column>\r\n      <el-table-column align=\"center\" :label=\"$t('table.actions')\" fixed=\"right\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleUpdate(scope.row)\"\r\n            class=\"filter-button\"\r\n            icon=\"el-icon-edit\"\r\n          ></el-button>\r\n          <cus-del-btn @ok=\"handleDelete(scope.row)\"  style=\"margin-left: 5px;\"/>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination\r\n      ref=\"page\"\r\n      url=\"/rule-message-info-bom/list\"\r\n      :pageSize=\"10\"\r\n      :params=\"params\"\r\n      v-model=\"configs\"\r\n    />\r\n    <!---新增修改dialog---->\r\n    <el-dialog\r\n      :visible.sync=\"dialogVisible\"\r\n      @close=\"dialogVisible=false\"\r\n      append-to-body\r\n      v-dialog-drag width=\"40%\"\r\n    >\r\n      <cus-page-title-back @backTo=\"goBack\" :isDialog=\"true\" :label=\"titleMap[dialogStatus]\"/>\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-position=\"right\"\r\n        label-width=\"150px\"\r\n      >\r\n     <el-row :gutter=\"10\">\r\n       <cus-col :span=\"15\">\r\n        <el-form-item :label=\"$t('ruleMessageInfoBom.language')+':'\" prop=\"language\">\r\n          <cus-select :codetype=\"'language'\" placeholder v-model=\"form.language\"></cus-select>\r\n        </el-form-item>\r\n       </cus-col>\r\n      </el-row>\r\n      <el-row :gutter=\"10\">\r\n        <cus-col :span=\"15\">\r\n          <el-form-item :label=\"$t('ruleMessageInfoBom.msgType')+':'\" prop=\"msgtype\" >\r\n            <cus-select :codetype=\"'msgtype'\" placeholder v-model=\"form.msgType\" :disabled=\"true\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </el-row>\r\n      <el-row :gutter=\"10\">\r\n       <cus-col :span=\"15\">\r\n        <el-form-item :label=\"$t('ruleMessageInfoBom.msg')+':'\" prop=\"msg\">\r\n          <el-input\r\n            :placeholder=\"$t('ruleMessageInfoBom.msg') \"\r\n            :rows=\"5\"\r\n            type=\"textarea\"\r\n            v-model=\"form.msg\"\r\n          />\r\n        </el-form-item>\r\n       </cus-col>\r\n      </el-row>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button  size=\"mini\"\r\n          type=\"primary\"\r\n          @click=\"submitForm\"\r\n        ><i class=\"el-icon-success el-icon--left\"></i>{{ $t('table.save') }}</el-button>\r\n         <el-button  size=\"mini\"\r\n          @click=\"resetForm('dataForm')\"\r\n          type=\"warning\"\r\n        ><i class=\"el-icon-refresh el-icon--left\"></i>{{$t('table.refresh')}}</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  addRuleMessageInfoBom,\r\n  deleteRuleMessageInfoBom,\r\n  updateRuleMessageInfoBom,\r\n  checkBomRuleMessage\r\n} from \"@/api/ibrms/ruleMessageInfoBom\";\r\nimport { closeVisitTag } from \"@/utils/tagsView\";\r\nexport default {\r\n  name: \"ruleMessageInfoBom\",\r\n  data() {\r\n    return {\r\n      //表格数据\r\n      configs: [],\r\n      //查询参数\r\n      params: {\r\n        like_msg: \"\",\r\n        eq_language: \"\",\r\n        eq_msgType: \"\",\r\n        eq_keyId: \"\"\r\n      },\r\n      form: {\r\n        //表单数据与后端实体类对应\r\n        id: \"\", //主键ID\r\n        keyId: \"\",//\r\n        msgType:\"\",\r\n        language:\"\"\r\n      },\r\n      //检验规则\r\n      rules: {\r\n        msg: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"ruleMessageInfoBom.msgMessage\"),\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        language: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"ruleMessageInfoBom.languageMessage\"),\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      },\r\n      dialogVisible: false, //dialog显示还是隐藏\r\n      dialogStatus: \"\", //表单状态是新增还是修改\r\n      titleMap: {\r\n        update: this.$t(\"ruleMessageInfoBom.update\"),\r\n        create: this.$t(\"ruleMessageInfoBom.add\")\r\n      },\r\n      parentPage:\"\"\r\n    };\r\n  },\r\n  props: [\"keyId\", \"msgType\",\"state\"],\r\n  watch: {\r\n        state(newVal){\r\n              this.$refs.page.reload();\r\n        },\r\n        keyId(newVal){\r\n             this.params.eq_keyId = newVal;\r\n             this.$refs.page.reload();\r\n        },\r\n        msgType(newVal){\r\n            this.params.eq_msgType = newVal;\r\n            this.$refs.page.reload();\r\n        }\r\n\r\n    },\r\n  computed: {},\r\n  created() {\r\n    this.params.eq_keyId = this.keyId;\r\n    this.params.eq_msgType = this.msgType;\r\n  },\r\n  methods: {\r\n    handleSearch() {\r\n      this.$refs.page.reload();\r\n    },\r\n    handleCreate() {\r\n      this.resetForm();\r\n      this.form.keyId = this.params.eq_keyId;\r\n      this.form.language =this.params.eq_language;\r\n      this.form.msgType = this.params.eq_msgType;\r\n      this.dialogStatus = \"create\";\r\n      this.dialogVisible = true;\r\n    },\r\n    handleUpdate(row) {\r\n      this.form = Object.assign({}, row);\r\n      this.dialogStatus = \"update\";\r\n      this.dialogVisible = true;\r\n    },\r\n    handleDelete(row) {\r\n      deleteRuleMessageInfoBom(row.id).then(response => {\r\n       var rule_param = {\r\n                          key: row.keyId,\r\n                          type:row.msgType\r\n                        };\r\n        this.$store.dispatch(\"ruleMessage/deleteRuleMessage\",rule_param);\r\n        this.handleSearch();\r\n        this.notifySuccess(response.message);\r\n        this.dialogVisible = false;\r\n      });\r\n    },\r\n  async submitForm() {\r\n     if(!this.form.id && (await checkBomRuleMessage(this.buildRequestData(this.form))).data!= null){\r\n                    this.$message.error(this.$t(\"ruleMessageInfoBom.ruleMessageInfoBomMessage\"));\r\n                    return false;\r\n        }\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n          let back;\r\n          if (this.form.id) {\r\n            back = updateRuleMessageInfoBom(this.form);\r\n          } else {\r\n            back = addRuleMessageInfoBom(this.form);\r\n          }\r\n          back.then(response => {\r\n            if (response.code == 200) {\r\n                this.$refs.page.reload();\r\n                 var rule_param = {\r\n                              key:this.form.keyId,\r\n                              type:this.form.msgType\r\n                             };\r\n                this.$store.dispatch(\"ruleMessage/updateRuleMessage\",rule_param);\r\n                this.notifySuccess(response.message);\r\n                this.dialogVisible = false;\r\n            } else {\r\n              this.$alert(response.message);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n         //表单数据与后端实体类对应\r\n        id: \"\", //主键ID\r\n        keyId: \"\",//\r\n        msgType:\"\",\r\n        language:\"\"\r\n      };\r\n    },\r\n    goBack(){\r\n      this.dialogVisible=false;\r\n    },\r\n    goBackInfo(){\r\n       //跳转到父页面\r\n       closeVisitTag();\r\n       console.log(\"parentPage\",this.parentPage);\r\n       this.$router.push({name:this.parentPage});\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-modal{\r\n  z-index: 2000;\r\n}\r\n</style>\r\n"]}]}