{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\basicinfo\\obperiod-deductible-limit\\deductible\\clm-deductible\\index.vue?vue&type=style&index=0&id=7636ff4b&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\basicinfo\\obperiod-deductible-limit\\deductible\\clm-deductible\\index.vue","mtime":1609847106546},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5kaXZpZGVyIHsNCiAgY29sb3I6IGJsYWNrOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsNCiAgd2lkdGg6IDFweDsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAs/BA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/basicinfo/obperiod-deductible-limit/deductible/clm-deductible","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <!-- <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-button size=\"small\" type=\"text\" @click=\"backToMenu\"><i class=\"el-icon-back\"></i>{{ \"返回\" }}</el-button>\r\n        <label style=\"font-size:14px\"> 赔付免赔额定义</label>\r\n      </el-col>\r\n    </el-row>\r\n    <hr/> -->\r\n    <cus-page-title-back :isDialog=\"true\" :label=\"$t('pdtempPdMedFeeBill.clmDeductibleDef')\" @backTo=\"backToMenu\"></cus-page-title-back>\r\n\r\n    <br/>\r\n    <el-form ref=\"bnftForm\" :model=\"bnftForm\" label-width=\"120px\" style=\"width:98%;\">\r\n      <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.guaranteeItem')\">\r\n            <el-select v-model=\"bnftForm1.pdBnftCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable disabled\r\n                       filterable>\r\n              <el-option v-for=\"item in bnftOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" disabled>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.pdClmbnft')\">\r\n            <el-select v-model=\"configsForm.pdClmBnftCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable disabled\r\n                       filterable>\r\n              <el-option v-for=\"item in ClmBnftOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n        </el-col>\r\n      </el-row>\r\n      <br/>\r\n      <cus-table-title :label=\"$t('pdtempPdMedFeeBill.bnftBeductible')\"></cus-table-title>\r\n      <el-table ref=\"periodTable\" :data=\"periodConfigs\" align=\"center\" border class=\"wraper-table\"\r\n                element-loading-text=\"Loading\" fit highlight-current-row max-height=\"300px\" size=\"mini\"\r\n                @row-click=\"chooseone2\">\r\n        <el-table-column :label=\"$t('pdtempPdBnft.choose')\" width=\"55\">\r\n          <template slot-scope=\"scope\">\r\n            <el-radio v-model=\"radio2\" :label=\"scope.row.id\">\r\n              <span class=\"el-radio__label\"></span>\r\n            </el-radio>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" align=\"center\"\r\n                         prop=\"pdBnftCtrlLimLevel\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdBnftCtrlLimLevel | filter_pdBnftCtrlLimLevel }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.pdBnftCtrlLimCode')\" align=\"center\"\r\n                         prop=\"pdBnftCtrlLimCode\">\r\n          <!-- <template v-slot=\"scope\">\r\n                  <span>{{\r\n                      _.map(scope.row.pdtempClmCtrlLimRelaVoList, item => {\r\n                        return item.pdBnftCtrlConCode + ':' + item.pdBnftCtrlConName\r\n                      }).join(', ')\r\n                    }}</span>\r\n          </template> -->\r\n          <template slot-scope=\"scope\">\r\n            <el-table border :data='scope.row.pdtempClmCtrlLimRelaVoList' fit size=\"mini\" style=\"width: 100%\" :show-header=\"false\" >\r\n              <el-table-column prop='pdBnftCtrlConCode' >\r\n                <template slot-scope=\"prop\">\r\n                  {{prop.row.pdBnftCtrlConCode}}:{{prop.row.pdBnftCtrlConName}}\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftCumType')\" prop=\"pdBnftCumType\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdBnftCumType | filter_pdBnftCumType }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftCumPeriod')\" prop=\"pdBnftCumFrequency\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdBnftCumFrequency | filter_pdBnftCumFrequency }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdBeduType')\" prop=\"pdBnftFactorType\">\r\n          <template v-slot=\"scope\">{{ scope.row.pdBnftFactorType | filter_pdBnftFactorType }}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdBedu')\" prop=\"pdBnftFactorValue\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('pdtempPdMedFeeBill.deductionCalc')\" prop=\"pdBnftFactorValueCalCode\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('table.actions')\" width=\"60px\">\r\n          <template slot-scope=\"scope\">\r\n            <cus-del-btn icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" @ok=\"deleteBnftForm(scope.row)\"></cus-del-btn>\r\n          </template>\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n      <cus-pagination ref=\"page_D\" v-model=\"periodConfigs\" :pageSize=\"5\" :params=\"params\"\r\n                      url=\"/product-compensation/base/pagePdtempClmCtrlLimVo1\"/>\r\n      <br/>\r\n      <div>\r\n        <el-button size=\"small\" type=\"text\" @click=\"isShowQuick\" dialog-disable=\"disable\">\r\n          {{$t('i18nView.pdDeduction_quick_def')}}\r\n          <i :class=\"quickicon\"></i>\r\n        </el-button>\r\n      </div>\r\n      <div v-if=\"quickshow\" style=\"width: 90%;margin: 10px auto\">\r\n        <el-form ref=\"searchForm\" :model=\"searchForm\" label-width=\"120px\" style=\"width:98%;\">\r\n          <el-row :gutter=\"10\" class=\"row-bg\" justify=\"left\" type=\"flex\">\r\n            <el-col :span=\"8\">\r\n              <el-form-item :label=\"$t('rule.productDetailType')\">\r\n                <cus-select v-model=\"searchForm.productDetailType\" :codetype=\"'ProductCategory'\"\r\n                            @change=\"productDetailTypeChanged\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item :label=\"$t('rule.product')\">\r\n                <el-select v-model=\"searchForm.pdInfoId\" clearable filterable>\r\n                  <el-option v-for=\"item in productsInQuick\" :key=\"item.id\"\r\n                             :label=\"item.pdCode + ':' + item.pdName\" :value=\"item.id\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n            <el-col v-show=\"!configsForm.pdClmBnftCode\" :span=\"8\">\r\n              <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" prop=\"pdBnftCtrlLimLevel\">\r\n                <cus-select v-model=\"searchForm.pdBnftCtrlLimLevel\" :codetype=\"'pdBnftRuleLimitLevel1'\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col v-show=\"configsForm.pdClmBnftCode\" :span=\"8\">\r\n              <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" prop=\"pdBnftCtrlLimLevel\">\r\n                <cus-select v-model=\"searchForm.pdBnftCtrlLimLevel1\" :codetype=\"'pdBnftRuleLimitLevel3'\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item :label=\"$t('i18nView.pdBeduType')\" prop=\"pdBnftFactorType\">\r\n                <cus-select v-model=\"searchForm.pdBnftFactorType\" :codetype=\"'pdBnftFactorType'\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item align=\"right\">\r\n            <el-button icon=\"el-icon-search\" size=\"small\" type=\"primary\" @click=\"formInQuick\">\r\n              {{ $t('pdtempPdBnft.search') }}\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <cus-table-title :label=\"$t('i18nView.pdBeduItem')\"></cus-table-title>\r\n        <el-table ref=\"periodTable\" :data=\"searchConfigs\" align=\"center\" border class=\"wraper-table\"\r\n                  element-loading-text=\"Loading\" fit highlight-current-row max-height=\"300px\" size=\"mini\"\r\n                  @row-click=\"chooseone1\">\r\n          <el-table-column :label=\"$t('pdtempPdBnft.choose')\" width=\"55\">\r\n            <template slot-scope=\"scope\">\r\n              <el-radio v-model=\"radio1\" :label=\"scope.row.id\">\r\n                <span class=\"el-radio__label\"></span>\r\n              </el-radio>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n          <el-table-column :label=\"$t('pdtempPdBnft.desc')\" align=\"center\" prop type=\"expand\" width=\"60\">\r\n            <template slot-scope=\"props\">\r\n              <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n                <el-form-item :label=\"$t('i18nView.pdCode')\">\r\n                  <span>{{ props.row.pdCode }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('i18nView.pdName')\">\r\n                  <span>{{ props.row.pdName }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('customComponents.pdEdition')\">\r\n                  <span>{{ props.row.pdEdition }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimLevel')\">\r\n                  <span>{{ props.row.pdBnftCtrlLimLevel | filter_pdBnftCtrlLimLevel }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('i18nView.pdBnftCumType')\">\r\n                  <span>{{ props.row.pdBnftCumType }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('i18nView.pdBeduType')\">\r\n                  <span>{{ props.row.pdBnftFactorType }}</span>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('pdtempPdMedFeeBill.defaultFlag')\">\r\n                  <span>{{ props.row.pdBnftFactorValueCalCode1 }}</span>\r\n                </el-form-item>\r\n              </el-form>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('i18nView.pdCode')\" prop=\"pdCode\"></el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('i18nView.pdName')\" prop=\"pdName\"></el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('customComponents.pdEdition')\" prop=\"pdEdition\"></el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" prop=\"pdBnftCtrlLimLevel\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdBnftCtrlLimLevel | filter_pdBnftCtrlLimLevel }}</template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('i18nView.pdBnftCtrlLimCode')\" align=\"center\"\r\n                           prop=\"pdBnftCtrlLimCode\">\r\n            <template v-slot=\"scope\">\r\n                  <span>{{\r\n                      _.map(scope.row.pdtempClmCtrlLimRelaVoList, item => {\r\n                        return item.pdBnftCtrlConCode + ':' + item.pdBnftCtrlConName\r\n                      }).join(', ')\r\n                    }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftCumType')\" prop=\"pdBnftCumType\"></el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('i18nView.pdBeduType')\" prop=\"pdBnftFactorType\"></el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('pdtempPdMedFeeBill.defaultFlag')\" prop=\"pdBnftFactorValueCalCode1\"></el-table-column>\r\n          <el-table-column align=\"center\" :label=\"$t('table.actions')\" width=\"60px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button icon=\"el-icon-success\" size=\"mini\" type=\"primary\" @click=\"connDeductible(scope.row)\">\r\n                {{$t('i18nView.copy')}}\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <cus-pagination ref=\"page_D_quick\" v-model=\"searchConfigs\" :pageSize=\"5\" :params=\"quickParams\"\r\n                        url=\"/product-compensation/base/pagePdtempClmCtrlLimVoInQuick1\"/>\r\n      </div>\r\n      <br/>\r\n      <cus-form-title :label=\"$t('i18nView.deductibleExcessDefinition')\"></cus-form-title>\r\n      <el-row >\r\n        <el-col v-if=\"!configsForm.pdClmBnftCode\" :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" prop=\"pdBnftCtrlLimLevel\">\r\n            <cus-select v-model=\"bnftForm.pdBnftCtrlLimLevel\" :codetype=\"'pdBnftRuleLimitLevel1'\"\r\n                        @change=\"cleanPdBnftCtrlLimLevel\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-if=\"configsForm.pdClmBnftCode\" :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" prop=\"pdBnftCtrlLimLevel\">\r\n            <cus-select v-model=\"bnftForm.pdBnftCtrlLimLevel1\" :codetype=\"'pdBnftRuleLimitLevel3'\"\r\n                        @change=\"cleanPdBnftCtrlLimLevel\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-show=\"bnftForm.pdBnftCtrlLimLevel==='5' && !configsForm.pdClmBnftCode\" :span=\"7\">\r\n          <el-form-item :label=\"$t('pdClaimVerificationRules.pdBnftFactorLimType')\">\r\n            <el-select v-model=\"bnftForm.pdtempPdBnft\" :disabled=\"!!bnftForm1.pdBnftCode\" multiple clearable filterable value-key=\"id\">\r\n              <el-option v-for=\"item in pdBnftOptions\"\r\n                         :key=\"item.id\"\r\n                         :label=\"item.pdBnftCode+':'+item.pdBnftName\"\r\n                         :value=\"item\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <cus-col v-show=\"bnftForm.pdBnftCtrlLimLevel==='6' && !configsForm.pdClmBnftCode && !bnftForm1.pdBnftCode\" :span=\"7\">\r\n          <el-form-item :label=\"$t('pdtempPdMedFeeBill.conBnft')\">\r\n              <el-select v-model=\"bnftForm.pdtempPdBnft\" clearable filterable multiple\r\n                         value-key=\"id\">\r\n                <el-option v-for=\"PdBnftitem in conBnftOptions\"\r\n                           :key=\"PdBnftitem.id\"\r\n                           :label=\"PdBnftitem.pdBnftCode+':'+PdBnftitem.pdBnftName\"\r\n                           :value=\"PdBnftitem\">\r\n                </el-option>\r\n              </el-select>\r\n              <!-- <el-button size=\"small\" type=\"text\" @click=\"openChooseDialog\">{{ '更多>>' }}</el-button> -->\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col v-show=\"bnftForm.pdBnftCtrlLimLevel==='6' && !configsForm.pdClmBnftCode\"  :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdBnftCtrlConCode')\" prop=\"pdBnftCtrlConCode\">\r\n            <el-select v-model=\"bnftForm.pdtempPdBnftList\" clearable disabled filterable multiple\r\n                       value-key=\"id\">\r\n              <el-option v-for=\"PdBnftitem in pdBnftList\"\r\n                          :key=\"PdBnftitem.id\"\r\n                         :label=\"PdBnftitem.pdBnftCode+':'+PdBnftitem.pdBnftName\"\r\n                         :value=\"PdBnftitem\">\r\n              </el-option>\r\n            </el-select>\r\n            <!-- <el-button size=\"small\" type=\"text\" @click=\"openChooseDialog\">{{ '更多>>' }}</el-button> -->\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-btn-wrapper  v-show=\"bnftForm.pdBnftCtrlLimLevel==='6' && !configsForm.pdClmBnftCode\">\r\n          <el-button size=\"small\" type=\"text\" @click=\"openChooseDialog\">{{$t('i18nView.more')}}</el-button>\r\n        </cus-btn-wrapper>\r\n        <el-col v-show=\"bnftForm.pdBnftCtrlLimLevel1==='13' && configsForm.pdClmBnftCode\" :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.bnftinfo')\">\r\n            <el-col>\r\n              <el-select v-model=\"bnftForm.pdClmBnftCode\" :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable disabled\r\n                         filterable>\r\n                <el-option v-for=\"item in ClmBnft\"\r\n                           :key=\"item.id\"\r\n                           :label=\"item.pdClmBnftCode+':'+item.pdClmBnftName\"\r\n                           :value=\"item\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-col>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col v-if=\"bnftForm.pdBnftCtrlLimLevel1==='14' && configsForm.pdClmBnftCode\" :span=\"7\">\r\n            <el-form-item :label=\"$t('i18nView.AssociatedGuaranteeDetails')\" prop=\"pdBnftCtrlConCode\">\r\n              <el-select v-model=\"bnftForm.pdBnftCtrlConCodeList\"\r\n                         :placeholder=\"$t('pdtempPdBnft.pleaseChoose')\" clearable disabled\r\n                         filterable multiple value-key=\"id\">\r\n                <el-option v-for=\"item in ClmBnftList\"\r\n                           :key=\"item.id\"\r\n                           :label=\"item.pdClmBnftCode+':'+item.pdClmBnftName\"\r\n                           :value=\"item\">\r\n                </el-option>\r\n              </el-select>\r\n              <!-- <el-button size=\"small\" type=\"text\" @click=\"openChooseDialog1\">{{ '更多>>' }}</el-button> -->\r\n            </el-form-item>\r\n        </el-col>\r\n        <cus-btn-wrapper  v-if=\"bnftForm.pdBnftCtrlLimLevel1==='14' && configsForm.pdClmBnftCode\">\r\n          <el-button size=\"small\" type=\"text\" @click=\"openChooseDialog1\">{{$t('i18nView.more')}}</el-button>\r\n        </cus-btn-wrapper>\r\n        <el-col :span=\"10\" v-if=\"bnftForm1.pdBnftCode||bnftForm.pdBnftCtrlLimLevel!=='6'\"></el-col>\r\n        <el-col :span=\"3\" v-if=\"!bnftForm1.pdBnftCode&&bnftForm.pdBnftCtrlLimLevel==='6'\"></el-col>\r\n      </el-row>\r\n      <cus-row >\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdBnftCumType')\" prop=\"pdBnftCumType\">\r\n            <cus-radio v-model=\"bnftForm.pdBnftCumType\" :codetype=\"'pdBnftCumType'\"\r\n                       @change=\"cleanPdBnftCumFrequency\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdBnftCumPeriod')\" prop=\"pdBnftCumFrequency\">\r\n            <cus-radio v-model=\"bnftForm.pdBnftCumFrequency\" :codetype=\"'pdBnftCumFrequency'\"\r\n                       :disabled=\"bnftForm.pdBnftCumType==1\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"10\">\r\n          <el-form-item :label=\"$t('i18nView.pdBeduType')\" prop=\"pdBnftFactorType\">\r\n            <cus-radio v-model=\"bnftForm.pdBnftFactorType\" :codetype=\"'pdBnftFactorType'\"\r\n                        :changeMethod=\"clearInput\"></cus-radio>\r\n          </el-form-item>\r\n        </el-col>\r\n      </cus-row>\r\n      <cus-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdBeduFee')\" prop=\"pdBnftFactorValue\">\r\n            <el-input v-model=\"bnftForm.pdBnftFactorValue\" :disabled=\"bnftForm.pdBnftFactorType!=1\"\r\n                      @input=\"onInput()\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('i18nView.pdRatio')\" prop=\"pdBnftFactorValue2\">\r\n            <el-input v-model=\"bnftForm.pdBnftFactorValue2\" :disabled=\"bnftForm.pdBnftFactorType!=2\" @input=\"onInput()\">\r\n              <template slot=\"suffix\">%</template>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n\r\n        </el-col>\r\n        <el-col :span=\"3\"></el-col>\r\n      </cus-row>\r\n      <el-form-item align=\"right\">\r\n        <el-button v-if=\"!radio2\" icon=\"el-icon-success\" size=\"small\" type=\"primary\" @click=\"saveBnftForm('D')\" dialog-disable=\"disable\">\r\n          {{$t('table.save')}}\r\n        </el-button>\r\n        <el-button v-if=\"radio2\" icon=\"el-icon-success\" size=\"small\" type=\"primary\" @click=\"updateBnftForm('D')\" dialog-disable=\"disable\">\r\n          {{$t('table.update')}}\r\n        </el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"cleanBnftForm\" dialog-disable=\"disable\">\r\n          {{$t('table.refresh')}}\r\n        </el-button>\r\n      </el-form-item>\r\n      <div v-if=\"bnftForm.pdBnftFactorType=='3'\">\r\n        <cus-form-title :label=\"$t('i18nView.deductionCustom')\"></cus-form-title>\r\n        <cus-row>\r\n          <el-col :span=\"7\">\r\n            <el-form-item :label=\"$t('i18nView.deductionCalc')\">\r\n              <el-input v-model=\"bnftForm.pdBnftFactorValueCalCode\" readonly>\r\n                <svg-icon slot=\"suffix\" icon-class=\"calc\" style=\"color: #606266;font-size: 18px;cursor: pointer\"\r\n                          @click=\"toFormula\"/>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"17\">\r\n          </el-col>\r\n        </cus-row>\r\n      </div>\r\n    </el-form>\r\n    <el-dialog v-dialog-drag :close-on-click-modal=\"false\" :visible.sync=\"showConnTable\" append-to-body center\r\n               top=\"8vh\" width=\"1200px\">\r\n      <el-table ref=\"connTable\" :data=\"connTableConfigs\" align=\"center\" border class=\"wraper-table\" element-loading-text=\"Loading\"\r\n                fit highlight-current-row max-height=\"300px\" size=\"mini\">\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdCode')\" prop=\"pdCode\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.pdName')\" prop=\"pdName\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('customComponents.pdEdition')\" prop=\"pdEdition\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('pdtempPdMedFeeBill.pdBnftType')\" prop=\"pdBnftType\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('i18nView.guaranteeCode')\" prop=\"pdBnftCode\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('pdtempPdMedFeeBill.pdBnftName')\" prop=\"pdBnftName\"></el-table-column>\r\n        <el-table-column align=\"center\" :label=\"$t('pdtempPdMedFeeBill.bnftDtName')\" prop=\"pdClmBnftName\"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n\r\n    <!-- 弹窗（已关联公式列表） -->\r\n    <el-dialog v-if=\"formulaVisible\" v-dialog-drag :close-on-click-modal=\"false\" :visible.sync=\"formulaVisible\"\r\n               append-to-body center width=\"80%\">\r\n      <clmCtrlFormula :pdBussDetailType=\"pdBussDetailType\" :pdtempClmCtrlMain=\"selectedClmCtrl\"\r\n                      :pdtempPdBnft=\"bnftForm1\" :pdtempPdClmBnft=\"configsForm\" @bringInCalcCode=\"bringInCalcCode\"\r\n                      @changeDialogVisible_ClmCtrlFormula=\"changeDialogVisible_ClmCtrlFormula\"\r\n                      @changeDialogVisible_ClmCtrlFormulaSelect=\"changeDialogVisible_ClmCtrlFormulaSelect\"></clmCtrlFormula>\r\n    </el-dialog>\r\n\r\n    <!-- 弹窗（公式关联） -->\r\n    <el-dialog v-if=\"formulaSelectVisible\" v-dialog-drag :close-on-click-modal=\"false\" \r\n               :visible.sync=\"formulaSelectVisible\" append-to-body center width=\"70%\">\r\n      <clmCtrlFormulaSelect :pdBussDetailType=\"pdBussDetailType\" :pdtempClmCtrlMain=\"selectedClmCtrl\"\r\n                            :pdtempPdBnft=\"bnftForm1\" :pdtempPdClmBnft=\"configsForm\" @bringInCalcCode=\"bringInCalcCode\"\r\n                            @changeDialogVisible_ClmCtrlFormulaSelect=\"changeDialogVisible_ClmCtrlFormulaSelect\"></clmCtrlFormulaSelect>\r\n    </el-dialog>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nlet _this;\r\nimport {\r\n  deleteObBnftForm,\r\n  findBnftOptions,\r\n  findBusinessItemByCtrlCode1,\r\n  findClmBnftOptions,\r\n  linkConnTable,\r\n  savePdtempClmCtrlLim,\r\n  searchperiodConfigs,\r\n  selectbnftCode,\r\n  selectbnftinfoCode,\r\n} from \"@/api/basicinfo/pdtemppdclmbnft\";\r\nimport {findReferenceProducts} from \"@/api/basicinfo/pdtemppdbnft\";\r\nimport {pdtempPdClsLabList} from \"@/api/basicinfo/ProductAttributeDefinition\";\r\nimport clmCtrlFormula from \"@/views/basicinfo/clm-formula/clmCtrlFormula/index\";\r\nimport clmCtrlFormulaSelect from \"@/views/basicinfo/clm-formula/clmCtrlFormulaSelect/index\";\r\nimport {findProductByDetailType, saveInQuick1} from '@/api/basicinfo/productCompensation';\r\n\r\n\r\nexport default {\r\n  name: \"pdtemppdobperiod\",\r\n  components: {clmCtrlFormula, clmCtrlFormulaSelect},\r\n  filters: {\r\n    filter_pdBnftCtrlLimLevel(code) {\r\n      return _this.getCodeName('limitlevel', code);\r\n    },\r\n    filter_pdBnftFactorType(code) {\r\n      return _this.getCodeName(\"pdBnftFactorType\", code);\r\n    },\r\n    filter_pdBnftCumType(code) {\r\n      return _this.getCodeName(\"pdBnftCumType\", code);\r\n    },\r\n    filter_pdBnftCumFrequency(code) {\r\n      return _this.getCodeName(\"pdBnftCumFrequency\", code);\r\n    },\r\n  },\r\n  props: {\r\n    moreType: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    bnftForm1: {\r\n      type: Object,\r\n      default: {},\r\n    },\r\n    configsForm: {\r\n      type: Object,\r\n      default: {},\r\n    },\r\n    pdBnftArr: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    pdClmBnftArr: {\r\n      type: Array,\r\n      default: [],\r\n    },\r\n    showDeductible: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    _this = this;\r\n    return {\r\n      quickParams: {\r\n        pdBnftCtrlLimLevel: '',\r\n        pdBnftCtrlLimLevel1: '',\r\n        pdBnftFactorType: '',\r\n        pdInfoId: undefined,\r\n        pdBnftCtrlLimLevelList: '',\r\n        pdBnftCtrlType: 'D',\r\n        productDetailType: '',\r\n      },\r\n      productsInQuick: [],\r\n      pdBnftList: [],\r\n      ClmBnft: [],\r\n      ClmBnftList: [],\r\n      pdBnftOptions: [],\r\n      params: {\r\n        pdBnftCode: this.bnftForm1.pdBnftCode,\r\n        pdBnftCtrlType: 'D',\r\n        pdBnftCtrlLimLevelList: null,\r\n        pdClmBnftCode: this.configsForm.pdClmBnftCode,\r\n        pdInfoId: null,\r\n      },\r\n      selectedClmCtrl: {},\r\n      pdtempPdInfo: {},\r\n      pdType: null,\r\n      radio1: null,\r\n      radio2: null,\r\n      quickicon: \"el-icon-arrow-right\",\r\n      quickshow: false,\r\n      showConnTable: false,\r\n      searchForm: {\r\n        pdBnftCtrlLimLevel: undefined,\r\n        pdBnftCtrlLimLevel1: undefined,\r\n        pdBnftFactorType: undefined,\r\n        pdBnftDetailType: undefined,\r\n        productDetailType: undefined,\r\n        pdInfoId: undefined\r\n      },\r\n      bnftForm: {\r\n        pdBnftFactorLimValue: null,\r\n        pdBnftFactorValue: null,\r\n        pdBnftCtrlLimLevel: null,\r\n        pdBnftFactorValue1: null,\r\n        pdBnftFactorValue2: null,\r\n        pdBnftFactorValue3: null,\r\n        pdBnftFactorValueUnit: null,\r\n        pdBnftCumType: null,\r\n        pdBnftCumFrequency: '2',\r\n        pdBnftCtrlConCode: [],\r\n        pdBnftCtrlLimLevel1: '',\r\n        pdClmBnftCode: '',\r\n        pdBnftFactorType: '',\r\n        pdtempPdBnft: [],\r\n        pdtempPdBnftList: [],\r\n        pdBnftCtrlConCodeList:[],\r\n      },\r\n      periodConfigs: [],\r\n      searchConfigs: [],\r\n      connTableConfigs: [],\r\n      Options: [],\r\n      bnftOptions: [],\r\n      ClmBnftOptions: [],\r\n      productOptions: [],\r\n      conBnftOptions: [],\r\n      cusObperiod: false,\r\n      pdBussDetailType: '',\r\n      formulaVisible: '',\r\n      formulaSelectVisible: ''\r\n    }\r\n  },\r\n  async created() {\r\n    if (!this.configsForm.pdClmBnftCode) {\r\n      this.params.pdBnftCtrlLimLevelList = '5'\r\n      this.quickParams.pdBnftCtrlLimLevelList = '5'\r\n      this.bnftForm.pdBnftCtrlLimLevel = '5'\r\n      this.searchForm.pdBnftCtrlLimLevel = '5'\r\n    } else {\r\n      this.params.pdBnftCtrlLimLevelList = '13'\r\n      this.quickParams.pdBnftCtrlLimLevelList = '13'\r\n      this.bnftForm.pdBnftCtrlLimLevel1 = '13'\r\n      this.searchForm.pdBnftCtrlLimLevel1 = '13'\r\n    }\r\n    this.pdtempPdInfo = this.getPdData();\r\n    this.params.pdInfoId = this.pdtempPdInfo.id\r\n    this.findbnftCode();\r\n    this.findbnftinfoCode();\r\n    await this.findTypeRegion();\r\n    this.findperiodConfigs();\r\n    this.findOptions();\r\n    this.findConBnftCode();\r\n    this.clearInput();\r\n    this.$refs.page_D.reload();\r\n\r\n  },\r\n  watch: {\r\n    showDeductible: function () {\r\n      if (this.showDeductible == true) {\r\n        this.findperiodConfigs();\r\n        this.cleanBnftForm();\r\n        this.$refs.page_D.reload();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    cleanPdBnftCumFrequency() {\r\n      this.bnftForm.pdBnftCumFrequency = null\r\n    },\r\n    onInput() {\r\n      this.$forceUpdate();\r\n    },\r\n    clearInput() {\r\n      this.bnftForm.pdBnftFactorValue = \"\",\r\n        this.bnftForm.pdBnftFactorValue2 = \"\"\r\n    },\r\n    bringInCalcCode(pdBussId, calcCode) {\r\n      for (const ob of this.periodConfigs) {\r\n        if (ob.id === Number(pdBussId)) {\r\n          this.$set(ob, 'pdBnftFactorValueCalCode', calcCode)\r\n          break\r\n        }\r\n      }\r\n      if (this.bnftForm.id === Number(pdBussId)) {\r\n        this.bnftForm.pdBnftFactorValueCalCode = calcCode\r\n      }\r\n    },\r\n    changeDialogVisible_ClmCtrlFormula(visible) {\r\n      this.formulaVisible = visible\r\n    },\r\n    changeDialogVisible_ClmCtrlFormulaSelect(visible) {\r\n      this.formulaSelectVisible = visible\r\n      if (visible === false) {\r\n        this.formulaVisible = false\r\n        this.$nextTick(() => {\r\n          this.formulaVisible = true\r\n        })\r\n      }\r\n    },\r\n    toFormula() {\r\n      if (Object.keys(this.selectedClmCtrl).length === 0) {\r\n        this.notifyError('请选择一条免赔额')\r\n        return\r\n      }\r\n      if (this.configsForm.id) {\r\n        this.pdBussDetailType = \"23\";\r\n      } else {\r\n        this.pdBussDetailType = \"64\";\r\n      }\r\n      this.formulaVisible = true\r\n    },\r\n    async findTypeRegion() {\r\n      await pdtempPdClsLabList(this.pdtempPdInfo.id).then((response) => {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (response.data[i].pdClsType === '1') {\r\n            this.pdType = response.data[i].pdCls2;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    findReferenceProducts(val) {\r\n      let data = {\r\n        page: null,\r\n        params: {\r\n          pdClsType: \"1\",\r\n          pdCls2: val,\r\n        },\r\n        limit: null,\r\n      };\r\n      findReferenceProducts(data).then((res) => {\r\n        this.productOptions = [];\r\n        this.paymentForm.product = \"\";\r\n        res.data.forEach((product) => {\r\n          if (product.id != this.pdtempPdInfo.id) {\r\n            this.productOptions.push({\r\n              value: product.id,\r\n              label: product.pdCode + \":\" + product.pdName,\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n    formSearch() {\r\n      this.searchForm.pdBnftCtrlType = \"d\";\r\n      searchperiodConfigs(this.buildRequestData(this.searchForm)).then(\r\n        (res) => {\r\n          let data = res.data;\r\n          this.searchConfigs = data;\r\n        }\r\n      );\r\n    },\r\n    linkConnTable(row) {\r\n      let data = {\r\n        pdBnftCtrlCode: row.pdBnftCtrlCode\r\n      }\r\n      linkConnTable(this.buildRequestData(data)).then(res => {\r\n        this.showConnTable = true;\r\n        this.connTableConfigs = res.data;\r\n      })\r\n    },\r\n    connDeductible(pdtempClmCtrlLimVo) {\r\n      const params = {\r\n        pdtempClmCtrlLimVo: pdtempClmCtrlLimVo,\r\n        pdBnftCode: this.bnftForm1.pdBnftCode\r\n      }\r\n      saveInQuick1(this.buildRequestData(params)).then(() => {\r\n        this.notifySuccess('复制成功')\r\n        this.$refs.page_D.reload()\r\n      })\r\n    },\r\n    findperiodConfigs() {\r\n      let data = {\r\n        pdBnftCtrlType: \"d\",\r\n      };\r\n      if (this.configsForm.pdClmBnftCode == null) {\r\n        data.pdBnftCode = this.bnftForm1.pdBnftCode;\r\n        data.pdBnftCtrlLevel = \"1\";\r\n      } else {\r\n        data.pdBnftCode = this.configsForm.pdClmBnftCode;\r\n        data.pdBnftCtrlLevel = \"2\";\r\n      }\r\n\r\n    },\r\n    isShowQuick() {\r\n      if (!this.quickshow) {\r\n        this.quickicon = \"el-icon-arrow-down\";\r\n        this.searchForm.pdBnftCtrlLimLevel1 = this.bnftForm.pdBnftCtrlLimLevel1\r\n        this.searchForm.pdBnftCtrlLimLevel = this.bnftForm.pdBnftCtrlLimLevel\r\n        this.searchForm.productDetailType = this.pdtempPdInfo.cType\r\n        this.productDetailTypeChanged(this.searchForm.productDetailType)\r\n      } else {\r\n        this.quickicon = \"el-icon-arrow-right\";\r\n      }\r\n      return (this.quickshow = !this.quickshow);\r\n    },\r\n    findOptions() {\r\n      this.ClmBnftOptions = [];\r\n      findClmBnftOptions().then((res) => {\r\n        let clmData = res.data;\r\n        clmData.forEach((data) => {\r\n          this.ClmBnftOptions.push({\r\n            value: data.pdClmBnftCode,\r\n            label: data.pdClmBnftCode + \":\" + data.pdClmBnftName,\r\n          });\r\n        });\r\n      });\r\n      this.bnftOptions = [];\r\n      findBnftOptions().then((res) => {\r\n        let bnftData = res.data;\r\n        bnftData.forEach((data) => {\r\n          this.bnftOptions.push({\r\n            value: data.pdBnftCode,\r\n            label: data.pdBnftCode + \":\" + data.pdBnftName,\r\n\r\n          });\r\n        });\r\n      });\r\n    },\r\n    chooseone1(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.radio1) {\r\n          this.radio1 = null;\r\n          this.$refs.periodTable.setCurrentRow();\r\n          this.cleanBnftForm();\r\n        } else {\r\n          this.radio1 = row.id;\r\n        }\r\n      }\r\n    },\r\n    chooseone2(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.radio2) {\r\n          this.radio2 = null;\r\n          this.selectedClmCtrl = {}\r\n          this.bnftForm.pdBnftFactorValueCalCode = ''\r\n          this.$refs.periodTable.setCurrentRow();\r\n          this.cleanBnftForm();\r\n        } else {\r\n          this.selectedClmCtrl = row\r\n          this.radio2 = row.id;\r\n          console.log(row)\r\n          this.bnftForm = JSON.parse(JSON.stringify(row));\r\n          if (this.bnftForm.pdBnftFactorType == '2') {\r\n            this.bnftForm.pdBnftFactorValue2 = this.bnftForm.pdBnftFactorValue\r\n            this.bnftForm.pdBnftFactorValue = ''\r\n          }\r\n          this.bnftForm.pdBnftCtrlConCode = [];\r\n          this.findBusinessItemByCtrlCode1();\r\n        }\r\n      }\r\n\r\n    },\r\n    findBusinessItemByCtrlCode1(){\r\n      findBusinessItemByCtrlCode1(this.bnftForm.pdBnftCtrlCode).then(response => {\r\n            switch (this.bnftForm.pdBnftCtrlLimLevel) {\r\n              case \"5\":\r\n                this.pdBnftOptions = response.data\r\n                this.bnftForm.pdtempPdBnft = response.data\r\n                break;\r\n              case \"6\":\r\n                this.bnftForm.pdtempPdBnft = [response.data[0]]\r\n                this.bnftForm.pdtempPdBnftList = response.data.slice(1,response.data.length)\r\n                this.pdBnftList = response.data\r\n                break;\r\n              case \"13\":\r\n                this.ClmBnft = response.data\r\n                this.bnftForm.pdClmBnftCode = response.data[0]\r\n                this.bnftForm.pdBnftCtrlLimLevel1 = '13'\r\n                break;\r\n              case \"14\":\r\n                this.bnftForm.pdBnftCtrlConCodeList = response.data\r\n                this.ClmBnftList = response.data\r\n                this.bnftForm.pdBnftCtrlLimLevel1 = '14'\r\n                break;\r\n              default:\r\n                break;\r\n            }\r\n          })\r\n    },\r\n    changeOption() {\r\n      this.$forceUpdate();\r\n    },\r\n    saveBnftForm(pdBnftCtrlType) {\r\n      if (!this.configsForm.pdClmBnftCode) {\r\n        if (!this.bnftForm.pdBnftCtrlLimLevel) {\r\n          this.$message.error({message: '请选择限制等级！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n        if (this.bnftForm.pdtempPdBnftList == ''&&this.bnftForm.pdBnftCtrlLimLevel==='6') {\r\n          this.$message.error({message: '关联保障不能为空，请关联保障！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n\r\n      } else {\r\n        if (!this.bnftForm.pdBnftCtrlLimLevel1) {\r\n          this.$message.error({message: '请选择限制等级！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n        if (this.bnftForm.pdBnftCtrlConCodeList == ''&&this.bnftForm.pdBnftCtrlLimLevel1==='14') {\r\n          this.$message.error({message: '关联保障明细不能为空，请关联保障明细！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n      }\r\n      if (this.bnftForm.pdBnftCumType === '1') {\r\n        this.bnftForm.pdBnftCumFrequency = null\r\n      }\r\n      this.bnftForm.pdBnftCtrlType = pdBnftCtrlType\r\n      this.bnftForm.pdBnftCtrlLevel = this.bnftForm.pdBnftCtrlLimLevel\r\n      this.bnftForm.pdBnftCtrlLevel1 = this.bnftForm.pdBnftCtrlLimLevel1\r\n      this.bnftForm.id = null\r\n      let data = {\r\n        pdgenlClmCtrlVoForCompensation: this.bnftForm,\r\n        pdBnftCode: this.bnftForm1.pdBnftCode,\r\n        pdBnftCtrlLimLevelList: this.quickParams.pdBnftCtrlLimLevelList,\r\n        pdtempPdInfo: this.pdtempPdInfo,\r\n        pdClmBnftCode: this.configsForm.pdClmBnftCode\r\n\r\n      }\r\n      savePdtempClmCtrlLim(this.buildRequestData(data)).then((res) => {\r\n        this.notifySuccess('保存成功');\r\n        return new Promise(resolve => {\r\n          this.$refs.page_D.reload().then(() => {\r\n            for (let i = 0; i < this.periodConfigs.length; i++) {\r\n              if (this.periodConfigs[i].pdBnftCtrlCode == res.data.pdBnftCtrlCode) {\r\n                // this.$refs.periodTable.setCurrentRow(this.periodConfigs[i])\r\n                this.radio2 = this.periodConfigs[i].id\r\n                this.bnftForm = Object.assign({},this.periodConfigs[i])\r\n                this.findbnftCode();\r\n                this.findbnftinfoCode();\r\n                this.findBusinessItemByCtrlCode1();\r\n              }\r\n            }\r\n          })\r\n        })\r\n\r\n      })\r\n    },\r\n    updateBnftForm(pdBnftCtrlType) {\r\n      if (!this.configsForm.pdClmBnftCode) {\r\n        if (!this.bnftForm.pdBnftCtrlLimLevel) {\r\n          this.$message.error({message: '请选择限制等级！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n        // if (!this.bnftForm.pdtempPdBnftList&&!this.bnftForm.pdtempPdBnftList.length&&this.bnftForm.pdBnftCtrlLimLevel==='6') {\r\n        //   this.$message.error({message: '关联保障不能为空，请关联保障！', type: 'warning'});\r\n\r\n        //   return\r\n        // }\r\n\r\n      } else {\r\n        if (!this.bnftForm.pdBnftCtrlLimLevel1) {\r\n          this.$message.error({message: '请选择限制等级！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n        if (!this.bnftForm.pdBnftCtrlConCodeList.length&&this.bnftForm.pdBnftCtrlLimLevel==='14') {\r\n          this.$message.error({message: '关联保障明细不能为空，请关联保障明细！', type: 'warning'});\r\n\r\n          return\r\n        }\r\n      }\r\n      if (this.bnftForm.pdBnftCumType === '1') {\r\n        this.bnftForm.pdBnftCumFrequency = null\r\n      }\r\n      this.bnftForm.pdBnftCtrlType = pdBnftCtrlType\r\n      this.bnftForm.pdBnftCtrlLevel = this.bnftForm.pdBnftCtrlLimLevel\r\n      let data = {\r\n        pdgenlClmCtrlVoForCompensation: this.bnftForm,\r\n        pdBnftCode: this.bnftForm1.pdBnftCode,\r\n        pdBnftCtrlLimLevelList: this.quickParams.pdBnftCtrlLimLevelList,\r\n        pdtempPdInfo: this.pdtempPdInfo,\r\n        pdClmBnftCode: this.configsForm.pdClmBnftCode\r\n\r\n      }\r\n      savePdtempClmCtrlLim(this.buildRequestData(data)).then((res) => {\r\n        this.notifySuccess('更新成功');\r\n        return new Promise(resolve => {\r\n          this.$refs.page_D.reload().then(() => {\r\n            console.log(res.data.pdBnftCtrlCode)\r\n            for (let i = 0; i < this.periodConfigs.length; i++) {\r\n              if (this.periodConfigs[i].pdBnftCtrlCode == res.data.pdBnftCtrlCode) {\r\n                // this.$refs.periodTable.setCurrentRow(this.periodConfigs[i])\r\n                this.radio2 = this.periodConfigs[i].id\r\n              }\r\n            }\r\n          })\r\n        })\r\n\r\n      })\r\n    },\r\n    cleanBnftForm() {\r\n      this.$refs[\"bnftForm\"].resetFields();\r\n      this.radio2 = null;\r\n      this.radio1 = null;\r\n      this.$refs.periodTable.setCurrentRow();\r\n      this.cusObperiod = false;\r\n      this.bnftForm.pdBnftCtrlLimLevel1 = '';\r\n      this.ClmBnftList = [];\r\n      this.findbnftCode();\r\n      this.findbnftinfoCode();\r\n    },\r\n    deleteBnftForm(row) {\r\n      let data = {\r\n        pdBnftCtrlCode: row.pdBnftCtrlCode,\r\n      };\r\n      deleteObBnftForm(this.buildRequestData(data)).then((res) => {\r\n        this.notifySuccess(res.message);\r\n        this.findperiodConfigs();\r\n        this.$refs.page_D.reload();\r\n        this.cleanBnftForm();\r\n      });\r\n    },\r\n    backToMenu() {\r\n      this.$emit(\"backToFeeBill\", \"bnft\");\r\n    },\r\n    openChooseDialog() {\r\n      this.$emit('showFeeBillTypeFlag', 'bnft3')\r\n    },\r\n    openChooseDialog1() {\r\n      this.$emit('showFeeBillTypeFlag', 'bnft4')\r\n    },\r\n    findbnftCode() {\r\n      let params;\r\n      if(this.bnftForm1.pdBnftCode){\r\n        params = {pdBnftCode: this.bnftForm1.pdBnftCode}\r\n      }else{\r\n        params = {pdInfoId: this.pdtempPdInfo.id}\r\n      }\r\n      selectbnftCode(this.buildRequestData(params)).then(response => {\r\n        this.pdBnftOptions = response.data\r\n        this.bnftForm.pdtempPdBnft = [];\r\n        if(this.bnftForm1.pdBnftCode){\r\n          this.bnftForm.pdtempPdBnft.push(response.data[0])\r\n        }\r\n      })\r\n    },\r\n    findConBnftCode() {\r\n      let params = {pdInfoId: this.pdtempPdInfo.id}\r\n      selectbnftCode(this.buildRequestData(params)).then(response => {\r\n        this.conBnftOptions = response.data\r\n      })\r\n    },\r\n    findbnftinfoCode() {\r\n      const params = {pdClmBnftCode: this.configsForm.pdClmBnftCode}\r\n      selectbnftinfoCode(this.buildRequestData(params)).then(response => {\r\n        this.ClmBnft = response.data\r\n        this.bnftForm.pdClmBnftCode = response.data[0]\r\n      })\r\n    },\r\n    bringSelectedPdClmBnftMoreBill(selectedItemList) {\r\n      this.bnftForm.pdtempPdBnftList = []\r\n      this.pdBnftList = []\r\n      for (const selectedItem of selectedItemList) {\r\n        this.bnftForm.pdtempPdBnftList.push(selectedItem)\r\n        this.pdBnftList.push(selectedItem)\r\n      }\r\n    },\r\n    bringSelectedPdBnftMoreBill(selectedItemList) {\r\n      this.bnftForm.pdBnftCtrlConCodeList = []\r\n      this.ClmBnftList = []\r\n      for (const selectedItem of selectedItemList) {\r\n        this.bnftForm.pdBnftCtrlConCodeList.push(selectedItem)\r\n        this.ClmBnftList.push(selectedItem)\r\n      }\r\n    },\r\n    cleanPdBnftCtrlLimLevel() {\r\n      this.pdBnftOptions = []\r\n      this.bnftForm.pdtempPdBnft = []\r\n      this.pdBnftList = []\r\n      this.bnftForm.pdtempPdBnftList = []\r\n      this.ClmBnft = []\r\n      this.bnftForm.pdClmBnftCode = undefined\r\n      this.ClmBnftList = []\r\n      this.bnftForm.pdBnftCtrlConCodeList = []\r\n      this.findbnftCode();\r\n      this.findbnftinfoCode();\r\n    },\r\n    productDetailTypeChanged(productDetailType) {\r\n      if (productDetailType) {\r\n        findProductByDetailType(productDetailType).then(response => {\r\n          this.searchForm.pdInfoId = undefined\r\n          this.productsInQuick = response.data\r\n        })\r\n      } else {\r\n        this.searchForm.pdInfoId = undefined\r\n        this.productsInQuick = []\r\n      }\r\n    },\r\n    formInQuick() {\r\n      this.quickParams.pdBnftCtrlLimLevel = this.searchForm.pdBnftCtrlLimLevel\r\n      this.quickParams.pdBnftCtrlLimLevel1 = this.searchForm.pdBnftCtrlLimLevel1\r\n      this.quickParams.pdBnftFactorType = this.searchForm.pdBnftFactorType\r\n      this.quickParams.pdInfoId = this.searchForm.pdInfoId\r\n      this.quickParams.productDetailType = this.searchForm.productDetailType\r\n      this.$refs.page_D_quick.reload()\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.divider {\r\n  color: black;\r\n  background-color: black;\r\n  width: 1px;\r\n}\r\n</style>\r\n"]}]}