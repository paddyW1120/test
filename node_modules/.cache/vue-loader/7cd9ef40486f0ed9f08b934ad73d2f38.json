{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\ruleManagement\\dynamicTableDialog\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\ruleManagement\\dynamicTableDialog\\index.vue","mtime":1609847106756},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZHluYW1pY0Zvcm1BcnJheSBmcm9tICJAL3ZpZXdzL2licm1zL3J1bGVNYW5hZ2VtZW50L2R5bmFtaWNGb3JtQXJyYXkiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJkeW5hbWljVGFibGVEaWFsb2ciLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkeW5hbWljRGF0YTogew0KICAgICAgICBpc0FycmF5OiAiIiwNCiAgICAgICAgYm9tOiB7fSwNCiAgICAgICAgYm9tSXRlbTogW10sDQogICAgICAgIGJvbUl0ZW1EYXRhOiBbXSwNCiAgICAgICAgY2hpbGQ6IFtdDQogICAgICB9LA0KICAgICAgaXRlbURhdGE6IFtdLA0KICAgICAgZHluYW1pY0RpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgYWN0aXZlTmFtZTogIiIsDQogICAgICB1cGRhdGU6IHRydWUsDQogICAgICBpbnB1dEFycmF5OiBbXSwNCiAgICAgIG1ldGhvZDogIiIsDQogICAgICBpZDogIiIsDQogICAgICB1c2VJZDogIiIsDQogICAgICBjdXJyZW50SWQ6IDANCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgZHluYW1pY0Zvcm1BcnJheQ0KICB9LA0KICBwcm9wczogWyJkRGF0YSIsICJkSWQiLCAiZE1ldGhvZCJdLA0KICBtb3VudGVkKCkgew0KICAgIDsNCiAgICB0aGlzLmR5bmFtaWNEYXRhID0gdGhpcy5kRGF0YTsNCiAgICB0aGlzLmFjdGl2ZU5hbWUgPSB0aGlzLmR5bmFtaWNEYXRhLmJvbS5uYW1lOw0KICAgIHRoaXMubWV0aG9kID0gdGhpcy5kTWV0aG9kOw0KICAgIHRoaXMuaWQgPSB0aGlzLmRJZCArICItIiArIHRoaXMuZHluYW1pY0RhdGEuYm9tLm5hbWU7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBkaXNwbGF5Q2hpbGREaWFsb2coKSB7DQogICAgICA7DQogICAgICB0aGlzLmR5bmFtaWNEaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMuaXRlbURhdGEgPSBbXTsNCiAgICAgIHRoaXMudXBkYXRlID0gZmFsc2U7DQogICAgICB0aGlzLm1ldGhvZCA9ICJpbnNlcnQiOw0KICAgICAgdGhpcy51c2VJZCA9IHRoaXMuaWQgKyAiLSIgKyB0aGlzLmN1cnJlbnRJZDsNCiAgICAgIC8v6YeN5paw5riy5p+T57uE5Lu2DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMudXBkYXRlID0gdHJ1ZTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5jdXJyZW50SWQrKzsNCiAgICB9LA0KICAgIGluc2VydEZpbHRlck1ldGhvZChyb3csIGluZGV4KSB7DQogICAgICA7DQogICAgICBpZiAocm93LnJvdy5pZC5pbmRleE9mKHRoaXMuZElkKSA9PSAtMSkgew0KICAgICAgICByZXR1cm4gImhpZGRlbi1yb3ciOw0KICAgICAgfQ0KICAgICAgcmV0dXJuICIiOw0KICAgIH0sDQogICAgaGFuZGxlVGFiQ2xpY2sodGFiLCBldmVudCkgew0KICAgICAgLy8gY29uc29sZS5sb2codGFiLCBldmVudCk7DQogICAgfSwNCiAgICBkZWxldGVJdGVtKHJvdykgew0KICAgICAgOw0KICAgICAgbGV0IHJvd0lkID0gcm93LmlkOw0KICAgICAgdGhpcy5kZWxldGVDaGlsZEVsZW1lbnQodGhpcy5keW5hbWljRGF0YSwgcm93SWQpOw0KICAgIH0sDQogICAgdXBkYXRlSXRlbShyb3cpIHsNCiAgICAgIDsNCiAgICAgIGxldCByb3dJZCA9IHJvdy5pZDsNCiAgICAgIHRoaXMuZHluYW1pY0RpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5pdGVtRGF0YSA9IHRoaXMuc2VsZWN0SXRlbURhdGFCeUlkUmV0dXJuQXJyYXkocm93SWQpOw0KICAgICAgdGhpcy51cGRhdGUgPSBmYWxzZTsNCiAgICAgIHRoaXMubWV0aG9kID0gInVwZGF0ZSI7DQogICAgICB0aGlzLnVzZUlkID0gcm93SWQ7DQoNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy51cGRhdGUgPSB0cnVlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZWxlY3RJdGVtRGF0YUJ5SWRSZXR1cm5BcnJheShyb3dJZCkgew0KICAgICAgOw0KICAgICAgbGV0IHRhcmdldERhdGEgPSB7fTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5keW5hbWljRGF0YS5ib21JdGVtRGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy5keW5hbWljRGF0YS5ib21JdGVtRGF0YVtpXS5pZCA9PT0gcm93SWQpIHsNCiAgICAgICAgICB0YXJnZXREYXRhID0gdGhpcy5keW5hbWljRGF0YS5ib21JdGVtRGF0YVtpXTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbGV0IGFyciA9IFtdOw0KICAgICAgZm9yIChsZXQga2V5IGluIHRhcmdldERhdGEpIHsNCiAgICAgICAgYXJyLnB1c2godGFyZ2V0RGF0YVtrZXldKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBhcnI7DQogICAgfSwNCiAgICBkZWxldGVDaGlsZEVsZW1lbnQoY2hpbGRCb20sIHJvd0lkKSB7DQogICAgICA7DQogICAgICAvL+WIpOaWreaYr+WQpuacieWtkOWFg+e0oO+8jOacieWImemBjeWOhumAkuW9kuWIoOmZpA0KICAgICAgaWYgKGNoaWxkQm9tLmNoaWxkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZEJvbS5jaGlsZC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBjaGlsZCA9IGNoaWxkQm9tLmNoaWxkW2ldOw0KICAgICAgICAgIHRoaXMuZGVsZXRlQ2hpbGRFbGVtZW50KGNoaWxkLCByb3dJZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8v6YGN5Y6G5b2T5YmNYm9t55qE5pWw5o2u77yM5Yig6ZmkaWTnm7jlhbPnmoTlhoXlrrkNCiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2hpbGRCb20uYm9tSXRlbURhdGEubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgaWYgKGNoaWxkQm9tLmJvbUl0ZW1EYXRhW2pdLmlkLmluZGV4T2Yocm93SWQpICE9IC0xKSB7DQogICAgICAgICAgY2hpbGRCb20uYm9tSXRlbURhdGEuc3BsaWNlKGosIDEpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBzdWJtaXREYXRhKCkgew0KICAgICAgOw0KICAgICAgbGV0IHRhYmxlRGlhbG9nT2JqID0ge307DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZHluYW1pY0RhdGEuYm9tSXRlbS5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy5pdGVtRGF0YVtpXSkgew0KICAgICAgICAgIHRhYmxlRGlhbG9nT2JqW3RoaXMuZHluYW1pY0RhdGEuYm9tSXRlbVtpXS5uYW1lXSA9IHRoaXMuaXRlbURhdGFbaV07DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGFibGVEaWFsb2dPYmpbdGhpcy5keW5hbWljRGF0YS5ib21JdGVtW2ldLm5hbWVdID0gdW5kZWZpbmVkOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5pdGVtRGF0YVt0aGlzLmR5bmFtaWNEYXRhLmJvbUl0ZW0ubGVuZ3RoXSkgew0KICAgICAgICB0YWJsZURpYWxvZ09iai5pZCA9IHRoaXMuaXRlbURhdGFbdGhpcy5keW5hbWljRGF0YS5ib21JdGVtLmxlbmd0aF07DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0YWJsZURpYWxvZ09iai5pZCA9IHRoaXMudXNlSWQ7DQogICAgICB9DQoNCiAgICAgIHRoaXMuaW5zZXJ0SXRlbURhdGEodGFibGVEaWFsb2dPYmopOw0KICAgICAgdGhpcy5keW5hbWljRGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5pdGVtRGF0YSA9IFtdOw0KICAgIH0sDQogICAgaW5zZXJ0SXRlbURhdGEoaXRlbURhdGEpIHsNCiAgICAgIDsNCiAgICAgIC8v6YeN5aSN5oCn5qCh6aqMDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZHluYW1pY0RhdGEuYm9tSXRlbURhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmR5bmFtaWNEYXRhLmJvbUl0ZW1EYXRhW2ldOw0KICAgICAgICBpZiAoaXRlbS5pZCA9PSBpdGVtRGF0YS5pZCkgew0KICAgICAgICAgIHRoaXMuZHluYW1pY0RhdGEuYm9tSXRlbURhdGEuc3BsaWNlKGksIDEpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLmR5bmFtaWNEYXRhLmJvbUl0ZW1EYXRhLnB1c2goaXRlbURhdGEpOw0KICAgIH0sDQogICAgcmVmcmVzaCgpew0KICAgICB0aGlzLml0ZW1EYXRhID0gW107DQogICAgfSwNCiAgICBpdGVtRm9ybWF0dGVyKHJvdywgY29sdW1uKXsNCiAgICAgICAgbGV0IGtleSA9IGNvbHVtbi5wcm9wZXJ0eTsNCiAgICAgICAgbGV0IG9wdGlvbkFycmF5ID0gW107DQogICAgICAgIHRoaXMuZHluYW1pY0RhdGEuYm9tSXRlbS5mb3JFYWNoKGVsID0+IHsNCiAgICAgICAgICAgIGlmKGVsLm5hbWUgPT0ga2V5KXsNCiAgICAgICAgICAgICAgICBvcHRpb25BcnJheSA9ICBlbC5vcHRpb25BcnJheTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9KTsNCiAgICAgICAgbGV0IHJlc3VsdD0iIjsNCiAgICAgICAgaWYob3B0aW9uQXJyYXkpew0KICAgICAgICAgICBvcHRpb25BcnJheS5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgICBpZihyb3dba2V5XSA9PSBlbGVtZW50LnZhbHVlKSB7DQogICAgICAgICAgICAgICAgcmVzdWx0ID0gIGVsZW1lbnQubGFiZWw7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgY29uc29sZS5sb2coInJlc3VsdCIscmVzdWx0KTsNCiAgICAgICByZXR1cm4gcmVzdWx0Ow0KDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ibrms/ruleManagement/dynamicTableDialog","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"dynamicTableDialog\">\r\n      <el-row style=\"margin-bottom: 10px;\">\r\n         <el-button  type=\"primary\"   icon=\"el-icon-plus\"  class=\"filter-button\" size=\"mini\" @click=\"displayChildDialog\">{{$t('dynamicTableDialog.addData')}}</el-button>\r\n      </el-row>\r\n      <el-table\r\n        :data=\"dynamicData.bomItemData\"\r\n        :row-class-name=\"insertFilterMethod\"\r\n        style=\"width: 100%\"\r\n        max-height=\"250\"\r\n        size=\"mini\"\r\n        border\r\n      >\r\n        <el-table-column label=\"id\" prop=\"id\" v-if=\"false\"></el-table-column>\r\n        <div v-for=\"(item, index) in dynamicData.bomItem\" >\r\n           <el-table-column\r\n            :label=\"`${item.cnName}`\"\r\n            :prop=\"item.name\"\r\n            v-if=\"item.optionArray.length == 0\"\r\n\r\n          ></el-table-column>\r\n          <el-table-column\r\n            :label=\"`${item.cnName}`\"\r\n            :prop=\"item.name\"\r\n            v-if=\"item.optionArray.length > 0\"\r\n            :formatter=\"itemFormatter\"\r\n\r\n          ></el-table-column>\r\n        </div>\r\n\r\n        <el-table-column fixed=\"right\" :label=\"$t('dynamicTableDialog.execute')\" width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"primary\"  @click=\"updateItem(scope.row)\" class=\"filter-button\"\r\n              icon=\"el-icon-edit\" ></el-button>\r\n            <el-button   @click=\"deleteItem(scope.row)\" size=\"mini\"  type=\"warning\">\r\n           <svg-icon icon-class=\"remove\"/></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-dialog\r\n        :visible.sync=\"dynamicDialogVisible\"\r\n        @close=\"dynamicDialogVisible = false\"\r\n        width=\"65%\"\r\n        :show-close=\"false\"\r\n        :close-on-press-escape=\"false\"\r\n        :close-on-click-modal=\"false\"\r\n        append-to-body\r\n        v-dialog-drag\r\n        label-position=\"right\"\r\n      >\r\n     <cus-page-title-back @backTo=\"dynamicDialogVisible = false\" :label=\"dynamicData.bom.cnName\" :isDialog=\"true\"></cus-page-title-back>\r\n      <div style=\"height:600px; overflow: auto;\" class=\"scrollbar\">\r\n\r\n        <el-tabs v-model=\"activeName\" type=\"card\" @tab-click=\"handleTabClick\">\r\n          <el-tab-pane :label=\"dynamicData.bom.cnName\" :name=\"dynamicData.bom.name\">\r\n            <template slot-scope=\"scope\">\r\n              <dynamic-form-array :dForm=\"dynamicData\" :dItems=\"itemData\" />\r\n            </template>\r\n          </el-tab-pane>\r\n          <el-tab-pane\r\n            v-if=\"dynamicData.child.length > 0\"\r\n            :label=\"item.bom.cnName\"\r\n            :name=\"item.bom.name\"\r\n            v-for=\"(item, index) in dynamicData.child\"\r\n          >\r\n            <dynamic-table-dialog v-if=\"update\" :dData=\"item\" :dId=\"useId\" :dMethod=\"method\" />\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n        <span slot=\"footer\" class=\"dialog-footer\"  style=\"float: right; bottom: 30px;position: absolute;right: 30px;\" >\r\n          <el-button  size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"submitData\"\r\n          ><i class=\"el-icon-success el-icon--left\"></i>{{ $t('table.save')}}</el-button>\r\n          <el-button  size=\"mini\"\r\n            @click=\"refresh\"\r\n            type=\"warning\"\r\n          ><i class=\"el-icon-refresh el-icon--left\"></i>{{$t('table.refresh')}}</el-button>\r\n        </span>\r\n\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dynamicFormArray from \"@/views/ibrms/ruleManagement/dynamicFormArray\";\r\n\r\nexport default {\r\n  name: \"dynamicTableDialog\",\r\n  data() {\r\n    return {\r\n      dynamicData: {\r\n        isArray: \"\",\r\n        bom: {},\r\n        bomItem: [],\r\n        bomItemData: [],\r\n        child: []\r\n      },\r\n      itemData: [],\r\n      dynamicDialogVisible: false,\r\n      activeName: \"\",\r\n      update: true,\r\n      inputArray: [],\r\n      method: \"\",\r\n      id: \"\",\r\n      useId: \"\",\r\n      currentId: 0\r\n    };\r\n  },\r\n  components: {\r\n    dynamicFormArray\r\n  },\r\n  props: [\"dData\", \"dId\", \"dMethod\"],\r\n  mounted() {\r\n    ;\r\n    this.dynamicData = this.dData;\r\n    this.activeName = this.dynamicData.bom.name;\r\n    this.method = this.dMethod;\r\n    this.id = this.dId + \"-\" + this.dynamicData.bom.name;\r\n  },\r\n  methods: {\r\n    displayChildDialog() {\r\n      ;\r\n      this.dynamicDialogVisible = true;\r\n      this.itemData = [];\r\n      this.update = false;\r\n      this.method = \"insert\";\r\n      this.useId = this.id + \"-\" + this.currentId;\r\n      //重新渲染组件\r\n      this.$nextTick(() => {\r\n        this.update = true;\r\n      });\r\n      this.currentId++;\r\n    },\r\n    insertFilterMethod(row, index) {\r\n      ;\r\n      if (row.row.id.indexOf(this.dId) == -1) {\r\n        return \"hidden-row\";\r\n      }\r\n      return \"\";\r\n    },\r\n    handleTabClick(tab, event) {\r\n      // console.log(tab, event);\r\n    },\r\n    deleteItem(row) {\r\n      ;\r\n      let rowId = row.id;\r\n      this.deleteChildElement(this.dynamicData, rowId);\r\n    },\r\n    updateItem(row) {\r\n      ;\r\n      let rowId = row.id;\r\n      this.dynamicDialogVisible = true;\r\n      this.itemData = this.selectItemDataByIdReturnArray(rowId);\r\n      this.update = false;\r\n      this.method = \"update\";\r\n      this.useId = rowId;\r\n\r\n      this.$nextTick(() => {\r\n        this.update = true;\r\n      });\r\n    },\r\n    selectItemDataByIdReturnArray(rowId) {\r\n      ;\r\n      let targetData = {};\r\n      for (let i = 0; i < this.dynamicData.bomItemData.length; i++) {\r\n        if (this.dynamicData.bomItemData[i].id === rowId) {\r\n          targetData = this.dynamicData.bomItemData[i];\r\n        }\r\n      }\r\n      let arr = [];\r\n      for (let key in targetData) {\r\n        arr.push(targetData[key]);\r\n      }\r\n      return arr;\r\n    },\r\n    deleteChildElement(childBom, rowId) {\r\n      ;\r\n      //判断是否有子元素，有则遍历递归删除\r\n      if (childBom.child.length > 0) {\r\n        for (let i = 0; i < childBom.child.length; i++) {\r\n          let child = childBom.child[i];\r\n          this.deleteChildElement(child, rowId);\r\n        }\r\n      }\r\n      //遍历当前bom的数据，删除id相关的内容\r\n      for (let j = 0; j < childBom.bomItemData.length; j++) {\r\n        if (childBom.bomItemData[j].id.indexOf(rowId) != -1) {\r\n          childBom.bomItemData.splice(j, 1);\r\n        }\r\n      }\r\n    },\r\n    submitData() {\r\n      ;\r\n      let tableDialogObj = {};\r\n      for (let i = 0; i < this.dynamicData.bomItem.length; i++) {\r\n        if (this.itemData[i]) {\r\n          tableDialogObj[this.dynamicData.bomItem[i].name] = this.itemData[i];\r\n        } else {\r\n          tableDialogObj[this.dynamicData.bomItem[i].name] = undefined;\r\n        }\r\n      }\r\n      if (this.itemData[this.dynamicData.bomItem.length]) {\r\n        tableDialogObj.id = this.itemData[this.dynamicData.bomItem.length];\r\n      } else {\r\n        tableDialogObj.id = this.useId;\r\n      }\r\n\r\n      this.insertItemData(tableDialogObj);\r\n      this.dynamicDialogVisible = false;\r\n      this.itemData = [];\r\n    },\r\n    insertItemData(itemData) {\r\n      ;\r\n      //重复性校验\r\n      for (let i = 0; i < this.dynamicData.bomItemData.length; i++) {\r\n        let item = this.dynamicData.bomItemData[i];\r\n        if (item.id == itemData.id) {\r\n          this.dynamicData.bomItemData.splice(i, 1);\r\n        }\r\n      }\r\n      this.dynamicData.bomItemData.push(itemData);\r\n    },\r\n    refresh(){\r\n     this.itemData = [];\r\n    },\r\n    itemFormatter(row, column){\r\n        let key = column.property;\r\n        let optionArray = [];\r\n        this.dynamicData.bomItem.forEach(el => {\r\n            if(el.name == key){\r\n                optionArray =  el.optionArray;\r\n            }\r\n\r\n        });\r\n        let result=\"\";\r\n        if(optionArray){\r\n           optionArray.forEach(element => {\r\n              if(row[key] == element.value) {\r\n                result =  element.label;\r\n              }\r\n           });\r\n        }\r\n        console.log(\"result\",result);\r\n       return result;\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.el-table .hidden-row {\r\n  display: none;\r\n}\r\n</style>\r\n"]}]}