{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-attr-def\\added-value-tax\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-attr-def\\added-value-tax\\index.vue","mtime":1609847106836},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBmaW5kQWxsQWRkZWRUYXhCeVByb2N1ZHRJZCwNCiAgYWRkVGF4LA0KICB1cGRhdGVUYXgsDQogIGRlbGV0ZVRheCwNCiAgZ2V0QWxsU3lzU2xNZ2MsDQogIGFkZFJhdGVEYXRhLA0KfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcHJvZHVjdFZhbHVlQWRkZWRUYXgiOw0KDQpsZXQgX3RoaXM7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJwcm9kdWN0VmFsdWVBZGRlZFRheCIsDQogIGZpbHRlcnM6IHsNCiAgICBmaWx0ZXJfcGRGaW5JbmRGZWVUeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgiQ29zdFR5cGUiLCBjb2RlKTsNCiAgICB9LA0KICAgIGZpbHRlcl9wZExldnlGbGFnKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgiTGV2eVRheGVzIiwgY29kZSk7DQogICAgfSwNCiAgICBmaWx0ZXJfcGRNbmdDb20oY29kZSkgew0KICAgICAgZm9yIChjb25zdCBwZFNsTWdjIG9mIF90aGlzLnBkU2xNZ2NPcHRpb25zKSB7DQogICAgICAgIGlmIChwZFNsTWdjLnNsTWdjQ29kZSA9PT0gY29kZSkgew0KICAgICAgICAgIHJldHVybiBwZFNsTWdjLnNsTWdjQ29kZSArICI6IiArIHBkU2xNZ2Muc2xNZ2NOYW1lOw0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gIiI7DQogICAgfSwNCiAgICBmaWx0ZXJfcmF0ZVR5cGUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCJSYXRlVHlwZSIsIGNvZGUpOw0KICAgIH0sDQogICAgZmlsdGVyX2N1cnJlbmN5KGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgicHJvZHVjdEN1cnJlbmN5IiwgY29kZSk7DQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICBfdGhpcyA9IHRoaXM7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm1fYWRkVGF4OiB7DQogICAgICAgIGlkOiB1bmRlZmluZWQsDQogICAgICAgIHBkVmVySWQ6ICIiLA0KICAgICAgICBvcGVyYXRvcjogIiIsDQogICAgICAgIHBkSW5mb0lkOiAiIiwNCiAgICAgICAgcGRDb2RlOiAiIiwNCiAgICAgICAgcGRGaW5JbmRpQXR0cjogIiIsDQogICAgICAgIHBkQnVzc0lkOiAiIiwNCiAgICAgICAgcGRCdXNzQ29kZTogIiIsDQogICAgICAgIHBkRmluSW5kaVR5cGU6ICIiLA0KICAgICAgICBwZFJhdGVDdXJyOiAiIiwNCiAgICAgICAgcGRBbm51UmF0ZTogIiIsDQogICAgICAgIHBkTW9uUmF0ZTogIiIsDQogICAgICAgIHBkRGF5UmF0ZTogIiIsDQogICAgICAgIHBkRmluSW5kRmVlVHlwZTogIiIsDQogICAgICAgIHBkTGV2eUZsYWc6ICJOIiwNCiAgICAgICAgcGRUYXhSYXRlOiAiIiwNCiAgICAgICAgcGRWYWlsU3RhcnREYXRlOiBuZXcgRGF0ZSgpLA0KICAgICAgICBwZFZhaWxFbmREYXRlOiAiOTk5OS0xMi0zMSIsDQogICAgICAgIHBkTW5nQ29tOiBbXSwNCiAgICAgICAgcGRTdWl0RmxhZzogIiIsDQogICAgICAgIHBkQ2FsY0NvZGU6ICIiLA0KICAgICAgfSwNCiAgICAgIGZvcm1fcHJvZHVjdFJhdGlvOiB7DQogICAgICAgIHJhdGVUeXBlOiAiIiwNCiAgICAgICAgY3VycmVuY3k6ICIiLA0KICAgICAgICB5ZWFyUmF0ZUlucHV0OiAiIiwNCiAgICAgICAgbW9udGhSYXRlSW5wdXQ6ICIiLA0KICAgICAgICBkYXlSYXRlSW5wdXQ6ICIiLA0KICAgICAgICBzdGFydFJhdGVEYXRlOiBuZXcgRGF0ZSgpLA0KICAgICAgICBlbmRSYXRlRGF0ZTogIjk5OTktMTItMzEiLA0KICAgICAgfSwNCiAgICAgIC8v5Yid5aeL5YyW6KGo5qC8DQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgaW5pdFRhYmxlRGF0YTogW10sDQogICAgICBhZGRlZFRheFRhYmxlOiBbXSwNCiAgICAgIHNpemVGb3JtMzogW10sDQogICAgICBjaGVja0FkZGVkVGF4OiBbXSwNCiAgICAgIC8v5Yid5aeL5YyW5LiL5ouJ6YCJDQogICAgICBwZFNsTWdjT3B0aW9uczogW10sDQogICAgICBmZWVUeXBlRmlsdGVyczogW10sDQogICAgICBwZE1uZ0NvbUZpbHRlcnM6IFtdLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHBkSW5mb0lkOiAiIiwNCiAgICAgIH0sDQogICAgICB0YWJsZVNlbGVjdDogZmFsc2UsDQogICAgICBuZWVkU2hvd01vcmVfYWRkVGF4OiBmYWxzZSwNCiAgICAgIHNob3dBbGxfYWRkVGF4OiBmYWxzZSwNCg0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgcGRGaW5JbmRGZWVUeXBlOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOg0KICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC5wbGVhc2VTZWxlY3QiKSArDQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBkRmluSW5kRmVlVHlwZSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIsDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcGRMZXZ5RmxhZzogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZToNCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZHVjdFZhbHVlQWRkZWRUYXgucGxlYXNlRW50ZXIiKSArDQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBkTGV2eUZsYWciKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIHBkVGF4UmF0ZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZToNCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZHVjdFZhbHVlQWRkZWRUYXgucGxlYXNlRW50ZXIiKSArDQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBkVGF4UmF0ZSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgeyB0eXBlOiAibnVtYmVyIiwgbWVzc2FnZTogIueojueOh+WAvOS4jeaYr+aVsOWtlyIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBwZFZhaWxTdGFydERhdGU6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6DQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBsZWFzZUVudGVyIikgKw0KICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC5wZFZhaWxTdGFydERhdGUiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGlmICh2YWx1ZSA+IHRoaXMuZm9ybV9hZGRUYXgucGRWYWlsRW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKA0KICAgICAgICAgICAgICAgICAgbmV3IEVycm9yKHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnRpbWVMZXNzVGhlbkVuZERhdGEiKSkNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGxldCBfcGRGaW5JbmRGZWVUeXBlID0gdGhpcy5mb3JtX2FkZFRheC5wZEZpbkluZEZlZVR5cGU7DQogICAgICAgICAgICAgIGxldCBfcGRMZXZ5RmxhZyA9IHRoaXMuZm9ybV9hZGRUYXgucGRMZXZ5RmxhZzsNCiAgICAgICAgICAgICAgbGV0IF9wZFRheFJhdGUgPSB0aGlzLmZvcm1fYWRkVGF4LnBkVGF4UmF0ZTsNCiAgICAgICAgICAgICAgbGV0IF9kYXRlRW5kID0gRGF0ZS5wYXJzZSh2YWx1ZSk7DQogICAgICAgICAgICAgIGxldCBfcGRNbmdDb20gPSB0aGlzLmZvcm1fYWRkVGF4LnBkTW5nQ29tOw0KICAgICAgICAgICAgICBsZXQgX2ZsYWcgPSB0cnVlOw0KICAgICAgICAgICAgICBsZXQgbnVtOw0KICAgICAgICAgICAgICBsZXQgX19wZE1uZ0NvbSA9IGZhbHNlOw0KICAgICAgICAgICAgICBmb3IgKGxldCBudW0xID0gMDsgbnVtMSA8IF9wZE1uZ0NvbS5sZW5ndGg7IG51bTErKykgew0KICAgICAgICAgICAgICAgIGxldCBiID0gZmFsc2U7DQogICAgICAgICAgICAgICAgZm9yIChudW0gPSAwOyBudW0gPCB0aGlzLmFkZGVkVGF4VGFibGUubGVuZ3RoOyBudW0rKykgew0KICAgICAgICAgICAgICAgICAgaWYgKF9wZE1uZ0NvbVtudW0xXSA9PSB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZE1uZ0NvbSkgew0KICAgICAgICAgICAgICAgICAgICBfX3BkTW5nQ29tID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYiA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoYiA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICAgX19wZE1uZ0NvbSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGZvciAobnVtID0gMDsgbnVtIDwgdGhpcy5hZGRlZFRheFRhYmxlLmxlbmd0aDsgbnVtKyspIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtX2FkZFRheC5pZCAhPSB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5pZCkgew0KICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICBfcGRGaW5JbmRGZWVUeXBlID09IHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkRmluSW5kRmVlVHlwZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBfcGRMZXZ5RmxhZyA9PSB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZExldnlGbGFnICYmDQogICAgICAgICAgICAgICAgICAgICAgX3BkTGV2eUZsYWcgPT0gIlkiDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGRUYXhSYXRlID09IHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVGF4UmF0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVmFpbFN0YXJ0RGF0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZURlbW8gPSBEYXRlLnBhcnNlKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVmFpbFN0YXJ0RGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hZGRlZFRheFRhYmxlW251bV0ucGRWYWlsRW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRlRGVtbzIgPSBEYXRlLnBhcnNlKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRlZFRheFRhYmxlW251bV0ucGRWYWlsRW5kRGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVEZW1vIDw9IF9kYXRlRW5kICYmIGRhdGVEZW1vMiA+PSBfZGF0ZUVuZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5pel5pyf5LiN5Y+v5Lqk5Y+JIikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZmxhZyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChfX3BkTW5nQ29tID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFZhaWxTdGFydERhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVEZW1vID0gRGF0ZS5wYXJzZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFZhaWxTdGFydERhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVmFpbEVuZERhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZURlbW8yID0gRGF0ZS5wYXJzZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVmFpbEVuZERhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkYXRlRGVtbyA8PSBfZGF0ZUVuZCAmJiBkYXRlRGVtbzIgPj0gX2RhdGVFbmQpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGF0ZURlbW8gPj0gX2RhdGVFbmQgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZURlbW8yIDw9IHRoaXMuZm9ybV9hZGRUYXgucGRWYWlsRW5kRGF0ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuaXpeacn+S4jeWPr+S6pOWPiSIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWcgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoX2ZsYWcpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIHBkVmFpbEVuZERhdGU6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6DQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBsZWFzZUVudGVyIikgKw0KICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC5wZFZhaWxFbmREYXRlIiksDQogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgICAgICAgICBpZiAodmFsdWUgPCB0aGlzLmZvcm1fYWRkVGF4LnBkVmFpbFN0YXJ0RGF0ZSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKA0KICAgICAgICAgICAgICAgICAgbmV3IEVycm9yKHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnRpbWVMZXNzVGhlbkVuZERhdGEiKSkNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGxldCBfcGRGaW5JbmRGZWVUeXBlID0gdGhpcy5mb3JtX2FkZFRheC5wZEZpbkluZEZlZVR5cGU7DQogICAgICAgICAgICAgIGxldCBfcGRMZXZ5RmxhZyA9IHRoaXMuZm9ybV9hZGRUYXgucGRMZXZ5RmxhZzsNCiAgICAgICAgICAgICAgbGV0IF9wZFRheFJhdGUgPSB0aGlzLmZvcm1fYWRkVGF4LnBkVGF4UmF0ZTsNCiAgICAgICAgICAgICAgbGV0IF9kYXRlRW5kID0gRGF0ZS5wYXJzZSh2YWx1ZSk7DQogICAgICAgICAgICAgIGxldCBfZmxhZyA9IHRydWU7DQogICAgICAgICAgICAgIGxldCBfYXJyID0gW107DQogICAgICAgICAgICAgIGxldCBudW0gPSAwOw0KICAgICAgICAgICAgICBsZXQgX3BkTW5nQ29tID0gdGhpcy5mb3JtX2FkZFRheC5wZE1uZ0NvbTsNCiAgICAgICAgICAgICAgbGV0IF9fcGRNbmdDb20gPSBmYWxzZTsNCiAgICAgICAgICAgICAgZm9yIChsZXQgbnVtMSA9IDA7IG51bTEgPCBfcGRNbmdDb20ubGVuZ3RoOyBudW0xKyspIHsNCiAgICAgICAgICAgICAgICBsZXQgYiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGZvciAobnVtID0gMDsgbnVtIDwgdGhpcy5hZGRlZFRheFRhYmxlLmxlbmd0aDsgbnVtKyspIHsNCiAgICAgICAgICAgICAgICAgIGlmIChfcGRNbmdDb21bbnVtMV0gPT0gdGhpcy5hZGRlZFRheFRhYmxlW251bV0ucGRNbmdDb20pIHsNCiAgICAgICAgICAgICAgICAgICAgX19wZE1uZ0NvbSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGIgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgIF9fcGRNbmdDb20gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBmb3IgKG51bSA9IDA7IG51bSA8IHRoaXMuYWRkZWRUYXhUYWJsZS5sZW5ndGg7IG51bSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybV9hZGRUYXguaWQgIT0gdGhpcy5hZGRlZFRheFRhYmxlW251bV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgX3BkRmluSW5kRmVlVHlwZSA9PSB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZEZpbkluZEZlZVR5cGUNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgX3BkTGV2eUZsYWcgPT0gdGhpcy5hZGRlZFRheFRhYmxlW251bV0ucGRMZXZ5RmxhZyAmJg0KICAgICAgICAgICAgICAgICAgICAgIF9wZExldnlGbGFnID09ICJZIg0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3BkVGF4UmF0ZSA9PSB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFRheFJhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFZhaWxTdGFydERhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVEZW1vID0gRGF0ZS5wYXJzZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFZhaWxTdGFydERhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVmFpbEVuZERhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZURlbW8yID0gRGF0ZS5wYXJzZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZWRUYXhUYWJsZVtudW1dLnBkVmFpbEVuZERhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlRGVtbyA8PSBfZGF0ZUVuZCAmJiBkYXRlRGVtbzIgPj0gX2RhdGVFbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuaXpeacn+S4jeWPr+S6pOWPiSIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWcgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoX19wZE1uZ0NvbSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hZGRlZFRheFRhYmxlW251bV0ucGRWYWlsU3RhcnREYXRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRlRGVtbyA9IERhdGUucGFyc2UoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRlZFRheFRhYmxlW251bV0ucGRWYWlsU3RhcnREYXRlDQogICAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFZhaWxFbmREYXRlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVEZW1vMiA9IERhdGUucGFyc2UoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGVkVGF4VGFibGVbbnVtXS5wZFZhaWxFbmREYXRlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGF0ZURlbW8gPD0gX2RhdGVFbmQgJiYgZGF0ZURlbW8yID49IF9kYXRlRW5kKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRhdGVEZW1vID49IHRoaXMuZm9ybV9hZGRUYXgucGRWYWlsU3RhcnREYXRlICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVEZW1vMiA8PSBfZGF0ZUVuZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuaXpeacn+S4jeWPr+S6pOWPiSIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWcgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoX2ZsYWcpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIHBkTW5nQ29tOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOg0KICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC5wbGVhc2VTZWxlY3QiKSArDQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBkTW5nQ29tIiksDQogICAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICByYXRlVHlwZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZToNCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZHVjdFZhbHVlQWRkZWRUYXgucGxlYXNlU2VsZWN0IikgKw0KICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC5yYXRlVHlwZSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIsDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgY3VycmVuY3k6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6DQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBsZWFzZVNlbGVjdCIpICsNCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZHVjdFZhbHVlQWRkZWRUYXguY3VycmVuY3kiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIHN0YXJ0UmF0ZURhdGU6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6DQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBsZWFzZUVudGVyIikgKw0KICAgICAgICAgICAgICB0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC5wZFZhaWxTdGFydERhdGUiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGlmICh2YWx1ZSA+IHRoaXMuZm9ybV9wcm9kdWN0UmF0aW8uZW5kUmF0ZURhdGUpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygNCiAgICAgICAgICAgICAgICAgIG5ldyBFcnJvcih0aGlzLiR0KCJwcm9kdWN0VmFsdWVBZGRlZFRheC50aW1lTGVzc1RoZW5FbmREYXRhIikpDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBsZXQgX2RhdGVTdGFydCA9IERhdGUucGFyc2UodmFsdWUpOw0KICAgICAgICAgICAgICBsZXQgX2x5U3R5cGUgPSB0aGlzLmZvcm1fcHJvZHVjdFJhdGlvLnJhdGVUeXBlOw0KICAgICAgICAgICAgICBsZXQgX2N1cnJlbmN5ID0gdGhpcy5mb3JtX3Byb2R1Y3RSYXRpby5jdXJyZW5jeTsNCiAgICAgICAgICAgICAgbGV0IF9mbGFnID0gdHJ1ZTsNCiAgICAgICAgICAgICAgbGV0IG51bTsNCiAgICAgICAgICAgICAgZm9yIChudW0gPSAwOyBudW0gPCB0aGlzLnNpemVGb3JtMy5sZW5ndGg7IG51bSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgdGhpcy5zaXplRm9ybTNbbnVtXS5yYXRlVHlwZSA9PSBfbHlTdHlwZSAmJg0KICAgICAgICAgICAgICAgICAgdGhpcy5zaXplRm9ybTNbbnVtXS5jdXJyZW5jeSA9PSBfY3VycmVuY3kNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpemVGb3JtM1tudW1dLnN0YXJ0UmF0ZURhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVEZW1vID0gRGF0ZS5wYXJzZSgNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemVGb3JtM1tudW1dLnN0YXJ0UmF0ZURhdGUNCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZUZvcm0zW251bV0uZW5kUmF0ZURhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZURlbW8yID0gRGF0ZS5wYXJzZSgNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZUZvcm0zW251bV0uZW5kUmF0ZURhdGUNCiAgICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlRGVtbyA8PSBfZGF0ZVN0YXJ0ICYmIGRhdGVEZW1vMiA+PSBfZGF0ZVN0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBfZmxhZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLml6XmnJ/kuI3lj6/kuqTlj4kiKSk7DQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKF9mbGFnKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICBlbmRSYXRlRGF0ZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZToNCiAgICAgICAgICAgICAgdGhpcy4kdCgicHJvZHVjdFZhbHVlQWRkZWRUYXgucGxlYXNlRW50ZXIiKSArDQogICAgICAgICAgICAgIHRoaXMuJHQoInByb2R1Y3RWYWx1ZUFkZGVkVGF4LnBkVmFpbEVuZERhdGUiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGlmICh2YWx1ZSA8IHRoaXMuZm9ybV9hZGRUYXgucGRWYWlsU3RhcnREYXRlKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soDQogICAgICAgICAgICAgICAgICBuZXcgRXJyb3IodGhpcy4kdCgicHJvZHVjdFZhbHVlQWRkZWRUYXgudGltZUxlc3NUaGVuRW5kRGF0YSIpKQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgbGV0IF9kYXRlRW5kID0gRGF0ZS5wYXJzZSh2YWx1ZSk7DQogICAgICAgICAgICAgIGxldCBfbHlTdHlwZSA9IHRoaXMuZm9ybV9wcm9kdWN0UmF0aW8ucmF0ZVR5cGU7DQogICAgICAgICAgICAgIGxldCBfY3VycmVuY3kgPSB0aGlzLmZvcm1fcHJvZHVjdFJhdGlvLmN1cnJlbmN5Ow0KICAgICAgICAgICAgICBsZXQgX2ZsYWcgPSB0cnVlOw0KICAgICAgICAgICAgICBsZXQgbnVtOw0KICAgICAgICAgICAgICBmb3IgKG51bSA9IDA7IG51bSA8IHRoaXMuc2l6ZUZvcm0zLmxlbmd0aDsgbnVtKyspIHsNCiAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplRm9ybTNbbnVtXS5yYXRlVHlwZSA9PSBfbHlTdHlwZSAmJg0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemVGb3JtM1tudW1dLmN1cnJlbmN5ID09IF9jdXJyZW5jeQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpemVGb3JtM1tudW1dLnN0YXJ0UmF0ZURhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZURlbW8gPSBEYXRlLnBhcnNlKA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplRm9ybTNbbnVtXS5zdGFydFJhdGVEYXRlDQogICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXplRm9ybTNbbnVtXS5lbmRSYXRlRGF0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVEZW1vMiA9IERhdGUucGFyc2UoDQogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZUZvcm0zW251bV0uZW5kUmF0ZURhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZURlbW8gPD0gX2RhdGVFbmQgJiYgZGF0ZURlbW8yID49IF9kYXRlRW5kKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIF9mbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5pel5pyf5LiN5Y+v5Lqk5Y+JIikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2ZsYWcgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChfZmxhZykgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHt9LA0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIGxldCBwZHRlbXBQZEluZm8gPSB0aGlzLmdldFBkRGF0YSgpOw0KICAgIHRoaXMucGFyYW1zLnBkSW5mb0lkID0gcGR0ZW1wUGRJbmZvLmlkOw0KICAgIHRoaXMuZm9ybV9hZGRUYXgucGRJbmZvSWQgPSBwZHRlbXBQZEluZm8uaWQ7DQogICAgdGhpcy5mb3JtX2FkZFRheC5wZFZlcklkID0gcGR0ZW1wUGRJbmZvLnBkVmVySWQ7DQogICAgdGhpcy5mb3JtX2FkZFRheC5wZENvZGUgPSBwZHRlbXBQZEluZm8ucGRDb2RlOw0KICAgIGF3YWl0IHRoaXMuaW5pdE1nY0luZm8oKTsNCiAgICBhd2FpdCB0aGlzLmluaXRUYWJsZSgpOw0KICB9LA0KICB3YXRjaDogew0KICAgIGFkZGVkVGF4VGFibGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLmFkZGVkVGF4VGFibGUubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmZlZVR5cGVGaWx0ZXJzID0gW107DQogICAgICAgIHRoaXMucGRNbmdDb21GaWx0ZXJzID0gW107DQogICAgICAgIHRoaXMuYWRkZWRUYXhUYWJsZS5mb3JFYWNoKCh2YWwpID0+IHsNCiAgICAgICAgICB0aGlzLmZlZVR5cGVGaWx0ZXJzLnB1c2goew0KICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRDb2RlTmFtZSgiQ29zdFR5cGUiLCB2YWwucGRGaW5JbmRGZWVUeXBlKSwNCiAgICAgICAgICAgIHZhbHVlOiB2YWwucGRGaW5JbmRGZWVUeXBlLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMucGRNbmdDb21GaWx0ZXJzLnB1c2goew0KICAgICAgICAgICAgdGV4dDogdGhpcy5wdXNoX3BkTW5nQ29tKHZhbC5wZE1uZ0NvbSksDQogICAgICAgICAgICB2YWx1ZTogdmFsLnBkTW5nQ29tLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgICAgLy/otLnnlKjnsbvlnosNCiAgICAgICAgdGhpcy5mZWVUeXBlRmlsdGVycyA9IHRoaXMuZmVlVHlwZUZpbHRlcnMucmVkdWNlKGZ1bmN0aW9uICgNCiAgICAgICAgICBwcmV2LA0KICAgICAgICAgIGVsZW1lbnQNCiAgICAgICAgKSB7DQogICAgICAgICAgaWYgKCFwcmV2LmZpbmQoKGVsKSA9PiBlbC50ZXh0ID09IGVsZW1lbnQudGV4dCkpIHsNCiAgICAgICAgICAgIHByZXYucHVzaChlbGVtZW50KTsNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuIHByZXY7DQogICAgICAgIH0sDQogICAgICAgIFtdKTsNCiAgICAgICAgLy/nrqHnkIbmnLrmnoQNCiAgICAgICAgdGhpcy5wZE1uZ0NvbUZpbHRlcnMgPSB0aGlzLnBkTW5nQ29tRmlsdGVycy5yZWR1Y2UoZnVuY3Rpb24gKA0KICAgICAgICAgIHByZXYsDQogICAgICAgICAgZWxlbWVudA0KICAgICAgICApIHsNCiAgICAgICAgICBpZiAoIXByZXYuZmluZCgoZWwpID0+IGVsLnRleHQgPT0gZWxlbWVudC50ZXh0KSkgew0KICAgICAgICAgICAgcHJldi5wdXNoKGVsZW1lbnQpOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gcHJldjsNCiAgICAgICAgfSwNCiAgICAgICAgW10pOw0KICAgICAgfQ0KICAgIH0sDQogICAgImZvcm1fYWRkVGF4LnBkTW5nQ29tIihzZWxlY3RlZENvZGVzKSB7DQogICAgICBpZiAoc2VsZWN0ZWRDb2Rlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgZm9yIChjb25zdCBwZFNsTWdjIG9mIHRoaXMucGRTbE1nY09wdGlvbnMpIHsNCiAgICAgICAgICBwZFNsTWdjLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMoc2VsZWN0ZWRDb2RlcywgIjAwMDAiKSkgew0KICAgICAgICAgIGZvciAoY29uc3QgcGRTbE1nYyBvZiB0aGlzLnBkU2xNZ2NPcHRpb25zKSB7DQogICAgICAgICAgICBwZFNsTWdjLmRpc2FibGVkID0gcGRTbE1nYy5zbE1nY0NvZGUgIT09ICIwMDAwIjsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZm9yIChjb25zdCBwZFNsTWdjIG9mIHRoaXMucGRTbE1nY09wdGlvbnMpIHsNCiAgICAgICAgICAgIHBkU2xNZ2MuZGlzYWJsZWQgPSBwZFNsTWdjLnNsTWdjQ29kZSA9PT0gIjAwMDAiOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgImZvcm1fYWRkVGF4LnBkTGV2eUZsYWciKCkgew0KICAgICAgY29uc3QgdmFsID0gdGhpcy5mb3JtX2FkZFRheC5wZExldnlGbGFnOw0KICAgICAgaWYgKHZhbCA9PSAiTiIpIHsNCiAgICAgICAgdGhpcy5mb3JtX2FkZFRheC5wZFRheFJhdGUgPSAiIjsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkge30sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0VGFibGUoKSB7DQogICAgICBmaW5kQWxsQWRkZWRUYXhCeVByb2N1ZHRJZCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEodGhpcy5wYXJhbXMpKS50aGVuKA0KICAgICAgICAocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICB0aGlzLmluaXRUYWJsZURhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgdGhpcy5zaXplRm9ybTMgPSBbXTsNCiAgICAgICAgICBmb3IgKGNvbnN0IGFkZGVkVGF4IG9mIHRoaXMuaW5pdFRhYmxlRGF0YSkgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBhZGRlZFRheC5wZEZpbkluZEZlZVR5cGUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgICBhZGRlZFRheC5wZEZpbkluZEZlZVR5cGUgIT0gIiINCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKGFkZGVkVGF4KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIGFkZGVkVGF4LnBkRmluSW5kaVR5cGUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgICBhZGRlZFRheC5wZEZpbkluZGlUeXBlICE9ICIiDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgdGhpcy5zaXplRm9ybTMucHVzaCh7DQogICAgICAgICAgICAgICAgaWQ6IGFkZGVkVGF4LmlkLA0KICAgICAgICAgICAgICAgIHJhdGVUeXBlOiBhZGRlZFRheC5wZEZpbkluZGlUeXBlLA0KICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBhZGRlZFRheC5wZFJhdGVDdXJyLA0KICAgICAgICAgICAgICAgIHllYXJSYXRlSW5wdXQ6IHBhcnNlSW50KGFkZGVkVGF4LnBkQW5udVJhdGUqMTAwKSsnJScsDQogICAgICAgICAgICAgICAgbW9udGhSYXRlSW5wdXQ6IHBhcnNlSW50KGFkZGVkVGF4LnBkTW9uUmF0ZSoxMDApKyclJywNCiAgICAgICAgICAgICAgICBkYXlSYXRlSW5wdXQ6IHBhcnNlSW50KGFkZGVkVGF4LnBkRGF5UmF0ZSoxMDApKyclJywNCiAgICAgICAgICAgICAgICBzdGFydFJhdGVEYXRlOiBhZGRlZFRheC5wZFZhaWxTdGFydERhdGUsDQogICAgICAgICAgICAgICAgZW5kUmF0ZURhdGU6IGFkZGVkVGF4LnBkVmFpbEVuZERhdGUsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICAvL+WxleekuuabtOWkmuaIluiAheaUtui1tw0KICAgICAgICAgIHRoaXMuc2hvd0FsbF9hZGRUYXggPSBmYWxzZTsNCiAgICAgICAgICBpZiAodGhpcy50YWJsZURhdGEubGVuZ3RoID4gMTApIHsNCiAgICAgICAgICAgIHRoaXMuYWRkZWRUYXhUYWJsZSA9IHRoaXMudGFibGVEYXRhLnNsaWNlKDAsIDEwKTsNCiAgICAgICAgICAgIHRoaXMubmVlZFNob3dNb3JlX2FkZFRheCA9IHRydWU7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuYWRkZWRUYXhUYWJsZSA9IHRoaXMudGFibGVEYXRhOw0KICAgICAgICAgICAgdGhpcy5uZWVkU2hvd01vcmVfYWRkVGF4ID0gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICApOw0KICAgIH0sDQogICAgaW5pdE1nY0luZm8oKSB7DQogICAgICBpZiAoIXRoaXMuZm9ybV9hZGRUYXgucGRJbmZvSWQpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5wZFNsTWdjT3B0aW9ucyA9IFtdOw0KICAgICAgZ2V0QWxsU3lzU2xNZ2MoKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBmb3IgKGNvbnN0IHBkU2xNZ2Mgb2YgcmVzcG9uc2UuZGF0YSkgew0KICAgICAgICAgIHRoaXMucGRTbE1nY09wdGlvbnMucHVzaChwZFNsTWdjKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZvcm1fYWRkVGF4LnBkTW5nQ29tID0gWyIwMDAwIl07DQogICAgICB9KTsNCiAgICAgIGZvciAoY29uc3QgcGRTbE1nYyBvZiB0aGlzLnBkU2xNZ2NPcHRpb25zKSB7DQogICAgICAgIHRoaXMuJHNldChwZFNsTWdjLCAiZGlzYWJsZWQiLCBmYWxzZSk7DQogICAgICB9DQogICAgfSwNCiAgICBwdXNoX3BkTW5nQ29tKGNvZGUpIHsNCiAgICAgIGZvciAoY29uc3QgcGRTbE1nYyBvZiB0aGlzLnBkU2xNZ2NPcHRpb25zKSB7DQogICAgICAgIGlmIChwZFNsTWdjLnNsTWdjQ29kZSA9PT0gY29kZSkgew0KICAgICAgICAgIHJldHVybiBwZFNsTWdjLnNsTWdjQ29kZSArICI6IiArIHBkU2xNZ2Muc2xNZ2NOYW1lOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBmaWx0ZXJIYW5kbGVyKHZhbHVlLCByb3csIGNvbHVtbikgew0KICAgICAgaWYgKGNvbHVtbikgew0KICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsicHJvcGVydHkiXTsNCiAgICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlOw0KICAgICAgfQ0KICAgIH0sDQogICAgYWRkVGF4KCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtX2FkZFRheC52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgbGV0IHBkdGVtcFBkRmluSW5kcyA9IFtdOw0KICAgICAgICAgIGxldCBwZE1uZ0NvbSA9IHRoaXMuZm9ybV9hZGRUYXgucGRNbmdDb207DQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZE1uZ0NvbS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgbGV0IHBkdGVtcFBkRmluSW5kID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm1fYWRkVGF4KSk7DQogICAgICAgICAgICBwZHRlbXBQZEZpbkluZC5wZEZpbkluZGlBdHRyID0gJ0EnOw0KICAgICAgICAgICAgcGR0ZW1wUGRGaW5JbmQucGRNbmdDb20gPSBwZE1uZ0NvbVtpXTsNCiAgICAgICAgICAgIHBkdGVtcFBkRmluSW5kcy5wdXNoKHBkdGVtcFBkRmluSW5kKTsNCiAgICAgICAgICB9DQogICAgICAgICAgYWRkVGF4KA0KICAgICAgICAgICAgdGhpcy5idWlsZFJlcXVlc3REYXRhKHsgcGR0ZW1wUGRGaW5JbmRzOiBwZHRlbXBQZEZpbkluZHMgfSkNCiAgICAgICAgICApLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5yZXNldEZvcm0oKTsNCiAgICAgICAgICAgIHRoaXMuaW5pdFRhYmxlKCk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJjaGlsZEZuIiwgdHJ1ZSk7DQogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgic3VjY2Vzc01lc3NhZ2UuYWRkIikpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHVwZGF0ZVRheCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybV9hZGRUYXgudmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGxldCBwZHRlbXBQZEZpbkluZCA9IHRoaXMuZm9ybV9hZGRUYXg7DQogICAgICAgICAgcGR0ZW1wUGRGaW5JbmQucGRNbmdDb20gPSB0aGlzLmZvcm1fYWRkVGF4LnBkTW5nQ29tWzBdOw0KICAgICAgICAgIHVwZGF0ZVRheCgNCiAgICAgICAgICAgIHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7IHBkdGVtcFBkRmluSW5kOiBwZHRlbXBQZEZpbkluZCB9KQ0KICAgICAgICAgICkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybSgpOw0KICAgICAgICAgICAgdGhpcy5pbml0TWdjSW5mbygpOw0KICAgICAgICAgICAgdGhpcy5pbml0VGFibGUoKTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoImNoaWxkRm4iLCB0cnVlKTsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCJzdWNjZXNzTWVzc2FnZS51cGRhdGUiKSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgYWRkUmF0ZURhdGEoKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm1fcHJvZHVjdFJhdGlvLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBsZXQgUGR0ZW1wUGRGaW5JbmQgPSB7DQogICAgICAgICAgICBwZFZlcklkOiB0aGlzLmZvcm1fYWRkVGF4LnBkVmVySWQsDQogICAgICAgICAgICBwZENvZGU6IHRoaXMuZm9ybV9hZGRUYXgucGRDb2RlLA0KICAgICAgICAgICAgcGRJbmZvSWQ6IHRoaXMuZm9ybV9hZGRUYXgucGRJbmZvSWQsDQogICAgICAgICAgICBwZEZpbkluZGlUeXBlOiB0aGlzLmZvcm1fcHJvZHVjdFJhdGlvLnJhdGVUeXBlLA0KICAgICAgICAgICAgcGRSYXRlQ3VycjogdGhpcy5mb3JtX3Byb2R1Y3RSYXRpby5jdXJyZW5jeSwNCiAgICAgICAgICAgIHBkQW5udVJhdGU6IHRoaXMuZm9ybV9wcm9kdWN0UmF0aW8ueWVhclJhdGVJbnB1dC8xMDAsDQogICAgICAgICAgICBwZE1vblJhdGU6IHRoaXMuZm9ybV9wcm9kdWN0UmF0aW8ubW9udGhSYXRlSW5wdXQvMTAwLA0KICAgICAgICAgICAgcGREYXlSYXRlOiB0aGlzLmZvcm1fcHJvZHVjdFJhdGlvLmRheVJhdGVJbnB1dC8xMDAsDQogICAgICAgICAgICBwZFZhaWxTdGFydERhdGU6IHRoaXMuZm9ybV9wcm9kdWN0UmF0aW8uc3RhcnRSYXRlRGF0ZSwNCiAgICAgICAgICAgIHBkVmFpbEVuZERhdGU6IHRoaXMuZm9ybV9wcm9kdWN0UmF0aW8uZW5kUmF0ZURhdGUsDQogICAgICAgICAgICBwZEZpbkluZGlBdHRyOiAnUicsDQogICAgICAgICAgfTsNCiAgICAgICAgICBhZGRSYXRlRGF0YSgNCiAgICAgICAgICAgIHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7IFBkdGVtcFBkRmluSW5kOiBQZHRlbXBQZEZpbkluZCB9KQ0KICAgICAgICAgICkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICB0aGlzLmluaXRNZ2NJbmZvKCk7DQogICAgICAgICAgICB0aGlzLmluaXRUYWJsZSgpOw0KICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2R1Y3RSYXRpby5jbGVhclZhbGlkYXRlKCk7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1fcHJvZHVjdFJhdGlvLnJlc2V0RmllbGRzKCk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJjaGlsZEZuIiwgdHJ1ZSk7DQogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgic3VjY2Vzc01lc3NhZ2UuYWRkIikpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGNsZWFuUmF0ZURhdGEoKSB7DQogICAgICB0aGlzLmZvcm1fcHJvZHVjdFJhdGlvID0gew0KICAgICAgICByYXRlVHlwZTogIiIsDQogICAgICAgIGN1cnJlbmN5OiAiIiwNCiAgICAgICAgeWVhclJhdGVJbnB1dDogIiIsDQogICAgICAgIG1vbnRoUmF0ZUlucHV0OiAiIiwNCiAgICAgICAgZGF5UmF0ZUlucHV0OiAiIiwNCiAgICAgICAgc3RhcnRSYXRlRGF0ZTogbmV3IERhdGUoKSwNCiAgICAgICAgZW5kUmF0ZURhdGU6ICI5OTk5LTEyLTMxIiwNCiAgICAgIH07DQoNCiAgICB9LA0KICAgIGRlbGV0ZVJhdGVEYXRhKHJvdykgew0KICAgICAgbGV0IGRlbEtleXMgPSBbXTsNCiAgICAgIGRlbEtleXMucHVzaChyb3cuaWQpOw0KICAgICAgZGVsZXRlVGF4KHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7IGRlbEtleXM6IGRlbEtleXMgfSkpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmluaXRNZ2NJbmZvKCk7DQogICAgICAgIHRoaXMuaW5pdFRhYmxlKCk7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCJzdWNjZXNzTWVzc2FnZS5kZWxldGUiKSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGRlbGV0ZVRheCgpIHsNCiAgICAgIGxldCBkZWxLZXlzID0gdGhpcy5jaGVja0FkZGVkVGF4Lm1hcCgodGF4KSA9PiB0YXguaWQpOw0KICAgICAgZGVsZXRlVGF4KHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7IGRlbEtleXM6IGRlbEtleXMgfSkpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmluaXRNZ2NJbmZvKCk7DQogICAgICAgIHRoaXMuaW5pdFRhYmxlKCk7DQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCJzdWNjZXNzTWVzc2FnZS5kZWxldGUiKSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGRlbGV0ZU1vcmVUYXgoKSB7DQogICAgICB0aGlzLmRlbGV0ZVRheCgpOw0KICAgIH0sDQogICAgY2hlY2tBZGRlZFRheFRhYmxlKHZhbCkgew0KICAgICAgdGhpcy5jaGVja0FkZGVkVGF4ID0gdmFsOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICBpZiAodGhpcy5jaGVja0FkZGVkVGF4Lmxlbmd0aCA9PSAxKSB7DQogICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1fYWRkVGF4LCB2YWxbMF0pOw0KICAgICAgICAgIHRoaXMuZm9ybV9hZGRUYXgucGRNbmdDb20gPSBbdmFsWzBdLnBkTW5nQ29tXTsNCiAgICAgICAgICB0aGlzLnRhYmxlU2VsZWN0ID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNoZWNrQWRkZWRUYXgubGVuZ3RoID09IDApIHsNCiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybSgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHNob3dNb3JlX2FkZFRheCgpIHsNCiAgICAgIHRoaXMuc2hvd0FsbF9hZGRUYXggPSB0cnVlOw0KICAgICAgdGhpcy5hZGRlZFRheFRhYmxlID0gdGhpcy50YWJsZURhdGE7DQogICAgfSwNCiAgICBzaG93QmFja19hZGRUYXgoKSB7DQogICAgICB0aGlzLnNob3dBbGxfYWRkVGF4ID0gZmFsc2U7DQogICAgICB0aGlzLmFkZGVkVGF4VGFibGUgPSB0aGlzLnRhYmxlRGF0YS5zbGljZSgwLCAxMCk7DQogICAgfSwNCiAgICByZXNldEZvcm0oKSB7DQogICAgICB0aGlzLnRhYmxlU2VsZWN0ID0gZmFsc2U7DQogICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybV9hZGRUYXgucmVzZXRGaWVsZHMoKTsNCiAgICAgIHRoaXMuZm9ybV9hZGRUYXggPSB7DQogICAgICAgIGlkOiB1bmRlZmluZWQsDQogICAgICAgIHBkVmVySWQ6IHRoaXMuZm9ybV9hZGRUYXgucGRWZXJJZCwNCiAgICAgICAgb3BlcmF0b3I6ICIiLA0KICAgICAgICBwZEluZm9JZDogdGhpcy5mb3JtX2FkZFRheC5wZEluZm9JZCwNCiAgICAgICAgcGRDb2RlOiB0aGlzLmZvcm1fYWRkVGF4LnBkQ29kZSwNCiAgICAgICAgcGRGaW5JbmRpQXR0cjogIiIsDQogICAgICAgIHBkQnVzc0lkOiAiIiwNCiAgICAgICAgcGRCdXNzQ29kZTogIiIsDQogICAgICAgIHBkRmluSW5kaVR5cGU6ICIiLA0KICAgICAgICBwZFJhdGVDdXJyOiAiIiwNCiAgICAgICAgcGRBbm51UmF0ZTogIiIsDQogICAgICAgIHBkTW9uUmF0ZTogIiIsDQogICAgICAgIHBkRGF5UmF0ZTogIiIsDQogICAgICAgIHBkRmluSW5kRmVlVHlwZTogIiIsDQogICAgICAgIHBkTGV2eUZsYWc6ICJOIiwNCiAgICAgICAgcGRUYXhSYXRlOiAiIiwNCiAgICAgICAgcGRWYWlsU3RhcnREYXRlOiBuZXcgRGF0ZSgpLA0KICAgICAgICBwZFZhaWxFbmREYXRlOiAiOTk5OS0xMi0zMSIsDQogICAgICAgIHBkTW5nQ29tOiBbIjAwMDAiXSwNCiAgICAgICAgcGRTdWl0RmxhZzogIiIsDQogICAgICAgIHBkQ2FsY0NvZGU6ICIiLA0KICAgICAgfTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-framework-def/pd-attr-def/added-value-tax","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div>\r\n      <cus-page-title :label=\"$t('productValueAddedTax.productAddTax')\" />\r\n    </div>\r\n    <cus-product-info></cus-product-info>\r\n    <cus-form-title :label=\"$t('productValueAddedTax.addTax')\" :first=\"true\"></cus-form-title>\r\n    <cus-table-title :label=\"$t('productValueAddedTax.AddTaxMenu')\" />\r\n    <el-table ref=\"multipleTable\" :data=\"addedTaxTable\" size=\"mini\" highlight-current-row @selection-change=\"checkAddedTaxTable\" fit element-loading-text=\"Loading\" border align=\"center\" class=\"wraper-table\">\r\n      <el-table-column :label=\"$t('productValueAddedTax.select')\" type=\"selection\" align=\"center\" width=\"55px\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" type=\"index\" align=\"center\" width=\"55px\"></el-table-column>\r\n      <el-table-column :label=\"$t('productValueAddedTax.pdFinIndFeeType')\" prop=\"pdFinIndFeeType\" align=\"center\" :filter-method=\"filterHandler\" :filters=\"feeTypeFilters\">\r\n        <template slot-scope=\"props\">{{props.row.pdFinIndFeeType|filter_pdFinIndFeeType}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productValueAddedTax.pdLevyFlag')\" prop=\"pdLevyFlag\" align=\"center\">\r\n        <template slot-scope=\"props\">{{props.row.pdLevyFlag|filter_pdLevyFlag}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productValueAddedTax.pdTaxRate')\" prop=\"pdTaxRate\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productValueAddedTax.pdVailStartDate')\" prop=\"pdVailStartDate\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productValueAddedTax.pdVailEndDate')\" prop=\"pdVailEndDate\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productValueAddedTax.pdMngCom')\" prop=\"pdMngCom\" align=\"center\" :filter-method=\"filterHandler\" :filters=\"pdMngComFilters\" width=\"300px\">\r\n        <template slot-scope=\"props\">{{props.row.pdMngCom | filter_pdMngCom}}</template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-button size=\"small\" @click=\"showMore_addTax\" type=\"text\" v-if=\"needShowMore_addTax && !showAll_addTax\">\r\n      {{$t('productValueAddedTax.showMore')}}\r\n      <i class=\"el-icon-arrow-down\"></i>\r\n    </el-button>\r\n    <el-button size=\"small\" @click=\"showBack_addTax\" type=\"text\" v-if=\"needShowMore_addTax && showAll_addTax\">\r\n      {{$t('productValueAddedTax.showBack')}}\r\n      <i class=\"el-icon-arrow-up\"></i>\r\n    </el-button>\r\n    <br>\r\n    <el-row v-if=\"this.checkAddedTax.length>1\" style=\"float: right\">\r\n      <cus-popover :buttonText=\"$t('table.delete')\" @confirm=\"deleteMoreTax\" icon=\"el-icon-delete\" style=\"margin-right: 5px;margin-left: 5px\" type=\"danger\" v-auth=\"'pdtemp-pd-value-added-tax:delete'\" :content=\"$t('confirmMessage.delete')\">\r\n      </cus-popover>\r\n    </el-row>\r\n\r\n    <!--产品增值税定义-->\r\n    <div v-if=\"this.checkAddedTax.length<2\">\r\n\r\n      <el-form ref=\"form_addTax\" :model=\"form_addTax\" label-position=\"right\" label-width=\"auto\" :rules=\"rules\">\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.pdFinIndFeeType')\" prop=\"pdFinIndFeeType\">\r\n              <cus-select :codetype=\"'CostType'\" v-model=\"form_addTax.pdFinIndFeeType\"></cus-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.pdLevyFlag')\" prop=\"pdLevyFlag\">\r\n              <cus-radio :codetype=\"'LevyTaxes'\" :isRequired=\"true\" v-model=\"form_addTax.pdLevyFlag\">\r\n              </cus-radio>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col v-if=\"form_addTax.pdLevyFlag=='Y'\">\r\n            <el-form-item :label=\"$t('productValueAddedTax.pdTaxRate')\" prop=\"pdTaxRate\">\r\n              <el-input type=\"number\" :placeholder=\"$t('productValueAddedTax.pleaseEnterNumber')\" v-model.number=\"form_addTax.pdTaxRate\">\r\n                <template slot=\"suffix\">%</template>\r\n              </el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n\r\n          <cus-col v-if=\"form_addTax.pdLevyFlag!='Y'\">\r\n\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.pdVailStartDate')\" prop=\"pdVailStartDate\">\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\" type=\"date\" v-model=\"form_addTax.pdVailStartDate\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.pdVailEndDate')\" prop=\"pdVailEndDate\">\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\" type=\"date\" v-model=\"form_addTax.pdVailEndDate\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.pdMngCom')\" prop=\"pdMngCom\">\r\n              <el-select clearable filterable multiple v-model=\"form_addTax.pdMngCom\" :disabled=\"tableSelect\">\r\n                <el-option :disabled=\"pdSlMgc.disabled\" :key=\"pdSlMgc.slMgcCode\" :label=\"pdSlMgc.slMgcCode + ':' + pdSlMgc.slMgcName\" :value=\"pdSlMgc.slMgcCode\" v-for=\"pdSlMgc in pdSlMgcOptions\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <el-form-item align=\"right\">\r\n          <el-button size=\"small\" @click=\"addTax\" dialog-disable=\"disable\" icon=\"el-icon-success\" v-auth=\"'pdtemp-pd-value-added-tax:add'\" v-if=\"this.checkAddedTax.length==0\" type=\"primary\">{{$t('productValueAddedTax.add')}}</el-button>\r\n          <el-button size=\"small\" @click=\"updateTax\" dialog-disable=\"disable\" v-if=\"this.checkAddedTax.length==1\" icon=\"el-icon-success\" v-auth=\"'pdtemp-pd-value-added-tax:update'\" type=\"primary\">{{$t('productValueAddedTax.update')}}</el-button>\r\n          <cus-popover :buttonText=\"$t('table.delete')\" @confirm=\"deleteTax\" icon=\"el-icon-delete\" style=\"margin-right: 5px;margin-left: 5px\" type=\"danger\" v-auth=\"'pdtemp-pd-value-added-tax:delete'\" v-if=\"this.checkAddedTax.length==1\" :content=\"$t('confirmMessage.delete')\">\r\n          </cus-popover>\r\n          <el-button size=\"small\" @click=\"resetForm\" dialog-disable=\"disable\" icon=\"el-icon-refresh el-icon--left\" v-if=\"this.checkAddedTax.length<2\" type=\"primary\">{{$t('productValueAddedTax.refresh')}}</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div>\r\n      <cus-form-title :label=\"$t('productValueAddedTax.interestRate')\" :first=\"true\"></cus-form-title>\r\n      <cus-table-title :label=\"$t('productValueAddedTax.productRatio')\" />\r\n      <el-table ref=\"sizeForm3\" :data=\"sizeForm3\" align=\"center\" border class=\"wraper-table\" fit highlight-current-row>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"60px\"></el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.rateType')\" align=\"center\" prop=\"rateType\">\r\n          <template slot-scope=\"props\">{{props.row.rateType|filter_rateType}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.currency')\" align=\"center\" prop=\"currency\" width=\"150px\">\r\n          <template slot-scope=\"props\">{{props.row.currency|filter_currency}}</template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.yearRateInput')\" align=\"center\" prop=\"yearRateInput\" width=\"100px\">\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.monthRateInput')\" align=\"center\" prop=\"monthRateInput\" width=\"100px\">\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.dayRateInput')\" align=\"center\" prop=\"dayRateInput\" width=\"100px\">\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.startRateDate')\" align=\"center\" prop=\"startRateDate\" width=\"180px\"></el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.endRateDate')\" align=\"center\" prop=\"endRateDate\" width=\"180px\"></el-table-column>\r\n        <el-table-column :label=\"$t('productValueAddedTax.operation')\" align=\"center\" width=\"140px\">\r\n          <template slot-scope=\"scope\">\r\n            <cus-popover @confirm=\"deleteRateData(scope.row)\" icon=\"el-icon-delete\" style=\"margin-right: 5px;margin-left: 5px\" type=\"danger\" v-auth=\"'pdtemp-pd-value-added-tax:delete'\" :content=\"$t('confirmMessage.delete')\">\r\n            </cus-popover>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <br/>\r\n      <el-form ref=\"form_productRatio\" :model=\"form_productRatio\" label-position=\"right\" label-width=\"auto\" :rules=\"rules\">\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.rateType')\" prop=\"rateType\">\r\n              <cus-select :codetype=\"'RateType'\" v-model=\"form_productRatio.rateType\"></cus-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.currency')\" prop=\"currency\">\r\n              <cus-select :codetype=\"'productCurrency'\" :isRequired=\"true\" v-model=\"form_productRatio.currency\">\r\n              </cus-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.yearRateInput')\" prop=\"yearRateInput\">\r\n              <el-input-number v-model=\"form_productRatio.yearRateInput\" v-unit :max=\"100\" :min=\"0\"\r\n                               :placeholder=\"$t('productValueAddedTax.pleaseEnterNumber')\"\r\n                               :precision=\"2\"\r\n                               :step=\"5\" controls-position=\"right\" ></el-input-number>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.dayRateInput')\" prop=\"dayRateInput\">\r\n              <el-input-number v-model=\"form_productRatio.dayRateInput\" v-unit :max=\"100\" :min=\"0\"\r\n                               :placeholder=\"$t('productValueAddedTax.dayRateInput')\"\r\n                               :precision=\"2\"\r\n                               :step=\"5\" controls-position=\"right\" ></el-input-number>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.monthRateInput')\" prop=\"monthRateInput\">\r\n              <el-input-number v-model=\"form_productRatio.monthRateInput\" v-unit :max=\"100\" :min=\"0\"\r\n                               :placeholder=\"$t('productValueAddedTax.pleaseEnterNumber')\"\r\n                               :precision=\"2\"\r\n                               :step=\"5\" controls-position=\"right\" ></el-input-number>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.startRateDate')\" prop=\"startRateDate\">\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\" type=\"date\" v-model=\"form_productRatio.startRateDate\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('productValueAddedTax.endRateDate')\" prop=\"endRateDate\">\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\" type=\"date\" v-model=\"form_productRatio.endRateDate\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col>\r\n          </cus-col>\r\n        </cus-row>\r\n        <el-form-item align=\"right\">\r\n          <el-button size=\"small\" @click=\"addRateData\" dialog-disable=\"disable\"  icon=\"el-icon-success\" v-auth=\"'pdtemp-pd-value-added-tax:add'\" type=\"primary\">{{$t('productValueAddedTax.add')}}</el-button>\r\n          <el-button size=\"small\" @click=\"cleanRateData\"  dialog-disable=\"disable\" icon=\"el-icon-refresh el-icon--left\" type=\"primary\">{{$t('productValueAddedTax.refresh')}}</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  findAllAddedTaxByProcudtId,\r\n  addTax,\r\n  updateTax,\r\n  deleteTax,\r\n  getAllSysSlMgc,\r\n  addRateData,\r\n} from \"@/api/basicinfo/productValueAddedTax\";\r\n\r\nlet _this;\r\nexport default {\r\n  name: \"productValueAddedTax\",\r\n  filters: {\r\n    filter_pdFinIndFeeType(code) {\r\n      return _this.getCodeName(\"CostType\", code);\r\n    },\r\n    filter_pdLevyFlag(code) {\r\n      return _this.getCodeName(\"LevyTaxes\", code);\r\n    },\r\n    filter_pdMngCom(code) {\r\n      for (const pdSlMgc of _this.pdSlMgcOptions) {\r\n        if (pdSlMgc.slMgcCode === code) {\r\n          return pdSlMgc.slMgcCode + \":\" + pdSlMgc.slMgcName;\r\n        }\r\n      }\r\n      return \"\";\r\n    },\r\n    filter_rateType(code) {\r\n      return _this.getCodeName(\"RateType\", code);\r\n    },\r\n    filter_currency(code) {\r\n      return _this.getCodeName(\"productCurrency\", code);\r\n    },\r\n  },\r\n  data() {\r\n    _this = this;\r\n    return {\r\n      form_addTax: {\r\n        id: undefined,\r\n        pdVerId: \"\",\r\n        operator: \"\",\r\n        pdInfoId: \"\",\r\n        pdCode: \"\",\r\n        pdFinIndiAttr: \"\",\r\n        pdBussId: \"\",\r\n        pdBussCode: \"\",\r\n        pdFinIndiType: \"\",\r\n        pdRateCurr: \"\",\r\n        pdAnnuRate: \"\",\r\n        pdMonRate: \"\",\r\n        pdDayRate: \"\",\r\n        pdFinIndFeeType: \"\",\r\n        pdLevyFlag: \"N\",\r\n        pdTaxRate: \"\",\r\n        pdVailStartDate: new Date(),\r\n        pdVailEndDate: \"9999-12-31\",\r\n        pdMngCom: [],\r\n        pdSuitFlag: \"\",\r\n        pdCalcCode: \"\",\r\n      },\r\n      form_productRatio: {\r\n        rateType: \"\",\r\n        currency: \"\",\r\n        yearRateInput: \"\",\r\n        monthRateInput: \"\",\r\n        dayRateInput: \"\",\r\n        startRateDate: new Date(),\r\n        endRateDate: \"9999-12-31\",\r\n      },\r\n      //初始化表格\r\n      tableData: [],\r\n      initTableData: [],\r\n      addedTaxTable: [],\r\n      sizeForm3: [],\r\n      checkAddedTax: [],\r\n      //初始化下拉选\r\n      pdSlMgcOptions: [],\r\n      feeTypeFilters: [],\r\n      pdMngComFilters: [],\r\n      params: {\r\n        pdInfoId: \"\",\r\n      },\r\n      tableSelect: false,\r\n      needShowMore_addTax: false,\r\n      showAll_addTax: false,\r\n\r\n      rules: {\r\n        pdFinIndFeeType: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseSelect\") +\r\n              this.$t(\"productValueAddedTax.pdFinIndFeeType\"),\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        pdLevyFlag: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseEnter\") +\r\n              this.$t(\"productValueAddedTax.pdLevyFlag\"),\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        pdTaxRate: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseEnter\") +\r\n              this.$t(\"productValueAddedTax.pdTaxRate\"),\r\n            trigger: \"blur\",\r\n          },\r\n          { type: \"number\", message: \"税率值不是数字\", trigger: \"blur\" },\r\n        ],\r\n        pdVailStartDate: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseEnter\") +\r\n              this.$t(\"productValueAddedTax.pdVailStartDate\"),\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value > this.form_addTax.pdVailEndDate) {\r\n                callback(\r\n                  new Error(this.$t(\"productValueAddedTax.timeLessThenEndData\"))\r\n                );\r\n              }\r\n              let _pdFinIndFeeType = this.form_addTax.pdFinIndFeeType;\r\n              let _pdLevyFlag = this.form_addTax.pdLevyFlag;\r\n              let _pdTaxRate = this.form_addTax.pdTaxRate;\r\n              let _dateEnd = Date.parse(value);\r\n              let _pdMngCom = this.form_addTax.pdMngCom;\r\n              let _flag = true;\r\n              let num;\r\n              let __pdMngCom = false;\r\n              for (let num1 = 0; num1 < _pdMngCom.length; num1++) {\r\n                let b = false;\r\n                for (num = 0; num < this.addedTaxTable.length; num++) {\r\n                  if (_pdMngCom[num1] == this.addedTaxTable[num].pdMngCom) {\r\n                    __pdMngCom = true;\r\n                    b = true;\r\n                    break;\r\n                  }\r\n                }\r\n                if (b == false) {\r\n                  __pdMngCom = false;\r\n                  break;\r\n                }\r\n              }\r\n              for (num = 0; num < this.addedTaxTable.length; num++) {\r\n                if (this.form_addTax.id != this.addedTaxTable[num].id) {\r\n                  if (\r\n                    _pdFinIndFeeType == this.addedTaxTable[num].pdFinIndFeeType\r\n                  ) {\r\n                    if (\r\n                      _pdLevyFlag == this.addedTaxTable[num].pdLevyFlag &&\r\n                      _pdLevyFlag == \"Y\"\r\n                    ) {\r\n                      if (_pdTaxRate == this.addedTaxTable[num].pdTaxRate) {\r\n                        if (this.addedTaxTable[num].pdVailStartDate) {\r\n                          let dateDemo = Date.parse(\r\n                            this.addedTaxTable[num].pdVailStartDate\r\n                          );\r\n                          if (this.addedTaxTable[num].pdVailEndDate) {\r\n                            let dateDemo2 = Date.parse(\r\n                              this.addedTaxTable[num].pdVailEndDate\r\n                            );\r\n                            if (dateDemo <= _dateEnd && dateDemo2 >= _dateEnd) {\r\n                              _flag = false;\r\n                              callback(new Error(\"日期不可交叉\"));\r\n                            } else {\r\n                              _flag = true;\r\n                            }\r\n                          }\r\n                        }\r\n                      } else {\r\n                        callback();\r\n                      }\r\n                    } else {\r\n                      if (__pdMngCom == true) {\r\n                        if (this.addedTaxTable[num].pdVailStartDate) {\r\n                          let dateDemo = Date.parse(\r\n                            this.addedTaxTable[num].pdVailStartDate\r\n                          );\r\n                          if (this.addedTaxTable[num].pdVailEndDate) {\r\n                            let dateDemo2 = Date.parse(\r\n                              this.addedTaxTable[num].pdVailEndDate\r\n                            );\r\n                            if (\r\n                              (dateDemo <= _dateEnd && dateDemo2 >= _dateEnd) ||\r\n                              (dateDemo >= _dateEnd &&\r\n                                dateDemo2 <= this.form_addTax.pdVailEndDate)\r\n                            ) {\r\n                              _flag = false;\r\n                              callback(new Error(\"日期不可交叉\"));\r\n                            } else {\r\n                              _flag = true;\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              if (_flag) {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n        pdVailEndDate: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseEnter\") +\r\n              this.$t(\"productValueAddedTax.pdVailEndDate\"),\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value < this.form_addTax.pdVailStartDate) {\r\n                callback(\r\n                  new Error(this.$t(\"productValueAddedTax.timeLessThenEndData\"))\r\n                );\r\n              }\r\n              let _pdFinIndFeeType = this.form_addTax.pdFinIndFeeType;\r\n              let _pdLevyFlag = this.form_addTax.pdLevyFlag;\r\n              let _pdTaxRate = this.form_addTax.pdTaxRate;\r\n              let _dateEnd = Date.parse(value);\r\n              let _flag = true;\r\n              let _arr = [];\r\n              let num = 0;\r\n              let _pdMngCom = this.form_addTax.pdMngCom;\r\n              let __pdMngCom = false;\r\n              for (let num1 = 0; num1 < _pdMngCom.length; num1++) {\r\n                let b = false;\r\n                for (num = 0; num < this.addedTaxTable.length; num++) {\r\n                  if (_pdMngCom[num1] == this.addedTaxTable[num].pdMngCom) {\r\n                    __pdMngCom = true;\r\n                    b = true;\r\n                    break;\r\n                  }\r\n                }\r\n                if (b == false) {\r\n                  __pdMngCom = false;\r\n                  break;\r\n                }\r\n              }\r\n              for (num = 0; num < this.addedTaxTable.length; num++) {\r\n                if (this.form_addTax.id != this.addedTaxTable[num].id) {\r\n                  if (\r\n                    _pdFinIndFeeType == this.addedTaxTable[num].pdFinIndFeeType\r\n                  ) {\r\n                    if (\r\n                      _pdLevyFlag == this.addedTaxTable[num].pdLevyFlag &&\r\n                      _pdLevyFlag == \"Y\"\r\n                    ) {\r\n                      if (_pdTaxRate == this.addedTaxTable[num].pdTaxRate) {\r\n                        if (this.addedTaxTable[num].pdVailStartDate) {\r\n                          let dateDemo = Date.parse(\r\n                            this.addedTaxTable[num].pdVailStartDate\r\n                          );\r\n                          if (this.addedTaxTable[num].pdVailEndDate) {\r\n                            let dateDemo2 = Date.parse(\r\n                              this.addedTaxTable[num].pdVailEndDate\r\n                            );\r\n                            if (dateDemo <= _dateEnd && dateDemo2 >= _dateEnd) {\r\n                              _flag = false;\r\n                              callback(new Error(\"日期不可交叉\"));\r\n                            } else {\r\n                              _flag = true;\r\n                            }\r\n                          }\r\n                        }\r\n                      } else {\r\n                        callback();\r\n                      }\r\n                    } else {\r\n                      if (__pdMngCom == true) {\r\n                        if (this.addedTaxTable[num].pdVailStartDate) {\r\n                          let dateDemo = Date.parse(\r\n                            this.addedTaxTable[num].pdVailStartDate\r\n                          );\r\n                          if (this.addedTaxTable[num].pdVailEndDate) {\r\n                            let dateDemo2 = Date.parse(\r\n                              this.addedTaxTable[num].pdVailEndDate\r\n                            );\r\n                            if (\r\n                              (dateDemo <= _dateEnd && dateDemo2 >= _dateEnd) ||\r\n                              (dateDemo >= this.form_addTax.pdVailStartDate &&\r\n                                dateDemo2 <= _dateEnd)\r\n                            ) {\r\n                              _flag = false;\r\n                              callback(new Error(\"日期不可交叉\"));\r\n                            } else {\r\n                              _flag = true;\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              if (_flag) {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n        pdMngCom: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseSelect\") +\r\n              this.$t(\"productValueAddedTax.pdMngCom\"),\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        rateType: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseSelect\") +\r\n              this.$t(\"productValueAddedTax.rateType\"),\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        currency: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseSelect\") +\r\n              this.$t(\"productValueAddedTax.currency\"),\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        startRateDate: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseEnter\") +\r\n              this.$t(\"productValueAddedTax.pdVailStartDate\"),\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value > this.form_productRatio.endRateDate) {\r\n                callback(\r\n                  new Error(this.$t(\"productValueAddedTax.timeLessThenEndData\"))\r\n                );\r\n              }\r\n              let _dateStart = Date.parse(value);\r\n              let _lyStype = this.form_productRatio.rateType;\r\n              let _currency = this.form_productRatio.currency;\r\n              let _flag = true;\r\n              let num;\r\n              for (num = 0; num < this.sizeForm3.length; num++) {\r\n                if (\r\n                  this.sizeForm3[num].rateType == _lyStype &&\r\n                  this.sizeForm3[num].currency == _currency\r\n                ) {\r\n                  if (this.sizeForm3[num].startRateDate) {\r\n                    let dateDemo = Date.parse(\r\n                      this.sizeForm3[num].startRateDate\r\n                    );\r\n                    if (this.sizeForm3[num].endRateDate) {\r\n                      let dateDemo2 = Date.parse(\r\n                        this.sizeForm3[num].endRateDate\r\n                      );\r\n                      if (dateDemo <= _dateStart && dateDemo2 >= _dateStart) {\r\n                        _flag = false;\r\n                        callback(new Error(\"日期不可交叉\"));\r\n                      } else {\r\n                        _flag = true;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              if (_flag) {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n        endRateDate: [\r\n          {\r\n            required: true,\r\n            message:\r\n              this.$t(\"productValueAddedTax.pleaseEnter\") +\r\n              this.$t(\"productValueAddedTax.pdVailEndDate\"),\r\n            trigger: \"change\",\r\n          },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value < this.form_addTax.pdVailStartDate) {\r\n                callback(\r\n                  new Error(this.$t(\"productValueAddedTax.timeLessThenEndData\"))\r\n                );\r\n              }\r\n              let _dateEnd = Date.parse(value);\r\n              let _lyStype = this.form_productRatio.rateType;\r\n              let _currency = this.form_productRatio.currency;\r\n              let _flag = true;\r\n              let num;\r\n              for (num = 0; num < this.sizeForm3.length; num++) {\r\n                  if (\r\n                    this.sizeForm3[num].rateType == _lyStype &&\r\n                    this.sizeForm3[num].currency == _currency\r\n                  ) {\r\n                    if (this.sizeForm3[num].startRateDate) {\r\n                      let dateDemo = Date.parse(\r\n                        this.sizeForm3[num].startRateDate\r\n                      );\r\n                      if (this.sizeForm3[num].endRateDate) {\r\n                        let dateDemo2 = Date.parse(\r\n                          this.sizeForm3[num].endRateDate\r\n                        );\r\n                        if (dateDemo <= _dateEnd && dateDemo2 >= _dateEnd) {\r\n                          _flag = false;\r\n                          callback(new Error(\"日期不可交叉\"));\r\n                        } else {\r\n                          _flag = true;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n              }\r\n              if (_flag) {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  computed: {},\r\n  async created() {\r\n    let pdtempPdInfo = this.getPdData();\r\n    this.params.pdInfoId = pdtempPdInfo.id;\r\n    this.form_addTax.pdInfoId = pdtempPdInfo.id;\r\n    this.form_addTax.pdVerId = pdtempPdInfo.pdVerId;\r\n    this.form_addTax.pdCode = pdtempPdInfo.pdCode;\r\n    await this.initMgcInfo();\r\n    await this.initTable();\r\n  },\r\n  watch: {\r\n    addedTaxTable: function () {\r\n      if (this.addedTaxTable.length > 0) {\r\n        this.feeTypeFilters = [];\r\n        this.pdMngComFilters = [];\r\n        this.addedTaxTable.forEach((val) => {\r\n          this.feeTypeFilters.push({\r\n            text: this.getCodeName(\"CostType\", val.pdFinIndFeeType),\r\n            value: val.pdFinIndFeeType,\r\n          });\r\n          this.pdMngComFilters.push({\r\n            text: this.push_pdMngCom(val.pdMngCom),\r\n            value: val.pdMngCom,\r\n          });\r\n        });\r\n        //费用类型\r\n        this.feeTypeFilters = this.feeTypeFilters.reduce(function (\r\n          prev,\r\n          element\r\n        ) {\r\n          if (!prev.find((el) => el.text == element.text)) {\r\n            prev.push(element);\r\n          }\r\n          return prev;\r\n        },\r\n        []);\r\n        //管理机构\r\n        this.pdMngComFilters = this.pdMngComFilters.reduce(function (\r\n          prev,\r\n          element\r\n        ) {\r\n          if (!prev.find((el) => el.text == element.text)) {\r\n            prev.push(element);\r\n          }\r\n          return prev;\r\n        },\r\n        []);\r\n      }\r\n    },\r\n    \"form_addTax.pdMngCom\"(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const pdSlMgc of this.pdSlMgcOptions) {\r\n          pdSlMgc.disabled = false;\r\n        }\r\n      } else {\r\n        if (this._.includes(selectedCodes, \"0000\")) {\r\n          for (const pdSlMgc of this.pdSlMgcOptions) {\r\n            pdSlMgc.disabled = pdSlMgc.slMgcCode !== \"0000\";\r\n          }\r\n        } else {\r\n          for (const pdSlMgc of this.pdSlMgcOptions) {\r\n            pdSlMgc.disabled = pdSlMgc.slMgcCode === \"0000\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"form_addTax.pdLevyFlag\"() {\r\n      const val = this.form_addTax.pdLevyFlag;\r\n      if (val == \"N\") {\r\n        this.form_addTax.pdTaxRate = \"\";\r\n      }\r\n    },\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    initTable() {\r\n      findAllAddedTaxByProcudtId(this.buildRequestData(this.params)).then(\r\n        (response) => {\r\n          this.initTableData = response.data;\r\n          this.tableData = [];\r\n          this.sizeForm3 = [];\r\n          for (const addedTax of this.initTableData) {\r\n            if (\r\n              addedTax.pdFinIndFeeType != null &&\r\n              addedTax.pdFinIndFeeType != \"\"\r\n            ) {\r\n              this.tableData.push(addedTax);\r\n            } else if (\r\n              addedTax.pdFinIndiType != null &&\r\n              addedTax.pdFinIndiType != \"\"\r\n            ) {\r\n              this.sizeForm3.push({\r\n                id: addedTax.id,\r\n                rateType: addedTax.pdFinIndiType,\r\n                currency: addedTax.pdRateCurr,\r\n                yearRateInput: parseInt(addedTax.pdAnnuRate*100)+'%',\r\n                monthRateInput: parseInt(addedTax.pdMonRate*100)+'%',\r\n                dayRateInput: parseInt(addedTax.pdDayRate*100)+'%',\r\n                startRateDate: addedTax.pdVailStartDate,\r\n                endRateDate: addedTax.pdVailEndDate,\r\n              });\r\n            }\r\n          }\r\n          //展示更多或者收起\r\n          this.showAll_addTax = false;\r\n          if (this.tableData.length > 10) {\r\n            this.addedTaxTable = this.tableData.slice(0, 10);\r\n            this.needShowMore_addTax = true;\r\n          } else {\r\n            this.addedTaxTable = this.tableData;\r\n            this.needShowMore_addTax = false;\r\n          }\r\n        }\r\n      );\r\n    },\r\n    initMgcInfo() {\r\n      if (!this.form_addTax.pdInfoId) {\r\n        return;\r\n      }\r\n      this.pdSlMgcOptions = [];\r\n      getAllSysSlMgc().then((response) => {\r\n        for (const pdSlMgc of response.data) {\r\n          this.pdSlMgcOptions.push(pdSlMgc);\r\n        }\r\n        this.form_addTax.pdMngCom = [\"0000\"];\r\n      });\r\n      for (const pdSlMgc of this.pdSlMgcOptions) {\r\n        this.$set(pdSlMgc, \"disabled\", false);\r\n      }\r\n    },\r\n    push_pdMngCom(code) {\r\n      for (const pdSlMgc of this.pdSlMgcOptions) {\r\n        if (pdSlMgc.slMgcCode === code) {\r\n          return pdSlMgc.slMgcCode + \":\" + pdSlMgc.slMgcName;\r\n        }\r\n      }\r\n    },\r\n    filterHandler(value, row, column) {\r\n      if (column) {\r\n        const property = column[\"property\"];\r\n        return row[property] === value;\r\n      }\r\n    },\r\n    addTax() {\r\n      this.$refs.form_addTax.validate((valid) => {\r\n        if (valid) {\r\n          let pdtempPdFinInds = [];\r\n          let pdMngCom = this.form_addTax.pdMngCom;\r\n          for (let i = 0; i < pdMngCom.length; i++) {\r\n            let pdtempPdFinInd = JSON.parse(JSON.stringify(this.form_addTax));\r\n            pdtempPdFinInd.pdFinIndiAttr = 'A';\r\n            pdtempPdFinInd.pdMngCom = pdMngCom[i];\r\n            pdtempPdFinInds.push(pdtempPdFinInd);\r\n          }\r\n          addTax(\r\n            this.buildRequestData({ pdtempPdFinInds: pdtempPdFinInds })\r\n          ).then(() => {\r\n            this.resetForm();\r\n            this.initTable();\r\n            this.$emit(\"childFn\", true);\r\n            this.notifySuccess(this.$t(\"successMessage.add\"));\r\n          });\r\n        }\r\n      });\r\n    },\r\n    updateTax() {\r\n      this.$refs.form_addTax.validate((valid) => {\r\n        if (valid) {\r\n          let pdtempPdFinInd = this.form_addTax;\r\n          pdtempPdFinInd.pdMngCom = this.form_addTax.pdMngCom[0];\r\n          updateTax(\r\n            this.buildRequestData({ pdtempPdFinInd: pdtempPdFinInd })\r\n          ).then(() => {\r\n            this.resetForm();\r\n            this.initMgcInfo();\r\n            this.initTable();\r\n            this.$emit(\"childFn\", true);\r\n            this.notifySuccess(this.$t(\"successMessage.update\"));\r\n          });\r\n        }\r\n      });\r\n    },\r\n    addRateData() {\r\n      this.$refs.form_productRatio.validate((valid) => {\r\n        if (valid) {\r\n          let PdtempPdFinInd = {\r\n            pdVerId: this.form_addTax.pdVerId,\r\n            pdCode: this.form_addTax.pdCode,\r\n            pdInfoId: this.form_addTax.pdInfoId,\r\n            pdFinIndiType: this.form_productRatio.rateType,\r\n            pdRateCurr: this.form_productRatio.currency,\r\n            pdAnnuRate: this.form_productRatio.yearRateInput/100,\r\n            pdMonRate: this.form_productRatio.monthRateInput/100,\r\n            pdDayRate: this.form_productRatio.dayRateInput/100,\r\n            pdVailStartDate: this.form_productRatio.startRateDate,\r\n            pdVailEndDate: this.form_productRatio.endRateDate,\r\n            pdFinIndiAttr: 'R',\r\n          };\r\n          addRateData(\r\n            this.buildRequestData({ PdtempPdFinInd: PdtempPdFinInd })\r\n          ).then((res) => {\r\n            this.initMgcInfo();\r\n            this.initTable();\r\n            this.$refs.form_productRatio.clearValidate();\r\n            this.$refs.form_productRatio.resetFields();\r\n            this.$emit(\"childFn\", true);\r\n            this.notifySuccess(this.$t(\"successMessage.add\"));\r\n          });\r\n        }\r\n      });\r\n    },\r\n    cleanRateData() {\r\n      this.form_productRatio = {\r\n        rateType: \"\",\r\n        currency: \"\",\r\n        yearRateInput: \"\",\r\n        monthRateInput: \"\",\r\n        dayRateInput: \"\",\r\n        startRateDate: new Date(),\r\n        endRateDate: \"9999-12-31\",\r\n      };\r\n\r\n    },\r\n    deleteRateData(row) {\r\n      let delKeys = [];\r\n      delKeys.push(row.id);\r\n      deleteTax(this.buildRequestData({ delKeys: delKeys })).then(() => {\r\n        this.initMgcInfo();\r\n        this.initTable();\r\n        this.notifySuccess(this.$t(\"successMessage.delete\"));\r\n      });\r\n    },\r\n    deleteTax() {\r\n      let delKeys = this.checkAddedTax.map((tax) => tax.id);\r\n      deleteTax(this.buildRequestData({ delKeys: delKeys })).then(() => {\r\n        this.initMgcInfo();\r\n        this.initTable();\r\n        this.notifySuccess(this.$t(\"successMessage.delete\"));\r\n      });\r\n    },\r\n    deleteMoreTax() {\r\n      this.deleteTax();\r\n    },\r\n    checkAddedTaxTable(val) {\r\n      this.checkAddedTax = val;\r\n      this.$nextTick(() => {\r\n        if (this.checkAddedTax.length == 1) {\r\n          Object.assign(this.form_addTax, val[0]);\r\n          this.form_addTax.pdMngCom = [val[0].pdMngCom];\r\n          this.tableSelect = true;\r\n        } else if (this.checkAddedTax.length == 0) {\r\n          this.resetForm();\r\n        }\r\n      });\r\n    },\r\n    showMore_addTax() {\r\n      this.showAll_addTax = true;\r\n      this.addedTaxTable = this.tableData;\r\n    },\r\n    showBack_addTax() {\r\n      this.showAll_addTax = false;\r\n      this.addedTaxTable = this.tableData.slice(0, 10);\r\n    },\r\n    resetForm() {\r\n      this.tableSelect = false;\r\n      this.$refs.multipleTable.clearSelection();\r\n      this.$refs.form_addTax.resetFields();\r\n      this.form_addTax = {\r\n        id: undefined,\r\n        pdVerId: this.form_addTax.pdVerId,\r\n        operator: \"\",\r\n        pdInfoId: this.form_addTax.pdInfoId,\r\n        pdCode: this.form_addTax.pdCode,\r\n        pdFinIndiAttr: \"\",\r\n        pdBussId: \"\",\r\n        pdBussCode: \"\",\r\n        pdFinIndiType: \"\",\r\n        pdRateCurr: \"\",\r\n        pdAnnuRate: \"\",\r\n        pdMonRate: \"\",\r\n        pdDayRate: \"\",\r\n        pdFinIndFeeType: \"\",\r\n        pdLevyFlag: \"N\",\r\n        pdTaxRate: \"\",\r\n        pdVailStartDate: new Date(),\r\n        pdVailEndDate: \"9999-12-31\",\r\n        pdMngCom: [\"0000\"],\r\n        pdSuitFlag: \"\",\r\n        pdCalcCode: \"\",\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n</style>\r\n"]}]}