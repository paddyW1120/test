{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\wecom-login\\wecom-dashboard\\wecomlist\\assign.vue?vue&type=style&index=0&id=99cb4208&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\wecom-login\\wecom-dashboard\\wecomlist\\assign.vue","mtime":1609847107216},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoNCi5kYXNoYm9hcmQtY29udGFpbmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjhmYTsNCn0NCg0KLnZhbi1hZGRyZXNzLWl0ZW1fX2VkaXQgew0KICBkaXNwbGF5OiBub25lOw0KfQ0KDQoudmFuLXBhZ2luYXRpb24gew0KICBtYXJnaW4tdG9wOiAtMjBweDsNCn0NCg0KLnZhbi1idXR0b257DQogIGJhY2tncm91bmQtY29sb3I6ICMxOTg5ZmEgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzE5ODlmYTsNCn0NCg0KLnZhbi1hZGRyZXNzLWl0ZW1fX25hbWV7DQogIGZvbnQtc2l6ZTogMTRweDsNCn0NCg0K"},{"version":3,"sources":["assign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"assign.vue","sourceRoot":"src/views/wecom-login/wecom-dashboard/wecomlist","sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <van-nav-bar\r\n      title=\"任务分配\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n    />\r\n    <van-dropdown-menu active-color=\"#1989fa\">\r\n      <van-dropdown-item title=\"筛选\" ref=\"item\">\r\n        <van-cell-group>\r\n          <van-field v-model=\"params.userCode\" clearable :label=\"$t('i18nView.transcatorCode')\" :placeholder=\"$t('form.please_enter')\"/>\r\n        </van-cell-group>\r\n        <van-cell-group>\r\n          <van-field v-model=\"params.userName\" clearable :label=\"$t('i18nView.transcatorName')\" :placeholder=\"$t('form.please_enter')\"/>\r\n        </van-cell-group>\r\n        <div style=\"padding: 5px 16px;\">\r\n          <van-button type=\"info\" size=\"small\" block round @click=\"onConfirm\">\r\n            确认\r\n          </van-button>\r\n        </div>\r\n      </van-dropdown-item>\r\n    </van-dropdown-menu>\r\n\r\n    <van-address-list\r\n      active-color=\"#1989fa\"\r\n      v-model=\"chosenUser\"\r\n      :list=\"datas\"\r\n      default-tag-text=\"选中\"\r\n      add-button-text=\"确认\"\r\n      @add=\"doAssign\"\r\n    />\r\n\r\n    <van-pagination v-model=\"currentPage\" :items-per-page=\"5\" :total-items=\"total\" mode=\"simple\" @change=\"changePage\"/>\r\n\r\n\r\n    <cus-pagination :autoBuild=\"false\" v-show=\"false\" :pageSize=\"5\" :refreshDone=\"refreshDone\" :params=\"params\"\r\n                    ref=\"page\"\r\n                    url=\"/workflow/getAllUsers\"\r\n                    v-model=\"configs\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { mapGetters } from 'vuex'\r\n\r\nimport {\r\n  assignTask\r\n} from '@/api/workflow/workflow'\r\n\r\n\r\nimport Vue from 'vue'\r\nimport {\r\n  Col,\r\n  Row,\r\n  List,\r\n  Button,\r\n  CellGroup,\r\n  Cell,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  Toast,\r\n  Field,\r\n  NavBar,\r\n  AddressList\r\n  , Pagination\r\n} from 'vant'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nVue.use(Pagination)\r\nVue.use(AddressList)\r\nVue.use(NavBar)\r\nVue.use(Field)\r\nVue.use(DropdownMenu)\r\nVue.use(DropdownItem)\r\n\r\nVue.use(CellGroup)\r\nVue.use(Cell)\r\nVue.use(Button)\r\nVue.use(Col)\r\nVue.use(List)\r\nVue.use(Row)\r\n\r\nexport default {\r\n  name: 'taskAssignment',\r\n  computed: {\r\n    ...mapGetters([\r\n      'rolecodes'\r\n    ])\r\n  },\r\n  components: {},\r\n  data() {\r\n    return {\r\n      configs: [],\r\n      datas: [],\r\n      chosenUser: '',\r\n      params: {\r\n        userCode: '',\r\n        userName: ''\r\n      },\r\n      form: {\r\n        userCode: '',\r\n        taskId: '',\r\n        taskName: '',\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdName: '',\r\n      },\r\n      showmsg: false,\r\n      monitorShow: false,\r\n      enableAdd: false,\r\n      total: 0,\r\n      currentPage: 1,\r\n      isDownLoading: false, // 下拉刷新\r\n      isUpLoading: false, // 上拉加载\r\n      upFinished: false // 上拉加载完毕\r\n    }\r\n  },\r\n  created() {\r\n    if (this.rolecodes.indexOf('superAdmin') > 0) {\r\n      this.monitorShow = true\r\n    }\r\n    let pdtempPdInfo = this.getJsonData('phone-pdInfo')\r\n    if (pdtempPdInfo) {\r\n      this.chosenUser = pdtempPdInfo.assignName\r\n      this.form.taskId = pdtempPdInfo.taskId\r\n      this.form.taskName = pdtempPdInfo.taskName\r\n      this.form.pdCode = pdtempPdInfo.pdCode\r\n      this.form.pdEdition = pdtempPdInfo.pdEdition\r\n      this.form.pdName = pdtempPdInfo.pdName\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$refs.page.buildData()\r\n  },\r\n  methods: {\r\n    doAssign() {\r\n      if (this.chosenUser) {\r\n        this.form.userCode = this.chosenUser\r\n        assignTask(this.form).then(response => {\r\n          Toast(\"分配成功\")\r\n        })\r\n      }else {\r\n        Toast(\"请选择一个用户分配\")\r\n      }\r\n    },\r\n    onClickLeft() {\r\n      this.$router.go(-1)\r\n    },\r\n    refreshDone(data) {\r\n      const rows = data.records\r\n      this.currentPage = data.current\r\n      this.total = data.total\r\n      this.datas = []\r\n      rows.forEach(c => {\r\n        this.datas.push({\r\n          id: c.userCode,\r\n          name: c.userName,\r\n          tel: c.phone,\r\n          address: c.userCode + '              ' + c.email\r\n        })\r\n      })\r\n\r\n    },\r\n    //瀑布流效果\r\n    changePage(val) {\r\n      this.$refs.page.page = val\r\n      this.$refs.page.buildData()\r\n    },\r\n    onConfirm() {\r\n      this.$refs.item.toggle()\r\n      this.datas = []\r\n      this.$refs.page.page = 1\r\n      this.$refs.page.buildData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n.dashboard-container {\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n.van-address-item__edit {\r\n  display: none;\r\n}\r\n\r\n.van-pagination {\r\n  margin-top: -20px;\r\n}\r\n\r\n.van-button{\r\n  background-color: #1989fa !important;\r\n  border: 1px solid #1989fa;\r\n}\r\n\r\n.van-address-item__name{\r\n  font-size: 14px;\r\n}\r\n\r\n</style>\r\n"]}]}