{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-testing\\preservation-test\\addpolicy\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-testing\\preservation-test\\addpolicy\\index.vue","mtime":1615972235964},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7DQogIGluaXRFbGVtZW50LA0KICBkb3dubG9hZENhc2VUZW1wbGF0ZSwNCiAgdXBsb2FkVGVzdENhc2UNCn0gZnJvbSAnQC9hcGkvcGR0ZXN0L3Byb2R1Y3RUZXN0aW5nTmV3Jw0KDQppbXBvcnQgew0KICBxdWVyeUN1c3RvbWVyTm8sDQogIGFkZFBvbGljeQ0KfSBmcm9tICdAL2FwaS9iYXNpY2luZm8vcHJvZHVjdFVuZGVyd3JpdGluZ1Rlc3QnDQppbXBvcnQgY3VzdG9tcGFnZSBmcm9tICdAL3ZpZXdzL3Byb2R1Y3QtdGVzdGluZy9uZXctc2luZ2xlLXRlc3QvY3VzdG9tcGFnZScNCg0KbGV0IF90aGlzDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICd1bmRlcndyaXRpbmdUZXN0Q2FzZURlZmluaXRpb24nLA0KICBmaWx0ZXJzOiB7DQogICAgZmlsdGVyU2V4VHlwZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3NleCcsIGNvZGUsIHRydWUpDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIGxldCBjaGVja0FnZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgIGlmICghdmFsdWUpIHsNCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiR0KCdwcm9kdWN0VGVzdGluZ05ld0Nhc2VEZWZpbml0aW9uLkFwcG50QWdlbXNnJykpKQ0KICAgICAgfQ0KICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkgew0KICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy4kdCgiaTE4blZpZXcucGxlYXNlSW5wdXROdW1WYWx1ZSIpKSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICh2YWx1ZSA8IDEpIHsNCiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKHRoaXMuJHQoImkxOG5WaWV3Lm5vdEFnZSIpKSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjYWxsYmFjaygpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgbGV0IGNoZWNrU2VxID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RUZXN0aW5nTmV3Q2FzZURlZmluaXRpb24uQXBwbnRTZXFtc2cnKSkpDQogICAgICB9DQogICAgICBpZiAodmFsdWUgPCAxKSB7DQogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+S4jeWPr+Wwj+S6jjEnKSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNhbGxiYWNrKCkNCiAgICAgIH0NCiAgICB9DQogICAgX3RoaXMgPSB0aGlzDQogICAgcmV0dXJuIHsNCiAgICAgIHRlc3RDYXNlVHlwZTogeyAnMSc6ICfoh6rliqjljJbmtYvor5UnLCAnMic6ICfoh6rlrprkuYnmtYvor5UnIH0sDQogICAgICB0ZXN0Q2FzZURlZmluaXRpb246IHsgJzEnOiAn6aG16Z2i5a6a5LmJJywgJzInOiAn5LiK5Lyg5a6a5LmJJyB9LA0KICAgICAgc2VsZWN0Q29uZmlnczI6ICcnLA0KICAgICAgc2VsZWN0Q29uZmlnczM6ICcnLA0KICAgICAgZnVuY1NlbGVjdDogW10sDQogICAgICBlbGVtZW50RGF0YXNTaG93OiBmYWxzZSwNCiAgICAgIGVsZW1lbnREYXRhczoge30sDQogICAgICBjdXJyZW50UGRQYWdlRGF0YToge30sDQogICAgICBlbGVtZW50UnVsZXM6IHt9LA0KICAgICAgY29uZmlnczI6IFtdLA0KICAgICAgY29uZmlnczM6IFtdLA0KICAgICAgdGFibGVGbGFnOiBmYWxzZSwNCiAgICAgIHF1aWNraWNvbjogJ2VsLWljb24tYXJyb3ctcmlnaHQnLA0KICAgICAgZmlsZUxpc3Q6IFtdLA0KICAgICAgcGRJbmZvOiB7DQogICAgICAgIHBkSW5mb0lkOiAnJywNCiAgICAgICAgY29tbW9kaXR5VHlwZTogJycNCiAgICAgIH0sDQogICAgICBDYXNlRGVmaW5pdGlvbjogew0KICAgICAgICBwZEluZm9JZDogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIHBkRWRpdGlvbjogJycsDQogICAgICAgIHBkVGVzdE1vZHVsZUNvZGU6ICcnDQogICAgICB9LA0KICAgICAgZGVmUnVsZXM6IHsNCiAgICAgICAgcGRUZXN0Q2FzZURlc2M6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFRlc3RpbmdOZXdDYXNlRGVmaW5pdGlvbi5jYXNlZGVzY21zZycpLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XSwNCiAgICAgICAgdGVzdFBvaW50OiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RUZXN0aW5nTmV3Q2FzZURlZmluaXRpb24udGVzdHBvaW50bXNnJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgfV0NCiAgICAgIH0sDQogICAgICBDYXNlRGV0YWlsczoge30sDQogICAgICBjdXN0b21lcnM6IFtdLA0KICAgICAgcG9saWN5VXBkYXRlRmxhZzogZmFsc2UsDQogICAgICBwb2xpY3lIb2xkZXJGb3JtRmxhZzogZmFsc2UsDQogICAgICBwb2xpY3lIb2xkZXI6IHsNCiAgICAgICAgcEtleTogJycsDQogICAgICAgIGN1c3RvbWVyUm9sZTogJycsDQogICAgICAgIGN1c3RvbWVyQ29kZTogJ3BvbGljeWhvbGRlcicsDQogICAgICAgIGFwcG50U2VxOiAxLA0KICAgICAgICBhcHBudEFnZTogJycsDQogICAgICAgIGFwcG50Tm86ICcnLA0KICAgICAgICBhcHBudFNleDogJycsDQogICAgICAgIGFnZVVuaXQ6ICdZJywNCiAgICAgICAgc21va2VGbGFnOiAnTicsDQogICAgICAgIHJlbGF0aW9uVG9JbnN1cmVkOiAnJywNCiAgICAgICAgb2NjdXBhdGlvblR5cGU6ICcnLA0KICAgICAgICBzYWxhcnk6ICcnDQogICAgICB9LA0KICAgICAgcG9saWN5SG9sZGVyUnVsZXM6IHsNCiAgICAgICAgYXBwbnRTZXE6IFt7IHZhbGlkYXRvcjogY2hlY2tTZXEsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgYXBwbnRBZ2U6IFsNCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tBZ2UsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIGFwcG50U2V4OiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0VGVzdGluZ05ld0Nhc2VEZWZpbml0aW9uLkFwcG50U2V4bXNnJyksDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICAgIH1dDQogICAgICB9LA0KICAgICAgaW5zdXJlZFVwZGF0ZUZsYWc6IGZhbHNlLA0KICAgICAgaW5zdXJlZDogew0KICAgICAgICBwS2V5OiAnJywNCiAgICAgICAgY3VzdG9tZXJSb2xlOiAnJywNCiAgICAgICAgY3VzdG9tZXJDb2RlOiAnaW5zdXJlZCcsDQogICAgICAgIGluc3VyZWRTZXE6IDEsDQogICAgICAgIGluc3VyZWRBcHBBZ2U6ICcnLA0KICAgICAgICBhZ2VVbml0OiAnWScsDQogICAgICAgIGluc3VyZWRObzogJycsDQogICAgICAgIGluc3VyZWRTZXg6ICcnLA0KICAgICAgICBzbW9rZUZsYWc6ICdOJywNCiAgICAgICAgcmVsYXRpb25Ub01JbnN1cmVkOiAnJywNCiAgICAgICAgb2NjdXBhdGlvblR5cGU6ICcnLA0KICAgICAgICBzYWxhcnk6ICcnDQogICAgICB9LA0KICAgICAgaW5zdXJlZFJ1bGVzOiB7DQogICAgICAgIGluc3VyZWRTZXE6IFt7IHZhbGlkYXRvcjogY2hlY2tTZXEsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgaW5zdXJlZEFwcEFnZTogW3sgdmFsaWRhdG9yOiBjaGVja0FnZSwgdHJpZ2dlcjogJ2JsdXInIH1dLA0KICAgICAgICBpbnN1cmVkU2V4OiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0VGVzdGluZ05ld0Nhc2VEZWZpbml0aW9uLkFwcG50U2V4bXNnJyksIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dDQogICAgICB9LA0KICAgICAgYmVuZWZpY2lhcnk6IHsNCiAgICAgICAgcEtleTogJycsDQogICAgICAgIGN1c3RvbWVyUm9sZTogJycsDQogICAgICAgIGN1c3RvbWVyQ29kZTogJ2JlbmVmaWNpYXJ5JywNCiAgICAgICAgYm5mU2VxOiAxLA0KICAgICAgICBiZWxUb0luc3VyZWRTZXE6ICcnLA0KICAgICAgICBibmZBZ2U6ICcnLA0KICAgICAgICBhZ2VVbml0OiAnWScsDQogICAgICAgIGJuZk5vOiAnJywNCiAgICAgICAgYm5mU2V4OiAnJywNCiAgICAgICAgc21va2VGbGFnOiAnTicsDQogICAgICAgIHJlbGF0aW9uVG9JbnN1cmVkOiAnJywNCiAgICAgICAgb2NjdXBhdGlvblR5cGU6ICcnLA0KICAgICAgICBzYWxhcnk6ICcnDQogICAgICB9LA0KICAgICAgYmVuZWZpY2lhcnlSdWxlczogew0KICAgICAgICBibmZTZXE6IFt7IHZhbGlkYXRvcjogY2hlY2tTZXEsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgYmVsVG9JbnN1cmVkU2VxOiBbeyB2YWxpZGF0b3I6IGNoZWNrU2VxLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgIGJuZkFnZTogWw0KICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja0FnZSwgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgYm5mU2V4OiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0VGVzdGluZ05ld0Nhc2VEZWZpbml0aW9uLkFwcG50U2V4bXNnJyksDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICAgIH1dDQogICAgICB9LA0KICAgICAgYmVuZWZpY2lhcnlGb3JtRmxhZzogZmFsc2UsDQogICAgICBibmZVcGRhdGVGbGFnOiBmYWxzZSwNCiAgICAgIHJlbGFVcGRhdGVGbGFnOiBmYWxzZSwNCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTE6IGZhbHNlLA0KICAgICAgLy/mo4Dpqozop4TliJkNCiAgICAgIHJ1bGVzOiB7fQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIGN1c3RvbXBhZ2UNCiAgfSwNCiAgY29tcHV0ZWQ6IHt9LA0KICBtb3VudGVkKCkgew0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGxldCBwZEluZm8gPSB0aGlzLmdldEpzb25EYXRhKCdwZFRlc3RJbmZvJykNCiAgICBpZiAocGRJbmZvKSB7DQogICAgICB0aGlzLnBkSW5mby5wZEluZm9JZCA9IHBkSW5mby5pZA0KICAgICAgdGhpcy5wZEluZm8uY29tbW9kaXR5VHlwZSA9IHBkSW5mby5jb21tb2RpdHlUeXBlDQogICAgICB0aGlzLkNhc2VEZWZpbml0aW9uLnBkSW5mb0lkID0gcGRJbmZvLmlkDQogICAgICB0aGlzLkNhc2VEZWZpbml0aW9uLnBkQ29kZSA9IHBkSW5mby5wZENvZGUNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24ucGROYW1lID0gcGRJbmZvLnBkTmFtZQ0KICAgICAgdGhpcy5DYXNlRGVmaW5pdGlvbi5wZEVkaXRpb24gPSBwZEluZm8ucGRFZGl0aW9uDQogICAgICB0aGlzLmluaXRFbGVtZW50KHBkSW5mby5wZENvZGUsIHBkSW5mby5pZCkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmaWx0ZXJDdXN0b21lck5vKHJvdykgew0KICAgICAgaWYgKHJvdy5jdXN0b21lckNvZGUgPT09ICdwb2xpY3lob2xkZXInKSB7DQogICAgICAgIHJldHVybiByb3cuYXBwbnRObw0KICAgICAgfSBlbHNlIGlmIChyb3cuY3VzdG9tZXJDb2RlID09PSAnaW5zdXJlZCcpIHsNCiAgICAgICAgcmV0dXJuIHJvdy5pbnN1cmVkTm8NCiAgICAgIH0gZWxzZSBpZiAocm93LmN1c3RvbWVyQ29kZSA9PT0gJ2JlbmVmaWNpYXJ5Jykgew0KICAgICAgICByZXR1cm4gcm93LmJuZk5vDQogICAgICB9DQogICAgfSwNCiAgICBmaWx0ZXJTZXEocm93KSB7DQogICAgICBpZiAocm93LmN1c3RvbWVyQ29kZSA9PT0gJ3BvbGljeWhvbGRlcicpIHsNCiAgICAgICAgcmV0dXJuIHJvdy5hcHBudFNlcQ0KICAgICAgfSBlbHNlIGlmIChyb3cuY3VzdG9tZXJDb2RlID09PSAnaW5zdXJlZCcpIHsNCiAgICAgICAgcmV0dXJuIHJvdy5pbnN1cmVkU2VxDQogICAgICB9IGVsc2UgaWYgKHJvdy5jdXN0b21lckNvZGUgPT09ICdiZW5lZmljaWFyeScpIHsNCiAgICAgICAgcmV0dXJuIHJvdy5ibmZTZXENCiAgICAgIH0NCiAgICB9LA0KICAgIGZpbHRlclNleChyb3cpIHsNCiAgICAgIGlmIChyb3cuY3VzdG9tZXJDb2RlID09PSAncG9saWN5aG9sZGVyJykgew0KICAgICAgICByZXR1cm4gcm93LmFwcG50U2V4DQogICAgICB9IGVsc2UgaWYgKHJvdy5jdXN0b21lckNvZGUgPT09ICdpbnN1cmVkJykgew0KICAgICAgICByZXR1cm4gcm93Lmluc3VyZWRTZXgNCiAgICAgIH0gZWxzZSBpZiAocm93LmN1c3RvbWVyQ29kZSA9PT0gJ2JlbmVmaWNpYXJ5Jykgew0KICAgICAgICByZXR1cm4gcm93LmJuZlNleA0KICAgICAgfQ0KICAgIH0sDQogICAgZmlsdGVyQWdlKHJvdykgew0KICAgICAgbGV0IHVuaXQgPSAnJw0KICAgICAgaWYgKHJvdy5hZ2VVbml0ID09PSAnWScpIHsNCiAgICAgICAgdW5pdCA9ICco5bKBKScNCiAgICAgIH0NCiAgICAgIGlmIChyb3cuYWdlVW5pdCA9PT0gJ0QnKSB7DQogICAgICAgIHVuaXQgPSAnKOWkqSknDQogICAgICB9DQogICAgICBpZiAocm93LmN1c3RvbWVyQ29kZSA9PT0gJ3BvbGljeWhvbGRlcicpIHsNCiAgICAgICAgcmV0dXJuIHJvdy5hcHBudEFnZSArIHVuaXQNCiAgICAgIH0gZWxzZSBpZiAocm93LmN1c3RvbWVyQ29kZSA9PT0gJ2luc3VyZWQnKSB7DQogICAgICAgIHJldHVybiByb3cuaW5zdXJlZEFwcEFnZSArIHVuaXQNCiAgICAgIH0gZWxzZSBpZiAocm93LmN1c3RvbWVyQ29kZSA9PT0gJ2JlbmVmaWNpYXJ5Jykgew0KICAgICAgICByZXR1cm4gcm93LmJuZkFnZSArIHVuaXQNCiAgICAgIH0NCiAgICB9LA0KICAgIHNhdmVQb2xpY3lIb2xkZXIoKSB7DQogICAgICB0aGlzLiRyZWZzLnBvbGljeUZvcm0udmFsaWRhdGUocGFzcyA9PiB7DQogICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgLy/mn6Xor6LlrqLmiLflj7cNCiAgICAgICAgICBxdWVyeUN1c3RvbWVyTm8odGhpcy5idWlsZFJlcXVlc3REYXRhKHsNCiAgICAgICAgICAgICdzZXgnOiB0aGlzLnBvbGljeUhvbGRlci5hcHBudFNleCwNCiAgICAgICAgICAgICdhZ2UnOiB0aGlzLnBvbGljeUhvbGRlci5hcHBudEFnZQ0KICAgICAgICAgIH0pKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBsZXQgY3VzdG9tTm8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgaWYgKGN1c3RvbU5vKSB7DQogICAgICAgICAgICAgIHRoaXMucG9saWN5SG9sZGVyLmFwcG50Tm8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICBpZiAodGhpcy5wb2xpY3lVcGRhdGVGbGFnKSB7IC8v5b2T5YmN5Li65pu05pawDQogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRLZXkgPSB0aGlzLnBvbGljeUhvbGRlci5wS2V5DQogICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBvbGljeUhvbGRlcikNCiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWVycyA9IHRoaXMuY3VzdG9tZXJzLm1hcChpdGVtID0+IGl0ZW0ucEtleSA9PT0gY3VycmVudEtleSA/IHRlbXAgOiBpdGVtKQ0KICAgICAgICAgICAgICAgIHRoaXMucG9saWN5VXBkYXRlRmxhZyA9IGZhbHNlDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5wb2xpY3lIb2xkZXIucEtleSA9ICdwb2xpY3knICsgKHRoaXMuY3VzdG9tZXJzLmxlbmd0aCArIDEpDQogICAgICAgICAgICAgICAgdGhpcy5wb2xpY3lIb2xkZXIuY3VzdG9tZXJSb2xlID0gJ+aKleS/neS6uicNCiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucG9saWN5SG9sZGVyKQ0KICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJzLnB1c2godGVtcCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLnBvbGljeUZvcm0ucmVzZXRGaWVsZHMoKQ0KICAgICAgICAgICAgICB0aGlzLnBvbGljeUhvbGRlci5hcHBudFNlcSA9IHRoaXMucG9saWN5SG9sZGVyLmFwcG50U2VxICsgMQ0KICAgICAgICAgICAgICB0aGlzLnBvbGljeUhvbGRlci5hcHBudE5vID0gJycNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFRlc3RpbmdOZXdDYXNlRGVmaW5pdGlvbi5jdXN0b21Ob0Vycm9yTXNnJykpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHNhdmVJbnN1cmVkKCkgew0KICAgICAgdGhpcy4kcmVmc1snaW5zdXJlZEZvcm0nXS52YWxpZGF0ZShwYXNzID0+IHsNCiAgICAgICAgaWYgKHBhc3MpIHsNCiAgICAgICAgICAvL+afpeivouWuouaIt+WPtw0KICAgICAgICAgIHF1ZXJ5Q3VzdG9tZXJObyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoew0KICAgICAgICAgICAgJ3NleCc6IHRoaXMuaW5zdXJlZC5pbnN1cmVkU2V4LA0KICAgICAgICAgICAgJ2FnZSc6IHRoaXMuaW5zdXJlZC5pbnN1cmVkQXBwQWdlDQogICAgICAgICAgfSkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIGxldCBjdXN0b21ObyA9IHJlcy5kYXRhDQogICAgICAgICAgICBpZiAoY3VzdG9tTm8pIHsNCiAgICAgICAgICAgICAgdGhpcy5pbnN1cmVkLmluc3VyZWRObyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgIGlmICh0aGlzLmluc3VyZWRVcGRhdGVGbGFnKSB7IC8v5b2T5YmN5Li65pu05pawDQogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRLZXkgPSB0aGlzLmluc3VyZWQucEtleQ0KICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbnN1cmVkKQ0KICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJzID0gdGhpcy5jdXN0b21lcnMubWFwKGl0ZW0gPT4gaXRlbS5wS2V5ID09PSBjdXJyZW50S2V5ID8gdGVtcCA6IGl0ZW0pDQogICAgICAgICAgICAgICAgdGhpcy5pbnN1cmVkVXBkYXRlRmxhZyA9IGZhbHNlDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pbnN1cmVkLnBLZXkgPSAnaW5zdXJlZCcgKyAodGhpcy5jdXN0b21lcnMubGVuZ3RoICsgMSkNCiAgICAgICAgICAgICAgICB0aGlzLmluc3VyZWQuY3VzdG9tZXJSb2xlID0gJ+iiq+S/neS6uicNCiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaW5zdXJlZCkNCiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWVycy5wdXNoKHRlbXApDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnN1cmVkRm9ybS5yZXNldEZpZWxkcygpDQogICAgICAgICAgICAgIHRoaXMuaW5zdXJlZC5pbnN1cmVkU2VxID0gdGhpcy5pbnN1cmVkLmluc3VyZWRTZXEgKyAxDQogICAgICAgICAgICAgIHRoaXMuaW5zdXJlZC5pbnN1cmVkTm8gPSAnJw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwcm9kdWN0VGVzdGluZ05ld0Nhc2VEZWZpbml0aW9uLmN1c3RvbU5vRXJyb3JNc2cnKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd0JlbmVmaWNpYXJ5Rm9ybSgpIHsNCiAgICAgIHRoaXMuYmVuZWZpY2lhcnlGb3JtRmxhZyA9ICF0aGlzLmJlbmVmaWNpYXJ5Rm9ybUZsYWcNCiAgICB9LA0KICAgIHNob3dQb2xpY3lIb2xkZXJGb3JtKCkgew0KICAgICAgdGhpcy5wb2xpY3lIb2xkZXJGb3JtRmxhZyA9ICF0aGlzLnBvbGljeUhvbGRlckZvcm1GbGFnDQogICAgfSwNCiAgICBzYXZlQmVuZWZpY2lhcnkoKSB7DQoNCiAgICAgIGxldCBpbnN1cmVkU2VxID0gdGhpcy5iZW5lZmljaWFyeS5iZWxUb0luc3VyZWRTZXENCg0KICAgICAgdGhpcy4kcmVmc1snYm5mRm9ybSddLnZhbGlkYXRlKHBhc3MgPT4gew0KICAgICAgICBpZiAocGFzcykgew0KICAgICAgICAgIC8v5qCh6aqM6KKr5L+d5Lq65bqP5YiX5a2Y5ZyoDQogICAgICAgICAgaWYgKHRoaXMuY3VzdG9tZXJzLmZpbHRlcihyZXMgPT4gcmVzLmN1c3RvbWVyQ29kZSA9PT0gJ2luc3VyZWQnICYmIHJlcy5pbnN1cmVkU2VxID09PSBpbnN1cmVkU2VxKS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAvL+afpeivouWuouaIt+WPtw0KICAgICAgICAgICAgcXVlcnlDdXN0b21lck5vKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7DQogICAgICAgICAgICAgICdzZXgnOiB0aGlzLmJlbmVmaWNpYXJ5LmJuZlNleCwNCiAgICAgICAgICAgICAgJ2FnZSc6IHRoaXMuYmVuZWZpY2lhcnkuYm5mQWdlDQogICAgICAgICAgICB9KSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBsZXQgY3VzdG9tTm8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICBpZiAoY3VzdG9tTm8pIHsNCiAgICAgICAgICAgICAgICB0aGlzLmJlbmVmaWNpYXJ5LmJuZk5vID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICBpZiAodGhpcy5ibmZVcGRhdGVGbGFnKSB7IC8v5b2T5YmN5Li65pu05pawDQogICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEtleSA9IHRoaXMuYmVuZWZpY2lhcnkucEtleQ0KICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJlbmVmaWNpYXJ5KQ0KICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21lcnMgPSB0aGlzLmN1c3RvbWVycy5tYXAoaXRlbSA9PiBpdGVtLnBLZXkgPT09IGN1cnJlbnRLZXkgPyB0ZW1wIDogaXRlbSkNCiAgICAgICAgICAgICAgICAgIHRoaXMuYm5mVXBkYXRlRmxhZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuYmVuZWZpY2lhcnkucEtleSA9ICdibmYnICsgKHRoaXMuY3VzdG9tZXJzLmxlbmd0aCArIDEpDQogICAgICAgICAgICAgICAgICB0aGlzLmJlbmVmaWNpYXJ5LmN1c3RvbWVyUm9sZSA9ICflj5fnm4rkuronDQogICAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmVuZWZpY2lhcnkpDQogICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWVycy5wdXNoKHRlbXApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYm5mRm9ybS5yZXNldEZpZWxkcygpDQogICAgICAgICAgICAgICAgdGhpcy5iZW5lZmljaWFyeS5ibmZTZXEgPSB0aGlzLmluc3VyZWQuYm5mU2VxICsgMQ0KICAgICAgICAgICAgICAgIHRoaXMuYmVuZWZpY2lhcnkuYm5mTm8gPSAnJw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFRlc3RpbmdOZXdDYXNlRGVmaW5pdGlvbi5jdXN0b21Ob0Vycm9yTXNnJykpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFRlc3RpbmdOZXdDYXNlRGVmaW5pdGlvbi5ub3RFeGlzdEluc3VyZVNlcUVycm9yTXNnJykpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZGVsQ3VzdG9tZXIocm93KSB7DQogICAgICB0aGlzLmN1c3RvbWVycyA9IHRoaXMuY3VzdG9tZXJzLmZpbHRlcihkYXRhID0+IGRhdGEucEtleSAhPT0gcm93LnBLZXkpDQogICAgICB0aGlzLiRyZWZzLnBvbGljeUhvbGRlci5yZXNldEZpZWxkcygpDQogICAgfSwNCiAgICBoYW5kbGVVcGRhdGVDdXN0b21lcihyb3cpIHsNCiAgICAgIGlmIChyb3cuY3VzdG9tZXJDb2RlID09PSAncG9saWN5aG9sZGVyJykgew0KICAgICAgICB0aGlzLnBvbGljeUhvbGRlciA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykNCiAgICAgICAgdGhpcy5wb2xpY3lVcGRhdGVGbGFnID0gdHJ1ZQ0KICAgICAgfSBlbHNlIGlmIChyb3cuY3VzdG9tZXJDb2RlID09PSAnaW5zdXJlZCcpIHsNCiAgICAgICAgdGhpcy5pbnN1cmVkID0gT2JqZWN0LmFzc2lnbih7fSwgcm93KQ0KICAgICAgICB0aGlzLmluc3VyZWRVcGRhdGVGbGFnID0gdHJ1ZQ0KICAgICAgfSBlbHNlIGlmIChyb3cuY3VzdG9tZXJDb2RlID09PSAnYmVuZWZpY2lhcnknKSB7DQogICAgICAgIHRoaXMuYmVuZWZpY2lhcnkgPSBPYmplY3QuYXNzaWduKHt9LCByb3cpDQogICAgICAgIHRoaXMuYm5mVXBkYXRlRmxhZyA9IHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlc2V0Q2FzZURlZigpIHsNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24uaWQgPSAnJw0KICAgICAgdGhpcy5DYXNlRGVmaW5pdGlvbi5wZFRlc3RDYXNlRGVzYyA9ICcnDQogICAgICB0aGlzLkNhc2VEZWZpbml0aW9uLnRlc3RQb2ludCA9ICcnDQogICAgICB0aGlzLnRlc3RDYXNlVXBkYXRlRmxhZyA9IGZhbHNlDQogICAgICB0aGlzLmN1c3RvbWVycyA9IFtdDQogICAgICB0aGlzLmN1cnJlbnRQZFBhZ2VEYXRhID0ge30NCiAgICAgIHRoaXMuY29uZmlnczMgPSBbXQ0KICAgICAgdGhpcy50YWJsZUZsYWcgPSBmYWxzZQ0KICAgICAgdGhpcy5pbml0RWxlbWVudCh0aGlzLkNhc2VEZWZpbml0aW9uLnBkQ29kZSwgdGhpcy5DYXNlRGVmaW5pdGlvbi5wZEluZm9JZCkNCiAgICB9LA0KICAgIGhhbmRsZVVwZGF0ZUNhc2Uocm93KSB7DQogICAgICB0aGlzLnRlc3RDYXNlVXBkYXRlRmxhZyA9IHRydWUNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24uaWQgPSByb3cuaWQNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24ucGRJbmZvSWQgPSByb3cucGRJbmZvSWQNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24ucGRDb2RlID0gcm93LnBkQ29kZQ0KICAgICAgdGhpcy5DYXNlRGVmaW5pdGlvbi5wZEVkaXRpb24gPSByb3cucGRFZGl0aW9uDQogICAgICB0aGlzLkNhc2VEZWZpbml0aW9uLnBkTmFtZSA9IHJvdy5wZE5hbWUNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24ucGRUZXN0Q2FzZURlc2MgPSByb3cucGRUZXN0Q2FzZURlc2MNCiAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24udGVzdFBvaW50ID0gcm93LnBkRnVuY0Rlc2MubWFwKGRhdGEgPT4gZGF0YS5wZF90ZXN0X2Z1bmNfaWQpDQogICAgICAvL+WkhOeQhmRhdGENCiAgICAgIGxldCBwZFRlc3RDYXNlRGF0YSA9IEpTT04ucGFyc2Uocm93LnBkVGVzdENhc2VEYXRhKQ0KDQogICAgICBsZXQgZGF0YSA9IHBkVGVzdENhc2VEYXRhLnRlc3REYXRhDQoNCiAgICAgIHRoaXMuY3VzdG9tZXJzID0gZGF0YS5jdXN0b21lcnMNCiAgICAgIHRoaXMuY3VycmVudFBkUGFnZURhdGEgPSBkYXRhLmN1cnJlbnRQZFBhZ2VEYXRhDQoNCiAgICAgIGlmICh0aGlzLnBkSW5mby5jb21tb2RpdHlUeXBlID09PSAnUicpIHsNCg0KICAgICAgICAvL+WbnuaYvumZqeenjeWumuS5iemhtemdoueahOagj+S9jQ0KDQogICAgICAgIC8v5LiN6IO955u05o6l6YGN5Y6G6LWL5YC8IOmcgOS9v+eUqOS4remXtOi9rOaNog0KICAgICAgICBsZXQgdGVtcCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50RGF0YXMpKQ0KICAgICAgICB0ZW1wLmZvckVhY2godGVtID0+IHsNCiAgICAgICAgICB0ZW0uY29uZmlnLmRlZmF1bHRWYWx1ZSA9IHRoaXMuY3VycmVudFBkUGFnZURhdGFbdGVtLnZNb2RlbF0NCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5lbGVtZW50RGF0YXMgPSB0ZW1wDQogICAgICB9DQoNCiAgICB9LA0KICAgIGluaXRFbGVtZW50KHBkQ29kZSwgcGRJbmZvSWQpIHsNCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICAncGRDb2RlJzogcGRDb2RlLA0KICAgICAgICAncGRJbmZvSWQnOiBwZEluZm9JZA0KICAgICAgfQ0KICAgICAgaW5pdEVsZW1lbnQodGhpcy5idWlsZFJlcXVlc3REYXRhKGRhdGEpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5lbGVtZW50RGF0YXMgPSByZXNwb25zZS5kYXRhDQogICAgICAgIHRoaXMuZWxlbWVudERhdGFzU2hvdyA9IHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgICBhZGRQb2xpY3koKSB7DQoNCiAgICAgIGlmICh0aGlzLmN1c3RvbWVycyAmJiB0aGlzLmN1c3RvbWVycy5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMuQ2FzZURlZmluaXRpb25bJ3BkVGVzdE1vZHVsZUNvZGUnXSA9ICduZXdzaW5nbGV0ZXN0Jw0KICAgICAgICB0aGlzLkNhc2VEZWZpbml0aW9uWydkYXRhJ10gPSB7fQ0KICAgICAgICB0aGlzLkNhc2VEZWZpbml0aW9uLmRhdGFbJ2N1c3RvbWVycyddID0gdGhpcy5jdXN0b21lcnMNCiAgICAgICAgLy/kv53lrZjkuqflk4Hpmannp43lrprliLbpobXpnaLkv6Hmga8NCiAgICAgICAgbGV0IHJlc3VsdCA9IHt9DQogICAgICAgIGxldCBmbGFnID0gdHJ1ZQ0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZWxlbWVudERhdGFzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmVsZW1lbnREYXRhc1tpXQ0KICAgICAgICAgIGlmIChkYXRhLnJlcXVpcmVkKSB7DQogICAgICAgICAgICBpZiAoIWRhdGEuY29uZmlnLmRlZmF1bHRWYWx1ZSkgew0KICAgICAgICAgICAgICBmbGFnID0gZmFsc2UNCiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcign6K+36L6T5YWl5b2T5YmN5Lqn5ZOB5LiLJyArIGRhdGEubGFiZWwpDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHJlc3VsdFtkYXRhLnZNb2RlbF0gPSBkYXRhLmNvbmZpZy5kZWZhdWx0VmFsdWUNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZmxhZykgew0KICAgICAgICAgIGxldCBwZEluZm8gPSB0aGlzLmdldEpzb25EYXRhKCdwZFRlc3RJbmZvJykNCiAgICAgICAgICB0aGlzLkNhc2VEZWZpbml0aW9uWydwcm9kdWN0VGVzdFZvJ10gPSBwZEluZm8NCiAgICAgICAgICByZXN1bHRbJ3Byb2R1Y3RDb2RlJ10gPSB0aGlzLkNhc2VEZWZpbml0aW9uLnBkQ29kZQ0KICAgICAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24uZGF0YVsnY3VycmVudFBkUGFnZURhdGEnXSA9IHJlc3VsdA0KICAgICAgICAgIHRoaXMuQ2FzZURlZmluaXRpb24uZGF0YVsncmVsYVBkUGFnZURhdGEnXSA9IFtdDQogICAgICAgICAgLy/kv53lrZjlhaXlupMNCiAgICAgICAgICBhZGRQb2xpY3kodGhpcy5idWlsZFJlcXVlc3REYXRhKHRoaXMuQ2FzZURlZmluaXRpb24pKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2Uuc2F2ZScpKQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlMS5yZWxvYWQoKQ0KICAgICAgICAgICAgdGhpcy5yZXNldENhc2VEZWYoKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFRlc3RpbmdOZXdDYXNlRGVmaW5pdGlvbi5hZGROZXdDYXNlJykpDQogICAgICB9DQoNCiAgICB9LA0KICAgIHRlbXBsYXRlRG93bmxvYWQoKSB7DQogICAgICBkb3dubG9hZENhc2VUZW1wbGF0ZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoeyAndGVzdE1vZHVsZSc6ICduZXctc2luZ2xlLXRlc3QnIH0pKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZG93bmxvYWRSZXNwb25zZUZpbGUocmVzLCAnTmV3U2luZ2xlVGVzdENhc2VUZW1wbGF0ZS54bHNtJykNCiAgICAgIH0pDQogICAgfSwNCiAgICBvcGVuVXBsb2FkRGlhbG9nKCkgew0KICAgICAgdGhpcy5kaWFsb2dUYWJsZVZpc2libGUxID0gdHJ1ZQ0KICAgIH0sDQogICAgdGVzdENhc2VVcGxvYWQoKSB7DQogICAgICBpZiAodGhpcy5maWxlTGlzdC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcign6K+36YCJ5oup5LiK5Lyg55qE5paH5Lu2JykNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBmb3JtRGF0YSA9IHRoaXMudXBsb2FkVXRpbCh0aGlzLmZpbGVMaXN0KQ0KICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BkSW5mb0lkJywgdGhpcy5DYXNlRGVmaW5pdGlvbi5wZEluZm9JZCkNCiAgICAgICAgdXBsb2FkVGVzdENhc2UoZm9ybURhdGEpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3MoJ+S4iuS8oOaIkOWKnycpDQogICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWQuY2xlYXJGaWxlcygpDQogICAgICAgICAgdGhpcy5iYWNrMSgpDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlMS5yZWxvYWQoKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgYmFjazEoKSB7DQogICAgICB0aGlzLmRpYWxvZ1RhYmxlVmlzaWJsZTEgPSBmYWxzZQ0KICAgIH0sDQogICAgYmFja1BhZ2UoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvcHJvZHVjdC10ZXN0aW5nL3ByZXNlcnZhdGlvbi10ZXN0L3ByZXNlcnZhdGlvbi10ZXN0LWNhc2VkZWYnIH0pDQogICAgfSwNCiAgICAvL+aWh+S7tueKtuaAgeaUueWPmOaXtueahOmSqeWtkO+8jOa3u+WKoOaWh+S7tuOAgeS4iuS8oOaIkOWKn+WSjOS4iuS8oOWksei0peaXtumDveS8muiiq+iwg+eUqA0KICAgIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgaWYgKGZpbGVMaXN0Lmxlbmd0aCA+IDEpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlTGlzdC5sZW5ndGggLSAxOyBpKyspIHsNCiAgICAgICAgICBpZiAoZmlsZS5uYW1lID09PSBmaWxlTGlzdFtpXS5uYW1lKSB7DQogICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIrkvKDmlofku7blkI3kuI3og73ph43lpI0hJywNCiAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBmaWxlTGlzdC5wb3AoKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0DQoNCiAgICAgIC8qDQogICAgIHZhciBtc2cgPSBmaWxlLm5hbWUuc3Vic3RyaW5nKGZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpICsgMSkNCiAgICAgLy/liKTmlq3mlofku7bmoLzlvI8NCiAgICAgaWYgKCEobXNnID09PSAneGxzJyB8fCBtc2cgPT09ICd4bHN4JykpIHsNCiAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgdGl0bGU6ICfplJnor68nLA0KICAgICAgICAgbWVzc2FnZTogJ+S4iuS8oOaWh+S7tuWPquiDveaYryB4bHPjgIF4bHN45qC85byPIScsDQogICAgICAgICBkdXJhdGlvbjogMjAwDQogICAgICAgfSkNCiAgICAgICByZXR1cm4NCiAgICAgfSovDQogICAgICAvL+WIpOaWreaWh+S7tuWkp+Wwjw0KICAgICAgaWYgKCEoZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAxMCkpIHsNCiAgICAgICAgLy8gdGhpcy4kcmVmcy5maWxlVXBsb2FkLmNsZWFyRmlsZXMoKQ0KICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywNCiAgICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HIDEwTUIhJywNCiAgICAgICAgICBkdXJhdGlvbjogNTAwDQogICAgICAgIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KDQogICAgfSwNCiAgICAvL+aWh+S7tui2heWHuuS4quaVsOmZkOWItuaXtueahOmSqeWtkA0KICAgIGhhbmRsZUV4Y2VlZChmaWxlcywgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMuJG5vdGlmeS53YXJuaW5nKHsNCiAgICAgICAgdGl0bGU6ICfmj5DnpLonLA0KICAgICAgICBtZXNzYWdlOiAn5pyA5aSa5LiK5Lyg5LiJ5Liq5paH5Lu2LOabv+aNouivt+WFiOenu+mZpO+8gScsDQogICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlUmVzdWx0KHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5LiK5Lyg5paH5Lu25aSx6LSlYCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwYA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-testing/preservation-test/addpolicy","sourcesContent":["<template>\r\n  <cus-wraper>\r\n\r\n    <cus-page-title-back @backTo=\"backPage\" :label=\"$t('route.preservationTestAddPolicy')\"/>\r\n\r\n    <cus-commodity-info></cus-commodity-info>\r\n\r\n    <div style=\"margin: 20px 30px 30px 0px\">\r\n      <!-- 产品信息 -->\r\n      <el-row type=\"flex\" class=\"row-bg\" justify=\"left\">\r\n        <el-col :span=\"6\">\r\n          <el-button  size=\"small\" type=\"primary\" icon=\"el-icon-cloudy\" @click=\"openUploadDialog\">\r\n            {{ $t('productTestingNewCaseDefinition.testCaseUpload') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <!--测试案例-->\r\n    <cus-form-title :label=\"$t('productTestingNewCaseDefinition.CaseDefinition')\" :first=\"true\"/>\r\n\r\n    <cus-table-title :label=\"$t('productTestingNewCaseDefinition.customer')\"/>\r\n    <el-table :data=\"customers\" align=\"center\" border class=\"wraper-table\" element-loading-text=\"Loading\" fit\r\n              highlight-current-row\r\n              size=\"mini\">\r\n      <el-table-column width=\"50\" :label=\"$t('table.select')\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group v-model=\"selectConfigs2\">\r\n            <el-radio :label=\"scope.row\" @change=\"handleUpdateCustomer\">{{ '' }}</el-radio>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" type=\"index\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('productTestingNewCaseDefinition.customerrole')\" align=\"center\"\r\n                       prop=\"customerRole\"></el-table-column>\r\n      <el-table-column :label=\"$t('productTestingNewCaseDefinition.customerseq')\" align=\"center\"\r\n                       prop=\"\">\r\n        <template v-slot=\"scope\">{{ filterSeq(scope.row) }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productTestingNewCaseDefinition.customerno')\" align=\"center\"\r\n      >\r\n        <template v-slot=\"scope\">{{ filterCustomerNo(scope.row) }}</template>\r\n\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productTestingNewCaseDefinition.customersex')\" align=\"center\"\r\n                       prop=\"\">\r\n        <template v-slot=\"scope\">{{ filterSex(scope.row) | filterSexType }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('productTestingNewCaseDefinition.customerage')\" align=\"center\" prop=\"\">\r\n        <template v-slot=\"scope\">{{ filterAge(scope.row) }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.actions')\" align=\"center\" width=\"80px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"delCustomer(scope.row)\" size=\"mini\" type=\"danger\">-</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--被保人资料-->\r\n\r\n    <cus-form-title :label=\"$t('productTestingNewDetails.insured')\"/>\r\n\r\n    <el-form  label-width=\"auto\" ref=\"insuredForm\" :model=\"insured\" :rules=\"insuredRules\">\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item required prop=\"insuredSeq\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.insuredSeq')\">\r\n            <el-input type=\"number\" clearable filterable v-model.number=\"insured.insuredSeq\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.customerno')\">\r\n            <el-input disabled clearable readonly v-model=\"insured.insuredNo\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.salary')\">\r\n            <el-input clearable type=\"number\" v-model.number=\"insured.salary\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"insuredSex\" :label=\"$t('productTestingNewCaseDefinition.customersex')\">\r\n            <cus-select :codetype=\"'sex'\" v-model=\"insured.insuredSex\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"insuredAppAge\" required\r\n                        :label=\"$t('productTestingNewCaseDefinition.customerage')\">\r\n            <el-input :placeholder=\"$t('pay_def.message.please_enter')\" clearable\r\n                      v-model.number=\"insured.insuredAppAge\">\r\n              <el-select v-model=\"insured.ageUnit\" class=\"cst\" slot=\"append\">\r\n                <el-option :label=\"$t('i18nView.ageY')\" value=\"Y\"/>\r\n                <el-option :label=\"$t('i18nView.dayD')\" value=\"D\"/>\r\n              </el-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"occupationType\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.occupationGrade')\">\r\n            <cus-select @change=\"\" :codetype=\"'occupationtype'\" v-model=\"insured.occupationType\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.smokingSigns')\">\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"insured.smokeFlag\"></el-switch>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"relationToMInsured\"\r\n                        :label=\"$t('productTestingNewDetails.relationshipWithPrincipalInsured')\">\r\n            <cus-select clearable filterable :codetype=\"'relagenttoins'\"\r\n                        v-model=\"insured.relationToMInsured\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col  align=\"right\">\r\n          <el-button  size=\"small\" type=\"primary\" @click=\"saveInsured()\"\r\n                     :icon=\"this.insuredUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                     >\r\n\r\n            {{ this.insuredUpdateFlag ? $t('table.update') : $t('productTestingNewDetails.save') }}\r\n          </el-button>\r\n\r\n        </el-col>\r\n      </el-row>\r\n\r\n    </el-form>\r\n\r\n\r\n    <!--投保人资料-->\r\n    <cus-form-title :showArrow=\"true\" @show=\"showPolicyHolderForm\"\r\n                    :label=\"$t('productTestingNewDetails.policyholderInformation')\"/>\r\n\r\n    <el-form v-if=\"policyHolderFormFlag\"  label-width=\"auto\" ref=\"policyForm\" :model=\"policyHolder\"\r\n             :rules=\"policyHolderRules\">\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item required prop=\"appntSeq\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.policyholderSeq')\">\r\n            <el-input type=\"number\" clearable filterable v-model.number=\"policyHolder.appntSeq\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.customerno')\">\r\n            <el-input disabled clearable readonly v-model=\"policyHolder.appntNo\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.salary')\">\r\n            <el-input clearable type=\"number\" v-model.number=\"policyHolder.salary\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"appntSex\" :label=\"$t('productTestingNewCaseDefinition.customersex')\">\r\n            <cus-select :codetype=\"'sex'\" v-model=\"policyHolder.appntSex\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item required prop=\"appntAge\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.customerage')\">\r\n            <el-input :placeholder=\"$t('pay_def.message.please_enter')\" clearable\r\n                      v-model.number=\"policyHolder.appntAge\">\r\n              <el-select v-model=\"policyHolder.ageUnit\" class=\"cst\" slot=\"append\">\r\n                <el-option :label=\"$t('i18nView.ageY')\" value=\"Y\"/>\r\n                <el-option :label=\"$t('i18nView.dayD')\" value=\"D\"/>\r\n              </el-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"occupationType\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.occupationGrade')\">\r\n            <cus-select @change=\"\" :codetype=\"'occupationtype'\" v-model=\"policyHolder.occupationType\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.smokingSigns')\">\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"policyHolder.smokeFlag\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"relationToInsured\"\r\n                        :label=\"$t('productTestingNewDetails.relationshipWithTheInsured')\">\r\n            <cus-select clearable filterable :codetype=\"'relagenttoins'\"\r\n                        v-model=\"policyHolder.relationToInsured\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col  align=\"right\">\r\n          <el-button  size=\"small\" type=\"primary\" @click=\"savePolicyHolder\"\r\n                     :icon=\"this.policyUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                     >\r\n            {{ this.policyUpdateFlag ? $t('table.update') : $t('productTestingNewDetails.save') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n    </el-form>\r\n\r\n\r\n    <br/>\r\n\r\n    <!--受益人资料-->\r\n    <cus-form-title :showArrow=\"true\" @show=\"showBeneficiaryForm\"\r\n                    :label=\"$t('productTestingNewCaseDefinition.beneficiary')\"/>\r\n\r\n    <el-form v-if=\"beneficiaryFormFlag\"  label-width=\"auto\" ref=\"bnfForm\" :model=\"beneficiary\"\r\n             :rules=\"beneficiaryRules\">\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item required prop=\"bnfSeq\" :label=\"$t('productTestingNewCaseDefinition.bnfSeq')\">\r\n            <el-input type=\"number\" clearable filterable v-model.number=\"beneficiary.bnfSeq\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item required prop=\"bnfSeq\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.belToInsuredSeq')\">\r\n            <el-input type=\"number\" clearable filterable v-model.number=\"beneficiary.belToInsuredSeq\">\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.customerno')\">\r\n            <el-input disabled clearable readonly v-model=\"beneficiary.bnfNo\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.salary')\">\r\n            <el-input clearable type=\"number\" v-model.number=\"beneficiary.salary\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"bnfSex\" :label=\"$t('productTestingNewCaseDefinition.customersex')\">\r\n            <cus-select @change=\"\" :codetype=\"'sex'\" v-model=\"beneficiary.bnfSex\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"bnfAge\" required\r\n                        :label=\"$t('productTestingNewCaseDefinition.customerage')\">\r\n            <el-input :placeholder=\"$t('pay_def.message.please_enter')\" clearable\r\n                      v-model.number=\"beneficiary.bnfAge\">\r\n              <el-select v-model=\"beneficiary.ageUnit\" class=\"cst\" slot=\"append\">\r\n                <el-option :label=\"$t('i18nView.ageY')\" value=\"Y\"/>\r\n                <el-option :label=\"$t('i18nView.dayD')\" value=\"D\"/>\r\n              </el-select>\r\n            </el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"occupationType\"\r\n                        :label=\"$t('productTestingNewCaseDefinition.occupationGrade')\">\r\n            <cus-select @change=\"\" :codetype=\"'occupationtype'\" v-model=\"beneficiary.occupationType\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item :label=\"$t('productTestingNewCaseDefinition.smokingSigns')\">\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"beneficiary.smokeFlag\"></el-switch>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"7\">\r\n          <el-form-item prop=\"relationToInsured\"\r\n                        :label=\"$t('productTestingNewDetails.relationshipWithTheInsured')\">\r\n            <cus-select clearable filterable :codetype=\"'relagenttoins'\"\r\n                        v-model=\"beneficiary.relationToInsured\">\r\n            </cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col  align=\"right\">\r\n          <el-button  size=\"small\" type=\"primary\" @click=\"saveBeneficiary()\"\r\n                     :icon=\"this.bnfUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                     >\r\n            {{ this.bnfUpdateFlag ? $t('table.update') : $t('productTestingNewDetails.save') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n    </el-form>\r\n\r\n    <!--产品-->\r\n    <cus-form-title :showArrow=\"true\"\r\n                    :label=\"$t('productTestingNewCaseDefinition.product')\"/>\r\n\r\n\r\n\r\n    <!--当前产品资料-->\r\n\r\n    <br/>\r\n\r\n    <cus-form-title :label=\"$t('productTestingNewCaseDefinition.currentProduct')\"/>\r\n\r\n\r\n    <custompage v-if=\"elementDatasShow\" :elementDatas=\"elementDatas\"></custompage>\r\n\r\n\r\n    <el-row style=\"margin-top: 35px\">\r\n      <el-col :span=\"24\" align=\"right\">\r\n        <el-button  size=\"small\" type=\"primary\" @click=\"addPolicy\" v-auth=\"'underwriting-test:addPolicy'\"\r\n                   icon=\"el-icon-success\"\r\n                   >\r\n          {{ $t('table.save') }}\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n\r\n    <!--测试案例上传弹窗-->\r\n    <el-dialog :visible.sync=\"dialogTableVisible1\" v-dialog-drag center :close-on-click-modal=\"false\" :show-close=true\r\n               width=\"1200px\" top=\"8vh\">\r\n      <div>\r\n      <span @click=\"back1\" style=\"cursor: pointer\">\r\n        <i class=\"el-icon-back\" style=\"margin-right: 5px\">{{ $t('table.back') }}</i>\r\n      </span>\r\n        <el-divider direction=\"vertical\"></el-divider>\r\n        <label>{{ $t('productTestingNewCaseDefinition.testCaseNewUpload') }}</label>\r\n      </div>\r\n      <hr>\r\n      <br/>\r\n      <cus-commodity-info></cus-commodity-info>\r\n\r\n      <el-row style=\"margin-top: 15px;margin-bottom: 15px\">\r\n        <el-col :span=\"24\" align=\"left\">\r\n          <el-button  size=\"small\" type=\"primary\" @click=\"templateDownload\"\r\n                     icon=\"el-icon-download\"\r\n                      v-auth=\"'new-single-test:downloadTemplate'\">\r\n            {{ $t('productTestingNewCaseDefinition.templateDownload') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div class=\"divclass\" align=\"left\">\r\n        <div style=\"margin-left: 18px;margin-top: 18px;margin-bottom: 18px\">\r\n          <el-form id=\"uploadForm\">\r\n            <el-form-item>\r\n              <el-upload :auto-upload=\"false\" :file-list=\"fileList\" :on-change=\"handleChange\" :on-remove=\"handleRemove\"\r\n                         action=\"\" drag multiple :limit=\"1\" ref=\"upload\">\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">{{$t('i18nView.uploadText1')}}<em>{{$t('i18nView.uploadText2')}}</em></div>\r\n                <div class=\"el-upload__text\">{{$t('i18nView.chooseOverClick')}}\"{{ $t('table.upload') }}\"{{$t('i18nView.button')}}</div>\r\n                <div class=\"el-upload__tip\" slot=\"tip\">{{$t('i18nView.onlyUploadModelFile')}}</div>\r\n              </el-upload>\r\n\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n      <el-row style=\"margin-top: 35px\">\r\n        <el-col :span=\"24\" align=\"right\">\r\n          <el-button  size=\"small\" type=\"primary\" @click=\"testCaseUpload\" icon=\"el-icon-upload\" >\r\n            {{ $t('productTestingNewCaseDefinition.upload') }}\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\nimport {\r\n  initElement,\r\n  downloadCaseTemplate,\r\n  uploadTestCase\r\n} from '@/api/pdtest/productTestingNew'\r\n\r\nimport {\r\n  queryCustomerNo,\r\n  addPolicy\r\n} from '@/api/basicinfo/productUnderwritingTest'\r\nimport custompage from '@/views/product-testing/new-single-test/custompage'\r\n\r\nlet _this\r\nexport default {\r\n  name: 'underwritingTestCaseDefinition',\r\n  filters: {\r\n    filterSexType(code) {\r\n      return _this.getCodeName('sex', code, true)\r\n    }\r\n  },\r\n  data() {\r\n    let checkAge = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(this.$t('productTestingNewCaseDefinition.AppntAgemsg')))\r\n      }\r\n      if (!Number.isInteger(value)) {\r\n        callback(new Error(this.$t(\"i18nView.pleaseInputNumValue\")))\r\n      } else {\r\n        if (value < 1) {\r\n          return callback(new Error(this.$t(\"i18nView.notAge\")))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n    }\r\n    let checkSeq = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(this.$t('productTestingNewCaseDefinition.AppntSeqmsg')))\r\n      }\r\n      if (value < 1) {\r\n        return callback(new Error('不可小于1'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    _this = this\r\n    return {\r\n      testCaseType: { '1': '自动化测试', '2': '自定义测试' },\r\n      testCaseDefinition: { '1': '页面定义', '2': '上传定义' },\r\n      selectConfigs2: '',\r\n      selectConfigs3: '',\r\n      funcSelect: [],\r\n      elementDatasShow: false,\r\n      elementDatas: {},\r\n      currentPdPageData: {},\r\n      elementRules: {},\r\n      configs2: [],\r\n      configs3: [],\r\n      tableFlag: false,\r\n      quickicon: 'el-icon-arrow-right',\r\n      fileList: [],\r\n      pdInfo: {\r\n        pdInfoId: '',\r\n        commodityType: ''\r\n      },\r\n      CaseDefinition: {\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdName: '',\r\n        pdEdition: '',\r\n        pdTestModuleCode: ''\r\n      },\r\n      defRules: {\r\n        pdTestCaseDesc: [{\r\n          required: true,\r\n          message: this.$t('productTestingNewCaseDefinition.casedescmsg'),\r\n          trigger: 'blur'\r\n        }],\r\n        testPoint: [{\r\n          required: true,\r\n          message: this.$t('productTestingNewCaseDefinition.testpointmsg'),\r\n          trigger: 'change'\r\n        }]\r\n      },\r\n      CaseDetails: {},\r\n      customers: [],\r\n      policyUpdateFlag: false,\r\n      policyHolderFormFlag: false,\r\n      policyHolder: {\r\n        pKey: '',\r\n        customerRole: '',\r\n        customerCode: 'policyholder',\r\n        appntSeq: 1,\r\n        appntAge: '',\r\n        appntNo: '',\r\n        appntSex: '',\r\n        ageUnit: 'Y',\r\n        smokeFlag: 'N',\r\n        relationToInsured: '',\r\n        occupationType: '',\r\n        salary: ''\r\n      },\r\n      policyHolderRules: {\r\n        appntSeq: [{ validator: checkSeq, trigger: 'blur' }],\r\n        appntAge: [\r\n          { validator: checkAge, trigger: 'blur' }\r\n        ],\r\n        appntSex: [\r\n          {\r\n            required: true,\r\n            message: this.$t('productTestingNewCaseDefinition.AppntSexmsg'),\r\n            trigger: 'change'\r\n          }]\r\n      },\r\n      insuredUpdateFlag: false,\r\n      insured: {\r\n        pKey: '',\r\n        customerRole: '',\r\n        customerCode: 'insured',\r\n        insuredSeq: 1,\r\n        insuredAppAge: '',\r\n        ageUnit: 'Y',\r\n        insuredNo: '',\r\n        insuredSex: '',\r\n        smokeFlag: 'N',\r\n        relationToMInsured: '',\r\n        occupationType: '',\r\n        salary: ''\r\n      },\r\n      insuredRules: {\r\n        insuredSeq: [{ validator: checkSeq, trigger: 'blur' }],\r\n        insuredAppAge: [{ validator: checkAge, trigger: 'blur' }],\r\n        insuredSex: [{\r\n          required: true, message: this.$t('productTestingNewCaseDefinition.AppntSexmsg'), trigger: 'change'\r\n        }]\r\n      },\r\n      beneficiary: {\r\n        pKey: '',\r\n        customerRole: '',\r\n        customerCode: 'beneficiary',\r\n        bnfSeq: 1,\r\n        belToInsuredSeq: '',\r\n        bnfAge: '',\r\n        ageUnit: 'Y',\r\n        bnfNo: '',\r\n        bnfSex: '',\r\n        smokeFlag: 'N',\r\n        relationToInsured: '',\r\n        occupationType: '',\r\n        salary: ''\r\n      },\r\n      beneficiaryRules: {\r\n        bnfSeq: [{ validator: checkSeq, trigger: 'blur' }],\r\n        belToInsuredSeq: [{ validator: checkSeq, trigger: 'blur' }],\r\n        bnfAge: [\r\n          { validator: checkAge, trigger: 'blur' }\r\n        ],\r\n        bnfSex: [\r\n          {\r\n            required: true,\r\n            message: this.$t('productTestingNewCaseDefinition.AppntSexmsg'),\r\n            trigger: 'change'\r\n          }]\r\n      },\r\n      beneficiaryFormFlag: false,\r\n      bnfUpdateFlag: false,\r\n      relaUpdateFlag: false,\r\n      dialogTableVisible1: false,\r\n      //检验规则\r\n      rules: {}\r\n    }\r\n  },\r\n  components: {\r\n    custompage\r\n  },\r\n  computed: {},\r\n  mounted() {\r\n  },\r\n  created() {\r\n    let pdInfo = this.getJsonData('pdTestInfo')\r\n    if (pdInfo) {\r\n      this.pdInfo.pdInfoId = pdInfo.id\r\n      this.pdInfo.commodityType = pdInfo.commodityType\r\n      this.CaseDefinition.pdInfoId = pdInfo.id\r\n      this.CaseDefinition.pdCode = pdInfo.pdCode\r\n      this.CaseDefinition.pdName = pdInfo.pdName\r\n      this.CaseDefinition.pdEdition = pdInfo.pdEdition\r\n      this.initElement(pdInfo.pdCode, pdInfo.id)\r\n    }\r\n  },\r\n  methods: {\r\n    filterCustomerNo(row) {\r\n      if (row.customerCode === 'policyholder') {\r\n        return row.appntNo\r\n      } else if (row.customerCode === 'insured') {\r\n        return row.insuredNo\r\n      } else if (row.customerCode === 'beneficiary') {\r\n        return row.bnfNo\r\n      }\r\n    },\r\n    filterSeq(row) {\r\n      if (row.customerCode === 'policyholder') {\r\n        return row.appntSeq\r\n      } else if (row.customerCode === 'insured') {\r\n        return row.insuredSeq\r\n      } else if (row.customerCode === 'beneficiary') {\r\n        return row.bnfSeq\r\n      }\r\n    },\r\n    filterSex(row) {\r\n      if (row.customerCode === 'policyholder') {\r\n        return row.appntSex\r\n      } else if (row.customerCode === 'insured') {\r\n        return row.insuredSex\r\n      } else if (row.customerCode === 'beneficiary') {\r\n        return row.bnfSex\r\n      }\r\n    },\r\n    filterAge(row) {\r\n      let unit = ''\r\n      if (row.ageUnit === 'Y') {\r\n        unit = '(岁)'\r\n      }\r\n      if (row.ageUnit === 'D') {\r\n        unit = '(天)'\r\n      }\r\n      if (row.customerCode === 'policyholder') {\r\n        return row.appntAge + unit\r\n      } else if (row.customerCode === 'insured') {\r\n        return row.insuredAppAge + unit\r\n      } else if (row.customerCode === 'beneficiary') {\r\n        return row.bnfAge + unit\r\n      }\r\n    },\r\n    savePolicyHolder() {\r\n      this.$refs.policyForm.validate(pass => {\r\n        if (pass) {\r\n          //查询客户号\r\n          queryCustomerNo(this.buildRequestData({\r\n            'sex': this.policyHolder.appntSex,\r\n            'age': this.policyHolder.appntAge\r\n          })).then(res => {\r\n            let customNo = res.data\r\n            if (customNo) {\r\n              this.policyHolder.appntNo = res.data\r\n              if (this.policyUpdateFlag) { //当前为更新\r\n                let currentKey = this.policyHolder.pKey\r\n                let temp = Object.assign({}, this.policyHolder)\r\n                this.customers = this.customers.map(item => item.pKey === currentKey ? temp : item)\r\n                this.policyUpdateFlag = false\r\n              } else {\r\n                this.policyHolder.pKey = 'policy' + (this.customers.length + 1)\r\n                this.policyHolder.customerRole = '投保人'\r\n                let temp = Object.assign({}, this.policyHolder)\r\n                this.customers.push(temp)\r\n              }\r\n              this.$refs.policyForm.resetFields()\r\n              this.policyHolder.appntSeq = this.policyHolder.appntSeq + 1\r\n              this.policyHolder.appntNo = ''\r\n            } else {\r\n              this.notifyError(this.$t('productTestingNewCaseDefinition.customNoErrorMsg'))\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    saveInsured() {\r\n      this.$refs['insuredForm'].validate(pass => {\r\n        if (pass) {\r\n          //查询客户号\r\n          queryCustomerNo(this.buildRequestData({\r\n            'sex': this.insured.insuredSex,\r\n            'age': this.insured.insuredAppAge\r\n          })).then(res => {\r\n            let customNo = res.data\r\n            if (customNo) {\r\n              this.insured.insuredNo = res.data\r\n              if (this.insuredUpdateFlag) { //当前为更新\r\n                let currentKey = this.insured.pKey\r\n                let temp = Object.assign({}, this.insured)\r\n                this.customers = this.customers.map(item => item.pKey === currentKey ? temp : item)\r\n                this.insuredUpdateFlag = false\r\n              } else {\r\n                this.insured.pKey = 'insured' + (this.customers.length + 1)\r\n                this.insured.customerRole = '被保人'\r\n                let temp = Object.assign({}, this.insured)\r\n                this.customers.push(temp)\r\n              }\r\n              this.$refs.insuredForm.resetFields()\r\n              this.insured.insuredSeq = this.insured.insuredSeq + 1\r\n              this.insured.insuredNo = ''\r\n            } else {\r\n              this.notifyError(this.$t('productTestingNewCaseDefinition.customNoErrorMsg'))\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    showBeneficiaryForm() {\r\n      this.beneficiaryFormFlag = !this.beneficiaryFormFlag\r\n    },\r\n    showPolicyHolderForm() {\r\n      this.policyHolderFormFlag = !this.policyHolderFormFlag\r\n    },\r\n    saveBeneficiary() {\r\n\r\n      let insuredSeq = this.beneficiary.belToInsuredSeq\r\n\r\n      this.$refs['bnfForm'].validate(pass => {\r\n        if (pass) {\r\n          //校验被保人序列存在\r\n          if (this.customers.filter(res => res.customerCode === 'insured' && res.insuredSeq === insuredSeq).length > 0) {\r\n            //查询客户号\r\n            queryCustomerNo(this.buildRequestData({\r\n              'sex': this.beneficiary.bnfSex,\r\n              'age': this.beneficiary.bnfAge\r\n            })).then(res => {\r\n              let customNo = res.data\r\n              if (customNo) {\r\n                this.beneficiary.bnfNo = res.data\r\n                if (this.bnfUpdateFlag) { //当前为更新\r\n                  let currentKey = this.beneficiary.pKey\r\n                  let temp = Object.assign({}, this.beneficiary)\r\n                  this.customers = this.customers.map(item => item.pKey === currentKey ? temp : item)\r\n                  this.bnfUpdateFlag = false\r\n                } else {\r\n                  this.beneficiary.pKey = 'bnf' + (this.customers.length + 1)\r\n                  this.beneficiary.customerRole = '受益人'\r\n                  let temp = Object.assign({}, this.beneficiary)\r\n                  this.customers.push(temp)\r\n                }\r\n                this.$refs.bnfForm.resetFields()\r\n                this.beneficiary.bnfSeq = this.insured.bnfSeq + 1\r\n                this.beneficiary.bnfNo = ''\r\n              } else {\r\n                this.notifyError(this.$t('productTestingNewCaseDefinition.customNoErrorMsg'))\r\n              }\r\n            })\r\n          } else {\r\n            this.notifyError(this.$t('productTestingNewCaseDefinition.notExistInsureSeqErrorMsg'))\r\n          }\r\n        }\r\n      })\r\n    },\r\n    delCustomer(row) {\r\n      this.customers = this.customers.filter(data => data.pKey !== row.pKey)\r\n      this.$refs.policyHolder.resetFields()\r\n    },\r\n    handleUpdateCustomer(row) {\r\n      if (row.customerCode === 'policyholder') {\r\n        this.policyHolder = Object.assign({}, row)\r\n        this.policyUpdateFlag = true\r\n      } else if (row.customerCode === 'insured') {\r\n        this.insured = Object.assign({}, row)\r\n        this.insuredUpdateFlag = true\r\n      } else if (row.customerCode === 'beneficiary') {\r\n        this.beneficiary = Object.assign({}, row)\r\n        this.bnfUpdateFlag = true\r\n      }\r\n    },\r\n    resetCaseDef() {\r\n      this.CaseDefinition.id = ''\r\n      this.CaseDefinition.pdTestCaseDesc = ''\r\n      this.CaseDefinition.testPoint = ''\r\n      this.testCaseUpdateFlag = false\r\n      this.customers = []\r\n      this.currentPdPageData = {}\r\n      this.configs3 = []\r\n      this.tableFlag = false\r\n      this.initElement(this.CaseDefinition.pdCode, this.CaseDefinition.pdInfoId)\r\n    },\r\n    handleUpdateCase(row) {\r\n      this.testCaseUpdateFlag = true\r\n      this.CaseDefinition.id = row.id\r\n      this.CaseDefinition.pdInfoId = row.pdInfoId\r\n      this.CaseDefinition.pdCode = row.pdCode\r\n      this.CaseDefinition.pdEdition = row.pdEdition\r\n      this.CaseDefinition.pdName = row.pdName\r\n      this.CaseDefinition.pdTestCaseDesc = row.pdTestCaseDesc\r\n      this.CaseDefinition.testPoint = row.pdFuncDesc.map(data => data.pd_test_func_id)\r\n      //处理data\r\n      let pdTestCaseData = JSON.parse(row.pdTestCaseData)\r\n\r\n      let data = pdTestCaseData.testData\r\n\r\n      this.customers = data.customers\r\n      this.currentPdPageData = data.currentPdPageData\r\n\r\n      if (this.pdInfo.commodityType === 'R') {\r\n\r\n        //回显险种定义页面的栏位\r\n\r\n        //不能直接遍历赋值 需使用中间转换\r\n        let temp = JSON.parse(JSON.stringify(this.elementDatas))\r\n        temp.forEach(tem => {\r\n          tem.config.defaultValue = this.currentPdPageData[tem.vModel]\r\n        })\r\n        this.elementDatas = temp\r\n      }\r\n\r\n    },\r\n    initElement(pdCode, pdInfoId) {\r\n      let data = {\r\n        'pdCode': pdCode,\r\n        'pdInfoId': pdInfoId\r\n      }\r\n      initElement(this.buildRequestData(data)).then(response => {\r\n        this.elementDatas = response.data\r\n        this.elementDatasShow = true\r\n      })\r\n    },\r\n    addPolicy() {\r\n\r\n      if (this.customers && this.customers.length > 0) {\r\n        this.CaseDefinition['pdTestModuleCode'] = 'newsingletest'\r\n        this.CaseDefinition['data'] = {}\r\n        this.CaseDefinition.data['customers'] = this.customers\r\n        //保存产品险种定制页面信息\r\n        let result = {}\r\n        let flag = true\r\n        for (let i = 0; i < this.elementDatas.length; i++) {\r\n          let data = this.elementDatas[i]\r\n          if (data.required) {\r\n            if (!data.config.defaultValue) {\r\n              flag = false\r\n              this.notifyError('请输入当前产品下' + data.label)\r\n              break\r\n            }\r\n          }\r\n          result[data.vModel] = data.config.defaultValue\r\n        }\r\n        if (flag) {\r\n          let pdInfo = this.getJsonData('pdTestInfo')\r\n          this.CaseDefinition['productTestVo'] = pdInfo\r\n          result['productCode'] = this.CaseDefinition.pdCode\r\n          this.CaseDefinition.data['currentPdPageData'] = result\r\n          this.CaseDefinition.data['relaPdPageData'] = []\r\n          //保存入库\r\n          addPolicy(this.buildRequestData(this.CaseDefinition)).then(res => {\r\n            this.notifySuccess(this.$t('successMessage.save'))\r\n            this.$refs.page1.reload()\r\n            this.resetCaseDef()\r\n          })\r\n        }\r\n      } else {\r\n        this.notifyError(this.$t('productTestingNewCaseDefinition.addNewCase'))\r\n      }\r\n\r\n    },\r\n    templateDownload() {\r\n      downloadCaseTemplate(this.buildRequestData({ 'testModule': 'new-single-test' })).then(res => {\r\n        this.downloadResponseFile(res, 'NewSingleTestCaseTemplate.xlsm')\r\n      })\r\n    },\r\n    openUploadDialog() {\r\n      this.dialogTableVisible1 = true\r\n    },\r\n    testCaseUpload() {\r\n      if (this.fileList.length === 0) {\r\n        this.notifyError('请选择上传的文件')\r\n      } else {\r\n        let formData = this.uploadUtil(this.fileList)\r\n        formData.append('pdInfoId', this.CaseDefinition.pdInfoId)\r\n        uploadTestCase(formData).then(res => {\r\n          this.notifySuccess('上传成功')\r\n          this.$refs.upload.clearFiles()\r\n          this.back1()\r\n          this.$refs.page1.reload()\r\n        })\r\n      }\r\n    },\r\n    back1() {\r\n      this.dialogTableVisible1 = false\r\n    },\r\n    backPage() {\r\n      this.$router.push({ path: '/product-testing/preservation-test/preservation-test-casedef' })\r\n    },\r\n    //文件状态改变时的钩子，添加文件、上传成功和上传失败时都会被调用\r\n    handleChange(file, fileList) {\r\n      if (fileList.length > 1) {\r\n        for (let i = 0; i < fileList.length - 1; i++) {\r\n          if (file.name === fileList[i].name) {\r\n            this.$notify.error({\r\n              title: '错误',\r\n              message: '上传文件名不能重复!',\r\n              duration: 2000\r\n            })\r\n            fileList.pop()\r\n          }\r\n        }\r\n      }\r\n      this.fileList = fileList\r\n\r\n      /*\r\n     var msg = file.name.substring(file.name.lastIndexOf('.') + 1)\r\n     //判断文件格式\r\n     if (!(msg === 'xls' || msg === 'xlsx')) {\r\n       this.$notify.error({\r\n         title: '错误',\r\n         message: '上传文件只能是 xls、xlsx格式!',\r\n         duration: 200\r\n       })\r\n       return\r\n     }*/\r\n      //判断文件大小\r\n      if (!(file.size / 1024 / 1024 < 10)) {\r\n        // this.$refs.fileUpload.clearFiles()\r\n        this.$notify.error({\r\n          title: '错误',\r\n          message: '上传文件大小不能超过 10MB!',\r\n          duration: 500\r\n        })\r\n        return\r\n      }\r\n\r\n    },\r\n    //文件超出个数限制时的钩子\r\n    handleExceed(files, fileList) {\r\n      this.$notify.warning({\r\n        title: '提示',\r\n        message: '最多上传三个文件,替换请先移除！',\r\n        duration: 1000\r\n      })\r\n    },\r\n    handleResult(response, file, fileList) {\r\n      if (response.success) {\r\n\r\n      } else {\r\n        this.$message.error(`上传文件失败`)\r\n      }\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n.divider {\r\n  background-color: black;\r\n  margin-left: 4px;\r\n}\r\n\r\n.formtitle {\r\n  padding-top: 10px;\r\n  font-size: 15px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n\r\n.divclass {\r\n  border: 1px solid #0000002e;\r\n  width: 735px;\r\n  height: auto;\r\n}\r\n\r\n.cst {\r\n  width: 80px;\r\n  border: 0;\r\n}\r\n</style>\r\n\r\n"]}]}