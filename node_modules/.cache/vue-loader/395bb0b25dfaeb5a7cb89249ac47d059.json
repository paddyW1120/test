{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\package-audit\\comboAudit\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\package-audit\\comboAudit\\index.vue","mtime":1609847106599},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsKICAgIGFkZEF1ZGl0SW5mb0RhdGEsCiAgICBxdWVyeVN0b3AsCiAgICBxdWVyeVJldmlzZURhdGEsCiAgICBmaW5kTm9kZVJ1bGVzTGlzdCwKICAgIGZpbmROb2RlRm9ybXVsYUxpc3QKICB9IGZyb20gIkAvYXBpL2Jhc2ljaW5mby9jb21ib0F1ZGl0SW5mbyI7CiAgaW1wb3J0IHtjbG9zZVZpc2l0VGFnfSBmcm9tICJAL3V0aWxzL3RhZ3NWaWV3IgppbXBvcnQgIGNvbWJvRmlsZVJlbGFzZSBmcm9tICJAL3ZpZXdzL2NvbW1vZGl0eS1hdWRpdC9wYWNrYWdlLWF1ZGl0L2NvbWJvRmlsZVJlbGFzZSIKICBsZXQgX3RoaXM7CiAgZXhwb3J0IGRlZmF1bHQgewogICAgICBjb21wb25lbnRzOiB7Y29tYm9GaWxlUmVsYXNlfSwKICAgIG5hbWU6ICdjb21ib0F1ZGl0JywKICAgIGZpbHRlcnM6IHsKICAgICAgZmlsdGVyX3BkTm9kZUNvZGUodmFsKSB7CiAgICAgICAgbGV0IHJldHVyblRleHQgPSAnJzsKICAgICAgICBzd2l0Y2ggKHZhbCkgewogICAgICAgICAgY2FzZSAncHJvZHVjdFJ1bGVGbGFnJzoKICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICflpZfppJDop4TliJnorqLmraMnOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RGb3JtdWxhRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5aWX6aSQ5YWs5byP6K6i5q2jJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdwcm9kdWN0SW5mb0ZsYWcnOgogICAgICAgICAgICByZXR1cm5UZXh0ID0gJ+Wll+mkkOWfuuacrOS/oeaBryc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnOgogICAgICAgICAgICByZXR1cm5UZXh0ID0gJ+Wll+mkkOmUgOWUruS/oeaBryc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAncHJvZHVjdENvdmVyRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5aWX6aSQ5om/5L+d5L+h5oGvJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdwcm9kdWN0VW5kZXJ3cml0aW5nRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5aWX6aSQ5qC45L+d5L+h5oGvJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5aWX6aSQ5L+d5YWo5L+h5oGvJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdwcm9kdWN0SGVQZWlGbGFnJzoKICAgICAgICAgICAgcmV0dXJuVGV4dCA9ICflpZfppJDmoLjotZTkv6Hmga8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RSZW5ld2FsRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSAn5aWX6aSQ57ut5pyf57ut5L+d5L+h5oGvJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXR1cm5UZXh0OwogICAgICB9LAogICAgICBmaWx0ZXJfcGRBdWRpdENvbmN0aGlzKGNvZGUpewogICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRBdWRpdENvbmMnLCBjb2RlKQogICAgICB9LAogICAgICBmaWx0ZXJfcGRJc0NhbmNlbERlZmluaXRpb24oY29kZSl7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdjYW5jZWxEZWZpbml0aW9uJywgY29kZSkKICAgICAgfSwKICAgICAgZmlsdGVyX3BkUnVsZVR5cGUoY29kZSkgewogICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzTW9kdWxlJywgY29kZSkKICAgICAgfSwKICAgICAgZmlsdGVyX3BkRm9ybXVsYVR5cGUoY29kZSkgewogICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzTW9kdWxlJywgY29kZSkKICAgICAgfSwKICAgICAgZmlsdGVyX3BkUnVsZURldGFpbHMoY29kZSkgewogICAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncnVsZUJ1c2luZXNzRGV0YWlsQ2xhc3MnLCBjb2RlKQogICAgICB9LAogICAgICBmaWx0ZXJfcGRGb3JtdWxhRGV0YWlscyhjb2RlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdydWxlQnVzaW5lc3NEZXRhaWxDbGFzcycsIGNvZGUpCiAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiB7CiAgICAgICAgICBzaG93Q29tYm9GaWxlUmVsZWFzZUZsYWc6ZmFsc2UsCiAgICAgICAgICBwZEZpbGVBdWRpdERhdGE6W10sCiAgICAgICAgbm9kZU9wdGlvbnM6IFsKICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RJbmZvRmxhZycsICdsYWJlbCc6ICflpZfppJDln7rmnKzkv6Hmga8nfSwKICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3REaXN0cmlidXRpb25GbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOmUgOWUruS/oeaBryd9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdENvdmVyRmxhZycsICdsYWJlbCc6ICflpZfppJDmib/kv53kv6Hmga8nfSwKICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOaguOS/neS/oeaBryd9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdFJlbmV3YWxGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOe7reacn+e7reS/neS/oeaBryd9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdFByZXNlcnZhdGlvbkZsYWcnLCAnbGFiZWwnOiAn5aWX6aSQ5L+d5YWo5L+h5oGvJ30sCiAgICAgICAgICB7J2tleSc6ICdwcm9kdWN0SGVQZWlGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOaguOi1lOS/oeaBryd9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdFJ1bGVGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOinhOWImeiuouatoyd9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdEZvcm11bGFGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOWFrOW8j+iuouatoyd9XSwKICAgICAgICByZXR1cm5GdW5jdGlvblBvaW50czogW10sCiAgICAgICAgcGRJbmZvOiB7fSwKICAgICAgICBhdWRpdEZvcm06IHsKICAgICAgICAgIHN0b3BEYXRlOiAnJywKICAgICAgICAgIHN0b3BSZWFzb246ICcnLAogICAgICAgIH0sCiAgICAgICAgLy/lpZfppJDlhoXlrrnlrprkuYnooajmoLwKICAgICAgICBjb21ib1RhYmxlRm9ybTogewogICAgICAgICAgICBjb250ZW50TGlzdDpbXSwKICAgICAgICAgIHBkVHlwZTogJzInLAogICAgICAgICAgcGRJbmZvSWQ6ICcnLAogICAgICAgICAgcGRDb2RlOiAnJywKICAgICAgICAgIHBkQXVkaXROb3Rlc0luZm9JZDogJycsCiAgICAgICAgICBwZERlZmluZUNvbnRlbnQ6IFtdLAogICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnJywKICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnJywKICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICcnCiAgICAgICAgfSwKICAgICAgICBydWxlVGFibGVGb3JtOiB7CiAgICAgICAgICBwZFR5cGU6ICcyJywKICAgICAgICAgIHBkSW5mb0lkOiAnJywKICAgICAgICAgIHBkQ29kZTogJycsCiAgICAgICAgICBwZEF1ZGl0Tm90ZXNJbmZvSWQ6ICcnLAogICAgICAgICAgcGREZWZpbmVDb250ZW50OiAnJywKICAgICAgICAgIHBkUmV2aXNlVHlwZTogJycsCiAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogW10sCiAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogJycsCiAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogJycsCiAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6ICcnLAogICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnJywKICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnJywKICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICcnCiAgICAgICAgfSwKICAgICAgICBmb3JtdWxhVGFibGVGb3JtOiB7CiAgICAgICAgICBwZFR5cGU6ICcyJywKICAgICAgICAgIHBkSW5mb0lkOiAnJywKICAgICAgICAgIHBkQ29kZTogJycsCiAgICAgICAgICBwZEF1ZGl0Tm90ZXNJbmZvSWQ6ICcnLAogICAgICAgICAgcGREZWZpbmVDb250ZW50OiAnJywKICAgICAgICAgIHBkUmV2aXNlVHlwZTogJycsCiAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogW10sCiAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogJycsCiAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogJycsCiAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6ICcnLAogICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnJywKICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnJywKICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICcnCiAgICAgICAgfSwKICAgICAgICBjb21ib0F1ZGl0SW5mbzogewogICAgICAgICAgcGRUeXBlOiAnMicsCiAgICAgICAgICBwZEluZm9JZDogJycsCiAgICAgICAgICBwZENvZGU6ICcnLAogICAgICAgICAgcGRBdWRpdENvbmM6ICcnLAogICAgICAgICAgcGRBdWRpdFN0YWZmOiAnJywKICAgICAgICAgIHBkQXVkaXREYXRlOiAnJywKICAgICAgICAgIHBkSXNQb3N0UmV0dXJuOiAnJywKICAgICAgICAgIHBkSXNSZXZpZXdSZXR1cm46ICcnLAogICAgICAgICAgcGRBdWRpdFRpbWVzOiAnJywKICAgICAgICAgIHBkUmV0dXJuVGltZXM6ICcnLAogICAgICAgICAgcGRSZWxlVHlwZTogJycsCiAgICAgICAgICBwZFJlbGVDb250ZW50OiAnJywKICAgICAgICAgIHBkUmVsZUNvbnRkZXQ6IFtdCiAgICAgICAgfSwKICAgICAgICBjb21ib0F1ZGl0RGV0YWlsSW5mbzogewogICAgICAgICAgcGRUeXBlOiAnMicsCiAgICAgICAgICBwZEluZm9JZDogJycsCiAgICAgICAgICBwZENvZGU6ICcnLAogICAgICAgICAgcGRBdWRpdE9yZGVyTnVtOiAnJywKICAgICAgICAgIHBkQXVkaXRJbmZvSWQ6ICcnLAogICAgICAgICAgcGRBdWRpdENvbmM6ICcnLAogICAgICAgICAgcGRBdWRpdFN0YWZmOiAnJywKICAgICAgICAgIHBkQXVkaXREYXRlOiAnJywKICAgICAgICAgIHBkQXVkaXRJZGVhOiAnJywKICAgICAgICAgIHBkUmV0dXJuRnVuY05vZGU6IFtdLAogICAgICAgICAgcGRSZWxlVHlwZTogJycsCiAgICAgICAgICBwZFJlbGVDb250ZW50OiAnJywKICAgICAgICAgIHBkUmVsZUNvbnRkZXQ6IFtdCiAgICAgICAgfSwKICAgICAgICAvL+S6p+WTgeW9ouaAgQogICAgICAgIHBkQXVkaXRUeXBlOiAnJywKICAgICAgICBwZFJldmlzZVR5cGU6ICcnLAogICAgICAgIHBkUmV2aXNlRGF0ZTonJywKICAgICAgICBwZFJldHVybkZ1bmNDb2RlOiAnJywKICAgICAgICBjb21ib05vZGVMaXN0OiBbXSwKICAgICAgICBydWxlTm9kZUxpc3Q6IFtdLAogICAgICAgIGZvcm11bGFOb2RlTGlzdDogW10sCiAgICAgICAgc2hvd0F1ZGl0RGF0YUZsYWc6ICdOJywKICAgICAgICBkaWFsb2dUYWJsZVZpc2libGU6IGZhbHNlLAogICAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTE6IGZhbHNlLAogICAgICAgIHNob3dSdWxlVGFibGVGbGFnOiBmYWxzZSwKICAgICAgICBzaG93Rm9ybXVsYVRhYmxlRmxhZzogZmFsc2UsCiAgICAgICAgY29tYm9VcGRhdGVGbGFnOiBmYWxzZSwKICAgICAgICBydWxlVXBkYXRlRmxhZzogZmFsc2UsCiAgICAgICAgZm9ybXVsYVVwZGF0ZUZsYWc6IGZhbHNlLAogICAgICAgIGRhdGFTZWxlY3Q6IGZhbHNlLAogICAgICAgIHJ1bGVTZWxlY3Q6IGZhbHNlLAogICAgICAgIGZvcm11bGFTZWxlY3Q6IGZhbHNlLAogICAgICAgIHF1aWNraWNvbl9hdWRpdDogImVsLWljb24tYXJyb3ctcmlnaHQiLAogICAgICAgIC8v6KGo5qC85pWw5o2uCiAgICAgICAgY29tYm9Db250ZW50QXVkaXQ6IFtdLAogICAgICAgIGNvbWJvUnVsZUF1ZGl0OiBbXSwKICAgICAgICBjb21ib0Zvcm11bGFBdWRpdDogW10sCiAgICAgICAgY29tYm9SdWxlUmVsZWFzZTogW10sCiAgICAgICAgY29tYm9Gb3JtdWxhUmVsZWFzZTogW10sCiAgICAgICAgY2hlY2tCb3hEYXRhOiBbXSwKICAgICAgICBjaGVja1J1bGVEYXRhOiBbXSwKICAgICAgICBjaGVja0Zvcm11bGFEYXRhOiBbXSwKICAgICAgICAvL+afpeivouWPguaVsAogICAgICAgIHBhcmFtczoge30sCiAgICAgICAgLy/mo4Dpqozop4TliJkKICAgICAgICBydWxlczoge30sCiAgICAgICAgY29tYm9UYWJsZUZvcm1fcnVsZXM6IHsKICAgICAgICAgIHBkRGVmaW5lQ29udGVudDogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlU2VsZWN0JykgKyB0aGlzLiR0KCdjb21ib0F1ZGl0LnBkRGVmaW5lQ29udGVudCcpLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgICAgfV0sCiAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdjb21ib0F1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgnY29tYm9BdWRpdC5wZEF1ZGl0Q29uY3RoaXMnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgIH1dLAogICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlSW5wdXQnKSArIHRoaXMuJHQoJ2NvbWJvQXVkaXQucGROb3RQYXNzT3BpbmlvbicpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH1dCiAgICAgICAgfSwKICAgICAgICBydWxlVGFibGVGb3JtX3J1bGVzOiB7CiAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlU2VsZWN0JykgKyB0aGlzLiR0KCdjb21ib0F1ZGl0LnBkRGVmaW5lQ29udGVudCcpLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgICAgfV0sCiAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdjb21ib0F1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgnY29tYm9BdWRpdC5wZEF1ZGl0Q29uY3RoaXMnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgIH1dLAogICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlSW5wdXQnKSArIHRoaXMuJHQoJ2NvbWJvQXVkaXQucGROb3RQYXNzT3BpbmlvbicpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH1dCiAgICAgICAgfSwKICAgICAgICBmb3JtdWxhVGFibGVGb3JtX3J1bGVzOiB7CiAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlU2VsZWN0JykgKyB0aGlzLiR0KCdjb21ib0F1ZGl0LnBkRGVmaW5lQ29udGVudCcpLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgICAgfV0sCiAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdjb21ib0F1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgnY29tYm9BdWRpdC5wZEF1ZGl0Q29uY3RoaXMnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgIH1dLAogICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlSW5wdXQnKSArIHRoaXMuJHQoJ2NvbWJvQXVkaXQucGROb3RQYXNzT3BpbmlvbicpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH1dCiAgICAgICAgfSwKICAgICAgICBhdWRpdFJ1bGVzOiB7CiAgICAgICAgICBwZEF1ZGl0Q29uYzogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGxlYXNlU2VsZWN0JykgKyB0aGlzLiR0KCdjb21ib0F1ZGl0LnBkQXVkaXRDb25jJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgICB9XSwKICAgICAgICAgIHBkUmVsZVR5cGU6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdjb21ib0F1ZGl0LnBsZWFzZVNlbGVjdCcpICsgdGhpcy4kdCgnY29tYm9BdWRpdC5wZFJlbGVUeXBlJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgICB9XSwKICAgICAgICAgIHBkQXVkaXRJZGVhOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnY29tYm9BdWRpdC5wbGVhc2VJbnB1dCcpICsgdGhpcy4kdCgnY29tYm9BdWRpdC5wZEF1ZGl0SWRlYScpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgLy/kuqflk4HlrprkuYnlhoXlrrkKICAgICAgJ2NvbWJvVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudCcoc2VsZWN0ZWRDb2RlcykgewogICAgICAgIGlmIChzZWxlY3RlZENvZGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgZm9yIChjb25zdCBjb21ib05vZGUgb2YgdGhpcy5jb21ib05vZGVMaXN0KSB7CiAgICAgICAgICAgIGNvbWJvTm9kZS5kaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMoc2VsZWN0ZWRDb2RlcywgJzAwMDAwMCcpKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgY29tYm9Ob2RlIG9mIHRoaXMuY29tYm9Ob2RlTGlzdCkgewogICAgICAgICAgICAgIGNvbWJvTm9kZS5kaXNhYmxlZCA9IGNvbWJvTm9kZS52YWx1ZSAhPT0gJzAwMDAwMCcKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChjb25zdCBjb21ib05vZGUgb2YgdGhpcy5jb21ib05vZGVMaXN0KSB7CiAgICAgICAgICAgICAgY29tYm9Ob2RlLmRpc2FibGVkID0gY29tYm9Ob2RlLnZhbHVlID09PSAnMDAwMDAwJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvL+Wll+mkkOWPkeW4g+WuoeaguOe7k+iuugogICAgICAnY29tYm9UYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzJygpIHsKICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmNvbWJvVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpczsKICAgICAgICBpZiAodmFsID09ICdZJykgewogICAgICAgICAgdGhpcy5jb21ib1RhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsKICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOwogICAgICAgICAgdGhpcy5jb21ib1RhYmxlRm9ybV9ydWxlcy5wZE5vdFBhc3NPcGluaW9uID0gW3tyZXF1aXJlZDogZmFsc2V9XQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbWJvVGFibGVGb3JtX3J1bGVzLnBkTm90UGFzc09waW5pb24gPSBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnY29tYm9BdWRpdC5wZE5vdFBhc3NPcGluaW9uJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfV0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5aWX6aSQ6KeE5YiZ6K6i5q2j5YaF5a65CiAgICAgICdydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlJyhzZWxlY3RlZENvZGVzKSB7CiAgICAgICAgdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZW50PScyJzsKICAgICAgICBpZiAoc2VsZWN0ZWRDb2Rlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGZvciAoY29uc3QgcnVsZU5vZGUgb2YgdGhpcy5ydWxlTm9kZUxpc3QpIHsKICAgICAgICAgICAgcnVsZU5vZGUuZGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgY29kZUxpc3QgPSBbXTsKICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiBzZWxlY3RlZENvZGVzKSB7CiAgICAgICAgICAgIGNvZGVMaXN0LnB1c2goY29kZS52YWx1ZSkKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMoY29kZUxpc3QsICcwMDAnKSkgewogICAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGVOb2RlIG9mIHRoaXMucnVsZU5vZGVMaXN0KSB7CiAgICAgICAgICAgICAgcnVsZU5vZGUuZGlzYWJsZWQgPSBydWxlTm9kZS52YWx1ZSAhPT0gJzAwMCcKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChjb25zdCBydWxlTm9kZSBvZiB0aGlzLnJ1bGVOb2RlTGlzdCkgewogICAgICAgICAgICAgIHJ1bGVOb2RlLmRpc2FibGVkID0gcnVsZU5vZGUudmFsdWUgPT09ICcwMDAnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5aWX6aSQ6KeE5YiZ6K6i5q2j5a6h5qC45oSP6KeBCiAgICAgICdydWxlVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcycoKSB7CiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5ydWxlVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpczsKICAgICAgICBpZiAodmFsID09ICdZJykgewogICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOwogICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJzsKICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybV9ydWxlcy5wZE5vdFBhc3NPcGluaW9uID0gW3tyZXF1aXJlZDogZmFsc2V9XQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm1fcnVsZXMucGROb3RQYXNzT3BpbmlvbiA9IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdjb21ib0F1ZGl0LnBkTm90UGFzc09waW5pb24nKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9XQogICAgICAgIH0KICAgICAgfSwKICAgICAgLy/kuqflk4HlhazlvI/orqLmraPlhazlvI8KICAgICAgJ2Zvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUnKHNlbGVjdGVkQ29kZXMpIHsKICAgICAgICBpZiAoc2VsZWN0ZWRDb2Rlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGZvciAoY29uc3QgZm9ybXVsYU5vZGUgb2YgdGhpcy5mb3JtdWxhTm9kZUxpc3QpIHsKICAgICAgICAgICAgZm9ybXVsYU5vZGUuZGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgY29kZUxpc3QgPSBbXTsKICAgICAgICAgIGZvciAoY29uc3QgY29kZSBvZiBzZWxlY3RlZENvZGVzKSB7CiAgICAgICAgICAgIGNvZGVMaXN0LnB1c2goY29kZS52YWx1ZSkKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMoY29kZUxpc3QsICcwMDAnKSkgewogICAgICAgICAgICBmb3IgKGNvbnN0IGZvcm11bGFOb2RlIG9mIHRoaXMuZm9ybXVsYU5vZGVMaXN0KSB7CiAgICAgICAgICAgICAgZm9ybXVsYU5vZGUuZGlzYWJsZWQgPSBmb3JtdWxhTm9kZS52YWx1ZSAhPT0gJzAwMCcKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChjb25zdCBmb3JtdWxhTm9kZSBvZiB0aGlzLmZvcm11bGFOb2RlTGlzdCkgewogICAgICAgICAgICAgIGZvcm11bGFOb2RlLmRpc2FibGVkID0gZm9ybXVsYU5vZGUudmFsdWUgPT09ICcwMDAnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5Lqn5ZOB5YWs5byP6K6i5q2j5a6h5qC457uT6K66CiAgICAgICdmb3JtdWxhVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcycoKSB7CiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpczsKICAgICAgICAvL+WuoeaguOmAmui/hwogICAgICAgIGlmICh2YWwgPT0gJ1knKSB7CiAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7CiAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOwogICAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtX3J1bGVzLnBkTm90UGFzc09waW5pb24gPSBbe3JlcXVpcmVkOiBmYWxzZX1dCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybV9ydWxlcy5wZE5vdFBhc3NPcGluaW9uID0gW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NvbWJvQXVkaXQucGROb3RQYXNzT3BpbmlvbicpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9LAogICAgICAvL+aVtOS9k+WuoeaguOe7k+iuugogICAgICAnY29tYm9BdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMnKCkgewogICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmM7CiAgICAgICAgaWYgKHZhbCA9PSAnWScpIHsKICAgICAgICAgIGlmICh0aGlzLnBkQXVkaXRUeXBlID09ICczJykgewogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIGlmICgodGhpcy5wZEF1ZGl0VHlwZSA9PT0gJzEnIHx8IHRoaXMucGRSZXZpc2VUeXBlID09PSAnMScpKSB7CiAgICAgICAgICAgIHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRSZWxlQ29udGVudD0nMSc7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbWJvQ29udGVudEF1ZGl0Lmxlbmd0aCAhPSB0aGlzLmNvbWJvTm9kZUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgnY29tYm9BdWRpdC5jb25maXJtUGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwKICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbWJvTm9kZSBvZiB0aGlzLmNvbWJvQ29udGVudEF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2goY29tYm9Ob2RlLnBkRGVmaW5lQ29udGVudCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5jb21ib05vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuY29tYm9Ob2RlTGlzdFtpXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QsIG5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Db250ZW50QXVkaXQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBwZERlZmluZUNvbnRlbnQ6IG5vZGVOYW1lLAogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnWScsCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLAogICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0RGF0YSgpCiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5hdWRpdERhdGEoKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5hdWRpdERhdGEoKTsKICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZGV0Lmxlbmd0aCA8IHRoaXMuY29tYm9Db250ZW50QXVkaXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29uZmlybVBhc3NOb3REZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7CiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksCiAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLAogICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewoKICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy/kuqflk4Hop4TliJnlhazlvI/orqLmraMKICAgICAgICAgIGlmICh0aGlzLnBkUmV2aXNlVHlwZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnNob3dSdWxlVGFibGVGbGFnICYmIHRoaXMuc2hvd0Zvcm11bGFUYWJsZUZsYWcpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib1J1bGVBdWRpdC5sZW5ndGggIT0gdGhpcy5ydWxlTm9kZUxpc3QubGVuZ3RoIC0gMSB8fCB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0Lmxlbmd0aCAhPSB0aGlzLmZvcm11bGFOb2RlTGlzdC5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29uZmlybVBhc3NEZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7CiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksCiAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLAogICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICBsZXQgbm9kZUxpc3QxID0gW107CiAgICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdDIgPSBbXTsKICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBydWxlTm9kZSBvZiB0aGlzLmNvbWJvUnVsZUF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgbm9kZUxpc3QxLnB1c2gocnVsZU5vZGUucGRGb3JtdWxhUnVsZUNvZGUpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmb3JtdWxhTm9kZSBvZiB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgbm9kZUxpc3QyLnB1c2goZm9ybXVsYU5vZGUucGRGb3JtdWxhUnVsZUNvZGUpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0MSwgbm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvUnVsZUF1ZGl0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcxJywKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkQXVkaXRDb25jdGhpczogJ1knLAogICAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLAogICAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAnJwogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmZvcm11bGFOb2RlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0Miwgbm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcxJywKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkQXVkaXRDb25jdGhpczogJ1knLAogICAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLAogICAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiAnJwogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpdFJ1bGVEYXRhKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRGb3JtdWxhRGF0YSgpCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRSdWxlRGF0YSgpOwogICAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0Rm9ybXVsYURhdGEoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5hdWRpdFJ1bGVEYXRhKCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib1J1bGVSZWxlYXNlLmxlbmd0aCA8IHRoaXMuY29tYm9SdWxlQXVkaXQubGVuZ3RoIHx8IHRoaXMuY29tYm9Gb3JtdWxhUmVsZWFzZS5sZW5ndGggPCB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29uZmlybVBhc3NOb3REZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwKICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CgogICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CgogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAodGhpcy5zaG93UnVsZVRhYmxlRmxhZykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tYm9SdWxlQXVkaXQubGVuZ3RoICE9IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdjb21ib0F1ZGl0LmNvbmZpcm1QYXNzRGVmaW5pdGlvbicpLCB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS50aXAnKSwgewogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksCiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGROb2RlIG9mIHRoaXMuY29tYm9SdWxlQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2gocGROb2RlLnBkRm9ybXVsYVJ1bGVDb2RlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLnJ1bGVOb2RlTGlzdFtpXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0LCBub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib1J1bGVBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcxJywKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdZJywKICAgICAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRSdWxlRGF0YSgpCiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0UnVsZURhdGEoKQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpdFJ1bGVEYXRhKCk7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbWJvUnVsZVJlbGVhc2UubGVuZ3RoIDwgdGhpcy5jb21ib1J1bGVBdWRpdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29uZmlybVBhc3NOb3REZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7CiAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLAogICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewoKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnNob3dGb3JtdWxhVGFibGVGbGFnKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib0Zvcm11bGFBdWRpdC5sZW5ndGggIT0gdGhpcy5mb3JtdWxhTm9kZUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29uZmlybVBhc3NEZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwKICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwZE5vZGUgb2YgdGhpcy5jb21ib0Zvcm11bGFBdWRpdCkgewogICAgICAgICAgICAgICAgICAgICAgbm9kZUxpc3QucHVzaChwZE5vZGUucGRGb3JtdWxhUnVsZUNvZGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5mb3JtdWxhTm9kZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QsIG5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzInLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkQXVkaXRDb25jdGhpczogJ1knLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJycKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpdEZvcm11bGFEYXRhKCkKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaXRGb3JtdWxhRGF0YSgpCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLmF1ZGl0Rm9ybXVsYURhdGEoKTsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tYm9Gb3JtdWxhUmVsZWFzZS5sZW5ndGggPCB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgnY29tYm9BdWRpdC5jb25maXJtUGFzc05vdERlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksCiAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewoKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy/lrqHmoLjkuI3pgJrov4cKICAgICAgICBpZiAodmFsID09ICdOJykgewogICAgICAgICAgaWYgKHRoaXMucGRBdWRpdFR5cGUgPT0gJzMnKSB7CiAgICAgICAgICAgIHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMgPSBbIuWll+mkkOWBnOWUriJdOwogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIGlmICgodGhpcy5wZEF1ZGl0VHlwZSA9PT0gJzEnIHx8IHRoaXMucGRSZXZpc2VUeXBlID09PSAnMScpKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbWJvQ29udGVudEF1ZGl0Lmxlbmd0aCAhPSB0aGlzLmNvbWJvTm9kZUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgnY29tYm9BdWRpdC5jb25maXJtTm90UGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jb25maXJtJyksCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwKICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbWJvTm9kZSBvZiB0aGlzLmNvbWJvQ29udGVudEF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2goY29tYm9Ob2RlLnBkRGVmaW5lQ29udGVudCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5jb21ib05vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuY29tYm9Ob2RlTGlzdFtpXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QsIG5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Db250ZW50QXVkaXQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBwZERlZmluZUNvbnRlbnQ6IG5vZGVOYW1lLAogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLAogICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJ+WuoeaguOS4jemAmui/hycKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnJlQmFjaygpCiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5yZUJhY2soKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yZUJhY2soKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvL+S6p+WTgeinhOWImeWFrOW8j+iuouatowogICAgICAgICAgaWYgKHRoaXMucGRSZXZpc2VUeXBlID09PSAnMCcpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1J1bGVUYWJsZUZsYWcgJiYgdGhpcy5zaG93Rm9ybXVsYVRhYmxlRmxhZykgewogICAgICAgICAgICAgIGlmICh0aGlzLmNvbWJvUnVsZUF1ZGl0Lmxlbmd0aCAhPSB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGggLSAxIHx8IHRoaXMuY29tYm9Gb3JtdWxhQXVkaXQubGVuZ3RoICE9IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgnY29tYm9BdWRpdC5jb25maXJtTm90UGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsKICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwKICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksCiAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdDEgPSBbXTsKICAgICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0MiA9IFtdOwogICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGVOb2RlIG9mIHRoaXMuY29tYm9SdWxlQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgICBub2RlTGlzdDEucHVzaChydWxlTm9kZS5wZEZvcm11bGFSdWxlQ29kZSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZvcm11bGFOb2RlIG9mIHRoaXMuY29tYm9Gb3JtdWxhQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgICBub2RlTGlzdDIucHVzaChmb3JtdWxhTm9kZS5wZEZvcm11bGFSdWxlQ29kZSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVOYW1lID0gdGhpcy5ydWxlTm9kZUxpc3RbaV0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QxLCBub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9SdWxlQXVkaXQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzEnLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwKICAgICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICflrqHmoLjkuI3pgJrov4cnCiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZm9ybXVsYU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVOYW1lID0gdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QyLCBub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Gb3JtdWxhQXVkaXQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzInLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwKICAgICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICflrqHmoLjkuI3pgJrov4cnCiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVCYWNrKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybXVsYUJhY2soKQogICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVCYWNrKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybXVsYUJhY2soKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5ydWxlQmFjaygpOwogICAgICAgICAgICAgICAgdGhpcy5mb3JtdWxhQmFjaygpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh0aGlzLnNob3dSdWxlVGFibGVGbGFnKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib1J1bGVBdWRpdC5sZW5ndGggIT0gdGhpcy5ydWxlTm9kZUxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29uZmlybU5vdFBhc3NEZWZpbml0aW9uJyksIHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLnRpcCcpLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwKICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBydWxlTm9kZSBvZiB0aGlzLmNvbWJvUnVsZUF1ZGl0KSB7CiAgICAgICAgICAgICAgICAgICAgICBub2RlTGlzdC5wdXNoKHJ1bGVOb2RlLnBkRm9ybXVsYVJ1bGVDb2RlKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucnVsZU5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSB0aGlzLnJ1bGVOb2RlTGlzdFtpXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fLmluY2x1ZGVzKG5vZGVMaXN0LCBub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib1J1bGVBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwZFJldmlzZVR5cGU6ICcxJywKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS5wZEZvcm11bGFSdWxlRGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXNjcmliZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6ICdOJywKICAgICAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogJ04nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246ICflrqHmoLjkuI3pgJrov4cnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMucnVsZUJhY2soKQogICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlQmFjaygpCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVCYWNrKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0Zvcm11bGFUYWJsZUZsYWcpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0Lmxlbmd0aCAhPSB0aGlzLmZvcm11bGFOb2RlTGlzdC5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgnY29tYm9BdWRpdC5jb25maXJtTm90UGFzc0RlZmluaXRpb24nKSwgdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UudGlwJyksIHsKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZvcm11bGFOb2RlIG9mIHRoaXMuY29tYm9Gb3JtdWxhQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGVMaXN0LnB1c2goZm9ybXVsYU5vZGUucGRGb3JtdWxhUnVsZUNvZGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5mb3JtdWxhTm9kZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIGxldCBub2RlTmFtZSA9IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl8uaW5jbHVkZXMobm9kZUxpc3QsIG5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzInLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkQXVkaXRDb25jdGhpczogJ04nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiAnTicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogJ+WuoeaguOS4jemAmui/hycKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtdWxhQmFjaygpCiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm11bGFCYWNrKCkKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybXVsYUJhY2soKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7fSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMucGRJbmZvID0gdGhpcy5nZXRQZERhdGEoKTsKICAgICAgdGhpcy5wZEF1ZGl0VHlwZSA9IHRoaXMucGRJbmZvLmRlZlR5cGU7CiAgICAgIHRoaXMuY29tYm9BdWRpdEluZm8ucGRDb2RlID0gdGhpcy5wZEluZm8ucHBDb2RlOwogICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkSW5mb0lkID0gdGhpcy5wZEluZm8uaWQ7CiAgICAgIHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRDb2RlID0gdGhpcy5wZEluZm8ucHBDb2RlOwogICAgICB0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkSW5mb0lkID0gdGhpcy5wZEluZm8uaWQ7CiAgICAgIGlmICh0aGlzLnBkQXVkaXRUeXBlID09ICcxJykgewogICAgICAgIHRoaXMucXVlcnlQZEluZm9EYXRhKCkKICAgICAgfQogICAgICBpZiAodGhpcy5wZEF1ZGl0VHlwZSA9PSAnMicpIHsKICAgICAgICB0aGlzLnF1ZXJ5UmV2aXNlRGF0YSgpCiAgICAgIH0KICAgICAgaWYgKHRoaXMucGRBdWRpdFR5cGUgPT0gJzMnKSB7CiAgICAgICAgdGhpcy5xdWVyeVN0b3AoKQogICAgICB9CiAgICAgIHRoaXMuY2FjaGVTdHJEYXRhKCdwZEZpbGVBdWRpdFRhYmxlYmFjaycsIG51bGwpOwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNoYW5nZURpYWxvZ0ZpbGVSZWxlYXNlKGZsYWcpIHsKICAgICAgICAgICAgdGhpcy5zaG93Q29tYm9GaWxlUmVsZWFzZUZsYWcgPSBmbGFnCiAgICAgICAgfSwKICAgICAgICBicmluZ1BkRmlsZUF1ZGl0RGF0YSh2YWwpewogICAgICAgICAgICB0aGlzLnBkRmlsZUF1ZGl0RGF0YSA9IHZhbAogICAgICAgIH0sCiAgICAgICAgc2hvd0NvbWJvRmlsZVJlbGVhc2VQYWdlKCl7CiAgICAgICAgICAgIHRoaXMuc2hvd0NvbWJvRmlsZVJlbGVhc2VGbGFnID10cnVlOwogICAgICAgIH0sCiAgICAgIHF1ZXJ5UGRJbmZvRGF0YSgpIHsKICAgICAgICB0aGlzLmNvbWJvTm9kZUxpc3QgPSBbCiAgICAgICAgICB7J2tleSc6ICcwMDAwMDAnLCAndmFsdWUnOiAnMDAwMDAwJywgJ2xhYmVsJzogJ+WFqOmDqCcsICdkaXNhYmxlZCc6IGZhbHNlfSwKICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RJbmZvRmxhZycsICd2YWx1ZSc6ICdwcm9kdWN0SW5mb0ZsYWcnLCAnbGFiZWwnOiAn5aWX6aSQ5Z+65pys5L+h5oGvJywgJ2Rpc2FibGVkJzogZmFsc2V9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnLCAndmFsdWUnOiAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnLCAnbGFiZWwnOiAn5aWX6aSQ6ZSA5ZSu5L+h5oGvJywgJ2Rpc2FibGVkJzogZmFsc2V9LAogICAgICAgICAgeydrZXknOiAncHJvZHVjdENvdmVyRmxhZycsICd2YWx1ZSc6ICdwcm9kdWN0Q292ZXJGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOaJv+S/neS/oeaBrycsICdkaXNhYmxlZCc6IGZhbHNlfSwKICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJywgJ3ZhbHVlJzogJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJywgJ2xhYmVsJzogJ+Wll+mkkOaguOS/neS/oeaBrycsICdkaXNhYmxlZCc6IGZhbHNlfSwKICAgICAgICAgIHsna2V5JzogJ3Byb2R1Y3RIZVBlaUZsYWcnLCAndmFsdWUnOiAncHJvZHVjdEhlUGVpRmxhZycsICdsYWJlbCc6ICflpZfppJDmoLjotZTkv6Hmga8nLCAnZGlzYWJsZWQnOiBmYWxzZX0KICAgICAgICBdOwogICAgICAgIHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRSZWxlVHlwZT0nMSc7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5jb21ib1RhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkKICAgICAgICB9KQogICAgICB9LAogICAgICAvL+afpeivouiuouato+eUs+ivt+ihqOaVsOaNrgogICAgICBxdWVyeVJldmlzZURhdGEoKSB7CiAgICAgICAgdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVUeXBlPScyJzsKICAgICAgICBxdWVyeVJldmlzZURhdGEodGhpcy5idWlsZFJlcXVlc3REYXRhKHsKICAgICAgICAgICJwZEluZm9JZCI6IHRoaXMucGRJbmZvLmlkLAogICAgICAgICAgInBkVmVySWQiOiB0aGlzLnBkSW5mby5wZFZlcklkCiAgICAgICAgfSkpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMucGRSZXZpc2VUeXBlID0gcmVzLmRhdGEucGRSZXZpc2VUeXBlOwogICAgICAgICAgdGhpcy5wZFJldHVybkZ1bmNDb2RlID0gcmVzLmRhdGEucGRSZXR1cm5GdW5jQ29kZTsKICAgICAgICAgIHRoaXMucGRSZXZpc2VEYXRlPXJlcy5kYXRhLnBkUmV2aXNlRGF0ZTsKICAgICAgICAgIGNvbnN0IGNvZGVzID0gdGhpcy5wZFJldHVybkZ1bmNDb2RlLnNwbGl0KCIsIik7CiAgICAgICAgICBpZiAodGhpcy5wZFJldmlzZVR5cGUgPT09ICcxJykgewogICAgICAgICAgICB0aGlzLmNvbWJvTm9kZUxpc3QgPSBbXTsKICAgICAgICAgICAgdGhpcy5jb21ib05vZGVMaXN0LnB1c2goewogICAgICAgICAgICAgIGtleTogJzAwMDAwMCcsCiAgICAgICAgICAgICAgdmFsdWU6ICcwMDAwMDAnLAogICAgICAgICAgICAgIGxhYmVsOiAn5YWo6YOoJywKICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb2RlcykgewogICAgICAgICAgICAgIHN3aXRjaCAoaXRlbSkgewogICAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdEluZm9GbGFnJzoKICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib05vZGVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgIGtleTogJ3Byb2R1Y3RJbmZvRmxhZycsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwcm9kdWN0SW5mb0ZsYWcnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5aWX6aSQ5Z+65pys5L+h5oGvJywKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnOgogICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvTm9kZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAga2V5OiAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5aWX6aSQ6ZSA5ZSu5L+h5oGvJywKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdENvdmVyRmxhZyc6CiAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Ob2RlTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICdwcm9kdWN0Q292ZXJGbGFnJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3Byb2R1Y3RDb3ZlckZsYWcnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5aWX6aSQ5om/5L+d5L+h5oGvJywKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnOgogICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvTm9kZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAga2V5OiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAncHJvZHVjdFVuZGVyd3JpdGluZ0ZsYWcnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5aWX6aSQ5qC45L+d5L+h5oGvJywKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAvKiBjYXNlICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZyc6CiAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Ob2RlTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZycsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZycsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICflpZfppJDkv53lhajkv6Hmga8nLAogICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgYnJlYWs7Ki8KICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RIZVBlaUZsYWcnOgogICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvTm9kZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAga2V5OiAncHJvZHVjdEhlUGVpRmxhZycsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwcm9kdWN0SGVQZWlGbGFnJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+Wll+mkkOaguOi1lOS/oeaBrycsCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgLyogY2FzZSAncHJvZHVjdFJlbmV3YWxGbGFnJzoKICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib05vZGVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgIGtleTogJ3Byb2R1Y3RSZW5ld2FsRmxhZycsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwcm9kdWN0UmVuZXdhbEZsYWcnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5aWX6aSQ57ut5pyf57ut5L+d5L+h5oGvJywKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOyovCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5wZFJldmlzZVR5cGUgPT09ICcwJykgewogICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29kZXMpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RSdWxlRmxhZyc6CiAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1J1bGVUYWJsZUZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgICB0aGlzLmZpbmROb2RlUnVsZXNMaXN0KHRoaXMucGRSZXZpc2VEYXRlKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdwcm9kdWN0Rm9ybXVsYUZsYWcnOgogICAgICAgICAgICAgICAgICB0aGlzLnNob3dGb3JtdWxhVGFibGVGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdGhpcy5maW5kTm9kZUZvcm11bGFMaXN0KHRoaXMucGRSZXZpc2VEYXRlKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSwKICAgICAgcXVlcnlTdG9wKCkgewogICAgICAgIC8v5p+l6K+i5YGc5ZSu5pe26Ze0LCDlgZzllK7ljp/lm6AKICAgICAgICBxdWVyeVN0b3AodGhpcy5idWlsZFJlcXVlc3REYXRhKHsiaWQiOiB0aGlzLnBkSW5mby5pZCwgInBkVmVySWQiOiB0aGlzLnBkSW5mby5wZFZlcklkfSkpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuYXVkaXRGb3JtLnN0b3BEYXRlID0gcmVzLmRhdGEucGRWZXJEaXNEYXRlOwogICAgICAgICAgdGhpcy5hdWRpdEZvcm0uc3RvcFJlYXNvbiA9IHJlcy5kYXRhLnBkVmVyRGlzUmVzbgogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGZpbmROb2RlRm9ybXVsYUxpc3QodmFsKSB7CiAgICAgICAgZmluZE5vZGVGb3JtdWxhTGlzdCh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoeyJwZEluZm9JZCI6IHRoaXMucGRJbmZvLmlkLCJwZFJldmlzZURhdGUiOiB2YWx9KSkudGhlbihyZXMgPT4gewogICAgICAgICAgbGV0IGZvcm11bGFMaXN0Tm9kZSA9IHJlcy5kYXRhOwogICAgICAgICAgaWYgKGZvcm11bGFMaXN0Tm9kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybXVsYU5vZGVMaXN0ID0gW3sna2V5JzogJzAwMCcsICd2YWx1ZSc6ICcwMDAnLCAnbGFiZWwnOiAn5YWo6YOoJywgJ2Rpc2FibGVkJzogZmFsc2V9XTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmb3JtdWxhTGlzdE5vZGUpIHsKICAgICAgICAgICAgdGhpcy5mb3JtdWxhTm9kZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAga2V5OiBpdGVtLnBkQ2FsY0NvZGUsCiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0ucGRDYWxjQ29kZSwKICAgICAgICAgICAgICBsYWJlbDogaXRlbS5wZENhbGNDb2RlLAogICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiBpdGVtLnBkQnVzc1R5cGUsCiAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IGl0ZW0ucGRCdXNzRGV0YWlsVHlwZSwKICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IGl0ZW0ucGRDYWxjRGVzYywKICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIGlmKHRoaXMuJHJlZnMuZm9ybXVsYVRhYmxlRm9ybSl7CiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGZpbmROb2RlUnVsZXNMaXN0KHZhbCkgewogICAgICAgIGZpbmROb2RlUnVsZXNMaXN0KHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh7InBkSW5mb0lkIjogdGhpcy5wZEluZm8uaWQsInBkUmV2aXNlRGF0ZSI6IHZhbCwicHBDb2RlIjogdGhpcy5wZEluZm8ucHBDb2RlfSkpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGxldCBydWxlTGlzdE5vZGUgPSByZXMuZGF0YTsKICAgICAgICAgIGlmIChydWxlTGlzdE5vZGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLnJ1bGVOb2RlTGlzdCA9IFt7J2tleSc6ICcwMDAnLCAndmFsdWUnOiAnMDAwJywgJ2xhYmVsJzogJ+WFqOmDqCcsICdkaXNhYmxlZCc6IGZhbHNlfV07CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcnVsZUxpc3ROb2RlKSB7CiAgICAgICAgICAgIHRoaXMucnVsZU5vZGVMaXN0LnB1c2goewogICAgICAgICAgICAgIGtleTogaXRlbS5wZFJ1bGVDb2RlLAogICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnBkUnVsZUNvZGUsCiAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ucGRSdWxlQ29kZSwKICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlVHlwZTogaXRlbS5wZFJ1bGVDbHMsCiAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURldGFpbHM6IGl0ZW0ucGRSdWxlRHRDbHMsCiAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiBpdGVtLnBkUnVsZURlc2MsCiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICBpZih0aGlzLiRyZWZzLnJ1bGVUYWJsZUZvcm0pewogICAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZVRhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQoKICAgICAgfSwKICAgICAgZ2V0RnVuY0NvZGUodmFsKSB7CiAgICAgICAgbGV0IHJldHVyblRleHQgPSAnJzsKICAgICAgICBzd2l0Y2ggKHZhbCkgewogICAgICAgICAgY2FzZSAncHJvZHVjdFJ1bGVGbGFnJzoKICAgICAgICAgICAgcmV0dXJuVGV4dCA9IHJldHVyblRleHQgKyAn5aWX6aSQ6KeE5YiZ6K6i5q2jJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdwcm9kdWN0Rm9ybXVsYUZsYWcnOgogICAgICAgICAgICByZXR1cm5UZXh0ID0gcmV0dXJuVGV4dCArICflpZfppJDlhazlvI/orqLmraMnOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RJbmZvRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSByZXR1cm5UZXh0ICsgJ+Wll+mkkOWfuuacrOS/oeaBryc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAncHJvZHVjdERpc3RyaWJ1dGlvbkZsYWcnOgogICAgICAgICAgICByZXR1cm5UZXh0ID0gcmV0dXJuVGV4dCArICflpZfppJDplIDllK7kv6Hmga8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RDb3ZlckZsYWcnOgogICAgICAgICAgICByZXR1cm5UZXh0ID0gcmV0dXJuVGV4dCArICflpZfppJDmib/kv53kv6Hmga8nOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Byb2R1Y3RVbmRlcndyaXRpbmdGbGFnJzoKICAgICAgICAgICAgcmV0dXJuVGV4dCA9IHJldHVyblRleHQgKyAn5aWX6aSQ5qC45L+d5L+h5oGvJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdwcm9kdWN0UHJlc2VydmF0aW9uRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSByZXR1cm5UZXh0ICsgJ+Wll+mkkOS/neWFqOS/oeaBryc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAncHJvZHVjdEhlUGVpRmxhZyc6CiAgICAgICAgICAgIHJldHVyblRleHQgPSByZXR1cm5UZXh0ICsgJ+Wll+mkkOaguOi1lOS/oeaBryc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAncHJvZHVjdFJlbmV3YWxGbGFnJzoKICAgICAgICAgICAgcmV0dXJuVGV4dCA9IHJldHVyblRleHQgKyAn5aWX6aSQ57ut5pyf57ut5L+d5L+h5oGvJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXR1cm5UZXh0OwogICAgICB9LAogICAgICAvL+WuoeaguOWujOavleaMiemSrgogICAgICBhdWRpdFBhc3MoKSB7CiAgICAgICAgdGhpcy4kcmVmcy5jb21ib0F1ZGl0RGV0YWlsSW5mby52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkQXVkaXRDb25jID0gdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZEF1ZGl0Q29uYzsKICAgICAgICAgICAgdGhpcy5jb21ib0F1ZGl0SW5mby5wZFR5cGUgPSAnMic7CiAgICAgICAgICAgIGxldCBwZG9wZXJBdWRpdERldGFpbE5vdGVzSW5mbyA9W107CiAgICAgICAgICAgIC8v5Yik5pat5a6h5qC45piO57uG6K+m5oOF6KGo5qC855qE5YC8CiAgICAgICAgICAgIGlmKHRoaXMucGRSZXZpc2VUeXBlPT0nMScgfHx0aGlzLnBkQXVkaXRUeXBlPT0nMScpewogICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmNvbWJvQ29udGVudEF1ZGl0KXsKICAgICAgICAgICAgICAgIHBkb3BlckF1ZGl0RGV0YWlsTm90ZXNJbmZvLnB1c2goaXRlbSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5zaG93UnVsZVRhYmxlRmxhZyAmJiB0aGlzLnNob3dGb3JtdWxhVGFibGVGbGFnKXsKICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jb21ib1J1bGVBdWRpdCl7CiAgICAgICAgICAgICAgICBwZG9wZXJBdWRpdERldGFpbE5vdGVzSW5mby5wdXNoKGl0ZW0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0KXsKICAgICAgICAgICAgICAgIHBkb3BlckF1ZGl0RGV0YWlsTm90ZXNJbmZvLnB1c2goaXRlbSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICBpZiAodGhpcy5zaG93UnVsZVRhYmxlRmxhZykgewogICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuY29tYm9SdWxlQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgcGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8ucHVzaChpdGVtKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Rm9ybXVsYVRhYmxlRmxhZykgewogICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuY29tYm9Gb3JtdWxhQXVkaXQpIHsKICAgICAgICAgICAgICAgICAgcGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8ucHVzaChpdGVtKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLmNvbWJvQXVkaXRJbmZvLnBkQXVkaXRDb25jPT0nWScgJiYgdGhpcy5jb21ib0F1ZGl0SW5mby5wZEF1ZGl0Q29uYz09J04nICYmIHBkb3BlckF1ZGl0RGV0YWlsTm90ZXNJbmZvLmxlbmd0aD09MCl7CiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcigi6K+35a6M5ZaE5a6h5qC45piO57uG6KGo5qC85pWw5o2uIikKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgbWFwID0gewogICAgICAgICAgICAgICJjb21ib0F1ZGl0SW5mbyI6IHRoaXMuY29tYm9BdWRpdEluZm8sCiAgICAgICAgICAgICAgImNvbWJvQXVkaXREZXRhaWxJbmZvIjogdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mbywKICAgICAgICAgICAgICAicGRvcGVyQXVkaXREZXRhaWxOb3Rlc0luZm8iOiBwZG9wZXJBdWRpdERldGFpbE5vdGVzSW5mbywKICAgICAgICAgICAgICAicGR0ZW1wUHBJbmZvIjogdGhpcy5wZEluZm8KICAgICAgICAgICAgfTsKICAgICAgICAgICAgLy/lj5bmtojmnKzmrKHlrprkuYkKICAgICAgICAgICAgaWYgKHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRBdWRpdENvbmMgPT0gJ1gnKSB7CiAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAncHJvY2Vzc0luc3RhbmNlSWQnOiB0aGlzLnBkSW5mby5wZFByb2Nlc3NJZAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgbWFwWyd3b3JrZmxvd0RhdGEnXSA9IGRhdGE7CiAgICAgICAgICAgICAgdGhpcy5kb0F1ZGl0SW5mb0RhdGEobWFwKQogICAgICAgICAgICB9ICAvL+WBnOWUruS6p+WTgQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkQXVkaXRDb25jID09ICdaJykgewogICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgJ3Byb2Nlc3NJbnN0YW5jZUlkJzogdGhpcy5wZEluZm8ucGRQcm9jZXNzSWQKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIG1hcFsnd29ya2Zsb3dEYXRhJ10gPSBkYXRhOwogICAgICAgICAgICAgIHRoaXMuZG9BdWRpdEluZm9EYXRhKG1hcCkKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+WuoeaguOS4jemAmui/hwogICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkQXVkaXRDb25jID09ICdOJykgewogICAgICAgICAgICAgIC8v5YGc5ZSu5Lqn5ZOBCiAgICAgICAgICAgICAgaWYgKHRoaXMucGRBdWRpdFR5cGUgPT0gJzMnKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgJ3Byb2R1Y3RBdWRpdEZsYWcnOiAnMCcsCiAgICAgICAgICAgICAgICAgICd2YXJpYWJsZXMnOiBbInByb2R1Y3REaXNjb250aW51ZWQiXSwKICAgICAgICAgICAgICAgICAgJ3Byb2Nlc3NJbnN0YW5jZUlkJzogdGhpcy5wZEluZm8ucGRQcm9jZXNzSWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBtYXBbJ3dvcmtmbG93RGF0YSddID0gZGF0YTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy/lrqHmoLjkuI3pgJrov4cg6L+U5Zue5a6a5LmJ6IqC54K5CiAgICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkSXNSZXZpZXdSZXR1cm4gPSAnWSc7CiAgICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkUmV0dXJuRnVuY05vZGUgPSB0aGlzLnJldHVyblBvaW50cyh0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzKTsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAncHJvZHVjdEF1ZGl0RmxhZyc6ICcwJywKICAgICAgICAgICAgICAgICAgJ3ZhcmlhYmxlcyc6IHRoaXMucmV0dXJuUG9pbnRzKHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMpLAogICAgICAgICAgICAgICAgICAncHJvY2Vzc0luc3RhbmNlSWQnOiB0aGlzLnBkSW5mby5wZFByb2Nlc3NJZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG1hcFsnd29ya2Zsb3dEYXRhJ10gPSBkYXRhOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmRvQXVkaXRJbmZvRGF0YShtYXApCiAgICAgICAgICAgIH0gZWxzZSB7ICAvL+WuoeaguOmAmui/h+eahAogICAgICAgICAgICAgIGxldCBwYXNzTm9kZVBvaW50cyA9dGhpcy5yZXR1cm5Qb2ludHModGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZGV0KTsKICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkUmVsZUNvbnRkZXQgPSBwYXNzTm9kZVBvaW50czsKICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkUmVsZUNvbnRkZXQgPSBwYXNzTm9kZVBvaW50czsKICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkUmVsZUNvbnRlbnQgPSB0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkUmVsZUNvbnRlbnQ7CiAgICAgICAgICAgICAgdGhpcy5jb21ib0F1ZGl0SW5mby5wZElzUmV2aWV3UmV0dXJuID0gJ04nOwogICAgICAgICAgICAgIGlmICh0aGlzLnBkQXVkaXRUeXBlID09ICczJykgewogICAgICAgICAgICAgICAgLy/lgZzllK7pgJrov4fml7YgIOm7mOiupOWinumHj+WPkeW4gwogICAgICAgICAgICAgICAgdGhpcy5jb21ib0F1ZGl0SW5mby5wZFJlbGVUeXBlID0gIjIiOwogICAgICAgICAgICAgICAgdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVUeXBlID0gIjIiCiAgICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkUmVsZUNvbnRlbnQgPSAnMycKICAgICAgICAgICAgICAgIHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRSZWxlQ29udGVudCA9ICczJwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbWJvQXVkaXRJbmZvLnBkUmVsZVR5cGUgPSB0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkUmVsZVR5cGU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgJ3Byb2R1Y3RBdWRpdEZsYWcnOiAnMScsCiAgICAgICAgICAgICAgICAndmFyaWFibGVzJzogbnVsbCwKICAgICAgICAgICAgICAgICdwcm9jZXNzSW5zdGFuY2VJZCc6IHRoaXMucGRJbmZvLnBkUHJvY2Vzc0lkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG1hcFsnd29ya2Zsb3dEYXRhJ10gPSBkYXRhOwogICAgICAgICAgICAgIHRoaXMuZG9BdWRpdEluZm9EYXRhKG1hcCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGRvQXVkaXRJbmZvRGF0YShtYXApewogICAgICAgIGFkZEF1ZGl0SW5mb0RhdGEodGhpcy5idWlsZFJlcXVlc3REYXRhKG1hcCkpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Byb2R1Y3Qvc3RvcmFnZVBhY2thZ2VzJykKICAgICAgICAgICAgY2xvc2VWaXNpdFRhZygpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogIi9kYXNoYm9hcmQifSk7CiAgICAgICAgfSkKICAgICAgfSwKICAgICAgLy/liLfmlrAKICAgICAgcmVmcmVzaCgpIHsKICAgICAgICB0aGlzLmNvbWJvQXVkaXREZXRhaWxJbmZvLnBkQXVkaXRDb25jID0gJyc7CiAgICAgICAgdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVUeXBlID0gJyc7CiAgICAgICAgdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZEF1ZGl0SWRlYSA9ICcnOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuY29tYm9BdWRpdERldGFpbEluZm8uY2xlYXJWYWxpZGF0ZSgpOwogICAgICAgICAgaWYgKHRoaXMuJHJlZnMuY29tYm9UYWJsZUZvcm0pIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5jb21ib1RhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy4kcmVmcy5ydWxlVGFibGVGb3JtKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZVRhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybXVsYVRhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LAogICAgICAvL+WuoeaguOS4jemAmui/h+WkhOeQhuiKgueCuQogICAgICByZXR1cm5Qb2ludHModmFsKSB7CiAgICAgICAgbGV0IHJldHVyblBvaW50cyA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubm9kZU9wdGlvbnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHZhbFtpXSA9PSB0aGlzLm5vZGVPcHRpb25zW2pdLmxhYmVsKSB7CiAgICAgICAgICAgICAgcmV0dXJuUG9pbnRzLnB1c2godGhpcy5ub2RlT3B0aW9uc1tqXS5rZXkpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldHVyblBvaW50cwogICAgICB9LAogICAgICAvL+mAieS4reS4jemAmui/h+W4puWbnueahOiKgueCuQogICAgICByZUJhY2soKSB7CiAgICAgICAgdGhpcy5yZXR1cm5GdW5jdGlvblBvaW50cyA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb21ib0NvbnRlbnRBdWRpdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMuY29tYm9Db250ZW50QXVkaXRbaV0ucGRJc0NhbmNlbERlZmluaXRpb24gPT0gJ04nICYmIHRoaXMuY29tYm9Db250ZW50QXVkaXRbaV0ucGRBdWRpdENvbmN0aGlzID09ICdOJykgewogICAgICAgICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLnB1c2godGhpcy5nZXRGdW5jQ29kZSh0aGlzLmNvbWJvQ29udGVudEF1ZGl0W2ldLnBkRGVmaW5lQ29udGVudCkpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLmxlbmd0aCA9PSAnMCcpIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoIumAgOWbnuiKgueCueS4uuepuu+8jOivt+S/ruaUueaYjue7huWuoeaguOWGheWuuSIpOwogICAgICAgICAgdGhpcy5yZWZyZXNoKCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5Lqn5ZOB6KeE5YiZ6K6i5q2j6YCJ5Lit5LiN6YCa6L+H5bim5Zue55qE6IqC54K5CiAgICAgIHJ1bGVCYWNrKCkgewogICAgICAgIHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHM9W107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbWJvUnVsZUF1ZGl0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5jb21ib1J1bGVBdWRpdFtpXS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9PSAnTicgJiYgdGhpcy5jb21ib1J1bGVBdWRpdFtpXS5wZEF1ZGl0Q29uY3RoaXMgPT0gJ04nKSB7CiAgICAgICAgICAgIHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMucHVzaCgi5aWX6aSQ6KeE5YiZ6K6i5q2jIik7CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKHRoaXMuY29tYm9SdWxlQXVkaXQubGVuZ3RoID09PSAwKXsKICAgICAgICAgIHRoaXMucmV0dXJuRnVuY3Rpb25Qb2ludHMucHVzaCgi5aWX6aSQ6KeE5YiZ6K6i5q2jIik7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLmxlbmd0aCA9PSAnMCcpIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoIumAgOWbnuiKgueCueS4uuepuu+8jOivt+S/ruaUueaYjue7huWuoeaguOWGheWuuSIpOwogICAgICAgICAgdGhpcy5yZWZyZXNoKCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5Lqn5ZOB5YWs5byP6K6i5q2j6YCJ5Lit5LiN6YCa6L+H5bim5Zue55qE6IqC54K5CiAgICAgIGZvcm11bGFCYWNrKCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb21ib0Zvcm11bGFBdWRpdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMuY29tYm9Gb3JtdWxhQXVkaXRbaV0ucGRJc0NhbmNlbERlZmluaXRpb24gPT0gJ04nICYmIHRoaXMuY29tYm9Gb3JtdWxhQXVkaXRbaV0ucGRBdWRpdENvbmN0aGlzID09ICdOJykgewogICAgICAgICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLnB1c2goIuWll+mkkOWFrOW8j+iuouatoyIpOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZih0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICB0aGlzLnJldHVybkZ1bmN0aW9uUG9pbnRzLnB1c2goIuWll+mkkOWFrOW8j+iuouatoyIpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5yZXR1cm5GdW5jdGlvblBvaW50cy5sZW5ndGggPT0gJzAnKSB7CiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCLpgIDlm57oioLngrnkuLrnqbrvvIzor7fkv67mlLnmmI7nu4blrqHmoLjlhoXlrrkiKTsKICAgICAgICAgIHRoaXMucmVmcmVzaCgpCiAgICAgICAgfQogICAgICB9LAogICAgICAvL+mAieaLqemAmui/h+aYvuekuuWPkeW4g+WGheWuuQogICAgICBhdWRpdERhdGEoKSB7CiAgICAgICAgdGhpcy5jb21ib0F1ZGl0RGV0YWlsSW5mby5wZFJlbGVDb250ZGV0ID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbWJvQ29udGVudEF1ZGl0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5jb21ib0NvbnRlbnRBdWRpdFtpXS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9PSAnTicgJiYgdGhpcy5jb21ib0NvbnRlbnRBdWRpdFtpXS5wZEF1ZGl0Q29uY3RoaXMgPT0gJ1knKSB7CiAgICAgICAgICAgIHRoaXMuY29tYm9BdWRpdERldGFpbEluZm8ucGRSZWxlQ29udGRldC5wdXNoKHRoaXMuZ2V0RnVuY0NvZGUodGhpcy5jb21ib0NvbnRlbnRBdWRpdFtpXS5wZERlZmluZUNvbnRlbnQpKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgLy/pgInmi6npgJrov4fmmL7npLrop4TliJnlj5HluIPlhoXlrrkKICAgICAgYXVkaXRSdWxlRGF0YSgpIHsKICAgICAgICB0aGlzLmNvbWJvUnVsZVJlbGVhc2UgPSBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tYm9SdWxlQXVkaXQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLmNvbWJvUnVsZUF1ZGl0W2ldLnBkSXNDYW5jZWxEZWZpbml0aW9uID09ICdOJyAmJiB0aGlzLmNvbWJvUnVsZUF1ZGl0W2ldLnBkQXVkaXRDb25jdGhpcyA9PSAnWScpIHsKICAgICAgICAgICAgdGhpcy5jb21ib1J1bGVSZWxlYXNlLnB1c2godGhpcy5jb21ib1J1bGVBdWRpdFtpXSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v6YCJ5oup6YCa6L+H5pi+56S65YWs5byP5Y+R5biD5YaF5a65CiAgICAgIGF1ZGl0Rm9ybXVsYURhdGEoKSB7CiAgICAgICAgdGhpcy5jb21ib0Zvcm11bGFSZWxlYXNlID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5jb21ib0Zvcm11bGFBdWRpdFtpXS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9PSAnTicgJiYgdGhpcy5jb21ib0Zvcm11bGFBdWRpdFtpXS5wZEF1ZGl0Q29uY3RoaXMgPT0gJ1knKSB7CiAgICAgICAgICAgIHRoaXMuY29tYm9Gb3JtdWxhUmVsZWFzZS5wdXNoKHRoaXMuY29tYm9Gb3JtdWxhQXVkaXRbaV0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvL+aWsOS6p+WTgeaIluS6p+WTgeiuouato+a3u+WKoOWuoeaguOaVsOaNrgogICAgICBhZGRDb21ib0F1ZGl0VGFibGVEYXRhKCkgewogICAgICAgIHRoaXMuJHJlZnMuY29tYm9UYWJsZUZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29tYm9UYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID09ICdZJykgewogICAgICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7CiAgICAgICAgICAgICAgdGhpcy5jb21ib1RhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJycKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5jaGVja0JveERhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib1RhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbWJvVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudFswXSA9PSAnMDAwMDAwJykgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuY29tYm9Ob2RlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQ29tYm9Nb3JlQ29weURhdGEodGhpcy5jb21ib05vZGVMaXN0W2ldLnZhbHVlLCB0aGlzLmNvbWJvQ29udGVudEF1ZGl0KSkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib0NvbnRlbnRBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGREZWZpbmVDb250ZW50OiB0aGlzLmNvbWJvTm9kZUxpc3RbaV0udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkQXVkaXRDb25jdGhpczogdGhpcy5jb21ib1RhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLmNvbWJvVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLmNvbWJvVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24KICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb21ib0NvcHlEYXRhKHRoaXMuY29tYm9UYWJsZUZvcm0ucGREZWZpbmVDb250ZW50WzBdLCB0aGlzLmNvbWJvQ29udGVudEF1ZGl0KSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Db250ZW50QXVkaXQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBwZERlZmluZUNvbnRlbnQ6IHRoaXMuY29tYm9UYWJsZUZvcm0ucGREZWZpbmVDb250ZW50WzBdLAogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLmNvbWJvVGFibGVGb3JtLnBkQXVkaXRDb25jdGhpcywKICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLmNvbWJvVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLAogICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogdGhpcy5jb21ib1RhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodGhpcy5jb21ib1RhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbWJvVGFibGVGb3JtLnBkRGVmaW5lQ29udGVudC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0NvbWJvQ29weURhdGEodGhpcy5jb21ib1RhYmxlRm9ybS5wZERlZmluZUNvbnRlbnRbaV0sIHRoaXMuY29tYm9Db250ZW50QXVkaXQpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib0NvbnRlbnRBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHBkRGVmaW5lQ29udGVudDogdGhpcy5jb21ib1RhYmxlRm9ybS5wZERlZmluZUNvbnRlbnRbaV0sCiAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMuY29tYm9UYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzLAogICAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246IHRoaXMuY29tYm9UYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICBwZE5vdFBhc3NPcGluaW9uOiB0aGlzLmNvbWJvVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGVja0JveERhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrQm94RGF0YVtpXSwgJ3BkQXVkaXRDb25jdGhpcycsIHRoaXMuY29tYm9UYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrQm94RGF0YVtpXSwgJ3BkSXNDYW5jZWxEZWZpbml0aW9uJywgdGhpcy5jb21ib1RhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbik7CiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5jaGVja0JveERhdGFbaV0sICdwZE5vdFBhc3NPcGluaW9uJywgdGhpcy5jb21ib1RhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGREZWZpbmVDb250ZW50ID0gW107CiAgICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID0gJyc7CiAgICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7CiAgICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOwogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jb21ib1RhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LAogICAgICAvL+inhOWImeiuouato+a3u+WKoOWuoeaguOaVsOaNrgogICAgICBhZGRSdWxlQXVkaXRUYWJsZURhdGEoKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ydWxlVGFibGVGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID09ICdZJykgewogICAgICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsKICAgICAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tSdWxlRGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0udmFsdWUgPT0gJzAwMCcpIHsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJ1bGVOb2RlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrTW9yZUNvcHlEYXRhKHRoaXMucnVsZU5vZGVMaXN0W2ldLnZhbHVlLCB0aGlzLmNvbWJvUnVsZUF1ZGl0KSkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib1J1bGVBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMScsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLnJ1bGVOb2RlTGlzdFtpXS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMucnVsZU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5ydWxlTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5ydWxlTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLAogICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMucnVsZVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMucnVsZVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uCiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0NvcHlEYXRhKHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS52YWx1ZSwgdGhpcy5jb21ib1J1bGVBdWRpdCkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvUnVsZUF1ZGl0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMScsCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlWzBdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS5wZEZvcm11bGFSdWxlVHlwZSwKICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0ucGRGb3JtdWxhUnVsZURldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsCiAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMucnVsZVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogdGhpcy5ydWxlVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLAogICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogdGhpcy5ydWxlVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3B5RGF0YSh0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0udmFsdWUsIHRoaXMuY29tYm9SdWxlQXVkaXQpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib1J1bGVBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzEnLAogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVtpXS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlW2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLAogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzLAogICAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246IHRoaXMucnVsZVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMucnVsZVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hlY2tSdWxlRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2hlY2tSdWxlRGF0YVtpXSwgJ3BkQXVkaXRDb25jdGhpcycsIHRoaXMucnVsZVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMpOwogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2hlY2tSdWxlRGF0YVtpXSwgJ3BkSXNDYW5jZWxEZWZpbml0aW9uJywgdGhpcy5ydWxlVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uKTsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrUnVsZURhdGFbaV0sICdwZE5vdFBhc3NPcGluaW9uJywgdGhpcy5ydWxlVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVSdWxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZSA9IFtdOwogICAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID0gJyc7CiAgICAgICAgICAgIHRoaXMucnVsZVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsKICAgICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJzsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZVRhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LAogICAgICAvL+WFrOW8j+iuouato+a3u+WKoOWuoeaguOaVsOaNrgogICAgICBhZGRGb3JtdWxhQXVkaXRUYWJsZURhdGEoKSB7CiAgICAgICAgdGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID09ICdZJykgewogICAgICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsKICAgICAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tGb3JtdWxhRGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgIGlmICh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0udmFsdWUgPT0gJzAwMCcpIHsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmZvcm11bGFOb2RlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrTW9yZUNvcHlEYXRhKHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnZhbHVlLCB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0KSkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib0Zvcm11bGFBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMicsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVDb2RlOiB0aGlzLmZvcm11bGFOb2RlTGlzdFtpXS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYU5vZGVMaXN0W2ldLnBkRm9ybXVsYVJ1bGVUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXNjcmliZTogdGhpcy5mb3JtdWxhTm9kZUxpc3RbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLAogICAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHBkSXNDYW5jZWxEZWZpbml0aW9uOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uCiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0NvcHlEYXRhKHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS52YWx1ZSwgdGhpcy5jb21ib0Zvcm11bGFBdWRpdCkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJvRm9ybXVsYUF1ZGl0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcGRSZXZpc2VUeXBlOiAnMicsCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlQ29kZTogdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlWzBdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZVR5cGU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS5wZEZvcm11bGFSdWxlVHlwZSwKICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVEZXRhaWxzOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbMF0ucGRGb3JtdWxhUnVsZURldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGVzY3JpYmU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVswXS5wZEZvcm11bGFSdWxlRGVzY3JpYmUsCiAgICAgICAgICAgICAgICAgICAgICBwZEF1ZGl0Q29uY3RoaXM6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMsCiAgICAgICAgICAgICAgICAgICAgICBwZElzQ2FuY2VsRGVmaW5pdGlvbjogdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uLAogICAgICAgICAgICAgICAgICAgICAgcGROb3RQYXNzT3BpbmlvbjogdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3B5RGF0YSh0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0udmFsdWUsIHRoaXMuY29tYm9Gb3JtdWxhQXVkaXQpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21ib0Zvcm11bGFBdWRpdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHBkUmV2aXNlVHlwZTogJzInLAogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZUNvZGU6IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZVtpXS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHBkRm9ybXVsYVJ1bGVUeXBlOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgICBwZEZvcm11bGFSdWxlRGV0YWlsczogdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlW2ldLnBkRm9ybXVsYVJ1bGVEZXRhaWxzLAogICAgICAgICAgICAgICAgICAgICAgcGRGb3JtdWxhUnVsZURlc2NyaWJlOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGVbaV0ucGRGb3JtdWxhUnVsZURlc2NyaWJlLAogICAgICAgICAgICAgICAgICAgICAgcGRBdWRpdENvbmN0aGlzOiB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzLAogICAgICAgICAgICAgICAgICAgICAgcGRJc0NhbmNlbERlZmluaXRpb246IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIHBkTm90UGFzc09waW5pb246IHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hlY2tGb3JtdWxhRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2hlY2tGb3JtdWxhRGF0YVtpXSwgJ3BkQXVkaXRDb25jdGhpcycsIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMpOwogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2hlY2tGb3JtdWxhRGF0YVtpXSwgJ3BkSXNDYW5jZWxEZWZpbml0aW9uJywgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uKTsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmNoZWNrRm9ybXVsYURhdGFbaV0sICdwZE5vdFBhc3NPcGluaW9uJywgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVGb3JtdWxhVGFibGUuY2xlYXJTZWxlY3Rpb24oKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEZvcm11bGFSdWxlQ29kZSA9IFtdOwogICAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID0gJyc7CiAgICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsKICAgICAgICAgICAgdGhpcy5mb3JtdWxhVGFibGVGb3JtLnBkTm90UGFzc09waW5pb24gPSAnJzsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybXVsYVRhYmxlRm9ybS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9LAogICAgICAvL+WumuS5ieWGheWuueS4uuaWsOWll+mkkAogICAgICBjaGVja0NvbWJvTW9yZUNvcHlEYXRhKHZhbCwgdGFibGVOYW1lKSB7CiAgICAgICAgbGV0IGNvbWJvTGlzdCA9IFtdOwogICAgICAgIGZvciAoY29uc3QgY29tYm9Ob2RlIG9mIHRhYmxlTmFtZSkgewogICAgICAgICAgY29tYm9MaXN0LnB1c2goY29tYm9Ob2RlLnBkRGVmaW5lQ29udGVudCkKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuXy5pbmNsdWRlcyhjb21ib0xpc3QsIHZhbCkpIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgnY29tYm9BdWRpdC5jb21ib05vZGVSZXBlYXQnKSk7CiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSwKICAgICAgLy/lrprkuYnlhoXlrrnkuLrmlrDlpZfppJAKICAgICAgY2hlY2tDb21ib0NvcHlEYXRhKHZhbCwgdGFibGVOYW1lKSB7CiAgICAgICAgbGV0IGNvbWJvTGlzdCA9IFtdOwogICAgICAgIGZvciAoY29uc3QgY29tYm9Ob2RlIG9mIHRhYmxlTmFtZSkgewogICAgICAgICAgY29tYm9MaXN0LnB1c2goY29tYm9Ob2RlLnBkRGVmaW5lQ29udGVudCkKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuXy5pbmNsdWRlcyhjb21ib0xpc3QsIHZhbCkpIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgnY29tYm9BdWRpdC5jb21ib05vZGVSZXBlYXQnKSk7CiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSwKICAgICAgLy/lrprkuYnlhoXlrrnkuLrmlrDlpZfppJDliKTmlq3pgInmi6nlhajpg6jml7boioLngrnmmK/lkKbph43lpI0KICAgICAgY2hlY2tNb3JlQ29weURhdGEodmFsLCB0YWJsZU5hbWUpIHsKICAgICAgICBsZXQgY29tYm9MaXN0ID0gW107CiAgICAgICAgZm9yIChjb25zdCBjb21ib05vZGUgb2YgdGFibGVOYW1lKSB7CiAgICAgICAgICBjb21ib0xpc3QucHVzaChjb21ib05vZGUucGRGb3JtdWxhUnVsZUNvZGUpCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMoY29tYm9MaXN0LCB2YWwpKSB7CiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29tYm9Ob2RlUmVwZWF0JykpOwogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0sCiAgICAgIC8v5Yik5pat6IqC54K55piv5ZCm6YeN5aSNCiAgICAgIGNoZWNrQ29weURhdGEodmFsLCB0YWJsZU5hbWUpIHsKICAgICAgICBsZXQgY29tYm9MaXN0ID0gW107CiAgICAgICAgZm9yIChjb25zdCBjb21ib05vZGUgb2YgdGFibGVOYW1lKSB7CiAgICAgICAgICBjb21ib0xpc3QucHVzaChjb21ib05vZGUucGRGb3JtdWxhUnVsZUNvZGUpCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXMoY29tYm9MaXN0LCB2YWwpKSB7CiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2NvbWJvQXVkaXQuY29tYm9Ob2RlUmVwZWF0JykpOwogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0sCiAgICAgIC8v6aG16Z2i6Lez6L2s5oyJ6ZKuCiAgICAgIGdldFBkRGVzaWduUGFnZSgpIHsKICAgICAgICBpZiAodGhpcy5wZEluZm8pIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn5Lqn5ZOB5aWX6aSQ5qGG5p625a6a5LmJ5Li76aG1JywgcXVlcnk6IHtzaG93UGFnZUZsYWc6ICcxJ30scGFyYW1zOnRoaXMucGRJbmZvfSkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldFBkU2FsZVBhZ2UoKSB7CiAgICAgICAgaWYgKHRoaXMucGRJbmZvKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeWll+mkkOmUgOWUruWumuS5ieS4u+mhtScsIHF1ZXJ5OiB7c2hvd1BhZ2VGbGFnOiAnMSd9LHBhcmFtczp0aGlzLnBkSW5mb30pCiAgICAgICAgfQogICAgICB9LAogICAgICBnZXRQZFVXUGFnZSgpIHsKICAgICAgICBpZiAodGhpcy5wZEluZm8pIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn5Lqn5ZOB5aWX6aSQ5om/5L+d5a6a5LmJ5Li76aG1JywgcXVlcnk6IHtzaG93UGFnZUZsYWc6ICcxJ30scGFyYW1zOnRoaXMucGRJbmZvfSkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldFBkUldQYWdlKCkgewogICAgICAgIGlmICh0aGlzLnBkSW5mbykgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICfkuqflk4HlpZfppJDmoLjkv53lrprkuYnkuLvpobUnLCBxdWVyeToge3Nob3dQYWdlRmxhZzogJzEnfSxwYXJhbXM6dGhpcy5wZEluZm99KQogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2V0UGRQVlBhZ2UoKSB7CiAgICAgICAgaWYgKHRoaXMucGRJbmZvKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeWll+mkkOaguOi1lOWumuS5ieS4u+mhtScsIHF1ZXJ5OiB7c2hvd1BhZ2VGbGFnOiAnMSd9LHBhcmFtczp0aGlzLnBkSW5mb30pCiAgICAgICAgfQogICAgICB9LAogICAgICBnZXRUZXN0UGFnZSgpIHsKICAgICAgICBpZiAodGhpcy5wZEluZm8pIHsKICAgICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICcnLCBxdWVyeToge3Nob3dQYWdlRmxhZzogJzEnfX0pCiAgICAgICAgfQogICAgICB9LAogICAgICAvL+i/lOWbnuWll+mkkOWuoeaguOafpeivoumhtemdogogICAgICBiYWNrUGFnZSgpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9jb21tb2RpdHktYXVkaXQvY29tYm8tYXVkaXQtaW5mby9wYWNrYWdlLWF1ZGl0LWFwcGx5J30pCiAgICAgIH0sCiAgICAgIGF1ZGl0Q2xpY2soKSB7CiAgICAgICAgaWYgKHRoaXMuc2hvd0F1ZGl0RGF0YUZsYWcgPT09ICdOJykgewogICAgICAgICAgdGhpcy5xdWlja2ljb25fYXVkaXQgPSAiZWwtaWNvbi1hcnJvdy1kb3duIjsKICAgICAgICAgIHRoaXMuc2hvd0F1ZGl0RGF0YUZsYWcgPSAnWScKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5xdWlja2ljb25fYXVkaXQgPSAiZWwtaWNvbi1hcnJvdy1yaWdodCI7CiAgICAgICAgICB0aGlzLnNob3dBdWRpdERhdGFGbGFnID0gJ04nCiAgICAgICAgfQogICAgICB9LAogICAgICAvL+iOt+WPluWkjemAieahhuihqOagvOaVsOaNrgogICAgICBjaGFuZ2VGdW4odmFsKSB7CiAgICAgICAgdGhpcy5jaGVja0JveERhdGEgPSB2YWw7CiAgICAgICAgaWYgKHZhbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmNvbWJvVXBkYXRlRmxhZyA9IHRydWUKICAgICAgICB9CiAgICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMCkgewogICAgICAgICAgdGhpcy5jb21ib1RhYmxlRm9ybS5wZERlZmluZUNvbnRlbnQgPSBbXTsKICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID0gJyc7CiAgICAgICAgICB0aGlzLmNvbWJvVGFibGVGb3JtLnBkSXNDYW5jZWxEZWZpbml0aW9uID0gJ04nOwogICAgICAgICAgdGhpcy5jb21ib1RhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJyc7CiAgICAgICAgICB0aGlzLmNvbWJvVXBkYXRlRmxhZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5kYXRhU2VsZWN0ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuY29tYm9UYWJsZUZvcm0uY2xlYXJWYWxpZGF0ZSgpOwogICAgICAgICAgfSkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0uY29udGVudExpc3QgPSBbXQogICAgICAgICAgZm9yKGxldCBpPTA7aTx2YWwubGVuZ3RoO2krKyl7CiAgICAgICAgICAgdGhpcy5jb21ib1RhYmxlRm9ybS5jb250ZW50TGlzdC5wdXNoKHZhbFtpXS5wZERlZmluZUNvbnRlbnQpOwogICAgICAgICAgfQogICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbWJvVGFibGVGb3JtLCB0aGlzLmNvbWJvVGFibGVGb3JtLmNvbnRlbnRMaXN0KTsKICAgICAgICAgIHRoaXMuY29tYm9UYWJsZUZvcm0ucGREZWZpbmVDb250ZW50ID0gdGhpcy5jb21ib1RhYmxlRm9ybS5jb250ZW50TGlzdDsKICAgICAgICAgIHRoaXMuY29tYm9VcGRhdGVGbGFnID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZGF0YVNlbGVjdCA9IHRydWUKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNoYW5nZVJ1bGVEYXRhKHZhbCkgewogICAgICAgIHRoaXMuY2hlY2tSdWxlRGF0YSA9IHZhbDsKICAgICAgICBpZiAodmFsLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMucnVsZVVwZGF0ZUZsYWcgPSB0cnVlCiAgICAgICAgfQogICAgICAgIGlmICh2YWwubGVuZ3RoID09IDEpIHsKICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ydWxlVGFibGVGb3JtLCB2YWxbMF0pOwogICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlID0gW3ZhbFswXS5wZEZvcm11bGFSdWxlQ29kZV07CiAgICAgICAgICB0aGlzLnJ1bGVVcGRhdGVGbGFnID0gdHJ1ZTsKICAgICAgICAgIHRoaXMucnVsZVNlbGVjdCA9IHRydWUKICAgICAgICB9CiAgICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMCkgewogICAgICAgICAgdGhpcy5ydWxlVGFibGVGb3JtLnBkRm9ybXVsYVJ1bGVDb2RlID0gW107CiAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRBdWRpdENvbmN0aGlzID0gJyc7CiAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGRJc0NhbmNlbERlZmluaXRpb24gPSAnTic7CiAgICAgICAgICB0aGlzLnJ1bGVUYWJsZUZvcm0ucGROb3RQYXNzT3BpbmlvbiA9ICcnOwogICAgICAgICAgdGhpcy5ydWxlVXBkYXRlRmxhZyA9IHRydWU7CiAgICAgICAgICB0aGlzLnJ1bGVTZWxlY3QgPSB0cnVlOwogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLiRyZWZzLnJ1bGVUYWJsZUZvcm0uY2xlYXJWYWxpZGF0ZSgpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSwKICAgICAgY2hhbmdlRm9ybXVsYURhdGEodmFsKSB7CiAgICAgICAgdGhpcy5jaGVja0Zvcm11bGFEYXRhID0gdmFsOwogICAgICAgIGlmICh2YWwubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5mb3JtdWxhVXBkYXRlRmxhZyA9IHRydWUKICAgICAgICB9CiAgICAgICAgaWYgKHZhbC5sZW5ndGggPT0gMSkgewogICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm11bGFUYWJsZUZvcm0sIHZhbFswXSk7CiAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUgPSBbdmFsWzBdLnBkRm9ybXVsYVJ1bGVDb2RlXTsKICAgICAgICAgIHRoaXMuZm9ybXVsYVVwZGF0ZUZsYWcgPSB0cnVlOwogICAgICAgICAgdGhpcy5mb3JtdWxhU2VsZWN0ID0gdHJ1ZQogICAgICAgIH0KICAgICAgICBpZiAodmFsLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLmZvcm11bGFUYWJsZUZvcm0ucGRGb3JtdWxhUnVsZUNvZGUgPSBbXTsKICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZEF1ZGl0Q29uY3RoaXMgPSAnJzsKICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZElzQ2FuY2VsRGVmaW5pdGlvbiA9ICdOJzsKICAgICAgICAgIHRoaXMuZm9ybXVsYVRhYmxlRm9ybS5wZE5vdFBhc3NPcGluaW9uID0gJyc7CiAgICAgICAgICB0aGlzLmZvcm11bGFVcGRhdGVGbGFnID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZvcm11bGFTZWxlY3QgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtdWxhVGFibGVGb3JtLmNsZWFyVmFsaWRhdGUoKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-audit/package-audit/comboAudit","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back @backTo=\"backPage\"  :label=\"$t('route.comboAudit')\"/>\r\n    <!--  -->\r\n    <el-form label-width=\"80px\">\r\n      <el-row>\r\n        <el-form-item :label=\"$t('comboAudit.comboMeat')\">\r\n          <el-tag type=\"info\">{{ this.pdInfo.ppCode + ' : ' + this.pdInfo.ppName }}</el-tag>\r\n        </el-form-item>\r\n      </el-row>\r\n    </el-form>\r\n    <div>\r\n      <cus-form-title :label=\"$t('i18nView.comboDetail')\"/>\r\n      <el-form :model=\"auditForm\" label-width=\"auto\" :rules=\"rules\"\r\n               style=\"margin-top: 33px\">\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px;padding-bottom: 14px\">\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdDesignPage\">{{$t('comboAudit.comboBase')}}<i class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdSalePage\">{{$t('comboAudit.comboSale')}}<i class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdUWPage\">{{$t('comboAudit.comboAcceptance')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdRWPage\">{{$t('comboAudit.comboUnderwriting')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getPdPVPage\">{{$t('comboAudit.comboClaim')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-link @click=\"getTestPage\">{{$t('comboAudit.comboTest')}}<i class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </el-col>\r\n        </el-row>\r\n        <div v-if=\"this.pdAuditType=='3'\">\r\n          <cus-form-title :label=\"$t('route.comboStop')\" />\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <el-col :span=\"6\">\r\n              <el-form-item>{{$t('comboAudit.pdVerDisDate')}}\r\n                <el-tag type=\"info\">{{auditForm.stopDate }}</el-tag>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <el-col :span=\"6\">\r\n              <el-form-item>{{$t('comboAudit.pdVerDisResn')}}\r\n                <el-tag type=\"info\">{{auditForm.stopReason }}</el-tag>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <div v-if=\"this.pdAuditType!='3'\">\r\n          <cus-form-title :label=\"$t('comboAudit.comboDetailsAudit')\" />\r\n          <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.pdAuditType=='1' ||this.pdReviseType =='1'\">\r\n            <cus-table-title  :label=\"$t('comboAudit.comboPostAudit')\"></cus-table-title>\r\n            <el-table :data=\"comboContentAudit\" ref=\"multipleTable\" size=\"mini\" @selection-change=\"changeFun\"\r\n                      fit element-loading-text=\"Loading\" border highlight-current-row align=\"center\"\r\n                      class=\"wraper-table\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\"></el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.defineContent')\" prop=\"pdDefineContent\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdDefineContent | filter_pdNodeCode}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdAuditConcthis | filter_pdAuditConcthis}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               prop=\"pdIsCancelDefinition\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.packageUnderwritingFlag')\"\r\n                               prop=\"pdIsCancelDefinition\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form :model=\"comboTableForm\" label-width=\"auto\" :rules=\"comboTableForm_rules\"\r\n                     ref=\"comboTableForm\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.defineContent')\" prop=\"pdDefineContent\">\r\n                    <el-select clearable filterable multiple v-model=\"comboTableForm.pdDefineContent\" value-key=\"id\"\r\n                               :disabled=\"dataSelect\">\r\n                      <el-option :key=\"item.id\" :label=\"item.label\" :value=\"item.value\" :disabled=\"item.disabled\"\r\n                                 v-for=\"item in comboNodeList\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"16\"></el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\" >\r\n                <el-col :span=\"12\">\r\n                  <el-form-item prop=\"pdAuditConcthis\" :label=\"$t('i18nView.auditRes')\">\r\n                    <el-radio-group v-model=\"comboTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                      <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                  <el-form-item prop=\"pdIsCancelDefinition\" :label=\"$t('comboAudit.pdIsCancelDefinition')\">\r\n                    <el-switch v-model=\"comboTableForm.pdIsCancelDefinition\" :disabled=\"comboTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\" >\r\n                <el-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"comboTableForm.pdNotPassOpinion\" :disabled=\"comboTableForm.pdAuditConcthis=='Y'\"\r\n                                type=\"text\" maxlength=\"130\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\" >\r\n                <el-col :span=\"24\" align=\"right\">\r\n                  <el-button  size=\"small\" type=\"primary\"\r\n                             :icon=\"this.comboUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                             @click=\"addComboAuditTableData\">{{this.comboUpdateFlag? $t('comboAudit.update') :\r\n                    $t('comboAudit.addData') }}\r\n                  </el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showRuleTableFlag\">\r\n            <cus-table-title  :label=\"$t('comboAudit.rulesPostAudit')\"></cus-table-title>\r\n            <el-table :data=\"comboRuleAudit\" @selection-change=\"changeRuleData\" ref=\"multipleRuleTable\" size=\"mini\" fit\r\n                      element-loading-text=\"Loading\" border highlight-current-row\r\n                      align=\"center\" class=\"wraper-table\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" type=\"index\" align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleCode')\" prop=\"pdFormulaRuleCode\" align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussType')\" prop=\"pdFormulaRuleType\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdRuleType}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" prop=\"pdFormulaRuleDetails\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdRuleDetails}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleDec')\" prop=\"pdFormulaRuleDescribe\" align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdAuditConcthis | filter_pdAuditConcthis}}</template>\r\n              </el-table-column>\r\n              <el-table-column  :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               prop=\"pdIsCancelDefinition\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\" align=\"center\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form label-width=\"auto\" :rules=\"ruleTableForm_rules\" :model=\"ruleTableForm\"\r\n                     ref=\"ruleTableForm\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdRules')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select clearable filterable multiple value-key=\"label\" v-model=\"ruleTableForm.pdFormulaRuleCode\"\r\n                               :disabled=\"ruleSelect\" >\r\n                      <el-option :key=\"item.key\" :label=\"item.label\" :value=\"item\"\r\n                                 v-for=\"item in ruleNodeList\" :disabled=\"item.disabled\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"16\"></el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"ruleTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                      <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('comboAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"ruleTableForm.pdIsCancelDefinition\" :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"ruleTableForm.pdNotPassOpinion\" :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\" :placeholder=\"$t('i18nView.pleInput')\" type=\"text\"\r\n                              maxlength=\"130\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\" align=\"right\">\r\n                  <el-button  size=\"small\" type=\"primary\"  :icon=\"this.ruleUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                             @click=\"addRuleAuditTableData\">{{this.ruleUpdateFlag? $t('comboAudit.update') :\r\n                    $t('comboAudit.addData') }}\r\n                  </el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showFormulaTableFlag\">\r\n            <cus-table-title  :label=\"$t('comboAudit.formulaPostAudit')\"></cus-table-title>\r\n            <el-table :data=\"comboFormulaAudit\" @selection-change=\"changeFormulaData\" ref=\"multipleFormulaTable\" size=\"mini\" fit\r\n                      element-loading-text=\"Loading\" border highlight-current-row\r\n                      align=\"center\" class=\"wraper-table\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaCode')\" prop=\"pdFormulaRuleCode\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussType')\" prop=\"pdFormulaRuleType\" align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdFormulaType}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" prop=\"pdFormulaRuleDetails\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaDec')\" prop=\"pdFormulaRuleDescribe\"\r\n                               align=\"center\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdAuditConcthis | filter_pdAuditConcthis}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               prop=\"pdIsCancelDefinition\"\r\n                               align=\"center\">\r\n                <template v-slot=\"scope\">{{scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition}}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\"\r\n                               align=\"center\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form  label-width=\"auto\" :rules=\"formulaTableForm_rules\" :model=\"formulaTableForm\"\r\n                     ref=\"formulaTableForm\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdFormulas')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select clearable filterable multiple value-key=\"label\"\r\n                               v-model=\"formulaTableForm.pdFormulaRuleCode\"\r\n                               :disabled=\"formulaSelect\" >\r\n                      <el-option :key=\"item.key\" :label=\"item.label\" :value=\"item\" :disabled=\"item.disabled\"\r\n                                 v-for=\"item in formulaNodeList\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"16\"></el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.auditRes')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"formulaTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                      <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('comboAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"formulaTableForm.pdIsCancelDefinition\"\r\n                               :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"formulaTableForm.pdNotPassOpinion\"\r\n                              :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\"\r\n                              :placeholder=\"$t('i18nView.pleInput')\" type=\"text\"\r\n                              maxlength=\"130\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\" align=\"right\">\r\n                  <el-button  size=\"small\" type=\"primary\"  :icon=\"this.formulaUpdateFlag? 'el-icon-success': 'el-icon-plus'\"\r\n                             @click=\"addFormulaAuditTableData\">{{this.formulaUpdateFlag? $t('comboAudit.update') :\r\n                    $t('comboAudit.addData') }}\r\n                  </el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n        <!---->\r\n        <cus-form-title :label=\"$t('comboAudit.comboAuditResult')\"/>\r\n        <el-form :model=\"comboAuditDetailInfo\"  label-width=\"auto\" :rules=\"auditRules\"\r\n                 ref=\"comboAuditDetailInfo\" style=\"margin-top: 33px\">\r\n          <el-row :gutter=\"10\">\r\n            <el-col :span=\"24\">\r\n              <el-form-item :label=\"$t('i18nView.pdAllAuditConc')\" prop=\"pdAuditConc\">\r\n                <el-radio-group v-model=\"comboAuditDetailInfo.pdAuditConc\">\r\n                  <el-radio label=\"Y\">{{$t('comboAudit.pass')}}</el-radio>\r\n                  <el-radio label=\"N\">{{$t('comboAudit.notPass')}}</el-radio>\r\n                  <el-radio label=\"X\" v-if=\"this.pdAuditType!='3'\">{{$t('comboAudit.cancelDefinition')}}\r\n                  </el-radio>\r\n                  <el-radio label=\"Z\" v-if=\"this.pdAuditType!='2' && this.pdAuditType!='3'\">{{$t('comboAudit.comboStop')}}\r\n                  </el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" v-if=\"comboAuditDetailInfo.pdAuditConc=='N'\">\r\n            <el-col :span=\"24\">\r\n              <el-form-item :label=\"$t('comboAudit.returnFunctionPoints')\">\r\n                <el-tag type=\"info\">{{this.returnFunctionPoints}}</el-tag>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <div>\r\n            <el-row :gutter=\"10\" v-if=\"this.comboAuditDetailInfo.pdAuditConc=='Y' && this.pdAuditType!='3'\">\r\n              <el-col :span=\"8\">\r\n                <el-form-item :label=\"$t('comboAudit.postContent')\" v-model=\"comboAuditDetailInfo.pdReleContent\">\r\n                    <span v-if=\"this.pdAuditType=='1' || this.pdReviseType=='1'\" label=\"$t('i18nView.pdPostContent')\"\r\n                          v-model=\"comboAuditDetailInfo.pdReleContent\">{{$t('i18nView.pdPostContent')}}</span>\r\n                  <span v-if=\"this.showFormulaTableFlag||this.showRuleTableFlag\" label=\"$t('comboAudit.ruleOrFormulaRelease')\"\r\n                        v-model=\"comboAuditDetailInfo.pdReleContent\">{{$t('comboAudit.ruleOrFormulaRelease')}}</span>\r\n                  <i :class=\"quickicon_audit\" style=\"cursor: pointer\" @click=\"auditClick\"></i>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-link @click=\"showComboFileReleasePage\">{{$t('comboAudit.comboFiles')}}<i class=\"el-icon-office-building\"></i>\r\n                </el-link>\r\n              </el-col>\r\n              <el-col :span=\"8\"></el-col>\r\n            </el-row>\r\n            <div v-if=\"showAuditDataFlag==='Y'\">\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"24\"\r\n                        v-if=\"(this.pdAuditType=='1' || this.pdReviseType=='1') && comboAuditDetailInfo.pdAuditConc=='Y'\">\r\n                  <el-form-item :label=\"$t('i18nView.pdPostContent')\">\r\n                    <el-tag type=\"info\">{{comboAuditDetailInfo.pdReleContdet}}</el-tag>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n            <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showRuleTableFlag && comboAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\">\r\n              <cus-table-title  :label=\"$t('comboAudit.rulesPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"comboRuleRelease\" size=\"mini\" :span=\"8\" fit element-loading-text=\"Loading\" border\r\n                        highlight-current-row align=\"center\" class=\"wraper-table\">\r\n                <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleCode')\" prop=\"pdFormulaRuleCode\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussType')\" prop=\"pdFormulaRuleType\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdRuleType}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" prop=\"pdFormulaRuleDetails\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdRuleDetails}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleDec')\" prop=\"pdFormulaRuleDescribe\"\r\n                                 align=\"center\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <div style=\"width: 80%;margin: 0px 30px 20px 40px\" v-if=\"this.showFormulaTableFlag && comboAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\">\r\n              <cus-table-title  :label=\"$t('comboAudit.formulaPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"comboFormulaRelease\" size=\"mini\" element-loading-text=\"Loading\" border align=\"center\">\r\n                <el-table-column :label=\"$t('table.id')\" type=\"index\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaCode')\" prop=\"pdFormulaRuleCode\"\r\n                                 align=\"center\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussType')\" prop=\"pdFormulaRuleType\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleType | filter_pdFormulaType}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" prop=\"pdFormulaRuleDetails\"\r\n                                 align=\"center\">\r\n                  <template v-slot=\"scope\">{{scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails}}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaDec')\"\r\n                                 prop=\"pdFormulaRuleDescribe\"\r\n                                 align=\"center\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <el-row :gutter=\"10\" v-if=\"this.pdAuditType!='3'&&comboAuditDetailInfo.pdAuditConc=='Y'\">\r\n              <el-col :span=\"24\">\r\n                <el-form-item :label=\"$t('comboAudit.pdReleType')\" prop=\"pdReleType\">\r\n                  <cus-radio :codetype=\"'releasetype'\"  v-model=\"comboAuditDetailInfo.pdReleType\"></cus-radio>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\" v-if=\"comboAuditDetailInfo.pdAuditConc!='X'\">\r\n              <el-col :span=\"24\">\r\n                <el-form-item prop=\"pdAuditIdea\" :label=\"$t('i18nView.auditContent')\">\r\n                  <el-input v-model=\"comboAuditDetailInfo.pdAuditIdea\"  maxlength=\"130\"\r\n                            type=\"text\" show-word-limit></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </el-form>\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"24\" align=\"right\">\r\n            <el-button  size=\"small\" type=\"primary\" icon=\"el-icon-finished\" @click=\"auditPass()\">{{$t('comboAudit.auditBut')}}</el-button>\r\n            <el-button  size=\"small\" icon=\"el-icon-refresh\" type=\"primary\" @click=\"refresh()\">{{$t('comboAudit.refresh')}}</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <el-dialog :show-close=false v-dialog-drag :close-on-click-modal=\"false\" v-if=\"showComboFileReleaseFlag\"\r\n               :visible.sync=\"showComboFileReleaseFlag\" append-to-body center width=\"80%\">\r\n      <comboFileRelase  :pdInfo=\"pdInfo\"  @changeDialogFileRelease=\"changeDialogFileRelease\" @bringPdFileAuditData=\"bringPdFileAuditData\"></comboFileRelase>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {\r\n    addAuditInfoData,\r\n    queryStop,\r\n    queryReviseData,\r\n    findNodeRulesList,\r\n    findNodeFormulaList\r\n  } from \"@/api/basicinfo/comboAuditInfo\";\r\n  import {closeVisitTag} from \"@/utils/tagsView\"\r\nimport  comboFileRelase from \"@/views/commodity-audit/package-audit/comboFileRelase\"\r\n  let _this;\r\n  export default {\r\n      components: {comboFileRelase},\r\n    name: 'comboAudit',\r\n    filters: {\r\n      filter_pdNodeCode(val) {\r\n        let returnText = '';\r\n        switch (val) {\r\n          case 'productRuleFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productFormulaFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productInfoFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productDistributionFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productCoverFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productUnderwritingFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productPreservationFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productHePeiFlag':\r\n            returnText = '';\r\n            break;\r\n          case 'productRenewalFlag':\r\n            returnText = '';\r\n            break;\r\n        }\r\n        return returnText;\r\n      },\r\n      filter_pdAuditConcthis(code){\r\n        return _this.getCodeName('pdAuditConc', code)\r\n      },\r\n      filter_pdIsCancelDefinition(code){\r\n        return _this.getCodeName('cancelDefinition', code)\r\n      },\r\n      filter_pdRuleType(code) {\r\n        return _this.getCodeName('ruleBusinessModule', code)\r\n      },\r\n      filter_pdFormulaType(code) {\r\n        return _this.getCodeName('ruleBusinessModule', code)\r\n      },\r\n      filter_pdRuleDetails(code) {\r\n        return _this.getCodeName('ruleBusinessDetailClass', code)\r\n      },\r\n      filter_pdFormulaDetails(code) {\r\n        return _this.getCodeName('ruleBusinessDetailClass', code)\r\n      }\r\n    },\r\n    data() {\r\n      _this = this;\r\n      return {\r\n          showComboFileReleaseFlag:false,\r\n          pdFileAuditData:[],\r\n        nodeOptions: [\r\n          {'key': 'productInfoFlag', 'label': ''},\r\n          {'key': 'productDistributionFlag', 'label': ''},\r\n          {'key': 'productCoverFlag', 'label': ''},\r\n          {'key': 'productUnderwritingFlag', 'label': ''},\r\n          {'key': 'productRenewalFlag', 'label': ''},\r\n          {'key': 'productPreservationFlag', 'label': ''},\r\n          {'key': 'productHePeiFlag', 'label': ''},\r\n          {'key': 'productRuleFlag', 'label': ''},\r\n          {'key': 'productFormulaFlag', 'label': ''}],\r\n        returnFunctionPoints: [],\r\n        pdInfo: {},\r\n        auditForm: {\r\n          stopDate: '',\r\n          stopReason: '',\r\n        },\r\n        //\r\n        comboTableForm: {\r\n            contentList:[],\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditNotesInfoId: '',\r\n          pdDefineContent: [],\r\n          pdAuditConcthis: '',\r\n          pdIsCancelDefinition: '',\r\n          pdNotPassOpinion: ''\r\n        },\r\n        ruleTableForm: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditNotesInfoId: '',\r\n          pdDefineContent: '',\r\n          pdReviseType: '',\r\n          pdFormulaRuleCode: [],\r\n          pdFormulaRuleType: '',\r\n          pdFormulaRuleDetails: '',\r\n          pdFormulaRuleDescribe: '',\r\n          pdAuditConcthis: '',\r\n          pdIsCancelDefinition: '',\r\n          pdNotPassOpinion: ''\r\n        },\r\n        formulaTableForm: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditNotesInfoId: '',\r\n          pdDefineContent: '',\r\n          pdReviseType: '',\r\n          pdFormulaRuleCode: [],\r\n          pdFormulaRuleType: '',\r\n          pdFormulaRuleDetails: '',\r\n          pdFormulaRuleDescribe: '',\r\n          pdAuditConcthis: '',\r\n          pdIsCancelDefinition: '',\r\n          pdNotPassOpinion: ''\r\n        },\r\n        comboAuditInfo: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditConc: '',\r\n          pdAuditStaff: '',\r\n          pdAuditDate: '',\r\n          pdIsPostReturn: '',\r\n          pdIsReviewReturn: '',\r\n          pdAuditTimes: '',\r\n          pdReturnTimes: '',\r\n          pdReleType: '',\r\n          pdReleContent: '',\r\n          pdReleContdet: []\r\n        },\r\n        comboAuditDetailInfo: {\r\n          pdType: '2',\r\n          pdInfoId: '',\r\n          pdCode: '',\r\n          pdAuditOrderNum: '',\r\n          pdAuditInfoId: '',\r\n          pdAuditConc: '',\r\n          pdAuditStaff: '',\r\n          pdAuditDate: '',\r\n          pdAuditIdea: '',\r\n          pdReturnFuncNode: [],\r\n          pdReleType: '',\r\n          pdReleContent: '',\r\n          pdReleContdet: []\r\n        },\r\n        //\r\n        pdAuditType: '',\r\n        pdReviseType: '',\r\n        pdReviseDate:'',\r\n        pdReturnFuncCode: '',\r\n        comboNodeList: [],\r\n        ruleNodeList: [],\r\n        formulaNodeList: [],\r\n        showAuditDataFlag: 'N',\r\n        dialogTableVisible: false,\r\n        dialogTableVisible1: false,\r\n        showRuleTableFlag: false,\r\n        showFormulaTableFlag: false,\r\n        comboUpdateFlag: false,\r\n        ruleUpdateFlag: false,\r\n        formulaUpdateFlag: false,\r\n        dataSelect: false,\r\n        ruleSelect: false,\r\n        formulaSelect: false,\r\n        quickicon_audit: \"el-icon-arrow-right\",\r\n        //\r\n        comboContentAudit: [],\r\n        comboRuleAudit: [],\r\n        comboFormulaAudit: [],\r\n        comboRuleRelease: [],\r\n        comboFormulaRelease: [],\r\n        checkBoxData: [],\r\n        checkRuleData: [],\r\n        checkFormulaData: [],\r\n        //\r\n        params: {},\r\n        //\r\n        rules: {},\r\n        comboTableForm_rules: {\r\n          pdDefineContent: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdDefineContent'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditConcthis: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConcthis'),\r\n            trigger: 'change'\r\n          }],\r\n          pdNotPassOpinion: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        ruleTableForm_rules: {\r\n          pdFormulaRuleCode: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdDefineContent'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditConcthis: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConcthis'),\r\n            trigger: 'change'\r\n          }],\r\n          pdNotPassOpinion: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        formulaTableForm_rules: {\r\n          pdFormulaRuleCode: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdDefineContent'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditConcthis: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConcthis'),\r\n            trigger: 'change'\r\n          }],\r\n          pdNotPassOpinion: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        auditRules: {\r\n          pdAuditConc: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdAuditConc'),\r\n            trigger: 'change'\r\n          }],\r\n          pdReleType: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseSelect') + this.$t('comboAudit.pdReleType'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAuditIdea: [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pleaseInput') + this.$t('comboAudit.pdAuditIdea'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      //\r\n      'comboTableForm.pdDefineContent'(selectedCodes) {\r\n        if (selectedCodes.length === 0) {\r\n          for (const comboNode of this.comboNodeList) {\r\n            comboNode.disabled = false\r\n          }\r\n        } else {\r\n          if (this._.includes(selectedCodes, '000000')) {\r\n            for (const comboNode of this.comboNodeList) {\r\n              comboNode.disabled = comboNode.value !== '000000'\r\n            }\r\n          } else {\r\n            for (const comboNode of this.comboNodeList) {\r\n              comboNode.disabled = comboNode.value === '000000'\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //\r\n      'comboTableForm.pdAuditConcthis'() {\r\n        const val = this.comboTableForm.pdAuditConcthis;\r\n        if (val == 'Y') {\r\n          this.comboTableForm.pdIsCancelDefinition = 'N';\r\n          this.comboTableForm.pdNotPassOpinion = '';\r\n          this.comboTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n        } else {\r\n          this.comboTableForm_rules.pdNotPassOpinion = [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      },\r\n      //\r\n      'ruleTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n        this.comboAuditDetailInfo.pdReleContent='2';\r\n        if (selectedCodes.length === 0) {\r\n          for (const ruleNode of this.ruleNodeList) {\r\n            ruleNode.disabled = false\r\n          }\r\n        } else {\r\n          let codeList = [];\r\n          for (const code of selectedCodes) {\r\n            codeList.push(code.value)\r\n          }\r\n          if (this._.includes(codeList, '000')) {\r\n            for (const ruleNode of this.ruleNodeList) {\r\n              ruleNode.disabled = ruleNode.value !== '000'\r\n            }\r\n          } else {\r\n            for (const ruleNode of this.ruleNodeList) {\r\n              ruleNode.disabled = ruleNode.value === '000'\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //\r\n      'ruleTableForm.pdAuditConcthis'() {\r\n        const val = this.ruleTableForm.pdAuditConcthis;\r\n        if (val == 'Y') {\r\n          this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n          this.ruleTableForm.pdNotPassOpinion = '';\r\n          this.ruleTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n        } else {\r\n          this.ruleTableForm_rules.pdNotPassOpinion = [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      },\r\n      //\r\n      'formulaTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n        if (selectedCodes.length === 0) {\r\n          for (const formulaNode of this.formulaNodeList) {\r\n            formulaNode.disabled = false\r\n          }\r\n        } else {\r\n          let codeList = [];\r\n          for (const code of selectedCodes) {\r\n            codeList.push(code.value)\r\n          }\r\n          if (this._.includes(codeList, '000')) {\r\n            for (const formulaNode of this.formulaNodeList) {\r\n              formulaNode.disabled = formulaNode.value !== '000'\r\n            }\r\n          } else {\r\n            for (const formulaNode of this.formulaNodeList) {\r\n              formulaNode.disabled = formulaNode.value === '000'\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //\r\n      'formulaTableForm.pdAuditConcthis'() {\r\n        const val = this.formulaTableForm.pdAuditConcthis;\r\n        //\r\n        if (val == 'Y') {\r\n          this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n          this.formulaTableForm.pdNotPassOpinion = '';\r\n          this.formulaTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n        } else {\r\n          this.formulaTableForm_rules.pdNotPassOpinion = [{\r\n            required: true,\r\n            message: this.$t('comboAudit.pdNotPassOpinion'),\r\n            trigger: 'blur'\r\n          }]\r\n        }\r\n      },\r\n      //\r\n      'comboAuditDetailInfo.pdAuditConc'() {\r\n        const val = this.comboAuditDetailInfo.pdAuditConc;\r\n        if (val == 'Y') {\r\n          if (this.pdAuditType == '3') {\r\n            return\r\n          }\r\n          if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n            this.comboAuditDetailInfo.pdReleContent='1';\r\n            if (this.comboContentAudit.length != this.comboNodeList.length - 1) {\r\n              this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList = [];\r\n                for (const comboNode of this.comboContentAudit) {\r\n                  nodeList.push(comboNode.pdDefineContent)\r\n                }\r\n                for (let i = 1; i < this.comboNodeList.length; i++) {\r\n                  let nodeName = this.comboNodeList[i].value;\r\n                  if (!this._.includes(nodeList, nodeName)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: nodeName,\r\n                      pdAuditConcthis: 'Y',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                this.auditData()\r\n              }).catch(() => {\r\n                this.auditData()\r\n              })\r\n            } else {\r\n              this.auditData();\r\n              if (this.comboAuditDetailInfo.pdReleContdet.length < this.comboContentAudit.length) {\r\n                this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n\r\n                }).catch(() => {\r\n\r\n                })\r\n              }\r\n            }\r\n          }\r\n          //\r\n          if (this.pdReviseType === '0') {\r\n            if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n              if (this.comboRuleAudit.length != this.ruleNodeList.length - 1 || this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList1 = [];\r\n                  let nodeList2 = [];\r\n                  for (const ruleNode of this.comboRuleAudit) {\r\n                    nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (const formulaNode of this.comboFormulaAudit) {\r\n                    nodeList2.push(formulaNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList1, nodeName)) {\r\n                      this.comboRuleAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList2, nodeName)) {\r\n                      this.comboFormulaAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.auditRuleData();\r\n                  this.auditFormulaData()\r\n                }).catch(() => {\r\n                  this.auditRuleData();\r\n                  this.auditFormulaData()\r\n                })\r\n              } else {\r\n                this.auditRuleData();\r\n                if (this.comboRuleRelease.length < this.comboRuleAudit.length || this.comboFormulaRelease.length < this.comboFormulaAudit.length) {\r\n                  this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n\r\n                  }).catch(() => {\r\n\r\n                  })\r\n                }\r\n              }\r\n            } else {\r\n              if (this.showRuleTableFlag) {\r\n                if (this.comboRuleAudit.length != this.ruleNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const pdNode of this.comboRuleAudit) {\r\n                      nodeList.push(pdNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                      let nodeName = this.ruleNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboRuleAudit.push({\r\n                          pdReviseType: '1',\r\n                          pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                          pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'Y',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: ''\r\n                        })\r\n                      }\r\n                    }\r\n                    this.auditRuleData()\r\n                  }).catch(() => {\r\n                    this.auditRuleData()\r\n                  })\r\n                } else {\r\n                  this.auditRuleData();\r\n                  if (this.comboRuleRelease.length < this.comboRuleAudit.length) {\r\n                    this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                      confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                      cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                      type: 'warning'\r\n                    }).then(() => {\r\n\r\n                    }).catch(() => {\r\n\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.showFormulaTableFlag) {\r\n                if (this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const pdNode of this.comboFormulaAudit) {\r\n                      nodeList.push(pdNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                      let nodeName = this.formulaNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboFormulaAudit.push({\r\n                          pdReviseType: '2',\r\n                          pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                          pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'Y',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: ''\r\n                        })\r\n                      }\r\n                    }\r\n                    this.auditFormulaData()\r\n                  }).catch(() => {\r\n                    this.auditFormulaData()\r\n                  })\r\n                } else {\r\n                  this.auditFormulaData();\r\n                  if (this.comboFormulaRelease.length < this.comboFormulaAudit.length) {\r\n                    this.$confirm(this.$t('comboAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                      confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                      cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                      type: 'warning'\r\n                    }).then(() => {\r\n\r\n                    }).catch(() => {\r\n\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        //\r\n        if (val == 'N') {\r\n          if (this.pdAuditType == '3') {\r\n            this.returnFunctionPoints = [\"\"];\r\n            return\r\n          }\r\n          if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n            if (this.comboContentAudit.length != this.comboNodeList.length - 1) {\r\n              this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList = [];\r\n                for (const comboNode of this.comboContentAudit) {\r\n                  nodeList.push(comboNode.pdDefineContent)\r\n                }\r\n                for (let i = 1; i < this.comboNodeList.length; i++) {\r\n                  let nodeName = this.comboNodeList[i].value;\r\n                  if (!this._.includes(nodeList, nodeName)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: nodeName,\r\n                      pdAuditConcthis: 'N',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                this.reBack()\r\n              }).catch(() => {\r\n                this.reBack()\r\n              })\r\n            } else {\r\n              this.reBack()\r\n            }\r\n          }\r\n          //\r\n          if (this.pdReviseType === '0') {\r\n            if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n              if (this.comboRuleAudit.length != this.ruleNodeList.length - 1 || this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList1 = [];\r\n                  let nodeList2 = [];\r\n                  for (const ruleNode of this.comboRuleAudit) {\r\n                    nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (const formulaNode of this.comboFormulaAudit) {\r\n                    nodeList2.push(formulaNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList1, nodeName)) {\r\n                      this.comboRuleAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList2, nodeName)) {\r\n                      this.comboFormulaAudit.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.ruleBack();\r\n                  this.formulaBack()\r\n                }).catch(() => {\r\n                  this.ruleBack();\r\n                  this.formulaBack()\r\n                })\r\n              } else {\r\n                this.ruleBack();\r\n                this.formulaBack()\r\n              }\r\n            } else {\r\n              if (this.showRuleTableFlag) {\r\n                if (this.comboRuleAudit.length != this.ruleNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const ruleNode of this.comboRuleAudit) {\r\n                      nodeList.push(ruleNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                      let nodeName = this.ruleNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboRuleAudit.push({\r\n                          pdReviseType: '1',\r\n                          pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                          pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'N',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: ''\r\n                        })\r\n                      }\r\n                    }\r\n                    this.ruleBack()\r\n                  }).catch(() => {\r\n                    this.ruleBack()\r\n                  })\r\n                } else {\r\n                  this.ruleBack()\r\n                }\r\n              }\r\n              if (this.showFormulaTableFlag) {\r\n                if (this.comboFormulaAudit.length != this.formulaNodeList.length - 1) {\r\n                  this.$confirm(this.$t('comboAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n                    let nodeList = [];\r\n                    for (const formulaNode of this.comboFormulaAudit) {\r\n                      nodeList.push(formulaNode.pdFormulaRuleCode)\r\n                    }\r\n                    for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                      let nodeName = this.formulaNodeList[i].value;\r\n                      if (!this._.includes(nodeList, nodeName)) {\r\n                        this.comboFormulaAudit.push({\r\n                          pdReviseType: '2',\r\n                          pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                          pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                          pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                          pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                          pdAuditConcthis: 'N',\r\n                          pdIsCancelDefinition: 'N',\r\n                          pdNotPassOpinion: ''\r\n                        })\r\n                      }\r\n                    }\r\n                    this.formulaBack()\r\n                  }).catch(() => {\r\n                    this.formulaBack()\r\n                  })\r\n                } else {\r\n                  this.formulaBack()\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    computed: {},\r\n    created() {\r\n      this.pdInfo = this.getPdData();\r\n      this.pdAuditType = this.pdInfo.defType;\r\n      this.comboAuditInfo.pdCode = this.pdInfo.ppCode;\r\n      this.comboAuditInfo.pdInfoId = this.pdInfo.id;\r\n      this.comboAuditDetailInfo.pdCode = this.pdInfo.ppCode;\r\n      this.comboAuditDetailInfo.pdInfoId = this.pdInfo.id;\r\n      if (this.pdAuditType == '1') {\r\n        this.queryPdInfoData()\r\n      }\r\n      if (this.pdAuditType == '2') {\r\n        this.queryReviseData()\r\n      }\r\n      if (this.pdAuditType == '3') {\r\n        this.queryStop()\r\n      }\r\n      this.cacheStrData('pdFileAuditTableback', null);\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        changeDialogFileRelease(flag) {\r\n            this.showComboFileReleaseFlag = flag\r\n        },\r\n        bringPdFileAuditData(val){\r\n            this.pdFileAuditData = val\r\n        },\r\n        showComboFileReleasePage(){\r\n            this.showComboFileReleaseFlag =true;\r\n        },\r\n      queryPdInfoData() {\r\n        this.comboNodeList = [\r\n          {'key': '000000', 'value': '000000', 'label': '', 'disabled': false},\r\n          {'key': 'productInfoFlag', 'value': 'productInfoFlag', 'label': '', 'disabled': false},\r\n          {'key': 'productDistributionFlag', 'value': 'productDistributionFlag', 'label': '', 'disabled': false},\r\n          {'key': 'productCoverFlag', 'value': 'productCoverFlag', 'label': '', 'disabled': false},\r\n          {'key': 'productUnderwritingFlag', 'value': 'productUnderwritingFlag', 'label': '', 'disabled': false},\r\n          {'key': 'productHePeiFlag', 'value': 'productHePeiFlag', 'label': '', 'disabled': false}\r\n        ];\r\n        this.comboAuditDetailInfo.pdReleType='1';\r\n        this.$nextTick(() => {\r\n          this.$refs.comboTableForm.clearValidate()\r\n        })\r\n      },\r\n      //\r\n      queryReviseData() {\r\n        this.comboAuditDetailInfo.pdReleType='2';\r\n        queryReviseData(this.buildRequestData({\r\n          \"pdInfoId\": this.pdInfo.id,\r\n          \"pdVerId\": this.pdInfo.pdVerId\r\n        })).then(res => {\r\n          this.pdReviseType = res.data.pdReviseType;\r\n          this.pdReturnFuncCode = res.data.pdReturnFuncCode;\r\n          this.pdReviseDate=res.data.pdReviseDate;\r\n          const codes = this.pdReturnFuncCode.split(\",\");\r\n          if (this.pdReviseType === '1') {\r\n            this.comboNodeList = [];\r\n            this.comboNodeList.push({\r\n              key: '000000',\r\n              value: '000000',\r\n              label: '',\r\n              disabled: false\r\n            });\r\n            for (const item of codes) {\r\n              switch (item) {\r\n                case 'productInfoFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productInfoFlag',\r\n                    value: 'productInfoFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n                case 'productDistributionFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productDistributionFlag',\r\n                    value: 'productDistributionFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n                case 'productCoverFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productCoverFlag',\r\n                    value: 'productCoverFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n                case 'productUnderwritingFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productUnderwritingFlag',\r\n                    value: 'productUnderwritingFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n               /* case 'productPreservationFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productPreservationFlag',\r\n                    value: 'productPreservationFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;*/\r\n                case 'productHePeiFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productHePeiFlag',\r\n                    value: 'productHePeiFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;\r\n               /* case 'productRenewalFlag':\r\n                  this.comboNodeList.push({\r\n                    key: 'productRenewalFlag',\r\n                    value: 'productRenewalFlag',\r\n                    label: '',\r\n                    disabled: false\r\n                  });\r\n                  break;*/\r\n              }\r\n            }\r\n          }\r\n          if (this.pdReviseType === '0') {\r\n            for (const item of codes) {\r\n              switch (item) {\r\n                case 'productRuleFlag':\r\n                  this.showRuleTableFlag = true;\r\n                  this.findNodeRulesList(this.pdReviseDate);\r\n                  break;\r\n                case 'productFormulaFlag':\r\n                  this.showFormulaTableFlag = true;\r\n                  this.findNodeFormulaList(this.pdReviseDate);\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        })\r\n      },\r\n      queryStop() {\r\n        //, \r\n        queryStop(this.buildRequestData({\"id\": this.pdInfo.id, \"pdVerId\": this.pdInfo.pdVerId})).then(res => {\r\n          this.auditForm.stopDate = res.data.pdVerDisDate;\r\n          this.auditForm.stopReason = res.data.pdVerDisResn\r\n        })\r\n      },\r\n      findNodeFormulaList(val) {\r\n        findNodeFormulaList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id,\"pdReviseDate\": val})).then(res => {\r\n          let formulaListNode = res.data;\r\n          if (formulaListNode.length > 0) {\r\n            this.formulaNodeList = [{'key': '000', 'value': '000', 'label': '', 'disabled': false}];\r\n          }\r\n          for (const item of formulaListNode) {\r\n            this.formulaNodeList.push({\r\n              key: item.pdCalcCode,\r\n              value: item.pdCalcCode,\r\n              label: item.pdCalcCode,\r\n              pdFormulaRuleType: item.pdBussType,\r\n              pdFormulaRuleDetails: item.pdBussDetailType,\r\n              pdFormulaRuleDescribe: item.pdCalcDesc,\r\n              disabled: false\r\n            });\r\n          }\r\n          this.$nextTick(() => {\r\n            if(this.$refs.formulaTableForm){\r\n              this.$refs.formulaTableForm.clearValidate()\r\n            }\r\n          })\r\n        })\r\n      },\r\n      findNodeRulesList(val) {\r\n        findNodeRulesList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id,\"pdReviseDate\": val,\"ppCode\": this.pdInfo.ppCode})).then(res => {\r\n          let ruleListNode = res.data;\r\n          if (ruleListNode.length > 0) {\r\n            this.ruleNodeList = [{'key': '000', 'value': '000', 'label': '', 'disabled': false}];\r\n          }\r\n          for (const item of ruleListNode) {\r\n            this.ruleNodeList.push({\r\n              key: item.pdRuleCode,\r\n              value: item.pdRuleCode,\r\n              label: item.pdRuleCode,\r\n              pdFormulaRuleType: item.pdRuleCls,\r\n              pdFormulaRuleDetails: item.pdRuleDtCls,\r\n              pdFormulaRuleDescribe: item.pdRuleDesc,\r\n              disabled: false\r\n            });\r\n          }\r\n          this.$nextTick(() => {\r\n            if(this.$refs.ruleTableForm){\r\n              this.$refs.ruleTableForm.clearValidate()\r\n            }\r\n          })\r\n        })\r\n\r\n      },\r\n      getFuncCode(val) {\r\n        let returnText = '';\r\n        switch (val) {\r\n          case 'productRuleFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productFormulaFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productInfoFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productDistributionFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productCoverFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productUnderwritingFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productPreservationFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productHePeiFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n          case 'productRenewalFlag':\r\n            returnText = returnText + '';\r\n            break;\r\n        }\r\n        return returnText;\r\n      },\r\n      //\r\n      auditPass() {\r\n        this.$refs.comboAuditDetailInfo.validate((valid) => {\r\n          if (valid) {\r\n            this.comboAuditInfo.pdAuditConc = this.comboAuditDetailInfo.pdAuditConc;\r\n            this.comboAuditInfo.pdType = '2';\r\n            let pdoperAuditDetailNotesInfo =[];\r\n            //\r\n            if(this.pdReviseType=='1' ||this.pdAuditType=='1'){\r\n              for (const item of this.comboContentAudit){\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }\r\n            if(this.showRuleTableFlag && this.showFormulaTableFlag){\r\n              for (const item of this.comboRuleAudit){\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n              for (const item of this.comboFormulaAudit){\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }else {\r\n              if (this.showRuleTableFlag) {\r\n                for (const item of this.comboRuleAudit) {\r\n                  pdoperAuditDetailNotesInfo.push(item)\r\n                }\r\n              }\r\n              if (this.showFormulaTableFlag) {\r\n                for (const item of this.comboFormulaAudit) {\r\n                  pdoperAuditDetailNotesInfo.push(item)\r\n                }\r\n              }\r\n            }\r\n            if(this.comboAuditInfo.pdAuditConc=='Y' && this.comboAuditInfo.pdAuditConc=='N' && pdoperAuditDetailNotesInfo.length==0){\r\n              this.notifyError(\"\")\r\n              return\r\n            }\r\n            let map = {\r\n              \"comboAuditInfo\": this.comboAuditInfo,\r\n              \"comboAuditDetailInfo\": this.comboAuditDetailInfo,\r\n              \"pdoperAuditDetailNotesInfo\": pdoperAuditDetailNotesInfo,\r\n              \"pdtempPpInfo\": this.pdInfo\r\n            };\r\n            //\r\n            if (this.comboAuditDetailInfo.pdAuditConc == 'X') {\r\n              let data = {\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n              this.doAuditInfoData(map)\r\n            }  //\r\n            else if (this.comboAuditDetailInfo.pdAuditConc == 'Z') {\r\n              let data = {\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n              this.doAuditInfoData(map)\r\n            }\r\n            //\r\n            else if (this.comboAuditDetailInfo.pdAuditConc == 'N') {\r\n              //\r\n              if (this.pdAuditType == '3') {\r\n                let data = {\r\n                  'productAuditFlag': '0',\r\n                  'variables': [\"productDiscontinued\"],\r\n                  'processInstanceId': this.pdInfo.pdProcessId\r\n                };\r\n                map['workflowData'] = data;\r\n              } else {\r\n                // \r\n                this.comboAuditInfo.pdIsReviewReturn = 'Y';\r\n                this.comboAuditDetailInfo.pdReturnFuncNode = this.returnPoints(this.returnFunctionPoints);\r\n                let data = {\r\n                  'productAuditFlag': '0',\r\n                  'variables': this.returnPoints(this.returnFunctionPoints),\r\n                  'processInstanceId': this.pdInfo.pdProcessId\r\n                };\r\n                map['workflowData'] = data;\r\n              }\r\n              this.doAuditInfoData(map)\r\n            } else {  //\r\n              let passNodePoints =this.returnPoints(this.comboAuditDetailInfo.pdReleContdet);\r\n              this.comboAuditInfo.pdReleContdet = passNodePoints;\r\n              this.comboAuditDetailInfo.pdReleContdet = passNodePoints;\r\n              this.comboAuditInfo.pdReleContent = this.comboAuditDetailInfo.pdReleContent;\r\n              this.comboAuditInfo.pdIsReviewReturn = 'N';\r\n              if (this.pdAuditType == '3') {\r\n                //  \r\n                this.comboAuditInfo.pdReleType = \"2\";\r\n                this.comboAuditDetailInfo.pdReleType = \"2\"\r\n                this.comboAuditInfo.pdReleContent = '3'\r\n                this.comboAuditDetailInfo.pdReleContent = '3'\r\n              } else {\r\n                this.comboAuditInfo.pdReleType = this.comboAuditDetailInfo.pdReleType;\r\n              }\r\n              let data = {\r\n                'productAuditFlag': '1',\r\n                'variables': null,\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              }\r\n              map['workflowData'] = data;\r\n              this.doAuditInfoData(map)\r\n            }\r\n          }\r\n        })\r\n      },\r\n      doAuditInfoData(map){\r\n        addAuditInfoData(this.buildRequestData(map)).then(res => {\r\n            this.notifySuccess(res.message);\r\n            this.$store.dispatch('product/storagePackages')\r\n            closeVisitTag();\r\n            this.$router.push({path: \"/dashboard\"});\r\n        })\r\n      },\r\n      //\r\n      refresh() {\r\n        this.comboAuditDetailInfo.pdAuditConc = '';\r\n        this.comboAuditDetailInfo.pdReleType = '';\r\n        this.comboAuditDetailInfo.pdAuditIdea = '';\r\n        this.$nextTick(() => {\r\n          this.$refs.comboAuditDetailInfo.clearValidate();\r\n          if (this.$refs.comboTableForm) {\r\n            this.$refs.comboTableForm.clearValidate();\r\n          }\r\n          if (this.$refs.ruleTableForm) {\r\n            this.$refs.ruleTableForm.clearValidate();\r\n          }\r\n          if (this.$refs.formulaTableForm) {\r\n            this.$refs.formulaTableForm.clearValidate()\r\n          }\r\n        })\r\n      },\r\n      //\r\n      returnPoints(val) {\r\n        let returnPoints = [];\r\n        for (let i = 0; i < val.length; i++) {\r\n          for (let j = 0; j < this.nodeOptions.length; j++) {\r\n            if (val[i] == this.nodeOptions[j].label) {\r\n              returnPoints.push(this.nodeOptions[j].key)\r\n            }\r\n          }\r\n        }\r\n        return returnPoints\r\n      },\r\n      //\r\n      reBack() {\r\n        this.returnFunctionPoints = [];\r\n        for (let i = 0; i < this.comboContentAudit.length; i++) {\r\n          if (this.comboContentAudit[i].pdIsCancelDefinition == 'N' && this.comboContentAudit[i].pdAuditConcthis == 'N') {\r\n            this.returnFunctionPoints.push(this.getFuncCode(this.comboContentAudit[i].pdDefineContent))\r\n          }\r\n        }\r\n        if (this.returnFunctionPoints.length == '0') {\r\n          this.notifyError(\"\");\r\n          this.refresh()\r\n        }\r\n      },\r\n      //\r\n      ruleBack() {\r\n        this.returnFunctionPoints=[];\r\n        for (let i = 0; i < this.comboRuleAudit.length; i++) {\r\n          if (this.comboRuleAudit[i].pdIsCancelDefinition == 'N' && this.comboRuleAudit[i].pdAuditConcthis == 'N') {\r\n            this.returnFunctionPoints.push(\"\");\r\n            break\r\n          }\r\n        }\r\n        if(this.comboRuleAudit.length === 0){\r\n          this.returnFunctionPoints.push(\"\");\r\n        }\r\n        if (this.returnFunctionPoints.length == '0') {\r\n          this.notifyError(\"\");\r\n          this.refresh()\r\n        }\r\n      },\r\n      //\r\n      formulaBack() {\r\n        for (let i = 0; i < this.comboFormulaAudit.length; i++) {\r\n          if (this.comboFormulaAudit[i].pdIsCancelDefinition == 'N' && this.comboFormulaAudit[i].pdAuditConcthis == 'N') {\r\n            this.returnFunctionPoints.push(\"\");\r\n            break\r\n          }\r\n        }\r\n        if(this.comboFormulaAudit.length === 0){\r\n          this.returnFunctionPoints.push(\"\");\r\n        }\r\n        if (this.returnFunctionPoints.length == '0') {\r\n          this.notifyError(\"\");\r\n          this.refresh()\r\n        }\r\n      },\r\n      //\r\n      auditData() {\r\n        this.comboAuditDetailInfo.pdReleContdet = [];\r\n        for (let i = 0; i < this.comboContentAudit.length; i++) {\r\n          if (this.comboContentAudit[i].pdIsCancelDefinition == 'N' && this.comboContentAudit[i].pdAuditConcthis == 'Y') {\r\n            this.comboAuditDetailInfo.pdReleContdet.push(this.getFuncCode(this.comboContentAudit[i].pdDefineContent))\r\n          }\r\n        }\r\n      },\r\n      //\r\n      auditRuleData() {\r\n        this.comboRuleRelease = [];\r\n        for (let i = 0; i < this.comboRuleAudit.length; i++) {\r\n          if (this.comboRuleAudit[i].pdIsCancelDefinition == 'N' && this.comboRuleAudit[i].pdAuditConcthis == 'Y') {\r\n            this.comboRuleRelease.push(this.comboRuleAudit[i])\r\n          }\r\n        }\r\n      },\r\n      //\r\n      auditFormulaData() {\r\n        this.comboFormulaRelease = [];\r\n        for (let i = 0; i < this.comboFormulaAudit.length; i++) {\r\n          if (this.comboFormulaAudit[i].pdIsCancelDefinition == 'N' && this.comboFormulaAudit[i].pdAuditConcthis == 'Y') {\r\n            this.comboFormulaRelease.push(this.comboFormulaAudit[i])\r\n          }\r\n        }\r\n      },\r\n      //\r\n      addComboAuditTableData() {\r\n        this.$refs.comboTableForm.validate((valid) => {\r\n          if (valid) {\r\n            if (this.comboTableForm.pdAuditConcthis == 'Y') {\r\n              this.comboTableForm.pdIsCancelDefinition = 'N';\r\n              this.comboTableForm.pdNotPassOpinion = ''\r\n            }\r\n            if (this.checkBoxData.length == 0) {\r\n              if (this.comboTableForm.pdDefineContent.length == 1) {\r\n                if (this.comboTableForm.pdDefineContent[0] == '000000') {\r\n                  for (let i = 1; i < this.comboNodeList.length; i++) {\r\n                    if (this.checkComboMoreCopyData(this.comboNodeList[i].value, this.comboContentAudit)) {\r\n                      this.comboContentAudit.push({\r\n                        pdDefineContent: this.comboNodeList[i].value,\r\n                        pdAuditConcthis: this.comboTableForm.pdAuditConcthis,\r\n                        pdIsCancelDefinition: this.comboTableForm.pdIsCancelDefinition,\r\n                        pdNotPassOpinion: this.comboTableForm.pdNotPassOpinion\r\n                      })\r\n                    }else{\r\n                        break\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  if (this.checkComboCopyData(this.comboTableForm.pdDefineContent[0], this.comboContentAudit)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: this.comboTableForm.pdDefineContent[0],\r\n                      pdAuditConcthis: this.comboTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.comboTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.comboTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.comboTableForm.pdDefineContent.length > 1) {\r\n                for (let i = 0; i < this.comboTableForm.pdDefineContent.length; i++) {\r\n                  if (this.checkComboCopyData(this.comboTableForm.pdDefineContent[i], this.comboContentAudit)) {\r\n                    this.comboContentAudit.push({\r\n                      pdDefineContent: this.comboTableForm.pdDefineContent[i],\r\n                      pdAuditConcthis: this.comboTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.comboTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.comboTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              for (let i = 0; i < this.checkBoxData.length; i++) {\r\n                this.$set(this.checkBoxData[i], 'pdAuditConcthis', this.comboTableForm.pdAuditConcthis);\r\n                this.$set(this.checkBoxData[i], 'pdIsCancelDefinition', this.comboTableForm.pdIsCancelDefinition);\r\n                this.$set(this.checkBoxData[i], 'pdNotPassOpinion', this.comboTableForm.pdNotPassOpinion)\r\n              }\r\n              this.$refs.multipleTable.clearSelection()\r\n            }\r\n            this.comboTableForm.pdDefineContent = [];\r\n            this.comboTableForm.pdAuditConcthis = '';\r\n            this.comboTableForm.pdIsCancelDefinition = 'N';\r\n            this.comboTableForm.pdNotPassOpinion = '';\r\n            this.$nextTick(() => {\r\n              this.$refs.comboTableForm.clearValidate()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      //\r\n      addRuleAuditTableData() {\r\n        this.$refs.ruleTableForm.validate((valid) => {\r\n          if (valid) {\r\n            if (this.ruleTableForm.pdAuditConcthis == 'Y') {\r\n              this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n              this.ruleTableForm.pdNotPassOpinion = ''\r\n            }\r\n            if (this.checkRuleData.length == 0) {\r\n              if (this.ruleTableForm.pdFormulaRuleCode.length == 1) {\r\n                if (this.ruleTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    if (this.checkMoreCopyData(this.ruleNodeList[i].value, this.comboRuleAudit)) {\r\n                      this.comboRuleAudit.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                        pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                        pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                      })\r\n                    }\r\n                    else{\r\n                      break\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[0].value, this.comboRuleAudit)) {\r\n                    this.comboRuleAudit.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[0].value,\r\n                      pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.ruleTableForm.pdFormulaRuleCode.length > 1) {\r\n                for (let i = 0; i < this.ruleTableForm.pdFormulaRuleCode.length; i++) {\r\n                  if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[i].value, this.comboRuleAudit)) {\r\n                    this.comboRuleAudit.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[i].value,\r\n                      pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              for (let i = 0; i < this.checkRuleData.length; i++) {\r\n                this.$set(this.checkRuleData[i], 'pdAuditConcthis', this.ruleTableForm.pdAuditConcthis);\r\n                this.$set(this.checkRuleData[i], 'pdIsCancelDefinition', this.ruleTableForm.pdIsCancelDefinition);\r\n                this.$set(this.checkRuleData[i], 'pdNotPassOpinion', this.ruleTableForm.pdNotPassOpinion)\r\n              }\r\n              this.$refs.multipleRuleTable.clearSelection()\r\n            }\r\n            this.ruleTableForm.pdFormulaRuleCode = [];\r\n            this.ruleTableForm.pdAuditConcthis = '';\r\n            this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n            this.ruleTableForm.pdNotPassOpinion = '';\r\n            this.$nextTick(() => {\r\n              this.$refs.ruleTableForm.clearValidate()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      //\r\n      addFormulaAuditTableData() {\r\n        this.$refs.formulaTableForm.validate((valid) => {\r\n          if (valid) {\r\n            if (this.formulaTableForm.pdAuditConcthis == 'Y') {\r\n              this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n              this.formulaTableForm.pdNotPassOpinion = ''\r\n            }\r\n            if (this.checkFormulaData.length == 0) {\r\n              if (this.formulaTableForm.pdFormulaRuleCode.length == 1) {\r\n                if (this.formulaTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    if (this.checkMoreCopyData(this.formulaNodeList[i].value, this.comboFormulaAudit)) {\r\n                      this.comboFormulaAudit.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                        pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                        pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                      })\r\n                    }\r\n                    else{\r\n                      break\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[0].value, this.comboFormulaAudit)) {\r\n                    this.comboFormulaAudit.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[0].value,\r\n                      pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n              if (this.formulaTableForm.pdFormulaRuleCode.length > 1) {\r\n                for (let i = 0; i < this.formulaTableForm.pdFormulaRuleCode.length; i++) {\r\n                  if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[i].value, this.comboFormulaAudit)) {\r\n                    this.comboFormulaAudit.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[i].value,\r\n                      pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                    })\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              for (let i = 0; i < this.checkFormulaData.length; i++) {\r\n                this.$set(this.checkFormulaData[i], 'pdAuditConcthis', this.formulaTableForm.pdAuditConcthis);\r\n                this.$set(this.checkFormulaData[i], 'pdIsCancelDefinition', this.formulaTableForm.pdIsCancelDefinition);\r\n                this.$set(this.checkFormulaData[i], 'pdNotPassOpinion', this.formulaTableForm.pdNotPassOpinion)\r\n              }\r\n              this.$refs.multipleFormulaTable.clearSelection()\r\n            }\r\n            this.formulaTableForm.pdFormulaRuleCode = [];\r\n            this.formulaTableForm.pdAuditConcthis = '';\r\n            this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n            this.formulaTableForm.pdNotPassOpinion = '';\r\n            this.$nextTick(() => {\r\n              this.$refs.formulaTableForm.clearValidate()\r\n            })\r\n          }\r\n        })\r\n      },\r\n      //\r\n      checkComboMoreCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdDefineContent)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //\r\n      checkComboCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdDefineContent)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //\r\n      checkMoreCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdFormulaRuleCode)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //\r\n      checkCopyData(val, tableName) {\r\n        let comboList = [];\r\n        for (const comboNode of tableName) {\r\n          comboList.push(comboNode.pdFormulaRuleCode)\r\n        }\r\n        if (this._.includes(comboList, val)) {\r\n          this.notifyError(this.$t('comboAudit.comboNodeRepeat'));\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      //\r\n      getPdDesignPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdSalePage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdUWPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdRWPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getPdPVPage() {\r\n        if (this.pdInfo) {\r\n          this.$router.push({name: '', query: {showPageFlag: '1'},params:this.pdInfo})\r\n        }\r\n      },\r\n      getTestPage() {\r\n        if (this.pdInfo) {\r\n          //this.$router.push({name: '', query: {showPageFlag: '1'}})\r\n        }\r\n      },\r\n      //\r\n      backPage() {\r\n        this.$router.push({path: '/commodity-audit/combo-audit-info/package-audit-apply'})\r\n      },\r\n      auditClick() {\r\n        if (this.showAuditDataFlag === 'N') {\r\n          this.quickicon_audit = \"el-icon-arrow-down\";\r\n          this.showAuditDataFlag = 'Y'\r\n        } else {\r\n          this.quickicon_audit = \"el-icon-arrow-right\";\r\n          this.showAuditDataFlag = 'N'\r\n        }\r\n      },\r\n      //\r\n      changeFun(val) {\r\n        this.checkBoxData = val;\r\n        if (val.length > 0) {\r\n          this.comboUpdateFlag = true\r\n        }\r\n        if (val.length == 0) {\r\n          this.comboTableForm.pdDefineContent = [];\r\n          this.comboTableForm.pdAuditConcthis = '';\r\n          this.comboTableForm.pdIsCancelDefinition = 'N';\r\n          this.comboTableForm.pdNotPassOpinion = '';\r\n          this.comboUpdateFlag = false;\r\n          this.dataSelect = false;\r\n          this.$nextTick(() => {\r\n            this.$refs.comboTableForm.clearValidate();\r\n          })\r\n        }else{\r\n          this.comboTableForm.contentList = []\r\n          for(let i=0;i<val.length;i++){\r\n           this.comboTableForm.contentList.push(val[i].pdDefineContent);\r\n          }\r\n          Object.assign(this.comboTableForm, this.comboTableForm.contentList);\r\n          this.comboTableForm.pdDefineContent = this.comboTableForm.contentList;\r\n          this.comboUpdateFlag = true;\r\n          this.dataSelect = true\r\n        }\r\n      },\r\n      changeRuleData(val) {\r\n        this.checkRuleData = val;\r\n        if (val.length > 0) {\r\n          this.ruleUpdateFlag = true\r\n        }\r\n        if (val.length == 1) {\r\n          Object.assign(this.ruleTableForm, val[0]);\r\n          this.ruleTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n          this.ruleUpdateFlag = true;\r\n          this.ruleSelect = true\r\n        }\r\n        if (val.length == 0) {\r\n          this.ruleTableForm.pdFormulaRuleCode = [];\r\n          this.ruleTableForm.pdAuditConcthis = '';\r\n          this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n          this.ruleTableForm.pdNotPassOpinion = '';\r\n          this.ruleUpdateFlag = true;\r\n          this.ruleSelect = true;\r\n          this.$nextTick(() => {\r\n            this.$refs.ruleTableForm.clearValidate()\r\n          })\r\n        }\r\n      },\r\n      changeFormulaData(val) {\r\n        this.checkFormulaData = val;\r\n        if (val.length > 0) {\r\n          this.formulaUpdateFlag = true\r\n        }\r\n        if (val.length == 1) {\r\n          Object.assign(this.formulaTableForm, val[0]);\r\n          this.formulaTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n          this.formulaUpdateFlag = true;\r\n          this.formulaSelect = true\r\n        }\r\n        if (val.length == 0) {\r\n          this.formulaTableForm.pdFormulaRuleCode = [];\r\n          this.formulaTableForm.pdAuditConcthis = '';\r\n          this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n          this.formulaTableForm.pdNotPassOpinion = '';\r\n          this.formulaUpdateFlag = false;\r\n          this.formulaSelect = false;\r\n          this.$nextTick(() => {\r\n            this.$refs.formulaTableForm.clearValidate()\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .notTextarea .el-textarea__inner {\r\n    border: 0;\r\n    padding: 0;\r\n    resize: none;\r\n    color: #606266;\r\n    background-color: white;\r\n    overflow: hidden;\r\n  }\r\n</style>\r\n"]}]}