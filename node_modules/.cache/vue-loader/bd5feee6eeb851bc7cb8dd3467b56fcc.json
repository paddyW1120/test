{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\objectManagement\\ruleBom\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\objectManagement\\ruleBom\\index.vue","mtime":1609847106742},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBhZGRCb20sDQogIGRlbGV0ZUJvbSwNCiAgdXBkYXRlQm9tLA0KICBnZXRBbGxGYXRoZXJCb21BbmRGYXRoZXJCb21JdGVtLA0KICBmaW5kUnVsZUJvbUJ5TmFtZQ0KfSBmcm9tICJAL2FwaS9pYnJtcy9ydWxlQm9tIjsNCmltcG9ydCB7DQogIGFkZEJvbUl0ZW0sDQogIGRlbGV0ZUJvbUl0ZW0sDQogIHVwZGF0ZUJvbUl0ZW0sDQogIGZpbmRSdWxlQm9tSXRlbUJ5TmFtZUFuZEJvbUlkDQp9IGZyb20gIkAvYXBpL2licm1zL3J1bGVCb21JdGVtIjsNCmltcG9ydCB7IGNsb3NlVmlzaXRUYWcgfSBmcm9tICJAL3V0aWxzL3RhZ3NWaWV3IjsNCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsNCmltcG9ydCBydWxlTWVzc2FnZUluZm9Cb20gZnJvbSAiQC92aWV3cy9pYnJtcy9vYmplY3RNYW5hZ2VtZW50L3J1bGVNZXNzYWdlSW5mb0JvbSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImJvbSIsDQogIGRhdGEoKSB7DQogICAgY29uc3QgaXNOdW0gPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBjb25zdCBib21MZXZlbCA9IC9eWzAtOV0qJC87DQogICAgICBpZiAoIWJvbUxldmVsLnRlc3QodmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5pWw5a2XIikpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIGNvbnN0IGNoZWNrSU5DaGluZXNlID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgdmFyIHBhdHJuID0gL15bXHU0ZTAwLVx1OWZhNV17MCwzMH0kLzsNCiAgICAgIGlmICghcGF0cm4udGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXkuK3mlociKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgfQ0KICAgIH07DQogICAgY29uc3QgaXNOdW1PckVuZ2xpc2ggPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICB2YXIgcGF0cm4gPSAvXlthLXpBLVowLTldezAsMjB9JC87DQogICAgICBpZiAoIXBhdHJuLnRlc3QodmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5pWw5a2X5oiW6Iux5paHIikpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIHJldHVybiB7DQogICAgICAvL+ihqOagvOaVsOaNrg0KICAgICAgY29uZmlnczogW10sDQogICAgICBjb25maWdzX2l0ZW06IFtdLA0KICAgICAgcHJlQ2hlY2tGaWx0ZXI6ICIiLA0KICAgICAga2V5SWQ6ICIiLA0KICAgICAgbXNnVHlwZTogIiIsDQogICAgICAvL+afpeivouWPguaVsA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIGxpa2VfbmFtZTogIiIsDQogICAgICAgIGxpa2VfY25OYW1lOiAiIiwNCiAgICAgICAgZXFfYnVzaW5lc3M6ICIiLA0KICAgICAgICBlcV92YWxpZDogIjEiDQogICAgICB9LA0KICAgICAgcGFyYW1zX2l0ZW06IHsNCiAgICAgICAgZXFfYm9tSWQ6ICJxdyIsDQogICAgICAgIGxpa2VfbmFtZTogIiIsDQogICAgICAgIGxpa2VfY25OYW1lOiAiIiwNCiAgICAgICAgZXFfdmFsaWQ6ICIxIg0KDQoNCiAgICAgIH0sDQogICAgICBmb3JtOiB7DQogICAgICAgIC8v6KGo5Y2V5pWw5o2u5LiO5ZCO56uv5a6e5L2T57G75a+55bqUDQogICAgICAgIGlkOiAiIiwgLy/kuLvplK5JRA0KICAgICAgICBuYW1lOiAiIiwNCiAgICAgICAgY25OYW1lOiAiIiwNCiAgICAgICAgZmF0aGVyQm9tOiAiIiwNCiAgICAgICAgZmF0aGVySXRlbTogIiIsDQogICAgICAgIHZhbGlkOiAiMSIsDQogICAgICAgIHNvdXJjZTogIiINCiAgICAgIH0sDQogICAgICBmb3JtX2l0ZW06IHsNCiAgICAgICAgLy/ooajljZXmlbDmja7kuI7lkI7nq6/lrp7kvZPnsbvlr7nlupQNCiAgICAgICAgaWQ6IiIsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBib21OYW1lOiAiIiwNCiAgICAgICAgdmFsaWQ6ICIxIiwNCiAgICAgICAgYm9tSWQ6ICIiLA0KICAgICAgICBpc0hpZXJhcmNoaWNhbDogIjAiLA0KICAgICAgICBpc0Jhc2U6ICIwIiwNCiAgICAgICAgY29tbWFuZFR5cGU6IiIsDQogICAgICAgIGRlc2NyaXB0aW9uOiIiLA0KICAgICAgICBjb21tYW5kVHlwZToiIg0KICAgICAgfSwNCiAgICAgIHJhZGlvOiBmYWxzZSwNCiAgICAgIHJhZGlvX2l0ZW06IGZhbHNlLA0KICAgICAgYm9tSXRlbVN0YXRlOiBmYWxzZSwNCiAgICAgIGJvbV9uYW1lOiAiIiwNCiAgICAgIGl0ZW1fbmFtZTogIiIsDQogICAgICBpdG1lX2lkOiAiIiwNCiAgICAgIC8v5qOA6aqM6KeE5YiZDQogICAgICBydWxlczogew0KICAgICAgICBib21MZXZlbDogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYm9tLmVycm9yTWVzc2FnZS5ib21MZXZlbE1lc3NhZ2UiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0sDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGlzTnVtLCB0cmlnZ2VyOiAiaW5wdXQiIH0NCiAgICAgICAgXSwNCiAgICAgICAgY25OYW1lOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJib20uZXJyb3JNZXNzYWdlLmNuTmFtZU1lc3NhZ2UiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiBjaGVja0lOQ2hpbmVzZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJvbS5lcnJvck1lc3NhZ2UuY25OYW1lTWVzc2FnZTEiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYm9tLmVycm9yTWVzc2FnZS5uYW1lTWVzc2FnZSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB2YWxpZGF0b3I6IGlzTnVtT3JFbmdsaXNoLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYm9tLmVycm9yTWVzc2FnZS5uYW1lTWVzc2FnZTEiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgc291cmNlOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJib20uZXJyb3JNZXNzYWdlLnNvdXJjZU1lc3NhZ2UiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIC8v5qOA6aqM6KeE5YiZDQogICAgICBydWxlc19pdGVtOiB7DQogICAgICAgIGNuTmFtZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYm9tSXRlbS5lcnJvck1lc3NhZ2UuY25OYW1lTWVzc2FnZSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrSU5DaGluZXNlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYm9tSXRlbS5lcnJvck1lc3NhZ2UuY25OYW1lTWVzc2FnZTEiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYm9tSXRlbS5lcnJvck1lc3NhZ2UubmFtZU1lc3NhZ2UiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiBpc051bU9yRW5nbGlzaCwNCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJvbUl0ZW0uZXJyb3JNZXNzYWdlLm5hbWVNZXNzYWdlMSIpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBjb21tYW5kVHlwZTpbew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJib21JdGVtLmVycm9yTWVzc2FnZS5jb21tYW5kVHlwZU1lc3NhZ2UiKSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiDQogICAgICAgICAgfV0NCg0KICAgICAgfSwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLCAvL2RpYWxvZ+aYvuekuui/mOaYr+makOiXjw0KICAgICAgZGlhbG9nVmlzaWJsZV9pdGVtOiBmYWxzZSwgLy9kaWFsb2fmmL7npLrov5jmmK/pmpDol48NCiAgICAgIGRpYWxvZ1Zpc2libGVfbXNnOiBmYWxzZSwNCiAgICAgIGRpYWxvZ1N0YXR1czogIiIsIC8v6KGo5Y2V54q25oCB5piv5paw5aKe6L+Y5piv5L+u5pS5DQogICAgICBkaWFsb2dTdGF0dXNfaXRlbTogIiIsIC8v6KGo5Y2V54q25oCB5piv5paw5aKe6L+Y5piv5L+u5pS5DQogICAgICB0aXRsZU1hcDogew0KICAgICAgICB1cGRhdGU6IHRoaXMuJHQoImJvbS51cGRhdGUiKSwNCiAgICAgICAgY3JlYXRlOiB0aGlzLiR0KCJib20uYWRkIikNCiAgICAgIH0sDQogICAgICB0aXRsZU1hcF9pdGVtOiB7DQogICAgICAgIHVwZGF0ZTogdGhpcy4kdCgiYm9tSXRlbS51cGRhdGUiKSwNCiAgICAgICAgY3JlYXRlOiB0aGlzLiR0KCJib21JdGVtLmFkZCIpDQogICAgICB9LA0KICAgICAgYm9tOiB7fSwNCiAgICAgIGZhdGhlckJvbU9wdGlvbnM6IFtdLA0KICAgICAgZmF0aGVySXRlbU9wdGlvbnM6IFtdLA0KICAgICAgbG9jYWxJdGVtT3B0aW9uczogW10sDQogICAgICBib21EYXRhOiB7DQogICAgICAgIGJvbUxpc3Q6IFtdLA0KICAgICAgICBpdGVtTGlzdDogW10NCiAgICAgIH0sDQogICAgICBidXNpbmVzc0FycmF5OiBbXSwNCiAgICAgIGlzSGllcmFyY2hpY2FsQXJyYXk6IFtdLA0KICAgICAgaXNCYXNlQXJyYXk6IFtdLA0KICAgICAgcHJlQ2hlY2tBcnJheTogW10sDQogICAgICB2YWxpZEFycmF5OiBbXQ0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbImxkY29kZXMiXSkNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIHJ1bGVNZXNzYWdlSW5mb0JvbQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGxldCBsZGNvZGVzID0gdGhpcy4kc3RvcmUuc3RhdGUubGRjb2RlLmxkY29kZXM7DQogICAgdGhpcy5idXNpbmVzc0FycmF5ID0gbGRjb2Rlc1siaWJybXNidXNpbmVzcyJdOw0KICAgIHRoaXMudmFsaWRBcnJheSA9IGxkY29kZXNbImlicm1zdmFsaWQiXTsNCiAgICB0aGlzLmlzSGllcmFyY2hpY2FsQXJyYXkgPSBsZGNvZGVzWyJpYnJtc2lzaGllcmFyY2hpY2FsIl07DQogICAgdGhpcy5pc0Jhc2VBcnJheSA9IGxkY29kZXNbImlicm1zaXNiYXNlIl07DQogICAgdGhpcy5wcmVDaGVja0FycmF5ID0gbGRjb2Rlc1siaWJybXNQcmVDaGVjayJdOw0KICAgIHRoaXMuaW5pdEZhdGhlckJvbUFuZEZhdGhlckJvbUl0ZW1MaXN0cygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdEZhdGhlckJvbUFuZEZhdGhlckJvbUl0ZW1MaXN0cygpIHsNCiAgICAgIGdldEFsbEZhdGhlckJvbUFuZEZhdGhlckJvbUl0ZW0oKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZmF0aGVyQm9tT3B0aW9ucyA9IFtdOw0KICAgICAgICB0aGlzLmZhdGhlckl0ZW1PcHRpb25zID0gW107DQogICAgICAgIHRoaXMubG9jYWxJdGVtT3B0aW9ucyA9IFtdOw0KICAgICAgICB0aGlzLmJvbURhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgbGV0IGZhdGhlckJvbUxpc3QgPSByZXMuZGF0YS5ib21MaXN0Ow0KICAgICAgICB0aGlzLmZvcm0uZmF0aGVyQm9tID0gdGhpcy5mb3JtLmZhdGhlckJvbTsNCiAgICAgICAgZmF0aGVyQm9tTGlzdC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuZmF0aGVyQm9tT3B0aW9ucy5wdXNoKHsNCiAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlkLA0KICAgICAgICAgICAgbGFiZWw6IGRhdGEubmFtZSArICI6IiArIGRhdGEuY25OYW1lDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKuivjeadoemihOagoemqjCovDQogICAgdHlwZVJlZ2lvblNlbGVjdCh2YWwpIHsNCiAgICAgIHRoaXMucHJlQ2hlY2tGaWx0ZXIgPSB2YWw7DQogICAgfSwNCiAgICBoYW5kbGVTZWFyY2goKSB7DQogICAgICB0aGlzLnJhZGlvID0iIjsNCiAgICAgIHRoaXMuYm9tSXRlbVN0YXRlID0gZmFsc2U7DQogICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCk7DQogICAgfSwNCiAgICBoYW5kbGVTZWFyY2hfaXRlbSgpIHsNCiAgICAgIHRoaXMuJHJlZnMucGFnZV9pdGVtLnJlbG9hZCgpOw0KICAgIH0sDQogICAgaGFuZGxlQ3JlYXRlKCkgew0KICAgICAgdGhpcy5yZXNldEZvcm0oKTsNCiAgICAgIHRoaXMuZm9ybS5uYW1lID0gdGhpcy5wYXJhbXMubGlrZV9uYW1lOw0KICAgICAgdGhpcy5mb3JtLmNuTmFtZSA9IHRoaXMucGFyYW1zLmxpa2VfY25OYW1lOw0KICAgICAgdGhpcy5mb3JtLmJ1c2luZXNzID0gdGhpcy5wYXJhbXMuZXFfYnVzaW5lc3M7DQogICAgICB0aGlzLmZvcm0udmFsaWQgPSB0aGlzLnBhcmFtcy5lcV92YWxpZDsNCiAgICAgIHRoaXMubG9jYWxJdGVtT3B0aW9ucyA9IFtdOw0KICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAiY3JlYXRlIjsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVDcmVhdGVfaXRlbShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtX2l0ZW0oKTsNCiAgICAgIHRoaXMuZm9ybV9pdGVtLmJvbUlkID0gcm93LmlkOw0KICAgICAgdGhpcy5kaWFsb2dTdGF0dXNfaXRlbSA9ICJjcmVhdGUiOw0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlX2l0ZW0gPSB0cnVlOw0KICAgIH0sDQogICAgaGFuZGxlVXBkYXRlKHJvdykgew0KDQogICAgICB0aGlzLmZvcm0gPSBPYmplY3QuYXNzaWduKHt9LCByb3cpOw0KICAgICAgLy/muIXnqbrkuIvmi4kNCiAgICAgIHRoaXMuZmF0aGVySXRlbShyb3cuZmF0aGVyQm9tLCAidXBkYXRlIik7DQogICAgICB0aGlzLmxvY2FsSXRlbU9wdGlvbnMgPSBbXTsNCiAgICAgIC8v5pysYm9tSWQg5LiL55qE5LiL5ouJ5YC8DQogICAgICBsZXQgbG9jYWxJdGVtTGlzdCA9IHRoaXMuYm9tRGF0YS5pdGVtTGlzdDsNCiAgICAgIC8v54i2Ym9tSWQg5LiL55qE5LiL5ouJ5YC8DQogICAgICBsb2NhbEl0ZW1MaXN0LmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgIGlmIChyb3cuaWQgPT0gZGF0YS5ib21JZCkgew0KICAgICAgICAgIHRoaXMubG9jYWxJdGVtT3B0aW9ucy5wdXNoKHsNCiAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlkLA0KICAgICAgICAgICAgbGFiZWw6IGRhdGEubmFtZSArICI6IiArIGRhdGEuY25OYW1lDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAidXBkYXRlIjsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVVcGRhdGVfaXRlbShyb3cpIHsNCiAgICAgIHRoaXMuZm9ybV9pdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgcm93KTsNCiAgICAgIHRoaXMucHJlQ2hlY2tGaWx0ZXIgPSByb3cuY29tbWFuZFR5cGU7DQogICAgICB0aGlzLmRpYWxvZ1N0YXR1c19pdGVtID0gInVwZGF0ZSI7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGVfaXRlbSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVEZWxldGUocm93KSB7DQogICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoImJvbS5kZWxldGVJbmZvIikgKyAiPyIsIHRoaXMuJHQoImJvbS5wcm9tcHQiKSwgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgiYm9tLmNvbmZpcm0iKSwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgiYm9tLmNhbmNlbCIpLA0KICAgICAgICB0eXBlOiAid2FybmluZyINCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBkZWxldGVCb20ocm93LmlkLHJvdy5uYW1lKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIGlmKHJlc3VsdC50eXBlID0gInN1Y2Nlc3MiKXsNCiAgICAgICAgICAgIHZhciBrZXlJZCA9IHJvdy5uYW1lOw0KICAgICAgICAgICAgdmFyIHBhcmFtID0geyAgIG9iajpyb3csDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOidCT00nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTonZGVsZXRlJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHZhciBydWxlX3BhcmFtID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OmtleUlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToiQk9NIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJ1bGVDYWNoZS91cGRhdGVSdWxlQ2FjaGUiLHBhcmFtKTsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJydWxlTWVzc2FnZS9kZWxldGVSdWxlTWVzc2FnZSIscnVsZV9wYXJhbSk7DQogICAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaCgpOw0KICAgICAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2hfaXRlbSgpOw0KICAgICAgICAgICAgaWYocmVzdWx0LmlzVXNlZCl7DQogICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoImJvbS5ib21NZXNzYWdlMSIpKTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZV9pdGVtKHJvdykgew0KICAgICAgZGVsZXRlQm9tSXRlbShyb3cuaWQsdGhpcy5ib21fbmFtZSxyb3cubmFtZSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHZhciByZXN1bHQgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICBpZihyZXN1bHQudHlwZSA9ICJzdWNjZXNzIil7DQogICAgICAgICAgICB2YXIga2V5SWQgPSB0aGlzLmJvbV9uYW1lICsgIl8iICsgcm93Lm5hbWU7DQogICAgICAgICAgICB2YXIgcGFyYW0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIG9iajpyb3csDQogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6J0JPTUlURU0nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOidkZWxldGUnDQogICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdmFyIHJ1bGVfcGFyYW0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6a2V5SWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiJCT01JVEVNIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJydWxlQ2FjaGUvdXBkYXRlUnVsZUNhY2hlIixwYXJhbSk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicnVsZU1lc3NhZ2UvZGVsZXRlUnVsZU1lc3NhZ2UiLHJ1bGVfcGFyYW0pOw0KICAgICAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2hfaXRlbSgpOw0KICAgICAgICAgICAgaWYocmVzdWx0LmlzVXNlZCl7DQogICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoImJvbUl0ZW0uYm9tSXRlbU1lc3NhZ2UxIikpOw0KICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKTsNCiAgICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGVfaXRlbSA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2VfQm9tKHZhbCkgew0KICAgICAgaWYodmFsICE9IG51bGwpew0KICAgICAgICAgIHRoaXMuYm9tID0gdmFsOw0KICAgICAgICAgIHRoaXMucGFyYW1zX2l0ZW0uZXFfYm9tSWQgPSB0aGlzLmJvbS5pZDsNCiAgICAgICAgICB0aGlzLnJhZGlvID0gdGhpcy5ib20uaWQ7DQogICAgICAgICAgdGhpcy5ib21fbmFtZSA9IHRoaXMuYm9tLm5hbWU7DQogICAgICAgICAgdGhpcy5ib21JdGVtU3RhdGUgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9pdGVtLnJlbG9hZCgpOw0KDQogICAgICB9DQoNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2VfaXRlbSh2YWwpIHsNCiAgICAgICBpZih2YWwgIT0gbnVsbCl7DQogICAgICAgICAgdGhpcy5pdGVtX25hbWUgPSB2YWwubmFtZTsNCiAgICAgICAgICB0aGlzLml0bWVfaWQgPSB2YWwuaWQ7DQogICAgICAgICAgdGhpcy5yYWRpb19pdGVtID0gdmFsLmlkOw0KICAgICAgIH0NCiAgICB9LA0KICAgIHN1Ym1pdEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzLmRhdGFGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgIC8v5qCh6aqMYm9t5piv5ZCm5a2Y5ZyoDQogICAgICAgICAgbGV0IGJhY2s7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCkgew0KICAgICAgICAgICAgYmFjayA9IHVwZGF0ZUJvbSh0aGlzLmZvcm0pOw0KICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIGJhY2sgPSBhZGRCb20odGhpcy5mb3JtKTsNCiAgICAgICAgICB9DQogICAgICAgICAgYmFjay50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgY29uc29sZS5sb2coInJlc3VsdCIscmVzdWx0KTsNCiAgICAgICAgICAgIGlmKHJlc3VsdC50eXBlID09ICJzdWNjZXNzIil7DQogICAgICAgICAgICAgICAgdmFyIGtleUlkID10aGlzLmZvcm0ubmFtZTsNCiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo6dGhpcy5mb3JtLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTonQk9NJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06JycNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdmFyIHJ1bGVfcGFyYW0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OmtleUlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IkJPTSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicnVsZUNhY2hlL3VwZGF0ZVJ1bGVDYWNoZSIscGFyYW0pOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJydWxlTWVzc2FnZS91cGRhdGVSdWxlTWVzc2FnZSIscnVsZV9wYXJhbSk7DQogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKTsNCiAgICAgICAgICAgICAgICB0aGlzLmluaXRGYXRoZXJCb21BbmRGYXRoZXJCb21JdGVtTGlzdHMoKTsNCiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZihyZXN1bHQuaXNVc2VkKXsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgiYm9tLmJvbU1lc3NhZ2UxIikpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuJHQoImJvbS5ib21NZXNzYWdlIikpOw0KDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzdWJtaXRGb3JtX2l0ZW0oKSB7DQogICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybV9pdGVtLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICBsZXQgYmFjazsNCiAgICAgICAgICAgIGlmKHRoaXMuZm9ybV9pdGVtLmlkKSB7DQogICAgICAgICAgICAgIGJhY2sgPSB1cGRhdGVCb21JdGVtKHRoaXMuZm9ybV9pdGVtKTsNCiAgICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgIGlmKE9iamVjdC5rZXlzKHRoaXMuYm9tKS5sZW5ndGggIT0gMCkgew0KICAgICAgICAgICAgICAgIGJhY2sgPSBhZGRCb21JdGVtKHRoaXMuZm9ybV9pdGVtKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYmFjay50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gIHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgIGlmKHJlc3VsdC50eXBlID09ICJzdWNjZXNzIil7DQogICAgICAgICAgICAgICAgdmFyIGtleUlkID0gdGhpcy5ib21fbmFtZSArICJfIiArIHRoaXMuZm9ybV9pdGVtLm5hbWU7DQogICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajp0aGlzLmZvcm1faXRlbSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOidCT01JVEVNJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOicnDQogICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdmFyIHJ1bGVfcGFyYW0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OmtleUlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IkJPTUlURU0iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJydWxlQ2FjaGUvdXBkYXRlUnVsZUNhY2hlIixwYXJhbSk7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJ1bGVNZXNzYWdlL3VwZGF0ZVJ1bGVNZXNzYWdlIixydWxlX3BhcmFtKTsNCiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaF9pdGVtKCk7DQogICAgICAgICAgICAgICAgdGhpcy5pbml0RmF0aGVyQm9tQW5kRmF0aGVyQm9tSXRlbUxpc3RzKCk7DQogICAgICAgICAgICAgICBpZihyZXN1bHQuaXNVc2VkKXsNCiAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgiYm9tSXRlbS5ib21JdGVtTWVzc2FnZTEiKSk7DQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGVfaXRlbSA9IGZhbHNlOw0KICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuJHQoImJvbUl0ZW0uYm9tSXRlbU1lc3NhZ2UiKSk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHJlc2V0Rm9ybSgpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgaWQ6ICIiLCAvL+S4u+mUrklEDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBjbk5hbWU6ICIiLA0KICAgICAgICBmYXRoZXJCb206ICIiLA0KICAgICAgICBmYXRoZXJJdGVtOiAiIiwNCiAgICAgICAgdmFsaWQ6ICIxIiwNCiAgICAgICAgc291cmNlOiAiIg0KICAgICAgfTsNCiAgICB9LA0KICAgIHJlc2V0Rm9ybV9pdGVtKCkgew0KICAgICAgdGhpcy5mb3JtX2l0ZW0gPSB7DQogICAgICAgIC8v6KGo5Y2V5pWw5o2u5LiO5ZCO56uv5a6e5L2T57G75a+55bqUDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBib21OYW1lOiAiIiwNCiAgICAgICAgdmFsaWQ6ICIxIiwNCiAgICAgICAgYm9tSWQ6ICIiLA0KICAgICAgICBpc0hpZXJhcmNoaWNhbDogIjAiLA0KICAgICAgICBpc0Jhc2U6ICIwIiwNCiAgICAgICAgZGVzY3JpcHRpb246IiIsDQogICAgICAgIGNvbW1hbmRUeXBlOiIiDQogICAgICB9Ow0KICAgIH0sDQogICAgYm9tX3J1bGVNZXNzYWdlKHJvdykgew0KDQogICAgICBpZihyb3cpew0KICAgICAgICAgIHRoaXMua2V5SWQgPSByb3cubmFtZTsNCiAgICAgICAgICB0aGlzLm1zZ1R5cGUgPSAiQk9NIjsNCiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGVfbXNnID0gdHJ1ZTsNCiAgICAgIH0NCg0KICAgIH0sDQogICAgYm9tSXRlbV9ydWxlTWVzc2FnZShyb3cpIHsNCiAgICAgICBpZihyb3cpew0KICAgICAgICAgIHRoaXMua2V5SWQgPSB0aGlzLmJvbV9uYW1lICsgIl8iICsgcm93Lm5hbWU7DQogICAgICAgICAgdGhpcy5tc2dUeXBlID0gIkJPTUlURU0iOw0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZV9tc2cgPSB0cnVlOw0KICAgICAgICAgIH0NCiAgICB9LA0KICAgIGNob29zZU9uZShyb3cpIHsNCiAgICAgIHRoaXMucmFkaW8gPSByb3cuaWQ7DQogICAgfSwNCiAgICBjaG9vc2VPbmVfSXRlbShyb3cpIHsNCiAgICAgIHRoaXMucmFkaW9fSXRlbSA9IHJvdy5pZDsNCiAgICB9LA0KICAgIGZhdGhlckl0ZW0oZmF0aGVySWQsIHR5cGUpIHsNCiAgICAgIHRoaXMuZmF0aGVySXRlbU9wdGlvbnMgPSBbXTsNCiAgICAgIGlmICh0eXBlID09ICJzZWxlY3QiKSB7DQogICAgICAgIHRoaXMuZm9ybS5mYXRoZXJJdGVtID0gIiI7DQogICAgICB9DQogICAgICBsZXQgZmF0aGVySXRlbUxpc3QgPSB0aGlzLmJvbURhdGEuaXRlbUxpc3Q7DQogICAgICAvL+acrGJvbUlkIOS4i+eahOS4i+aLieWAvA0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYXRoZXJJdGVtTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICBsZXQgZGF0YSA9IGZhdGhlckl0ZW1MaXN0W2ldOw0KICAgICAgICBpZiAoZmF0aGVySWQgPT0gZGF0YS5ib21JZCkgew0KICAgICAgICAgIHRoaXMuZmF0aGVySXRlbU9wdGlvbnMucHVzaCh7DQogICAgICAgICAgICB2YWx1ZTogZGF0YS5pZCwNCiAgICAgICAgICAgIGxhYmVsOiBkYXRhLm5hbWUgKyAiOiIgKyBkYXRhLmNuTmFtZQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBmYXRoZXJJdGVtQ2hhbmdlKHJvdywgY29sdW1uKSB7DQogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOw0KICAgIH0sDQogICAgZmF0aGVyQm9tRm9ybWF0KHJvdywgY29sdW1uKSB7DQogICAgICBsZXQgYm9tSWQgPSByb3cuZmF0aGVyQm9tOw0KICAgICAgbGV0IHN0YXRlVmFsdWUgPSAiIjsNCiAgICAgIHRoaXMuYm9tRGF0YS5ib21MaXN0LmZvckVhY2goKHN0LCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoc3QuaWQgPT09IGJvbUlkKSB7DQogICAgICAgICAgc3RhdGVWYWx1ZSA9IHN0Lm5hbWU7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIHN0YXRlVmFsdWU7DQogICAgfSwNCiAgICBsb2NhbEl0ZW1Gb3JtYXQocm93LCBjb2x1bW4pIHsNCiAgICAgIGxldCBpdGVtSWQgPSByb3cubG9jYWxJdGVtOw0KICAgICAgbGV0IHN0YXRlVmFsdWUgPSAiIjsNCiAgICAgIHRoaXMuYm9tRGF0YS5pdGVtTGlzdC5mb3JFYWNoKChzdCwgaW5kZXgpID0+IHsNCiAgICAgICAgaWYgKHN0LmlkID09PSBpdGVtSWQpIHsNCiAgICAgICAgICBzdGF0ZVZhbHVlID0gc3QubmFtZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICByZXR1cm4gc3RhdGVWYWx1ZTsNCiAgICB9LA0KICAgIGZhdGhlckl0ZW1Gb3JtYXQocm93LCBjb2x1bW4pIHsNCiAgICAgIGxldCBpdGVtSWQgPSByb3cuZmF0aGVySXRlbTsNCiAgICAgIGxldCBzdGF0ZVZhbHVlID0gIiI7DQogICAgICB0aGlzLmJvbURhdGEuaXRlbUxpc3QuZm9yRWFjaCgoc3QsIGluZGV4KSA9PiB7DQogICAgICAgIGlmIChzdC5pZCA9PT0gaXRlbUlkKSB7DQogICAgICAgICAgc3RhdGVWYWx1ZSA9IHN0Lm5hbWU7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIHN0YXRlVmFsdWU7DQogICAgfSwNCiAgICBidXNpbmVzc0Zvcm1hdChyb3csIGNvbHVtbikgew0KICAgICAgbGV0IGNvZGUgPSByb3cuYnVzaW5lc3M7DQogICAgICBsZXQgc3RhdGVWYWx1ZSA9ICIiOw0KICAgICAgdGhpcy5idXNpbmVzc0FycmF5LmZvckVhY2goKHN0LCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoc3QuY29kZSA9PT0gY29kZSkgew0KICAgICAgICAgIHN0YXRlVmFsdWUgPSBzdC5jb2RlbmFtZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICByZXR1cm4gc3RhdGVWYWx1ZTsNCiAgICB9LA0KICAgIHZhbGlkRm9ybWF0KHJvdywgY29sdW1uKSB7DQogICAgICBsZXQgY29kZSA9IHJvdy52YWxpZDsNCiAgICAgIGxldCBzdGF0ZVZhbHVlID0gIiI7DQogICAgICB0aGlzLnZhbGlkQXJyYXkuZm9yRWFjaCgoc3QsIGluZGV4KSA9PiB7DQogICAgICAgIGlmIChzdC5jb2RlID09PSBjb2RlKSB7DQogICAgICAgICAgc3RhdGVWYWx1ZSA9IHN0LmNvZGVuYW1lOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIHJldHVybiBzdGF0ZVZhbHVlOw0KICAgIH0sDQogICAgaXNIaWVyYXJjaGljYWxGb3JtYXQocm93LCBjb2x1bW4pIHsNCiAgICAgIGxldCBjb2RlID0gcm93LmlzSGllcmFyY2hpY2FsOw0KICAgICAgbGV0IHN0YXRlVmFsdWUgPSAiIjsNCiAgICAgIHRoaXMuaXNIaWVyYXJjaGljYWxBcnJheS5mb3JFYWNoKChzdCwgaW5kZXgpID0+IHsNCiAgICAgICAgaWYgKHN0LmNvZGUgPT09IGNvZGUpIHsNCiAgICAgICAgICBzdGF0ZVZhbHVlID0gc3QuY29kZW5hbWU7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIHN0YXRlVmFsdWU7DQogICAgfSwNCiAgICBpc0Jhc2VGb3JtYXQocm93LCBjb2x1bW4pIHsNCiAgICAgIGxldCBjb2RlID0gcm93LmlzQmFzZTsNCiAgICAgIGxldCBzdGF0ZVZhbHVlID0gIiI7DQogICAgICB0aGlzLmlzQmFzZUFycmF5LmZvckVhY2goKHN0LCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoc3QuY29kZSA9PT0gY29kZSkgew0KICAgICAgICAgIHN0YXRlVmFsdWUgPSBzdC5jb2RlbmFtZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICByZXR1cm4gc3RhdGVWYWx1ZTsNCiAgICB9LA0KICAgIGNvbW1hbmRUeXBlRm9ybWF0KHJvdywgY29sdW1uKSB7DQogICAgICA7DQogICAgICBsZXQgY29kZSA9IHJvdy5jb21tYW5kVHlwZTsNCiAgICAgIGxldCBzdGF0ZVZhbHVlID0gIiI7DQogICAgICB0aGlzLnByZUNoZWNrQXJyYXkuZm9yRWFjaCgoc3QsIGluZGV4KSA9PiB7DQogICAgICAgIGlmIChzdC5jb2RlID09PSBjb2RlKSB7DQogICAgICAgICAgc3RhdGVWYWx1ZSA9IHN0LmNvZGVuYW1lOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIHJldHVybiBzdGF0ZVZhbHVlOw0KICAgIH0sDQogICAgcHJlQ2hlY2tGb3JtYXQocm93LCBjb2x1bW4pIHsNCiAgICAgIDsNCiAgICAgIGxldCBjb2RlID0gcm93LnByZUNoZWNrOw0KICAgICAgbGV0IHN0YXRlVmFsdWUgPSAiIjsNCiAgICAgIGxldCBuYW1lID0gIiI7DQogICAgICBpZiAodHlwZW9mIGNvZGUgIT0gInVuZGVmaW5lZCIgJiYgY29kZSAhPSAiIiAmJiBjb2RlICE9IG51bGwpIHsNCiAgICAgICAgc3dpdGNoIChjb2RlLnN1YnN0cmluZygwLCAxKSkgew0KICAgICAgICAgIGNhc2UgIkQiOg0KICAgICAgICAgICAgbmFtZSA9ICJEYXRlIjsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgIk4iOg0KICAgICAgICAgICAgbmFtZSA9ICJOdW1iZXIiOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAiUyI6DQogICAgICAgICAgICBuYW1lID0gIlN0cmluZyI7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgcHJlQ2hlY2tBcnJheSA9IHRoaXMuJHN0b3JlLnN0YXRlLmxkY29kZS5sZGNvZGVzWw0KICAgICAgICAgICJpYnJtc1ByZUNoZWNrLiIgKyBuYW1lDQogICAgICAgIF07DQogICAgICAgIHByZUNoZWNrQXJyYXkuZm9yRWFjaCgoc3QsIGluZGV4KSA9PiB7DQogICAgICAgICAgaWYgKHN0LmNvZGUgPT09IGNvZGUpIHsNCiAgICAgICAgICAgIHN0YXRlVmFsdWUgPSBzdC5jb2RlbmFtZTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gc3RhdGVWYWx1ZTsNCiAgICB9LA0KICAgIGdvQmFjaygpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQogICAgZ29CYWNrSXRlbSgpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZV9pdGVtID0gZmFsc2U7DQogICAgfSwNCiAgICBnb0JhY2tJbmZvX21zZygpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZV9tc2cgPSBmYWxzZTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ibrms/objectManagement/ruleBom","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-filter-wraper>\r\n      <el-form  :model=\"params\" style=\"margin: 20px 0 0 0\" label-width=\"auto\">\r\n        <el-row :gutter=\"10\">\r\n          <cus-col :span=\"6\">\r\n            <el-form-item :label=\"$t('bom.name')\" prop>\r\n              <el-input placeholder clearable v-model=\"params.like_name\"></el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-form-item :label=\"$t('bom.cnName')\" prop>\r\n              <el-input placeholder clearable v-model=\"params.like_cnName\"></el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-form-item :label=\"$t('bom.business')\" prop>\r\n              <cus-select :codetype=\"'ibrmsbusiness'\" placeholder v-model=\"params.eq_business\"></cus-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-btn-wrapper>\r\n              <el-button  size=\"mini\"\r\n                v-waves\r\n                type=\"primary\"\r\n                @click=\"handleSearch\"\r\n                class=\"filter-button\"\r\n                icon=\"el-icon-search\"\r\n              >{{$t('bom.search') }}</el-button>\r\n              <el-button  size=\"mini\"\r\n                v-waves\r\n                type=\"primary\"\r\n                v-auth=\"'rule-bom:add'\"\r\n                @click=\"handleCreate\"\r\n                icon=\"el-icon-plus\"\r\n                class=\"filter-button\"\r\n              >{{$t('bom.addBom')}}</el-button>\r\n\r\n          </cus-btn-wrapper>\r\n        </el-row>\r\n        <el-row :gutter=\"10\">\r\n          <cus-col :span=\"7\">\r\n            <el-form-item :label=\"$t('bom.valid')\" >\r\n              <el-switch active-value=\"1\" inactive-value=\"0\" v-model=\"params.eq_valid\"></el-switch>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </el-row>\r\n      </el-form>\r\n    </cus-filter-wraper>\r\n    <cus-table-title :label=\"$t('bom.tableName')\"></cus-table-title>\r\n    <el-table\r\n      :data=\"configs\"\r\n      size=\"mini\"\r\n      fit\r\n      element-loading-text=\"Loading\"\r\n      @current-change=\"handleCurrentChange_Bom\"\r\n      border\r\n      highlight-current-row\r\n      align=\"center\"\r\n      class=\"wraper-table\"\r\n      ref=\"page\"\r\n    >\r\n      <el-table-column :label=\"$t('table.select')\" align=\"center\" :width=\"50\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio :label=\"scope.row.id\" @change=\"chooseOne(scope.row)\" v-model=\"radio\">{{''}}</el-radio>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\"  align=\"center\"  type=\"index\"  width=\"60px\">\r\n              <template v-slot=\"scope\">\r\n                              {{ initTableIndex('page', scope.$index) }}\r\n               </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('bom.name')\" prop=\"name\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('bom.cnName')\" prop=\"cnName\" align=\"center\"></el-table-column>\r\n      <el-table-column\r\n        :label=\"$t('bom.fatherBom')\"\r\n        :formatter=\"fatherBomFormat\"\r\n        prop=\"fatherBom\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        :label=\"$t('bom.localItem')\"\r\n        :formatter=\"localItemFormat\"\r\n        prop=\"localItem\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        :label=\"$t('bom.fatherItem')\"\r\n        :formatter=\"fatherItemFormat\"\r\n        prop=\"fatherItem\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column :label=\"$t('bom.bomLevel')\" prop=\"bomLevel\" align=\"center\"></el-table-column>\r\n      <el-table-column\r\n        :label=\"$t('bom.business')\"\r\n        :formatter=\"businessFormat\"\r\n        prop=\"business\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column :label=\"$t('bom.source')\" :width=\"300\" prop=\"source\" align=\"center\"></el-table-column>\r\n      <el-table-column\r\n        :label=\"$t('bom.valid')\"\r\n        :formatter=\"validFormat\"\r\n        prop=\"valid\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n\r\n      <el-table-column align=\"center\" :label=\"$t('table.actions')\" fixed=\"right\" :width=\"450\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-plus\"\r\n            v-auth=\"'rule-bom-item:add'\"\r\n            @click=\"handleCreate_item(scope.row)\"\r\n          >{{$t('bomItem.addItem')}}</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleUpdate(scope.row)\"\r\n            v-auth=\"'rule-bom:update'\"\r\n            class=\"filter-button\"\r\n            icon=\"el-icon-edit\"\r\n            style=\"margin-left: 5px;\"\r\n          ></el-button>\r\n          <cus-del-btn\r\n            v-auth=\"'rule-bom:delete'\"\r\n            @ok=\"handleDelete(scope.row)\"\r\n            style=\"margin-left: 5px;\"\r\n          />\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"bom_ruleMessage(scope.row)\"\r\n            style=\"margin-left: 5px;\"\r\n          >\r\n            <svg-icon icon-class=\"multilingual\" />\r\n            {{$t('bom.ruleMessage')}}\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination\r\n      ref=\"page\"\r\n      url=\"/rule-bom/list\"\r\n      :pageSize=\"10\"\r\n      :params=\"params\"\r\n      v-model=\"configs\"\r\n    />\r\n\r\n    <!---新增修改dialog---->\r\n\r\n    <el-dialog :visible.sync=\"dialogVisible\" @close=\"dialogVisible=false\" v-dialog-drag width=\"60%\">\r\n      <cus-page-title-back @backTo=\"goBack\" :isDialog=\"true\" :label=\"titleMap[dialogStatus]\"/>\r\n          <el-form\r\n            ref=\"dataForm\"\r\n            :model=\"form\"\r\n            :rules=\"rules\"\r\n            label-position=\"right\"\r\n            label-width=\"150px\"\r\n          >\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.name')+':'\" prop=\"name\">\r\n                  <el-input\r\n                    v-model=\"form.name\"\r\n                    :placeholder=\"$t('bom.name')\"\r\n                    maxlength=\"20\"\r\n                    show-word-limit\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </cus-col>\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.cnName')+':'\" prop=\"cnName\">\r\n                  <el-input\r\n                    v-model=\"form.cnName\"\r\n                    :placeholder=\"$t('bom.cnName')\"\r\n                    maxlength=\"30\"\r\n                    show-word-limit\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.fatherBom')+':'\" prop=\"fatherBom\">\r\n                  <el-select\r\n                    v-model=\"form.fatherBom\"\r\n                    class=\"filter-item\"\r\n                    clearable\r\n                    :placeholder=\"$t('i18nView.selectPlaceholder')\"\r\n                    @change=\"fatherItem(form.fatherBom,'select')\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in fatherBomOptions\"\r\n                      value-key=\"label\"\r\n                      :key=\"item.value\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.value\"\r\n                    ></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </cus-col>\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.localItem')+':'\" prop=\"localItem\">\r\n                  <el-select\r\n                    v-model=\"form.localItem\"\r\n                    value-key=\"label\"\r\n                    class=\"filter-item\"\r\n                    clearable\r\n                    :placeholder=\"$t('i18nView.selectPlaceholder')\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in localItemOptions\"\r\n                      :key=\"item.value\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.value\"\r\n                    ></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.fatherItem')+':'\" prop=\"fatherItem\">\r\n                  <el-select\r\n                    v-model=\"form.fatherItem\"\r\n                    value-key=\"label\"\r\n                    class=\"filter-item\"\r\n                    clearable\r\n                    @change=\"fatherItemChange()\"\r\n                    :placeholder=\"$t('i18nView.selectPlaceholder')\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in fatherItemOptions\"\r\n                      :key=\"item.value\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.value\"\r\n                    ></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </cus-col>\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.business')+':'\" prop=\"business\">\r\n                  <cus-select :codetype=\"'ibrmsbusiness'\" placeholder v-model=\"form.business\"></cus-select>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.source')+':'\" prop=\"source\">\r\n                   <el-input\r\n                      :placeholder=\"$t('bom.source') \"\r\n                      :rows=\"3\"\r\n                      type=\"textarea\"\r\n                      v-model=\"form.source\"\r\n                      maxlength=\"100\"\r\n                      show-word-limit\r\n                    />\r\n                </el-form-item>\r\n              </cus-col>\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.bomLevel')+':'\" prop=\"bomLevel\">\r\n                  <el-input type=\"number\" v-model=\"form.bomLevel\" :placeholder=\"$t('bom.bomLevel')\"></el-input>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"10\">\r\n                <el-form-item :label=\"$t('bom.valid')+':'\" prop=\"valid\">\r\n                  <el-switch active-value=\"1\" inactive-value=\"0\" v-model=\"form.valid\"></el-switch>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"20\">\r\n                <el-form-item :label=\"$t('bom.discription')+':'\" prop=\"discription\">\r\n                  <el-input\r\n                    :placeholder=\"$t('bom.discription') \"\r\n                    :rows=\"5\"\r\n                    type=\"textarea\"\r\n                    maxlength=\"200\"\r\n                    show-word-limit\r\n                    v-model=\"form.discription\"\r\n                  />\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n          </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button  size=\"mini\" type=\"primary\" v-auth=\"'rule-bom:add'\" @click=\"submitForm\">\r\n          <i class=\"el-icon-success el-icon--left\"></i>\r\n          {{ $t('table.save') }}\r\n        </el-button>\r\n        <el-button  size=\"mini\" @click=\"resetForm('dataForm')\" type=\"warning\">\r\n          <i class=\"el-icon-refresh el-icon--left\"></i>\r\n          {{$t('table.refresh')}}\r\n        </el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <br />\r\n    <div v-show=\"bomItemState\">\r\n    <cus-form-title :label=\"$t('bomItem.info')\" :first=\"true\"></cus-form-title>\r\n    <cus-filter-wraper>\r\n      <el-form  :model=\"params_item\" style=\"margin: 20px 0 0 0\" label-width=\"auto\">\r\n        <el-row :gutter=\"10\">\r\n           <cus-col :span=\"6\">\r\n            <el-form-item :label=\"$t('bomItem.belongBom')\" prop>\r\n              <el-input v-model=\"bom_name\" :disabled=\"true\"></el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-form-item :label=\"$t('bomItem.name')\" prop>\r\n              <el-input placeholder clearable v-model=\"params_item.like_name\"></el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-form-item :label=\"$t('bomItem.cnName')\" prop>\r\n              <el-input placeholder clearable v-model=\"params_item.like_cnName\"></el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n\r\n          <cus-btn-wrapper>\r\n              <el-button  size=\"mini\"\r\n                v-waves\r\n                type=\"primary\"\r\n                @click=\"handleSearch_item\"\r\n                class=\"filter-button\"\r\n                icon=\"el-icon-search\"\r\n              >{{$t('bomItem.search') }}</el-button>\r\n          </cus-btn-wrapper>\r\n        </el-row>\r\n        <el-row :gutter=\"10\">\r\n          <cus-col :span=\"7\">\r\n            <el-form-item :label=\"$t('bomItem.valid')\" >\r\n              <el-switch active-value=\"1\" inactive-value=\"0\" v-model=\"params_item.eq_valid\"></el-switch>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </el-row>\r\n      </el-form>\r\n     </cus-filter-wraper>\r\n      <el-row>\r\n        <!-- 词条 -->\r\n        <cus-table-title :label=\"$t('bomItem.tableName')\"></cus-table-title>\r\n        <el-table\r\n          :data=\"configs_item\"\r\n          size=\"mini\"\r\n          fit\r\n          element-loading-text=\"Loading\"\r\n          @current-change=\"handleCurrentChange_item\"\r\n          border\r\n          highlight-current-row\r\n          align=\"center\"\r\n          class=\"wraper-table\"\r\n          ref=\"page_item\"\r\n        >\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" sortable type=\"index\"  width=\"60px\">\r\n              <template v-slot=\"scope\">\r\n                              {{ initTableIndex('page_item', scope.$index) }}\r\n               </template>\r\n          \r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('bomItem.name')\" width=\"150\" prop=\"name\" align=\"center\"></el-table-column>\r\n          <el-table-column :label=\"$t('bomItem.cnName')\" width=\"150\" prop=\"cnName\" align=\"center\"></el-table-column>\r\n          <el-table-column :label=\"$t('bomItem.connector')\" prop=\"connector\" align=\"center\"></el-table-column>\r\n          <el-table-column\r\n            :label=\"$t('bomItem.isHierarchical')\"\r\n            :formatter=\"isHierarchicalFormat\"\r\n            prop=\"isHierarchical\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            :label=\"$t('bomItem.isBase')\"\r\n            :formatter=\"isBaseFormat\"\r\n            prop=\"isBase\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column :label=\"$t('bomItem.sourceType')\" prop=\"sourceType\" align=\"center\"></el-table-column>\r\n          <el-table-column :label=\"$t('bomItem.source')\" width=\"400\" prop=\"source\" align=\"center\"></el-table-column>\r\n          <el-table-column\r\n            :label=\"$t('bomItem.commandType')\"\r\n            :formatter=\"commandTypeFormat\"\r\n            prop=\"commandType\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            :label=\"$t('bomItem.preCheck')\"\r\n            :formatter=\"preCheckFormat\"\r\n            width=\"400\"\r\n            prop=\"preCheck\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            :label=\"$t('bomItem.valid')\"\r\n            :formatter=\"validFormat\"\r\n            prop=\"valid\"\r\n            align=\"center\"\r\n            width=\"100\"\r\n          ></el-table-column>\r\n\r\n          <el-table-column align=\"center\" :label=\"$t('table.actions')\" fixed=\"right\" width=\"330\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"primary\"\r\n                @click=\"handleUpdate_item(scope.row)\"\r\n                v-auth=\"'rule-bom-item:update'\"\r\n                class=\"filter-button\"\r\n                icon=\"el-icon-edit\"\r\n              ></el-button>\r\n              <cus-del-btn\r\n                v-auth=\"'rule-bom-item:delete'\"\r\n                @ok=\"handleDelete_item(scope.row)\"\r\n                style=\"margin-left: 5px;\"\r\n              />\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"primary\"\r\n                @click=\"bomItem_ruleMessage(scope.row)\"\r\n                style=\"margin-left: 5px;\"\r\n              >\r\n                <svg-icon icon-class=\"multilingual\" />\r\n                {{$t('bom.ruleMessage')}}\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-row>\r\n      <!-- 分页 -->\r\n      <cus-pagination\r\n        ref=\"page_item\"\r\n        url=\"/rule-bom-item/list\"\r\n        :pageSize=\"10\"\r\n        :params=\"params_item\"\r\n        v-model=\"configs_item\"\r\n      />\r\n\r\n      <!---新增修改dialog---->\r\n\r\n      <el-dialog :visible.sync=\"dialogVisible_item\" @close=\"dialogVisible_item=false\" v-dialog-drag width=\"60%\">\r\n        <cus-page-title-back @backTo=\"goBackItem\"  :isDialog=\"true\"  :label=\"titleMap_item[dialogStatus_item]\"/>\r\n            <el-form\r\n              ref=\"dataForm_item\"\r\n              :model=\"form_item\"\r\n              :rules=\"rules_item\"\r\n              label-position=\"right\"\r\n              label-width=\"150px\"\r\n            >\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.belongBom')+':'\">\r\n                    <el-input v-model=\"bom_name\" :disabled=\"true\" maxlength=\"20\" show-word-limit></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.name')+':'\" prop=\"name\">\r\n                    <el-input\r\n                      v-model=\"form_item.name\"\r\n                      :placeholder=\"$t('bomItem.name')\"\r\n                      maxlength=\"20\"\r\n                      show-word-limit\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.cnName')+':'\" prop=\"cnName\">\r\n                    <el-input\r\n                      v-model=\"form_item.cnName\"\r\n                      :placeholder=\"$t('bomItem.cnName')\"\r\n                      maxlength=\"20\"\r\n                      show-word-limit\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.connector')+':'\" prop=\"connector\">\r\n                    <el-input\r\n                      v-model=\"form_item.connector\"\r\n                      :placeholder=\"$t('bomItem.connector')\"\r\n                      maxlength=\"10\"\r\n                      show-word-limit\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.commandType')+':'\" prop=\"commandType\">\r\n                    <cus-select\r\n                      :codetype=\"'ibrmsPreCheck'\"\r\n                      placeholder\r\n                      v-model=\"form_item.commandType\"\r\n                      @change=\"typeRegionSelect\"\r\n                    ></cus-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.valid')+':'\" prop=\"valid\">\r\n                    <el-switch active-value=\"1\" inactive-value=\"0\" v-model=\"form_item.valid\"></el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n               <el-row :gutter=\"10\">\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.sourceType')+':'\" prop=\"sourceType\">\r\n                     <cus-radio :codetype=\"'ibrmssourcetype'\" v-model=\"form_item.sourceType\"></cus-radio>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.source')+':'\" prop=\"source\">\r\n                    <el-input\r\n                      :placeholder=\"$t('bomItem.source') \"\r\n                      :rows=\"3\"\r\n                      type=\"textarea\"\r\n                      v-model=\"form_item.source\"\r\n                      maxlength=\"1000\"\r\n                      show-word-limit\r\n                    />\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <!--<el-row :gutter=\"10\">\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.isHierarchical')+':'\" prop=\"isHierarchical\">\r\n                    <el-switch\r\n                      active-value=\"1\"\r\n                      inactive-value=\"0\"\r\n                      v-model=\"form_item.isHierarchical\"\r\n                    ></el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"10\">\r\n                  <el-form-item :label=\"$t('bomItem.isBase')+':'\" prop=\"isBase\">\r\n                    <el-switch active-value=\"1\" inactive-value=\"0\" v-model=\"form_item.isBase\"></el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row> -->\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"20\">\r\n                  <el-form-item :label=\"$t('bomItem.description')+':'\" prop=\"description\">\r\n                    <el-input\r\n                      :placeholder=\"$t('bomItem.description') \"\r\n                      :rows=\"5\"\r\n                      type=\"textarea\"\r\n                      v-model=\"form_item.description\"\r\n                      maxlength=\"200\"\r\n                      show-word-limit\r\n                    />\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button  size=\"mini\" type=\"primary\" v-auth=\"'rule-bom-item:add'\" @click=\"submitForm_item\">\r\n            <i class=\"el-icon-success el-icon--left\"></i>\r\n            {{ $t('table.save')}}\r\n          </el-button>\r\n          <el-button  size=\"mini\" @click=\"resetForm_item('dataForm')\" type=\"warning\">\r\n            <i class=\"el-icon-refresh el-icon--left\"></i>\r\n            {{$t('table.refresh')}}\r\n          </el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n    <el-dialog :visible.sync=\"dialogVisible_msg\" @close=\"dialogVisible_msg=false\"  v-dialog-drag width=\"80%\">\r\n      <cus-page-title-back @backTo=\"goBackInfo_msg\" :label=\"$t('bom.ruleMessage')\" :isDialog=\"true\"></cus-page-title-back>\r\n      <ruleMessageInfoBom :keyId.sync=\"keyId\" :msgType.sync=\"msgType\" :state=\"dialogVisible_msg\"></ruleMessageInfoBom>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  addBom,\r\n  deleteBom,\r\n  updateBom,\r\n  getAllFatherBomAndFatherBomItem,\r\n  findRuleBomByName\r\n} from \"@/api/ibrms/ruleBom\";\r\nimport {\r\n  addBomItem,\r\n  deleteBomItem,\r\n  updateBomItem,\r\n  findRuleBomItemByNameAndBomId\r\n} from \"@/api/ibrms/ruleBomItem\";\r\nimport { closeVisitTag } from \"@/utils/tagsView\";\r\nimport { mapGetters } from \"vuex\";\r\nimport ruleMessageInfoBom from \"@/views/ibrms/objectManagement/ruleMessageInfoBom\";\r\n\r\nexport default {\r\n  name: \"bom\",\r\n  data() {\r\n    const isNum = (rule, value, callback) => {\r\n      const bomLevel = /^[0-9]*$/;\r\n      if (!bomLevel.test(value)) {\r\n        callback(new Error(\"请输入数字\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    const checkINChinese = (rule, value, callback) => {\r\n      var patrn = /^[\\u4e00-\\u9fa5]{0,30}$/;\r\n      if (!patrn.test(value)) {\r\n        callback(new Error(\"请输入中文\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    const isNumOrEnglish = (rule, value, callback) => {\r\n      var patrn = /^[a-zA-Z0-9]{0,20}$/;\r\n      if (!patrn.test(value)) {\r\n        callback(new Error(\"请输入数字或英文\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      //表格数据\r\n      configs: [],\r\n      configs_item: [],\r\n      preCheckFilter: \"\",\r\n      keyId: \"\",\r\n      msgType: \"\",\r\n      //查询参数\r\n      params: {\r\n        like_name: \"\",\r\n        like_cnName: \"\",\r\n        eq_business: \"\",\r\n        eq_valid: \"1\"\r\n      },\r\n      params_item: {\r\n        eq_bomId: \"qw\",\r\n        like_name: \"\",\r\n        like_cnName: \"\",\r\n        eq_valid: \"1\"\r\n\r\n\r\n      },\r\n      form: {\r\n        //表单数据与后端实体类对应\r\n        id: \"\", //主键ID\r\n        name: \"\",\r\n        cnName: \"\",\r\n        fatherBom: \"\",\r\n        fatherItem: \"\",\r\n        valid: \"1\",\r\n        source: \"\"\r\n      },\r\n      form_item: {\r\n        //表单数据与后端实体类对应\r\n        id:\"\",\r\n        name: \"\",\r\n        bomName: \"\",\r\n        valid: \"1\",\r\n        bomId: \"\",\r\n        isHierarchical: \"0\",\r\n        isBase: \"0\",\r\n        commandType:\"\",\r\n        description:\"\",\r\n        commandType:\"\"\r\n      },\r\n      radio: false,\r\n      radio_item: false,\r\n      bomItemState: false,\r\n      bom_name: \"\",\r\n      item_name: \"\",\r\n      itme_id: \"\",\r\n      //检验规则\r\n      rules: {\r\n        bomLevel: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"bom.errorMessage.bomLevelMessage\"),\r\n            trigger: \"blur\"\r\n          },\r\n          { validator: isNum, trigger: \"input\" }\r\n        ],\r\n        cnName: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"bom.errorMessage.cnNameMessage\"),\r\n            trigger: \"blur\"\r\n          },\r\n          {\r\n            validator: checkINChinese,\r\n            message: this.$t(\"bom.errorMessage.cnNameMessage1\"),\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"bom.errorMessage.nameMessage\"),\r\n            trigger: \"blur\"\r\n          },\r\n          {\r\n            validator: isNumOrEnglish,\r\n            message: this.$t(\"bom.errorMessage.nameMessage1\"),\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        source: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"bom.errorMessage.sourceMessage\"),\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n      //检验规则\r\n      rules_item: {\r\n        cnName: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"bomItem.errorMessage.cnNameMessage\"),\r\n            trigger: \"blur\"\r\n          },\r\n          {\r\n            validator: checkINChinese,\r\n            message: this.$t(\"bomItem.errorMessage.cnNameMessage1\"),\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: this.$t(\"bomItem.errorMessage.nameMessage\"),\r\n            trigger: \"blur\"\r\n          },\r\n          {\r\n            validator: isNumOrEnglish,\r\n            message: this.$t(\"bomItem.errorMessage.nameMessage1\"),\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        commandType:[{\r\n            required: true,\r\n            message: this.$t(\"bomItem.errorMessage.commandTypeMessage\"),\r\n            trigger: \"change\"\r\n          }]\r\n\r\n      },\r\n      dialogVisible: false, //dialog显示还是隐藏\r\n      dialogVisible_item: false, //dialog显示还是隐藏\r\n      dialogVisible_msg: false,\r\n      dialogStatus: \"\", //表单状态是新增还是修改\r\n      dialogStatus_item: \"\", //表单状态是新增还是修改\r\n      titleMap: {\r\n        update: this.$t(\"bom.update\"),\r\n        create: this.$t(\"bom.add\")\r\n      },\r\n      titleMap_item: {\r\n        update: this.$t(\"bomItem.update\"),\r\n        create: this.$t(\"bomItem.add\")\r\n      },\r\n      bom: {},\r\n      fatherBomOptions: [],\r\n      fatherItemOptions: [],\r\n      localItemOptions: [],\r\n      bomData: {\r\n        bomList: [],\r\n        itemList: []\r\n      },\r\n      businessArray: [],\r\n      isHierarchicalArray: [],\r\n      isBaseArray: [],\r\n      preCheckArray: [],\r\n      validArray: []\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"ldcodes\"])\r\n  },\r\n  components: {\r\n    ruleMessageInfoBom\r\n  },\r\n  created() {\r\n    let ldcodes = this.$store.state.ldcode.ldcodes;\r\n    this.businessArray = ldcodes[\"ibrmsbusiness\"];\r\n    this.validArray = ldcodes[\"ibrmsvalid\"];\r\n    this.isHierarchicalArray = ldcodes[\"ibrmsishierarchical\"];\r\n    this.isBaseArray = ldcodes[\"ibrmsisbase\"];\r\n    this.preCheckArray = ldcodes[\"ibrmsPreCheck\"];\r\n    this.initFatherBomAndFatherBomItemLists();\r\n  },\r\n  methods: {\r\n    initFatherBomAndFatherBomItemLists() {\r\n      getAllFatherBomAndFatherBomItem().then(res => {\r\n        this.fatherBomOptions = [];\r\n        this.fatherItemOptions = [];\r\n        this.localItemOptions = [];\r\n        this.bomData = res.data;\r\n        let fatherBomList = res.data.bomList;\r\n        this.form.fatherBom = this.form.fatherBom;\r\n        fatherBomList.forEach(data => {\r\n          this.fatherBomOptions.push({\r\n            value: data.id,\r\n            label: data.name + \":\" + data.cnName\r\n          });\r\n        });\r\n      });\r\n    },\r\n    /*词条预校验*/\r\n    typeRegionSelect(val) {\r\n      this.preCheckFilter = val;\r\n    },\r\n    handleSearch() {\r\n      this.radio =\"\";\r\n      this.bomItemState = false;\r\n      this.$refs.page.reload();\r\n    },\r\n    handleSearch_item() {\r\n      this.$refs.page_item.reload();\r\n    },\r\n    handleCreate() {\r\n      this.resetForm();\r\n      this.form.name = this.params.like_name;\r\n      this.form.cnName = this.params.like_cnName;\r\n      this.form.business = this.params.eq_business;\r\n      this.form.valid = this.params.eq_valid;\r\n      this.localItemOptions = [];\r\n      this.dialogStatus = \"create\";\r\n      this.dialogVisible = true;\r\n    },\r\n    handleCreate_item(row) {\r\n      this.resetForm_item();\r\n      this.form_item.bomId = row.id;\r\n      this.dialogStatus_item = \"create\";\r\n      this.dialogVisible_item = true;\r\n    },\r\n    handleUpdate(row) {\r\n\r\n      this.form = Object.assign({}, row);\r\n      //清空下拉\r\n      this.fatherItem(row.fatherBom, \"update\");\r\n      this.localItemOptions = [];\r\n      //本bomId 下的下拉值\r\n      let localItemList = this.bomData.itemList;\r\n      //父bomId 下的下拉值\r\n      localItemList.forEach(data => {\r\n        if (row.id == data.bomId) {\r\n          this.localItemOptions.push({\r\n            value: data.id,\r\n            label: data.name + \":\" + data.cnName\r\n          });\r\n        }\r\n      });\r\n      this.dialogStatus = \"update\";\r\n      this.dialogVisible = true;\r\n    },\r\n    handleUpdate_item(row) {\r\n      this.form_item = Object.assign({}, row);\r\n      this.preCheckFilter = row.commandType;\r\n      this.dialogStatus_item = \"update\";\r\n      this.dialogVisible_item = true;\r\n    },\r\n    handleDelete(row) {\r\n      this.$confirm(this.$t(\"bom.deleteInfo\") + \"?\", this.$t(\"bom.prompt\"), {\r\n        confirmButtonText: this.$t(\"bom.confirm\"),\r\n        cancelButtonText: this.$t(\"bom.cancel\"),\r\n        type: \"warning\"\r\n      }).then(() => {\r\n        deleteBom(row.id,row.name).then(response => {\r\n        var result = response.data;\r\n        if(result.type = \"success\"){\r\n            var keyId = row.name;\r\n            var param = {   obj:row,\r\n                              type:'BOM',\r\n                              item:'delete'\r\n                              };\r\n            var rule_param = {\r\n                              key:keyId,\r\n                              type:\"BOM\"\r\n                              };\r\n\r\n            this.$store.dispatch(\"ruleCache/updateRuleCache\",param);\r\n            this.$store.dispatch(\"ruleMessage/deleteRuleMessage\",rule_param);\r\n            this.handleSearch();\r\n            this.handleSearch_item();\r\n            if(result.isUsed){\r\n                this.notifySuccess(this.$t(\"bom.bomMessage1\"));\r\n            }else{\r\n                this.notifySuccess(response.message);\r\n            }\r\n            this.dialogVisible = false;\r\n        }\r\n\r\n        });\r\n      });\r\n    },\r\n    handleDelete_item(row) {\r\n      deleteBomItem(row.id,this.bom_name,row.name).then(response => {\r\n        var result = response.data;\r\n        if(result.type = \"success\"){\r\n            var keyId = this.bom_name + \"_\" + row.name;\r\n            var param = {\r\n                          obj:row,\r\n                          type:'BOMITEM',\r\n                          item:'delete'\r\n                        };\r\n            var rule_param = {\r\n                              key:keyId,\r\n                              type:\"BOMITEM\"\r\n                              };\r\n            this.$store.dispatch(\"ruleCache/updateRuleCache\",param);\r\n            this.$store.dispatch(\"ruleMessage/deleteRuleMessage\",rule_param);\r\n            this.handleSearch_item();\r\n            if(result.isUsed){\r\n                this.notifySuccess(this.$t(\"bomItem.bomItemMessage1\"));\r\n             }else{\r\n                this.notifySuccess(response.message);\r\n             }\r\n            this.dialogVisible_item = false;\r\n        }\r\n      });\r\n    },\r\n    handleCurrentChange_Bom(val) {\r\n      if(val != null){\r\n          this.bom = val;\r\n          this.params_item.eq_bomId = this.bom.id;\r\n          this.radio = this.bom.id;\r\n          this.bom_name = this.bom.name;\r\n          this.bomItemState = true;\r\n          this.$refs.page_item.reload();\r\n\r\n      }\r\n\r\n    },\r\n    handleCurrentChange_item(val) {\r\n       if(val != null){\r\n          this.item_name = val.name;\r\n          this.itme_id = val.id;\r\n          this.radio_item = val.id;\r\n       }\r\n    },\r\n    submitForm() {\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n           //校验bom是否存在\r\n          let back;\r\n          if (this.form.id) {\r\n            back = updateBom(this.form);\r\n          } else {\r\n\r\n            back = addBom(this.form);\r\n          }\r\n          back.then(response => {\r\n            var result = response.data;\r\n            console.log(\"result\",result);\r\n            if(result.type == \"success\"){\r\n                var keyId =this.form.name;\r\n                var param = {\r\n                              obj:this.form,\r\n                              type:'BOM',\r\n                              item:''\r\n                              };\r\n                var rule_param = {\r\n                                  key:keyId,\r\n                                  type:\"BOM\"\r\n                                };\r\n                this.$store.dispatch(\"ruleCache/updateRuleCache\",param);\r\n                this.$store.dispatch(\"ruleMessage/updateRuleMessage\",rule_param);\r\n                this.handleSearch();\r\n                this.initFatherBomAndFatherBomItemLists();\r\n                this.dialogVisible = false;\r\n                if(result.isUsed){\r\n                      this.notifySuccess(this.$t(\"bom.bomMessage1\"));\r\n                }else{\r\n                      this.notifySuccess(response.message);\r\n                }\r\n            }else{\r\n                this.$message.error(this.$t(\"bom.bomMessage\"));\r\n\r\n            }\r\n\r\n          });\r\n        }\r\n      });\r\n    },\r\n    submitForm_item() {\r\n       this.$refs.dataForm_item.validate(valid => {\r\n        if (valid) {\r\n            let back;\r\n            if(this.form_item.id) {\r\n              back = updateBomItem(this.form_item);\r\n            }else {\r\n            if(Object.keys(this.bom).length != 0) {\r\n                back = addBomItem(this.form_item);\r\n              }\r\n            }\r\n            back.then(response => {\r\n             var result =  response.data;\r\n              if(result.type == \"success\"){\r\n                var keyId = this.bom_name + \"_\" + this.form_item.name;\r\n                var param = {\r\n                            obj:this.form_item,\r\n                            type:'BOMITEM',\r\n                            item:''\r\n                          };\r\n                var rule_param = {\r\n                            key:keyId,\r\n                            type:\"BOMITEM\"\r\n                            };\r\n\r\n                this.$store.dispatch(\"ruleCache/updateRuleCache\",param);\r\n                this.$store.dispatch(\"ruleMessage/updateRuleMessage\",rule_param);\r\n                this.handleSearch_item();\r\n                this.initFatherBomAndFatherBomItemLists();\r\n               if(result.isUsed){\r\n                   this.notifySuccess(this.$t(\"bomItem.bomItemMessage1\"));\r\n                }else{\r\n                   this.notifySuccess(response.message);\r\n                }\r\n                this.dialogVisible_item = false;\r\n              }else{\r\n                this.$message.error(this.$t(\"bomItem.bomItemMessage\"));\r\n              }\r\n\r\n            });\r\n          }\r\n        });\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n        id: \"\", //主键ID\r\n        name: \"\",\r\n        cnName: \"\",\r\n        fatherBom: \"\",\r\n        fatherItem: \"\",\r\n        valid: \"1\",\r\n        source: \"\"\r\n      };\r\n    },\r\n    resetForm_item() {\r\n      this.form_item = {\r\n        //表单数据与后端实体类对应\r\n        name: \"\",\r\n        bomName: \"\",\r\n        valid: \"1\",\r\n        bomId: \"\",\r\n        isHierarchical: \"0\",\r\n        isBase: \"0\",\r\n        description:\"\",\r\n        commandType:\"\"\r\n      };\r\n    },\r\n    bom_ruleMessage(row) {\r\n\r\n      if(row){\r\n          this.keyId = row.name;\r\n          this.msgType = \"BOM\";\r\n          this.dialogVisible_msg = true;\r\n      }\r\n\r\n    },\r\n    bomItem_ruleMessage(row) {\r\n       if(row){\r\n          this.keyId = this.bom_name + \"_\" + row.name;\r\n          this.msgType = \"BOMITEM\";\r\n          this.dialogVisible_msg = true;\r\n          }\r\n    },\r\n    chooseOne(row) {\r\n      this.radio = row.id;\r\n    },\r\n    chooseOne_Item(row) {\r\n      this.radio_Item = row.id;\r\n    },\r\n    fatherItem(fatherId, type) {\r\n      this.fatherItemOptions = [];\r\n      if (type == \"select\") {\r\n        this.form.fatherItem = \"\";\r\n      }\r\n      let fatherItemList = this.bomData.itemList;\r\n      //本bomId 下的下拉值\r\n      for (var i = 0; i < fatherItemList.length; i++) {\r\n        let data = fatherItemList[i];\r\n        if (fatherId == data.bomId) {\r\n          this.fatherItemOptions.push({\r\n            value: data.id,\r\n            label: data.name + \":\" + data.cnName\r\n          });\r\n        }\r\n      }\r\n    },\r\n    fatherItemChange(row, column) {\r\n      this.$forceUpdate();\r\n    },\r\n    fatherBomFormat(row, column) {\r\n      let bomId = row.fatherBom;\r\n      let stateValue = \"\";\r\n      this.bomData.bomList.forEach((st, index) => {\r\n        if (st.id === bomId) {\r\n          stateValue = st.name;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    localItemFormat(row, column) {\r\n      let itemId = row.localItem;\r\n      let stateValue = \"\";\r\n      this.bomData.itemList.forEach((st, index) => {\r\n        if (st.id === itemId) {\r\n          stateValue = st.name;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    fatherItemFormat(row, column) {\r\n      let itemId = row.fatherItem;\r\n      let stateValue = \"\";\r\n      this.bomData.itemList.forEach((st, index) => {\r\n        if (st.id === itemId) {\r\n          stateValue = st.name;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    businessFormat(row, column) {\r\n      let code = row.business;\r\n      let stateValue = \"\";\r\n      this.businessArray.forEach((st, index) => {\r\n        if (st.code === code) {\r\n          stateValue = st.codename;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    validFormat(row, column) {\r\n      let code = row.valid;\r\n      let stateValue = \"\";\r\n      this.validArray.forEach((st, index) => {\r\n        if (st.code === code) {\r\n          stateValue = st.codename;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    isHierarchicalFormat(row, column) {\r\n      let code = row.isHierarchical;\r\n      let stateValue = \"\";\r\n      this.isHierarchicalArray.forEach((st, index) => {\r\n        if (st.code === code) {\r\n          stateValue = st.codename;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    isBaseFormat(row, column) {\r\n      let code = row.isBase;\r\n      let stateValue = \"\";\r\n      this.isBaseArray.forEach((st, index) => {\r\n        if (st.code === code) {\r\n          stateValue = st.codename;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    commandTypeFormat(row, column) {\r\n      ;\r\n      let code = row.commandType;\r\n      let stateValue = \"\";\r\n      this.preCheckArray.forEach((st, index) => {\r\n        if (st.code === code) {\r\n          stateValue = st.codename;\r\n        }\r\n      });\r\n      return stateValue;\r\n    },\r\n    preCheckFormat(row, column) {\r\n      ;\r\n      let code = row.preCheck;\r\n      let stateValue = \"\";\r\n      let name = \"\";\r\n      if (typeof code != \"undefined\" && code != \"\" && code != null) {\r\n        switch (code.substring(0, 1)) {\r\n          case \"D\":\r\n            name = \"Date\";\r\n            break;\r\n          case \"N\":\r\n            name = \"Number\";\r\n            break;\r\n          case \"S\":\r\n            name = \"String\";\r\n            break;\r\n        }\r\n        let preCheckArray = this.$store.state.ldcode.ldcodes[\r\n          \"ibrmsPreCheck.\" + name\r\n        ];\r\n        preCheckArray.forEach((st, index) => {\r\n          if (st.code === code) {\r\n            stateValue = st.codename;\r\n          }\r\n        });\r\n      }\r\n\r\n      return stateValue;\r\n    },\r\n    goBack() {\r\n      this.dialogVisible = false;\r\n    },\r\n    goBackItem() {\r\n      this.dialogVisible_item = false;\r\n    },\r\n    goBackInfo_msg() {\r\n      this.dialogVisible_msg = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}