{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-framework-def\\pp-info-def\\pdpppdprogsInfo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-framework-def\\pp-info-def\\pdpppdprogsInfo\\index.vue","mtime":1609847107001},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2ZpbmRBbGxQcmVtaXVtQnlQcm9kdWN0SWR9IGZyb20gIkAvYXBpL2Jhc2ljaW5mby9wZHRlbXBwZHByZW0iCmltcG9ydCB7ZmluZEFsbEJlbmVmaXRCeVByb2R1Y3RJZH0gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL3BkdGVtcHBkYm5mdCIKaW1wb3J0IHthZGRQZHRlbXBQZFByb2csIGRlbGV0ZVBkdGVtcFBkUHJvZywgdXBkYXRlUGR0ZW1wUGRQcm9nfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcGR0ZW1wcGRwcm9nIgppbXBvcnQge2dldFBkQ2xzTGFiSW5mb30gZnJvbSAiQC9hcGkvYmFzaWNpbmZvL1Byb2R1Y3RBdHRyaWJ1dGVEZWZpbml0aW9uIgppbXBvcnQgcHJlbWl1bSBmcm9tICJAL3ZpZXdzL3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1mcmFtZXdvcmstZGVmL3BkLXN0cnVjdHVyZS1kZWYvcGF5bWVudC1kZWYvaW5kZXgiCmltcG9ydCBjbG1CbmZ0IGZyb20gIkAvdmlld3MvcHJvZHVjdC1kZWZpbml0aW9uL3BkLWZyYW1ld29yay1kZWYvcGQtc3RydWN0dXJlLWRlZi9ndWFyYW50ZWUtZGVmL2dlbmVyYWwtbWVkaWNhbC9pbmRleCIKaW1wb3J0IHNydkJuZnQgZnJvbSAiQC92aWV3cy9iYXNpY2luZm8vcGR0ZW1wcGRzcnZsYm5mdC9pbmRleCIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUHJvZ3JhbW1lRGVmaW5pdGlvbicsCiAgY29tcG9uZW50czoge3ByZW1pdW0sIGNsbUJuZnQsIHNydkJuZnR9LAogIGZpbHRlcnM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93UGFnZUZsYWc6IDAsCiAgICAgIHNlbGVjdGVkUHJlbWl1bUNvZGU6ICcnLAogICAgICBzZWxlY3RlZENsbUJuZnQ6IHt9LAogICAgICBzZWxlY3RlZFNydkJuZnQ6IHt9LAogICAgICAvLyDkuqflk4Hkv6Hmga8KICAgICAgcHJvZHVjdDogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgcGRDb2RlOiAnJywKICAgICAgICBwZEVkaXRpb246ICcnLAogICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwKICAgICAgICBwZFNhbGVjaG5sOiAnJywKICAgICAgICBwZE5hbWU6ICcnLAogICAgICAgIHBkU2hvcnRuYW1lOiAnJywKICAgICAgICBwZEVuTmFtZTogJycsCiAgICAgICAgcGRTaG9ydEVuTmFtZTogJycsCiAgICAgICAgb3BlcmF0b3I6ICcnLAogICAgICAgIHBkQXBwbERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBwZFByb2Nlc3NJZDogdW5kZWZpbmVkLAogICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICB1cGRhdGVUaW1lOiB1bmRlZmluZWQsCiAgICAgIH0sCiAgICAgIHByb2R1Y3RfZXh0cmE6IHsKICAgICAgICB0eXBlUmVnaW9uOiAnJwogICAgICB9LAogICAgICAvLyDmlrnmoYjooajmoLwKICAgICAgdGFibGVEYXRhX3Byb2dyYW1tZTogW10sCiAgICAgIHBhcmFtc19wcm9ncmFtbWU6IHsKICAgICAgICBwcm9kdWN0SWQ6IHVuZGVmaW5lZCwKICAgICAgICBsaWtlX3BkUHJvZ05hbWU6ICcnLAogICAgICAgIGVxX3BkUHJvZ0NvZGU6ICcnCiAgICAgIH0sCiAgICAgIHNlbGVjdGVkUHJvZ3JhbW1lOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBwcm9ncmFtbWVDb2RlOiAnJywKICAgICAgICBwcm9ncmFtbWVOYW1lOiAnJywKICAgICAgICBwcmVtaXVtQ29kZTogJycsCiAgICAgICAgcHJlbWl1bU5hbWU6ICcnLAogICAgICAgIGJlbmVmaXRDb2RlOiAnJywKICAgICAgICBiZW5lZml0TmFtZTogJycsCiAgICAgICAgYmVuZWZpdFR5cGU6ICcnLAogICAgICAgIHByb2dyYW1tZToge30sCiAgICAgICAgcHJlbWl1bToge30KICAgICAgfSwKICAgICAgLy8g5pa55qGI57uE5ZCI6KGo5qC8CiAgICAgIHRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQ6IFtdLAogICAgICB0YWJsZURhdGFfY29tYmluYXRpb25fYmVmb3JlX2FkZDogW10sCiAgICAgIHRhYmxlRGF0YV9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZDogW10sCiAgICAgIG9yZGVySW5kZXhBcnJfcHJvZ3JhbW1lOiBbXSwKICAgICAgb3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGQ6IFtdLAogICAgICBvcmRlckluZGV4QXJyX2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkOiBbXSwKICAgICAgcHJlbWl1bUxpc3Q6IFtdLAogICAgICBzdXJ2aXZhbExpc3Q6IFtdLAogICAgICBjbGFpbUxpc3Q6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiB7CiAgICAgICAgcHJlbWl1bTogZmFsc2UsCiAgICAgICAgY2xhaW1CZW5lZml0OiBmYWxzZSwKICAgICAgICBzdXJ2aXZhbEJlbmVmaXQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIC8vIOaWueahiOWvueixoQogICAgICBmb3JtX3Byb2dyYW1tZTogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgcGRJbmZvSWQ6IHVuZGVmaW5lZCwKICAgICAgICBwZFZlcklkOiB1bmRlZmluZWQsCiAgICAgICAgcGRDb2RlOiAnJywKICAgICAgICBwZFByb2dDb2RlOiAnJywKICAgICAgICBwZFByb2dOYW1lOiAnJywKICAgICAgICBwZE9wdEZsYWc6ICdOJywKICAgICAgICBwZEluc3VQZXJpb2Q6IHVuZGVmaW5lZCwKICAgICAgICBwZEluc3VQZXJpb2RVbml0OiAnJywKICAgICAgICBwZEluc3VQZXJpb2RDYWxNb2RlOiAnJywKICAgICAgICBwZEluc3VFbmRDYWxSdWxlOiAnMCcsCiAgICAgICAgcGRBbW50Q2FsUnVsZTogJycsCiAgICAgICAgcGRBZGRBbW50RmxhZzogJ1knLAogICAgICAgIHBkUGF5RW5kQ2FsTW9kZTogJycsCiAgICAgICAgcGRBbW50U2FsZVR5cGU6ICcnLAogICAgICAgIG9wZXJhdG9yOiAnJywKICAgICAgICBjcmVhdGVUaW1lOiAnJywKICAgICAgICB1cGRhdGVUaW1lOiAnJwogICAgICB9LAogICAgICAvLyDmlrnmoYjnu4TlkIjlr7nosaEKICAgICAgZm9ybV9jb21iaW5hdGlvbjogewogICAgICAgIHByZW1pdW06IHVuZGVmaW5lZCwKICAgICAgICBzdXJ2aXZhbEZsYWc6IGZhbHNlLAogICAgICAgIGNsYWltRmxhZzogZmFsc2UsCiAgICAgICAgc3Vydml2YWw6IFtdLAogICAgICAgIGNsYWltOiBbXQogICAgICB9LAogICAgICAvLyDmlrnmoYjnu4TlkIjmlrDlop7lr7nosaEKICAgICAgZm9ybV9jb21iaW5hdGlvbl9hZGQ6IHsKICAgICAgICAvLyBQZHRlbXBQZEJuZnQg5a6e5L2T57G75bGe5oCnCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBwZEJuZnRDb2RlOiAnJywKICAgICAgICBwZEJuZnROYW1lOiAnJywKICAgICAgICBwZEJuZnRUeXBlOiAnJywKICAgICAgICBwZEFkZEFtbnRGbGFnOiAnJywKICAgICAgICBwZEJuZnRDYWxNb2RlOiAnJywKICAgICAgICBwZENhbGNJZDogdW5kZWZpbmVkLAogICAgICAgIHBkVXJnZVBheUZsYWc6ICcnLAogICAgICAgIGNyZWF0ZVRpbWU6ICcnLAogICAgICAgIHVwZGF0ZVRpbWU6ICcnLAogICAgICAgIG9wZXJhdG9yOiAnJywKICAgICAgICAvLyB2b+WxnuaApwogICAgICAgIHByZW1pdW1JZDogdW5kZWZpbmVkLAogICAgICAgIHByZW1pdW1Db2RlOiAnJywKICAgICAgICBwcmVtaXVtTmFtZTogJycsCiAgICAgICAgcGRBZGRBbW50UHJvZ0ZsYWc6ICcnCiAgICAgIH0sCiAgICAgIGRpYWxvZ1Zpc2libGVfZHVwbGljYXRlZDogZmFsc2UsCiAgICAgIC8vIOWIneWni+WMluagh+ivhgogICAgICBpbml0RmxhZzogewogICAgICAgIHByZW1pdW06IGZhbHNlLAogICAgICAgIGJlbmVmaXQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIHBhZ2VGbGFnOiB7CiAgICAgICAgcHJlbWl1bTogZmFsc2UsCiAgICAgICAgc3Vydml2YWw6IGZhbHNlLAogICAgICAgIGNsYWltOiBmYWxzZQogICAgICB9LAogICAgICBpbmRldGVybWluYXRlOiB7CiAgICAgICAgc3Vydml2YWw6IGZhbHNlLAogICAgICAgIGNsYWltOiBmYWxzZQogICAgICB9LAogICAgICAvLyDooajljZXpqozor4EKICAgICAgcnVsZXM6IHsKICAgICAgICBwZFByb2dOYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX2VudGVyJykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkUHJvZ05hbWUnKSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBkQWRkQW1udEZsYWc6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkQWRkQW1udEZsYWcnKSwKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgcGRPcHRGbGFnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX3NlbGVjdCcpICsgdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5wZE9wdEZsYWcnKSwKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgcGRJbnN1UGVyaW9kQ2FsTW9kZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRJbnN1UGVyaW9kQ2FsTW9kZScpLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBwZEluc3VQZXJpb2Q6IFt7CiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UucGxlYXNlX2VudGVyJykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkSW5zdVBlcmlvZCcpLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGRJbnN1UGVyaW9kVW5pdDogW3sKICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkSW5zdVBlcmlvZFVuaXQnKSwKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgcGRJbnN1RW5kQ2FsUnVsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRJbnN1RW5kQ2FsUnVsZScpLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBwZEFtbnRTYWxlVHlwZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRBbW50U2FsZVR5cGUnKSwKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgcGRBbW50Q2FsUnVsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3QnKSArIHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUucGRBbW50Q2FsUnVsZScpLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBwZFBheUVuZENhbE1vZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2Vfc2VsZWN0JykgKyB0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLnBkUGF5RW5kQ2FsTW9kZScpLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XQogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewoKICAgICdmb3JtX2NvbWJpbmF0aW9uLmNsYWltRmxhZycodmFsKSB7CiAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZS5jbGFpbSA9IGZhbHNlCiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uY2xhaW0gPSBbXQogICAgICAgIGZvciAoY29uc3QgY2xhaW0gb2YgdGhpcy5jbGFpbUxpc3QpIHsKICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5jbGFpbS5wdXNoKGNsYWltKQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uY2xhaW0gPSBbXQogICAgICB9CiAgICB9LAogICAgJ2Zvcm1fY29tYmluYXRpb24uY2xhaW0nKHZhbCkgewogICAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5jbGFpbUZsYWcgPSBmYWxzZQogICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZS5jbGFpbSA9IGZhbHNlCiAgICAgIH0gZWxzZSBpZiAodmFsLmxlbmd0aCA8IHRoaXMuY2xhaW1MaXN0Lmxlbmd0aCkgewogICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZS5jbGFpbSA9IHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuY2xhaW0gPSBmYWxzZQogICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5jbGFpbUZsYWcgPSB0cnVlCiAgICAgIH0KICAgIH0sCiAgICAnZm9ybV9jb21iaW5hdGlvbi5zdXJ2aXZhbEZsYWcnKHZhbCkgewogICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSBmYWxzZQogICAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsID0gW10KICAgICAgICBmb3IgKGNvbnN0IHN1cnZpdmFsIG9mIHRoaXMuc3Vydml2YWxMaXN0KSB7CiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWwucHVzaChzdXJ2aXZhbCkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsID0gW10KICAgICAgfQogICAgfSwKICAgICdmb3JtX2NvbWJpbmF0aW9uLnN1cnZpdmFsJyh2YWwpIHsKICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWxGbGFnID0gZmFsc2UKICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSBmYWxzZQogICAgICB9IGVsc2UgaWYgKHZhbC5sZW5ndGggPCB0aGlzLnN1cnZpdmFsTGlzdC5sZW5ndGgpIHsKICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlLnN1cnZpdmFsID0gZmFsc2UKICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWxGbGFnID0gdHJ1ZQogICAgICB9CiAgICB9CiAgfQogICwKICBjb21wdXRlZDoge30KICAsCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0UHJvZHVjdEluZm8oKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ3VycmVudENoYW5nZShyYXcpIHsKICAgICAgdGhpcy4kZW1pdCgnbG9jYXRpb25tYXAnLCByYXcpOwogICAgfQogICAgLAogICAgZ2V0UHJvZHVjdEluZm8oKSB7CiAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImZvcm1fcHJvZ3JhbW1lIikpOwogICAgICB0aGlzLnByb2R1Y3QgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInByb2R1Y3QiKSk7CiAgICAgIHRoaXMudGFibGVEYXRhX3Byb2dyYW1tZSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidGFibGVEYXRhX3Byb2dyYW1tZSIpKTsKICAgICAgdGhpcy5wYXJhbXNfcHJvZ3JhbW1lLnByb2R1Y3RJZCA9IHRoaXMucHJvZHVjdC5pZAogICAgICB0aGlzLmdldFByZW1pdW1JbmZvKCkKICAgICAgdGhpcy5nZXRCZW5lZml0SW5mbygpCiAgICAgIHRoaXMuaW5pdF90eXBlUmVnaW9uKCkKCiAgICB9CiAgICAsCiAgICBnZXRQcmVtaXVtSW5mbygpIHsKICAgICAgZmluZEFsbFByZW1pdW1CeVByb2R1Y3RJZCh0aGlzLnByb2R1Y3QuaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGZvciAoY29uc3QgcHJlbWl1bSBvZiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLnByZW1pdW1MaXN0LnB1c2gocHJlbWl1bSkKICAgICAgICB9CiAgICAgICAgdGhpcy5pbml0RmxhZy5wcmVtaXVtID0gdHJ1ZQogICAgICAgIGlmICh0aGlzLmluaXRGbGFnLnByZW1pdW0gPT09IHRydWUgJiYgdGhpcy5pbml0RmxhZy5iZW5lZml0ID09PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmF1dG9CdWlsZFByb2dyYW1tZSgpCiAgICAgICAgfQogICAgICB9KQogICAgfQogICAgLAogICAgZ2V0QmVuZWZpdEluZm8oKSB7CiAgICAgIGZpbmRBbGxCZW5lZml0QnlQcm9kdWN0SWQodGhpcy5wcm9kdWN0LmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBsZXQgbWFwID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMuc3Vydml2YWxMaXN0ID0gbWFwLnN1cnZpdmFsCiAgICAgICAgdGhpcy5jbGFpbUxpc3QgPSBtYXAuY2xhaW0KICAgICAgICB0aGlzLmluaXRGbGFnLmJlbmVmaXQgPSB0cnVlCiAgICAgICAgaWYgKHRoaXMuaW5pdEZsYWcucHJlbWl1bSA9PT0gdHJ1ZSAmJiB0aGlzLmluaXRGbGFnLmJlbmVmaXQgPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuYXV0b0J1aWxkUHJvZ3JhbW1lKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgICAsCiAgICAvLyDojrflj5bpmannp43nsbvlnovvvIjkuqflk4HnsbvlnovvvIkKICAgIGluaXRfdHlwZVJlZ2lvbigpIHsKICAgICAgY29uc3QgcGFyYW1zTWFwID0gewogICAgICAgIHBkX2luZm9faWQ6IHRoaXMucHJvZHVjdC5pZCwKICAgICAgICBwZF9jbHNfdHlwZTogJzEnCiAgICAgIH0KICAgICAgZ2V0UGRDbHNMYWJJbmZvKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbXNNYXApKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCBwZFRlbXBDbHNMYWJMaXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICAgIGNvbnN0IHBkQ2xzMUFycmF5ID0gdGhpcy5fLm1hcChwZFRlbXBDbHNMYWJMaXN0LCAncGRDbHMxJykKICAgICAgICBpZiAocGRDbHMxQXJyYXkubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5wcm9kdWN0X2V4dHJhLnR5cGVSZWdpb24gPSBwZENsczFBcnJheVswXQogICAgICAgIH0KICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lQ2hhbmdlZCgpOwogICAgICB9KQogICAgfQogICAgLAogICAgYXV0b0J1aWxkUHJvZ3JhbW1lKCkgewogICAgICBpZiAodGhpcy5wcmVtaXVtTGlzdC5sZW5ndGggIT09IDEgfHwgdGhpcy5zdXJ2aXZhbExpc3QubGVuZ3RoID09PSAwICYmIHRoaXMuY2xhaW1MaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMucGFnZUZsYWcucHJlbWl1bSA9IHRydWUKICAgICAgdGhpcy5wYWdlRmxhZy5zdXJ2aXZhbCA9IHRydWUKICAgICAgdGhpcy5wYWdlRmxhZy5jbGFpbSA9IHRydWUKICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnByZW1pdW0gPSB0aGlzLnByZW1pdW1MaXN0WzBdCiAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5jbGFpbSA9IHRoaXMuY2xhaW1MaXN0CiAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5zdXJ2aXZhbCA9IHRoaXMuc3Vydml2YWxMaXN0CiAgICAgIHRoaXMuaGFuZGxlQWRkUHJvZ3JhbW1lKHRoaXMucHJlbWl1bUxpc3RbMF0sIHRoaXMuc3Vydml2YWxMaXN0LCB0aGlzLmNsYWltTGlzdCwgZmFsc2UpCiAgICB9CiAgICAsCiAgICBoYW5kbGVTZWFyY2goKSB7CiAgICAgIHRoaXMuJHJlZnMucGFnZV9wcm9ncmFtbWUucmVsb2FkKCkKICAgIH0KICAgICwKICAgIHJvd0NsaWNrKHJvdywgY29sdW1uLCBldmVudCkgewogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7CiAgICAgICAgaWYgKHJvdy5pZCA9PT0gdGhpcy5zZWxlY3RlZFByb2dyYW1tZS5pZCkgewogICAgICAgICAgdGhpcy5jYW5jZWxVcGRhdGVQcm9ncmFtbWUoKQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLAogICAgc2VsZWN0ZWRQcm9ncmFtbWVDaGFuZ2VkKCkgewogICAgICB0aGlzLnJlc2V0Rm9ybVByb2dyYW1tZSgpCiAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb24oKQogICAgICB0aGlzLnJlc2V0VGFibGVEYXRhQ29tYmluYXRpb25BZGQoKQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZSAgPSB0aGlzLnRhYmxlRGF0YV9wcm9ncmFtbWVbMF0ucHJvZ3JhbW1lOwogICAgICAgIHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUgPSB0aGlzLnRhYmxlRGF0YV9wcm9ncmFtbWVbMF07CiAgICAgICAgLy8g5bim5YWl57y06LS55L+h5oGvCiAgICAgICAgdGhpcy5wYWdlRmxhZy5wcmVtaXVtID0gdHJ1ZQogICAgICAgIGxldCBleGlzdGVkUHJlbWl1bSA9IHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUucHJlbWl1bQogICAgICAgIGZvciAoY29uc3QgcHJlbWl1bSBvZiB0aGlzLnByZW1pdW1MaXN0KSB7CiAgICAgICAgICBpZiAocHJlbWl1bS5pZCA9PT0gZXhpc3RlZFByZW1pdW0uaWQpIHsKICAgICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uLnByZW1pdW0gPSBwcmVtaXVtCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIOW4puWFpeS/nemanOe7hOWQiOS/oeaBrwogICAgICAgIGxldCBleGlzdGVkU3Vydml2YWxMaXN0ID0gW10KICAgICAgICBsZXQgZXhpc3RlZENsYWltTGlzdCA9IFtdCiAgICAgICAgZm9yIChjb25zdCBiZW5lZml0Vm8gb2YgdGhpcy50YWJsZURhdGFfcHJvZ3JhbW1lKSB7CiAgICAgICAgICBpZiAoYmVuZWZpdFZvLnByb2dyYW1tZUNvZGUgPT09IHRoaXMuZm9ybV9wcm9ncmFtbWUucGRQcm9nQ29kZSkgewogICAgICAgICAgICBzd2l0Y2ggKGJlbmVmaXRWby5iZW5lZml0VHlwZSkgewogICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgIGNhc2UgIk0iOgogICAgICAgICAgICAgICAgZXhpc3RlZFN1cnZpdmFsTGlzdC5wdXNoKGJlbmVmaXRWbykKICAgICAgICAgICAgICAgIHRoaXMucGFnZUZsYWcuc3Vydml2YWwgPSB0cnVlCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgZXhpc3RlZENsYWltTGlzdC5wdXNoKGJlbmVmaXRWbykKICAgICAgICAgICAgICAgIHRoaXMucGFnZUZsYWcuY2xhaW0gPSB0cnVlCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgZXhpc3RlZFN1cnZpdmFsIG9mIGV4aXN0ZWRTdXJ2aXZhbExpc3QpIHsKICAgICAgICAgIGZvciAoY29uc3Qgc3Vydml2YWwgb2YgdGhpcy5zdXJ2aXZhbExpc3QpIHsKICAgICAgICAgICAgaWYgKHN1cnZpdmFsLmlkID09PSBleGlzdGVkU3Vydml2YWwuaWQpIHsKICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24uc3Vydml2YWwucHVzaChzdXJ2aXZhbCkKICAgICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uQWRkKCkKICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQsIHN1cnZpdmFsKQogICAgICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQucHJlbWl1bUlkID0gZXhpc3RlZFByZW1pdW0uaWQKICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1Db2RlID0gZXhpc3RlZFN1cnZpdmFsLnByZW1pdW1Db2RlCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZC5wcmVtaXVtTmFtZSA9IGV4aXN0ZWRTdXJ2aXZhbC5wcmVtaXVtTmFtZQogICAgICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQucGRBZGRBbW50UHJvZ0ZsYWcgPSBleGlzdGVkU3Vydml2YWwucGRBZGRBbW50UHJvZ0ZsYWcKICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQucHVzaCh0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkKQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChjb25zdCBleGlzdGVkQ2xhaW0gb2YgZXhpc3RlZENsYWltTGlzdCkgewogICAgICAgICAgZm9yIChjb25zdCBjbGFpbSBvZiB0aGlzLmNsYWltTGlzdCkgewogICAgICAgICAgICBpZiAoY2xhaW0uaWQgPT09IGV4aXN0ZWRDbGFpbS5pZCkgewogICAgICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbi5jbGFpbS5wdXNoKGNsYWltKQogICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb25BZGQoKQogICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZCwgY2xhaW0pCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZC5wcmVtaXVtSWQgPSBleGlzdGVkUHJlbWl1bS5pZAogICAgICAgICAgICAgIHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQucHJlbWl1bUNvZGUgPSBleGlzdGVkQ2xhaW0ucHJlbWl1bUNvZGUKICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1OYW1lID0gZXhpc3RlZENsYWltLnByZW1pdW1OYW1lCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZC5wZEFkZEFtbnRQcm9nRmxhZyA9IGV4aXN0ZWRDbGFpbS5wZEFkZEFtbnRQcm9nRmxhZwogICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZC5wdXNoKHRoaXMuZm9ybV9jb21iaW5hdGlvbl9hZGQpCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmdldE9yZGVyTnVtYmVyKCdjb21iaW5hdGlvbl9hZGQnKQogICAgICB9KQogICAgfQogICAgLAogICAgY2FuY2VsVXBkYXRlUHJvZ3JhbW1lKCkgewogICAgICB0aGlzLnJlc2V0U2VsZWN0ZWRQcm9ncmFtbWUoKQogICAgICB0aGlzLnJlc2V0Rm9ybVByb2dyYW1tZSgpCiAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb24oKQogICAgICB0aGlzLnJlc2V0VGFibGVEYXRhQ29tYmluYXRpb25BZGQoKQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkKICAgICAgfSkKICAgIH0KICAgICwKICAgIGhhbmRsZUFkZFByb2dyYW1tZShwcmVtaXVtLCBzdXJ2aXZhbCwgY2xhaW0sIHNob3dUaXBzKSB7CiAgICAgIGlmICghcHJlbWl1bSkgewogICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9zZWxlY3RfcHJlbWl1bScpKQogICAgICAgIHJldHVybgogICAgICB9IGVsc2UgaWYgKHN1cnZpdmFsLmxlbmd0aCA9PT0gMCAmJiBjbGFpbS5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2Vfc2VsZWN0X2JlbmVmaXQnKSkKICAgICAgICByZXR1cm4KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkLmxlbmd0aCA+IDAgJiYgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkWzBdLnByZW1pdW1Db2RlICE9PSBwcmVtaXVtLnBkUHJlbUNvZGUpIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLm9ubHlfb25lX3ByZW1pdW1fZm9yX29uZV9wcm9ncmFtbWUnKSkKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnJlc2V0VGFibGVEYXRhQ29tYmluYXRpb25CZWZvcmVBZGQoKQogICAgICBpZiAoc3Vydml2YWwubGVuZ3RoID4gMCkgewogICAgICAgIGZvciAoY29uc3Qgc3Vydml2YWxJdGVtIG9mIHN1cnZpdmFsKSB7CiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uQWRkKCkKICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZCwgc3Vydml2YWxJdGVtKQogICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZC5wcmVtaXVtSWQgPSBwcmVtaXVtLmlkCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1Db2RlID0gcHJlbWl1bS5wZFByZW1Db2RlCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1OYW1lID0gcHJlbWl1bS5wZFBheU5hbWUKICAgICAgICAgIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2JlZm9yZV9hZGQucHVzaCh0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkKQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY2xhaW0ubGVuZ3RoID4gMCkgewogICAgICAgIGZvciAoY29uc3QgY2xhaW1JdGVtIG9mIGNsYWltKSB7CiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uQWRkKCkKICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZCwgY2xhaW1JdGVtKQogICAgICAgICAgdGhpcy5mb3JtX2NvbWJpbmF0aW9uX2FkZC5wcmVtaXVtSWQgPSBwcmVtaXVtLmlkCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1Db2RlID0gcHJlbWl1bS5wZFByZW1Db2RlCiAgICAgICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkLnByZW1pdW1OYW1lID0gcHJlbWl1bS5wZFBheU5hbWUKICAgICAgICAgIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2JlZm9yZV9hZGQucHVzaCh0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkKQogICAgICAgIH0KICAgICAgfQogICAgICAvLyDpqozor4HmmK/lkKbmnInph43lpI3kv6Hmga8KICAgICAgdGhpcy5yZXNldFRhYmxlRGF0YUNvbWJpbmF0aW9uRHVwbGljYXRlZEFkZCgpCiAgICAgIGZvciAoY29uc3QgZm9ybV9jb21iaW5hdGlvbl9iZWZvcmVfYWRkIG9mIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2JlZm9yZV9hZGQpIHsKICAgICAgICBmb3IgKGNvbnN0IGZvcm1fY29tYmluYXRpb25fYWRkIG9mIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZCkgewogICAgICAgICAgaWYgKGZvcm1fY29tYmluYXRpb25fYmVmb3JlX2FkZC5wcmVtaXVtQ29kZSA9PT0gZm9ybV9jb21iaW5hdGlvbl9hZGQucHJlbWl1bUNvZGUgJiYgZm9ybV9jb21iaW5hdGlvbl9iZWZvcmVfYWRkLnBkQm5mdENvZGUgPT09IGZvcm1fY29tYmluYXRpb25fYWRkLnBkQm5mdENvZGUpIHsKICAgICAgICAgICAgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQucHVzaChmb3JtX2NvbWJpbmF0aW9uX2JlZm9yZV9hZGQpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5nZXRPcmRlck51bWJlcignY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQnKQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZV9kdXBsaWNhdGVkID0gdHJ1ZQogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoY29uc3QgZm9ybV9jb21iaW5hdGlvbl9iZWZvcmVfYWRkIG9mIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2JlZm9yZV9hZGQpIHsKICAgICAgICAgIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZC5wdXNoKGZvcm1fY29tYmluYXRpb25fYmVmb3JlX2FkZCkKICAgICAgICB9CiAgICAgICAgdGhpcy5nZXRPcmRlck51bWJlcignY29tYmluYXRpb25fYWRkJykKICAgICAgICBpZiAoc2hvd1RpcHMgPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuYWRkX3N1Y2Nlc3MnKSkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgICwKICAgIGhhbmRsZURlbGV0ZUNvbWJpbmF0aW9uQWRkKHJvdykgewogICAgICB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQuc3BsaWNlKHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZC5pbmRleE9mKHJvdyksIDEpCiAgICAgIHRoaXMuZ2V0T3JkZXJOdW1iZXIoJ2NvbWJpbmF0aW9uX2FkZCcpCiAgICB9CiAgICAsCiAgICBoYW5kbGVVcGRhdGVBbGwoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybV9wcm9ncmFtbWUudmFsaWRhdGUocGFzcyA9PiB7CiAgICAgICAgaWYgKHBhc3MpIHsKICAgICAgICAgIGlmICh0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnBsZWFzZV9hZGRfY29tYmluYXRpb24nKSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkSW5mb0lkID0gdGhpcy5wcm9kdWN0LmlkCiAgICAgICAgICB0aGlzLmZvcm1fcHJvZ3JhbW1lLnBkQ29kZSA9IHRoaXMucHJvZHVjdC5wZENvZGUKICAgICAgICAgIHVwZGF0ZVBkdGVtcFBkUHJvZyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEoewogICAgICAgICAgICBwcm9ncmFtbWU6IHRoaXMuZm9ybV9wcm9ncmFtbWUsCiAgICAgICAgICAgIHByZW1pdW1JZDogdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkWzBdLnByZW1pdW1JZCwKICAgICAgICAgICAgcHJlbWl1bUNvZGU6IHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZFswXS5wcmVtaXVtQ29kZSwKICAgICAgICAgICAgYmVuZWZpdExpc3Q6IHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2FkZAogICAgICAgICAgfSkpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLmNhbmNlbFVwZGF0ZVByb2dyYW1tZSgpCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoaWxkRm4nLCB0cnVlKTsKICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS51cGRhdGVfYWxsX3N1Y2Nlc3MnKSkKICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX3Byb2dyYW1tZS5yZWxvYWQoKQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLmZvcm1fdmFsaWRhdGlvbl9mYWlsZWQnKSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgICAsCiAgICBoYW5kbGVTYXZlQWxsKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm1fcHJvZ3JhbW1lLnZhbGlkYXRlKHBhc3MgPT4gewogICAgICAgIGlmIChwYXNzKSB7CiAgICAgICAgICBpZiAodGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5wbGVhc2VfYWRkX2NvbWJpbmF0aW9uJykpCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZS5wZEluZm9JZCA9IHRoaXMucHJvZHVjdC5pZAogICAgICAgICAgdGhpcy5mb3JtX3Byb2dyYW1tZS5wZFZlcklkID0gdGhpcy5wcm9kdWN0LnBkVmVySWQKICAgICAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUucGRDb2RlID0gdGhpcy5wcm9kdWN0LnBkQ29kZQogICAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICAgIHByb2dyYW1tZTogdGhpcy5mb3JtX3Byb2dyYW1tZSwKICAgICAgICAgICAgcHJlbWl1bUlkOiB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGRbMF0ucHJlbWl1bUlkLAogICAgICAgICAgICBwcmVtaXVtQ29kZTogdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkWzBdLnByZW1pdW1Db2RlLAogICAgICAgICAgICBiZW5lZml0TGlzdDogdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkLAogICAgICAgICAgICB0eXBlUmVnaW9uOiB0aGlzLnByb2R1Y3RfZXh0cmEudHlwZVJlZ2lvbiwKICAgICAgICAgICAgbmVlZENoZWNraW5nUHJlbWl1bTogdHJ1ZQogICAgICAgICAgfQogICAgICAgICAgYWRkUGR0ZW1wUGRQcm9nKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBsZXQgc3VjY2Vzc0ZsYWcgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgIGlmIChzdWNjZXNzRmxhZyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtUHJvZ3JhbW1lKCkKICAgICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uKCkKICAgICAgICAgICAgICB0aGlzLnJlc2V0VGFibGVEYXRhQ29tYmluYXRpb25BZGQoKQogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoaWxkRm4nLCB0cnVlKTsKICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnNhdmVfYWxsX3N1Y2Nlc3MnKSkKICAgICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfcHJvZ3JhbW1lLnJlbG9hZCgpCiAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLmNvbmZpcm1fb3ZlcndyaXRlX3Byb2dyYW1tZScpLCB0aGlzLiR0KCdjb25maXJtTWVzc2FnZS50aXAnKSwgewogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNvbmZpcm0nKSwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm1NZXNzYWdlLmNhbmNlbCcpLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICBwYXJhbS5uZWVkQ2hlY2tpbmdQcmVtaXVtID0gZmFsc2UKICAgICAgICAgICAgICAgIGFkZFBkdGVtcFBkUHJvZyh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1Qcm9ncmFtbWUoKQogICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybUNvbWJpbmF0aW9uKCkKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldFRhYmxlRGF0YUNvbWJpbmF0aW9uQWRkKCkKICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2hpbGRGbicsIHRydWUpOwogICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLnNhdmVfYWxsX3N1Y2Nlc3MnKSkKICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX3Byb2dyYW1tZS5yZWxvYWQoKQogICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLmNhbmNlbGVkJykKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncHJvZHVjdFByb2dyYW1tZS5tZXNzYWdlLmZvcm1fdmFsaWRhdGlvbl9mYWlsZWQnKSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgICAsCiAgICBoYW5kbGVEZWxldGVQcm9ncmFtbWUoKSB7CiAgICAgIGRlbGV0ZVBkdGVtcFBkUHJvZyh0aGlzLnNlbGVjdGVkUHJvZ3JhbW1lLnByb2dyYW1tZS5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5jYW5jZWxVcGRhdGVQcm9ncmFtbWUoKQogICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5kZWxldGUnKSkKICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfcHJvZ3JhbW1lLnJlbG9hZCgpCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkKICAgICAgICB9KQogICAgICB9KQogICAgfQogICAgLAogICAgaGFuZGxlQ2xlYXJGb3JtUHJvZ3JhbW1lKCkgewogICAgICB0aGlzLnJlc2V0Rm9ybVByb2dyYW1tZSgpCiAgICAgIHRoaXMucmVzZXRGb3JtQ29tYmluYXRpb24oKQogICAgICB0aGlzLnJlc2V0VGFibGVEYXRhQ29tYmluYXRpb25BZGQoKQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5mb3JtX3Byb2dyYW1tZS5jbGVhclZhbGlkYXRlKCkKICAgICAgfSkKICAgIH0KICAgICwKICAgIC8vIOiOt+WPluebuOWQjOe8luWPt+eahOaVsOe7hO+8iOavj+asoeihqOagvOaVsOaNruaUueWPmOWQjumcgOimgeiwg+eUqOi/meS4quaWueazle+8iQogICAgZ2V0T3JkZXJOdW1iZXIoYXJyYXlOYW1lKSB7CiAgICAgIGxldCB0YWJsZURhdGEKICAgICAgbGV0IG9yZGVySW5kZXhBcnIKICAgICAgaWYgKGFycmF5TmFtZSA9PT0gJ2NvbWJpbmF0aW9uX2FkZCcpIHsKICAgICAgICB0YWJsZURhdGEgPSB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQKICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdjb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCcpIHsKICAgICAgICB0YWJsZURhdGEgPSB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIG9yZGVySW5kZXhBcnIgPSBbXQogICAgICAvLyDmjInnhacgcHJlbWl1bUNvZGUg5o6S5bqP77yM5bCGIHByZW1pdW1Db2RlIOebuOWQjOeahOaVsOaNrui/nuWcqOS4gOi1twogICAgICB0YWJsZURhdGEgPSB0aGlzLl8ub3JkZXJCeSh0YWJsZURhdGEsIFsncHJlbWl1bUNvZGUnLCAncGRCbmZ0Q29kZSddLCBbJ2FzYycsICdhc2MnXSkKICAgICAgaWYgKGFycmF5TmFtZSA9PT0gJ2NvbWJpbmF0aW9uX2FkZCcpIHsKICAgICAgICB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQgPSB0YWJsZURhdGEKICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdjb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCcpIHsKICAgICAgICB0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCA9IHRhYmxlRGF0YQogICAgICB9CiAgICAgIGxldCBvcmRlck9iaiA9IHt9CiAgICAgIHRhYmxlRGF0YS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4gewogICAgICAgIGVsZW1lbnQucm93SW5kZXggPSBpbmRleAogICAgICAgIGlmIChvcmRlck9ialtlbGVtZW50LnByZW1pdW1Db2RlXSkgewogICAgICAgICAgb3JkZXJPYmpbZWxlbWVudC5wcmVtaXVtQ29kZV0ucHVzaChpbmRleCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3JkZXJPYmpbZWxlbWVudC5wcmVtaXVtQ29kZV0gPSBbXQogICAgICAgICAgb3JkZXJPYmpbZWxlbWVudC5wcmVtaXVtQ29kZV0ucHVzaChpbmRleCkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC8vIOmcgOimgeWQiOW5tueahOihjOeahCBpbmRleCDlt7Lnu4/lrZjlnKjkuoblkIzkuIDkuKrmlbDnu4Tph4zvvIzmiorov5nkupvmlbDnu4TlrZjlgqjliLAgdGhpcy5vcmRlckluZGV4QXJyCiAgICAgIGZvciAoY29uc3QgayBpbiBvcmRlck9iaikgewogICAgICAgIG9yZGVySW5kZXhBcnIucHVzaChvcmRlck9ialtrXSkKICAgICAgfQogICAgICBpZiAoYXJyYXlOYW1lID09PSAnY29tYmluYXRpb25fYWRkJykgewogICAgICAgIHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGQgPSBvcmRlckluZGV4QXJyCiAgICAgICAgdGhpcy5nZXRNZXJnZWRSb3dJbmRleCh0aGlzLnRhYmxlRGF0YV9jb21iaW5hdGlvbl9hZGQsIHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9hZGQpCiAgICAgIH0gZWxzZSBpZiAoYXJyYXlOYW1lID09PSAnY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQnKSB7CiAgICAgICAgdGhpcy5vcmRlckluZGV4QXJyX2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkID0gb3JkZXJJbmRleEFycgogICAgICAgIHRoaXMuZ2V0TWVyZ2VkUm93SW5kZXgodGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGQsIHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZCkKICAgICAgfQogICAgfQogICAgLAogICAgZ2V0TWVyZ2VkUm93SW5kZXgodGFibGVEYXRhLCBvcmRlckluZGV4QXJyKSB7CiAgICAgIGE6Zm9yIChjb25zdCByb3cgb2YgdGFibGVEYXRhKSB7CiAgICAgICAgY29uc3Qgcm93SW5kZXggPSByb3cucm93SW5kZXgKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVySW5kZXhBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHZhbCA9IG9yZGVySW5kZXhBcnJbaV0KICAgICAgICAgIGZvciAoY29uc3QgbnVtYmVyIG9mIHZhbCkgewogICAgICAgICAgICBpZiAocm93SW5kZXggPT09IG51bWJlcikgewogICAgICAgICAgICAgIHJvdy5tZXJnZWRSb3dJbmRleCA9IGkKICAgICAgICAgICAgICBjb250aW51ZSBhCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgICwKICAgIG9iamVjdFNwYW5NZXRob2RfcHJvZ3JhbW1lKHtyb3csIGNvbHVtbiwgcm93SW5kZXgsIGNvbHVtbkluZGV4fSkgewogICAgICBpZiAoY29sdW1uSW5kZXggPT09IDAgfHwgY29sdW1uSW5kZXggPT09IDEgfHwgY29sdW1uSW5kZXggPT09IDIgfHwgY29sdW1uSW5kZXggPT09IDMgfHwgY29sdW1uSW5kZXggPT09IDQgfHwgY29sdW1uSW5kZXggPT09IDUpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9wcm9ncmFtbWUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5vcmRlckluZGV4QXJyX3Byb2dyYW1tZVtpXQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbGVtZW50Lmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGxldCBpdGVtID0gZWxlbWVudFtqXQogICAgICAgICAgICBpZiAocm93SW5kZXggPT09IGl0ZW0pIHsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgcm93c3BhbjogZWxlbWVudC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgcm93c3BhbjogMCwKICAgICAgICAgICAgICAgICAgY29sc3BhbjogMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLAogICAgb2JqZWN0U3Bhbk1ldGhvZF9jb21iaW5hdGlvbl9hZGQoe3JvdywgY29sdW1uLCByb3dJbmRleCwgY29sdW1uSW5kZXh9KSB7CiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMCB8fCBjb2x1bW5JbmRleCA9PT0gMSB8fCBjb2x1bW5JbmRleCA9PT0gMikgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcmRlckluZGV4QXJyX2NvbWJpbmF0aW9uX2FkZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLm9yZGVySW5kZXhBcnJfY29tYmluYXRpb25fYWRkW2ldCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVsZW1lbnQubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgbGV0IGl0ZW0gPSBlbGVtZW50W2pdCiAgICAgICAgICAgIGlmIChyb3dJbmRleCA9PT0gaXRlbSkgewogICAgICAgICAgICAgIGlmIChqID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICByb3dzcGFuOiBlbGVtZW50Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgY29sc3BhbjogMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICByb3dzcGFuOiAwLAogICAgICAgICAgICAgICAgICBjb2xzcGFuOiAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAsCiAgICBvYmplY3RTcGFuTWV0aG9kX2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkKHtyb3csIGNvbHVtbiwgcm93SW5kZXgsIGNvbHVtbkluZGV4fSkgewogICAgICBpZiAoY29sdW1uSW5kZXggPT09IDAgfHwgY29sdW1uSW5kZXggPT09IDEgfHwgY29sdW1uSW5kZXggPT09IDIgfHwgY29sdW1uSW5kZXggPT09IDUpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9jb21iaW5hdGlvbl9kdXBsaWNhdGVkX2FkZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLm9yZGVySW5kZXhBcnJfY29tYmluYXRpb25fZHVwbGljYXRlZF9hZGRbaV0KICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZWxlbWVudC5sZW5ndGg7IGorKykgewogICAgICAgICAgICBsZXQgaXRlbSA9IGVsZW1lbnRbal0KICAgICAgICAgICAgaWYgKHJvd0luZGV4ID09PSBpdGVtKSB7CiAgICAgICAgICAgICAgaWYgKGogPT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IGVsZW1lbnQubGVuZ3RoLAogICAgICAgICAgICAgICAgICBjb2xzcGFuOiAxCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IDAsCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgICwKICAgIHJlc2V0U2VsZWN0ZWRQcm9ncmFtbWUoKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRQcm9ncmFtbWUgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBwcm9ncmFtbWVDb2RlOiAnJywKICAgICAgICBwcm9ncmFtbWVOYW1lOiAnJywKICAgICAgICBwcmVtaXVtQ29kZTogJycsCiAgICAgICAgcHJlbWl1bU5hbWU6ICcnLAogICAgICAgIGJlbmVmaXRDb2RlOiAnJywKICAgICAgICBiZW5lZml0TmFtZTogJycsCiAgICAgICAgYmVuZWZpdFR5cGU6ICcnLAogICAgICAgIHByb2dyYW1tZToge30sCiAgICAgICAgcHJlbWl1bToge30KICAgICAgfQogICAgfQogICAgLAogICAgLy8g6YeN572u77yI5paw5bu677yJ5a+56LGh5LiO5pWw57uECiAgICByZXNldEZvcm1Qcm9ncmFtbWUoKSB7CiAgICAgIHRoaXMuZm9ybV9wcm9ncmFtbWUgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBwZEluZm9JZDogdW5kZWZpbmVkLAogICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwKICAgICAgICBwZENvZGU6ICcnLAogICAgICAgIHBkUHJvZ0NvZGU6ICcnLAogICAgICAgIHBkUHJvZ05hbWU6ICcnLAogICAgICAgIHBkT3B0RmxhZzogJ04nLAogICAgICAgIHBkSW5zdVBlcmlvZDogdW5kZWZpbmVkLAogICAgICAgIHBkSW5zdVBlcmlvZFVuaXQ6ICcnLAogICAgICAgIHBkSW5zdVBlcmlvZENhbE1vZGU6ICcnLAogICAgICAgIHBkSW5zdUVuZENhbFJ1bGU6ICcwJywKICAgICAgICBwZEFtbnRDYWxSdWxlOiAnJywKICAgICAgICBwZEFkZEFtbnRGbGFnOiAnWScsCiAgICAgICAgcGRQYXlFbmRDYWxNb2RlOiAnJywKICAgICAgICBwZEFtbnRTYWxlVHlwZTogJycsCiAgICAgICAgb3BlcmF0b3I6ICcnLAogICAgICAgIGNyZWF0ZVRpbWU6ICcnLAogICAgICAgIHVwZGF0ZVRpbWU6ICcnCiAgICAgIH0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuZm9ybV9wcm9ncmFtbWUuY2xlYXJWYWxpZGF0ZSgpCiAgICAgIH0pCiAgICB9CiAgICAsCiAgICByZXNldEZvcm1Db21iaW5hdGlvbigpIHsKICAgICAgdGhpcy5wYWdlRmxhZy5wcmVtaXVtID0gZmFsc2UKICAgICAgdGhpcy5wYWdlRmxhZy5jbGFpbSA9IGZhbHNlCiAgICAgIHRoaXMucGFnZUZsYWcuc3Vydml2YWwgPSBmYWxzZQogICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuc3Vydml2YWwgPSBmYWxzZQogICAgICB0aGlzLmluZGV0ZXJtaW5hdGUuY2xhaW0gPSBmYWxzZQogICAgICB0aGlzLmZvcm1fY29tYmluYXRpb24gPSB7CiAgICAgICAgcHJlbWl1bTogdW5kZWZpbmVkLAogICAgICAgIHN1cnZpdmFsRmxhZzogZmFsc2UsCiAgICAgICAgY2xhaW1GbGFnOiBmYWxzZSwKICAgICAgICBzdXJ2aXZhbDogW10sCiAgICAgICAgY2xhaW06IFtdCiAgICAgIH0KICAgIH0KICAgICwKICAgIHJlc2V0Rm9ybUNvbWJpbmF0aW9uQWRkKCkgewogICAgICB0aGlzLmZvcm1fY29tYmluYXRpb25fYWRkID0gewogICAgICAgIC8vIFBkdGVtcFBkQm5mdCDlrp7kvZPnsbvlsZ7mgKcKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHBkQm5mdENvZGU6ICcnLAogICAgICAgIHBkQm5mdE5hbWU6ICcnLAogICAgICAgIHBkQm5mdFR5cGU6ICcnLAogICAgICAgIHBkQWRkQW1udEZsYWc6ICcnLAogICAgICAgIHBkQm5mdENhbE1vZGU6ICcnLAogICAgICAgIHBkQ2FsY0lkOiB1bmRlZmluZWQsCiAgICAgICAgcGRVcmdlUGF5RmxhZzogJycsCiAgICAgICAgY3JlYXRlVGltZTogJycsCiAgICAgICAgdXBkYXRlVGltZTogJycsCiAgICAgICAgb3BlcmF0b3I6ICcnLAogICAgICAgIC8vIHZv5bGe5oCnCiAgICAgICAgcHJlbWl1bUlkOiB1bmRlZmluZWQsCiAgICAgICAgcHJlbWl1bUNvZGU6ICcnLAogICAgICAgIHByZW1pdW1OYW1lOiAnJywKICAgICAgICBwZEFkZEFtbnRQcm9nRmxhZzogJycKICAgICAgfQogICAgfQogICAgLAogICAgcmVzZXRUYWJsZURhdGFDb21iaW5hdGlvbkFkZCgpIHsKICAgICAgdGhpcy50YWJsZURhdGFfY29tYmluYXRpb25fYWRkID0gW10KICAgIH0KICAgICwKICAgIHJlc2V0VGFibGVEYXRhQ29tYmluYXRpb25CZWZvcmVBZGQoKSB7CiAgICAgIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2JlZm9yZV9hZGQgPSBbXQogICAgfQogICAgLAogICAgcmVzZXRUYWJsZURhdGFDb21iaW5hdGlvbkR1cGxpY2F0ZWRBZGQoKSB7CiAgICAgIHRoaXMudGFibGVEYXRhX2NvbWJpbmF0aW9uX2R1cGxpY2F0ZWRfYWRkID0gW10KICAgIH0KICAgICwKICAgIHRvUHJlbWl1bVBhZ2UocGRQcmVtQ29kZSkgewogICAgICBpZiAoIXBkUHJlbUNvZGUpIHsKICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5pbnZhbGlkUHJlbUNvZGUnKSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdGVkUHJlbWl1bUNvZGUgPSBwZFByZW1Db2RlCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlLnByZW1pdW0gPSB0cnVlCiAgICAgIH0KICAgIH0KICAgICwKICAgIHRvU3J2Qm5mdFBhZ2Uoc3Vydml2YWwpIHsKICAgICAgaWYgKE9iamVjdC5rZXlzKHN1cnZpdmFsKS5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFNydkJuZnQgPSBzdXJ2aXZhbAogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZS5zdXJ2aXZhbEJlbmVmaXQgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdwcm9kdWN0UHJvZ3JhbW1lLm1lc3NhZ2UuaW52YWxpZEJlbmVmaXQnKSkKICAgICAgfQogICAgfQogICAgLAogICAgdG9DbG1CbmZ0UGFnZShjbGFpbSkgewogICAgICBpZiAoT2JqZWN0LmtleXMoY2xhaW0pLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnNlbGVjdGVkQ2xtQm5mdCA9IGNsYWltCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlLmNsYWltQmVuZWZpdCA9IHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3Byb2R1Y3RQcm9ncmFtbWUubWVzc2FnZS5pbnZhbGlkQmVuZWZpdCcpKQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-framework-def/pp-info-def/pdpppdprogsInfo","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title :label=\"$t('productProgramme.pageTitle')\"/>\r\n    <!-- 产品信息 -->\r\n    <cus-product-info></cus-product-info>\r\n\r\n\r\n    <cus-form-title :label=\"$t('productProgramme.basicInformation')\"/>\r\n    <!-- 方案基本信息表单 -->\r\n    <el-form :disabled=\"true\"  :model=\"form_programme\" :rules=\"rules\" label-position=\"right\"\r\n             label-width=\"150px\"\r\n             ref=\"form_programme\">\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdProgName')\" prop=\"pdProgName\">\r\n            <el-input :placeholder=\"$t('productProgramme.message.please_enter')\" clearable\r\n                      v-model=\"form_programme.pdProgName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdAddAmntFlag')\" prop=\"pdAddAmntFlag\">\r\n            <el-switch active-value=\"Y\" inactive-value=\"N\" v-model=\"form_programme.pdAddAmntFlag\"></el-switch>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdOptFlag')\" prop=\"pdOptFlag\">\r\n            <el-radio-group v-model=\"form_programme.pdOptFlag\">\r\n              <el-radio label=\"Y\">{{$t('i18nView.chooseable')}}</el-radio>\r\n              <el-radio label=\"N\">{{$t('i18nView.requireOpt')}}</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdInsuPeriodCalMode')\" prop=\"pdInsuPeriodCalMode\">\r\n            <cus-select :codetype=\"'pdInsuPeriodCalMode'\" v-model=\"form_programme.pdInsuPeriodCalMode\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdInsuPeriod')\">\r\n            <el-form-item prop=\"pdInsuPeriod\" >\r\n              <el-input :placeholder=\"$t('productProgramme.message.please_enter')\" clearable\r\n                         type=\"number\" v-model=\"form_programme.pdInsuPeriod\">\r\n                <cus-select :codetype=\"'pdInsuPeriodUnit'\" class=\"cst\" slot=\"append\"\r\n                            v-model=\"form_programme.pdInsuPeriodUnit\" ></cus-select>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdInsuEndCalRule')\" prop=\"pdInsuEndCalRule\">\r\n            <cus-select :codetype=\"'pdInsuEndCalRule'\" v-model=\"form_programme.pdInsuEndCalRule\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdAmntSaleType')\" prop=\"pdAmntSaleType\">\r\n            <cus-select :codetype=\"'pdAmntSaleType'\" v-model=\"form_programme.pdAmntSaleType\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdAmntCalRule')\" prop=\"pdAmntCalRule\">\r\n            <cus-select :codetype=\"'pdAmntCalRule'\" v-model=\"form_programme.pdAmntCalRule\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('productProgramme.pdPayEndCalMode')\" prop=\"pdPayEndCalMode\">\r\n            <cus-select :codetype=\"'pdPayEndCalMode'\" v-model=\"form_programme.pdPayEndCalMode\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <cus-form-title :label=\"$t('productProgramme.combination')\"/>\r\n    <!-- 方案组合表单 -->\r\n    <div>\r\n      <el-row style=\"margin-bottom: 10px\">\r\n        <span @click=\"pageFlag.premium = !pageFlag.premium\" class=\"tree-ctrl\">\r\n          <i class=\"el-icon-caret-bottom\" style=\"color: #606266;font-size: 18px\"\r\n             v-if=\"true === pageFlag.premium\"/>\r\n          <i class=\"el-icon-caret-right\" style=\"color: #606266;font-size: 18px\"\r\n             v-if=\"false === pageFlag.premium\"/>\r\n        </span>\r\n        <span @click=\"pageFlag.premium = !pageFlag.premium\" style=\"margin-left: 20px;cursor: pointer;font-size: 12px\">{{ $t('productProgramme.premiumInfo') }}</span>\r\n        <div style=\"margin: 0 0 0 25px\" v-if=\"pageFlag.premium\">\r\n          <el-radio-group v-model=\"form_combination.premium\">\r\n            <div v-for=\"premium in premiumList\">\r\n              <el-radio :disabled=\"true\" :label=\"premium\">{{ premium.pdPremCode+' - '+premium.pdPayName }}</el-radio>\r\n              <el-button   @click=\"toPremiumPage(premium.pdPremCode)\" size=\"mini\" type=\"text\">>></el-button>\r\n            </div>\r\n          </el-radio-group>\r\n        </div>\r\n      </el-row>\r\n      <el-row style=\"margin-bottom: 10px\">\r\n        <el-col :span=\"8\">\r\n          <span @click=\"pageFlag.survival = !pageFlag.survival\" class=\"tree-ctrl\">\r\n            <i class=\"el-icon-caret-bottom\" style=\"color: #606266;font-size: 18px\"\r\n               v-if=\"true === pageFlag.survival\"/>\r\n            <i class=\"el-icon-caret-right\" style=\"color: #606266;font-size: 18px\"\r\n               v-if=\"false === pageFlag.survival\"/>\r\n          </span>\r\n          <el-checkbox :disabled=\"true\" :indeterminate=\"indeterminate.survival\"\r\n                       v-model=\"form_combination.survivalFlag\"></el-checkbox>\r\n          <span @click=\"pageFlag.survival = !pageFlag.survival\" style=\"margin-left: 5px;cursor: pointer;font-size: 12px\">{{ $t('route.pdtemppdsrvlbnft') }}</span>\r\n          <div style=\"margin: 0 0 0 25px\" v-if=\"pageFlag.survival\">\r\n            <el-checkbox-group v-model=\"form_combination.survival\">\r\n              <div v-for=\"survival in survivalList\">\r\n                <el-checkbox :disabled=\"true\" :label=\"survival\">{{ survival.pdBnftCode+' - '+survival.pdBnftName }}\r\n                </el-checkbox>\r\n                <el-button    @click=\"toSrvBnftPage(survival)\" size=\"mini\" style=\"margin-left: 5px\" type=\"text\">>>\r\n                </el-button>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <span @click=\"pageFlag.claim = !pageFlag.claim\" class=\"tree-ctrl\">\r\n            <i class=\"el-icon-caret-bottom\" style=\"color: #606266;font-size: 18px\"\r\n               v-if=\"true === pageFlag.claim\"/>\r\n            <i class=\"el-icon-caret-right\" style=\"color: #606266;font-size: 18px\"\r\n               v-if=\"false === pageFlag.claim\"/>\r\n          </span>\r\n          <el-checkbox :disabled=\"true\" :indeterminate=\"indeterminate.claim\"\r\n                       v-model=\"form_combination.claimFlag\"></el-checkbox>\r\n          <span @click=\"pageFlag.claim = !pageFlag.claim\" style=\"margin-left: 5px;cursor: pointer;font-size: 12px\">{{ $t('productProgramme.claimBenefit') }}</span>\r\n          <div style=\"margin: 0 0 0 25px\" v-if=\"pageFlag.claim\">\r\n            <el-checkbox-group v-model=\"form_combination.claim\">\r\n              <div v-for=\"claim in claimList\">\r\n                <el-checkbox :disabled=\"true\" :label=\"claim\">{{ claim.pdBnftCode+' - '+claim.pdBnftName }}</el-checkbox>\r\n                <el-button    @click=\"toClmBnftPage(claim)\" size=\"mini\" style=\"margin-left: 5px\" type=\"text\">>></el-button>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n      </el-row>\r\n    </div>\r\n    <cus-form-title :label=\"$t('productProgramme.combinationResult')\"/>\r\n    <el-table :data=\"tableData_combination_add\" :span-method=\"objectSpanMethod_combination_add\" border\r\n                class=\"wraper-table\" element-loading-text=\"Loading\" fit max-height=\"500px\" size=\"mini\">\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.mergedRowIndex + 1 }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.premiumCode')\" align=\"center\"\r\n                         prop=\"premiumCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.premiumName')\" align=\"center\"\r\n                         prop=\"premiumName\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.guaranteeCode')\" align=\"center\" prop=\"pdBnftCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.pdBnftName')\" align=\"center\" prop=\"pdBnftName\"></el-table-column>\r\n        <el-table-column :label=\"$t('productProgramme.pdAddAmntProgFlag')\" align=\"center\" prop=\"pdAddAmntProgFlag\">\r\n          <template v-slot=\"scope\">\r\n            <el-radio-group v-model=\"scope.row.pdAddAmntProgFlag\" :disabled=\"true\">\r\n              <el-radio label=\"Y\">{{$t('i18nView.number')}}</el-radio>\r\n              <el-radio label=\"N\">{{$t('i18nView.noNumber')}}</el-radio>\r\n            </el-radio-group>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n    <!-- 缴费页面 -->\r\n    <el-dialog :visible.sync=\"dialogVisible.premium\" title=\"缴费与加费\" v-dialog-drag v-if=\"dialogVisible.premium\"\r\n               width=\"70%\">\r\n      <premium :premiumCode=\"selectedPremiumCode\"></premium>\r\n    </el-dialog>\r\n    <!-- 赔付保障页面 -->\r\n    <el-dialog :visible.sync=\"dialogVisible.claimBenefit\" title=\"赔付保障详情\" v-dialog-drag v-if=\"dialogVisible.claimBenefit\"\r\n               width=\"70%\">\r\n      <clmBnft :pdBnft=\"selectedClmBnft\"></clmBnft>\r\n    </el-dialog>\r\n    <!-- 生存保障页面 -->\r\n    <el-dialog :visible.sync=\"dialogVisible.survivalBenefit\" title=\"生存保障详情\" v-dialog-drag\r\n               v-if=\"dialogVisible.survivalBenefit\" width=\"70%\">\r\n      <srvBnft :pdBntf=\"selectedSrvBnft\"></srvBnft>\r\n    </el-dialog>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\n  import {findAllPremiumByProductId} from \"@/api/basicinfo/pdtemppdprem\"\r\n  import {findAllBenefitByProductId} from \"@/api/basicinfo/pdtemppdbnft\"\r\n  import {addPdtempPdProg, deletePdtempPdProg, updatePdtempPdProg} from \"@/api/basicinfo/pdtemppdprog\"\r\n  import {getPdClsLabInfo} from \"@/api/basicinfo/ProductAttributeDefinition\"\r\n  import premium from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/index\"\r\n  import clmBnft from \"@/views/product-definition/pd-framework-def/pd-structure-def/guarantee-def/general-medical/index\"\r\n  import srvBnft from \"@/views/basicinfo/pdtemppdsrvlbnft/index\"\r\n\r\n  export default {\r\n    name: 'ProgrammeDefinition',\r\n    components: {premium, clmBnft, srvBnft},\r\n    filters: {},\r\n    data() {\r\n      return {\r\n        showPageFlag: 0,\r\n        selectedPremiumCode: '',\r\n        selectedClmBnft: {},\r\n        selectedSrvBnft: {},\r\n        // 产品信息\r\n        product: {\r\n          id: undefined,\r\n          pdCode: '',\r\n          pdEdition: '',\r\n          pdVerId: undefined,\r\n          pdSalechnl: '',\r\n          pdName: '',\r\n          pdShortname: '',\r\n          pdEnName: '',\r\n          pdShortEnName: '',\r\n          operator: '',\r\n          pdApplDate: undefined,\r\n          pdProcessId: undefined,\r\n          createTime: undefined,\r\n          updateTime: undefined,\r\n        },\r\n        product_extra: {\r\n          typeRegion: ''\r\n        },\r\n        // 方案表格\r\n        tableData_programme: [],\r\n        params_programme: {\r\n          productId: undefined,\r\n          like_pdProgName: '',\r\n          eq_pdProgCode: ''\r\n        },\r\n        selectedProgramme: {\r\n          id: undefined,\r\n          programmeCode: '',\r\n          programmeName: '',\r\n          premiumCode: '',\r\n          premiumName: '',\r\n          benefitCode: '',\r\n          benefitName: '',\r\n          benefitType: '',\r\n          programme: {},\r\n          premium: {}\r\n        },\r\n        // 方案组合表格\r\n        tableData_combination_add: [],\r\n        tableData_combination_before_add: [],\r\n        tableData_combination_duplicated_add: [],\r\n        orderIndexArr_programme: [],\r\n        orderIndexArr_combination_add: [],\r\n        orderIndexArr_combination_duplicated_add: [],\r\n        premiumList: [],\r\n        survivalList: [],\r\n        claimList: [],\r\n        dialogVisible: {\r\n          premium: false,\r\n          claimBenefit: false,\r\n          survivalBenefit: false\r\n        },\r\n        // 方案对象\r\n        form_programme: {\r\n          id: undefined,\r\n          pdInfoId: undefined,\r\n          pdVerId: undefined,\r\n          pdCode: '',\r\n          pdProgCode: '',\r\n          pdProgName: '',\r\n          pdOptFlag: 'N',\r\n          pdInsuPeriod: undefined,\r\n          pdInsuPeriodUnit: '',\r\n          pdInsuPeriodCalMode: '',\r\n          pdInsuEndCalRule: '0',\r\n          pdAmntCalRule: '',\r\n          pdAddAmntFlag: 'Y',\r\n          pdPayEndCalMode: '',\r\n          pdAmntSaleType: '',\r\n          operator: '',\r\n          createTime: '',\r\n          updateTime: ''\r\n        },\r\n        // 方案组合对象\r\n        form_combination: {\r\n          premium: undefined,\r\n          survivalFlag: false,\r\n          claimFlag: false,\r\n          survival: [],\r\n          claim: []\r\n        },\r\n        // 方案组合新增对象\r\n        form_combination_add: {\r\n          // PdtempPdBnft 实体类属性\r\n          id: undefined,\r\n          pdBnftCode: '',\r\n          pdBnftName: '',\r\n          pdBnftType: '',\r\n          pdAddAmntFlag: '',\r\n          pdBnftCalMode: '',\r\n          pdCalcId: undefined,\r\n          pdUrgePayFlag: '',\r\n          createTime: '',\r\n          updateTime: '',\r\n          operator: '',\r\n          // vo属性\r\n          premiumId: undefined,\r\n          premiumCode: '',\r\n          premiumName: '',\r\n          pdAddAmntProgFlag: ''\r\n        },\r\n        dialogVisible_duplicated: false,\r\n        // 初始化标识\r\n        initFlag: {\r\n          premium: false,\r\n          benefit: false\r\n        },\r\n        pageFlag: {\r\n          premium: false,\r\n          survival: false,\r\n          claim: false\r\n        },\r\n        indeterminate: {\r\n          survival: false,\r\n          claim: false\r\n        },\r\n        // 表单验证\r\n        rules: {\r\n          pdProgName: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_enter') + this.$t('productProgramme.pdProgName'),\r\n            trigger: 'blur'\r\n          }],\r\n          pdAddAmntFlag: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdAddAmntFlag'),\r\n            trigger: 'change'\r\n          }],\r\n          pdOptFlag: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdOptFlag'),\r\n            trigger: 'change'\r\n          }],\r\n          pdInsuPeriodCalMode: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdInsuPeriodCalMode'),\r\n            trigger: 'change'\r\n          }],\r\n          pdInsuPeriod: [{\r\n            required: false,\r\n            message: this.$t('productProgramme.message.please_enter') + this.$t('productProgramme.pdInsuPeriod'),\r\n            trigger: 'blur'\r\n          }],\r\n          pdInsuPeriodUnit: [{\r\n            required: false,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdInsuPeriodUnit'),\r\n            trigger: 'change'\r\n          }],\r\n          pdInsuEndCalRule: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdInsuEndCalRule'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAmntSaleType: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdAmntSaleType'),\r\n            trigger: 'change'\r\n          }],\r\n          pdAmntCalRule: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdAmntCalRule'),\r\n            trigger: 'change'\r\n          }],\r\n          pdPayEndCalMode: [{\r\n            required: true,\r\n            message: this.$t('productProgramme.message.please_select') + this.$t('productProgramme.pdPayEndCalMode'),\r\n            trigger: 'change'\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n\r\n      'form_combination.claimFlag'(val) {\r\n        this.indeterminate.claim = false\r\n        if (val === true) {\r\n          this.form_combination.claim = []\r\n          for (const claim of this.claimList) {\r\n            this.form_combination.claim.push(claim)\r\n          }\r\n        } else {\r\n          this.form_combination.claim = []\r\n        }\r\n      },\r\n      'form_combination.claim'(val) {\r\n        if (val.length === 0) {\r\n          this.form_combination.claimFlag = false\r\n          this.indeterminate.claim = false\r\n        } else if (val.length < this.claimList.length) {\r\n          this.indeterminate.claim = true\r\n        } else {\r\n          this.indeterminate.claim = false\r\n          this.form_combination.claimFlag = true\r\n        }\r\n      },\r\n      'form_combination.survivalFlag'(val) {\r\n        this.indeterminate.survival = false\r\n        if (val === true) {\r\n          this.form_combination.survival = []\r\n          for (const survival of this.survivalList) {\r\n            this.form_combination.survival.push(survival)\r\n          }\r\n        } else {\r\n          this.form_combination.survival = []\r\n        }\r\n      },\r\n      'form_combination.survival'(val) {\r\n        if (val.length === 0) {\r\n          this.form_combination.survivalFlag = false\r\n          this.indeterminate.survival = false\r\n        } else if (val.length < this.survivalList.length) {\r\n          this.indeterminate.survival = true\r\n        } else {\r\n          this.indeterminate.survival = false\r\n          this.form_combination.survivalFlag = true\r\n        }\r\n      }\r\n    }\r\n    ,\r\n    computed: {}\r\n    ,\r\n    created() {\r\n      this.getProductInfo()\r\n    },\r\n    methods: {\r\n      handleCurrentChange(raw) {\r\n        this.$emit('locationmap', raw);\r\n      }\r\n      ,\r\n      getProductInfo() {\r\n        this.form_programme = JSON.parse(sessionStorage.getItem(\"form_programme\"));\r\n        this.product = JSON.parse(sessionStorage.getItem(\"product\"));\r\n        this.tableData_programme = JSON.parse(sessionStorage.getItem(\"tableData_programme\"));\r\n        this.params_programme.productId = this.product.id\r\n        this.getPremiumInfo()\r\n        this.getBenefitInfo()\r\n        this.init_typeRegion()\r\n\r\n      }\r\n      ,\r\n      getPremiumInfo() {\r\n        findAllPremiumByProductId(this.product.id).then(response => {\r\n          for (const premium of response.data) {\r\n            this.premiumList.push(premium)\r\n          }\r\n          this.initFlag.premium = true\r\n          if (this.initFlag.premium === true && this.initFlag.benefit === true) {\r\n            this.autoBuildProgramme()\r\n          }\r\n        })\r\n      }\r\n      ,\r\n      getBenefitInfo() {\r\n        findAllBenefitByProductId(this.product.id).then(response => {\r\n          let map = response.data\r\n          this.survivalList = map.survival\r\n          this.claimList = map.claim\r\n          this.initFlag.benefit = true\r\n          if (this.initFlag.premium === true && this.initFlag.benefit === true) {\r\n            this.autoBuildProgramme()\r\n          }\r\n        })\r\n      }\r\n      ,\r\n      // 获取险种类型（产品类型）\r\n      init_typeRegion() {\r\n        const paramsMap = {\r\n          pd_info_id: this.product.id,\r\n          pd_cls_type: '1'\r\n        }\r\n        getPdClsLabInfo(this.buildRequestData(paramsMap)).then(response => {\r\n          const pdTempClsLabList = response.data\r\n          const pdCls1Array = this._.map(pdTempClsLabList, 'pdCls1')\r\n          if (pdCls1Array.length > 0) {\r\n            this.product_extra.typeRegion = pdCls1Array[0]\r\n          }\r\n          this.selectedProgrammeChanged();\r\n        })\r\n      }\r\n      ,\r\n      autoBuildProgramme() {\r\n        if (this.premiumList.length !== 1 || this.survivalList.length === 0 && this.claimList.length === 0) {\r\n          return\r\n        }\r\n        this.pageFlag.premium = true\r\n        this.pageFlag.survival = true\r\n        this.pageFlag.claim = true\r\n        this.form_combination.premium = this.premiumList[0]\r\n        this.form_combination.claim = this.claimList\r\n        this.form_combination.survival = this.survivalList\r\n        this.handleAddProgramme(this.premiumList[0], this.survivalList, this.claimList, false)\r\n      }\r\n      ,\r\n      handleSearch() {\r\n        this.$refs.page_programme.reload()\r\n      }\r\n      ,\r\n      rowClick(row, column, event) {\r\n        if (event.target.nodeName === \"INPUT\") {\r\n          if (row.id === this.selectedProgramme.id) {\r\n            this.cancelUpdateProgramme()\r\n          }\r\n        }\r\n      }\r\n      ,\r\n      selectedProgrammeChanged() {\r\n        this.resetFormProgramme()\r\n        this.resetFormCombination()\r\n        this.resetTableDataCombinationAdd()\r\n        this.$nextTick(() => {\r\n          this.form_programme  = this.tableData_programme[0].programme;\r\n          this.selectedProgramme = this.tableData_programme[0];\r\n          // 带入缴费信息\r\n          this.pageFlag.premium = true\r\n          let existedPremium = this.selectedProgramme.premium\r\n          for (const premium of this.premiumList) {\r\n            if (premium.id === existedPremium.id) {\r\n              this.form_combination.premium = premium\r\n              break\r\n            }\r\n          }\r\n          // 带入保障组合信息\r\n          let existedSurvivalList = []\r\n          let existedClaimList = []\r\n          for (const benefitVo of this.tableData_programme) {\r\n            if (benefitVo.programmeCode === this.form_programme.pdProgCode) {\r\n              switch (benefitVo.benefitType) {\r\n                case \"A\":\r\n                case \"M\":\r\n                  existedSurvivalList.push(benefitVo)\r\n                  this.pageFlag.survival = true\r\n                  break\r\n                case \"C\":\r\n                  existedClaimList.push(benefitVo)\r\n                  this.pageFlag.claim = true\r\n                  break\r\n                default:\r\n                  break\r\n              }\r\n            }\r\n          }\r\n          for (const existedSurvival of existedSurvivalList) {\r\n            for (const survival of this.survivalList) {\r\n              if (survival.id === existedSurvival.id) {\r\n                this.form_combination.survival.push(survival)\r\n                this.resetFormCombinationAdd()\r\n                Object.assign(this.form_combination_add, survival)\r\n                this.form_combination_add.premiumId = existedPremium.id\r\n                this.form_combination_add.premiumCode = existedSurvival.premiumCode\r\n                this.form_combination_add.premiumName = existedSurvival.premiumName\r\n                this.form_combination_add.pdAddAmntProgFlag = existedSurvival.pdAddAmntProgFlag\r\n                this.tableData_combination_add.push(this.form_combination_add)\r\n                break\r\n              }\r\n            }\r\n          }\r\n          for (const existedClaim of existedClaimList) {\r\n            for (const claim of this.claimList) {\r\n              if (claim.id === existedClaim.id) {\r\n                this.form_combination.claim.push(claim)\r\n                this.resetFormCombinationAdd()\r\n                Object.assign(this.form_combination_add, claim)\r\n                this.form_combination_add.premiumId = existedPremium.id\r\n                this.form_combination_add.premiumCode = existedClaim.premiumCode\r\n                this.form_combination_add.premiumName = existedClaim.premiumName\r\n                this.form_combination_add.pdAddAmntProgFlag = existedClaim.pdAddAmntProgFlag\r\n                this.tableData_combination_add.push(this.form_combination_add)\r\n                break\r\n              }\r\n            }\r\n          }\r\n          this.getOrderNumber('combination_add')\r\n        })\r\n      }\r\n      ,\r\n      cancelUpdateProgramme() {\r\n        this.resetSelectedProgramme()\r\n        this.resetFormProgramme()\r\n        this.resetFormCombination()\r\n        this.resetTableDataCombinationAdd()\r\n        this.$nextTick(() => {\r\n          this.$refs.form_programme.clearValidate()\r\n        })\r\n      }\r\n      ,\r\n      handleAddProgramme(premium, survival, claim, showTips) {\r\n        if (!premium) {\r\n          this.notifyError(this.$t('productProgramme.message.please_select_premium'))\r\n          return\r\n        } else if (survival.length === 0 && claim.length === 0) {\r\n          this.notifyError(this.$t('productProgramme.message.please_select_benefit'))\r\n          return\r\n        } else {\r\n          if (this.tableData_combination_add.length > 0 && this.tableData_combination_add[0].premiumCode !== premium.pdPremCode) {\r\n            this.notifyError(this.$t('productProgramme.message.only_one_premium_for_one_programme'))\r\n            return\r\n          }\r\n        }\r\n        this.resetTableDataCombinationBeforeAdd()\r\n        if (survival.length > 0) {\r\n          for (const survivalItem of survival) {\r\n            this.resetFormCombinationAdd()\r\n            Object.assign(this.form_combination_add, survivalItem)\r\n            this.form_combination_add.premiumId = premium.id\r\n            this.form_combination_add.premiumCode = premium.pdPremCode\r\n            this.form_combination_add.premiumName = premium.pdPayName\r\n            this.tableData_combination_before_add.push(this.form_combination_add)\r\n          }\r\n        }\r\n        if (claim.length > 0) {\r\n          for (const claimItem of claim) {\r\n            this.resetFormCombinationAdd()\r\n            Object.assign(this.form_combination_add, claimItem)\r\n            this.form_combination_add.premiumId = premium.id\r\n            this.form_combination_add.premiumCode = premium.pdPremCode\r\n            this.form_combination_add.premiumName = premium.pdPayName\r\n            this.tableData_combination_before_add.push(this.form_combination_add)\r\n          }\r\n        }\r\n        // 验证是否有重复信息\r\n        this.resetTableDataCombinationDuplicatedAdd()\r\n        for (const form_combination_before_add of this.tableData_combination_before_add) {\r\n          for (const form_combination_add of this.tableData_combination_add) {\r\n            if (form_combination_before_add.premiumCode === form_combination_add.premiumCode && form_combination_before_add.pdBnftCode === form_combination_add.pdBnftCode) {\r\n              this.tableData_combination_duplicated_add.push(form_combination_before_add)\r\n            }\r\n          }\r\n        }\r\n        if (this.tableData_combination_duplicated_add.length > 0) {\r\n          this.getOrderNumber('combination_duplicated_add')\r\n          this.dialogVisible_duplicated = true\r\n        } else {\r\n          for (const form_combination_before_add of this.tableData_combination_before_add) {\r\n            this.tableData_combination_add.push(form_combination_before_add)\r\n          }\r\n          this.getOrderNumber('combination_add')\r\n          if (showTips === true) {\r\n            this.notifySuccess(this.$t('productProgramme.message.add_success'))\r\n          }\r\n        }\r\n      }\r\n      ,\r\n      handleDeleteCombinationAdd(row) {\r\n        this.tableData_combination_add.splice(this.tableData_combination_add.indexOf(row), 1)\r\n        this.getOrderNumber('combination_add')\r\n      }\r\n      ,\r\n      handleUpdateAll() {\r\n        this.$refs.form_programme.validate(pass => {\r\n          if (pass) {\r\n            if (this.tableData_combination_add.length === 0) {\r\n              this.notifyError(this.$t('productProgramme.message.please_add_combination'))\r\n              return\r\n            }\r\n            this.form_programme.pdInfoId = this.product.id\r\n            this.form_programme.pdCode = this.product.pdCode\r\n            updatePdtempPdProg(this.buildRequestData({\r\n              programme: this.form_programme,\r\n              premiumId: this.tableData_combination_add[0].premiumId,\r\n              premiumCode: this.tableData_combination_add[0].premiumCode,\r\n              benefitList: this.tableData_combination_add\r\n            })).then(() => {\r\n              this.cancelUpdateProgramme()\r\n              this.$emit('childFn', true);\r\n              this.notifySuccess(this.$t('productProgramme.message.update_all_success'))\r\n              this.$refs.page_programme.reload()\r\n              this.$nextTick(() => {\r\n                this.$refs.form_programme.clearValidate()\r\n              })\r\n            })\r\n          } else {\r\n            this.notifyError(this.$t('productProgramme.message.form_validation_failed'))\r\n          }\r\n        })\r\n      }\r\n      ,\r\n      handleSaveAll() {\r\n        this.$refs.form_programme.validate(pass => {\r\n          if (pass) {\r\n            if (this.tableData_combination_add.length === 0) {\r\n              this.notifyError(this.$t('productProgramme.message.please_add_combination'))\r\n              return\r\n            }\r\n            this.form_programme.pdInfoId = this.product.id\r\n            this.form_programme.pdVerId = this.product.pdVerId\r\n            this.form_programme.pdCode = this.product.pdCode\r\n            const param = {\r\n              programme: this.form_programme,\r\n              premiumId: this.tableData_combination_add[0].premiumId,\r\n              premiumCode: this.tableData_combination_add[0].premiumCode,\r\n              benefitList: this.tableData_combination_add,\r\n              typeRegion: this.product_extra.typeRegion,\r\n              needCheckingPremium: true\r\n            }\r\n            addPdtempPdProg(this.buildRequestData(param)).then(response => {\r\n              let successFlag = response.data\r\n              if (successFlag === true) {\r\n                this.resetFormProgramme()\r\n                this.resetFormCombination()\r\n                this.resetTableDataCombinationAdd()\r\n                this.$emit('childFn', true);\r\n                this.notifySuccess(this.$t('productProgramme.message.save_all_success'))\r\n                this.$refs.page_programme.reload()\r\n                this.$nextTick(() => {\r\n                  this.$refs.form_programme.clearValidate()\r\n                })\r\n              } else {\r\n                this.$confirm(this.$t('productProgramme.message.confirm_overwrite_programme'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  param.needCheckingPremium = false\r\n                  addPdtempPdProg(this.buildRequestData(param)).then(() => {\r\n                    this.resetFormProgramme()\r\n                    this.resetFormCombination()\r\n                    this.resetTableDataCombinationAdd()\r\n                    this.$emit('childFn', true);\r\n                    this.notifySuccess(this.$t('productProgramme.message.save_all_success'))\r\n                    this.$refs.page_programme.reload()\r\n                    this.$nextTick(() => {\r\n                      this.$refs.form_programme.clearValidate()\r\n                    })\r\n                  })\r\n                }).catch(() => {\r\n                  this.$message({\r\n                    type: 'info',\r\n                    message: this.$t('productProgramme.message.canceled')\r\n                  });\r\n                })\r\n              }\r\n            })\r\n          } else {\r\n            this.notifyError(this.$t('productProgramme.message.form_validation_failed'))\r\n          }\r\n        })\r\n      }\r\n      ,\r\n      handleDeleteProgramme() {\r\n        deletePdtempPdProg(this.selectedProgramme.programme.id).then(() => {\r\n          this.cancelUpdateProgramme()\r\n          this.notifySuccess(this.$t('successMessage.delete'))\r\n          this.$refs.page_programme.reload()\r\n          this.$nextTick(() => {\r\n            this.$refs.form_programme.clearValidate()\r\n          })\r\n        })\r\n      }\r\n      ,\r\n      handleClearFormProgramme() {\r\n        this.resetFormProgramme()\r\n        this.resetFormCombination()\r\n        this.resetTableDataCombinationAdd()\r\n        this.$nextTick(() => {\r\n          this.$refs.form_programme.clearValidate()\r\n        })\r\n      }\r\n      ,\r\n      // 获取相同编号的数组（每次表格数据改变后需要调用这个方法）\r\n      getOrderNumber(arrayName) {\r\n        let tableData\r\n        let orderIndexArr\r\n        if (arrayName === 'combination_add') {\r\n          tableData = this.tableData_combination_add\r\n        } else if (arrayName === 'combination_duplicated_add') {\r\n          tableData = this.tableData_combination_duplicated_add\r\n        } else {\r\n          return\r\n        }\r\n        orderIndexArr = []\r\n        // 按照 premiumCode 排序，将 premiumCode 相同的数据连在一起\r\n        tableData = this._.orderBy(tableData, ['premiumCode', 'pdBnftCode'], ['asc', 'asc'])\r\n        if (arrayName === 'combination_add') {\r\n          this.tableData_combination_add = tableData\r\n        } else if (arrayName === 'combination_duplicated_add') {\r\n          this.tableData_combination_duplicated_add = tableData\r\n        }\r\n        let orderObj = {}\r\n        tableData.forEach((element, index) => {\r\n          element.rowIndex = index\r\n          if (orderObj[element.premiumCode]) {\r\n            orderObj[element.premiumCode].push(index)\r\n          } else {\r\n            orderObj[element.premiumCode] = []\r\n            orderObj[element.premiumCode].push(index)\r\n          }\r\n        })\r\n        // 需要合并的行的 index 已经存在了同一个数组里，把这些数组存储到 this.orderIndexArr\r\n        for (const k in orderObj) {\r\n          orderIndexArr.push(orderObj[k])\r\n        }\r\n        if (arrayName === 'combination_add') {\r\n          this.orderIndexArr_combination_add = orderIndexArr\r\n          this.getMergedRowIndex(this.tableData_combination_add, this.orderIndexArr_combination_add)\r\n        } else if (arrayName === 'combination_duplicated_add') {\r\n          this.orderIndexArr_combination_duplicated_add = orderIndexArr\r\n          this.getMergedRowIndex(this.tableData_combination_duplicated_add, this.orderIndexArr_combination_duplicated_add)\r\n        }\r\n      }\r\n      ,\r\n      getMergedRowIndex(tableData, orderIndexArr) {\r\n        a:for (const row of tableData) {\r\n          const rowIndex = row.rowIndex\r\n          for (let i = 0; i < orderIndexArr.length; i++) {\r\n            const val = orderIndexArr[i]\r\n            for (const number of val) {\r\n              if (rowIndex === number) {\r\n                row.mergedRowIndex = i\r\n                continue a\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      ,\r\n      objectSpanMethod_programme({row, column, rowIndex, columnIndex}) {\r\n        if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2 || columnIndex === 3 || columnIndex === 4 || columnIndex === 5) {\r\n          for (let i = 0; i < this.orderIndexArr_programme.length; i++) {\r\n            let element = this.orderIndexArr_programme[i]\r\n            for (let j = 0; j < element.length; j++) {\r\n              let item = element[j]\r\n              if (rowIndex === item) {\r\n                if (j === 0) {\r\n                  return {\r\n                    rowspan: element.length,\r\n                    colspan: 1\r\n                  }\r\n                } else {\r\n                  return {\r\n                    rowspan: 0,\r\n                    colspan: 0\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      ,\r\n      objectSpanMethod_combination_add({row, column, rowIndex, columnIndex}) {\r\n        if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2) {\r\n          for (let i = 0; i < this.orderIndexArr_combination_add.length; i++) {\r\n            let element = this.orderIndexArr_combination_add[i]\r\n            for (let j = 0; j < element.length; j++) {\r\n              let item = element[j]\r\n              if (rowIndex === item) {\r\n                if (j === 0) {\r\n                  return {\r\n                    rowspan: element.length,\r\n                    colspan: 1\r\n                  }\r\n                } else {\r\n                  return {\r\n                    rowspan: 0,\r\n                    colspan: 0\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      ,\r\n      objectSpanMethod_combination_duplicated_add({row, column, rowIndex, columnIndex}) {\r\n        if (columnIndex === 0 || columnIndex === 1 || columnIndex === 2 || columnIndex === 5) {\r\n          for (let i = 0; i < this.orderIndexArr_combination_duplicated_add.length; i++) {\r\n            let element = this.orderIndexArr_combination_duplicated_add[i]\r\n            for (let j = 0; j < element.length; j++) {\r\n              let item = element[j]\r\n              if (rowIndex === item) {\r\n                if (j === 0) {\r\n                  return {\r\n                    rowspan: element.length,\r\n                    colspan: 1\r\n                  }\r\n                } else {\r\n                  return {\r\n                    rowspan: 0,\r\n                    colspan: 0\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      ,\r\n      resetSelectedProgramme() {\r\n        this.selectedProgramme = {\r\n          id: undefined,\r\n          programmeCode: '',\r\n          programmeName: '',\r\n          premiumCode: '',\r\n          premiumName: '',\r\n          benefitCode: '',\r\n          benefitName: '',\r\n          benefitType: '',\r\n          programme: {},\r\n          premium: {}\r\n        }\r\n      }\r\n      ,\r\n      // 重置（新建）对象与数组\r\n      resetFormProgramme() {\r\n        this.form_programme = {\r\n          id: undefined,\r\n          pdInfoId: undefined,\r\n          pdVerId: undefined,\r\n          pdCode: '',\r\n          pdProgCode: '',\r\n          pdProgName: '',\r\n          pdOptFlag: 'N',\r\n          pdInsuPeriod: undefined,\r\n          pdInsuPeriodUnit: '',\r\n          pdInsuPeriodCalMode: '',\r\n          pdInsuEndCalRule: '0',\r\n          pdAmntCalRule: '',\r\n          pdAddAmntFlag: 'Y',\r\n          pdPayEndCalMode: '',\r\n          pdAmntSaleType: '',\r\n          operator: '',\r\n          createTime: '',\r\n          updateTime: ''\r\n        }\r\n        this.$nextTick(() => {\r\n          this.$refs.form_programme.clearValidate()\r\n        })\r\n      }\r\n      ,\r\n      resetFormCombination() {\r\n        this.pageFlag.premium = false\r\n        this.pageFlag.claim = false\r\n        this.pageFlag.survival = false\r\n        this.indeterminate.survival = false\r\n        this.indeterminate.claim = false\r\n        this.form_combination = {\r\n          premium: undefined,\r\n          survivalFlag: false,\r\n          claimFlag: false,\r\n          survival: [],\r\n          claim: []\r\n        }\r\n      }\r\n      ,\r\n      resetFormCombinationAdd() {\r\n        this.form_combination_add = {\r\n          // PdtempPdBnft 实体类属性\r\n          id: undefined,\r\n          pdBnftCode: '',\r\n          pdBnftName: '',\r\n          pdBnftType: '',\r\n          pdAddAmntFlag: '',\r\n          pdBnftCalMode: '',\r\n          pdCalcId: undefined,\r\n          pdUrgePayFlag: '',\r\n          createTime: '',\r\n          updateTime: '',\r\n          operator: '',\r\n          // vo属性\r\n          premiumId: undefined,\r\n          premiumCode: '',\r\n          premiumName: '',\r\n          pdAddAmntProgFlag: ''\r\n        }\r\n      }\r\n      ,\r\n      resetTableDataCombinationAdd() {\r\n        this.tableData_combination_add = []\r\n      }\r\n      ,\r\n      resetTableDataCombinationBeforeAdd() {\r\n        this.tableData_combination_before_add = []\r\n      }\r\n      ,\r\n      resetTableDataCombinationDuplicatedAdd() {\r\n        this.tableData_combination_duplicated_add = []\r\n      }\r\n      ,\r\n      toPremiumPage(pdPremCode) {\r\n        if (!pdPremCode) {\r\n          this.notifyError(this.$t('productProgramme.message.invalidPremCode'))\r\n        } else {\r\n          this.selectedPremiumCode = pdPremCode\r\n          this.dialogVisible.premium = true\r\n        }\r\n      }\r\n      ,\r\n      toSrvBnftPage(survival) {\r\n        if (Object.keys(survival).length > 0) {\r\n          this.selectedSrvBnft = survival\r\n          this.dialogVisible.survivalBenefit = true\r\n        } else {\r\n          this.notifyError(this.$t('productProgramme.message.invalidBenefit'))\r\n        }\r\n      }\r\n      ,\r\n      toClmBnftPage(claim) {\r\n        if (Object.keys(claim).length > 0) {\r\n          this.selectedClmBnft = claim\r\n          this.dialogVisible.claimBenefit = true\r\n        } else {\r\n          this.notifyError(this.$t('productProgramme.message.invalidBenefit'))\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n  .showDiv {\r\n    width: 90%;\r\n    height: 100%;\r\n    margin-top: -40px;\r\n    margin-left: -40px;\r\n    position: absolute;\r\n    background: #ffffff00;\r\n    z-index: 999;\r\n  }\r\n\r\n  .divider {\r\n    color: black;\r\n    background-color: black;\r\n    width: 1px;\r\n  }\r\n\r\n</style>\r\n"]}]}