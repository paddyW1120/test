{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-underwriting-def\\underwriting-addition\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-operation-def\\pd-underwriting-def\\underwriting-addition\\index.vue","mtime":1609847106978},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAidnVleCINCmltcG9ydCB7Z2V0UGF5RGF0ZSwgZ2V0UGRBdHRySW5mbywgZ2V0UGRDbHNMYWJJbmZvfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcGR0ZW1wcGRwcmVtIg0KaW1wb3J0IHsNCiAgYWRkUGR0ZW1wUGRFeHRQcmVtLA0KICBkZWxldGVQZHRlbXBQZEV4dFByZW0sDQogIGdldEFsbFByZW1pdW0sDQogIHVwZGF0ZVBkdGVtcFBkRXh0UHJlbQ0KfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vcGR0ZW1wcGRleHRwcmVtIg0KaW1wb3J0IHBkRGlzY291bnRGb3JtdWxhDQogIGZyb20gIkAvdmlld3MvcHJvZHVjdC1kZWZpbml0aW9uL3BkLWZyYW1ld29yay1kZWYvcGQtc3RydWN0dXJlLWRlZi9wYXltZW50LWRlZi9kaXNjb3VudC1mb3JtdWxhIg0KaW1wb3J0IHBkRGlzY291bnRGb3JtdWxhU2VsZWN0DQogIGZyb20gIkAvdmlld3MvcHJvZHVjdC1kZWZpbml0aW9uL3BkLWZyYW1ld29yay1kZWYvcGQtc3RydWN0dXJlLWRlZi9wYXltZW50LWRlZi9kaXNjb3VudC1mb3JtdWxhLXNlbGVjdCINCmltcG9ydCBwcmVtQW1vdW50Rm9ybXVsYSBmcm9tICJAL3ZpZXdzL3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1mcmFtZXdvcmstZGVmL3BkLXN0cnVjdHVyZS1kZWYvcGF5bWVudC1kZWYvcHJlbS1mb3JtdWxhIg0KaW1wb3J0IHByZW1BbW91bnRGb3JtdWxhU2VsZWN0DQogIGZyb20gIkAvdmlld3MvcHJvZHVjdC1kZWZpbml0aW9uL3BkLWZyYW1ld29yay1kZWYvcGQtc3RydWN0dXJlLWRlZi9wYXltZW50LWRlZi9wcmVtLWZvcm11bGEtc2VsZWN0Ig0KaW1wb3J0IHByZW1SdWxlcyBmcm9tICJAL3ZpZXdzL3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1mcmFtZXdvcmstZGVmL3BkLXN0cnVjdHVyZS1kZWYvcGF5bWVudC1kZWYvcHJlbS1ydWxlIg0KaW1wb3J0IHByZW1SdWxlc1NlbGVjdCBmcm9tICJAL3ZpZXdzL3Byb2R1Y3QtZGVmaW5pdGlvbi9wZC1mcmFtZXdvcmstZGVmL3BkLXN0cnVjdHVyZS1kZWYvcGF5bWVudC1kZWYvcHJlbS1ydWxlLXNlbGVjdCINCg0KaW1wb3J0IGd1aWRlIGZyb20gJ0Avdmlld3MvcHJvZHVjdC1kZWZpbml0aW9uL3BkLWZyYW1ld29yay1kZWYvcGQtc3RydWN0dXJlLWRlZi9wYXltZW50LWRlZi9ndWlkZScNCg0KbGV0IF90aGlzDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInVuZGVyd3JpdGluZ0FkZGl0aW9uIiwNCiAgZmlsdGVyczogew0KICAgIGZpbHRlcl9kYXRlU3VmZml4KGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV9kYXRlX3N1ZmZpeCcsIGNvZGUsIHRydWUpDQogICAgfSwNCiAgICBmaWx0ZXJfZnJlcShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fZnJlcScsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfc3RhcnRDYWxjUnVsZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fc3RhcnRfY2FsY19ydWxlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9lbmRDYWxjUnVsZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fZW5kX2NhbGNfcnVsZScsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfc3RhcnRDYWxjTWV0aG9kKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV9zdGFydF9jYWxjX21ldGhvZCcsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfZW5kQ2FsY01ldGhvZChjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fZW5kX2NhbGNfbWV0aG9kJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9hZGRpdGlvblR5cGUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZF9wcmVtX2FkZGl0aW9uX3R5cGUnLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX2FkZGl0aW9uTW9kZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fYWRkaXRpb25fbW9kZScsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfYWNjb3VudFR5cGUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZF9wcmVtX2FjY291bnRfdHlwZScsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfYWRkaXRpb25QYXlQZXJzb24oY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZEFkZFByZW1PYmonLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX2FkZGl0aW9uQWRkaXRpb25Nb2RlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV9hZGRpdGlvbl9hZGRpdGlvbl9tb2RlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wYXlaZXJvKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV96ZXJvJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9zZXJ2aWNlQ2hhcmdlT2Zmc2V0KGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV9zZXJ2aWNlX2NoYXJnZV9vZmZzZXQnLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX3BkQ21wblR5cGUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwcmVmZXJlbnRpYWxUeXBlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZENtcG5DYWxjTW9kZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3ByZWZlcmVudGlhbENsY3VsYXRpb25UeXBlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZENtcG5SYW5nZShjb2RlKSB7DQogICAgICBmb3IgKGNvbnN0IGRlZiBvZiBfdGhpcy5kZWZUYWJsZURhdGEpIHsNCiAgICAgICAgaWYgKGRlZi5wZFByZW1Db2RlID09PSBjb2RlKSB7DQogICAgICAgICAgcmV0dXJuIGRlZi5wZFByZW1Db2RlICsgIjoiICsgZGVmLnBkUGF5TmFtZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBmb3IgKGNvbnN0IGRlZiBvZiBfdGhpcy5hZGRpdGlvblRhYmxlRGF0YSkgew0KICAgICAgICBpZiAoZGVmLnBkRXh0UHJlbUNvZGUgPT09IGNvZGUpIHsNCiAgICAgICAgICByZXR1cm4gZGVmLnBkRXh0UHJlbUNvZGUgKyAiOiIgKyBkZWYucGRFeHRQcmVtTmFtZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gY29kZQ0KICAgIH0sDQogICAgZmlsdGVyX3BheVVyZ2luZyhjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fdXJnaW5nJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wYXlGcmVxdWVuY3koY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwYXltZW50RnJlcXVlbmN5JywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wYXlkYXRldmFsdWUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZFBheUVuZENhbE1vZGUnLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX3BheW1lbnRJZChwZFByZW1JZCkgew0KICAgICAgZm9yIChjb25zdCBkZWYgb2YgX3RoaXMuZGVmVGFibGVEYXRhKSB7DQogICAgICAgIGlmIChkZWYuaWQgPT09IHBkUHJlbUlkKSB7DQogICAgICAgICAgcmV0dXJuIGRlZi5wZFBheU5hbWUNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICcnDQogICAgfSwNCiAgICBmaWx0ZXJfcGRQYXlTdGFydFBlcmlvZChsaXN0KSB7DQogICAgICBsZXQgcmV0dXJuRGF0YSA9ICcnDQogICAgICBpZiAobGlzdC5sZW5ndGgpIHsNCiAgICAgICAgbGlzdC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgIGlmIChyZXR1cm5EYXRhLmxlbmd0aCkgew0KICAgICAgICAgICAgcmV0dXJuRGF0YSArPSAnLCcNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuRGF0YSArPSBkYXRhLnBkUGF5U3RhcnRQZXJpb2QNCiAgICAgICAgICByZXR1cm5EYXRhICs9IF90aGlzLmdldENvZGVOYW1lKCdwZF9wcmVtX2RhdGVfc3VmZml4JywgZGF0YS5wZFBheVN0YXJ0UGVyVW5pdCwgdHJ1ZSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXR1cm5EYXRhDQogICAgfSwNCiAgICBmaWx0ZXJfcGRQYXlFbmRQZXJpb2QobGlzdCkgew0KICAgICAgbGV0IHJldHVybkRhdGEgPSAnJw0KICAgICAgaWYgKGxpc3QubGVuZ3RoKSB7DQogICAgICAgIGxpc3QuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICBpZiAocmV0dXJuRGF0YS5sZW5ndGgpIHsNCiAgICAgICAgICAgIHJldHVybkRhdGEgKz0gJywnDQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybkRhdGEgKz0gZGF0YS5wZFBheUVuZFBlcmlvZA0KICAgICAgICAgIHJldHVybkRhdGEgKz0gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fZGF0ZV9zdWZmaXgnLCBkYXRhLnBkUGF5RW5kVW5pdCwgdHJ1ZSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXR1cm5EYXRhDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIF90aGlzID0gdGhpcw0KICAgIHJldHVybiB7DQogICAgICBwcm9kdWN0Q2FsY1JldmlzaW9uU2hvd0lOZm86IGZhbHNlLA0KICAgICAgcGRQYXlGcmVxQ29weTogW10sDQogICAgICBxdWlja2ZpbHRlckhhbmRsZXJMaXN0MDogW10sDQogICAgICBxdWlja2ZpbHRlckhhbmRsZXJMaXN0MTogW10sDQogICAgICBxdWlja2ZpbHRlckhhbmRsZXJMaXN0MjogW10sDQogICAgICBxdWlja2ZpbHRlckhhbmRsZXJMaXN0MzogW10sDQogICAgICBmaWx0ZXJIYW5kbGVyTGlzdDA6IFtdLA0KICAgICAgZmlsdGVySGFuZGxlckxpc3QxOiBbXSwNCiAgICAgIGZpbHRlckhhbmRsZXJMaXN0MjogW10sDQogICAgICBmaWx0ZXJIYW5kbGVyTGlzdDM6IFtdLA0KICAgICAgZmlsdGVySGFuZGxlckxpc3Q0OiBbXSwNCiAgICAgIGZpbHRlcnBkRXh0UHJlbU5hbWVMaXN0MTogW10sDQogICAgICBmaWx0ZXJwZEV4dFByZW1OYW1lTGlzdDI6IFtdLA0KICAgICAgZGV0YWlsVHlwZU9wdGlvbkxpc3Q6IFtdLA0KICAgICAgcGF5RGF0ZUZvcm06IHsNCiAgICAgICAgcGF5RGF0ZVRhYmxlOiBbXSwNCiAgICAgIH0sDQogICAgICB0YWJsZUNvdW50OiAwLA0KICAgICAgdGFibGVDb3VudERpc2NvdW50OiAwLA0KICAgICAgcGRDbXBuQ2FsY0NvZGUxOiAnJywNCiAgICAgIGZsYWcxOiAwLA0KICAgICAgLy/lhazlvI8NCiAgICAgIGRpYWxvZ1Nob3c6IHsNCiAgICAgICAgcHJlbUFtb3VudEZvcm11bGE6IGZhbHNlLA0KICAgICAgICBwcmVtQW1vdW50Rm9ybXVsYVNlbGVjdDogZmFsc2UNCiAgICAgIH0sDQogICAgICBndWFyYW50ZWVEZXRhaWxzOiAnJywNCiAgICAgIGNhbGN1bGF0aW9uRm9ybXVsYVR5cGU6ICcnLA0KICAgICAgcGRVd1NpVHlwZU9wdGlvbnM6ICcnLA0KICAgICAgcGRVd1NpVHlwZUR0T3B0aW9uczogJycsDQogICAgICBwZERpc0NvdW50OiAnJywNCiAgICAgIC8v6KeE5YiZDQogICAgICBkaWFsb2dSdWxlc1Nob3c6IHsNCiAgICAgICAgcHJlbVJ1bGVzOiBmYWxzZSwNCiAgICAgICAgcHJlbVJ1bGVzU2VsZWN0OiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIHNob3dQYWdlRmxhZzogMCwNCiAgICAgIGRlZlRhYmxlRGF0YTogW10sDQogICAgICBhZGRpdGlvblRhYmxlRGF0YTogW10sDQogICAgICBhZGRpdGlvbkFkZFRhYmxlRGF0YTogW10sDQogICAgICBwZENtcG5UeXBlRmlsdGVyczogW10sDQogICAgICByb3dJbmRleDogJy0xJywNCiAgICAgIG9yZGVySW5kZXhBcnJfYWRkaXRpb246IFtdLA0KICAgICAgb3JkZXJJbmRleEFycl9hZGRpdGlvbl9hZGQ6IFtdLA0KICAgICAgb3JkZXJJbmRleEFycl9hZGRpdGlvbl9kaXNjb3VudDogW10sDQogICAgICBob3Zlck9yZGVyQXJyOiBbXSwNCiAgICAgIHF1aWNraWNvbl9kaXNjb3VudDogImVsLWljb24tYXJyb3ctcmlnaHQiLA0KICAgICAgcXVpY2tzaG93OiBmYWxzZSwNCiAgICAgIGZpbHRlckRpc2NvdW50Q29kZTogW10sDQogICAgICBwZENtcG5SYW5nZUZpbHRlcnM6IFtdLA0KICAgICAgcHJvZHVjdE9yaWdpbmFsTGlzdDogW10sDQogICAgICBwcm9kdWN0TGlzdDogW10sDQogICAgICBzZWxlY3RlZFJlZmVyZW5jZVByb2R1Y3RJZDogdW5kZWZpbmVkLA0KICAgICAgZm9ybV9xdWljazogew0KICAgICAgICB0eXBlUmVnaW9uOiAnJywNCiAgICAgIH0sDQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgZXFfcGRJbmZvSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgZXFfcGRQcmVtQ2FsTW9kZTogJycsDQogICAgICAgIGFjY291bnRSZWxhdGVkOiAnJywNCiAgICAgICAgZXh0cmFQcmVtaXVtRmxhZzogJycsDQogICAgICAgIGVxX2lkOiAnJywNCiAgICAgICAgYnlQYWdlOiAnWScsDQogICAgICAgIGZpbmVsaW5lc1JlZ2lvbjogJycsDQogICAgICAgIGZpcnN0T3BlblBhZ2VGbGFnOiAnWScsDQogICAgICB9LA0KICAgICAgcGFyYW1zX2N1cnJlbnRQcm9kdWN0OiB7DQogICAgICAgIGVxX3BkSW5mb0lkOiB1bmRlZmluZWQsDQogICAgICAgIGxpa2VfcGF5TmFtZTogJycsDQogICAgICAgIGVxX3BheUNvZGU6ICcnDQogICAgICB9LA0KICAgICAgcGFyYW1zX2FkZGl0aW9uOiB7DQogICAgICAgIHByZW1pdW1MaXN0OiBbXQ0KICAgICAgfSwNCiAgICAgIGNvbmZpZ1JhbmdlTGVuZ3RoOiAnJywNCiAgICAgIGZpbHRlckNtcG5UeXBlOiAnMSREJEknLA0KICAgICAgYWRkRmVlRmxhZzogdHJ1ZSwNCiAgICAgIGRpc2NvdW50RmxhZzogJ04nLA0KICAgICAgc2VsZWN0ZWREaXNjb3VudDoge30sDQogICAgICBzZWxlY3RlZERlZjoge30sDQogICAgICBzZWxlY3RlZERlZkluUXVlcnlSZXN1bHQ6IHt9LA0KICAgICAgc2VsZWN0ZWRBZGRpdGlvbjoge30sDQogICAgICBzZWxlY3RlZEFkZGl0aW9uQWRkczogW10sDQogICAgICAvLyDkuqflk4Hkv6Hmga8NCiAgICAgIHByb2R1Y3Q6IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgYlR5cGU6ICcnLA0KICAgICAgICBjVHlwZTogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkRWRpdGlvbjogJycsDQogICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRTYWxlY2hubDogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIHBkU2hvcnRuYW1lOiAnJywNCiAgICAgICAgcGRFbk5hbWU6ICcnLA0KICAgICAgICBwZFNob3J0RW5OYW1lOiAnJywNCiAgICAgICAgb3BlcmF0b3I6ICcnLA0KICAgICAgICBwZFN0YXJ0RGF0ZVJ1bGU6ICcnLA0KICAgICAgICBwZFN0YXJ0RGF0ZU1vZGU6ICcnLA0KICAgICAgICBwZFN0YXJ0UGVyaW9kOiB1bmRlZmluZWQsDQogICAgICAgIHBkU3RhcnRQZXJpb2RVbml0OiAnJywNCiAgICAgICAgcGRFbmREYXRlUnVsZTogJycsDQogICAgICAgIHBkRW5kRGF0ZU1vZGU6ICcnLA0KICAgICAgICBwZEVuZFBlcmlvZDogdW5kZWZpbmVkLA0KICAgICAgICBwZEVuZFBlcmlvZFVuaXQ6ICcnLA0KICAgICAgICBwZEdyYWNlUGVyaW9kOiB1bmRlZmluZWQsDQogICAgICAgIHBkT2JzZXJ2YXRpb25EYXk6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRBcHBsRGF0ZTogdW5kZWZpbmVkLA0KICAgICAgICBwZFByb2Nlc3NJZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFN0YXJ0RGF0ZTogdW5kZWZpbmVkLA0KICAgICAgICBwZFN0b3BEYXRlOiB1bmRlZmluZWQsDQogICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgdXBkYXRlVGltZTogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgcHJvZHVjdF9leHRyYTogew0KICAgICAgICB0eXBlUmVnaW9uOiAnJywNCiAgICAgICAgcGRQYXlGcmVxOiBbXQ0KICAgICAgfSwNCiAgICAgIGZvcm1fZGVmOiB7fSwNCiAgICAgIGZvcm1fYWRkaXRpb246IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRQcmVtSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRWZXJJZDogdW5kZWZpbmVkLA0KICAgICAgICBvcGVyYXRvcjogJycsDQogICAgICAgIHBkRXh0UHJlbUNvZGU6ICcnLA0KICAgICAgICBwZEV4dFByZW1OYW1lOiAnJywNCiAgICAgICAgcGRQcmVtTmFtZTogJycsDQogICAgICAgIHBkUHJlbUNvZGU6ICcnLA0KICAgICAgICBwZEV4dFByZW1PYmo6ICcnLA0KICAgICAgICBwZEV4dFByZW1Nb2RlOiAnJywNCiAgICAgICAgcGRFeHRQcmVtVHlwZTogJycsDQogICAgICAgIHBkTWF4VmFsOiB1bmRlZmluZWQsDQogICAgICAgIHBkRXh0UHJlbUNhbGNDb2RlOiAnJywNCiAgICAgICAgY3JlYXRlVGltZTogdW5kZWZpbmVkLA0KICAgICAgICB1cGRhdGVUaW1lOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICBmb3JtX2FkZGl0aW9uX2FkZDogew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFByZW1JZDogW10sDQogICAgICAgIHBkRXh0UHJlbU9iajogWyIyIl0sDQogICAgICAgIHBkRXh0UHJlbU1vZGU6IFtdLA0KICAgICAgICBwZEV4dFByZW1UeXBlOiBbXSwNCiAgICAgICAgcGRFeHRQcmVtQ2FsY0NvZGU6ICcnDQogICAgICB9LA0KICAgICAgcGFnZUZsYWc6IHsNCiAgICAgICAgdGFibGVWaXNpYmxlX2RlZjogdHJ1ZSwNCiAgICAgICAgZGlhbG9nVmlzaWJsZV9hZGRpdGlvblR5cGU6IGZhbHNlLA0KICAgICAgICBkaWFsb2dWaXNpYmxlX3F1ZXJ5UmVzdWx0OiBmYWxzZSwNCiAgICAgICAgYWRkaXRpb25GbGFnOiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIGRpc3BsYXlOYW1lX2FkZGl0aW9uVHlwZTogJycsDQogICAgICBpc0ZpeGVkOiBmYWxzZSwNCiAgICAgIGZpeGVkQ2xhc3NOYW1lOiAnJywNCiAgICAgIGZpbHRlcnM6IHsNCiAgICAgICAgcGRBZGRQcmVtTW9kZTogW10sDQogICAgICAgIHBkUHJlbUNhbE1vZGU6IFtdLA0KICAgICAgICBwZFBheUFjY0tpbmQ6IFtdDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgcGRQYXlFbmRQZXJpb2Q6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncGRhZGRpdGlvbi5tZXNzYWdlLnBsZWFzZV9lbnRlcicpICsgdGhpcy4kdCgncGRhZGRpdGlvbi5wYXlfZGF0ZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XSwNCiAgICAgICAgcGRQYXlOYW1lOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkYWRkaXRpb24ubWVzc2FnZS5wbGVhc2VfZW50ZXInKSArIHRoaXMuJHQoJ3BkYWRkaXRpb24ucGF5X25hbWUnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgfV0sDQogICAgICAgIHBkUHJlbUNhbE1vZGU6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncGRhZGRpdGlvbi5tZXNzYWdlLnBsZWFzZV9lbnRlcicpICsgdGhpcy4kdCgncGRhZGRpdGlvbi5wYXlfY2FsY19tZXRob2QnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XSwNCiAgICAgICAgcGRFeHRQcmVtTmFtZTogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWKoOi0ueWQjeensCIsIHRyaWdnZXI6ICdibHVyJ31dLA0KICAgICAgICBwZFByZW1JZDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeWKoOi0ueWvueixoSIsIHRyaWdnZXI6ICdibHVyJ31dLA0KICAgICAgICBwZEV4dFByZW1PYmo6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nliqDotLnlr7nosaEiLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgcGRFeHRQcmVtTW9kZTogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeWKoOi0ueaWueW8jyIsIHRyaWdnZXI6ICdibHVyJ31dLA0KICAgICAgICBwZEV4dFByZW1UeXBlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup5Yqg6LS557G75Z6LIiwgdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICB9LA0KICAgICAgcnVsZXNfY291bnQ6IHsNCiAgICAgICAgcGRQcmVtSWQ6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncGRhZGRpdGlvbi5tZXNzYWdlLnBsZWFzZV9lbnRlcicpICsgdGhpcy4kdCgncGRhZGRpdGlvbi5wYXlfbmFtZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XSwNCiAgICAgICAgcGRDbXBuUmFuZ2U6IFt7DQogICAgICAgICAgdHlwZTogJ2FycmF5JywNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwZGFkZGl0aW9uLm1lc3NhZ2UucGxlYXNlX2VudGVyJykgKyB0aGlzLiR0KCdwZGFkZGl0aW9uLnBheV9kaXNjb3VudF9yYW5nZScpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dLA0KICAgICAgICBwZENtcG5UeXBlOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkYWRkaXRpb24ubWVzc2FnZS5wbGVhc2VfZW50ZXInKSArIHRoaXMuJHQoJ3BkYWRkaXRpb24ucGF5X2Rpc2NvdW50X3R5cGUnKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgfV0sDQogICAgICAgIHBkQ21wbk9yZGVyOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3BkYWRkaXRpb24ubWVzc2FnZS5wbGVhc2VfZW50ZXInKSArIHRoaXMuJHQoJ3BkYWRkaXRpb24ucGF5X2Rpc2NvdW50X29yZGVyJyksDQogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgIH1dLA0KICAgICAgICBwZENtcG5DYWxjTW9kZTogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwZGFkZGl0aW9uLm1lc3NhZ2UucGxlYXNlX2VudGVyJykgKyB0aGlzLiR0KCdwZGFkZGl0aW9uLnBheV9jYWxjX21ldGhvZCcpLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgIH1dDQogICAgICB9LA0KICAgICAgcnVsZXNfcXVpY2s6IHsNCiAgICAgICAgZmluZWxpbmVzUmVnaW9uOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2Zvcm0ucGxlYXNlX3NlbGVjdCcpICsgdGhpcy4kdCgncGRhZGRpdGlvbi5maW5lbGluZXNSZWdpb24nKSwNCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICB9XQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIHByZW1BbW91bnRGb3JtdWxhLA0KICAgIHByZW1BbW91bnRGb3JtdWxhU2VsZWN0LA0KICAgIHByZW1SdWxlcywNCiAgICBwcmVtUnVsZXNTZWxlY3QsDQogICAgcGREaXNjb3VudEZvcm11bGEsDQogICAgcGREaXNjb3VudEZvcm11bGFTZWxlY3QsDQogICAgZ3VpZGUNCiAgfSwNCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICAvLyDluKblhaXkuqflk4Hkv6Hmga8NCiAgICBsZXQgcGR0ZW1wUGRJbmZvID0gdGhpcy5nZXRQZERhdGEoKQ0KICAgIGlmIChPYmplY3Qua2V5cyhwZHRlbXBQZEluZm8pLmxlbmd0aCA+IDApIHsNCiAgICAgIHRoaXMucHJvZHVjdCA9IHBkdGVtcFBkSW5mbw0KICAgICAgdGhpcy5wYXJhbXNfY3VycmVudFByb2R1Y3QuZXFfcGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICAgIHRoaXMuZm9ybV9kZWYucGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICAgIHRoaXMuZm9ybV9kZWYucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkDQogICAgICB0aGlzLmZvcm1fZGVmLnBkQ29kZSA9IHRoaXMucHJvZHVjdC5wZENvZGUNCiAgICAgIHRoaXMuZm9ybV9kZWYucGROYW1lID0gdGhpcy5wcm9kdWN0LnBkTmFtZQ0KICAgICAgdGhpcy5wYXJhbXMuZmluZWxpbmVzUmVnaW9uID0gcGR0ZW1wUGRJbmZvLmNUeXBlDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+aXoOazleiOt+WPluS6p+WTgeS/oeaBrycpDQogICAgICByZXR1cm4NCiAgICB9DQogICAgYXdhaXQgdGhpcy5pbml0KCkNCiAgICB0aGlzLnByb2R1Y3RDYWxjUmV2aXNpb25TaG93SU5mbyA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2R1Y3RDYWxjUmV2aXNpb25TaG93SU5mbyA9PT0gJ3RydWUnDQogICAgaWYgKCF0aGlzLnByb2R1Y3RDYWxjUmV2aXNpb25TaG93SU5mbykgew0KICAgICAgdGhpcy5mb3JtX2RlZi5wZFByZW1BZGRGbGFnID0gJ1knDQogICAgICB0aGlzLmZvcm1fZGVmLnBkUGF5U3RhcnRDYWxNb2RlID0gJzAnDQogICAgICB0aGlzLmZvcm1fZGVmLnBkUGF5U3RhcnRDYWxSdWxlID0gJ1MnDQogICAgICB0aGlzLmZvcm1fZGVmLnBkUGF5RW5kQ2FsTW9kZSA9ICcwJw0KICAgICAgdGhpcy5mb3JtX2RlZi5wZFBheUVuZENhbFJ1bGUgPSAnUycNCiAgICAgIHRoaXMuZm9ybV9kZWYucGRQYXlEYXRlVmFsdWUgPSAnMScNCiAgICAgIGF3YWl0IHRoaXMuZ2V0QWxsUHJlbWl1bSgpDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuZm9ybV9kZWYucGRQcmVtQWRkRmxhZyA9ICdZJw0KICAgICAgYXdhaXQgdGhpcy5nZXRBbGxQcmVtaXVtKCkNCiAgICB9DQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgdGhpcy4kcmVmcy5wYWdlX2FkZGl0aW9uLmJ1aWxkRGF0YSgpDQogICAgfSkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgfSwNCiAgZGVzdHJveWVkKCkgew0KICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCkNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICdsZGNvZGVzJywNCiAgICAgICdzaWRlYmFyJw0KICAgIF0pDQogIH0sDQogIHdhdGNoOiB7DQogICAgJ2Zvcm1fYWRkaXRpb25fYWRkLnBkRXh0UHJlbVR5cGUnKCkgew0KICAgICAgdGhpcy5kaXNwbGF5TmFtZV9hZGRpdGlvblR5cGUgPSAnJw0KICAgICAgY29uc3QgYWRkaXRpb25UeXBlTGlzdF9zZWxlY3RlZCA9IHRoaXMuXy5maWx0ZXIodGhpcy5sZGNvZGVzWydwZF9wcmVtX2FkZGl0aW9uX3R5cGUnXSwgZnVuY3Rpb24gKGFkZGl0aW9uVHlwZSkgew0KICAgICAgICByZXR1cm4gX3RoaXMuaXNJbkFycmF5KGFkZGl0aW9uVHlwZS5jb2RlLCBfdGhpcy5mb3JtX2FkZGl0aW9uX2FkZC5wZEV4dFByZW1UeXBlKQ0KICAgICAgfSkNCiAgICAgIGlmIChhZGRpdGlvblR5cGVMaXN0X3NlbGVjdGVkICYmIGFkZGl0aW9uVHlwZUxpc3Rfc2VsZWN0ZWQubGVuZ3RoID4gMCkgew0KICAgICAgICBhZGRpdGlvblR5cGVMaXN0X3NlbGVjdGVkLmZvckVhY2goKGFkZGl0aW9uVHlwZSwgaW5kZXgpID0+IHsNCiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHsNCiAgICAgICAgICAgIHRoaXMuZGlzcGxheU5hbWVfYWRkaXRpb25UeXBlICs9IGFkZGl0aW9uVHlwZS5jb2RlbmFtZQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmRpc3BsYXlOYW1lX2FkZGl0aW9uVHlwZSArPSAnLCAnICsgYWRkaXRpb25UeXBlLmNvZGVuYW1lDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZV9hZGRpdGlvblR5cGUgPSAnJw0KICAgICAgfQ0KICAgIH0sDQogICAgJ2FkZGl0aW9uVGFibGVEYXRhJygpIHsNCiAgICAgIGlmICh0aGlzLmFkZGl0aW9uVGFibGVEYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdGhpcy5maWx0ZXJwZEV4dFByZW1OYW1lTGlzdDEgPSBbXQ0KICAgICAgICB0aGlzLmZpbHRlcnBkRXh0UHJlbU5hbWVMaXN0MiA9IFtdDQogICAgICAgIHRoaXMuYWRkaXRpb25UYWJsZURhdGEuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgIHRoaXMuZmlsdGVycGRFeHRQcmVtTmFtZUxpc3QxLnB1c2goew0KICAgICAgICAgICAgdGV4dDogdmFsLnBkRXh0UHJlbU5hbWUsDQogICAgICAgICAgICB2YWx1ZTogdmFsLnBkRXh0UHJlbU5hbWUNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuZmlsdGVycGRFeHRQcmVtTmFtZUxpc3QyLnB1c2goew0KICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV9hZGRpdGlvbl90eXBlJywgdmFsLnBkRXh0UHJlbVR5cGUpLA0KICAgICAgICAgICAgdmFsdWU6IHZhbC5wZEV4dFByZW1UeXBlDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIHRoaXMuZmlsdGVycGRFeHRQcmVtTmFtZUxpc3QxID0gdGhpcy5maWx0ZXJwZEV4dFByZW1OYW1lTGlzdDEucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBlbGVtZW50KSB7DQogICAgICAgIGlmICghcHJldi5maW5kKGVsID0+IGVsLnRleHQgPT09IGVsZW1lbnQudGV4dCkpIHsNCiAgICAgICAgICBwcmV2LnB1c2goZWxlbWVudCkNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcHJldg0KICAgICAgfSwgW10pDQogICAgICB0aGlzLmZpbHRlcnBkRXh0UHJlbU5hbWVMaXN0MiA9IHRoaXMuZmlsdGVycGRFeHRQcmVtTmFtZUxpc3QyLnJlZHVjZShmdW5jdGlvbiAocHJldiwgZWxlbWVudCkgew0KICAgICAgICBpZiAoIXByZXYuZmluZChlbCA9PiBlbC50ZXh0ID09PSBlbGVtZW50LnRleHQpKSB7DQogICAgICAgICAgcHJldi5wdXNoKGVsZW1lbnQpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHByZXYNCiAgICAgIH0sIFtdKQ0KICAgICAgdGhpcy5zZWxlY3RlZEFkZGl0aW9uID0ge30NCiAgICAgIHRoaXMucmVzZXRGb3JtQWRkaXRpb24oKQ0KICAgICAgaWYgKHRoaXMuYWRkaXRpb25UYWJsZURhdGEubGVuZ3RoID09PSAxKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRBZGRpdGlvbiA9IHRoaXMuYWRkaXRpb25UYWJsZURhdGFbMF0NCiAgICAgICAgdGhpcy5zZWxlY3RlZEFkZGl0aW9uQ2hhbmdlZCgpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYnJpbmdJbkNhbGNDb2RlKHBkQnVzc0RldGFpbFR5cGUsIHBkQnVzc0lkLCBjYWxjQ29kZSkgew0KICAgICAgc3dpdGNoIChwZEJ1c3NEZXRhaWxUeXBlKSB7DQogICAgICAgIGNhc2UgJzE5JzoNCiAgICAgICAgICBmb3IgKGNvbnN0IGV4dFByZW0gb2YgdGhpcy5hZGRpdGlvblRhYmxlRGF0YSkgew0KICAgICAgICAgICAgaWYgKGV4dFByZW0uaWQgPT09IE51bWJlcihwZEJ1c3NJZCkpIHsNCiAgICAgICAgICAgICAgdGhpcy4kc2V0KGV4dFByZW0sICdwZEV4dFByZW1DYWxjQ29kZScsIGNhbGNDb2RlKQ0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5mb3JtX2FkZGl0aW9uLmlkID09PSBOdW1iZXIocGRCdXNzSWQpKSB7DQogICAgICAgICAgICB0aGlzLmZvcm1fYWRkaXRpb24ucGRFeHRQcmVtQ2FsY0NvZGUgPSBjYWxjQ29kZQ0KICAgICAgICAgIH0NCiAgICAgICAgICBicmVhaw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIGJyZWFrDQogICAgICB9DQogICAgfSwNCiAgICAvL+WFrOW8jw0KICAgIGdvQ2xpY2tzKG51bTEsIG51bTIpIHsNCiAgICAgIHRoaXMuZ3VhcmFudGVlRGV0YWlscyA9IG51bTEvL+S4muWKoeWkp+exuw0KICAgICAgdGhpcy5jYWxjdWxhdGlvbkZvcm11bGFUeXBlID0gbnVtMi8v5Lia5Yqh57uG57G7DQogICAgICBpZiAobnVtMiA9PT0gJzE5Jykgey8v5Yqg6LS5DQogICAgICAgIHRoaXMucGRVd1NpVHlwZU9wdGlvbnMgPSB0aGlzLnNlbGVjdGVkQWRkaXRpb24ucGRQcmVtSWQgKyAiOiIgKyB0aGlzLnNlbGVjdGVkQWRkaXRpb24ucGRQcmVtQ29kZQ0KICAgICAgICB0aGlzLnBkVXdTaVR5cGVEdE9wdGlvbnMgPSB0aGlzLnNlbGVjdGVkQWRkaXRpb24uaWQgKyAiOiIgKyB0aGlzLnNlbGVjdGVkQWRkaXRpb24ucGRFeHRQcmVtQ29kZQ0KICAgICAgfSBlbHNlIHsvL+e8tOi0uQ0KICAgICAgICB0aGlzLnBkVXdTaVR5cGVPcHRpb25zID0gdGhpcy5zZWxlY3RlZERlZi5pZCA/IHRoaXMuc2VsZWN0ZWREZWYuaWQgKyAiOiIgKyB0aGlzLnNlbGVjdGVkRGVmLnBkUHJlbUNvZGUgOiB0aGlzLmZvcm1fZGVmQWRkLmlkICsgIjoiICsgdGhpcy5mb3JtX2RlZkFkZC5wZFByZW1Db2RlDQogICAgICAgIHRoaXMucGRVd1NpVHlwZUR0T3B0aW9ucyA9ICcnDQogICAgICB9DQogICAgICB0aGlzLmRpYWxvZ1Nob3cucHJlbUFtb3VudEZvcm11bGEgPSB0cnVlDQogICAgfSwNCiAgICBjaGFuZ2VEaWFsb2dWaXNpYmxlX2Zvcm11bGEoZmxhZykgew0KICAgICAgaWYgKGZsYWcgPT09IHRydWUpIHsNCiAgICAgICAgdGhpcy5wZFV3U2lUeXBlT3B0aW9ucyA9IHRoaXMucGR0ZW1wUGRCbmZ0DQogICAgICB9DQogICAgICB0aGlzLmRpYWxvZ1Nob3cucHJlbUFtb3VudEZvcm11bGEgPSBmbGFnDQogICAgfSwNCiAgICBjaGFuZ2VEaWFsb2dWaXNpYmxlX2Zvcm11bGFTZWxlY3QoZmxhZywgZ3VhcmFudGVlRGV0YWlscywgY2FsY3VsYXRpb25Gb3JtdWxhVHlwZSwgcHJlbSwgZXh0UHJlbSkgew0KICAgICAgaWYgKGZsYWcgPT09IHRydWUpIHsNCiAgICAgICAgdGhpcy5wZFV3U2lUeXBlT3B0aW9ucyA9IHByZW0NCiAgICAgICAgdGhpcy5wZFV3U2lUeXBlRHRPcHRpb25zID0gZXh0UHJlbQ0KICAgICAgICB0aGlzLmd1YXJhbnRlZURldGFpbHMgPSBndWFyYW50ZWVEZXRhaWxzDQogICAgICAgIHRoaXMuY2FsY3VsYXRpb25Gb3JtdWxhVHlwZSA9IGNhbGN1bGF0aW9uRm9ybXVsYVR5cGUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZGlhbG9nU2hvdy5wcmVtQW1vdW50Rm9ybXVsYSA9IGZhbHNlDQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmRpYWxvZ1Nob3cucHJlbUFtb3VudEZvcm11bGEgPSB0cnVlDQogICAgICAgIH0pDQogICAgICB9DQogICAgICB0aGlzLmRpYWxvZ1Nob3cucHJlbUFtb3VudEZvcm11bGFTZWxlY3QgPSBmbGFnDQogICAgfSwNCiAgICBmaWx0ZXJIYW5kbGVyKHZhbHVlLCByb3csIGNvbHVtbikgew0KICAgICAgaWYgKGNvbHVtbikgew0KICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsicHJvcGVydHkiXQ0KICAgICAgICByZXR1cm4gcm93W3Byb3BlcnR5XSA9PT0gdmFsdWUNCiAgICAgIH0NCiAgICB9LA0KICAgIGZpbHRlckhhbmRsZXJEaXNjb3VudCh2YWx1ZSwgcm93LCBjb2x1bW4pIHsNCiAgICAgIGlmIChjb2x1bW4pIHsNCiAgICAgICAgY29uc3QgcHJvcGVydHkgPSBjb2x1bW5bInByb3BlcnR5Il0NCiAgICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlDQogICAgICB9DQogICAgfSwNCiAgICAvL+inhOWImQ0KICAgIGdvUnVsZXMobnVtMSwgbnVtMikgew0KICAgICAgdGhpcy5ndWFyYW50ZWVEZXRhaWxzID0gbnVtMS8v5Lia5Yqh5aSn57G7DQogICAgICB0aGlzLmNhbGN1bGF0aW9uRm9ybXVsYVR5cGUgPSBudW0yLy/kuJrliqHnu4bnsbsNCiAgICAgIHRoaXMuZGlhbG9nUnVsZXNTaG93LnByZW1SdWxlcyA9IHRydWUNCiAgICAgIHRoaXMucGRVd1NpVHlwZU9wdGlvbnMgPSB0aGlzLmZvcm1fZGVmLmlkICsgIjoiICsgdGhpcy5mb3JtX2RlZi5wZFByZW1Db2RlDQogICAgfSwNCiAgICBmaWx0ZXJfcGRDbXBuUmFuZ2VzKGNvZGUpIHsNCiAgICAgIGZvciAoY29uc3QgZGVmIG9mIF90aGlzLmRlZlRhYmxlRGF0YSkgew0KICAgICAgICBpZiAoZGVmLnBkUHJlbUNvZGUgPT09IGNvZGUpIHsNCiAgICAgICAgICByZXR1cm4gZGVmLnBkUHJlbUNvZGUgKyAiOiIgKyBkZWYucGRQYXlOYW1lDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGZvciAoY29uc3QgZGVmIG9mIF90aGlzLmFkZGl0aW9uVGFibGVEYXRhKSB7DQogICAgICAgIGlmIChkZWYucGRFeHRQcmVtQ29kZSA9PT0gY29kZSkgew0KICAgICAgICAgIHJldHVybiBkZWYucGRFeHRQcmVtQ29kZSArICI6IiArIGRlZi5wZEV4dFByZW1OYW1lDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBjb2RlDQogICAgfSwNCiAgICBjaGFuZ2VEaWFsb2dWaXNpYmxlX3J1bGVzKGZsYWcpIHsNCiAgICAgIGlmIChmbGFnID09PSB0cnVlKSB7DQogICAgICAgIHRoaXMucGRVd1NpVHlwZU9wdGlvbnMgPSB0aGlzLnBkdGVtcFBkQm5mdA0KICAgICAgfQ0KICAgICAgdGhpcy5kaWFsb2dSdWxlc1Nob3cucHJlbVJ1bGVzID0gZmxhZw0KICAgIH0sDQogICAgY2hhbmdlRGlhbG9nVmlzaWJsZV9ydWxlc1NlbGVjdChmbGFnLCBndWFyYW50ZWVEZXRhaWxzLCBjYWxjdWxhdGlvbkZvcm11bGFUeXBlLCBwcmVtLCBleHRQcmVtKSB7DQogICAgICBpZiAoZmxhZyA9PT0gdHJ1ZSkgew0KICAgICAgICB0aGlzLnBkVXdTaVR5cGVPcHRpb25zID0gcHJlbQ0KICAgICAgICB0aGlzLnBkVXdTaVR5cGVEdE9wdGlvbnMgPSBleHRQcmVtDQogICAgICAgIHRoaXMuZ3VhcmFudGVlRGV0YWlscyA9IGd1YXJhbnRlZURldGFpbHMNCiAgICAgICAgdGhpcy5jYWxjdWxhdGlvbkZvcm11bGFUeXBlID0gY2FsY3VsYXRpb25Gb3JtdWxhVHlwZQ0KICAgICAgfQ0KICAgICAgdGhpcy5kaWFsb2dSdWxlc1Nob3cucHJlbVJ1bGVzU2VsZWN0ID0gZmxhZw0KICAgIH0sDQogICAgLy8g6aG16Z2i5Yid5aeL5YyWDQogICAgaW5pdCgpIHsNCiAgICAgIHRoaXMuaW5pdF9maWx0ZXJzKCkNCiAgICAgIHRoaXMuaW5pdF9wYXlfZnJlcXVlbmN5KCkNCiAgICAgIHRoaXMuaW5pdF9wYXlfZGF0ZSgpDQogICAgICB0aGlzLmluaXRfdHlwZVJlZ2lvbigpDQogICAgfSwNCiAgICBhc3luYyBnZXRBbGxQcmVtaXVtKCkgew0KICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICBwZEluZm9JZDogdGhpcy5wcm9kdWN0LmlkDQogICAgICB9DQogICAgICBhd2FpdCBnZXRBbGxQcmVtaXVtKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbXMpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5wYXJhbXNfYWRkaXRpb24ucHJlbWl1bUxpc3QgPSByZXNwb25zZS5kYXRhDQogICAgICAgIHRoaXMuZGVmVGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOiOt+WPlue8tOi0uemikeeOhw0KICAgIGluaXRfcGF5X2ZyZXF1ZW5jeSgpIHsNCiAgICAgIGNvbnN0IHBhcmFtc01hcCA9IHsNCiAgICAgICAgcGRfaW5mb19pZDogdGhpcy5wYXJhbXNfY3VycmVudFByb2R1Y3QuZXFfcGRJbmZvSWQsDQogICAgICAgIHBkX2F0cnNfY29kZTogJ3BheWludHYnDQogICAgICB9DQogICAgICBnZXRQZEF0dHJJbmZvKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbXNNYXApKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgY29uc3QgcGRUZW1wQXRyc0xpc3QgPSByZXNwb25zZS5kYXRhDQogICAgICAgIHRoaXMucHJvZHVjdF9leHRyYS5wZFBheUZyZXEgPSB0aGlzLl8ubWFwKHBkVGVtcEF0cnNMaXN0LCAncGRBdHJzVmFsJykNCiAgICAgICAgdGhpcy5wZFBheUZyZXFDb3B5ID0gdGhpcy5fLm1hcChwZFRlbXBBdHJzTGlzdCwgJ3BkQXRyc1ZhbCcpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy/ojrflj5bkuqflk4HliIbnsbvmoIforrDooajkv6Hmga/lgqznvLTmoIforrANCiAgICBpbml0X3R5cGVSZWdpb24oKSB7DQogICAgICBjb25zdCBwYXJhbXNNYXAgPSB7DQogICAgICAgIHBkX2luZm9faWQ6IHRoaXMucGFyYW1zX2N1cnJlbnRQcm9kdWN0LmVxX3BkSW5mb0lkLA0KICAgICAgICBwZF9jbHNfdHlwZTogJzInDQogICAgICB9DQogICAgICBnZXRQZENsc0xhYkluZm8odGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtc01hcCkpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICBjb25zdCBwZFRlbXBDbHNMYWJMaXN0ID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICBjb25zdCBwZENsczZBcnJheSA9IHRoaXMuXy5tYXAocGRUZW1wQ2xzTGFiTGlzdCwgJ3BkQ2xzNicpDQogICAgICAgIGlmIChwZENsczZBcnJheS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5mb3JtX2RlZi5wZFVyZ2VQYXlGbGFnID0gcGRDbHM2QXJyYXlbMF0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v6I635Y+W57y06LS55pyf6Ze0DQogICAgaW5pdF9wYXlfZGF0ZSgpIHsNCiAgICAgIGNvbnN0IHBheU1hcCA9IHsNCiAgICAgICAgcGRfaW5mb19pZDogdGhpcy5wYXJhbXNfY3VycmVudFByb2R1Y3QuZXFfcGRJbmZvSWQNCiAgICAgIH0NCiAgICAgIGdldFBheURhdGUodGhpcy5idWlsZFJlcXVlc3REYXRhKHBheU1hcCkpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmZvcm1fZGVmLnBkUGF5RW5kUGVyaW9kID0gcmVzcG9uc2UuZGF0YS5wZFBheVBlcmlvZA0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWIneWni+WMluetm+mAieWZqA0KICAgIGluaXRfZmlsdGVycygpIHsNCiAgICAgIGxldCBsZGNvZGVfcGRQcmVtQ2FsTW9kZSA9IHRoaXMubGRjb2Rlc1sncGRfcHJlbV9jYWxfbWV0aG9kJ10NCiAgICAgIGxldCBsZGNvZGVfcGRBZGRQcmVtTW9kZSA9IHRoaXMubGRjb2Rlc1sncGRfcHJlbV9hZGRpdGlvbl9tb2RlJ10NCiAgICAgIGxldCBsZGNvZGVfcGRQYXlBY2NLaW5kID0gdGhpcy5sZGNvZGVzWydwZF9wcmVtX2FjY291bnRfdHlwZSddDQogICAgICBpZiAobGRjb2RlX3BkUHJlbUNhbE1vZGUgaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbGRjb2RlX3BkUHJlbUNhbE1vZGUpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnMucGRQcmVtQ2FsTW9kZS5wdXNoKHt0ZXh0OiBpdGVtLmNvZGVuYW1lLCB2YWx1ZTogaXRlbS5jb2RlfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGxkY29kZV9wZEFkZFByZW1Nb2RlIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGxkY29kZV9wZEFkZFByZW1Nb2RlKSB7DQogICAgICAgICAgdGhpcy5maWx0ZXJzLnBkQWRkUHJlbU1vZGUucHVzaCh7dGV4dDogaXRlbS5jb2RlbmFtZSwgdmFsdWU6IGl0ZW0uY29kZX0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChsZGNvZGVfcGRQYXlBY2NLaW5kIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGxkY29kZV9wZFBheUFjY0tpbmQpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnMucGRQYXlBY2NLaW5kLnB1c2goe3RleHQ6IGl0ZW0uY29kZW5hbWUsIHZhbHVlOiBpdGVtLmNvZGV9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBmaWx0ZXJfcGRQcmVtQ2FsTW9kZSh2YWx1ZSwgcm93KSB7DQogICAgICByZXR1cm4gcm93LnBkUHJlbUNhbE1vZGUgPT09IHZhbHVlDQogICAgfSwNCiAgICBmaWx0ZXJfcGRBZGRQcmVtTW9kZSh2YWx1ZSwgcm93KSB7DQogICAgICByZXR1cm4gcm93LnBkQWRkUHJlbU1vZGUgPT09IHZhbHVlDQogICAgfSwNCiAgICBmaWx0ZXJfcGRQYXlBY2NLaW5kKHZhbHVlLCByb3cpIHsNCiAgICAgIHJldHVybiByb3cucGRQYXlBY2NLaW5kID09PSB2YWx1ZQ0KICAgIH0sDQogICAgcm93Q2xpY2tfYWRkaXRpb24ocm93LCBjb2x1bW4sIGV2ZW50KSB7DQogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7DQogICAgICAgIGlmIChyb3cuaWQgPT09IHRoaXMuc2VsZWN0ZWRBZGRpdGlvbi5pZCkgew0KICAgICAgICAgIHRoaXMuY2FuY2VsVXBkYXRlQWRkaXRpb24oKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBzZWxlY3RlZEFkZGl0aW9uQ2hhbmdlZCgpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtQWRkaXRpb24oKQ0KICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1fYWRkaXRpb24sIHRoaXMuc2VsZWN0ZWRBZGRpdGlvbikNCiAgICB9LA0KICAgIHNlbGVjdEFsbEFkZGl0aW9uVHlwZSgpIHsNCiAgICAgIGZvciAoY29uc3QgYWRkaXRpb25UeXBlIG9mIHRoaXMubGRjb2Rlc1sncGRfcHJlbV9hZGRpdGlvbl90eXBlJ10pIHsNCiAgICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uX2FkZC5wZEV4dFByZW1UeXBlLnB1c2goYWRkaXRpb25UeXBlLmNvZGUpDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVBZGRBZGRpdGlvbigpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybV9hZGRpdGlvbl9hZGQudmFsaWRhdGUocGFzcyA9PiB7DQogICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgaWYgKHRoaXMuZm9ybV9hZGRpdGlvbl9hZGQucGRQcmVtSWQubGVuZ3RoID09PSAwIHx8IHRoaXMuZm9ybV9hZGRpdGlvbl9hZGQucGRFeHRQcmVtT2JqLmxlbmd0aCA9PT0gMCB8fCB0aGlzLmZvcm1fYWRkaXRpb25fYWRkLnBkRXh0UHJlbU1vZGUubGVuZ3RoID09PSAwIHx8IHRoaXMuZm9ybV9hZGRpdGlvbl9hZGQucGRFeHRQcmVtVHlwZS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncGRhZGRpdGlvbi5tZXNzYWdlLmVycm9yX2luY29tcGxldGVfaW5mb3JtYXRpb24nKSkNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5kZWZUYWJsZURhdGEgJiYgdGhpcy5kZWZUYWJsZURhdGEubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgLy8g6aqM6K+B6YCJ5oup55qE57y06LS55L+h5oGv5piv5ZCm5YWo6YOo5pyJ5pWIDQogICAgICAgICAgICBsZXQgcGF5bWVudElkcyA9IHRoaXMuZm9ybV9hZGRpdGlvbl9hZGQucGRQcmVtSWQNCiAgICAgICAgICAgIGxldCBwYXltZW50SWRzX2F2YWlsYWJsZSA9IHRoaXMuXy5tYXAodGhpcy5kZWZUYWJsZURhdGEsICdpZCcpDQogICAgICAgICAgICBmb3IgKGNvbnN0IHBheW1lbnRJZCBvZiBwYXltZW50SWRzKSB7DQogICAgICAgICAgICAgIGlmICghdGhpcy5pc0luQXJyYXkocGF5bWVudElkLCBwYXltZW50SWRzX2F2YWlsYWJsZSkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3BkYWRkaXRpb24ubWVzc2FnZS5lcnJvcl91bmF2YWlsYWJsZV9kZWYnKSkNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8g6YCa6L+H6aqM6K+B77yM5byA5aeL5Yib5bu6DQogICAgICAgICAgICBsZXQgYXJyYXkgPSB0aGlzLmJ1aWxkQXJyYXkocGF5bWVudElkcywgdGhpcy5mb3JtX2FkZGl0aW9uX2FkZC5wZEV4dFByZW1PYmosIHRoaXMuZm9ybV9hZGRpdGlvbl9hZGQucGRFeHRQcmVtTW9kZSwgdGhpcy5mb3JtX2FkZGl0aW9uX2FkZC5wZEV4dFByZW1UeXBlKQ0KICAgICAgICAgICAgZm9yIChjb25zdCBhcnJheUl0ZW0gb2YgYXJyYXkpIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5mb3JtX2FkZGl0aW9uX2FkZCkNCiAgICAgICAgICAgICAgYXJyYXlJdGVtLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uLnBkUHJlbUlkID0gdmFsdWUNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAxKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fYWRkaXRpb24ucGRFeHRQcmVtT2JqID0gdmFsdWUNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAyKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fYWRkaXRpb24ucGRFeHRQcmVtTW9kZSA9IHZhbHVlDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gMykgew0KICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uLnBkRXh0UHJlbVR5cGUgPSB2YWx1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLy8g5Li6IHBheU5hbWUg5ZKMIHBheUNvZGUg6LWL5YC8DQogICAgICAgICAgICAgIGZvciAoY29uc3QgZGVmIG9mIHRoaXMuZGVmVGFibGVEYXRhKSB7DQogICAgICAgICAgICAgICAgaWYgKGRlZi5pZCA9PT0gdGhpcy5mb3JtX2FkZGl0aW9uLnBkUHJlbUlkKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fYWRkaXRpb24ucGRQcmVtTmFtZSA9IGRlZi5wZFBheU5hbWUNCiAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9hZGRpdGlvbi5wZFByZW1Db2RlID0gZGVmLnBkUHJlbUNvZGUNCiAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIC8vIOS4uiBwZEluZm9JZCDotYvlgLwNCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uLnBkSW5mb0lkID0gdGhpcy5wcm9kdWN0LmlkDQogICAgICAgICAgICAgIC8vIOS4uiBwZENvZGUg6LWL5YC8DQogICAgICAgICAgICAgIHRoaXMuZm9ybV9hZGRpdGlvbi5wZENvZGUgPSB0aGlzLnByb2R1Y3QucGRDb2RlDQogICAgICAgICAgICAgIC8vIOS4uiBwZFZlcklkIOi1i+WAvA0KICAgICAgICAgICAgICB0aGlzLmZvcm1fYWRkaXRpb24ucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkDQogICAgICAgICAgICAgIC8vIOS4uiBwZFByZW1DYWxjQ29kZSDotYvlgLwNCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uLnBkRXh0UHJlbUNhbGNDb2RlID0gdGhpcy5mb3JtX2FkZGl0aW9uX2FkZC5wZEV4dFByZW1DYWxjQ29kZQ0KICAgICAgICAgICAgICAvL+S4uuWKoOi0ueWQjeensOi1i+WIneWni+WAvA0KICAgICAgICAgICAgICBsZXQgcGRBZGRQcmVtT2JqID0gdGhpcy5nZXRDb2RlTmFtZSgncGRBZGRQcmVtT2JqJywgdGhpcy5mb3JtX2FkZGl0aW9uLnBkRXh0UHJlbU9iaiwgdHJ1ZSkNCiAgICAgICAgICAgICAgbGV0IHBkX3ByZW1fYWRkaXRpb25fYWRkaXRpb25fbW9kZSA9IHRoaXMuZ2V0Q29kZU5hbWUoJ3BkX3ByZW1fYWRkaXRpb25fYWRkaXRpb25fbW9kZScsIHRoaXMuZm9ybV9hZGRpdGlvbi5wZEV4dFByZW1Nb2RlLCB0cnVlKQ0KICAgICAgICAgICAgICBsZXQgcGRfcHJlbV9hZGRpdGlvbl90eXBlID0gdGhpcy5nZXRDb2RlTmFtZSgncGRfcHJlbV9hZGRpdGlvbl90eXBlJywgdGhpcy5mb3JtX2FkZGl0aW9uLnBkRXh0UHJlbVR5cGUsIHRydWUpDQogICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1fYWRkaXRpb24sICdwZEV4dFByZW1OYW1lJywgcGRBZGRQcmVtT2JqICsgcGRfcHJlbV9hZGRpdGlvbl9hZGRpdGlvbl9tb2RlICsgcGRfcHJlbV9hZGRpdGlvbl90eXBlKQ0KICAgICAgICAgICAgICB0aGlzLmFkZGl0aW9uQWRkVGFibGVEYXRhLnB1c2godGhpcy5mb3JtX2FkZGl0aW9uKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5nZXRPcmRlck51bWJlcignYWRkaXRpb25fYWRkJykNCiAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtQWRkaXRpb24oKQ0KICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1BZGRpdGlvbkFkZCgpDQogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UuYWRkJykpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgncGRhZGRpdGlvbi5tZXNzYWdlLmVycm9yX2RlZl9ub19kZWZpbmUnKSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGJ1aWxkQXJyYXkocGF5bWVudElkcywgYWRkaXRpb25QYXlQZXJzb25UeXBlcywgYWRkaXRpb25Nb2RlcywgYWRkaXRpb25UeXBlcykgew0KICAgICAgbGV0IGFycmF5ID0gW10NCiAgICAgIGxldCBhcnJheV9pdGVtID0gW10NCiAgICAgIGxldCBhcnJheV9wYXltZW50SWQgPSAnJw0KICAgICAgbGV0IGFycmF5X2FkZGl0aW9uUGF5UGVyc29uVHlwZSA9ICcnDQogICAgICBsZXQgYXJyYXlfYWRkaXRpb25Nb2RlID0gJycNCiAgICAgIGxldCBhcnJheV9hZGRpdGlvblR5cGUgPSAnJw0KICAgICAgZm9yIChjb25zdCBwYXltZW50SWQgb2YgcGF5bWVudElkcykgew0KICAgICAgICBhcnJheV9wYXltZW50SWQgPSBwYXltZW50SWQNCiAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvblBheVBlcnNvblR5cGUgb2YgYWRkaXRpb25QYXlQZXJzb25UeXBlcykgew0KICAgICAgICAgIGFycmF5X2FkZGl0aW9uUGF5UGVyc29uVHlwZSA9IGFkZGl0aW9uUGF5UGVyc29uVHlwZQ0KICAgICAgICAgIGZvciAoY29uc3QgYWRkaXRpb25Nb2RlIG9mIGFkZGl0aW9uTW9kZXMpIHsNCiAgICAgICAgICAgIGFycmF5X2FkZGl0aW9uTW9kZSA9IGFkZGl0aW9uTW9kZQ0KICAgICAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvblR5cGUgb2YgYWRkaXRpb25UeXBlcykgew0KICAgICAgICAgICAgICBhcnJheV9hZGRpdGlvblR5cGUgPSBhZGRpdGlvblR5cGUNCiAgICAgICAgICAgICAgYXJyYXlfaXRlbS5wdXNoKGFycmF5X3BheW1lbnRJZCwgYXJyYXlfYWRkaXRpb25QYXlQZXJzb25UeXBlLCBhcnJheV9hZGRpdGlvbk1vZGUsIGFycmF5X2FkZGl0aW9uVHlwZSkNCiAgICAgICAgICAgICAgYXJyYXkucHVzaChhcnJheV9pdGVtKQ0KICAgICAgICAgICAgICBhcnJheV9pdGVtID0gW10NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBhcnJheQ0KICAgIH0sDQogICAgaGFuZGxlVXBkYXRlQWRkaXRpb24oKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm1fYWRkaXRpb24udmFsaWRhdGUocGFzcyA9PiB7DQogICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgdXBkYXRlUGR0ZW1wUGRFeHRQcmVtKHRoaXMuZm9ybV9hZGRpdGlvbikudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfYWRkaXRpb24uYnVpbGREYXRhKCkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtQWRkaXRpb24oKQ0KICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQWRkaXRpb24gPSB7fQ0KICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UudXBkYXRlJykpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBjYW5jZWxVcGRhdGVBZGRpdGlvbigpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtQWRkaXRpb24oKQ0KICAgICAgdGhpcy5zZWxlY3RlZEFkZGl0aW9uID0ge30NCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZUFkZGl0aW9uKHJvdykgew0KICAgICAgZGVsZXRlUGR0ZW1wUGRFeHRQcmVtKHJvdy5pZCkudGhlbigoKSA9PiB7DQogICAgICAgIGxldCBvcGVyYXRpb25GbGFnDQogICAgICAgIGlmICh0aGlzLl8uaW5jbHVkZXModGhpcy5hZGRpdGlvblRhYmxlRGF0YSwgdGhpcy5zZWxlY3RlZEFkZGl0aW9uKSkgew0KICAgICAgICAgIGlmICh0aGlzLmFkZGl0aW9uVGFibGVEYXRhLmxlbmd0aCA9PT0gMSAmJiB0aGlzLiRyZWZzLnBhZ2VfYWRkaXRpb24ucGFnZSA+IDEpIHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9hZGRpdGlvbi5wYWdlIC09IDENCiAgICAgICAgICB9DQogICAgICAgICAgb3BlcmF0aW9uRmxhZyA9ICdidWlsZERhdGEnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgb3BlcmF0aW9uRmxhZyA9ICdyZWxvYWQnDQogICAgICAgIH0NCiAgICAgICAgc3dpdGNoIChvcGVyYXRpb25GbGFnKSB7DQogICAgICAgICAgY2FzZSAnYnVpbGREYXRhJzoNCiAgICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9hZGRpdGlvbi5idWlsZERhdGEoKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1BZGRpdGlvbigpDQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRBZGRpdGlvbiA9IHt9DQogICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdzdWNjZXNzTWVzc2FnZS5kZWxldGUnKSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIGNhc2UgJ3JlbG9hZCc6DQogICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfYWRkaXRpb24ucmVsb2FkKCkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtQWRkaXRpb24oKQ0KICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQWRkaXRpb24gPSB7fQ0KICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UuZGVsZXRlJykpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWKqOaAgeihqOagvOWkmumAieahhg0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWRBZGRpdGlvbkFkZHMgPSB2YWwNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZUFkZGl0aW9uQWRkKGZvcm1fYWRkaXRpb24pIHsNCiAgICAgIHRoaXMuYWRkaXRpb25BZGRUYWJsZURhdGEuc3BsaWNlKHRoaXMuYWRkaXRpb25BZGRUYWJsZURhdGEuaW5kZXhPZihmb3JtX2FkZGl0aW9uKSwgMSkNCiAgICAgIHRoaXMuc2VsZWN0ZWRBZGRpdGlvbkFkZHMuc3BsaWNlKHRoaXMuYWRkaXRpb25BZGRUYWJsZURhdGEuaW5kZXhPZihmb3JtX2FkZGl0aW9uKSwgMSkNCiAgICAgIHRoaXMuZ2V0T3JkZXJOdW1iZXIoJ2FkZGl0aW9uX2FkZCcpDQogICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UuZGVsZXRlJykpDQogICAgfSwNCiAgICBoYW5kbGVTYXZlQWRkaXRpb25BZGQoKSB7DQogICAgICBsZXQgbnVtID0gMA0KICAgICAgZm9yIChudW0gPSAwOyBudW0gPCB0aGlzLnNlbGVjdGVkQWRkaXRpb25BZGRzLmxlbmd0aDsgbnVtKyspIHsNCiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkQWRkaXRpb25BZGRzW251bV0ucGRFeHRQcmVtTmFtZSkgew0KICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoIuivt+i+k+WFpeWKoOi0ueWQjeensCIpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBZGRpdGlvbkFkZHNbbnVtXS5wZEV4dFByZW1Nb2RlID09PSAnMDEnICYmICF0aGlzLnNlbGVjdGVkQWRkaXRpb25BZGRzW251bV0ucGRNYXhWYWwpIHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCLor7fovpPlhaXliqDotLnkuIrpmZDlgLwiKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICB9DQogICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgIGV4dFByZW1MaXN0OiB0aGlzLnNlbGVjdGVkQWRkaXRpb25BZGRzDQogICAgICB9DQogICAgICBhZGRQZHRlbXBQZEV4dFByZW0odGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtcykpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfYWRkaXRpb24uYnVpbGREYXRhKCkudGhlbigoKSA9PiB7DQogICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEFkZGl0aW9uQWRkIG9mIHRoaXMuc2VsZWN0ZWRBZGRpdGlvbkFkZHMpIHsNCiAgICAgICAgICAgIHRoaXMuYWRkaXRpb25BZGRUYWJsZURhdGEuc3BsaWNlKHRoaXMuYWRkaXRpb25BZGRUYWJsZURhdGEuaW5kZXhPZihzZWxlY3RlZEFkZGl0aW9uQWRkKSwgMSkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5zZWxlY3RlZEFkZGl0aW9uQWRkcyA9IFtdDQogICAgICAgICAgdGhpcy5nZXRPcmRlck51bWJlcignYWRkaXRpb25fYWRkJykNCiAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2Uuc2F2ZScpKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOiOt+WPluebuOWQjOe8luWPt+eahOaVsOe7hA0KICAgIGdldE9yZGVyTnVtYmVyKGFycmF5TmFtZSkgew0KICAgICAgbGV0IHRhYmxlRGF0YQ0KICAgICAgbGV0IG9yZGVySW5kZXhBcnINCiAgICAgIGlmIChhcnJheU5hbWUgPT09ICdhZGRpdGlvbicpIHsNCiAgICAgICAgdGFibGVEYXRhID0gdGhpcy5hZGRpdGlvblRhYmxlRGF0YQ0KICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdhZGRpdGlvbl9hZGQnKSB7DQogICAgICAgIHRhYmxlRGF0YSA9IHRoaXMuYWRkaXRpb25BZGRUYWJsZURhdGENCiAgICAgIH0gZWxzZSBpZiAoYXJyYXlOYW1lID09PSAnYWRkaXRpb25fZGlzY291bnQnKSB7DQogICAgICAgIHRhYmxlRGF0YSA9IHRoaXMuZGlzY291bnRUYWJsZURhdGENCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgb3JkZXJJbmRleEFyciA9IFtdDQogICAgICAvLyDmjInnhacgcGF5bWVudElkIOaOkuW6j++8jOWwhiBwYXltZW50SWQg55u45ZCM55qE5pWw5o2u6L+e5Zyo5LiA6LW3DQogICAgICB0YWJsZURhdGEgPSB0aGlzLl8ub3JkZXJCeSh0YWJsZURhdGEsICdwZFByZW1JZCcsICdhc2MnKQ0KICAgICAgaWYgKGFycmF5TmFtZSA9PT0gJ2FkZGl0aW9uJykgew0KICAgICAgICB0aGlzLmFkZGl0aW9uVGFibGVEYXRhID0gdGFibGVEYXRhDQogICAgICB9IGVsc2UgaWYgKGFycmF5TmFtZSA9PT0gJ2FkZGl0aW9uX2FkZCcpIHsNCiAgICAgICAgdGhpcy5hZGRpdGlvbkFkZFRhYmxlRGF0YSA9IHRhYmxlRGF0YQ0KICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdhZGRpdGlvbl9kaXNjb3VudCcpIHsNCiAgICAgICAgdGhpcy5kaXNjb3VudFRhYmxlRGF0YSA9IHRhYmxlRGF0YQ0KICAgICAgfQ0KICAgICAgbGV0IG9yZGVyT2JqID0ge30NCiAgICAgIHRhYmxlRGF0YS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4gew0KICAgICAgICBlbGVtZW50LnJvd0luZGV4ID0gaW5kZXgNCiAgICAgICAgaWYgKG9yZGVyT2JqW2VsZW1lbnQucGRQcmVtSWRdKSB7DQogICAgICAgICAgb3JkZXJPYmpbZWxlbWVudC5wZFByZW1JZF0ucHVzaChpbmRleCkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBvcmRlck9ialtlbGVtZW50LnBkUHJlbUlkXSA9IFtdDQogICAgICAgICAgb3JkZXJPYmpbZWxlbWVudC5wZFByZW1JZF0ucHVzaChpbmRleCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC8vIOmcgOimgeWQiOW5tueahOihjOeahGluZGV45bey57uP5a2Y5Zyo5LqG5ZCM5LiA5Liq5pWw57uE6YeM77yM5oqK6L+Z5Lqb5pWw57uE5a2Y5YKo5YiwIHRoaXMub3JkZXJJbmRleEFycg0KICAgICAgZm9yIChsZXQgayBpbiBvcmRlck9iaikgew0KICAgICAgICBvcmRlckluZGV4QXJyLnB1c2gob3JkZXJPYmpba10pDQogICAgICB9DQogICAgICBpZiAoYXJyYXlOYW1lID09PSAnYWRkaXRpb24nKSB7DQogICAgICAgIHRoaXMub3JkZXJJbmRleEFycl9hZGRpdGlvbiA9IG9yZGVySW5kZXhBcnINCiAgICAgIH0gZWxzZSBpZiAoYXJyYXlOYW1lID09PSAnYWRkaXRpb25fYWRkJykgew0KICAgICAgICB0aGlzLm9yZGVySW5kZXhBcnJfYWRkaXRpb25fYWRkID0gb3JkZXJJbmRleEFycg0KICAgICAgfSBlbHNlIGlmIChhcnJheU5hbWUgPT09ICdhZGRpdGlvbl9kaXNjb3VudCcpIHsNCiAgICAgICAgdGhpcy5vcmRlckluZGV4QXJyX2FkZGl0aW9uX2Rpc2NvdW50ID0gb3JkZXJJbmRleEFycg0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5ZCI5bm25Y2V5YWD5qC8DQogICAgb2JqZWN0U3Bhbk1ldGhvZF9hZGRpdGlvbih7cm93LCBjb2x1bW4sIHJvd0luZGV4LCBjb2x1bW5JbmRleH0pIHsNCiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMiB8fCBjb2x1bW5JbmRleCA9PT0gMykgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9hZGRpdGlvbi5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5vcmRlckluZGV4QXJyX2FkZGl0aW9uW2ldDQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbGVtZW50Lmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICBsZXQgaXRlbSA9IGVsZW1lbnRbal0NCiAgICAgICAgICAgIGlmIChyb3dJbmRleCA9PT0gaXRlbSkgew0KICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICByb3dzcGFuOiBlbGVtZW50Lmxlbmd0aCwNCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IDAsDQogICAgICAgICAgICAgICAgICBjb2xzcGFuOiAwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBvYmplY3RTcGFuTWV0aG9kX2FkZGl0aW9uX2FkZCh7cm93LCBjb2x1bW4sIHJvd0luZGV4LCBjb2x1bW5JbmRleH0pIHsNCiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMiB8fCBjb2x1bW5JbmRleCA9PT0gMykgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9hZGRpdGlvbl9hZGQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBsZXQgZWxlbWVudCA9IHRoaXMub3JkZXJJbmRleEFycl9hZGRpdGlvbl9hZGRbaV0NCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVsZW1lbnQubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgIGxldCBpdGVtID0gZWxlbWVudFtqXQ0KICAgICAgICAgICAgaWYgKHJvd0luZGV4ID09PSBpdGVtKSB7DQogICAgICAgICAgICAgIGlmIChqID09PSAwKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IGVsZW1lbnQubGVuZ3RoLA0KICAgICAgICAgICAgICAgICAgY29sc3BhbjogMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgcm93c3BhbjogMCwNCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5LyY5oOg6KGo5qC85ZCI5bm2DQogICAgb2JqZWN0U3Bhbk1ldGhvZF9kaXNjb3VudCh7cm93LCBjb2x1bW4sIHJvd0luZGV4LCBjb2x1bW5JbmRleH0pIHsNCiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMiB8fCBjb2x1bW5JbmRleCA9PT0gMykgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JkZXJJbmRleEFycl9hZGRpdGlvbl9kaXNjb3VudC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5vcmRlckluZGV4QXJyX2FkZGl0aW9uX2Rpc2NvdW50W2ldDQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbGVtZW50Lmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICBsZXQgaXRlbSA9IGVsZW1lbnRbal0NCiAgICAgICAgICAgIGlmIChyb3dJbmRleCA9PT0gaXRlbSkgew0KICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICByb3dzcGFuOiBlbGVtZW50Lmxlbmd0aCwNCiAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIHJvd3NwYW46IDAsDQogICAgICAgICAgICAgICAgICBjb2xzcGFuOiAwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyDmuIXnqbrnvLTotLnlrprkuYnooajljZUNCiAgICBjbGVhckZvcm1EZWYoKSB7DQogICAgICBjb25zdCBpZCA9IHRoaXMuZm9ybV9kZWYuaWQNCiAgICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHRoaXMuZm9ybV9kZWYuZnJlcXVlbmN5DQogICAgICBpZiAoaWQpIHsNCiAgICAgICAgdGhpcy5mb3JtX2RlZi5mcmVxdWVuY3kgPSBmcmVxdWVuY3kNCiAgICAgICAgdGhpcy5mb3JtX2RlZiA9IHRoaXMuc2VsZWN0ZWREZWYNCiAgICAgICAgY29uc3QgYXJyID0gdGhpcy5mb3JtX2RlZi5wZFBheUZyZXF1ZW5jeQ0KICAgICAgICBpZiAoYXJyKSB7DQogICAgICAgICAgdGhpcy5wcm9kdWN0X2V4dHJhLnBkUGF5RnJlcSA9IGV2YWwoJygnICsgYXJyICsgJyknKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMucHJvZHVjdF9leHRyYS5wZFBheUZyZXEgPSBbXQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmluaXRfcGF5X2ZyZXF1ZW5jeSgpDQogICAgICAgIHRoaXMucmVzZXRGb3JtRGVmKCkNCiAgICAgICAgdGhpcy5mb3JtX2RlZi5pZCA9IGlkDQogICAgICAgIHRoaXMuZm9ybV9kZWYuZnJlcXVlbmN5ID0gZnJlcXVlbmN5DQogICAgICAgIHRoaXMuc2VsZWN0ZWREZWYgPSB7fQ0KICAgICAgICB0aGlzLmZvcm1fZGVmLnBkUHJlbUFkZEZsYWcgPSAnWScNCiAgICAgICAgdGhpcy5mb3JtX2RlZi5wZFBheVN0YXJ0Q2FsTW9kZSA9ICcwJw0KICAgICAgICB0aGlzLmZvcm1fZGVmLnBkUGF5U3RhcnRDYWxSdWxlID0gJ1MnDQogICAgICAgIHRoaXMuZm9ybV9kZWYucGRQYXlFbmRDYWxNb2RlID0gJzAnDQogICAgICAgIHRoaXMuZm9ybV9kZWYucGRQYXlFbmRDYWxSdWxlID0gJ1MnDQogICAgICAgIHRoaXMuZm9ybV9kZWYucGRQYXlEYXRlVmFsdWUgPSAnMScNCiAgICAgICAgdGhpcy5pbml0X3BheV9kYXRlKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOa4heepuuWKoOi0ueWumuS5ieihqOWNlQ0KICAgIGNsZWFyRm9ybUFkZGl0aW9uKCkgew0KICAgICAgdGhpcy5zZWxlY3RlZEFkZGl0aW9uQ2hhbmdlZCgpDQogICAgfSwNCiAgICAvL+mHjee9ruS8mOaDoOWvueixoQ0KICAgIHJlc2V0RGlzY291bnRGb3JtKCkgew0KICAgICAgdGhpcy5mb3JtX2NvdW50ID0gew0KICAgICAgICBwZFZlcklkOiAnJywNCiAgICAgICAgb3BlcmF0b3I6ICcnLA0KICAgICAgICBwZFR5cGU6ICcnLA0KICAgICAgICBwZERlZlR5cGU6ICcnLA0KICAgICAgICBwZEluZm9JZDogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIHBkUHJlbUlkOiAnJywNCiAgICAgICAgcGRQcmVtQ29kZTogJycsDQogICAgICAgIHBkQ21wblJhbmdlOiBbXSwNCiAgICAgICAgcGRDbXBuVHlwZTogJycsDQogICAgICAgIGNtcG5JbmZvSWQ6ICcnLA0KICAgICAgICBwZENtcG5Db2RlOiAnJywNCiAgICAgICAgcGRDbXBuT3JkZXI6IHRoaXMuY29uZmlnUmFuZ2VMZW5ndGgsDQogICAgICAgIHBkQ21wbkNhbGNNb2RlOiAnJywNCiAgICAgICAgcGRDbXBuVmFsOiAnJywNCiAgICAgICAgcGRDbXBuQ2FsY0NvZGU6ICcnLA0KICAgICAgICBwZENtcG5EZXNjOiAnJw0KICAgICAgfQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLmZvcm1fY291bnQuY2xlYXJWYWxpZGF0ZSgpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6YeN572u57y06LS55a+56LGh77yI55u45b2T5LqOIG5ldyDkuobkuIDkuKrlr7nosaHvvIzlhbfmnInop6PpmaTlj4zlkJHnu5HlrprnmoTmlYjmnpzvvIkNCiAgICByZXNldEZvcm1EZWYoKSB7DQogICAgICB0aGlzLmZvcm1fZGVmID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwZEluZm9JZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFZlcklkOiB1bmRlZmluZWQsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIG9wZXJhdG9yOiAnJywNCiAgICAgICAgcGRQYXlOYW1lOiAnJywNCiAgICAgICAgcGRQcmVtQ29kZTogJycsDQogICAgICAgIHBkUHJlbUNhbE1vZGU6ICdHJywNCiAgICAgICAgcGRQcmVtWmVyb0ZsYWc6ICdZJywNCiAgICAgICAgcGRQcmVtUmVjbEZsYWc6ICdOJywNCiAgICAgICAgcGRVcmdlUGF5RmxhZzogJ1knLA0KICAgICAgICBwZFBheVN0YXJ0UGVyaW9kOiB1bmRlZmluZWQsDQogICAgICAgIHBkUGF5U3RhcnRQZXJVbml0OiAnWScsDQogICAgICAgIHBkUGF5U3RhcnRDYWxSdWxlOiAnUycsDQogICAgICAgIHBkUGF5U3RhcnRDYWxNb2RlOiAnMCcsDQogICAgICAgIHBkUGF5RW5kUGVyaW9kOiB1bmRlZmluZWQsDQogICAgICAgIHBkUGF5RW5kVW5pdDogJ1knLA0KICAgICAgICBwZFBheUVuZENhbFJ1bGU6ICdTJywNCiAgICAgICAgcGRQYXlFbmRDYWxNb2RlOiAnMCcsDQogICAgICAgIHBkQWRkUHJlbU1vZGU6ICcnLA0KICAgICAgICBwZFBheUFjY0tpbmQ6ICcnLA0KICAgICAgICBwZENoYXJQcmVtUmVsOiAnTicsDQogICAgICAgIHBkUmF0ZUNoYW5nZUZsYWc6ICdOJywNCiAgICAgICAgcGRQcmVtQWRkRmxhZzogJ04nLA0KICAgICAgICBwZFByZW1TdGFydEZsYWc6ICdOJywNCiAgICAgICAgcGRQcmVtQWNjUmVsYTogJ04nLA0KICAgICAgICBwZFByZW1DYWxjQ29kZTogJycsDQogICAgICAgIHBkUGF5RGF0ZVZhbHVlOiAnMScNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybV9kZWYucGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICAgIHRoaXMuZm9ybV9kZWYucGRWZXJJZCA9IHRoaXMucHJvZHVjdC5wZFZlcklkDQogICAgICB0aGlzLmZvcm1fZGVmLnBkQ29kZSA9IHRoaXMucHJvZHVjdC5wZENvZGUNCiAgICAgIHRoaXMuZm9ybV9kZWYucGROYW1lID0gdGhpcy5wcm9kdWN0LnBkTmFtZQ0KICAgICAgdGhpcy5wYXlEYXRlRm9ybSA9IHsNCiAgICAgICAgcGF5RGF0ZVRhYmxlOiBbXSwNCiAgICAgIH0NCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmcy5mb3JtX2RlZi5jbGVhclZhbGlkYXRlKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDph43nva7liqDotLnlr7nosaHvvIjnm7jlvZPkuo4gbmV3IOS6huS4gOS4quWvueixoe+8jOWFt+acieino+mZpOWPjOWQkee7keWumueahOaViOaenO+8iQ0KICAgIHJlc2V0Rm9ybUFkZGl0aW9uKCkgew0KICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uID0gew0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFByZW1JZDogdW5kZWZpbmVkLA0KICAgICAgICBwZFZlcklkOiB1bmRlZmluZWQsDQogICAgICAgIG9wZXJhdG9yOiAnJywNCiAgICAgICAgcGRFeHRQcmVtQ29kZTogJycsDQogICAgICAgIHBkRXh0UHJlbU5hbWU6ICcnLA0KICAgICAgICBwZFByZW1OYW1lOiAnJywNCiAgICAgICAgcGRQcmVtQ29kZTogJycsDQogICAgICAgIHBkRXh0UHJlbU9iajogJycsDQogICAgICAgIHBkRXh0UHJlbU1vZGU6ICcnLA0KICAgICAgICBwZEV4dFByZW1UeXBlOiAnJywNCiAgICAgICAgcGRNYXhWYWw6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRFeHRQcmVtQ2FsY0NvZGU6ICcnLA0KICAgICAgICBjcmVhdGVUaW1lOiB1bmRlZmluZWQsDQogICAgICAgIHVwZGF0ZVRpbWU6IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybV9hZGRpdGlvbikgew0KICAgICAgICB0aGlzLiRyZWZzLmZvcm1fYWRkaXRpb24uY2xlYXJWYWxpZGF0ZSgpDQogICAgICB9DQogICAgfSwNCiAgICAvLyDph43nva7kuLTml7bliqDotLnlr7nosaHvvIjnm7jlvZPkuo4gbmV3IOS6huS4gOS4quWvueixoe+8jOWFt+acieino+mZpOWPjOWQkee7keWumueahOaViOaenO+8iQ0KICAgIHJlc2V0Rm9ybUFkZGl0aW9uQWRkKCkgew0KICAgICAgdGhpcy5mb3JtX2FkZGl0aW9uX2FkZCA9IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRQcmVtSWQ6IFtdLA0KICAgICAgICBwZEV4dFByZW1PYmo6IFtdLA0KICAgICAgICBwZEV4dFByZW1Nb2RlOiBbXSwNCiAgICAgICAgcGRFeHRQcmVtVHlwZTogW10sDQogICAgICAgIHBkRXh0UHJlbUNhbGNDb2RlOiAnJw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybV9hZGRpdGlvbl9hZGQpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5mb3JtX2FkZGl0aW9uX2FkZC5jbGVhclZhbGlkYXRlKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dBZGRGZWUoKSB7DQogICAgICB0aGlzLmFkZEZlZUZsYWcgPSAhdGhpcy5hZGRGZWVGbGFnDQogICAgfSwNCiAgICBhZGRQYXlSb3coKSB7DQogICAgICB0aGlzLnBheURhdGVGb3JtLnBheURhdGVUYWJsZS5wdXNoKHsNCiAgICAgICAgcGRQYXlFbmRQZXJpb2Q6ICcnLA0KICAgICAgICBwZFBheUVuZFVuaXQ6ICdZJywNCiAgICAgICAgcGRQYXlTdGFydFBlcmlvZDogJycsDQogICAgICAgIHBkUGF5U3RhcnRQZXJVbml0OiAnWScNCiAgICAgIH0pDQogICAgfSwNCiAgICBkZWxQYXlSb3coaW5kZXgsIHJvdykgew0KICAgICAgdGhpcy5wYXlEYXRlRm9ybS5wYXlEYXRlVGFibGUuc3BsaWNlKGluZGV4LCAxKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-definition/pd-operation-def/pd-underwriting-def/underwriting-addition","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <!--  -->\r\n    <!--  -->\r\n    <cus-table-title :label=\"$t('pdaddition.addition_list') \"></cus-table-title>\r\n    <el-table :data=\"additionTableData\" :span-method=\"objectSpanMethod_addition\" border element-loading-text=\"Loading\"\r\n              fit size=\"mini\" @row-click=\"rowClick_addition\">\r\n      <el-table-column :label=\"$t('table.select')\" align=\"center\" width=\"60px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group v-model=\"selectedAddition\" @change=\"selectedAdditionChanged\">\r\n            <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n        <template v-slot=\"scope\">\r\n          {{ initTableIndex('page_addition', scope.$index) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdaddition.pay_code')\" align=\"center\" prop=\"pdPremCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdaddition.pay_name')\" align=\"center\" prop=\"pdPremName\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdaddition.addition_pay_code')\" align=\"center\"\r\n                       prop=\"pdExtPremCode\"></el-table-column>\r\n      <el-table-column :filter-method=\"filterHandler\" :filters=\"filterpdExtPremNameList1\"\r\n                       :label=\"$t('pdaddition.addition_pay_name')\"\r\n                       align=\"center\" prop=\"pdExtPremName\" sortable></el-table-column>\r\n      <el-table-column :label=\"$t('pdaddition.addition_pay_person')\" align=\"center\" prop=\"pdExtPremObj\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdExtPremObj | filter_additionPayPerson }}</template>\r\n      </el-table-column>\r\n      <el-table-column :filter-method=\"filterHandler\" :filters=\"filterpdExtPremNameList2\"\r\n                       :label=\"$t('pdaddition.addition_type')\" align=\"center\"\r\n                       prop=\"pdExtPremType\"\r\n                       sortable>\r\n        <template v-slot=\"scope\">{{ scope.row.pdExtPremType | filter_additionType }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdaddition.addition_mode')\" align=\"center\" prop=\"pdExtPremMode\">\r\n        <template v-slot=\"scope\">{{ scope.row.pdExtPremMode | filter_additionAdditionMode }}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdaddition.operation')\" align=\"center\" width=\"100px\">\r\n        <template slot-scope=\"scope\">\r\n          <cus-del-btn v-auth=\"'pdtemp-pd-ext-prem:delete'\" @ok=\"handleDeleteAddition(scope.row)\"></cus-del-btn>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--  -->\r\n    <cus-pagination ref=\"page_addition\" v-model=\"additionTableData\" :autoBuild=\"false\" :mergedAttrName=\"'pdPremId'\"\r\n                    :needMerging=\"true\" :orderIndexArrName=\"'orderIndexArr_addition'\" :pageSize=\"10\"\r\n                    :params=\"params_addition\" :tableData=\"additionTableData\" url=\"/pdtemp-pd-ext-prem/base/list\"\r\n                    @updateOrderIndexArr=\"updateOrderIndexArr\"/>\r\n    <!--  -->\r\n    <div v-if=\"!selectedAddition.id && addFeeFlag\">\r\n      <cus-form-title :first=\"true\" :label=\"$t('pdaddition.addition_info')\"></cus-form-title>\r\n      <el-form ref=\"form_addition_add\" :model=\"form_addition_add\" :rules=\"rules\" label-width=\"130px\">\r\n        <cus-row>\r\n          <cus-col :span=\"11\">\r\n            <el-form-item :label=\"$t('pdaddition.pay_name')\" prop=\"pdPremId\">\r\n              <el-select v-model=\"form_addition_add.pdPremId\" :placeholder=\"$t('pdaddition.please_select')\" clearable\r\n                         filterable multiple>\r\n                <el-option v-for=\"def in defTableData\" :label=\"def.pdPayName\" :value=\"def.id\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col :span=\"11\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_pay_person')\" prop=\"pdExtPremObj\">\r\n              <cus-checkbox v-model=\"form_addition_add.pdExtPremObj\"\r\n                            :codetype=\"'pdAddPremObj'\"></cus-checkbox>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <cus-row>\r\n          <cus-col :span=\"11\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_mode')\" prop=\"pdExtPremMode\">\r\n              <cus-checkbox v-model=\"form_addition_add.pdExtPremMode\"\r\n                            :codetype=\"'pd_prem_addition_addition_mode'\"></cus-checkbox>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <el-row>\r\n          <el-col :span=\"11\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_type')\" prop=\"pdExtPremType\">\r\n              <el-input v-model=\"displayName_additionType\" :placeholder=\"$t('pdaddition.unselected')\"\r\n                        readonly></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-button dialog-disable=\"disable\" size=\"small\" style=\"margin-left: 5px\" @click=\"pageFlag.dialogVisible_additionType = true\">\r\n            {{ $t('pdaddition.please_select') }}\r\n          </el-button>\r\n        </el-row>\r\n        <el-dialog ref=\"additionType\" v-dialog-drag :visible.sync=\"pageFlag.dialogVisible_additionType\"\r\n                   width=\"45%\">\r\n          <cus-page-title :label=\"$t('pdaddition.addition_type')\"></cus-page-title>\r\n          <el-form-item>\r\n            <cus-checkbox v-model=\"form_addition_add.pdExtPremType\"\r\n                          :codetype=\"'pd_prem_addition_type'\"></cus-checkbox>\r\n          </el-form-item>\r\n          <el-button-group>\r\n            <el-button dialog-disable=\"disable\" icon=\"el-icon-success\" size=\"small\" type=\"primary\" @click=\"selectAllAdditionType\">\r\n              {{ $t('pdaddition.select_all') }}\r\n            </el-button>\r\n            <el-button dialog-disable=\"disable\" icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"form_addition_add.pdExtPremType = []\">\r\n              {{ $t('pdaddition.refresh') }}\r\n            </el-button>\r\n          </el-button-group>\r\n          <div style=\"float: right\">\r\n            <el-button-group>\r\n              <el-button dialog-disable=\"disable\" icon=\"el-icon-success\" size=\"small\" type=\"primary\"\r\n                         @click=\"pageFlag.dialogVisible_additionType = false\">\r\n                {{ $t('pdaddition.add') }}\r\n              </el-button>\r\n            </el-button-group>\r\n          </div>\r\n        </el-dialog>\r\n        <el-row>\r\n          <el-form-item style=\"float: right\">\r\n            <el-button dialog-disable=\"disable\" icon=\"el-icon-success\" size=\"small\" type=\"primary\" @click=\"handleAddAddition\">\r\n              {{ $t('pdaddition.add') }}\r\n            </el-button>\r\n            <el-button dialog-disable=\"disable\" icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"resetFormAdditionAdd\">\r\n              {{ $t('pdaddition.refresh') }}\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-row>\r\n\r\n        <!--  -->\r\n        <div v-if=\"additionAddTableData.length > 0\">\r\n          <cus-form-title :label=\"$t('pdaddition.to_add_additionitem')\"></cus-form-title>\r\n          <cus-table-title :label=\"$t('pdaddition.addition_add_list')\"></cus-table-title>\r\n          <el-table :data=\"additionAddTableData\" :span-method=\"objectSpanMethod_addition_add\"\r\n                    border element-loading-text=\"Loading\" fit max-height=\"500\" size=\"mini\"\r\n                    @selection-change=\"handleSelectionChange\">\r\n            <el-table-column align=\"center\" type=\"selection\" width=\"50\"></el-table-column>\r\n            <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.pay_code')\" align=\"center\" prop=\"pdPremCode\"></el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.pay_name')\" align=\"center\" prop=\"pdPremName\"></el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.addition_pay_name')\" align=\"center\" width=\"300px\">\r\n              <template v-slot=\"scope\">\r\n                <el-input v-model=\"scope.row.pdExtPremName\" :placeholder=\"$t('form.please_enter')\" maxlength=\"60\"\r\n                          show-word-limit></el-input>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.addition_pay_person')\" align=\"center\" prop=\"additionPayPersonType\">\r\n              <template v-slot=\"scope\">{{ scope.row.pdExtPremObj | filter_additionPayPerson }}</template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.addition_mode')\" align=\"center\" prop=\"additionMode\">\r\n              <template v-slot=\"scope\">{{ scope.row.pdExtPremMode | filter_additionAdditionMode }}</template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.addition_type')\" align=\"center\" prop=\"additionType\">\r\n              <template v-slot=\"scope\">{{ scope.row.pdExtPremType | filter_additionType }}</template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"$t('pdaddition.addition_maximum')\" align=\"center\" width=\"140px\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input-number v-model=\"scope.row.pdMaxVal\" :disabled=\"scope.row.pdExtPremMode!=='01'\"\r\n                                 :placeholder=\"$t('i18nView.placeholderNum')\" style=\"width: 120px\"></el-input-number>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"$t('table.actions')\" align=\"center\" width=\"100px\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button dialog-disable=\"disable\" slot=\"reference\" size=\"mini\"\r\n                           type=\"danger\" @click=\"handleDeleteAdditionAdd(scope.row)\"><i class=\"el-icon-minus\"></i>\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <el-form>\r\n            <el-row v-if=\"selectedAdditionAdds.length > 0\" style=\"margin: 20px auto 50px auto\">\r\n              <el-form-item style=\"float: right\">\r\n                <el-button dialog-disable=\"disable\" v-auth=\"'pdtemp-pd-ext-prem:add'\" icon=\"el-icon-success\" size=\"small\" type=\"primary\"\r\n                           @click=\"handleSaveAdditionAdd\">{{ $t('pdaddition.save') }}\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-row>\r\n          </el-form>\r\n          <br/>\r\n        </div>\r\n        <cus-form-title :label=\"$t('pdaddition.addition_calc_formula_code')\"></cus-form-title>\r\n        <cus-row>\r\n          <cus-col>\r\n            <el-form-item :label=\"$t('pdaddition.addition_calc_formula_code1')\">\r\n              <el-input v-model=\"form_addition.pdExtPremCalcCode\" readonly>\r\n                <el-tooltip\r\n                  slot=\"suffix\"\r\n                  :content=\"(Object.keys(selectedAddition).length===0?$t('pdaddition.message.pleaseSelectAddPremium'):'')\"\r\n                  :disabled=\"Object.keys(selectedAddition).length>0\" effect=\"dark\"\r\n                  placement=\"top\">\r\n                  <svg-icon\r\n                    :style=\"{cursor:Object.keys(selectedAddition).length>0?'pointer':'not-allowed'}\"\r\n                    icon-class=\"calc\"\r\n                    style=\"color: #606266;font-size: 18px\"\r\n                    @click=\"Object.keys(selectedAddition).length>0 && goClicks('1','19')\"/>\r\n                </el-tooltip>\r\n              </el-input>\r\n            </el-form-item>\r\n          </cus-col>\r\n        </cus-row>\r\n        <el-row v-if=\"false\">\r\n          <el-button dialog-disable=\"disable\" icon=\"el-icon-monitor\" size=\"small\" type=\"primary\" @click=\"goRules('1','1')\">\r\n            {{ $t('pdaddition.premium_rule_def') }}\r\n          </el-button>\r\n        </el-row>\r\n\r\n      </el-form>\r\n    </div>\r\n    <!--  -->\r\n    <div v-if=\"selectedAddition.id && addFeeFlag\">\r\n      <cus-form-title :first=\"true\" :label=\"$t('pdaddition.addition_info')\"></cus-form-title>\r\n      <el-form ref=\"form_addition\" :model=\"form_addition\" :rules=\"rules\" label-position=\"right\" label-width=\"130px\">\r\n        <el-row>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.pay_code')\">\r\n              <div>{{ form_addition.pdPremCode }}</div>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.pay_name')\">\r\n              <div>{{ form_addition.pdPremId | filter_paymentId }}</div>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_pay_code')\">\r\n              <div>{{ form_addition.pdExtPremCode }}</div>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_pay_name')\" prop=\"pdExtPremName\">\r\n              <el-input v-model=\"form_addition.pdExtPremName\" maxlength=\"60\" show-word-limit></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_pay_person')\" prop=\"pdExtPremObj\">\r\n              <cus-radio v-model=\"form_addition.pdExtPremObj\" :codetype=\"'pdAddPremObj'\"></cus-radio>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_mode')\" prop=\"pdExtPremMode\">\r\n              <cus-radio v-model=\"form_addition.pdExtPremMode\"\r\n                         :codetype=\"'pd_prem_addition_addition_mode'\"></cus-radio>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_type')\" prop=\"pdExtPremType\">\r\n              <cus-select v-model=\"form_addition.pdExtPremType\" :codetype=\"'pd_prem_addition_type'\"></cus-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col v-if=\"form_addition.pdExtPremMode === '01'\" :span=\"10\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_maximum')\" prop=\"pdMaxVal\">\r\n              <el-input-number v-model=\"form_addition.pdMaxVal\" :placeholder=\"$t('i18nView.placeholderNum')\"></el-input-number>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <cus-form-title :label=\"$t('pdaddition.addition_calc_formula_code')\"></cus-form-title>\r\n        <el-row>\r\n          <el-col :span=\"6\">\r\n            <el-form-item :label=\"$t('pdaddition.addition_calc_formula_code1')\">\r\n              <el-input v-model=\"form_addition.pdExtPremCalcCode\">\r\n                <el-tooltip\r\n                  slot=\"suffix\"\r\n                  :content=\"Object.keys(selectedAddition).length===0?$t('pdaddition.message.pleaseSelectAddPremium'):''\"\r\n                  :disabled=\"Object.keys(selectedAddition).length>0\" effect=\"dark\"\r\n                  placement=\"top\">\r\n                  <svg-icon\r\n                    :style=\"{cursor:Object.keys(selectedAddition).length>0?'pointer':'not-allowed'}\"\r\n                    icon-class=\"calc\"\r\n                    style=\"color: #606266;font-size: 18px\"\r\n                    @click=\"Object.keys(selectedAddition).length>0 && goClicks('1','19')\"/>\r\n                </el-tooltip>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-form-item style=\"float: right\">\r\n            <el-button dialog-disable=\"disable\" v-auth=\"'pdtemp-pd-ext-prem:update'\" icon=\"el-icon-success\" size=\"small\"\r\n                       type=\"primary\" @click=\"handleUpdateAddition\">{{ $t('pdaddition.update') }}\r\n            </el-button>\r\n            <!-- <el-button dialog-disable=\"disable\"  size=\"small\" @click=\"handleDeleteAddition\" style=\"margin: 0 10px 0 0\"\r\n                        type=\"danger\" v-auth=\"'pdtemp-pd-ext-prem:delete'\">{{ $t('table.delete') }}\r\n             </el-button>-->\r\n            <el-button dialog-disable=\"disable\" icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"clearFormAddition\">\r\n              {{ $t('pdaddition.refresh') }}\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog v-if=\"dialogShow.premAmountFormula\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :show-close=\"false\" :visible.sync=\"dialogShow.premAmountFormula\" center width=\"80%\"\r\n               @close=\"changeDialogVisible_formula(false)\">\r\n      <premAmountFormula :calculationFormulaType=\"calculationFormulaType\" :guaranteeDetails=\"guaranteeDetails\"\r\n                         :pdUwSiTypeDtOptions=\"pdUwSiTypeDtOptions\" :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                         @bringInCalcCode=\"bringInCalcCode\"\r\n                         @changeDialogVisible_formula=\"changeDialogVisible_formula\"\r\n                         @changeDialogVisible_formulaSelect=\"changeDialogVisible_formulaSelect\"></premAmountFormula>\r\n      <!--  -->\r\n      <el-dialog v-if=\"dialogShow.premAmountFormulaSelect\" v-dialog-drag :close-on-click-modal=\"false\"\r\n                 :show-close=\"false\" :visible.sync=\"dialogShow.premAmountFormulaSelect\" append-to-body center\r\n                 width=\"70%\" @close=\"changeDialogVisible_formulaSelect(false)\">\r\n        <premAmountFormulaSelect :calculationFormulaType=\"calculationFormulaType\" :guaranteeDetails=\"guaranteeDetails\"\r\n                                 :pdUwSiTypeDtOptions=\"pdUwSiTypeDtOptions\" :pdUwSiTypeOptions=\"pdUwSiTypeOptions\"\r\n                                 @bringInCalcCode=\"bringInCalcCode\"\r\n                                 @changeDialogVisible_formulaSelect=\"changeDialogVisible_formulaSelect\"></premAmountFormulaSelect>\r\n      </el-dialog>\r\n    </el-dialog>\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {mapGetters} from \"vuex\"\r\nimport {getPayDate, getPdAttrInfo, getPdClsLabInfo} from \"@/api/basicinfo/pdtemppdprem\"\r\nimport {\r\n  addPdtempPdExtPrem,\r\n  deletePdtempPdExtPrem,\r\n  getAllPremium,\r\n  updatePdtempPdExtPrem\r\n} from \"@/api/basicinfo/pdtemppdextprem\"\r\nimport pdDiscountFormula\r\n  from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/discount-formula\"\r\nimport pdDiscountFormulaSelect\r\n  from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/discount-formula-select\"\r\nimport premAmountFormula from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/prem-formula\"\r\nimport premAmountFormulaSelect\r\n  from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/prem-formula-select\"\r\nimport premRules from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/prem-rule\"\r\nimport premRulesSelect from \"@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/prem-rule-select\"\r\n\r\nimport guide from '@/views/product-definition/pd-framework-def/pd-structure-def/payment-def/guide'\r\n\r\nlet _this\r\n\r\nexport default {\r\n  name: \"underwritingAddition\",\r\n  filters: {\r\n    filter_dateSuffix(code) {\r\n      return _this.getCodeName('pd_prem_date_suffix', code, true)\r\n    },\r\n    filter_freq(code) {\r\n      return _this.getCodeName('pd_prem_freq', code)\r\n    },\r\n    filter_startCalcRule(code) {\r\n      return _this.getCodeName('pd_prem_start_calc_rule', code)\r\n    },\r\n    filter_endCalcRule(code) {\r\n      return _this.getCodeName('pd_prem_end_calc_rule', code)\r\n    },\r\n    filter_startCalcMethod(code) {\r\n      return _this.getCodeName('pd_prem_start_calc_method', code)\r\n    },\r\n    filter_endCalcMethod(code) {\r\n      return _this.getCodeName('pd_prem_end_calc_method', code)\r\n    },\r\n    filter_additionType(code) {\r\n      return _this.getCodeName('pd_prem_addition_type', code)\r\n    },\r\n    filter_additionMode(code) {\r\n      return _this.getCodeName('pd_prem_addition_mode', code)\r\n    },\r\n    filter_accountType(code) {\r\n      return _this.getCodeName('pd_prem_account_type', code)\r\n    },\r\n    filter_additionPayPerson(code) {\r\n      return _this.getCodeName('pdAddPremObj', code)\r\n    },\r\n    filter_additionAdditionMode(code) {\r\n      return _this.getCodeName('pd_prem_addition_addition_mode', code)\r\n    },\r\n    filter_payZero(code) {\r\n      return _this.getCodeName('pd_prem_zero', code)\r\n    },\r\n    filter_serviceChargeOffset(code) {\r\n      return _this.getCodeName('pd_prem_service_charge_offset', code)\r\n    },\r\n    filter_pdCmpnType(code) {\r\n      return _this.getCodeName('preferentialType', code)\r\n    },\r\n    filter_pdCmpnCalcMode(code) {\r\n      return _this.getCodeName('preferentialClculationType', code)\r\n    },\r\n    filter_pdCmpnRange(code) {\r\n      for (const def of _this.defTableData) {\r\n        if (def.pdPremCode === code) {\r\n          return def.pdPremCode + \":\" + def.pdPayName\r\n        }\r\n      }\r\n      for (const def of _this.additionTableData) {\r\n        if (def.pdExtPremCode === code) {\r\n          return def.pdExtPremCode + \":\" + def.pdExtPremName\r\n        }\r\n      }\r\n      return code\r\n    },\r\n    filter_payUrging(code) {\r\n      return _this.getCodeName('pd_prem_urging', code)\r\n    },\r\n    filter_payFrequency(code) {\r\n      return _this.getCodeName('paymentFrequency', code)\r\n    },\r\n    filter_paydatevalue(code) {\r\n      return _this.getCodeName('pdPayEndCalMode', code)\r\n    },\r\n    filter_paymentId(pdPremId) {\r\n      for (const def of _this.defTableData) {\r\n        if (def.id === pdPremId) {\r\n          return def.pdPayName\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    filter_pdPayStartPeriod(list) {\r\n      let returnData = ''\r\n      if (list.length) {\r\n        list.forEach(data => {\r\n          if (returnData.length) {\r\n            returnData += ','\r\n          }\r\n          returnData += data.pdPayStartPeriod\r\n          returnData += _this.getCodeName('pd_prem_date_suffix', data.pdPayStartPerUnit, true)\r\n        })\r\n      }\r\n      return returnData\r\n    },\r\n    filter_pdPayEndPeriod(list) {\r\n      let returnData = ''\r\n      if (list.length) {\r\n        list.forEach(data => {\r\n          if (returnData.length) {\r\n            returnData += ','\r\n          }\r\n          returnData += data.pdPayEndPeriod\r\n          returnData += _this.getCodeName('pd_prem_date_suffix', data.pdPayEndUnit, true)\r\n        })\r\n      }\r\n      return returnData\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      productCalcRevisionShowINfo: false,\r\n      pdPayFreqCopy: [],\r\n      quickfilterHandlerList0: [],\r\n      quickfilterHandlerList1: [],\r\n      quickfilterHandlerList2: [],\r\n      quickfilterHandlerList3: [],\r\n      filterHandlerList0: [],\r\n      filterHandlerList1: [],\r\n      filterHandlerList2: [],\r\n      filterHandlerList3: [],\r\n      filterHandlerList4: [],\r\n      filterpdExtPremNameList1: [],\r\n      filterpdExtPremNameList2: [],\r\n      detailTypeOptionList: [],\r\n      payDateForm: {\r\n        payDateTable: [],\r\n      },\r\n      tableCount: 0,\r\n      tableCountDiscount: 0,\r\n      pdCmpnCalcCode1: '',\r\n      flag1: 0,\r\n      //\r\n      dialogShow: {\r\n        premAmountFormula: false,\r\n        premAmountFormulaSelect: false\r\n      },\r\n      guaranteeDetails: '',\r\n      calculationFormulaType: '',\r\n      pdUwSiTypeOptions: '',\r\n      pdUwSiTypeDtOptions: '',\r\n      pdDisCount: '',\r\n      //\r\n      dialogRulesShow: {\r\n        premRules: false,\r\n        premRulesSelect: false\r\n      },\r\n      showPageFlag: 0,\r\n      defTableData: [],\r\n      additionTableData: [],\r\n      additionAddTableData: [],\r\n      pdCmpnTypeFilters: [],\r\n      rowIndex: '-1',\r\n      orderIndexArr_addition: [],\r\n      orderIndexArr_addition_add: [],\r\n      orderIndexArr_addition_discount: [],\r\n      hoverOrderArr: [],\r\n      quickicon_discount: \"el-icon-arrow-right\",\r\n      quickshow: false,\r\n      filterDiscountCode: [],\r\n      pdCmpnRangeFilters: [],\r\n      productOriginalList: [],\r\n      productList: [],\r\n      selectedReferenceProductId: undefined,\r\n      form_quick: {\r\n        typeRegion: '',\r\n      },\r\n      params: {\r\n        eq_pdInfoId: undefined,\r\n        eq_pdPremCalMode: '',\r\n        accountRelated: '',\r\n        extraPremiumFlag: '',\r\n        eq_id: '',\r\n        byPage: 'Y',\r\n        finelinesRegion: '',\r\n        firstOpenPageFlag: 'Y',\r\n      },\r\n      params_currentProduct: {\r\n        eq_pdInfoId: undefined,\r\n        like_payName: '',\r\n        eq_payCode: ''\r\n      },\r\n      params_addition: {\r\n        premiumList: []\r\n      },\r\n      configRangeLength: '',\r\n      filterCmpnType: '1$D$I',\r\n      addFeeFlag: true,\r\n      discountFlag: 'N',\r\n      selectedDiscount: {},\r\n      selectedDef: {},\r\n      selectedDefInQueryResult: {},\r\n      selectedAddition: {},\r\n      selectedAdditionAdds: [],\r\n      // \r\n      product: {\r\n        id: undefined,\r\n        bType: '',\r\n        cType: '',\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdStartDateRule: '',\r\n        pdStartDateMode: '',\r\n        pdStartPeriod: undefined,\r\n        pdStartPeriodUnit: '',\r\n        pdEndDateRule: '',\r\n        pdEndDateMode: '',\r\n        pdEndPeriod: undefined,\r\n        pdEndPeriodUnit: '',\r\n        pdGracePeriod: undefined,\r\n        pdObservationDay: undefined,\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        pdStartDate: undefined,\r\n        pdStopDate: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      product_extra: {\r\n        typeRegion: '',\r\n        pdPayFreq: []\r\n      },\r\n      form_def: {},\r\n      form_addition: {\r\n        id: undefined,\r\n        pdPremId: undefined,\r\n        pdVerId: undefined,\r\n        operator: '',\r\n        pdExtPremCode: '',\r\n        pdExtPremName: '',\r\n        pdPremName: '',\r\n        pdPremCode: '',\r\n        pdExtPremObj: '',\r\n        pdExtPremMode: '',\r\n        pdExtPremType: '',\r\n        pdMaxVal: undefined,\r\n        pdExtPremCalcCode: '',\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      form_addition_add: {\r\n        id: undefined,\r\n        pdPremId: [],\r\n        pdExtPremObj: [\"2\"],\r\n        pdExtPremMode: [],\r\n        pdExtPremType: [],\r\n        pdExtPremCalcCode: ''\r\n      },\r\n      pageFlag: {\r\n        tableVisible_def: true,\r\n        dialogVisible_additionType: false,\r\n        dialogVisible_queryResult: false,\r\n        additionFlag: false\r\n      },\r\n      displayName_additionType: '',\r\n      isFixed: false,\r\n      fixedClassName: '',\r\n      filters: {\r\n        pdAddPremMode: [],\r\n        pdPremCalMode: [],\r\n        pdPayAccKind: []\r\n      },\r\n      rules: {\r\n        pdPayEndPeriod: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_date'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdPayName: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_name'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdPremCalMode: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_calc_method'),\r\n          trigger: 'change'\r\n        }],\r\n        pdExtPremName: [{required: true, message: \"\", trigger: 'blur'}],\r\n        pdPremId: [{required: true, message: \"\", trigger: 'blur'}],\r\n        pdExtPremObj: [{required: true, message: \"\", trigger: 'blur'}],\r\n        pdExtPremMode: [{required: true, message: \"\", trigger: 'blur'}],\r\n        pdExtPremType: [{required: true, message: \"\", trigger: 'blur'}],\r\n      },\r\n      rules_count: {\r\n        pdPremId: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_name'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdCmpnRange: [{\r\n          type: 'array',\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_discount_range'),\r\n          trigger: 'change'\r\n        }],\r\n        pdCmpnType: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_discount_type'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdCmpnOrder: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_discount_order'),\r\n          trigger: 'blur'\r\n        }],\r\n        pdCmpnCalcMode: [{\r\n          required: true,\r\n          message: this.$t('pdaddition.message.please_enter') + this.$t('pdaddition.pay_calc_method'),\r\n          trigger: 'change'\r\n        }]\r\n      },\r\n      rules_quick: {\r\n        finelinesRegion: [{\r\n          required: true,\r\n          message: this.$t('form.please_select') + this.$t('pdaddition.finelinesRegion'),\r\n          trigger: 'change'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    premAmountFormula,\r\n    premAmountFormulaSelect,\r\n    premRules,\r\n    premRulesSelect,\r\n    pdDiscountFormula,\r\n    pdDiscountFormulaSelect,\r\n    guide\r\n  },\r\n  async created() {\r\n    // \r\n    let pdtempPdInfo = this.getPdData()\r\n    if (Object.keys(pdtempPdInfo).length > 0) {\r\n      this.product = pdtempPdInfo\r\n      this.params_currentProduct.eq_pdInfoId = this.product.id\r\n      this.form_def.pdInfoId = this.product.id\r\n      this.form_def.pdVerId = this.product.pdVerId\r\n      this.form_def.pdCode = this.product.pdCode\r\n      this.form_def.pdName = this.product.pdName\r\n      this.params.finelinesRegion = pdtempPdInfo.cType\r\n    } else {\r\n      this.notifyError('')\r\n      return\r\n    }\r\n    await this.init()\r\n    this.productCalcRevisionShowINfo = this.$route.query.productCalcRevisionShowINfo === 'true'\r\n    if (!this.productCalcRevisionShowINfo) {\r\n      this.form_def.pdPremAddFlag = 'Y'\r\n      this.form_def.pdPayStartCalMode = '0'\r\n      this.form_def.pdPayStartCalRule = 'S'\r\n      this.form_def.pdPayEndCalMode = '0'\r\n      this.form_def.pdPayEndCalRule = 'S'\r\n      this.form_def.pdPayDateValue = '1'\r\n      await this.getAllPremium()\r\n    } else {\r\n      this.form_def.pdPremAddFlag = 'Y'\r\n      await this.getAllPremium()\r\n    }\r\n    this.$nextTick(() => {\r\n      this.$refs.page_addition.buildData()\r\n    })\r\n  },\r\n  mounted() {\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener('scroll', this.handleScroll)\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'ldcodes',\r\n      'sidebar'\r\n    ])\r\n  },\r\n  watch: {\r\n    'form_addition_add.pdExtPremType'() {\r\n      this.displayName_additionType = ''\r\n      const additionTypeList_selected = this._.filter(this.ldcodes['pd_prem_addition_type'], function (additionType) {\r\n        return _this.isInArray(additionType.code, _this.form_addition_add.pdExtPremType)\r\n      })\r\n      if (additionTypeList_selected && additionTypeList_selected.length > 0) {\r\n        additionTypeList_selected.forEach((additionType, index) => {\r\n          if (index === 0) {\r\n            this.displayName_additionType += additionType.codename\r\n          } else {\r\n            this.displayName_additionType += ', ' + additionType.codename\r\n          }\r\n        })\r\n      } else {\r\n        this.displayName_additionType = ''\r\n      }\r\n    },\r\n    'additionTableData'() {\r\n      if (this.additionTableData.length > 0) {\r\n        this.filterpdExtPremNameList1 = []\r\n        this.filterpdExtPremNameList2 = []\r\n        this.additionTableData.forEach(val => {\r\n          this.filterpdExtPremNameList1.push({\r\n            text: val.pdExtPremName,\r\n            value: val.pdExtPremName\r\n          })\r\n          this.filterpdExtPremNameList2.push({\r\n            text: this.getCodeName('pd_prem_addition_type', val.pdExtPremType),\r\n            value: val.pdExtPremType\r\n          })\r\n        })\r\n      }\r\n      this.filterpdExtPremNameList1 = this.filterpdExtPremNameList1.reduce(function (prev, element) {\r\n        if (!prev.find(el => el.text === element.text)) {\r\n          prev.push(element)\r\n        }\r\n        return prev\r\n      }, [])\r\n      this.filterpdExtPremNameList2 = this.filterpdExtPremNameList2.reduce(function (prev, element) {\r\n        if (!prev.find(el => el.text === element.text)) {\r\n          prev.push(element)\r\n        }\r\n        return prev\r\n      }, [])\r\n      this.selectedAddition = {}\r\n      this.resetFormAddition()\r\n      if (this.additionTableData.length === 1) {\r\n        this.selectedAddition = this.additionTableData[0]\r\n        this.selectedAdditionChanged()\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    bringInCalcCode(pdBussDetailType, pdBussId, calcCode) {\r\n      switch (pdBussDetailType) {\r\n        case '19':\r\n          for (const extPrem of this.additionTableData) {\r\n            if (extPrem.id === Number(pdBussId)) {\r\n              this.$set(extPrem, 'pdExtPremCalcCode', calcCode)\r\n              break\r\n            }\r\n          }\r\n          if (this.form_addition.id === Number(pdBussId)) {\r\n            this.form_addition.pdExtPremCalcCode = calcCode\r\n          }\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    //\r\n    goClicks(num1, num2) {\r\n      this.guaranteeDetails = num1//\r\n      this.calculationFormulaType = num2//\r\n      if (num2 === '19') {//\r\n        this.pdUwSiTypeOptions = this.selectedAddition.pdPremId + \":\" + this.selectedAddition.pdPremCode\r\n        this.pdUwSiTypeDtOptions = this.selectedAddition.id + \":\" + this.selectedAddition.pdExtPremCode\r\n      } else {//\r\n        this.pdUwSiTypeOptions = this.selectedDef.id ? this.selectedDef.id + \":\" + this.selectedDef.pdPremCode : this.form_defAdd.id + \":\" + this.form_defAdd.pdPremCode\r\n        this.pdUwSiTypeDtOptions = ''\r\n      }\r\n      this.dialogShow.premAmountFormula = true\r\n    },\r\n    changeDialogVisible_formula(flag) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = this.pdtempPdBnft\r\n      }\r\n      this.dialogShow.premAmountFormula = flag\r\n    },\r\n    changeDialogVisible_formulaSelect(flag, guaranteeDetails, calculationFormulaType, prem, extPrem) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = prem\r\n        this.pdUwSiTypeDtOptions = extPrem\r\n        this.guaranteeDetails = guaranteeDetails\r\n        this.calculationFormulaType = calculationFormulaType\r\n      } else {\r\n        this.dialogShow.premAmountFormula = false\r\n        this.$nextTick(() => {\r\n          this.dialogShow.premAmountFormula = true\r\n        })\r\n      }\r\n      this.dialogShow.premAmountFormulaSelect = flag\r\n    },\r\n    filterHandler(value, row, column) {\r\n      if (column) {\r\n        const property = column[\"property\"]\r\n        return row[property] === value\r\n      }\r\n    },\r\n    filterHandlerDiscount(value, row, column) {\r\n      if (column) {\r\n        const property = column[\"property\"]\r\n        return row[property] === value\r\n      }\r\n    },\r\n    //\r\n    goRules(num1, num2) {\r\n      this.guaranteeDetails = num1//\r\n      this.calculationFormulaType = num2//\r\n      this.dialogRulesShow.premRules = true\r\n      this.pdUwSiTypeOptions = this.form_def.id + \":\" + this.form_def.pdPremCode\r\n    },\r\n    filter_pdCmpnRanges(code) {\r\n      for (const def of _this.defTableData) {\r\n        if (def.pdPremCode === code) {\r\n          return def.pdPremCode + \":\" + def.pdPayName\r\n        }\r\n      }\r\n      for (const def of _this.additionTableData) {\r\n        if (def.pdExtPremCode === code) {\r\n          return def.pdExtPremCode + \":\" + def.pdExtPremName\r\n        }\r\n      }\r\n      return code\r\n    },\r\n    changeDialogVisible_rules(flag) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = this.pdtempPdBnft\r\n      }\r\n      this.dialogRulesShow.premRules = flag\r\n    },\r\n    changeDialogVisible_rulesSelect(flag, guaranteeDetails, calculationFormulaType, prem, extPrem) {\r\n      if (flag === true) {\r\n        this.pdUwSiTypeOptions = prem\r\n        this.pdUwSiTypeDtOptions = extPrem\r\n        this.guaranteeDetails = guaranteeDetails\r\n        this.calculationFormulaType = calculationFormulaType\r\n      }\r\n      this.dialogRulesShow.premRulesSelect = flag\r\n    },\r\n    // \r\n    init() {\r\n      this.init_filters()\r\n      this.init_pay_frequency()\r\n      this.init_pay_date()\r\n      this.init_typeRegion()\r\n    },\r\n    async getAllPremium() {\r\n      const params = {\r\n        pdInfoId: this.product.id\r\n      }\r\n      await getAllPremium(this.buildRequestData(params)).then(response => {\r\n        this.params_addition.premiumList = response.data\r\n        this.defTableData = response.data\r\n      })\r\n    },\r\n    // \r\n    init_pay_frequency() {\r\n      const paramsMap = {\r\n        pd_info_id: this.params_currentProduct.eq_pdInfoId,\r\n        pd_atrs_code: 'payintv'\r\n      }\r\n      getPdAttrInfo(this.buildRequestData(paramsMap)).then(response => {\r\n        const pdTempAtrsList = response.data\r\n        this.product_extra.pdPayFreq = this._.map(pdTempAtrsList, 'pdAtrsVal')\r\n        this.pdPayFreqCopy = this._.map(pdTempAtrsList, 'pdAtrsVal')\r\n      })\r\n    },\r\n    //\r\n    init_typeRegion() {\r\n      const paramsMap = {\r\n        pd_info_id: this.params_currentProduct.eq_pdInfoId,\r\n        pd_cls_type: '2'\r\n      }\r\n      getPdClsLabInfo(this.buildRequestData(paramsMap)).then(response => {\r\n        const pdTempClsLabList = response.data\r\n        const pdCls6Array = this._.map(pdTempClsLabList, 'pdCls6')\r\n        if (pdCls6Array.length > 0) {\r\n          this.form_def.pdUrgePayFlag = pdCls6Array[0]\r\n        }\r\n      })\r\n    },\r\n    //\r\n    init_pay_date() {\r\n      const payMap = {\r\n        pd_info_id: this.params_currentProduct.eq_pdInfoId\r\n      }\r\n      getPayDate(this.buildRequestData(payMap)).then(response => {\r\n        this.form_def.pdPayEndPeriod = response.data.pdPayPeriod\r\n      })\r\n    },\r\n    // \r\n    init_filters() {\r\n      let ldcode_pdPremCalMode = this.ldcodes['pd_prem_cal_method']\r\n      let ldcode_pdAddPremMode = this.ldcodes['pd_prem_addition_mode']\r\n      let ldcode_pdPayAccKind = this.ldcodes['pd_prem_account_type']\r\n      if (ldcode_pdPremCalMode instanceof Array) {\r\n        for (const item of ldcode_pdPremCalMode) {\r\n          this.filters.pdPremCalMode.push({text: item.codename, value: item.code})\r\n        }\r\n      }\r\n      if (ldcode_pdAddPremMode instanceof Array) {\r\n        for (const item of ldcode_pdAddPremMode) {\r\n          this.filters.pdAddPremMode.push({text: item.codename, value: item.code})\r\n        }\r\n      }\r\n      if (ldcode_pdPayAccKind instanceof Array) {\r\n        for (const item of ldcode_pdPayAccKind) {\r\n          this.filters.pdPayAccKind.push({text: item.codename, value: item.code})\r\n        }\r\n      }\r\n    },\r\n    filter_pdPremCalMode(value, row) {\r\n      return row.pdPremCalMode === value\r\n    },\r\n    filter_pdAddPremMode(value, row) {\r\n      return row.pdAddPremMode === value\r\n    },\r\n    filter_pdPayAccKind(value, row) {\r\n      return row.pdPayAccKind === value\r\n    },\r\n    rowClick_addition(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedAddition.id) {\r\n          this.cancelUpdateAddition()\r\n        }\r\n      }\r\n    },\r\n    selectedAdditionChanged() {\r\n      this.resetFormAddition()\r\n      Object.assign(this.form_addition, this.selectedAddition)\r\n    },\r\n    selectAllAdditionType() {\r\n      for (const additionType of this.ldcodes['pd_prem_addition_type']) {\r\n        this.form_addition_add.pdExtPremType.push(additionType.code)\r\n      }\r\n    },\r\n    handleAddAddition() {\r\n      this.$refs.form_addition_add.validate(pass => {\r\n        if (pass) {\r\n          if (this.form_addition_add.pdPremId.length === 0 || this.form_addition_add.pdExtPremObj.length === 0 || this.form_addition_add.pdExtPremMode.length === 0 || this.form_addition_add.pdExtPremType.length === 0) {\r\n            this.notifyError(this.$t('pdaddition.message.error_incomplete_information'))\r\n            return\r\n          }\r\n          if (this.defTableData && this.defTableData.length > 0) {\r\n            // \r\n            let paymentIds = this.form_addition_add.pdPremId\r\n            let paymentIds_available = this._.map(this.defTableData, 'id')\r\n            for (const paymentId of paymentIds) {\r\n              if (!this.isInArray(paymentId, paymentIds_available)) {\r\n                this.notifyError(this.$t('pdaddition.message.error_unavailable_def'))\r\n                return\r\n              }\r\n            }\r\n            // \r\n            let array = this.buildArray(paymentIds, this.form_addition_add.pdExtPremObj, this.form_addition_add.pdExtPremMode, this.form_addition_add.pdExtPremType)\r\n            for (const arrayItem of array) {\r\n              this.form_addition = Object.assign({}, this.form_addition_add)\r\n              arrayItem.forEach((value, index) => {\r\n                if (index === 0) {\r\n                  this.form_addition.pdPremId = value\r\n                } else if (index === 1) {\r\n                  this.form_addition.pdExtPremObj = value\r\n                } else if (index === 2) {\r\n                  this.form_addition.pdExtPremMode = value\r\n                } else if (index === 3) {\r\n                  this.form_addition.pdExtPremType = value\r\n                }\r\n              })\r\n              //  payName  payCode \r\n              for (const def of this.defTableData) {\r\n                if (def.id === this.form_addition.pdPremId) {\r\n                  this.form_addition.pdPremName = def.pdPayName\r\n                  this.form_addition.pdPremCode = def.pdPremCode\r\n                  break\r\n                }\r\n              }\r\n              //  pdInfoId \r\n              this.form_addition.pdInfoId = this.product.id\r\n              //  pdCode \r\n              this.form_addition.pdCode = this.product.pdCode\r\n              //  pdVerId \r\n              this.form_addition.pdVerId = this.product.pdVerId\r\n              //  pdPremCalcCode \r\n              this.form_addition.pdExtPremCalcCode = this.form_addition_add.pdExtPremCalcCode\r\n              //\r\n              let pdAddPremObj = this.getCodeName('pdAddPremObj', this.form_addition.pdExtPremObj, true)\r\n              let pd_prem_addition_addition_mode = this.getCodeName('pd_prem_addition_addition_mode', this.form_addition.pdExtPremMode, true)\r\n              let pd_prem_addition_type = this.getCodeName('pd_prem_addition_type', this.form_addition.pdExtPremType, true)\r\n              this.$set(this.form_addition, 'pdExtPremName', pdAddPremObj + pd_prem_addition_addition_mode + pd_prem_addition_type)\r\n              this.additionAddTableData.push(this.form_addition)\r\n            }\r\n            this.getOrderNumber('addition_add')\r\n            this.resetFormAddition()\r\n            this.resetFormAdditionAdd()\r\n            this.notifySuccess(this.$t('successMessage.add'))\r\n          } else {\r\n            this.notifyError(this.$t('pdaddition.message.error_def_no_define'))\r\n          }\r\n        }\r\n      })\r\n\r\n    },\r\n    buildArray(paymentIds, additionPayPersonTypes, additionModes, additionTypes) {\r\n      let array = []\r\n      let array_item = []\r\n      let array_paymentId = ''\r\n      let array_additionPayPersonType = ''\r\n      let array_additionMode = ''\r\n      let array_additionType = ''\r\n      for (const paymentId of paymentIds) {\r\n        array_paymentId = paymentId\r\n        for (const additionPayPersonType of additionPayPersonTypes) {\r\n          array_additionPayPersonType = additionPayPersonType\r\n          for (const additionMode of additionModes) {\r\n            array_additionMode = additionMode\r\n            for (const additionType of additionTypes) {\r\n              array_additionType = additionType\r\n              array_item.push(array_paymentId, array_additionPayPersonType, array_additionMode, array_additionType)\r\n              array.push(array_item)\r\n              array_item = []\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return array\r\n    },\r\n    handleUpdateAddition() {\r\n      this.$refs.form_addition.validate(pass => {\r\n        if (pass) {\r\n          updatePdtempPdExtPrem(this.form_addition).then(() => {\r\n            this.$refs.page_addition.buildData().then(() => {\r\n              this.resetFormAddition()\r\n              this.selectedAddition = {}\r\n              this.notifySuccess(this.$t('successMessage.update'))\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    cancelUpdateAddition() {\r\n      this.resetFormAddition()\r\n      this.selectedAddition = {}\r\n    },\r\n    handleDeleteAddition(row) {\r\n      deletePdtempPdExtPrem(row.id).then(() => {\r\n        let operationFlag\r\n        if (this._.includes(this.additionTableData, this.selectedAddition)) {\r\n          if (this.additionTableData.length === 1 && this.$refs.page_addition.page > 1) {\r\n            this.$refs.page_addition.page -= 1\r\n          }\r\n          operationFlag = 'buildData'\r\n        } else {\r\n          operationFlag = 'reload'\r\n        }\r\n        switch (operationFlag) {\r\n          case 'buildData':\r\n            this.$refs.page_addition.buildData().then(() => {\r\n              this.resetFormAddition()\r\n              this.selectedAddition = {}\r\n              this.notifySuccess(this.$t('successMessage.delete'))\r\n            })\r\n            break\r\n          case 'reload':\r\n            this.$refs.page_addition.reload().then(() => {\r\n              this.resetFormAddition()\r\n              this.selectedAddition = {}\r\n              this.notifySuccess(this.$t('successMessage.delete'))\r\n            })\r\n            break\r\n        }\r\n      })\r\n    },\r\n    // \r\n    handleSelectionChange(val) {\r\n      this.selectedAdditionAdds = val\r\n    },\r\n    handleDeleteAdditionAdd(form_addition) {\r\n      this.additionAddTableData.splice(this.additionAddTableData.indexOf(form_addition), 1)\r\n      this.selectedAdditionAdds.splice(this.additionAddTableData.indexOf(form_addition), 1)\r\n      this.getOrderNumber('addition_add')\r\n      this.notifySuccess(this.$t('successMessage.delete'))\r\n    },\r\n    handleSaveAdditionAdd() {\r\n      let num = 0\r\n      for (num = 0; num < this.selectedAdditionAdds.length; num++) {\r\n        if (!this.selectedAdditionAdds[num].pdExtPremName) {\r\n          this.notifyError(\"\")\r\n          return\r\n        }\r\n        if (this.selectedAdditionAdds[num].pdExtPremMode === '01' && !this.selectedAdditionAdds[num].pdMaxVal) {\r\n          this.notifyError(\"\")\r\n          return\r\n        }\r\n      }\r\n      const params = {\r\n        extPremList: this.selectedAdditionAdds\r\n      }\r\n      addPdtempPdExtPrem(this.buildRequestData(params)).then(() => {\r\n        this.$refs.page_addition.buildData().then(() => {\r\n          for (const selectedAdditionAdd of this.selectedAdditionAdds) {\r\n            this.additionAddTableData.splice(this.additionAddTableData.indexOf(selectedAdditionAdd), 1)\r\n          }\r\n          this.selectedAdditionAdds = []\r\n          this.getOrderNumber('addition_add')\r\n          this.notifySuccess(this.$t('successMessage.save'))\r\n        })\r\n      })\r\n    },\r\n    // \r\n    getOrderNumber(arrayName) {\r\n      let tableData\r\n      let orderIndexArr\r\n      if (arrayName === 'addition') {\r\n        tableData = this.additionTableData\r\n      } else if (arrayName === 'addition_add') {\r\n        tableData = this.additionAddTableData\r\n      } else if (arrayName === 'addition_discount') {\r\n        tableData = this.discountTableData\r\n      } else {\r\n        return\r\n      }\r\n      orderIndexArr = []\r\n      //  paymentId  paymentId \r\n      tableData = this._.orderBy(tableData, 'pdPremId', 'asc')\r\n      if (arrayName === 'addition') {\r\n        this.additionTableData = tableData\r\n      } else if (arrayName === 'addition_add') {\r\n        this.additionAddTableData = tableData\r\n      } else if (arrayName === 'addition_discount') {\r\n        this.discountTableData = tableData\r\n      }\r\n      let orderObj = {}\r\n      tableData.forEach((element, index) => {\r\n        element.rowIndex = index\r\n        if (orderObj[element.pdPremId]) {\r\n          orderObj[element.pdPremId].push(index)\r\n        } else {\r\n          orderObj[element.pdPremId] = []\r\n          orderObj[element.pdPremId].push(index)\r\n        }\r\n      })\r\n      // index this.orderIndexArr\r\n      for (let k in orderObj) {\r\n        orderIndexArr.push(orderObj[k])\r\n      }\r\n      if (arrayName === 'addition') {\r\n        this.orderIndexArr_addition = orderIndexArr\r\n      } else if (arrayName === 'addition_add') {\r\n        this.orderIndexArr_addition_add = orderIndexArr\r\n      } else if (arrayName === 'addition_discount') {\r\n        this.orderIndexArr_addition_discount = orderIndexArr\r\n      }\r\n    },\r\n    // \r\n    objectSpanMethod_addition({row, column, rowIndex, columnIndex}) {\r\n      if (columnIndex === 2 || columnIndex === 3) {\r\n        for (let i = 0; i < this.orderIndexArr_addition.length; i++) {\r\n          let element = this.orderIndexArr_addition[i]\r\n          for (let j = 0; j < element.length; j++) {\r\n            let item = element[j]\r\n            if (rowIndex === item) {\r\n              if (j === 0) {\r\n                return {\r\n                  rowspan: element.length,\r\n                  colspan: 1\r\n                }\r\n              } else {\r\n                return {\r\n                  rowspan: 0,\r\n                  colspan: 0\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    objectSpanMethod_addition_add({row, column, rowIndex, columnIndex}) {\r\n      if (columnIndex === 2 || columnIndex === 3) {\r\n        for (let i = 0; i < this.orderIndexArr_addition_add.length; i++) {\r\n          let element = this.orderIndexArr_addition_add[i]\r\n          for (let j = 0; j < element.length; j++) {\r\n            let item = element[j]\r\n            if (rowIndex === item) {\r\n              if (j === 0) {\r\n                return {\r\n                  rowspan: element.length,\r\n                  colspan: 1\r\n                }\r\n              } else {\r\n                return {\r\n                  rowspan: 0,\r\n                  colspan: 0\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //\r\n    objectSpanMethod_discount({row, column, rowIndex, columnIndex}) {\r\n      if (columnIndex === 2 || columnIndex === 3) {\r\n        for (let i = 0; i < this.orderIndexArr_addition_discount.length; i++) {\r\n          let element = this.orderIndexArr_addition_discount[i]\r\n          for (let j = 0; j < element.length; j++) {\r\n            let item = element[j]\r\n            if (rowIndex === item) {\r\n              if (j === 0) {\r\n                return {\r\n                  rowspan: element.length,\r\n                  colspan: 1\r\n                }\r\n              } else {\r\n                return {\r\n                  rowspan: 0,\r\n                  colspan: 0\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // \r\n    clearFormDef() {\r\n      const id = this.form_def.id\r\n      const frequency = this.form_def.frequency\r\n      if (id) {\r\n        this.form_def.frequency = frequency\r\n        this.form_def = this.selectedDef\r\n        const arr = this.form_def.pdPayFrequency\r\n        if (arr) {\r\n          this.product_extra.pdPayFreq = eval('(' + arr + ')')\r\n        } else {\r\n          this.product_extra.pdPayFreq = []\r\n        }\r\n      } else {\r\n        this.init_pay_frequency()\r\n        this.resetFormDef()\r\n        this.form_def.id = id\r\n        this.form_def.frequency = frequency\r\n        this.selectedDef = {}\r\n        this.form_def.pdPremAddFlag = 'Y'\r\n        this.form_def.pdPayStartCalMode = '0'\r\n        this.form_def.pdPayStartCalRule = 'S'\r\n        this.form_def.pdPayEndCalMode = '0'\r\n        this.form_def.pdPayEndCalRule = 'S'\r\n        this.form_def.pdPayDateValue = '1'\r\n        this.init_pay_date()\r\n      }\r\n    },\r\n    // \r\n    clearFormAddition() {\r\n      this.selectedAdditionChanged()\r\n    },\r\n    //\r\n    resetDiscountForm() {\r\n      this.form_count = {\r\n        pdVerId: '',\r\n        operator: '',\r\n        pdType: '',\r\n        pdDefType: '',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdName: '',\r\n        pdPremId: '',\r\n        pdPremCode: '',\r\n        pdCmpnRange: [],\r\n        pdCmpnType: '',\r\n        cmpnInfoId: '',\r\n        pdCmpnCode: '',\r\n        pdCmpnOrder: this.configRangeLength,\r\n        pdCmpnCalcMode: '',\r\n        pdCmpnVal: '',\r\n        pdCmpnCalcCode: '',\r\n        pdCmpnDesc: ''\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.form_count.clearValidate()\r\n      })\r\n    },\r\n    //  new \r\n    resetFormDef() {\r\n      this.form_def = {\r\n        id: undefined,\r\n        pdInfoId: undefined,\r\n        pdVerId: undefined,\r\n        pdCode: '',\r\n        pdName: '',\r\n        operator: '',\r\n        pdPayName: '',\r\n        pdPremCode: '',\r\n        pdPremCalMode: 'G',\r\n        pdPremZeroFlag: 'Y',\r\n        pdPremReclFlag: 'N',\r\n        pdUrgePayFlag: 'Y',\r\n        pdPayStartPeriod: undefined,\r\n        pdPayStartPerUnit: 'Y',\r\n        pdPayStartCalRule: 'S',\r\n        pdPayStartCalMode: '0',\r\n        pdPayEndPeriod: undefined,\r\n        pdPayEndUnit: 'Y',\r\n        pdPayEndCalRule: 'S',\r\n        pdPayEndCalMode: '0',\r\n        pdAddPremMode: '',\r\n        pdPayAccKind: '',\r\n        pdCharPremRel: 'N',\r\n        pdRateChangeFlag: 'N',\r\n        pdPremAddFlag: 'N',\r\n        pdPremStartFlag: 'N',\r\n        pdPremAccRela: 'N',\r\n        pdPremCalcCode: '',\r\n        pdPayDateValue: '1'\r\n      }\r\n      this.form_def.pdInfoId = this.product.id\r\n      this.form_def.pdVerId = this.product.pdVerId\r\n      this.form_def.pdCode = this.product.pdCode\r\n      this.form_def.pdName = this.product.pdName\r\n      this.payDateForm = {\r\n        payDateTable: [],\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.form_def.clearValidate()\r\n      })\r\n    },\r\n    //  new \r\n    resetFormAddition() {\r\n      this.form_addition = {\r\n        id: undefined,\r\n        pdPremId: undefined,\r\n        pdVerId: undefined,\r\n        operator: '',\r\n        pdExtPremCode: '',\r\n        pdExtPremName: '',\r\n        pdPremName: '',\r\n        pdPremCode: '',\r\n        pdExtPremObj: '',\r\n        pdExtPremMode: '',\r\n        pdExtPremType: '',\r\n        pdMaxVal: undefined,\r\n        pdExtPremCalcCode: '',\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      }\r\n      if (this.$refs.form_addition) {\r\n        this.$refs.form_addition.clearValidate()\r\n      }\r\n    },\r\n    //  new \r\n    resetFormAdditionAdd() {\r\n      this.form_addition_add = {\r\n        id: undefined,\r\n        pdPremId: [],\r\n        pdExtPremObj: [],\r\n        pdExtPremMode: [],\r\n        pdExtPremType: [],\r\n        pdExtPremCalcCode: ''\r\n      }\r\n      if (this.$refs.form_addition_add) {\r\n        this.$refs.form_addition_add.clearValidate()\r\n      }\r\n    },\r\n    showAddFee() {\r\n      this.addFeeFlag = !this.addFeeFlag\r\n    },\r\n    addPayRow() {\r\n      this.payDateForm.payDateTable.push({\r\n        pdPayEndPeriod: '',\r\n        pdPayEndUnit: 'Y',\r\n        pdPayStartPeriod: '',\r\n        pdPayStartPerUnit: 'Y'\r\n      })\r\n    },\r\n    delPayRow(index, row) {\r\n      this.payDateForm.payDateTable.splice(index, 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}