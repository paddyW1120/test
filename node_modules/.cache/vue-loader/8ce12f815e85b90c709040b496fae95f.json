{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-framework-def\\pp-apply\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-framework-def\\pp-apply\\index.vue","mtime":1609847106994},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YXBwbHlQcEluZm99IGZyb20gIkAvYXBpL2Jhc2ljaW5mby9wZHBwSW5mbyI7CmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAidnVleCI7CmltcG9ydCB7Y2xvc2VWaXNpdFRhZ30gZnJvbSAiQC91dGlscy90YWdzVmlldyI7CgpsZXQgX3RoaXM7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncGRwcEluZm8nLAogIHByb3BzOiB7fSwKICBmaWx0ZXJzOiB7CiAgICBmaWx0ZXJfcGFja2FnZVR5cGUoY29kZSkgewogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BhY2thZ2VUeXBlJywgY29kZSkKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIHsKICAgICAgdGFibGVUaXRsZTon5Lqn5ZOB5aWX6aSQJywKICAgICAgcGFyYW1zOnsKICAgICAgICBwcENvZGU6JycsCiAgICAgICAgcHBOYW1lOicnLAogICAgICAgIHBwRGF0ZTonJywKICAgICAgICBvcGVyYXRvcjogJycKICAgICAgfSwKICAgICAgY29uZmlnczpbXSwKICAgICAgcmFkaW86IGZhbHNlLAogICAgICAvL+ajgOmqjOinhOWImQogICAgICBydWxlczoge30sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICd1c2VyY29kZScKICAgIF0pCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5wYXJhbXMub3BlcmF0b3IgPSB0aGlzLnVzZXJjb2RlCiAgfSwKCiAgbWV0aG9kczogewoKICAgIGNob29zZU9uZShyb3cpewogICAgICB0aGlzLnJhZGlvID0gcm93LmlkCiAgICAgIGNsb3NlVmlzaXRUYWcoKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ+S6p+WTgeWll+mkkOahhuaetuWumuS5ieS4u+mhtScsIHBhcmFtczogcm93fSkvL+i3s+mhteS9v+eUqAogICAgfSwKICAgIGhhbmRsZVNlYXJjaCgpewogICAgICB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCkKICAgIH0sCiAgICBoYW5kbGVBcHBseSgpewogICAgICB0aGlzLiRyZWZzLnBkRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoISh0aGlzLnBhcmFtcy5wcENvZGUgPSB0aGlzLnBhcmFtcy5wcENvZGUudHJpbSgpKSkgewogICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ3BkcHBJbmZvLm1lc3NhZ2Uubm9fcGRDb2RlJykpCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgaWYgKCEodGhpcy5wYXJhbXMucHBEYXRlID09PSB0aGlzLmdldEN1cnJlbnREYXRlU3RyKCkpKSB7CiAgICAgICAgICAgIHRoaXMucGFyYW1zLnBwRGF0ZSA9IHRoaXMuZ2V0Q3VycmVudERhdGVTdHIoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMucGFyYW1zLnBwRGF0ZSA9IHRoaXMuZ2V0Q3VycmVudERhdGVTdHIoKQogICAgICAgIGFwcGx5UHBJbmZvKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YSh0aGlzLnBhcmFtcykpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3Qgc3VjY2Vzc0ZsYWcgPSByZXNwb25zZS5kYXRhLnN1Y2Nlc3NGbGFnCiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICBjb25zdCBwZFBwSW5mbyA9IHJlc3BvbnNlLmRhdGEucGRQcEluZm8KICAgICAgICAgIGlmIChzdWNjZXNzRmxhZyA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3MobWVzc2FnZSkKICAgICAgICAgICAgY2xvc2VWaXNpdFRhZygpCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdwcm9kdWN0L3N0b3JhZ2VQYWNrYWdlcycpCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAn5Lqn5ZOB5aWX6aSQ5qGG5p625a6a5LmJ5Li76aG1JywgcGFyYW1zOiBwZFBwSW5mb30pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKG1lc3NhZ2UpCiAgICAgICAgICB9CiAgICAgICAgICAvLyB0aGlzLiRyZWZzLnBhZ2UucmVsb2FkKCkKICAgICAgICB9KQoKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-framework-def/pp-apply","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <el-form label-width=\"auto\" :model=\"params\" :rules=\"rules\" ref=\"pdForm\" style=\"margin: 20px 0 0 0\">\r\n      <el-row  :gutter=\"10\">\r\n        <el-col :span=\"6\">\r\n          <el-form-item :label=\"$t('pdppInfo.ppCode')\" prop=\"pdCode\">\r\n            <el-input clearable  v-model=\"params.ppCode\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item :label=\"$t('pdppInfo.ppName')\">\r\n            <el-input clearable v-model=\"params.ppName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-form-item :label=\"$t('pdppInfo.ppDate')\">\r\n            <el-date-picker  type=\"date\" v-model=\"params.ppDate\"\r\n                            value-format=\"yyyy-MM-dd\"></el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <cus-btn-wrapper>\r\n          <el-button  size=\"small\" @click=\"handleSearch\" type=\"primary\">\r\n            <i class=\"el-icon-search el-icon--left\"></i>\r\n            {{ $t('pdppInfo.query') }}\r\n          </el-button>\r\n          <el-button  size=\"small\" @click=\"handleApply\" type=\"primary\" v-auth=\"'pd-pp-info:apply'\" >\r\n            <svg-icon icon-class=\"apply\"/>\r\n            {{ $t('pdppInfo.apply') }}\r\n          </el-button>\r\n        </cus-btn-wrapper>\r\n\r\n      </el-row>\r\n    </el-form>\r\n    <cus-table-title :label=\"tableTitle\" />\r\n    <el-table :data=\"configs\" border class=\"wraper-table\" element-loading-text=\"Loading\" fit highlight-current-row\r\n              ref=\"configs\" size=\"mini\">\r\n      <el-table-column :label=\"$t('table.select')\" width=\"50\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio :label=\"scope.row.id\" @change=\"chooseOne(scope.row)\" v-model=\"radio\">{{''}}</el-radio>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n        <template v-slot=\"scope\">\r\n          {{ initTableIndex('page', scope.$index) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppCode')\" align=\"center\" prop=\"ppCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppName')\" align=\"center\" prop=\"ppName\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppDate')\" align=\"center\" prop=\"applyTime\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.updateTime')\" align=\"center\" prop=\"changeDate\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppFrom')\" align=\"center\" prop=\"ppFrom\">\r\n        <template v-slot=\"scope\">{{ scope.row.defType |filter_packageType}}</template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppStatus')\" align=\"center\" prop=\"ppStatus\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppPlanStatus')\" align=\"center\" prop=\"ppPlanStatus\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppAttrStatus')\" align=\"center\" prop=\"ppAttrStatus\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdppInfo.ppDiscountStatus')\" align=\"center\" prop=\"ppDiscountStatus\"></el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <cus-pagination :pageSize=\"10\" :params=\"params\" ref=\"page\" url=\"/pd-pp-info/base/list\" v-model=\"configs\"/>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {applyPpInfo} from \"@/api/basicinfo/pdppInfo\";\r\n  import {mapGetters} from \"vuex\";\r\n  import {closeVisitTag} from \"@/utils/tagsView\";\r\n\r\n  let _this;\r\n  export default {\r\n    name: 'pdppInfo',\r\n    props: {},\r\n    filters: {\r\n      filter_packageType(code) {\r\n        return _this.getCodeName('packageType', code)\r\n      }\r\n    },\r\n\r\n    data() {\r\n      _this = this;\r\n      return {\r\n        tableTitle:'产品套餐',\r\n        params:{\r\n          ppCode:'',\r\n          ppName:'',\r\n          ppDate:'',\r\n          operator: ''\r\n        },\r\n        configs:[],\r\n        radio: false,\r\n        //检验规则\r\n        rules: {},\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n        'usercode'\r\n      ])\r\n    },\r\n    created() {\r\n      this.params.operator = this.usercode\r\n    },\r\n\r\n    methods: {\r\n\r\n      chooseOne(row){\r\n        this.radio = row.id\r\n        closeVisitTag()\r\n        this.$router.push({name: '产品套餐框架定义主页', params: row})//跳页使用\r\n      },\r\n      handleSearch(){\r\n        this.$refs.page.reload()\r\n      },\r\n      handleApply(){\r\n        this.$refs.pdForm.validate(valid => {\r\n          if (valid) {\r\n            if (!(this.params.ppCode = this.params.ppCode.trim())) {\r\n              this.notifyError(this.$t('pdppInfo.message.no_pdCode'))\r\n              return\r\n            }\r\n            if (!(this.params.ppDate === this.getCurrentDateStr())) {\r\n              this.params.ppDate = this.getCurrentDateStr();\r\n            }\r\n          }\r\n\r\n          this.params.ppDate = this.getCurrentDateStr()\r\n          applyPpInfo(this.buildRequestData(this.params)).then(response => {\r\n            const successFlag = response.data.successFlag\r\n            const message = response.data.message\r\n            const pdPpInfo = response.data.pdPpInfo\r\n            if (successFlag === true) {\r\n              this.notifySuccess(message)\r\n              closeVisitTag()\r\n              this.$store.dispatch('product/storagePackages')\r\n              this.$router.push({name: '产品套餐框架定义主页', params: pdPpInfo})\r\n            } else {\r\n              this.notifyError(message)\r\n            }\r\n            // this.$refs.page.reload()\r\n          })\r\n\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n\r\n"]}]}