{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\combo-quota\\index.vue?vue&type=style&index=0&id=029f1f9c&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\combo-quota\\index.vue","mtime":1609847107029},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNob3dEaXYgewogIHdpZHRoOiA5MCU7CiAgaGVpZ2h0OiAxMDAlOwogIG1hcmdpbi10b3A6IC00MHB4OwogIG1hcmdpbi1sZWZ0OiAtNDBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYmFja2dyb3VuZDogI2ZmZmZmZjAwOwogIHotaW5kZXg6IDk5OTsKfQoK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4lCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-compensation-def/combo-quota","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div>\r\n      <cus-table-title :label=\"$t('i18nView.ppLimitItem')\"></cus-table-title>\r\n      <div>\r\n        <el-table :data=\"pdQuotaItemList\" border element-loading-text=\"Loading\"\r\n                  @selection-change=\"checkComboLimitTable\" highlight-current-row\r\n                  ref=\"multipleTable\" size=\"mini\" >\r\n          <el-table-column :label=\"$t('productValueAddedTax.select')\" type=\"selection\" align=\"center\"\r\n                           width=\"50px\"></el-table-column>\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n          <el-table-column  :label=\"$t('i18nView.pdBnftCtrlOrder')\" align=\"center\"\r\n                           prop=\"pdBnftCtrlOrder\"></el-table-column>\r\n          <el-table-column  :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" align=\"center\"\r\n                           prop=\"pdBnftCtrlLimLevel\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdBnftCtrlLimLevel | filter_pdBnftCtrlLimLevel }}</template>\r\n          </el-table-column>\r\n          <el-table-column  :label=\"$t('i18nView.pdBnftCtrlLimCode')\" align=\"center\"\r\n                           prop=\"pdtempClmCtrlLimRelaListVo\" width=\"200px\">\r\n            <template v-slot=\"scope\">\r\n                  <span>{{\r\n                      _.map(scope.row.pdtempClmCtrlLimRelaListVo, item => {\r\n                        return item.pdBnftCtrlConCode + ':' + item.pdBnftCtrlConName\r\n                      }).join(', ')\r\n                    }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column  :label=\"$t('i18nView.pdBnftCumType')\" align=\"center\"\r\n                           prop=\"pdBnftCumType\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdBnftCumType | filter_pdBnftCumType }}</template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('i18nView.pdBnftCumCount')\" align=\"center\"\r\n                           prop=\"pdBnftCumFrequency\"></el-table-column>\r\n          <el-table-column  :label=\"$t('i18nView.pdBnftFactorType')\" align=\"center\"\r\n                           prop=\"pdBnftFactorType\">\r\n            <template v-slot=\"scope\">{{ scope.row.pdBnftFactorType | filter_pdBnftFactorType }}</template>\r\n          </el-table-column>\r\n          <el-table-column  :label=\"$t('i18nView.pdBnftFactorLimValue')\" align=\"center\"\r\n                           prop=\"pdBnftFactorValue\">\r\n            <template v-slot=\"scope\"> {{scope.row.pdBnftFactorValue}}{{ scope.row.pdBnftFactorValueUnit | filter_Unit\r\n              }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('i18nView.limitFormula')\" align=\"center\" prop=\"pdBnftFactorValueCalCode\" width=\"150px\"></el-table-column>\r\n        </el-table>\r\n        <div v-if=\"this.checkAddedTax.length<2 && comboHePeiCalcMarkFlag\">\r\n          <!-- 限额快捷定义 -->\r\n          <cus-condition style=\"margin-top: 10px\" :label=\"$t('i18nView.pdQuotaItem_quick_def')\" @show=\"showLimitQuickPage\"></cus-condition>\r\n          <div v-if=\"showLimitQuickPageFlag\">\r\n            <el-form ref=\"page\" :model=\"params\" label-width=\"120px\" >\r\n              <cus-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item  :label=\"$t('i18nView.pdBnftCtrlLimLevel')\">\r\n                    <el-col>\r\n                      <cus-select :codetype=\"'comboLimitLevel'\" clearable v-model=\"params.pdBnftCtrlLimLevel\"></cus-select>\r\n                    </el-col>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item  :label=\"$t('i18nView.pdBnftFactorType')\">\r\n                    <el-col>\r\n                      <cus-select :codetype=\"'pdBnftFactorType1'\" clearable v-model=\"params.pdBnftFactorType\"></cus-select>\r\n                    </el-col>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.productMeat')\">\r\n                    <el-col>\r\n                      <el-select clearable v-model=\"params.ppCode\"  filterable>\r\n                        <el-option :key=\"item.id\"\r\n                                   :label=\"item.ppCode+':'+item.ppName\"\r\n                                   :value=\"item.ppCode\"\r\n                                   v-for=\"item in comboVoOptions\">\r\n                        </el-option>\r\n                      </el-select>\r\n                    </el-col>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </cus-row>\r\n              <el-row>\r\n                <el-form-item align=\"right\">\r\n                  <el-button dialog-disable=\"disable\"  size=\"small\" @click=\"handleSearch\" icon=\"el-icon-search\" type=\"primary\">\r\n                    {{ $t('acceptanceDefinition.search')}}\r\n                  </el-button>\r\n                </el-form-item>\r\n              </el-row>\r\n              <cus-table-title :label=\"$t('i18nView.limitItem')\"></cus-table-title>\r\n              <el-table :data=\"comboItemList\" @row-click=\"\" border element-loading-text=\"Loading\"  size=\"mini\">\r\n                <el-table-column :label=\"$t('table.id')\" align=\"center\"  width=\"50\">\r\n                  <template v-slot=\"scope\">\r\n                    {{ initTableIndex('page_limit', scope.$index) }}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('pdtempPdBnft.desc')\" align=\"center\" prop type=\"expand\" width=\"60\">\r\n                  <template slot-scope=\"props\">\r\n                    <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n                      <el-form-item :label=\"$t('i18nView.productPpCode')\">\r\n                        <span>{{ props.row.ppCode }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.productPpName')\">\r\n                        <span>{{ props.row.ppName }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftCtrlCode')\">\r\n                        <span>{{ props.row.pdBnftCtrlCode }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdLevel')\">\r\n                        <span>{{ props.row.pdBnftCtrlLimLevel | filter_pdBnftCtrlLimLevel}}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftCtrlOrder')\">\r\n                        <span>{{ props.row.pdBnftCtrlOrder }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftFactorType')\">\r\n                        <span>{{ props.row.pdBnftFactorType | filter_pdBnftFactorType }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftFactorLimValue')\">\r\n                        <span>{{ props.row.pdBnftFactorValue}}{{ props.row.pdBnftFactorValueUnit | filter_Unit}}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.limitFormula')\">\r\n                        <span>{{ props.row.pdBnftFactorValueCalCode }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftCumType')\">\r\n                        <span>{{ props.row.pdBnftCumType | filter_pdBnftCumType}}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftCumCount')\">\r\n                        <span>{{ props.row.pdBnftCumFrequency }}</span>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimitFlag')\">\r\n                        <span>{{ props.row.pdBnftCtrlLimitFlag }}</span>\r\n                      </el-form-item>\r\n                    </el-form>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" :label=\"$t('i18nView.productPpCode')\" prop=\"ppCode\"></el-table-column>\r\n                <el-table-column align=\"center\" :label=\"$t('i18nView.productPpName')\" prop=\"ppName\"></el-table-column>\r\n                <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftCtrlLimLevel')\" prop=\"pdBnftCtrlLimLevel\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdBnftCtrlLimLevel | filter_pdBnftCtrlLimLevel }}</template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftFactorType')\" prop=\"pdBnftFactorType\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdBnftFactorType | filter_pdBnftFactorType }}</template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" :label=\"$t('i18nView.pdBnftCumType')\" prop=\"pdBnftCumType\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdBnftCumType | filter_pdBnftCumType }}</template>\r\n                </el-table-column>\r\n                <el-table-column align=\"center\" :label=\"$t('table.actions')\" width=\"120px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button dialog-disable=\"disable\"  size=\"small\" @click=\"connDeductible(scope.row)\" icon=\"el-icon-success\"  type=\"primary\">\r\n                      {{$t('form.select')}}\r\n                    </el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <cus-pagination ref=\"page_limit\" :pageSize=\"5\" :params=\"params\"\r\n                              url=\"/combo-limit/base/comboItemList\" v-model=\"comboItemList\"/>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"this.checkAddedTax.length>1 && comboHePeiCalcMarkFlag\">\r\n        <br>\r\n        <el-row style=\"float: right\">\r\n          <cus-popover\r\n            :buttonText=\"$t('table.delete')\"\r\n            @confirm=\"deleteMoreTax\" icon=\"el-icon-delete\" style=\"margin-right: 5px;margin-left: 5px\" type=\"danger\"\r\n            :content=\"$t('confirmMessage.delete')\">\r\n          </cus-popover>\r\n        </el-row>\r\n      </div>\r\n      <div v-if=\"this.checkAddedTax.length<2 && comboHePeiCalcMarkFlag\" >\r\n        <cus-form-title :label=\"$t('i18nView.limitDef')\"></cus-form-title>\r\n        <el-form ref=\"form_comboQuota\" :model=\"form_comboQuota\" label-width=\"auto\"\r\n                 :rules=\"form_comboQuota_rules\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"7\">\r\n              <el-form-item  :label=\"$t('i18nView.pdBnftCtrlOrder')\" prop=\"pdBnftCtrlOrder\">\r\n                <el-input :placeholder=\"$t('pdClaimVerificationRules.controlSequenceAddOne')\" clearable\r\n                          v-model=\"form_comboQuota.pdBnftCtrlOrder\" type=\"number\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item  :label=\"$t('i18nView.pdBnftCtrlLimLevel')\">\r\n                  <cus-select :codetype=\"'comboLimitLevel'\" clearable v-model=\"form_comboQuota.pdBnftCtrlLimLevel\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <el-col :span=\"7\" v-if=\"form_comboQuota.pdBnftCtrlLimLevel==='2'\">\r\n              <el-form-item :label=\"$t('i18nView.ppRelate')\">\r\n                  <el-select v-model=\"form_comboQuota.comboList\" clearable multiple disabled>\r\n                    <el-option :key=\"item.id\"\r\n                               :label=\"item.ppCode+':'+item.ppName\"\r\n                               :value=\"item.ppCode\"\r\n                               v-for=\"item in comboOptions\">\r\n                    </el-option>\r\n                  </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <cus-btn-wrapper v-if=\"form_comboQuota.pdBnftCtrlLimLevel==='2'\"><el-button dialog-disable=\"disable\"  size=\"small\" @click=\"openComboDetail\" type=\"text\">{{$t('i18nView.more')}}</el-button></cus-btn-wrapper>\r\n\r\n            <el-col :span=\"7\" v-if=\"form_comboQuota.pdBnftCtrlLimLevel==='4'\">\r\n              <el-form-item :label=\"$t('i18nView.ppRelateScheme')\">\r\n                  <el-select v-model=\"form_comboQuota.comboProgList\" clearable multiple disabled>\r\n                    <el-option :key=\"item.id\"\r\n                               :label=\"item.ppPlanCode+':'+item.ppPlanName\"\r\n                               :value=\"item.ppPlanCode\"\r\n                               v-for=\"item in comboProgOptions\">\r\n                    </el-option>\r\n                  </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <cus-btn-wrapper v-if=\"form_comboQuota.pdBnftCtrlLimLevel==='4'\"><el-button dialog-disable=\"disable\"  size=\"small\" @click=\"openComboProgDetail\" type=\"text\">{{$t('i18nView.more')}}</el-button></cus-btn-wrapper>\r\n          </el-row>\r\n          <el-row :gutter=\"20\" >\r\n            <el-col :span=\"7\">\r\n              <el-form-item  :label=\"$t('i18nView.pdBnftCumType')\">\r\n                <cus-radio :codetype=\"'pdBnftCumType'\" v-model=\"form_comboQuota.pdBnftCumType\"></cus-radio>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.pdBnftCumCount')\">\r\n                <el-input :placeholder=\"$t('pdClaimVerificationRules.addFrequencyOne')\" clearable\r\n                          v-model=\"form_comboQuota.pdBnftCumFrequency\" :disabled=\"showFrequencyFlag\"\r\n                          ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.pdBnftCumFrequencyUnit')\">\r\n                  <cus-select :codetype=\"'pdBnftCumFrequencyUnit'\" clearable :disabled=\"showFrequencyFlag\"\r\n                              v-model=\"form_comboQuota.pdBnftCumFrequencyUnit\" clearable></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"20\" >\r\n            <el-col :span=\"7\">\r\n              <el-form-item  :label=\"$t('i18nView.pdBnftFactorType')\">\r\n                  <cus-select :codetype=\"'pdBnftFactorType1'\" clearable v-model=\"form_comboQuota.pdBnftFactorType\"\r\n                              clearable></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.pdBnftFactorValue')\"\r\n                            prop=\"pdBnftFactorValue1\">\r\n                <el-input :disabled=\"form_comboQuota.pdBnftFactorType!=1\" clearable v-model=\"form_comboQuota.pdBnftFactorValue1\"\r\n                        ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.limitData')\" prop=\"pdBnftFactorValue2\">\r\n                <el-input :disabled=\"form_comboQuota.pdBnftFactorType!=2\" clearable v-model=\"form_comboQuota.pdBnftFactorValue2\"\r\n                          >\r\n                  <template slot=\"suffix\">{{$t('i18nView.day')}}</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.limitNumbers')\" prop=\"pdBnftFactorValue3\">\r\n                <el-input :disabled=\"form_comboQuota.pdBnftFactorType!=3\" clearable v-model=\"form_comboQuota.pdBnftFactorValue3\"\r\n                         >\r\n                  <template slot=\"suffix\">次</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.limitCustom')\" >\r\n                <el-switch v-model=\"accFundFlag\" active-value=\"Y\"\r\n                           inactive-value=\"N\">\r\n                </el-switch>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.pdBnftCtrlLimitFlag')\">\r\n                <el-switch v-model=\"form_comboQuota.pdBnftCtrlLimitFlag\" active-value=\"Y\"\r\n                           inactive-value=\"N\">\r\n                </el-switch>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <div v-if=\"accFundFlag === 'Y'\">\r\n            <cus-form-title :label=\"$t('i18nView.limitDef')\"></cus-form-title>\r\n            <el-row  :gutter=\"20\">\r\n              <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('i18nView.limitFormula')\">\r\n                <el-input readonly v-model=\"form_comboQuota.pdBnftFactorValueCalCode\">\r\n                  <svg-icon @click=\"toFormulaDef()\" icon-class=\"calc\" slot=\"suffix\"\r\n                            style=\"color: #606266;font-size: 18px;cursor: pointer\"/>\r\n                </el-input>\r\n              </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n          <el-form-item align=\"right\">\r\n            <!--按钮-->\r\n            <el-button dialog-disable=\"disable\"  size=\"small\" @click=\"form_comboQuota_add\" icon=\"el-icon-success\" type=\"primary\"\r\n                       v-if=\"!showDeteleButton\">{{$t('table.save') }}\r\n            </el-button>\r\n            <el-button dialog-disable=\"disable\"  size=\"small\" @click=\"form_comboQuota_update\" icon=\"el-icon-success\" type=\"primary\"\r\n                       v-if=\"showDeteleButton\">{{$t('table.update') }}\r\n            </el-button>\r\n            <cus-del-btn  size=\"small\" @ok=\"form_comboQuota_delete\" buttonText = \"删除\" icon=\"el-icon-success\" type=\"danger\"\r\n                       v-if=\"showDeteleButton\">{{$t('table.delete') }}\r\n            </cus-del-btn>\r\n            <el-button dialog-disable=\"disable\"  size=\"small\" @click=\"form_comboQuota_refresh\" icon=\"el-icon-refresh\" type=\"warning\">{{\r\n              $t('tagsView.refresh')}}\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <!-- 产品套餐 -->\r\n      <el-dialog v-if=\"showComboMore\" v-dialog-drag :close-on-click-modal=\"false\"  :visible.sync=\"showComboMore\" center\r\n                 top=\"8vh\" width=\"75%\">\r\n        <combo_ppinfo  :pdBnftCtrlCode=\"pdBnftCtrlCode\" @backToFeeBill=\"backToFeeBill\"></combo_ppinfo>\r\n      </el-dialog>\r\n      <!-- 产品套餐方案 -->\r\n      <el-dialog v-if=\"showComboProgMore\" v-dialog-drag :close-on-click-modal=\"false\"  :visible.sync=\"showComboProgMore\" center\r\n                 top=\"8vh\" width=\"75%\">\r\n        <combo_proginfo  :pdBnftCtrlCode=\"pdBnftCtrlCode\" @backToFeeBill=\"backToFeeBill\"></combo_proginfo>\r\n      </el-dialog>\r\n\r\n      <!-- 弹窗（已关联公式列表） -->\r\n      <el-dialog :close-on-click-modal=\"false\" :show-close=\"true\" :visible.sync=\"formulaVisible\" append-to-body center\r\n                 v-dialog-drag v-if=\"formulaVisible\" width=\"80%\">\r\n        <comboCtrlFormula :pdBussDetailType=\"this.pdBussDetailType\" :pdtempClmCtrlMain=\"form_comboQuota\"\r\n                        @bringInCalcCode=\"bringInCalcCode\"\r\n                        @changeDialogVisible_ClmCtrlFormula=\"changeDialogVisible_ClmCtrlFormula\"\r\n                        @changeDialogVisible_ClmCtrlFormulaSelect=\"changeDialogVisible_ClmCtrlFormulaSelect\"></comboCtrlFormula>\r\n      </el-dialog>\r\n\r\n      <!-- 弹窗（公式关联） -->\r\n      <el-dialog :close-on-click-modal=\"false\" :show-close=\"true\" :visible.sync=\"formulaSelectVisible\" append-to-body\r\n                 center v-dialog-drag v-if=\"formulaSelectVisible\" width=\"70%\">\r\n        <comboCtrlFormulaSelect :pdBussDetailType=\"this.pdBussDetailType\"  :pdtempClmCtrlMain=\"form_comboQuota\"\r\n                              @bringInCalcCode=\"bringInCalcCode\"\r\n                              @changeDialogVisible_ClmCtrlFormulaSelect=\"changeDialogVisible_ClmCtrlFormulaSelect\"></comboCtrlFormulaSelect>\r\n      </el-dialog>\r\n\r\n    </div>\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    saveObBnftForm,\r\n    findperiodConfigs,\r\n    updateObBnftForm,\r\n    deleteObBnftForm,findComboList\r\n  } from \"@/api/basicinfo/comboQuota\"\r\n  import combo_ppinfo from \"@/views/product-package-definition/pp-operation-def/pp-compensation-def/combo-ppinfo/index\"\r\n  import combo_proginfo from \"@/views/product-package-definition/pp-operation-def/pp-compensation-def/combo-proginfo/index\"\r\n  import comboCtrlFormula from '@/views/product-package-definition/pp-operation-def/pp-compensation-def/comboCtrlFormula/index'\r\n  import comboCtrlFormulaSelect from '@/views/product-package-definition/pp-operation-def/pp-compensation-def/comboCtrlFormulaSelect/index'\r\n\r\n  let _this;\r\n  export default {\r\n    name: 'comboLimit',\r\n    components: {\r\n      combo_ppinfo, combo_proginfo, comboCtrlFormula, comboCtrlFormulaSelect\r\n    },\r\n    filters: {\r\n      filter_getPdRuleDtCls(code) {\r\n        if (code != null) {\r\n          return _this.getCodeName('ruleBussModuDeta', code);\r\n        }\r\n      },\r\n      filter_pdBnftCtrlLimLevel(code) {\r\n        return _this.getCodeName('comboLimitLevel', code)\r\n      },\r\n      filter_pdBnftFactorType(code) {\r\n        return _this.getCodeName('pdBnftFactorType1', code)\r\n      },\r\n      filter_pdBnftCumType(code) {\r\n        return _this.getCodeName('pdBnftCumType', code)\r\n      },\r\n      filter_pdBnftCumFrequency(code) {\r\n        return _this.getCodeName('pdBnftCumFrequency', code)\r\n      },\r\n      filter_Unit(code) {\r\n        return _this.getCodeName('pay_limit_unit', code, true)\r\n      },\r\n      filter_pdBnftFactorValueCalCode(code) {\r\n        if (code != null && code != '') {\r\n          return 'Y'\r\n        } else {\r\n          return 'N'\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      _this = this;\r\n      return {\r\n        //产品信息头\r\n        combo: {\r\n          id: '',\r\n          ppCode: '',\r\n          ppName: '',\r\n          pdVerId: '',\r\n          ppPlanCode: '',\r\n          ppPlanName: '',\r\n          pdProcessId: ''\r\n        },\r\n        params: {\r\n          pdBnftCtrlLimLevel: '',\r\n          pdBnftFactorType: '',\r\n          ppCode: ''\r\n        },\r\n        pdBnftCtrlCode: '',\r\n        pdQuotaItemList: [],\r\n        comboItemList:[],\r\n        //限额定义-form\r\n        form_comboQuota: {\r\n          id:'',\r\n          pdBnftCtrlCode:'',\r\n          pdBnftCtrlType: '',\r\n          pdBnftCtrlOrder:'1',\r\n          pdBnftFactorType:'',\r\n          pdBnftFactorValue:'',\r\n          pdBnftCtrlLimLevel:'',\r\n          pdBnftCtrlConCode: [],\r\n          pdBnftCumFrequency: '',\r\n          pdBnftFactorValue1: '',\r\n          pdBnftFactorValue2: '',\r\n          pdBnftFactorValue3: '',\r\n          pdBnftCumType: '1',\r\n          pdBnftCumFrequencyUnit: '',\r\n          pdBnftCtrlLimitFlag:'',\r\n          pdBnftFactorValueCalCode:''\r\n        },\r\n        quickicon: \"el-icon-arrow-right\",\r\n        showComboMore: false,\r\n        showComboProgMore: false,\r\n        //限额定义-form规则\r\n        pdtempPpInfo: {},\r\n        form_comboQuota_rules: {\r\n        },\r\n        //产品套餐结果集\r\n        comboOptions: [],\r\n        comboVoOptions:[],\r\n        //产品套餐方案结果集\r\n        comboProgOptions: [],\r\n        //关联保障明细下拉结果集\r\n        //产品方案下拉结果集\r\n        pdProgOptions: [],\r\n        accFundFlag:'N',\r\n        pdProgList: [],\r\n        //关联产品下拉结果集\r\n        pdList: [],\r\n        //关联保障下拉结果集\r\n        pdBnftList: [],\r\n        //关联账单下拉结果集\r\n        pdClmBnftList: [],\r\n        selectedDef: {},\r\n        pdDeductionList: [],\r\n        form_deductibleExcessDefinition: {},\r\n        form_deductibleExcessDefinition_rules: {},\r\n        pdObservationList: [],\r\n        form_observationDefinition: {},\r\n        form_observationDefinition_rules: {},\r\n        form_pdClaimDefinition: {},\r\n        form_pdClaimDefinition_rules: {},\r\n        tableData: [],\r\n        checkAddedTax: [],\r\n        //保障弹窗\r\n        showBnftMore: false,\r\n        //产品弹窗\r\n        showPdMore: false,\r\n        //方案弹窗\r\n        showProgMore: false,\r\n        //账单弹窗\r\n        showPdClmBnftMore: false,\r\n        //账单费用弹窗\r\n        showPdMedFeeBillMore: false,\r\n        showLimitQuickPageFlag: false,\r\n        showDeteleButton: false,\r\n        formulaVisible: false,\r\n        formulaSelectVisible: false,\r\n        showFrequencyFlag:false,\r\n        comboHePeiCalcMarkFlag:true\r\n      }\r\n    },\r\n    mounted() {\r\n    },\r\n    created() {\r\n      this.comboHePeiCalcMarkFlag = this.$route.query.comboHePeiCalcMarkFlag;\r\n      if(this.comboHePeiCalcMarkFlag==undefined){\r\n        this.comboHePeiCalcMarkFlag=true\r\n      }\r\n      this.initProductInfo();\r\n      this.findConfigsData()\r\n    },\r\n    watch: {\r\n      'form_comboQuota.pdBnftCumType'(){\r\n        let val = this.form_comboQuota.pdBnftCumType;\r\n        if(val=='1'){\r\n          this.form_comboQuota.pdBnftCumFrequency='';\r\n          this.form_comboQuota.pdBnftCumFrequencyUnit ='';\r\n          this.showFrequencyFlag=true\r\n        }else if(val=='2'){\r\n          this.showFrequencyFlag=false\r\n        }\r\n      },\r\n      'form_comboQuota.pdBnftFactorType'(){\r\n        let val = this.form_comboQuota.pdBnftFactorType;\r\n        if(val=='1'){\r\n          this.form_comboQuota.pdBnftFactorValue2='';\r\n          this.form_comboQuota.pdBnftFactorValue3=''\r\n        }else if(val=='2'){\r\n          this.form_comboQuota.pdBnftFactorValue1='';\r\n          this.form_comboQuota.pdBnftFactorValue3=''\r\n        }else if(val=='3'){\r\n          this.form_comboQuota.pdBnftFactorValue1='';\r\n          this.form_comboQuota.pdBnftFactorValue2=''\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      //初始化套餐\r\n      initProductInfo() {\r\n        let pdtempPpInfo = this.getPdData();\r\n        if (pdtempPpInfo) {\r\n          this.pdtempPpInfo = pdtempPpInfo;\r\n          Object.assign(this.combo, pdtempPpInfo);\r\n          this.pdProcessId = pdtempPpInfo.pdProcessId;\r\n        }\r\n      },\r\n      findConfigsData() {\r\n        return new Promise(resolve => {\r\n          let data = {\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdBnftCtrlType: 'L'\r\n          };\r\n          findperiodConfigs(this.buildRequestData(data)).then((res) => {\r\n            this.pdQuotaItemList = res.data\r\n            resolve()\r\n          })\r\n        })\r\n      },\r\n      bringInCalcCode(pdBnftCtrlCode, calcCode) {\r\n        console.log(this.pdQuotaItemList)\r\n        for (const clmCtrl of this.pdQuotaItemList) {\r\n          if (clmCtrl.pdBnftCtrlCode === pdBnftCtrlCode) {\r\n            this.$set(clmCtrl, 'pdBnftFactorValueCalCode', calcCode)\r\n            break\r\n          }\r\n        }\r\n        if (this.form_comboQuota.pdBnftCtrlCode === pdBnftCtrlCode) {\r\n          this.$set(this.form_comboQuota, 'pdBnftFactorValueCalCode', calcCode)\r\n        }\r\n      },\r\n      toFormulaDef() {\r\n        if(!this.showDeteleButton){\r\n          this.notifyError(\"请选择一条套餐限额\");\r\n          return\r\n        }\r\n        this.pdBussDetailType = '60';\r\n        this.formulaVisible = true\r\n      },\r\n      changeDialogVisible_ClmCtrlFormula(visible) {\r\n\r\n        this.formulaVisible = visible\r\n      },\r\n      changeDialogVisible_ClmCtrlFormulaSelect(visible) {\r\n        this.formulaSelectVisible = visible\r\n        if (visible === false) {\r\n          this.formulaVisible = false;\r\n          this.$nextTick(() => {\r\n            this.formulaVisible = true\r\n          })\r\n        }\r\n      },\r\n      //保存按钮\r\n      form_comboQuota_add() {\r\n        if(this.form_comboQuota.pdBnftCumType==1){\r\n          this.form_comboQuota.pdBnftCumFrequency=''\r\n          this.form_comboQuota.pdBnftCumFrequencyUnit=''\r\n        }\r\n        if(this.form_comboQuota.pdBnftCtrlLimLevel==null\r\n          || this.form_comboQuota.pdBnftCtrlLimLevel==undefined\r\n          || this.form_comboQuota.pdBnftCtrlLimLevel == ''){\r\n          this.notifyError(\"限制级别不能为空，请选择限制级别\");\r\n          return\r\n        }\r\n        if((this.form_comboQuota.pdBnftCtrlLimLevel=='2'&&this.form_comboQuota.comboList == null)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='2'&&this.form_comboQuota.comboList == undefined)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='2'&&this.form_comboQuota.comboList == '')){\r\n          this.notifyError(\"关联套餐不能为空，请关联套餐\");\r\n          return\r\n        }\r\n        if((this.form_comboQuota.pdBnftCtrlLimLevel=='4'&&this.form_comboQuota.comboProgList == null)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='4'&&this.form_comboQuota.comboProgList == undefined)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='4'&&this.form_comboQuota.comboProgList == '')){\r\n          this.notifyError(\"关联套餐方案不能为空，请关联套餐方案\");\r\n          return\r\n        }\r\n        let pdtempClmCtrlMain = {\r\n          pdVerId: this.pdtempPpInfo.pdVerId,\r\n          operator: this.pdtempPpInfo.operator,\r\n          pdBnftCtrlLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n          pdBnftCtrlType: 'L',\r\n          pdBnftFactorType: this.form_comboQuota.pdBnftFactorType,\r\n          pdBnftFactorValue:\r\n            this.form_comboQuota.pdBnftFactorType == 1\r\n              ? this.form_comboQuota.pdBnftFactorValue1\r\n              : this.form_comboQuota.pdBnftFactorType == 2\r\n              ? this.form_comboQuota.pdBnftFactorValue2\r\n              : this.form_comboQuota.pdBnftFactorValue3,\r\n          pdBnftFactorValueUnit:\r\n            this.form_comboQuota.pdBnftFactorType == 1\r\n              ? 'R'\r\n              : this.form_comboQuota.pdBnftFactorType == 2\r\n              ? 'D'\r\n              : 'T',\r\n          pdBnftFactorValueCalCode: this.form_comboQuota.pdBnftFactorValueCalCode,\r\n          pdBnftCumType: this.form_comboQuota.pdBnftCumType,\r\n          pdBnftCumFrequency: this.form_comboQuota.pdBnftCumFrequency,\r\n          pdBnftCumFrequencyUnit: this.form_comboQuota.pdBnftCumFrequencyUnit,\r\n          pdBnftCtrlLimitFlag: this.form_comboQuota.pdBnftCtrlLimitFlag\r\n        };\r\n        let pdtempClmCtrlLim = {\r\n          pdVerId: this.pdtempPpInfo.pdVerId,\r\n          operator: this.pdtempPpInfo.operator,\r\n          pdType: '2',\r\n          pdInfoId: this.pdtempPpInfo.id,\r\n          pdCode: this.pdtempPpInfo.pdCode,\r\n          pdName: this.pdtempPpInfo.pdName,\r\n          pdBnftCtrlOrder: this.form_comboQuota.pdBnftCtrlOrder,\r\n          pdBnftCtrlLimCode: '',\r\n          pdBnftCtrlLimLevel: this.form_comboQuota.pdBnftCtrlLimLevel\r\n        };\r\n        let pdtempClmCtrlRelas = [];\r\n        if (this.form_comboQuota.pdBnftCtrlLimLevel == '1') {\r\n          let temp = {\r\n            pdVerId: this.pdtempPpInfo.pdVerId,\r\n            operator: this.pdtempPpInfo.operator,\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdType: '2',\r\n            pdBnftCtrlConCode: this.pdtempPpInfo.ppCode,\r\n            pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n            pdClmInfoId:this.pdtempPpInfo.id\r\n          };\r\n          pdtempClmCtrlRelas.push(temp)\r\n        }\r\n        else if (this.form_comboQuota.pdBnftCtrlLimLevel == '3') {\r\n          let temp = {\r\n            pdVerId: this.pdtempPpInfo.pdVerId,\r\n            operator: this.pdtempPpInfo.operator,\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdType: '2',\r\n            pdBnftCtrlConCode: this.pdtempPpInfo.ppPlanCode,\r\n            pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n            pdClmInfoId:this.pdtempPpInfo.id\r\n          }\r\n          pdtempClmCtrlRelas.push(temp)\r\n        }\r\n        else if (this.form_comboQuota.pdBnftCtrlLimLevel == '2') {\r\n          this.form_comboQuota.comboList.forEach((val) => {\r\n            let pdClmInfoId =null;\r\n            for (const item of this.comboOptions) {\r\n              if(item.ppCode==val){\r\n                pdClmInfoId=item.id;\r\n                break\r\n              }\r\n            }\r\n            let temp = {\r\n              pdVerId: this.pdtempPpInfo.pdVerId,\r\n              operator: this.pdtempPpInfo.operator,\r\n              pdInfoId: this.pdtempPpInfo.id,\r\n              pdType: '2',\r\n              pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n              pdBnftCtrlConCode: val,\r\n              pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n              pdClmInfoId:pdClmInfoId\r\n            };\r\n            pdtempClmCtrlRelas.push(temp)\r\n          })\r\n        }\r\n        else {\r\n          this.form_comboQuota.comboProgList.forEach((val) => {\r\n            let pdClmInfoId =null;\r\n            for (const item of this.comboProgOptions) {\r\n               if(item.ppPlanCode==val){\r\n                 pdClmInfoId=item.id;\r\n                 break\r\n               }\r\n            }\r\n            let temp = {\r\n              pdVerId: this.pdtempPpInfo.pdVerId,\r\n              operator: this.pdtempPpInfo.operator,\r\n              pdInfoId: this.pdtempPpInfo.id,\r\n              pdType: '2',\r\n              pdBnftCtrlConCode: val,\r\n              pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n              pdClmInfoId:pdClmInfoId\r\n            };\r\n            pdtempClmCtrlRelas.push(temp)\r\n          });\r\n        }\r\n        let data = {\r\n          pdtempClmCtrlMain,\r\n          pdtempClmCtrlLim,\r\n          pdtempClmCtrlRelas\r\n        };\r\n        saveObBnftForm(this.buildRequestData(data)).then((res) => {\r\n          this.notifySuccess(res.message);\r\n          this.findConfigsData().then(()=>{\r\n            this.checkAddedTax = []\r\n            for (let i = 0; i < this.pdQuotaItemList.length; i++) {\r\n              if(this.pdQuotaItemList[i].pdBnftCtrlCode==res.data[0].pdBnftCtrlCode){\r\n                this.checkAddedTax=this.pdQuotaItemList[i]\r\n                this.$refs.multipleTable.toggleRowSelection(this.checkAddedTax);\r\n              }\r\n            }})\r\n        })\r\n\r\n      },\r\n      form_comboQuota_update() {\r\n        if(this.form_comboQuota.pdBnftCumType==1){\r\n          this.form_comboQuota.pdBnftCumFrequency=''\r\n          this.form_comboQuota.pdBnftCumFrequencyUnit=''\r\n        }\r\n        if(this.form_comboQuota.pdBnftCtrlLimLevel==null\r\n          || this.form_comboQuota.pdBnftCtrlLimLevel==undefined\r\n          || this.form_comboQuota.pdBnftCtrlLimLevel == ''){\r\n          this.notifyError(\"限制级别不能为空，请选择限制级别\");\r\n          return\r\n        }\r\n        if((this.form_comboQuota.pdBnftCtrlLimLevel=='2'&&this.form_comboQuota.comboList == null)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='2'&&this.form_comboQuota.comboList == undefined)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='2'&&this.form_comboQuota.comboList == '')){\r\n          this.notifyError(\"关联套餐不能为空，请关联套餐\");\r\n          return\r\n        }\r\n        if((this.form_comboQuota.pdBnftCtrlLimLevel=='4'&&this.form_comboQuota.comboProgList == null)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='4'&&this.form_comboQuota.comboProgList == undefined)\r\n          || (this.form_comboQuota.pdBnftCtrlLimLevel=='4'&&this.form_comboQuota.comboProgList == '')){\r\n          this.notifyError(\"关联套餐方案不能为空，请关联套餐方案\");\r\n          return\r\n        }\r\n        let pdtempClmCtrlMain = {\r\n          id:this.form_comboQuota.id,\r\n          pdVerId: this.pdtempPpInfo.pdVerId,\r\n          operator: this.pdtempPpInfo.operator,\r\n          pdBnftCtrlLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n          pdBnftCtrlType: 'L',\r\n          pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n          pdBnftFactorType: this.form_comboQuota.pdBnftFactorType,\r\n          pdBnftFactorValue:\r\n            this.form_comboQuota.pdBnftFactorType == 1\r\n              ? this.form_comboQuota.pdBnftFactorValue1\r\n              : this.form_comboQuota.pdBnftFactorType == 2\r\n              ? this.form_comboQuota.pdBnftFactorValue2\r\n              : this.form_comboQuota.pdBnftFactorValue3,\r\n          pdBnftFactorValueUnit:\r\n            this.form_comboQuota.pdBnftFactorType == 1\r\n              ? 'R'\r\n              : this.form_comboQuota.pdBnftFactorType == 2\r\n              ? 'D'\r\n              : 'T',\r\n          pdBnftFactorValueCalCode: this.form_comboQuota.pdBnftFactorValueCalCode,\r\n          pdBnftCumType: this.form_comboQuota.pdBnftCumType,\r\n          pdBnftCumFrequency: this.form_comboQuota.pdBnftCumFrequency,\r\n          pdBnftCumFrequencyUnit: this.form_comboQuota.pdBnftCumFrequencyUnit,\r\n          pdBnftCtrlLimitFlag: this.form_comboQuota.pdBnftCtrlLimitFlag\r\n        }\r\n        let pdtempClmCtrlLim = {\r\n          pdVerId: this.pdtempPpInfo.pdVerId,\r\n          operator: this.pdtempPpInfo.operator,\r\n          pdInfoId: this.pdtempPpInfo.id,\r\n          pdCode: this.pdtempPpInfo.ppCode,\r\n          pdName: this.pdtempPpInfo.ppName,\r\n          pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n          pdBnftCtrlOrder: this.form_comboQuota.pdBnftCtrlOrder,\r\n          pdBnftCtrlLimCode: 'L',\r\n          pdBnftCtrlLimLevel: this.form_comboQuota.pdBnftCtrlLimLevel\r\n        };\r\n        let pdtempClmCtrlRelas = [];\r\n        if (this.form_comboQuota.pdBnftCtrlLimLevel == '1') {\r\n          let temp = {\r\n            pdVerId: this.pdtempPpInfo.pdVerId,\r\n            operator: this.pdtempPpInfo.operator,\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdType: '2',\r\n            pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n            pdBnftCtrlConCode: this.pdtempPpInfo.ppCode,\r\n            pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n            pdClmInfoId:this.pdtempPpInfo.id\r\n          }\r\n          pdtempClmCtrlRelas.push(temp)\r\n        }\r\n        else if (this.form_comboQuota.pdBnftCtrlLimLevel == '3') {\r\n          let temp = {\r\n            pdVerId: this.pdtempPpInfo.pdVerId,\r\n            operator: this.pdtempPpInfo.operator,\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdType: '2',\r\n            pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n            pdBnftCtrlConCode: this.pdtempPpInfo.ppPlanCode,\r\n            pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n            pdClmInfoId:this.pdtempPpInfo.id\r\n          };\r\n          pdtempClmCtrlRelas.push(temp)\r\n        }\r\n        else if (this.form_comboQuota.pdBnftCtrlLimLevel == '2') {\r\n          this.form_comboQuota.comboList.forEach((val) => {\r\n            let pdClmInfoId =null;\r\n            for (const item of this.comboOptions) {\r\n              if(item.ppCode==val){\r\n                pdClmInfoId=item.id;\r\n                break\r\n              }\r\n            }\r\n            let temp = {\r\n              pdVerId: this.pdtempPpInfo.pdVerId,\r\n              operator: this.pdtempPpInfo.operator,\r\n              pdInfoId: this.pdtempPpInfo.id,\r\n              pdType: '2',\r\n              pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n              pdBnftCtrlConCode: val,\r\n              pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n              pdClmInfoId:pdClmInfoId\r\n            };\r\n            pdtempClmCtrlRelas.push(temp)\r\n          })\r\n        }\r\n        else {\r\n          this.form_comboQuota.comboProgList.forEach((val) => {\r\n            let pdClmInfoId =null;\r\n            for (const item of this.comboProgOptions) {\r\n              if(item.ppPlanCode==val){\r\n                pdClmInfoId=item.id;\r\n                break\r\n              }\r\n            }\r\n            let temp = {\r\n              pdVerId: this.pdtempPpInfo.pdVerId,\r\n              operator: this.pdtempPpInfo.operator,\r\n              pdInfoId: this.pdtempPpInfo.id,\r\n              pdType: '2',\r\n              pdBnftCtrlCode: this.form_comboQuota.pdBnftCtrlCode,\r\n              pdBnftCtrlConCode: val,\r\n              pdBnftCtrlConLevel: this.form_comboQuota.pdBnftCtrlLimLevel,\r\n              pdClmInfoId:pdClmInfoId\r\n            }\r\n            pdtempClmCtrlRelas.push(temp)\r\n          })\r\n        }\r\n        let data = {\r\n          pdtempClmCtrlMain,\r\n          pdtempClmCtrlLim,\r\n          pdtempClmCtrlRelas\r\n        }\r\n        updateObBnftForm(this.buildRequestData(data)).then((res) => {\r\n          this.notifySuccess(res.message);\r\n          this.findConfigsData().then(()=>{\r\n            this.checkAddedTax = []\r\n            for (let i = 0; i < this.pdQuotaItemList.length; i++) {\r\n              if(this.pdQuotaItemList[i].pdBnftCtrlCode==res.data[0].pdBnftCtrlCode){\r\n                this.checkAddedTax=this.pdQuotaItemList[i]\r\n                this.$refs.multipleTable.toggleRowSelection(this.checkAddedTax);\r\n              }\r\n            }})\r\n        })\r\n      },\r\n      changeOption() {\r\n        this.$forceUpdate()\r\n      },\r\n      form_comboQuota_delete() {\r\n        let data = { pdBnftCtrlCode: [this.form_comboQuota.pdBnftCtrlCode] };\r\n        deleteObBnftForm(this.buildRequestData(data)).then((res) => {\r\n          this.notifySuccess(this.$t('successMessage.delete'))\r\n          this.findConfigsData()\r\n          this.form_comboQuota_refresh()\r\n        })\r\n      },\r\n      form_comboQuota_refresh() {\r\n        this.$refs.multipleTable.clearSelection();\r\n        this.form_comboQuota = {\r\n          id:'',\r\n          pdBnftCtrlCode:'',\r\n          pdBnftCtrlType: '',\r\n          pdBnftCtrlOrder:'',\r\n          pdBnftFactorType:'',\r\n          pdBnftFactorValue:'',\r\n          pdBnftCtrlLimLevel:'',\r\n          comboList:[],\r\n          comboProgList:[],\r\n          pdBnftCtrlConCode: [],\r\n          pdBnftCumFrequency: '',\r\n          pdBnftFactorValue1: '',\r\n          pdBnftFactorValue2: '',\r\n          pdBnftFactorValue3: '',\r\n          pdBnftCumType: '',\r\n          pdBnftCumFrequencyUnit: '',\r\n          pdBnftCtrlLimitFlag:'',\r\n          pdBnftFactorValueCalCode:''\r\n        };\r\n        this.$refs.multipleTable.clearSelection()\r\n      },\r\n      handleSearch() {\r\n        if (this.$refs.page_limit) {\r\n          this.$refs.page_limit.reload();\r\n        }\r\n      },\r\n      connDeductible(row) {\r\n        let pdtempClmCtrlMain = {\r\n          pdVerId: this.pdtempPpInfo.pdVerId,\r\n          operator: this.pdtempPpInfo.operator,\r\n          pdBnftCtrlLevel:row.pdBnftCtrlLimLevel,\r\n          pdBnftCtrlType: 'L',\r\n          pdBnftFactorType:row.pdBnftFactorType,\r\n          pdBnftFactorValue:row.pdBnftFactorValue,\r\n          pdBnftFactorValueUnit:row.pdBnftFactorValueUnit,\r\n          pdBnftFactorValueCalCode: row.pdBnftFactorValueCalCode,\r\n          pdBnftCumType: row.pdBnftCumType,\r\n          pdBnftCumFrequency: row.pdBnftCumFrequency,\r\n          pdBnftCumFrequencyUnit:row.pdBnftCumFrequencyUnit,\r\n          pdBnftCtrlLimitFlag: row.pdBnftCtrlLimitFlag\r\n        };\r\n        let pdtempClmCtrlLim = {\r\n          pdVerId: this.pdtempPpInfo.pdVerId,\r\n          operator: this.pdtempPpInfo.operator,\r\n          pdType: '2',\r\n          pdInfoId: this.pdtempPpInfo.id,\r\n          pdCode: this.pdtempPpInfo.pdCode,\r\n          pdName: this.pdtempPpInfo.pdName,\r\n          pdBnftCtrlOrder: row.pdBnftCtrlOrder,\r\n          pdBnftCtrlLimCode: '',\r\n          pdBnftCtrlLimLevel: row.pdBnftCtrlLimLevel\r\n        };\r\n        let pdtempClmCtrlRelas = [];\r\n        if (row.pdBnftCtrlLimLevel == '1') {\r\n          let temp = {\r\n            pdVerId: this.pdtempPpInfo.pdVerId,\r\n            operator: this.pdtempPpInfo.operator,\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdBnftCtrlConCode: this.pdtempPpInfo.ppCode,\r\n            pdBnftCtrlConLevel: row.pdBnftCtrlLimLevel,\r\n            pdClmInfoId:this.pdtempPpInfo.id\r\n          };\r\n          pdtempClmCtrlRelas.push(temp)\r\n        }\r\n        else if (row.pdBnftCtrlLimLevel == '3') {\r\n          let temp = {\r\n            pdVerId: this.pdtempPpInfo.pdVerId,\r\n            operator: this.pdtempPpInfo.operator,\r\n            pdInfoId: this.pdtempPpInfo.id,\r\n            pdBnftCtrlConCode: this.pdtempPpInfo.ppPlanCode,\r\n            pdBnftCtrlConLevel: row.pdBnftCtrlLimLevel,\r\n            pdClmInfoId:this.pdtempPpInfo.id\r\n          };\r\n          pdtempClmCtrlRelas.push(temp)\r\n        }\r\n        else {\r\n          row.pdtempClmCtrlLimRelaListVo.forEach((val) => {\r\n            let temp = {\r\n              pdVerId: this.pdtempPpInfo.pdVerId,\r\n              operator: this.pdtempPpInfo.operator,\r\n              pdInfoId: this.pdtempPpInfo.id,\r\n              pdBnftCtrlConCode: val,\r\n              pdBnftCtrlConLevel: row.pdBnftCtrlLimLevel,\r\n              pdClmInfoId:val.id\r\n            };\r\n            pdtempClmCtrlRelas.push(temp)\r\n          });\r\n        }\r\n        let data = {\r\n          pdtempClmCtrlMain,\r\n          pdtempClmCtrlLim,\r\n          pdtempClmCtrlRelas\r\n        };\r\n        saveObBnftForm(this.buildRequestData(data)).then((res) => {\r\n          this.notifySuccess(res.message);\r\n          this.findConfigsData();\r\n        })\r\n      },\r\n      deleteMoreTax() {\r\n          let data = { pdBnftCtrlCode: this.checkAddedTax.map(t => t.pdBnftCtrlCode) };\r\n          deleteObBnftForm(this.buildRequestData(data)).then(() => {\r\n            this.notifySuccess(this.$t('successMessage.delete'))\r\n            this.findConfigsData();\r\n            this.form_comboQuota_refresh();\r\n          });\r\n      },\r\n      checkComboLimitTable(val) {\r\n        this.checkAddedTax = val;\r\n        this.showDeteleButton = false;\r\n        this.$nextTick(() => {\r\n          if (this.checkAddedTax.length == 1) {\r\n            Object.assign(this.form_comboQuota, val[0]);\r\n            let CalCodeVal =this.form_comboQuota.pdBnftFactorValueCalCode\r\n            if(CalCodeVal==null || CalCodeVal==''){\r\n              this.accFundFlag='N'\r\n            }else{\r\n              this.accFundFlag='Y'\r\n            }\r\n            let value = this.form_comboQuota.pdBnftFactorType;\r\n            if(value=='1'){\r\n              this.form_comboQuota.pdBnftFactorValue1=this.form_comboQuota.pdBnftFactorValue;\r\n            }else if(value=='2'){\r\n              this.form_comboQuota.pdBnftFactorValue2=this.form_comboQuota.pdBnftFactorValue;\r\n            }else if(value=='3'){\r\n              this.form_comboQuota.pdBnftFactorValue3=this.form_comboQuota.pdBnftFactorValue;\r\n            }\r\n            let levelValue = this.form_comboQuota.pdBnftCtrlLimLevel;\r\n            if(levelValue==='2'){\r\n              this.form_comboQuota.comboList = [];\r\n              this.comboOptions = [];\r\n              for (const item of val[0].pdtempClmCtrlLimRelaListVo) {\r\n                this.form_comboQuota.comboList.push(item.pdBnftCtrlConCode);\r\n                this.comboOptions.push({\r\n                  id:item.pdClmInfoId,\r\n                  ppCode:item.pdBnftCtrlConCode,\r\n                  ppName:item.pdBnftCtrlConName\r\n                  })\r\n              }\r\n            }\r\n            if(levelValue==='4'){\r\n              this.form_comboQuota.comboProgList = [];\r\n              this.comboProgOptions = [];\r\n              for (const item of val[0].pdtempClmCtrlLimRelaListVo) {\r\n                this.form_comboQuota.comboProgList.push(item.pdBnftCtrlConCode);\r\n                this.comboProgOptions.push({\r\n                  id:item.pdClmInfoId,\r\n                  ppPlanCode:item.pdBnftCtrlConCode,\r\n                  ppPlanName:item.pdBnftCtrlConName\r\n                })\r\n              }\r\n            }\r\n            this.changeOption();\r\n            this.showDeteleButton = true\r\n          } else if (this.checkAddedTax.length == 0) {\r\n            this.form_comboQuota_refresh()\r\n          }\r\n        })\r\n      },\r\n      rowClick_def(row, column, event) {\r\n        if (event.target.nodeName === \"INPUT\") {\r\n          if (row.id === this.selectedDef.id) {\r\n            this.selectedDef = {}\r\n          }\r\n        }\r\n      },\r\n      showLimitQuickPage() {\r\n        this.findComboList();\r\n        if (!this.showLimitQuickPageFlag) {\r\n          this.quickicon = \"el-icon-arrow-down\";\r\n        } else {\r\n          this.quickicon = \"el-icon-arrow-right\";\r\n        }\r\n        return (this.showLimitQuickPageFlag = !this.showLimitQuickPageFlag);\r\n      },\r\n      findComboList(){\r\n        findComboList().then(res=>{\r\n          this.comboVoOptions=res.data\r\n        });\r\n      },\r\n      backToMenu() {\r\n        this.$router.push({name: '产品套餐核赔定义', params: {}})\r\n      },\r\n      //产品套餐下拉选\r\n      selectComboList(selectedItemList) {\r\n        this.form_comboQuota.comboList = [];\r\n        this.comboOptions = [];\r\n        for (const item of selectedItemList) {\r\n          this.form_comboQuota.comboList.push(item.ppCode);\r\n          this.comboOptions.push(item)\r\n        }\r\n      },\r\n      //关联方案下拉选\r\n      selectComboProgList(selectedItemList) {\r\n        this.form_comboQuota.comboProgList = [];\r\n        this.comboProgOptions = [];\r\n        for (const item of selectedItemList) {\r\n          this.form_comboQuota.comboProgList.push(item.ppPlanCode);\r\n          this.comboProgOptions.push(item)\r\n        }\r\n      },\r\n      //弹窗返回主页面\r\n      backToFeeBill(flag,selectedItemList) {\r\n        //套餐\r\n        if (flag === 'combo') {\r\n          this.showComboMore = false;\r\n          this.selectComboList(selectedItemList)\r\n        }\r\n        //方案\r\n        else if (flag === 'comboProg') {\r\n          this.showComboProgMore = false;\r\n          this.selectComboProgList(selectedItemList)\r\n        }\r\n      },\r\n      //产品套餐\r\n      checkPdBnftCtrlLimLevel() {\r\n        if(this.checkAddedTax.length==1) {\r\n          if (this.checkAddedTax[0].pdBnftCtrlLimLevel === this.form_comboQuota.pdBnftCtrlLimLevel) {\r\n            return this.checkAddedTax[0].pdBnftCtrlCode\r\n          } else {\r\n            return ''\r\n          }\r\n        }else{\r\n          return ''\r\n        }\r\n\r\n      },\r\n      openComboDetail() {\r\n        this.pdBnftCtrlCode = this.checkPdBnftCtrlLimLevel()\r\n        this.showComboMore = true;\r\n      },\r\n      //产品套餐方案\r\n      openComboProgDetail() {\r\n        this.pdBnftCtrlCode = this.checkPdBnftCtrlLimLevel()\r\n        this.showComboProgMore = true;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n  .showDiv {\r\n    width: 90%;\r\n    height: 100%;\r\n    margin-top: -40px;\r\n    margin-left: -40px;\r\n    position: absolute;\r\n    background: #ffffff00;\r\n    z-index: 999;\r\n  }\r\n\r\n</style>\r\n\r\n"]}]}