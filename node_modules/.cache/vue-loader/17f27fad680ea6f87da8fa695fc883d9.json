{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\basicinfo\\account-fee-formula\\accountFeeFormula\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\basicinfo\\account-fee-formula\\accountFeeFormula\\index.vue","mtime":1609847106511},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYWNjb3VudEZlZUZvcm11bGFTZWxlY3QgZnJvbSAiQC92aWV3cy9iYXNpY2luZm8vYWNjb3VudC1mZWUtZm9ybXVsYS9hY2NvdW50RmVlRm9ybXVsYVNlbGVjdCINCmltcG9ydCB7DQogIGRlbGV0ZUFtb3VudEZvcm11bGEsDQogIGZpbmRBbGxBY2NvdW50QnlQcm9kdWN0SWQsDQogIGZpbmRBbGxJbkZsb3dCeVBkQWNjSWQsDQogIGZpbmRBbGxPdXRGbG93QnlQZEFjY0lkLA0KICBmaW5kQWxsUGRBY2NDYXBGZWVCeVBkQWNjSWQsDQogIGZpbmRBbGxQZEFjY291bnRGZWVCeVBkQWNjSWQsDQp9IGZyb20gIkAvYXBpL2Jhc2ljaW5mby9hY2NvdW50RmVlRm9ybXVsYSINCmltcG9ydCBydWxlQ2FsY3VsYXRvck1ha2UgZnJvbSAnQC92aWV3cy9pYnJtcy9ydWxlTWFuYWdlbWVudC9ydWxlQ2FsY3VsYXRvck1ha2UvaW5kZXgnDQppbXBvcnQge2Fzc29jaWF0ZVBkQWNjQ2FsYywgZ2V0Q2FsY0NvZGV9IGZyb20gIkAvYXBpL2Jhc2ljaW5mby9hY2NvdW50RmVlRm9ybXVsYVNlbGVjdCINCg0KbGV0IF90aGlzDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2FjY291bnRGb3JtdWxhJywNCiAgZmlsdGVyczogew0KICAgIGZpbHRlcl9mb3JtdWxhVHlwZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3J1bGVCdXNpbmVzc0RldGFpbENsYXNzJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZEFjY0l0ZW1UeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgnY29zdHByb3R5cGUnLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX3BkQWNjQ2FwSW5PdXRNb2RlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRBY2NJbmZNb2RlJywgY29kZSkNCiAgICB9LA0KICAgIGZpbHRlcl9wZEFjY0NhcEZsb3dUeXBlKGNvZGUpIHsNCiAgICAgIHJldHVybiBfdGhpcy5nZXRDb2RlTmFtZSgncGRBY2NDYXBGbG93VHlwZScsIGNvZGUpDQogICAgfSwNCiAgICBmaWx0ZXJfcGRBY2NGZWVDYWxjTW9kZShjb2RlKSB7DQogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ2Nvc3RjYWx3YXknLCBjb2RlKQ0KICAgIH0sDQogICAgZmlsdGVyX3BkQWNjQ2FwSXRlbVR5cGUoY29kZSkgew0KICAgICAgcmV0dXJuIF90aGlzLmdldENvZGVOYW1lKCdwZEFjY0NhcEluZlR5cGUnLCBjb2RlKQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czoge2FjY291bnRGZWVGb3JtdWxhU2VsZWN0LCBydWxlQ2FsY3VsYXRvck1ha2V9LA0KICBwcm9wczogew0KICAgIGJ1c3NPYmplY3Q6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgcmV0dXJuIHt9DQogICAgICB9DQogICAgfSwNCiAgICBmb3JtdWxhVHlwZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIHJldmlzaW9uTWFyazogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIF90aGlzID0gdGhpcw0KICAgIHJldHVybiB7DQogICAgICBzZWxlY3RlZEFjY291bnRGZWU6IHt9LA0KICAgICAgc2VsZWN0ZWRJbk91dEZsb3c6IHt9LA0KICAgICAgc2VsZWN0ZWRDYXBGZWVWbzoge30sDQogICAgICBhdHRyaWJ1dGVPYmo6IHt9LA0KICAgICAgZm9ybXVsYVZpc2libGU6IGZhbHNlLA0KICAgICAgZm9ybXVsYVZpZXc6IHsNCiAgICAgICAgZmxhZzogJycsDQogICAgICAgIHJ1bGVDb2RlOiAnJywNCiAgICAgICAgcGVyZm9ybVR5cGU6ICcnLA0KICAgICAgICB2aXNpYmxlOiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIGJ1c3NPYmplY3RfOiB7fSwNCiAgICAgIGZvcm11bGFUeXBlXzogJycsDQogICAgICAvLyDkuqflk4Hkv6Hmga8NCiAgICAgIHByb2R1Y3Q6IHsNCiAgICAgICAgaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgYlR5cGU6ICcnLA0KICAgICAgICBjVHlwZTogJycsDQogICAgICAgIHBkQ29kZTogJycsDQogICAgICAgIHBkRWRpdGlvbjogJycsDQogICAgICAgIHBkVmVySWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgcGRTYWxlY2hubDogJycsDQogICAgICAgIHBkTmFtZTogJycsDQogICAgICAgIHBkU2hvcnRuYW1lOiAnJywNCiAgICAgICAgcGRFbk5hbWU6ICcnLA0KICAgICAgICBwZFNob3J0RW5OYW1lOiAnJywNCiAgICAgICAgb3BlcmF0b3I6ICcnLA0KICAgICAgICBwZEFwcGxEYXRlOiB1bmRlZmluZWQsDQogICAgICAgIHBkUHJvY2Vzc0lkOiB1bmRlZmluZWQsDQogICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgdXBkYXRlVGltZTogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgcGR0ZW1wUGRBY2NMaXN0OiBbXSwNCiAgICAgIHByb2R1Y3RBY2NDYXBGZWVMaXN0OiBbXSwNCiAgICAgIHBkQWNjb3VudEZlZUxpc3Q6IFtdLA0KICAgICAgaW5GbG93TGlzdDogW10sDQogICAgICBvdXRGbG93TGlzdDogW10sDQogICAgICBhY2NDYWxjVHlwZTogJzEnLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIGFjY291bnRDb2RlOiAnJywNCiAgICAgICAgYWNjb3VudE5hbWU6ICcnLA0KICAgICAgICBmb3JtdWxhVHlwZTogJycsDQogICAgICAgIGNhcEZlZUluSWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgY2FwRmVlT3V0SWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgaW5GbG93SWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgaW5GbG93TmFtZTogJycsDQogICAgICAgIG91dEZsb3dJZDogdW5kZWZpbmVkLA0KICAgICAgICBvdXRGbG93TmFtZTogJycsDQogICAgICAgIHBkQWNjb3VudEZlZUlkOiB1bmRlZmluZWQsDQogICAgICAgIHBkQWNjRmVlTmFtZTogJycNCiAgICAgIH0sDQogICAgICBzZWxlY3RlZEZvcm11bGE6IHt9LA0KICAgICAgcGFyYW1zX2FjY291bnRGZWU6IHsNCiAgICAgICAgZXFfcGRJbmZvSWQ6IHVuZGVmaW5lZA0KICAgICAgfSwNCiAgICAgIHBhcmFtc19pbk91dEZsb3c6IHsNCiAgICAgICAgZXFfcGRJbmZvSWQ6IHVuZGVmaW5lZA0KICAgICAgfSwNCiAgICAgIHBhcmFtc19jYXBGZWVWbzogew0KICAgICAgICBlcV9wZEluZm9JZDogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgcGFyYW1zX2N1cnJlbnQ6IHsNCiAgICAgICAgcHJvZHVjdDogdW5kZWZpbmVkLA0KICAgICAgICBwZEJ1c3NEZXRhaWxUeXBlOiAnJywNCiAgICAgICAgcGRCdXNzSWQ6IHVuZGVmaW5lZA0KICAgICAgfSwNCiAgICAgIHBhcmFtc19icmllZjogew0KICAgICAgICBwcm9kdWN0OiB1bmRlZmluZWQsDQogICAgICAgIHBkQnVzc0lkOiB1bmRlZmluZWQsDQogICAgICAgIHByb2R1Y3REZXRhaWxUeXBlOiAnJywNCiAgICAgICAgcGRCdXNzRGV0YWlsVHlwZTogJycNCiAgICAgIH0sDQogICAgICB0YWJsZURhdGFfY3VycmVudDogW10sDQogICAgICB0YWJsZURhdGFfYnJpZWY6IFtdLA0KICAgICAgdGFibGVEYXRhX2FjY291bnRGZWU6IFtdLA0KICAgICAgdGFibGVEYXRhX2luT3V0RmxvdzogW10sDQogICAgICB0YWJsZURhdGFfY2FwRmVlVm86IFtdLA0KICAgICAgZGlhbG9nVmlzaWJsZTogew0KICAgICAgICBhY2NvdW50RmVlRm9ybXVsYVNlbGVjdDogZmFsc2UNCiAgICAgIH0sDQogICAgICBmaWx0ZXJzX3BkQ29kZTogW10sDQogICAgICBmaWx0ZXJzX2FjY291bnRfY3VycmVudDogW10sDQogICAgICBmaWx0ZXJzX2FjY291bnRfYnJpZWY6IFtdLA0KICAgICAgZmlsdGVyc19hY2NvdW50RmVlX2N1cnJlbnQ6IFtdLA0KICAgICAgZmlsdGVyc19hY2NvdW50RmVlX2JyaWVmOiBbXSwNCiAgICAgIGZpbHRlcnNfaW5GbG93X2N1cnJlbnQ6IFtdLA0KICAgICAgZmlsdGVyc19pbkZsb3dfYnJpZWY6IFtdLA0KICAgICAgZmlsdGVyc19vdXRGbG93X2N1cnJlbnQ6IFtdLA0KICAgICAgZmlsdGVyc19vdXRGbG93X2JyaWVmOiBbXQ0KICAgIH0NCiAgfSwNCiAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICBhd2FpdCB0aGlzLmluaXRQcm9kdWN0SW5mbygpDQogICAgdGhpcy5pbml0KCkNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB0YWJsZURhdGFfY3VycmVudCgpIHsNCiAgICAgIC8vIOWIneWni+WMlui0puaIt+WIl+eahOetm+mAieWZqA0KICAgICAgZm9yIChjb25zdCBmb3JtdWxhVm8gb2YgdGhpcy50YWJsZURhdGFfY3VycmVudCkgew0KICAgICAgICBpZiAoZm9ybXVsYVZvLmFjY291bnRDb2RlICYmICF0aGlzLl8uaW5jbHVkZXModGhpcy5fLm1hcCh0aGlzLmZpbHRlcnNfYWNjb3VudF9jdXJyZW50LCAndmFsdWUnKSwgZm9ybXVsYVZvLmFjY291bnRDb2RlKSkgew0KICAgICAgICAgIHRoaXMuZmlsdGVyc19hY2NvdW50X2N1cnJlbnQucHVzaCh7DQogICAgICAgICAgICB0ZXh0OiBmb3JtdWxhVm8uYWNjb3VudENvZGUgKyAnOicgKyBmb3JtdWxhVm8uYWNjb3VudE5hbWUsDQogICAgICAgICAgICB2YWx1ZTogZm9ybXVsYVZvLmFjY291bnRDb2RlDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8g5Yid5aeL5YyW6LS555So5YiX55qE562b6YCJ5ZmoDQogICAgICBmb3IgKGNvbnN0IGZvcm11bGFWbyBvZiB0aGlzLnRhYmxlRGF0YV9jdXJyZW50KSB7DQogICAgICAgIGlmIChmb3JtdWxhVm8uYWNjb3VudEZlZUNvZGUgJiYgIXRoaXMuXy5pbmNsdWRlcyh0aGlzLl8ubWFwKHRoaXMuZmlsdGVyc19hY2NvdW50RmVlX2N1cnJlbnQsICd2YWx1ZScpLCBmb3JtdWxhVm8uYWNjb3VudEZlZUNvZGUpKSB7DQogICAgICAgICAgdGhpcy5maWx0ZXJzX2FjY291bnRGZWVfY3VycmVudC5wdXNoKHsNCiAgICAgICAgICAgIHRleHQ6IGZvcm11bGFWby5hY2NvdW50RmVlQ29kZSArICc6JyArIGZvcm11bGFWby5hY2NvdW50RmVlTmFtZSwNCiAgICAgICAgICAgIHZhbHVlOiBmb3JtdWxhVm8uYWNjb3VudEZlZUNvZGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyDliJ3lp4vljJbotYTph5HmtYHlhaXliJfnmoTnrZvpgInlmagNCiAgICAgIGZvciAoY29uc3QgZm9ybXVsYVZvIG9mIHRoaXMudGFibGVEYXRhX2N1cnJlbnQpIHsNCiAgICAgICAgaWYgKGZvcm11bGFWby5pbkZsb3dDb2RlICYmICF0aGlzLl8uaW5jbHVkZXModGhpcy5fLm1hcCh0aGlzLmZpbHRlcnNfaW5GbG93X2N1cnJlbnQsICd2YWx1ZScpLCBmb3JtdWxhVm8uaW5GbG93Q29kZSkpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnNfaW5GbG93X2N1cnJlbnQucHVzaCh7DQogICAgICAgICAgICB0ZXh0OiBmb3JtdWxhVm8uaW5GbG93Q29kZSArICc6JyArIGZvcm11bGFWby5pbkZsb3dOYW1lLA0KICAgICAgICAgICAgdmFsdWU6IGZvcm11bGFWby5pbkZsb3dDb2RlDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8g5Yid5aeL5YyW6LWE6YeR5rWB5Ye65YiX55qE562b6YCJ5ZmoDQogICAgICBmb3IgKGNvbnN0IGZvcm11bGFWbyBvZiB0aGlzLnRhYmxlRGF0YV9jdXJyZW50KSB7DQogICAgICAgIGlmIChmb3JtdWxhVm8ub3V0Rmxvd0NvZGUgJiYgIXRoaXMuXy5pbmNsdWRlcyh0aGlzLl8ubWFwKHRoaXMuZmlsdGVyc19vdXRGbG93X2N1cnJlbnQsICd2YWx1ZScpLCBmb3JtdWxhVm8ub3V0Rmxvd0NvZGUpKSB7DQogICAgICAgICAgdGhpcy5maWx0ZXJzX291dEZsb3dfY3VycmVudC5wdXNoKHsNCiAgICAgICAgICAgIHRleHQ6IGZvcm11bGFWby5vdXRGbG93Q29kZSArICc6JyArIGZvcm11bGFWby5vdXRGbG93TmFtZSwNCiAgICAgICAgICAgIHZhbHVlOiBmb3JtdWxhVm8ub3V0Rmxvd0NvZGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICB0YWJsZURhdGFfYnJpZWYoKSB7DQogICAgICAvLyDliJ3lp4vljJbkuqflk4HliJfnmoTnrZvpgInlmagNCiAgICAgIGZvciAoY29uc3QgZm9ybXVsYVZvIG9mIHRoaXMudGFibGVEYXRhX2JyaWVmKSB7DQogICAgICAgIGlmIChmb3JtdWxhVm8ucGRDb2RlICYmICF0aGlzLl8uaW5jbHVkZXModGhpcy5fLm1hcCh0aGlzLmZpbHRlcnNfcGRDb2RlLCAndmFsdWUnKSwgZm9ybXVsYVZvLnBkQ29kZSkpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnNfcGRDb2RlLnB1c2goew0KICAgICAgICAgICAgdGV4dDogZm9ybXVsYVZvLnBkQ29kZSArICc6JyArIGZvcm11bGFWby5wZE5hbWUsDQogICAgICAgICAgICB2YWx1ZTogZm9ybXVsYVZvLnBkQ29kZQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIOWIneWni+WMlui0puaIt+WIl+eahOetm+mAieWZqA0KICAgICAgZm9yIChjb25zdCBmb3JtdWxhVm8gb2YgdGhpcy50YWJsZURhdGFfYnJpZWYpIHsNCiAgICAgICAgaWYgKGZvcm11bGFWby5hY2NvdW50Q29kZSAmJiAhdGhpcy5fLmluY2x1ZGVzKHRoaXMuXy5tYXAodGhpcy5maWx0ZXJzX2FjY291bnRfYnJpZWYsICd2YWx1ZScpLCBmb3JtdWxhVm8uYWNjb3VudENvZGUpKSB7DQogICAgICAgICAgdGhpcy5maWx0ZXJzX2FjY291bnRfYnJpZWYucHVzaCh7DQogICAgICAgICAgICB0ZXh0OiBmb3JtdWxhVm8uYWNjb3VudENvZGUgKyAnOicgKyBmb3JtdWxhVm8uYWNjb3VudE5hbWUsDQogICAgICAgICAgICB2YWx1ZTogZm9ybXVsYVZvLmFjY291bnRDb2RlDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8g5Yid5aeL5YyW6LS555So5YiX55qE562b6YCJ5ZmoDQogICAgICBmb3IgKGNvbnN0IGZvcm11bGFWbyBvZiB0aGlzLnRhYmxlRGF0YV9icmllZikgew0KICAgICAgICBpZiAoZm9ybXVsYVZvLmFjY291bnRGZWVDb2RlICYmICF0aGlzLl8uaW5jbHVkZXModGhpcy5fLm1hcCh0aGlzLmZpbHRlcnNfYWNjb3VudEZlZV9icmllZiwgJ3ZhbHVlJyksIGZvcm11bGFWby5hY2NvdW50RmVlQ29kZSkpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnNfYWNjb3VudEZlZV9icmllZi5wdXNoKHsNCiAgICAgICAgICAgIHRleHQ6IGZvcm11bGFWby5hY2NvdW50RmVlQ29kZSArICc6JyArIGZvcm11bGFWby5hY2NvdW50RmVlTmFtZSwNCiAgICAgICAgICAgIHZhbHVlOiBmb3JtdWxhVm8uYWNjb3VudEZlZUNvZGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyDliJ3lp4vljJbotYTph5HmtYHlhaXliJfnmoTnrZvpgInlmagNCiAgICAgIGZvciAoY29uc3QgZm9ybXVsYVZvIG9mIHRoaXMudGFibGVEYXRhX2JyaWVmKSB7DQogICAgICAgIGlmIChmb3JtdWxhVm8uaW5GbG93Q29kZSAmJiAhdGhpcy5fLmluY2x1ZGVzKHRoaXMuXy5tYXAodGhpcy5maWx0ZXJzX2luRmxvd19icmllZiwgJ3ZhbHVlJyksIGZvcm11bGFWby5pbkZsb3dDb2RlKSkgew0KICAgICAgICAgIHRoaXMuZmlsdGVyc19pbkZsb3dfYnJpZWYucHVzaCh7DQogICAgICAgICAgICB0ZXh0OiBmb3JtdWxhVm8uaW5GbG93Q29kZSArICc6JyArIGZvcm11bGFWby5pbkZsb3dOYW1lLA0KICAgICAgICAgICAgdmFsdWU6IGZvcm11bGFWby5pbkZsb3dDb2RlDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8g5Yid5aeL5YyW6LWE6YeR5rWB5Ye65YiX55qE562b6YCJ5ZmoDQogICAgICBmb3IgKGNvbnN0IGZvcm11bGFWbyBvZiB0aGlzLnRhYmxlRGF0YV9icmllZikgew0KICAgICAgICBpZiAoZm9ybXVsYVZvLm91dEZsb3dDb2RlICYmICF0aGlzLl8uaW5jbHVkZXModGhpcy5fLm1hcCh0aGlzLmZpbHRlcnNfb3V0Rmxvd19icmllZiwgJ3ZhbHVlJyksIGZvcm11bGFWby5vdXRGbG93Q29kZSkpIHsNCiAgICAgICAgICB0aGlzLmZpbHRlcnNfb3V0Rmxvd19icmllZi5wdXNoKHsNCiAgICAgICAgICAgIHRleHQ6IGZvcm11bGFWby5vdXRGbG93Q29kZSArICc6JyArIGZvcm11bGFWby5vdXRGbG93TmFtZSwNCiAgICAgICAgICAgIHZhbHVlOiBmb3JtdWxhVm8ub3V0Rmxvd0NvZGUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYWNjQ2FsY1R5cGVDaGFuZ2VkKHZhbCkgew0KICAgICAgdGhpcy5mb3JtdWxhVHlwZV8gPSAnJw0KICAgICAgLy8g6YeN572u5p+l6K+i5Y+C5pWwDQogICAgICB0aGlzLnBhcmFtc19jdXJyZW50LnBkQnVzc0RldGFpbFR5cGUgPSAnJw0KICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZEJ1c3NJZCA9IHVuZGVmaW5lZA0KICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzRGV0YWlsVHlwZSA9ICcnDQogICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NJZCA9IHVuZGVmaW5lZA0KICAgICAgLy8g6YeN572u6YCJ5Lit55qE5Lia5Yqh6aG5DQogICAgICB0aGlzLnNlbGVjdGVkQWNjb3VudEZlZSA9IHt9DQogICAgICB0aGlzLnNlbGVjdGVkSW5PdXRGbG93ID0ge30NCiAgICAgIHRoaXMuc2VsZWN0ZWRDYXBGZWVWbyA9IHt9DQogICAgICBzd2l0Y2ggKHZhbCkgew0KICAgICAgICBjYXNlICcxJzoNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9hY2NvdW50RmVlID0gW10NCiAgICAgICAgICB0aGlzLnBhcmFtc19hY2NvdW50RmVlLmVxX3BkSW5mb0lkID0gdGhpcy5wcm9kdWN0LmlkDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2FjY291bnRGZWUucmVsb2FkKCkNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkQWNjb3VudEZlZSA9IHt9DQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAnMic6DQogICAgICAgICAgdGhpcy50YWJsZURhdGFfaW5PdXRGbG93ID0gW10NCiAgICAgICAgICB0aGlzLnBhcmFtc19pbk91dEZsb3cuZXFfcGRJbmZvSWQgPSB0aGlzLnByb2R1Y3QuaWQNCiAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfaW5PdXRGbG93LnJlbG9hZCgpDQogICAgICAgICAgdGhpcy5zZWxlY3RlZEluT3V0RmxvdyA9IHt9DQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAnMyc6DQogICAgICAgICAgdGhpcy50YWJsZURhdGFfY2FwRmVlVm8gPSBbXQ0KICAgICAgICAgIHRoaXMucGFyYW1zX2NhcEZlZVZvLmVxX3BkSW5mb0lkID0gdGhpcy5wcm9kdWN0LmlkDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2NhcEZlZVZvLnJlbG9hZCgpDQogICAgICAgICAgdGhpcy5zZWxlY3RlZENhcEZlZVZvID0ge30NCiAgICAgICAgICBicmVhaw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0sDQogICAgc2VsZWN0ZWRBY2NvdW50RmVlQ2hhbmdlZCgpIHsNCiAgICAgIHRoaXMuZm9ybXVsYVR5cGVfID0gJzMzJw0KICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZEJ1c3NEZXRhaWxUeXBlID0gJzMzJw0KICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZEJ1c3NJZCA9IHRoaXMuc2VsZWN0ZWRBY2NvdW50RmVlLmlkDQogICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NEZXRhaWxUeXBlID0gJzMzJw0KICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzSWQgPSB0aGlzLnNlbGVjdGVkQWNjb3VudEZlZS5pZA0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfY3VycmVudC5yZWxvYWQoKQ0KICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfYnJpZWYucmVsb2FkKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBzZWxlY3RlZEluT3V0Rmxvd0NoYW5nZWQoKSB7DQogICAgICB0aGlzLmZvcm11bGFUeXBlXyA9IHRoaXMuc2VsZWN0ZWRJbk91dEZsb3cucGRBY2NDYXBGbG93VHlwZSA9PT0gJ0knID8gJzM0JyA6ICczNScNCiAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRCdXNzRGV0YWlsVHlwZSA9IHRoaXMuc2VsZWN0ZWRJbk91dEZsb3cucGRBY2NDYXBGbG93VHlwZSA9PT0gJ0knID8gJzM0JyA6ICczNScNCiAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRCdXNzSWQgPSB0aGlzLnNlbGVjdGVkSW5PdXRGbG93LmlkDQogICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NEZXRhaWxUeXBlID0gdGhpcy5zZWxlY3RlZEluT3V0Rmxvdy5wZEFjY0NhcEZsb3dUeXBlID09PSAnSScgPyAnMzQnIDogJzM1Jw0KICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzSWQgPSB0aGlzLnNlbGVjdGVkSW5PdXRGbG93LmlkDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnJlbG9hZCgpDQogICAgICAgIHRoaXMuJHJlZnMucGFnZV9icmllZi5yZWxvYWQoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHNlbGVjdGVkQ2FwRmVlQ2hhbmdlZCgpIHsNCiAgICAgIHRoaXMuZm9ybXVsYVR5cGVfID0gdGhpcy5zZWxlY3RlZENhcEZlZVZvLnBkQWNjQ2FwRmxvd1R5cGUgPT09ICdJJyA/ICc2NicgOiAnNjcnDQogICAgICB0aGlzLnBhcmFtc19jdXJyZW50LnBkQnVzc0RldGFpbFR5cGUgPSB0aGlzLnNlbGVjdGVkQ2FwRmVlVm8ucGRBY2NDYXBGbG93VHlwZSA9PT0gJ0knID8gJzY2JyA6ICc2NycNCiAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRCdXNzSWQgPSB0aGlzLnNlbGVjdGVkQ2FwRmVlVm8uaWQNCiAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0RldGFpbFR5cGUgPSB0aGlzLnNlbGVjdGVkQ2FwRmVlVm8ucGRBY2NDYXBGbG93VHlwZSA9PT0gJ0knID8gJzY2JyA6ICc2NycNCiAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0lkID0gdGhpcy5zZWxlY3RlZENhcEZlZVZvLmlkDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnJlbG9hZCgpDQogICAgICAgIHRoaXMuJHJlZnMucGFnZV9icmllZi5yZWxvYWQoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJvd0NsaWNrX2FjY291bnRGZWUocm93LCBjb2x1bW4sIGV2ZW50KSB7DQogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7DQogICAgICAgIGlmIChyb3cuaWQgPT09IHRoaXMuc2VsZWN0ZWRBY2NvdW50RmVlLmlkKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZEFjY291bnRGZWUgPSB7fQ0KICAgICAgICAgIHRoaXMuZm9ybXVsYVR5cGVfID0gJycNCiAgICAgICAgICAvLyDph43nva7mn6Xor6Llj4LmlbANCiAgICAgICAgICB0aGlzLnBhcmFtc19jdXJyZW50LnBkQnVzc0RldGFpbFR5cGUgPSAnJw0KICAgICAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRCdXNzSWQgPSB1bmRlZmluZWQNCiAgICAgICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NEZXRhaWxUeXBlID0gJycNCiAgICAgICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NJZCA9IHVuZGVmaW5lZA0KICAgICAgICAgIC8vIOmHjee9ruihqOagvOaVsOaNrg0KICAgICAgICAgIHRoaXMudGFibGVEYXRhX2N1cnJlbnQgPSBbXQ0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnRvdGFsID0gMA0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnBhZ2UgPSAxDQogICAgICAgICAgdGhpcy50YWJsZURhdGFfYnJpZWYgPSBbXQ0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9icmllZi50b3RhbCA9IDANCiAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2VfYnJpZWYucGFnZSA9IDENCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgcm93Q2xpY2tfaW5PdXRGbG93KHJvdywgY29sdW1uLCBldmVudCkgew0KICAgICAgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gIklOUFVUIikgew0KICAgICAgICBpZiAocm93LmlkID09PSB0aGlzLnNlbGVjdGVkSW5PdXRGbG93LmlkKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZEluT3V0RmxvdyA9IHt9DQogICAgICAgICAgdGhpcy5mb3JtdWxhVHlwZV8gPSAnJw0KICAgICAgICAgIC8vIOmHjee9ruafpeivouWPguaVsA0KICAgICAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRCdXNzRGV0YWlsVHlwZSA9ICcnDQogICAgICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZEJ1c3NJZCA9IHVuZGVmaW5lZA0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0RldGFpbFR5cGUgPSAnJw0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0lkID0gdW5kZWZpbmVkDQogICAgICAgICAgLy8g6YeN572u6KGo5qC85pWw5o2uDQogICAgICAgICAgdGhpcy50YWJsZURhdGFfY3VycmVudCA9IFtdDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQudG90YWwgPSAwDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQucGFnZSA9IDENCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9icmllZiA9IFtdDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnRvdGFsID0gMA0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9icmllZi5wYWdlID0gMQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICByb3dDbGlja19jYXBGZWUocm93LCBjb2x1bW4sIGV2ZW50KSB7DQogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAiSU5QVVQiKSB7DQogICAgICAgIGlmIChyb3cuaWQgPT09IHRoaXMuc2VsZWN0ZWRDYXBGZWVWby5pZCkgew0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDYXBGZWVWbyA9IHt9DQogICAgICAgICAgdGhpcy5mb3JtdWxhVHlwZV8gPSAnJw0KICAgICAgICAgIC8vIOmHjee9ruafpeivouWPguaVsA0KICAgICAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucGRCdXNzRGV0YWlsVHlwZSA9ICcnDQogICAgICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZEJ1c3NJZCA9IHVuZGVmaW5lZA0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0RldGFpbFR5cGUgPSAnJw0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0lkID0gdW5kZWZpbmVkDQogICAgICAgICAgLy8g6YeN572u6KGo5qC85pWw5o2uDQogICAgICAgICAgdGhpcy50YWJsZURhdGFfY3VycmVudCA9IFtdDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQudG90YWwgPSAwDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQucGFnZSA9IDENCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YV9icmllZiA9IFtdDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnRvdGFsID0gMA0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9icmllZi5wYWdlID0gMQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBzaG93Rm9ybXVsYShyb3cpIHsNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcuZmxhZyA9ICcxJw0KICAgICAgdGhpcy5mb3JtdWxhVmlldy5wZXJmb3JtVHlwZSA9IHJvdy5wZXJmb3JtVHlwZQ0KICAgICAgdGhpcy5mb3JtdWxhVmlldy5ydWxlQ29kZSA9IHJvdy5wZENhbGNDb2RlDQogICAgICB0aGlzLmZvcm11bGFWaWV3LnZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBmb3JtdWxhVmlld0Nsb3NlZCgpIHsNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcudmlzaWJsZSA9IGZhbHNlDQogICAgICB0aGlzLnNlbGVjdGVkRm9ybXVsYSA9IHt9DQogICAgfSwNCiAgICBhc3luYyBpbml0UHJvZHVjdEluZm8oKSB7DQogICAgICBsZXQgcGR0ZW1wUGRJbmZvID0gdGhpcy5nZXRQZERhdGEoKQ0KICAgICAgaWYgKE9iamVjdC5rZXlzKHBkdGVtcFBkSW5mbykubGVuZ3RoID4gMCkgew0KICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMucHJvZHVjdCwgcGR0ZW1wUGRJbmZvKQ0KICAgICAgICB0aGlzLnBhcmFtc19icmllZi5wcm9kdWN0RGV0YWlsVHlwZSA9IHRoaXMucHJvZHVjdC5jVHlwZQ0KICAgICAgICB0aGlzLnBhcmFtc19icmllZi5wcm9kdWN0ID0gdGhpcy5wcm9kdWN0DQogICAgICAgIHRoaXMucGFyYW1zX2N1cnJlbnQucHJvZHVjdCA9IHRoaXMucHJvZHVjdA0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdydWxlLmludmFsaWRQcm9kdWN0SW5mbycpKQ0KICAgICAgfQ0KICAgIH0sDQogICAgaW5pdCgpIHsNCiAgICAgIHRoaXMucmVzZXRQYXJhbXMoKQ0KICAgICAgdGhpcy5zZWxlY3RlZEZvcm11bGEgPSB7fQ0KICAgICAgaWYgKHRoaXMucmV2aXNpb25NYXJrKSB7IC8vIOiuouatow0KICAgICAgICB0aGlzLnBhcmFtc19hY2NvdW50RmVlLmVxX3BkSW5mb0lkID0gdGhpcy5wcm9kdWN0LmlkDQogICAgICAgIHRoaXMuJHJlZnMucGFnZV9hY2NvdW50RmVlLnJlbG9hZCgpDQogICAgICB9IGVsc2UgeyAvLyDpnZ7orqLmraMNCiAgICAgICAgdGhpcy5idXNzT2JqZWN0XyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYnVzc09iamVjdCkNCiAgICAgICAgdGhpcy5mb3JtdWxhVHlwZV8gPSB0aGlzLmZvcm11bGFUeXBlDQogICAgICAgIC8vIOWIneWni+WMlui0puaIt+S4i+aLiemAiQ0KICAgICAgICB0aGlzLmluaXRQZEFjY291bnRPcHRpb24oKQ0KICAgICAgICAvLyDliJ3lp4vljJbkuJrliqHpobnkuIvmi4npgIkNCiAgICAgICAgdGhpcy5pbml0U2VsZWN0T3B0aW9uKCkNCiAgICAgICAgLy8g5Yid5aeL5YyW5bey5YWz6IGU5YWs5byP6KGo5qC85pWw5o2uDQogICAgICAgIHRoaXMuaW5pdFRhYmxlRGF0YSgpDQogICAgICB9DQogICAgfSwNCiAgICBpbml0UGRBY2NvdW50T3B0aW9uKCkgew0KICAgICAgZmluZEFsbEFjY291bnRCeVByb2R1Y3RJZCh0aGlzLnByb2R1Y3QuaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnBkdGVtcFBkQWNjTGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDliJ3lp4vljJbooajmoLzmn6Xor6INCiAgICBpbml0VGFibGVEYXRhKCkgew0KICAgICAgLy8g5Yy65YiG5YWs5byP57uG57G777yaMzMt6LSm5oi36LS555So44CBMzQt6LWE6YeR5rWB5YWl44CBMzUt6LWE6YeR5rWB5Ye644CBNjYt5rWB5YWl6LS555So44CBNjct5rWB5Ye66LS555SoDQogICAgICBzd2l0Y2ggKHRoaXMuZm9ybXVsYVR5cGUpIHsNCiAgICAgICAgY2FzZSAnMzMnOg0KICAgICAgICAgIC8vIOi0puaIt+i0ueeUqA0KICAgICAgICAgIHRoaXMucGFyYW1zLmFjY291bnRDb2RlID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY291bnRDb2RlDQogICAgICAgICAgdGhpcy5wYXJhbXMuYWNjb3VudE5hbWUgPSB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjb3VudE5hbWUNCiAgICAgICAgICB0aGlzLnBhcmFtcy5mb3JtdWxhVHlwZSA9ICczMycNCiAgICAgICAgICB0aGlzLnBhcmFtcy5wZEFjY291bnRGZWVJZCA9IHRoaXMuYnVzc09iamVjdF8uaWQNCiAgICAgICAgICB0aGlzLnBhcmFtcy5wZEFjY0ZlZU5hbWUgPSB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjRmVlTmFtZQ0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0RldGFpbFR5cGUgPSAnMzMnDQogICAgICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzSWQgPSB0aGlzLmJ1c3NPYmplY3RfLmlkDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAnMzQnOg0KICAgICAgICAgIC8vIOi1hOmHkea1geWFpQ0KICAgICAgICAgIHRoaXMucGFyYW1zLmFjY291bnRDb2RlID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY0NvZGUNCiAgICAgICAgICB0aGlzLnBhcmFtcy5hY2NvdW50TmFtZSA9IHRoaXMuYnVzc09iamVjdF8ucGRBY2NOYW1lDQogICAgICAgICAgdGhpcy5wYXJhbXMuZm9ybXVsYVR5cGUgPSAnMzQnDQogICAgICAgICAgdGhpcy5wYXJhbXMuaW5GbG93SWQgPSB0aGlzLmJ1c3NPYmplY3RfLmlkDQogICAgICAgICAgdGhpcy5wYXJhbXMuaW5GbG93TmFtZSA9IHRoaXMuYnVzc09iamVjdF8ucGRBY2NDYXBJdGVtTmFtZQ0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0RldGFpbFR5cGUgPSAnMzQnDQogICAgICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzSWQgPSB0aGlzLmJ1c3NPYmplY3RfLmlkDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAnMzUnOg0KICAgICAgICAgIC8vIOi1hOmHkea1geWHug0KICAgICAgICAgIHRoaXMucGFyYW1zLmFjY291bnRDb2RlID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY0NvZGUNCiAgICAgICAgICB0aGlzLnBhcmFtcy5hY2NvdW50TmFtZSA9IHRoaXMuYnVzc09iamVjdF8ucGRBY2NOYW1lDQogICAgICAgICAgdGhpcy5wYXJhbXMuZm9ybXVsYVR5cGUgPSAnMzUnDQogICAgICAgICAgdGhpcy5wYXJhbXMub3V0Rmxvd0lkID0gdGhpcy5idXNzT2JqZWN0Xy5pZA0KICAgICAgICAgIHRoaXMucGFyYW1zLm91dEZsb3dOYW1lID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY0NhcEl0ZW1OYW1lDQogICAgICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzRGV0YWlsVHlwZSA9ICczNScNCiAgICAgICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NJZCA9IHRoaXMuYnVzc09iamVjdF8uaWQNCiAgICAgICAgICBicmVhaw0KICAgICAgICBjYXNlICc2Nic6DQogICAgICAgICAgLy8g5rWB5YWl6LS555SoDQogICAgICAgICAgdGhpcy5wYXJhbXMuYWNjb3VudENvZGUgPSB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjQ29kZQ0KICAgICAgICAgIHRoaXMucGFyYW1zLmFjY291bnROYW1lID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY05hbWUNCiAgICAgICAgICB0aGlzLnBhcmFtcy5mb3JtdWxhVHlwZSA9ICc2NicNCiAgICAgICAgICB0aGlzLnBhcmFtcy5pbkZsb3dJZCA9IHRoaXMuYnVzc09iamVjdF8ucGRBY2NDYXBJZA0KICAgICAgICAgIHRoaXMucGFyYW1zLnBkQWNjb3VudEZlZUlkID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY0ZlZUlkDQogICAgICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzRGV0YWlsVHlwZSA9ICc2NicNCiAgICAgICAgICB0aGlzLnBhcmFtc19icmllZi5wZEJ1c3NJZCA9IHRoaXMuYnVzc09iamVjdF8uaWQNCiAgICAgICAgICBicmVhaw0KICAgICAgICBjYXNlICc2Nyc6DQogICAgICAgICAgLy8g5rWB5Ye66LS555SoDQogICAgICAgICAgdGhpcy5wYXJhbXMuYWNjb3VudENvZGUgPSB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjQ29kZQ0KICAgICAgICAgIHRoaXMucGFyYW1zLmFjY291bnROYW1lID0gdGhpcy5idXNzT2JqZWN0Xy5wZEFjY05hbWUNCiAgICAgICAgICB0aGlzLnBhcmFtcy5mb3JtdWxhVHlwZSA9ICc2NycNCiAgICAgICAgICB0aGlzLnBhcmFtcy5vdXRGbG93SWQgPSB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjQ2FwSWQNCiAgICAgICAgICB0aGlzLnBhcmFtcy5wZEFjY291bnRGZWVJZCA9IHRoaXMuYnVzc09iamVjdF8ucGRBY2NGZWVJZA0KICAgICAgICAgIHRoaXMucGFyYW1zX2JyaWVmLnBkQnVzc0RldGFpbFR5cGUgPSAnNjcnDQogICAgICAgICAgdGhpcy5wYXJhbXNfYnJpZWYucGRCdXNzSWQgPSB0aGlzLmJ1c3NPYmplY3RfLmlkDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2FjY291bnRGb3JtdWxhLmludmFsaWRDYWxjVHlwZScpKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgLy8g5Yid5aeL5YyW6KGo5qC85p+l6K+iDQogICAgICB0aGlzLnBhcmFtc19jdXJyZW50LnBkQnVzc0RldGFpbFR5cGUgPSB0aGlzLnBhcmFtcy5mb3JtdWxhVHlwZQ0KICAgICAgdGhpcy5wYXJhbXNfY3VycmVudC5wZEJ1c3NJZCA9IHRoaXMuYnVzc09iamVjdF8uaWQNCiAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnJlbG9hZCgpDQogICAgICB0aGlzLiRyZWZzLnBhZ2VfYnJpZWYucmVsb2FkKCkNCiAgICB9LA0KICAgIC8vIOagueaNruS4muWKoemhueS/oeaBr+WIneWni+WMluS4i+aLiemAiQ0KICAgIGluaXRTZWxlY3RPcHRpb24oKSB7DQogICAgICAvLyDliJ3lp4vljJbotKbmiLfotLnnlKjkuIvmi4npgIkNCiAgICAgIGZpbmRBbGxQZEFjY291bnRGZWVCeVBkQWNjSWQodGhpcy5mb3JtdWxhVHlwZSA9PT0gJzMzJyA/IHRoaXMuYnVzc09iamVjdF8ucGRBY2NvdW50SWQgOiB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjSWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnBkQWNjb3VudEZlZUxpc3QgPSByZXNwb25zZS5kYXRhDQogICAgICB9KQ0KICAgICAgLy8g5Yid5aeL5YyW6LWE6YeR5rWB5YWl5LiL5ouJ6YCJDQogICAgICBmaW5kQWxsSW5GbG93QnlQZEFjY0lkKHRoaXMuZm9ybXVsYVR5cGUgPT09ICczMycgPyB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjb3VudElkIDogdGhpcy5idXNzT2JqZWN0Xy5wZEFjY0lkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5pbkZsb3dMaXN0ID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgfSkNCiAgICAgIC8vIOWIneWni+WMlui1hOmHkea1geWHuuS4i+aLiemAiQ0KICAgICAgZmluZEFsbE91dEZsb3dCeVBkQWNjSWQodGhpcy5mb3JtdWxhVHlwZSA9PT0gJzMzJyA/IHRoaXMuYnVzc09iamVjdF8ucGRBY2NvdW50SWQgOiB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjSWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLm91dEZsb3dMaXN0ID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgfSkNCiAgICAgIC8vIOWIneWni+WMlua1geWFpea1geWHuui0ueeUqOS4i+aLiemAiQ0KICAgICAgZmluZEFsbFBkQWNjQ2FwRmVlQnlQZEFjY0lkKHRoaXMuZm9ybXVsYVR5cGUgPT09ICczMycgPyB0aGlzLmJ1c3NPYmplY3RfLnBkQWNjb3VudElkIDogdGhpcy5idXNzT2JqZWN0Xy5wZEFjY0lkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5wcm9kdWN0QWNjQ2FwRmVlTGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVGb3JtdWxhKHJvdykgew0KICAgICAgZGVsZXRlQW1vdW50Rm9ybXVsYShyb3cpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnc3VjY2Vzc01lc3NhZ2UuZGVsZXRlJykpDQogICAgICAgIGlmICh0aGlzLnJldmlzaW9uTWFyaykgew0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnJlbG9hZCgpDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kZW1pdCgnYnJpbmdJbkNhbGNDb2RlJywgcm93LnBkQnVzc0RldGFpbFR5cGUsIHJvdy5wZEJ1c3NJZCwgdW5kZWZpbmVkKQ0KICAgICAgICAgIHRoaXMuaW5pdCgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBiYWNrKCkgew0KICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlRGlhbG9nVmlzaWJsZV9mb3JtdWxhJywgZmFsc2UpDQogICAgfSwNCiAgICBicmluZ0luQ2FsY0NvZGUocGRCdXNzRGV0YWlsVHlwZSwgcGRCdXNzSWQsIGNhbGNDb2RlKSB7DQogICAgICB0aGlzLiRlbWl0KCdicmluZ0luQ2FsY0NvZGUnLCBwZEJ1c3NEZXRhaWxUeXBlLCBwZEJ1c3NJZCwgY2FsY0NvZGUpDQogICAgfSwNCiAgICBjaGFuZ2VEaWFsb2dWaXNpYmxlX2Zvcm11bGFTZWxlY3QoZmxhZykgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlLmFjY291bnRGZWVGb3JtdWxhU2VsZWN0ID0gZmxhZw0KICAgICAgaWYgKGZsYWcgPT09IGZhbHNlKSB7DQogICAgICAgIGlmICh0aGlzLnJldmlzaW9uTWFyaykgew0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnJlbG9hZCgpDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5pbml0KCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgcnVsZU1vZHVsZUNsb3NlZCgpIHsNCiAgICAgIHRoaXMuZm9ybXVsYVZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgfSwNCiAgICB0b0Zvcm11bGFTZWxlY3QoKSB7DQogICAgICBpZiAodGhpcy5yZXZpc2lvbk1hcmspIHsNCiAgICAgICAgdGhpcy5idXNzT2JqZWN0XyA9IHt9DQogICAgICAgIHN3aXRjaCAodGhpcy5mb3JtdWxhVHlwZV8pIHsNCiAgICAgICAgICBjYXNlICIzMyI6DQogICAgICAgICAgICB0aGlzLmJ1c3NPYmplY3RfID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZEFjY291bnRGZWUpDQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIGNhc2UgIjM0IjoNCiAgICAgICAgICBjYXNlICIzNSI6DQogICAgICAgICAgICB0aGlzLmJ1c3NPYmplY3RfID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZEluT3V0RmxvdykNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgY2FzZSAiNjYiOg0KICAgICAgICAgIGNhc2UgIjY3IjoNCiAgICAgICAgICAgIHRoaXMuYnVzc09iamVjdF8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkQ2FwRmVlVm8pDQogICAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5idXNzT2JqZWN0XykubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUuYWNjb3VudEZlZUZvcm11bGFTZWxlY3QgPSB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2FjY291bnRGb3JtdWxhLnBsZWFzZVNlbGVjdEJ1c3NPYmonKSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNlbGVjdGVkRm9ybXVsYUNoYW5nZWQoKSB7DQogICAgICB0aGlzLmZvcm11bGFWaWV3LmZsYWcgPSB0aGlzLnNlbGVjdGVkRm9ybXVsYS5ydWxlQXR0ciA9PT0gJzEnID8gJzEnIDogJzInDQogICAgICB0aGlzLmZvcm11bGFWaWV3LnBlcmZvcm1UeXBlID0gdGhpcy5zZWxlY3RlZEZvcm11bGEucGVyZm9ybVR5cGUNCiAgICAgIHRoaXMuZm9ybXVsYVZpZXcucnVsZUNvZGUgPSB0aGlzLnNlbGVjdGVkRm9ybXVsYS5wZENhbGNDb2RlDQogICAgICB0aGlzLmZvcm11bGFWaWV3LnZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICByZXNldFBhcmFtcygpIHsNCiAgICAgIHRoaXMucGFyYW1zID0gew0KICAgICAgICBhY2NvdW50Q29kZTogJycsDQogICAgICAgIGFjY291bnROYW1lOiAnJywNCiAgICAgICAgZm9ybXVsYVR5cGU6ICcnLA0KICAgICAgICBjYXBGZWVJbklkOiB1bmRlZmluZWQsDQogICAgICAgIGNhcEZlZU91dElkOiB1bmRlZmluZWQsDQogICAgICAgIGluRmxvd0lkOiB1bmRlZmluZWQsDQogICAgICAgIGluRmxvd05hbWU6ICcnLA0KICAgICAgICBvdXRGbG93SWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgb3V0Rmxvd05hbWU6ICcnLA0KICAgICAgICBwZEFjY291bnRGZWVJZDogdW5kZWZpbmVkLA0KICAgICAgICBwZEFjY0ZlZU5hbWU6ICcnDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVTZWxlY3RGb3JtdWxhKHJvdykgew0KICAgICAgaWYgKHRoaXMucmV2aXNpb25NYXJrKSB7DQogICAgICAgIHRoaXMuYnVzc09iamVjdF8gPSB7fQ0KICAgICAgICBzd2l0Y2ggKHRoaXMuZm9ybXVsYVR5cGVfKSB7DQogICAgICAgICAgY2FzZSAiMzMiOg0KICAgICAgICAgICAgdGhpcy5idXNzT2JqZWN0XyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2VsZWN0ZWRBY2NvdW50RmVlKQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICBjYXNlICIzNCI6DQogICAgICAgICAgY2FzZSAiMzUiOg0KICAgICAgICAgICAgdGhpcy5idXNzT2JqZWN0XyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2VsZWN0ZWRJbk91dEZsb3cpDQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIGNhc2UgIjY2IjoNCiAgICAgICAgICBjYXNlICI2NyI6DQogICAgICAgICAgICB0aGlzLmJ1c3NPYmplY3RfID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZENhcEZlZVZvKQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuYnVzc09iamVjdF8pLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHRoaXMuJHQoJ2FjY291bnRGb3JtdWxhLnBsZWFzZVNlbGVjdEJ1c3NPYmonKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgcHJvZHVjdDogdGhpcy5wcm9kdWN0LA0KICAgICAgICBmb3JtdWxhOiByb3csDQogICAgICAgIHBkQnVzc0RldGFpbFR5cGU6IHRoaXMuZm9ybXVsYVR5cGVfLA0KICAgICAgICBwZEJ1c3NJZDogdGhpcy5idXNzT2JqZWN0Xy5pZCwNCiAgICAgICAgbmVlZENoZWNraW5nOiB0cnVlDQogICAgICB9DQogICAgICBhc3NvY2lhdGVQZEFjY0NhbGModGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtKSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIGxldCBmbGFnID0gcmVzcG9uc2UuZGF0YS5mbGFnDQogICAgICAgIGxldCBwZHRlbXBQZENhbGMgPSByZXNwb25zZS5kYXRhLnBkdGVtcFBkQ2FsYw0KICAgICAgICBpZiAoZmxhZyA9PT0gdHJ1ZSkgew0KICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2Vzcyh0aGlzLiR0KCdhY2NvdW50RmVlRm9ybXVsYVNlbGVjdC5hc3NvY2lhdGVGb3JtdWxhU3VjY2VzcycpKQ0KICAgICAgICAgIHRoaXMuJHJlZnMucGFnZV9jdXJyZW50LnJlbG9hZCgpDQogICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgICAgICAgaWYgKCF0aGlzLnJldmlzaW9uTWFyaykgew0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnYnJpbmdJbkNhbGNDb2RlJywgcGR0ZW1wUGRDYWxjLnBkQnVzc0RldGFpbFR5cGUsIHBkdGVtcFBkQ2FsYy5wZEJ1c3NJZCwgcGR0ZW1wUGRDYWxjLnBkQ2FsY0NvZGUpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGNvbmZpcm0oU3RyaW5nKHRoaXMuJHQoJ2FjY291bnRGZWVGb3JtdWxhU2VsZWN0LmNvbmZpcm1fb3ZlcndyaXRlX2Zvcm11bGEnKSksIFN0cmluZyh0aGlzLiR0KCdjb25maXJtTWVzc2FnZS50aXAnKSksIHsNCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBTdHJpbmcodGhpcy4kdCgnY29uZmlybU1lc3NhZ2UuY29uZmlybScpKSwNCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IFN0cmluZyh0aGlzLiR0KCdjb25maXJtTWVzc2FnZS5jYW5jZWwnKSksDQogICAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHBhcmFtLm5lZWRDaGVja2luZyA9IGZhbHNlDQogICAgICAgICAgICBhc3NvY2lhdGVQZEFjY0NhbGModGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtKSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIGxldCBwZHRlbXBQZENhbGMgPSByZXNwb25zZS5kYXRhLnBkdGVtcFBkQ2FsYw0KICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnYWNjb3VudEZlZUZvcm11bGFTZWxlY3QuYXNzb2NpYXRlRm9ybXVsYVN1Y2Nlc3MnKSkNCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2N1cnJlbnQucmVsb2FkKCkNCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdlX2JyaWVmLnJlbG9hZCgpDQogICAgICAgICAgICAgIGlmICghdGhpcy5yZXZpc2lvbk1hcmspIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdicmluZ0luQ2FsY0NvZGUnLCBwZHRlbXBQZENhbGMucGRCdXNzRGV0YWlsVHlwZSwgcGR0ZW1wUGRDYWxjLnBkQnVzc0lkLCBwZHRlbXBQZENhbGMucGRDYWxjQ29kZSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLm1lc3NhZ2VJbmZvKHRoaXMuJHQoJ2FjY291bnRGZWVGb3JtdWxhU2VsZWN0LmNhbmNlbGVkJykpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHRvQWRkRm9ybXVsYSgpIHsNCiAgICAgIGlmICh0aGlzLnJldmlzaW9uTWFyaykgeyAvLyDorqLmraMNCiAgICAgICAgaWYgKCF0aGlzLmZvcm11bGFUeXBlXykgew0KICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgnYWNjb3VudEZvcm11bGEucGxlYXNlU2VsZWN0QnVzc09iaicpKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICB9IGVsc2UgeyAvLyDpnZ7orqLmraMNCiAgICAgICAgaWYgKCF0aGlzLnBhcmFtcy5mb3JtdWxhVHlwZSkgew0KICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IodGhpcy4kdCgnYWNjb3VudEZvcm11bGEucGxlYXNlQXBwb2ludENhbGNEZXRhaWxUeXBlJykpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICBwZEJ1c3NUeXBlOiAnNCcsDQogICAgICAgIHBkQnVzc0RldGFpbFR5cGU6IHRoaXMucmV2aXNpb25NYXJrID8gdGhpcy5mb3JtdWxhVHlwZV8gOiB0aGlzLnBhcmFtcy5mb3JtdWxhVHlwZQ0KICAgICAgfQ0KICAgICAgZ2V0Q2FsY0NvZGUodGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtKSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuYXR0cmlidXRlT2JqID0gew0KICAgICAgICAgIGNvZGU6IHJlc3BvbnNlLmRhdGEsDQogICAgICAgICAgcnVsZUJ1c3NNb2R1OiAnNCcsDQogICAgICAgICAgcnVsZUJ1c3NNb2R1RGV0YTogcGFyYW0ucGRCdXNzRGV0YWlsVHlwZSwNCiAgICAgICAgICBydWxlVHlwZTogJzInLA0KICAgICAgICAgIHBkVHlwZTogJzEnLA0KICAgICAgICAgIHJpc2tUeXBlOiB0aGlzLnByb2R1Y3QuYlR5cGUsDQogICAgICAgICAgcmlza0RldGFpbDogdGhpcy5wcm9kdWN0LmNUeXBlLA0KICAgICAgICAgIHBkQ29kZTogdGhpcy5wcm9kdWN0LnBkQ29kZSwNCiAgICAgICAgICBwZEVkaXRpb246IHRoaXMucHJvZHVjdC5wZEVkaXRpb24NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZvcm11bGFWaXNpYmxlID0gdHJ1ZQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/basicinfo/account-fee-formula/accountFeeFormula","sourcesContent":["<template>\r\n  <cus-wraper>\r\n\r\n    <div v-if=\"!revisionMark\">\r\n      <cus-page-title-back :isDialog=\"true\" :label=\"$t('route.account_fee_formula')\" @backTo=\"back\"/>\r\n      <cus-form-title :label=\"$t('accountFormula.account_new_formula')\"/>\r\n    </div>\r\n\r\n    <!-- 业务项信息 -->\r\n    <el-form v-if=\"!revisionMark\" ref=\"accountFormula\" :model=\"params\" disabled label-width=\"auto\">\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('accountFormula.account')\">\r\n            <el-select v-model=\"params.accountCode\" clearable filterable>\r\n              <el-option v-for=\"account in pdtempPdAccList\" :key=\"account.id\"\r\n                         :label=\"account.pdAccCode + ':' + account.pdAccName\"\r\n                         :value=\"account.pdAccCode\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('i18nView.formulaDetial')\">\r\n            <cus-select v-model=\"params.formulaType\" codetype=\"ruleBusinessDetailClass\" disabled\r\n                        filter=\"1$33$34$35$66$67\"></cus-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('accountFormula.accountFees')\">\r\n            <el-select v-model=\"params.pdAccountFeeId\" clearable filterable>\r\n              <el-option v-for=\"pdAccountFee in pdAccountFeeList\" :key=\"pdAccountFee.id\"\r\n                         :label=\"pdAccountFee.pdAccFeeCode + ':' + pdAccountFee.pdAccFeeName\"\r\n                         :value=\"pdAccountFee.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('accountFormula.pdAccCapInf')\">\r\n            <el-select v-model=\"params.inFlowId\" clearable filterable>\r\n              <el-option v-for=\"inFlow in inFlowList\" :key=\"inFlow.id\"\r\n                         :label=\"inFlow.pdAccCapItemCode + ':' + inFlow.pdAccCapItemName\"\r\n                         :value=\"inFlow.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item :label=\"$t('accountFormula.pdAccCapOutf')\">\r\n            <el-select v-model=\"params.outFlowId\" clearable filterable>\r\n              <el-option v-for=\"outFlow in outFlowList\" :key=\"outFlow.id\"\r\n                         :label=\"outFlow.pdAccCapItemCode + ':' + outFlow.pdAccCapItemName\"\r\n                         :value=\"outFlow.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <div v-if=\"revisionMark\">\r\n      <el-form label-width=\"auto\">\r\n        <el-row :gutter=\"10\" type=\"flex\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item :label=\"$t('accountFormula.accCalcType')\">\r\n              <el-radio-group v-model=\"accCalcType\" @change=\"accCalcTypeChanged\">\r\n                <el-radio label=\"1\">{{ $t('accountFormula.accountFeeCalc') }}</el-radio>\r\n                <el-radio label=\"2\">{{ $t('accountFormula.accountCapCalc') }}</el-radio>\r\n                <el-radio label=\"3\">{{ $t('accountFormula.accountCapFeeCalc') }}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <!-- 账户费用 -->\r\n      <div v-show=\"accCalcType === '1'\">\r\n        <cus-table-title :label=\"$t('accountFormula.accountFees')\"/>\r\n        <el-table :data=\"tableData_accountFee\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                  max-height=\"300\" size=\"mini\" @row-click=\"rowClick_accountFee\">\r\n          <el-table-column :label=\"$t('table.select')\" width=\"50\">\r\n            <template slot-scope=\"scope\">\r\n              <el-radio-group v-model=\"selectedAccountFee\" @change=\"selectedAccountFeeChanged\">\r\n                <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n              </el-radio-group>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n            <template v-slot=\"scope\">\r\n              {{ initTableIndex('page_accountFee', scope.$index) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccFeeCode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeCode\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccFeeName')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeName\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccItemType')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccItemType\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccItemType | filter_pdAccItemType }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccFeeOrder')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeOrder\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccFeeCalcMode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeCalcMode\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccFeeCalcMode | filter_pdAccFeeCalcMode }}\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <cus-pagination ref=\"page_accountFee\" v-model=\"tableData_accountFee\" :autoBuild=\"false\" :pageSize=\"5\"\r\n                        :params=\"params_accountFee\" url=\"/pdtemp-pd-acc-formula/base/getAllAccountFeeByPdInfoId\"/>\r\n      </div>\r\n      <!-- 流入流出 -->\r\n      <div v-show=\"accCalcType === '2'\">\r\n        <cus-table-title :label=\"$t('accountFormula.accountInOutFlowItem')\"/>\r\n        <el-table :data=\"tableData_inOutFlow\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                  max-height=\"300\" size=\"mini\" @row-click=\"rowClick_inOutFlow\">\r\n          <el-table-column :label=\"$t('table.select')\" width=\"50\">\r\n            <template slot-scope=\"scope\">\r\n              <el-radio-group v-model=\"selectedInOutFlow\" @change=\"selectedInOutFlowChanged\">\r\n                <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n              </el-radio-group>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n            <template v-slot=\"scope\">\r\n              {{ initTableIndex('page_inOutFlow', scope.$index) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapFlowType')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapFlowType\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccCapFlowType | filter_pdAccCapFlowType }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapInOutMode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapInOutMode\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccCapInOutMode | filter_pdAccCapInOutMode }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapItemType')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapItemType\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccCapItemType | filter_pdAccCapItemType }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapItemCode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapItemCode\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapItemName')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapItemName\"></el-table-column>\r\n        </el-table>\r\n        <cus-pagination ref=\"page_inOutFlow\" v-model=\"tableData_inOutFlow\" :autoBuild=\"false\" :pageSize=\"5\"\r\n                        :params=\"params_inOutFlow\" url=\"/pdtemp-pd-acc-formula/base/getAllInOutFlowByPdInfoId\"/>\r\n      </div>\r\n      <!-- 流入流出费用 -->\r\n      <div v-show=\"accCalcType === '3'\">\r\n        <cus-table-title :label=\"$t('accountFormula.accountInOutFlowFee')\"/>\r\n        <el-table :data=\"tableData_capFeeVo\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                  max-height=\"300\" size=\"mini\" @row-click=\"rowClick_capFee\">\r\n          <el-table-column :label=\"$t('table.select')\" width=\"50\">\r\n            <template slot-scope=\"scope\">\r\n              <el-radio-group v-model=\"selectedCapFeeVo\" @change=\"selectedCapFeeChanged\">\r\n                <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n              </el-radio-group>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n            <template v-slot=\"scope\">\r\n              {{ initTableIndex('page_capFeeVo', scope.$index) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapFlowType')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapFlowType\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccCapFlowType | filter_pdAccCapFlowType }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapInOutMode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapInOutMode\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccCapInOutMode | filter_pdAccCapInOutMode }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccCapItemType')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapItemType\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.pdAccCapItemType | filter_pdAccCapItemType }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.inOutFlowItemCode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccCapItemCode\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.accountFeeCode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeCode\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.accountFeeName')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeName\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.pdAccFeeDeduOrder')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdAccFeeDeduOrder\"></el-table-column>\r\n          <el-table-column :label=\"$t('accountFormula.feeCalcCode')\" align=\"center\" min-width=\"200\"\r\n                           prop=\"pdCalcCode\"></el-table-column>\r\n        </el-table>\r\n        <cus-pagination ref=\"page_capFeeVo\" v-model=\"tableData_capFeeVo\" :autoBuild=\"false\" :pageSize=\"5\"\r\n                        :params=\"params_capFeeVo\" url=\"/pdtemp-pd-acc-formula/base/getAllCapFeeVoByPdInfoId\"/>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"!revisionMark || revisionMark && (Object.keys(selectedAccountFee).length > 0 || Object.keys(selectedInOutFlow).length > 0 || Object.keys(selectedCapFeeVo).length > 0)\">\r\n      <!-- 已选择公式 -->\r\n      <cus-form-title :first=\"true\" :label=\"$t('accountFormula.pdAmountFormulaSelected')\"></cus-form-title>\r\n      <cus-table-title :label=\"$t('accountFormula.pdAmountFormula')\"/>\r\n      <el-table :data=\"tableData_current\" border element-loading-text=\"Loading\" fit highlight-current-row\r\n                max-height=\"300\" size=\"mini\">\r\n        <el-table-column :label=\"$t('table.select')\" align=\"center\" width=\"50\">\r\n          <template slot-scope=\"scope\">\r\n            <el-radio-group v-model=\"selectedFormula\" @change=\"selectedFormulaChanged\">\r\n              <el-radio :label=\"scope.row\">{{ '' }}</el-radio>\r\n            </el-radio-group>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n          <template v-slot=\"scope\">\r\n            {{ initTableIndex('page_current', scope.$index) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.detail')\" align=\"center\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"small\" type=\"text\" @click=\"showFormula(scope.row)\">>></el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.formulaDetial')\" align=\"center\" min-width=\"200\" prop=\"pdBussDetailType\"\r\n                         sortable>\r\n          <template v-slot=\"scope\">\r\n            <span>{{ scope.row.pdBussDetailType | filter_formulaType }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_account_current\"\r\n                         :label=\"$t('accountFormula.accountObj')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"accountCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.accountCode + ':' + scope.row.accountName }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_accountFee_current\"\r\n                         :label=\"$t('accountFormula.pdAccCapFee')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"accountFeeCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.accountFeeCode\">{{ scope.row.accountFeeCode + ':' + scope.row.accountFeeName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_inFlow_current\"\r\n                         :label=\"$t('accountFormula.pdAccCapInf')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"inFlowCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.inFlowCode\">{{ scope.row.inFlowCode + ':' + scope.row.inFlowName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_outFlow_current\"\r\n                         :label=\"$t('accountFormula.pdAccCapOutf')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"outFlowCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.outFlowCode\">{{ scope.row.outFlowCode + ':' + scope.row.outFlowName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('accountFormula.pdCalcCode')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdCalcCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('accountFormula.pdCalcDesc')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdCalcDesc\"></el-table-column>\r\n        <el-table-column :label=\"$t('accountFormula.rulesAttr')\" align=\"center\" min-width=\"200\">\r\n          <template v-slot=\"scope\">\r\n            {{\r\n              scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n            }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.actions')\" align=\"center\" fixed=\"right\" width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            <cus-popover v-auth=\"'pdtemp-pd-acc-formula:delete'\" :content=\"$t('confirmMessage.delete')\"\r\n                         icon=\"el-icon-delete\" size=\"mini\" type=\"danger\"\r\n                         @confirm=\"deleteFormula(scope.row)\"></cus-popover>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <cus-pagination ref=\"page_current\" v-model=\"tableData_current\" :autoBuild=\"false\" :pageSize=\"5\"\r\n                      :params=\"params_current\" url=\"/pdtemp-pd-acc-formula/base/allFormula/productId\"/>\r\n\r\n      <!-- 可选择公式 -->\r\n      <cus-form-title :first=\"true\" :label=\"$t('accountFormula.pdAccFormulaSelect')\"></cus-form-title>\r\n\r\n      <el-row style=\"text-align: right\">\r\n        <el-button icon=\"el-icon-connection\" size=\"small\" type=\"primary\" @click=\"toFormulaSelect\">\r\n          {{ $t('i18nView.moreCalc') }}\r\n        </el-button>\r\n        <el-button icon=\"el-icon-circle-plus el-icon--left\" size=\"small\" type=\"primary\" @click=\"toAddFormula\">\r\n          {{ $t('rule.toAddFormula') }}\r\n        </el-button>\r\n      </el-row>\r\n\r\n      <cus-table-title :label=\"$t('accountFormula.accountFormula')\"/>\r\n      <el-table :data=\"tableData_brief\" border element-loading-text=\"Loading\" fit highlight-current-row max-height=\"300\"\r\n                size=\"mini\">\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n          <template v-slot=\"scope\">\r\n            {{ initTableIndex('page_brief', scope.$index) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.detail')\" align=\"center\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"small\" type=\"text\" @click=\"showFormula(scope.row)\">>></el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_pdCode\"\r\n                         :label=\"$t('accountFormula.product')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"pdCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.pdCode ? scope.row.pdCode + ':' + scope.row.pdName : '' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_account_brief\"\r\n                         :label=\"$t('accountFormula.accountObj')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"accountCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.accountCode\">{{ scope.row.accountCode + ':' + scope.row.accountName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.formulaDetial')\" align=\"center\" min-width=\"200\" prop=\"pdBussDetailType\"\r\n                         sortable>\r\n          <template v-slot=\"scope\">\r\n            <span>{{ scope.row.pdBussDetailType | filter_formulaType }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_accountFee_brief\"\r\n                         :label=\"$t('accountFormula.pdAccCapFee')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"accountFeeCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.accountFeeCode\">{{ scope.row.accountFeeCode + ':' + scope.row.accountFeeName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_inFlow_brief\"\r\n                         :label=\"$t('accountFormula.pdAccCapInf')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"inFlowCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.inFlowCode\">{{ scope.row.inFlowCode + ':' + scope.row.inFlowName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :filter-method=\"filters_method\" :filters=\"filters_outFlow_brief\"\r\n                         :label=\"$t('accountFormula.pdAccCapOutf')\"\r\n                         align=\"center\"\r\n                         min-width=\"200\" prop=\"outFlowCode\" sortable>\r\n          <template v-slot=\"scope\">\r\n            <span v-if=\"scope.row.outFlowCode\">{{ scope.row.outFlowCode + ':' + scope.row.outFlowName }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('accountFormula.pdCalcCode')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdCalcCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('accountFormula.pdCalcDesc')\" align=\"center\" min-width=\"200\"\r\n                         prop=\"pdCalcDesc\"></el-table-column>\r\n        <el-table-column :label=\"$t('accountFormula.rulesAttr')\" align=\"center\" min-width=\"200\">\r\n          <template v-slot=\"scope\">\r\n            {{\r\n              scope.row.ruleAttr === '1' ? $t('rule.general') : (scope.row.ruleAttr === '2' ? $t('rule.individual') : '')\r\n            }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.actions')\" align=\"center\" fixed=\"right\" width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button v-auth=\"'pdtemp-pd-acc-formula-select:associate'\" icon=\"el-icon-paperclip\" size=\"mini\"\r\n                       type=\"primary\" @click=\"handleSelectFormula(scope.row)\">\r\n              {{ $t('form.select') }}\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <cus-pagination ref=\"page_brief\" v-model=\"tableData_brief\" :autoBuild=\"false\" :pageSize=\"5\" :params=\"params_brief\"\r\n                      url=\"/pdtemp-pd-acc-formula/base/briefFormula\"/>\r\n    </div>\r\n\r\n    <!-- 弹窗（账户公式选择） -->\r\n    <el-dialog v-if=\"dialogVisible.accountFeeFormulaSelect\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :close-on-press-escape=\"false\" :visible.sync=\"dialogVisible.accountFeeFormulaSelect\"\r\n               append-to-body center width=\"75%\" @close=\"dialogVisible.accountFeeFormulaSelect = false\">\r\n      <accountFeeFormulaSelect :bussObject=\"bussObject_\" :formulaType=\"formulaType_\" :revisionMark=\"revisionMark\"\r\n                               @bringInCalcCode=\"bringInCalcCode\"\r\n                               @changeDialogVisible_formulaSelect=\"changeDialogVisible_formulaSelect\"></accountFeeFormulaSelect>\r\n    </el-dialog>\r\n\r\n    <!-- 规则引擎公式定义弹窗 -->\r\n    <cus-rule-definition :attributeObj=\"attributeObj\" :ruleDefinitionClosed=\"ruleModuleClosed\"\r\n                         :visible=\"formulaVisible\"></cus-rule-definition>\r\n\r\n    <!-- 公式查看和决策树编辑弹窗 -->\r\n    <cus-rule-modify :flag=\"formulaView.flag\" :performType=\"formulaView.performType\" :ruleCode=\"formulaView.ruleCode\"\r\n                     :ruleModifyClosed=\"formulaViewClosed\" :ruleType=\"'2'\"\r\n                     :visible=\"formulaView.visible\"></cus-rule-modify>\r\n\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\nimport accountFeeFormulaSelect from \"@/views/basicinfo/account-fee-formula/accountFeeFormulaSelect\"\r\nimport {\r\n  deleteAmountFormula,\r\n  findAllAccountByProductId,\r\n  findAllInFlowByPdAccId,\r\n  findAllOutFlowByPdAccId,\r\n  findAllPdAccCapFeeByPdAccId,\r\n  findAllPdAccountFeeByPdAccId,\r\n} from \"@/api/basicinfo/accountFeeFormula\"\r\nimport ruleCalculatorMake from '@/views/ibrms/ruleManagement/ruleCalculatorMake/index'\r\nimport {associatePdAccCalc, getCalcCode} from \"@/api/basicinfo/accountFeeFormulaSelect\"\r\n\r\nlet _this\r\n\r\nexport default {\r\n  name: 'accountFormula',\r\n  filters: {\r\n    filter_formulaType(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    },\r\n    filter_pdAccItemType(code) {\r\n      return _this.getCodeName('costprotype', code)\r\n    },\r\n    filter_pdAccCapInOutMode(code) {\r\n      return _this.getCodeName('pdAccInfMode', code)\r\n    },\r\n    filter_pdAccCapFlowType(code) {\r\n      return _this.getCodeName('pdAccCapFlowType', code)\r\n    },\r\n    filter_pdAccFeeCalcMode(code) {\r\n      return _this.getCodeName('costcalway', code)\r\n    },\r\n    filter_pdAccCapItemType(code) {\r\n      return _this.getCodeName('pdAccCapInfType', code)\r\n    }\r\n  },\r\n  components: {accountFeeFormulaSelect, ruleCalculatorMake},\r\n  props: {\r\n    bussObject: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => {\r\n        return {}\r\n      }\r\n    },\r\n    formulaType: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    revisionMark: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    _this = this\r\n    return {\r\n      selectedAccountFee: {},\r\n      selectedInOutFlow: {},\r\n      selectedCapFeeVo: {},\r\n      attributeObj: {},\r\n      formulaVisible: false,\r\n      formulaView: {\r\n        flag: '',\r\n        ruleCode: '',\r\n        performType: '',\r\n        visible: false\r\n      },\r\n      bussObject_: {},\r\n      formulaType_: '',\r\n      // 产品信息\r\n      product: {\r\n        id: undefined,\r\n        bType: '',\r\n        cType: '',\r\n        pdCode: '',\r\n        pdEdition: '',\r\n        pdVerId: undefined,\r\n        pdSalechnl: '',\r\n        pdName: '',\r\n        pdShortname: '',\r\n        pdEnName: '',\r\n        pdShortEnName: '',\r\n        operator: '',\r\n        pdApplDate: undefined,\r\n        pdProcessId: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      pdtempPdAccList: [],\r\n      productAccCapFeeList: [],\r\n      pdAccountFeeList: [],\r\n      inFlowList: [],\r\n      outFlowList: [],\r\n      accCalcType: '1',\r\n      params: {\r\n        accountCode: '',\r\n        accountName: '',\r\n        formulaType: '',\r\n        capFeeInId: undefined,\r\n        capFeeOutId: undefined,\r\n        inFlowId: undefined,\r\n        inFlowName: '',\r\n        outFlowId: undefined,\r\n        outFlowName: '',\r\n        pdAccountFeeId: undefined,\r\n        pdAccFeeName: ''\r\n      },\r\n      selectedFormula: {},\r\n      params_accountFee: {\r\n        eq_pdInfoId: undefined\r\n      },\r\n      params_inOutFlow: {\r\n        eq_pdInfoId: undefined\r\n      },\r\n      params_capFeeVo: {\r\n        eq_pdInfoId: undefined\r\n      },\r\n      params_current: {\r\n        product: undefined,\r\n        pdBussDetailType: '',\r\n        pdBussId: undefined\r\n      },\r\n      params_brief: {\r\n        product: undefined,\r\n        pdBussId: undefined,\r\n        productDetailType: '',\r\n        pdBussDetailType: ''\r\n      },\r\n      tableData_current: [],\r\n      tableData_brief: [],\r\n      tableData_accountFee: [],\r\n      tableData_inOutFlow: [],\r\n      tableData_capFeeVo: [],\r\n      dialogVisible: {\r\n        accountFeeFormulaSelect: false\r\n      },\r\n      filters_pdCode: [],\r\n      filters_account_current: [],\r\n      filters_account_brief: [],\r\n      filters_accountFee_current: [],\r\n      filters_accountFee_brief: [],\r\n      filters_inFlow_current: [],\r\n      filters_inFlow_brief: [],\r\n      filters_outFlow_current: [],\r\n      filters_outFlow_brief: []\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.initProductInfo()\r\n    this.init()\r\n  },\r\n  created() {\r\n  },\r\n  watch: {\r\n    tableData_current() {\r\n      // 初始化账户列的筛选器\r\n      for (const formulaVo of this.tableData_current) {\r\n        if (formulaVo.accountCode && !this._.includes(this._.map(this.filters_account_current, 'value'), formulaVo.accountCode)) {\r\n          this.filters_account_current.push({\r\n            text: formulaVo.accountCode + ':' + formulaVo.accountName,\r\n            value: formulaVo.accountCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化费用列的筛选器\r\n      for (const formulaVo of this.tableData_current) {\r\n        if (formulaVo.accountFeeCode && !this._.includes(this._.map(this.filters_accountFee_current, 'value'), formulaVo.accountFeeCode)) {\r\n          this.filters_accountFee_current.push({\r\n            text: formulaVo.accountFeeCode + ':' + formulaVo.accountFeeName,\r\n            value: formulaVo.accountFeeCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化资金流入列的筛选器\r\n      for (const formulaVo of this.tableData_current) {\r\n        if (formulaVo.inFlowCode && !this._.includes(this._.map(this.filters_inFlow_current, 'value'), formulaVo.inFlowCode)) {\r\n          this.filters_inFlow_current.push({\r\n            text: formulaVo.inFlowCode + ':' + formulaVo.inFlowName,\r\n            value: formulaVo.inFlowCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化资金流出列的筛选器\r\n      for (const formulaVo of this.tableData_current) {\r\n        if (formulaVo.outFlowCode && !this._.includes(this._.map(this.filters_outFlow_current, 'value'), formulaVo.outFlowCode)) {\r\n          this.filters_outFlow_current.push({\r\n            text: formulaVo.outFlowCode + ':' + formulaVo.outFlowName,\r\n            value: formulaVo.outFlowCode\r\n          })\r\n        }\r\n      }\r\n    },\r\n    tableData_brief() {\r\n      // 初始化产品列的筛选器\r\n      for (const formulaVo of this.tableData_brief) {\r\n        if (formulaVo.pdCode && !this._.includes(this._.map(this.filters_pdCode, 'value'), formulaVo.pdCode)) {\r\n          this.filters_pdCode.push({\r\n            text: formulaVo.pdCode + ':' + formulaVo.pdName,\r\n            value: formulaVo.pdCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化账户列的筛选器\r\n      for (const formulaVo of this.tableData_brief) {\r\n        if (formulaVo.accountCode && !this._.includes(this._.map(this.filters_account_brief, 'value'), formulaVo.accountCode)) {\r\n          this.filters_account_brief.push({\r\n            text: formulaVo.accountCode + ':' + formulaVo.accountName,\r\n            value: formulaVo.accountCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化费用列的筛选器\r\n      for (const formulaVo of this.tableData_brief) {\r\n        if (formulaVo.accountFeeCode && !this._.includes(this._.map(this.filters_accountFee_brief, 'value'), formulaVo.accountFeeCode)) {\r\n          this.filters_accountFee_brief.push({\r\n            text: formulaVo.accountFeeCode + ':' + formulaVo.accountFeeName,\r\n            value: formulaVo.accountFeeCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化资金流入列的筛选器\r\n      for (const formulaVo of this.tableData_brief) {\r\n        if (formulaVo.inFlowCode && !this._.includes(this._.map(this.filters_inFlow_brief, 'value'), formulaVo.inFlowCode)) {\r\n          this.filters_inFlow_brief.push({\r\n            text: formulaVo.inFlowCode + ':' + formulaVo.inFlowName,\r\n            value: formulaVo.inFlowCode\r\n          })\r\n        }\r\n      }\r\n      // 初始化资金流出列的筛选器\r\n      for (const formulaVo of this.tableData_brief) {\r\n        if (formulaVo.outFlowCode && !this._.includes(this._.map(this.filters_outFlow_brief, 'value'), formulaVo.outFlowCode)) {\r\n          this.filters_outFlow_brief.push({\r\n            text: formulaVo.outFlowCode + ':' + formulaVo.outFlowName,\r\n            value: formulaVo.outFlowCode\r\n          })\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    accCalcTypeChanged(val) {\r\n      this.formulaType_ = ''\r\n      // 重置查询参数\r\n      this.params_current.pdBussDetailType = ''\r\n      this.params_current.pdBussId = undefined\r\n      this.params_brief.pdBussDetailType = ''\r\n      this.params_brief.pdBussId = undefined\r\n      // 重置选中的业务项\r\n      this.selectedAccountFee = {}\r\n      this.selectedInOutFlow = {}\r\n      this.selectedCapFeeVo = {}\r\n      switch (val) {\r\n        case '1':\r\n          this.tableData_accountFee = []\r\n          this.params_accountFee.eq_pdInfoId = this.product.id\r\n          this.$refs.page_accountFee.reload()\r\n          this.selectedAccountFee = {}\r\n          break\r\n        case '2':\r\n          this.tableData_inOutFlow = []\r\n          this.params_inOutFlow.eq_pdInfoId = this.product.id\r\n          this.$refs.page_inOutFlow.reload()\r\n          this.selectedInOutFlow = {}\r\n          break\r\n        case '3':\r\n          this.tableData_capFeeVo = []\r\n          this.params_capFeeVo.eq_pdInfoId = this.product.id\r\n          this.$refs.page_capFeeVo.reload()\r\n          this.selectedCapFeeVo = {}\r\n          break\r\n        default:\r\n          return\r\n      }\r\n    },\r\n    selectedAccountFeeChanged() {\r\n      this.formulaType_ = '33'\r\n      this.params_current.pdBussDetailType = '33'\r\n      this.params_current.pdBussId = this.selectedAccountFee.id\r\n      this.params_brief.pdBussDetailType = '33'\r\n      this.params_brief.pdBussId = this.selectedAccountFee.id\r\n      this.$nextTick(() => {\r\n        this.$refs.page_current.reload()\r\n        this.$refs.page_brief.reload()\r\n      })\r\n    },\r\n    selectedInOutFlowChanged() {\r\n      this.formulaType_ = this.selectedInOutFlow.pdAccCapFlowType === 'I' ? '34' : '35'\r\n      this.params_current.pdBussDetailType = this.selectedInOutFlow.pdAccCapFlowType === 'I' ? '34' : '35'\r\n      this.params_current.pdBussId = this.selectedInOutFlow.id\r\n      this.params_brief.pdBussDetailType = this.selectedInOutFlow.pdAccCapFlowType === 'I' ? '34' : '35'\r\n      this.params_brief.pdBussId = this.selectedInOutFlow.id\r\n      this.$nextTick(() => {\r\n        this.$refs.page_current.reload()\r\n        this.$refs.page_brief.reload()\r\n      })\r\n    },\r\n    selectedCapFeeChanged() {\r\n      this.formulaType_ = this.selectedCapFeeVo.pdAccCapFlowType === 'I' ? '66' : '67'\r\n      this.params_current.pdBussDetailType = this.selectedCapFeeVo.pdAccCapFlowType === 'I' ? '66' : '67'\r\n      this.params_current.pdBussId = this.selectedCapFeeVo.id\r\n      this.params_brief.pdBussDetailType = this.selectedCapFeeVo.pdAccCapFlowType === 'I' ? '66' : '67'\r\n      this.params_brief.pdBussId = this.selectedCapFeeVo.id\r\n      this.$nextTick(() => {\r\n        this.$refs.page_current.reload()\r\n        this.$refs.page_brief.reload()\r\n      })\r\n    },\r\n    rowClick_accountFee(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedAccountFee.id) {\r\n          this.selectedAccountFee = {}\r\n          this.formulaType_ = ''\r\n          // 重置查询参数\r\n          this.params_current.pdBussDetailType = ''\r\n          this.params_current.pdBussId = undefined\r\n          this.params_brief.pdBussDetailType = ''\r\n          this.params_brief.pdBussId = undefined\r\n          // 重置表格数据\r\n          this.tableData_current = []\r\n          this.$refs.page_current.total = 0\r\n          this.$refs.page_current.page = 1\r\n          this.tableData_brief = []\r\n          this.$refs.page_brief.total = 0\r\n          this.$refs.page_brief.page = 1\r\n        }\r\n      }\r\n    },\r\n    rowClick_inOutFlow(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedInOutFlow.id) {\r\n          this.selectedInOutFlow = {}\r\n          this.formulaType_ = ''\r\n          // 重置查询参数\r\n          this.params_current.pdBussDetailType = ''\r\n          this.params_current.pdBussId = undefined\r\n          this.params_brief.pdBussDetailType = ''\r\n          this.params_brief.pdBussId = undefined\r\n          // 重置表格数据\r\n          this.tableData_current = []\r\n          this.$refs.page_current.total = 0\r\n          this.$refs.page_current.page = 1\r\n          this.tableData_brief = []\r\n          this.$refs.page_brief.total = 0\r\n          this.$refs.page_brief.page = 1\r\n        }\r\n      }\r\n    },\r\n    rowClick_capFee(row, column, event) {\r\n      if (event.target.nodeName === \"INPUT\") {\r\n        if (row.id === this.selectedCapFeeVo.id) {\r\n          this.selectedCapFeeVo = {}\r\n          this.formulaType_ = ''\r\n          // 重置查询参数\r\n          this.params_current.pdBussDetailType = ''\r\n          this.params_current.pdBussId = undefined\r\n          this.params_brief.pdBussDetailType = ''\r\n          this.params_brief.pdBussId = undefined\r\n          // 重置表格数据\r\n          this.tableData_current = []\r\n          this.$refs.page_current.total = 0\r\n          this.$refs.page_current.page = 1\r\n          this.tableData_brief = []\r\n          this.$refs.page_brief.total = 0\r\n          this.$refs.page_brief.page = 1\r\n        }\r\n      }\r\n    },\r\n    showFormula(row) {\r\n      this.formulaView.flag = '1'\r\n      this.formulaView.performType = row.performType\r\n      this.formulaView.ruleCode = row.pdCalcCode\r\n      this.formulaView.visible = true\r\n    },\r\n    formulaViewClosed() {\r\n      this.formulaView.visible = false\r\n      this.selectedFormula = {}\r\n    },\r\n    async initProductInfo() {\r\n      let pdtempPdInfo = this.getPdData()\r\n      if (Object.keys(pdtempPdInfo).length > 0) {\r\n        Object.assign(this.product, pdtempPdInfo)\r\n        this.params_brief.productDetailType = this.product.cType\r\n        this.params_brief.product = this.product\r\n        this.params_current.product = this.product\r\n      } else {\r\n        this.notifyError(this.$t('rule.invalidProductInfo'))\r\n      }\r\n    },\r\n    init() {\r\n      this.resetParams()\r\n      this.selectedFormula = {}\r\n      if (this.revisionMark) { // 订正\r\n        this.params_accountFee.eq_pdInfoId = this.product.id\r\n        this.$refs.page_accountFee.reload()\r\n      } else { // 非订正\r\n        this.bussObject_ = Object.assign({}, this.bussObject)\r\n        this.formulaType_ = this.formulaType\r\n        // 初始化账户下拉选\r\n        this.initPdAccountOption()\r\n        // 初始化业务项下拉选\r\n        this.initSelectOption()\r\n        // 初始化已关联公式表格数据\r\n        this.initTableData()\r\n      }\r\n    },\r\n    initPdAccountOption() {\r\n      findAllAccountByProductId(this.product.id).then(response => {\r\n        this.pdtempPdAccList = response.data\r\n      })\r\n    },\r\n    // 初始化表格查询\r\n    initTableData() {\r\n      // 区分公式细类：33-账户费用、34-资金流入、35-资金流出、66-流入费用、67-流出费用\r\n      switch (this.formulaType) {\r\n        case '33':\r\n          // 账户费用\r\n          this.params.accountCode = this.bussObject_.pdAccountCode\r\n          this.params.accountName = this.bussObject_.pdAccountName\r\n          this.params.formulaType = '33'\r\n          this.params.pdAccountFeeId = this.bussObject_.id\r\n          this.params.pdAccFeeName = this.bussObject_.pdAccFeeName\r\n          this.params_brief.pdBussDetailType = '33'\r\n          this.params_brief.pdBussId = this.bussObject_.id\r\n          break\r\n        case '34':\r\n          // 资金流入\r\n          this.params.accountCode = this.bussObject_.pdAccCode\r\n          this.params.accountName = this.bussObject_.pdAccName\r\n          this.params.formulaType = '34'\r\n          this.params.inFlowId = this.bussObject_.id\r\n          this.params.inFlowName = this.bussObject_.pdAccCapItemName\r\n          this.params_brief.pdBussDetailType = '34'\r\n          this.params_brief.pdBussId = this.bussObject_.id\r\n          break\r\n        case '35':\r\n          // 资金流出\r\n          this.params.accountCode = this.bussObject_.pdAccCode\r\n          this.params.accountName = this.bussObject_.pdAccName\r\n          this.params.formulaType = '35'\r\n          this.params.outFlowId = this.bussObject_.id\r\n          this.params.outFlowName = this.bussObject_.pdAccCapItemName\r\n          this.params_brief.pdBussDetailType = '35'\r\n          this.params_brief.pdBussId = this.bussObject_.id\r\n          break\r\n        case '66':\r\n          // 流入费用\r\n          this.params.accountCode = this.bussObject_.pdAccCode\r\n          this.params.accountName = this.bussObject_.pdAccName\r\n          this.params.formulaType = '66'\r\n          this.params.inFlowId = this.bussObject_.pdAccCapId\r\n          this.params.pdAccountFeeId = this.bussObject_.pdAccFeeId\r\n          this.params_brief.pdBussDetailType = '66'\r\n          this.params_brief.pdBussId = this.bussObject_.id\r\n          break\r\n        case '67':\r\n          // 流出费用\r\n          this.params.accountCode = this.bussObject_.pdAccCode\r\n          this.params.accountName = this.bussObject_.pdAccName\r\n          this.params.formulaType = '67'\r\n          this.params.outFlowId = this.bussObject_.pdAccCapId\r\n          this.params.pdAccountFeeId = this.bussObject_.pdAccFeeId\r\n          this.params_brief.pdBussDetailType = '67'\r\n          this.params_brief.pdBussId = this.bussObject_.id\r\n          break\r\n        default:\r\n          this.notifyError(this.$t('accountFormula.invalidCalcType'))\r\n          return\r\n      }\r\n      // 初始化表格查询\r\n      this.params_current.pdBussDetailType = this.params.formulaType\r\n      this.params_current.pdBussId = this.bussObject_.id\r\n      this.$refs.page_current.reload()\r\n      this.$refs.page_brief.reload()\r\n    },\r\n    // 根据业务项信息初始化下拉选\r\n    initSelectOption() {\r\n      // 初始化账户费用下拉选\r\n      findAllPdAccountFeeByPdAccId(this.formulaType === '33' ? this.bussObject_.pdAccountId : this.bussObject_.pdAccId).then(response => {\r\n        this.pdAccountFeeList = response.data\r\n      })\r\n      // 初始化资金流入下拉选\r\n      findAllInFlowByPdAccId(this.formulaType === '33' ? this.bussObject_.pdAccountId : this.bussObject_.pdAccId).then(response => {\r\n        this.inFlowList = response.data\r\n      })\r\n      // 初始化资金流出下拉选\r\n      findAllOutFlowByPdAccId(this.formulaType === '33' ? this.bussObject_.pdAccountId : this.bussObject_.pdAccId).then(response => {\r\n        this.outFlowList = response.data\r\n      })\r\n      // 初始化流入流出费用下拉选\r\n      findAllPdAccCapFeeByPdAccId(this.formulaType === '33' ? this.bussObject_.pdAccountId : this.bussObject_.pdAccId).then(response => {\r\n        this.productAccCapFeeList = response.data\r\n      })\r\n    },\r\n    deleteFormula(row) {\r\n      deleteAmountFormula(row).then(() => {\r\n        this.notifySuccess(this.$t('successMessage.delete'))\r\n        if (this.revisionMark) {\r\n          this.$refs.page_current.reload()\r\n          this.$refs.page_brief.reload()\r\n        } else {\r\n          this.$emit('bringInCalcCode', row.pdBussDetailType, row.pdBussId, undefined)\r\n          this.init()\r\n        }\r\n      })\r\n    },\r\n    back() {\r\n      this.$emit('changeDialogVisible_formula', false)\r\n    },\r\n    bringInCalcCode(pdBussDetailType, pdBussId, calcCode) {\r\n      this.$emit('bringInCalcCode', pdBussDetailType, pdBussId, calcCode)\r\n    },\r\n    changeDialogVisible_formulaSelect(flag) {\r\n      this.dialogVisible.accountFeeFormulaSelect = flag\r\n      if (flag === false) {\r\n        if (this.revisionMark) {\r\n          this.$refs.page_current.reload()\r\n          this.$refs.page_brief.reload()\r\n        } else {\r\n          this.init()\r\n        }\r\n      }\r\n    },\r\n    ruleModuleClosed() {\r\n      this.formulaVisible = false\r\n      this.$refs.page_brief.reload()\r\n    },\r\n    toFormulaSelect() {\r\n      if (this.revisionMark) {\r\n        this.bussObject_ = {}\r\n        switch (this.formulaType_) {\r\n          case \"33\":\r\n            this.bussObject_ = Object.assign({}, this.selectedAccountFee)\r\n            break\r\n          case \"34\":\r\n          case \"35\":\r\n            this.bussObject_ = Object.assign({}, this.selectedInOutFlow)\r\n            break\r\n          case \"66\":\r\n          case \"67\":\r\n            this.bussObject_ = Object.assign({}, this.selectedCapFeeVo)\r\n            break\r\n        }\r\n      }\r\n      if (Object.keys(this.bussObject_).length > 0) {\r\n        this.dialogVisible.accountFeeFormulaSelect = true\r\n      } else {\r\n        this.notifyError(this.$t('accountFormula.pleaseSelectBussObj'))\r\n      }\r\n    },\r\n    selectedFormulaChanged() {\r\n      this.formulaView.flag = this.selectedFormula.ruleAttr === '1' ? '1' : '2'\r\n      this.formulaView.performType = this.selectedFormula.performType\r\n      this.formulaView.ruleCode = this.selectedFormula.pdCalcCode\r\n      this.formulaView.visible = true\r\n    },\r\n    resetParams() {\r\n      this.params = {\r\n        accountCode: '',\r\n        accountName: '',\r\n        formulaType: '',\r\n        capFeeInId: undefined,\r\n        capFeeOutId: undefined,\r\n        inFlowId: undefined,\r\n        inFlowName: '',\r\n        outFlowId: undefined,\r\n        outFlowName: '',\r\n        pdAccountFeeId: undefined,\r\n        pdAccFeeName: ''\r\n      }\r\n    },\r\n    handleSelectFormula(row) {\r\n      if (this.revisionMark) {\r\n        this.bussObject_ = {}\r\n        switch (this.formulaType_) {\r\n          case \"33\":\r\n            this.bussObject_ = Object.assign({}, this.selectedAccountFee)\r\n            break\r\n          case \"34\":\r\n          case \"35\":\r\n            this.bussObject_ = Object.assign({}, this.selectedInOutFlow)\r\n            break\r\n          case \"66\":\r\n          case \"67\":\r\n            this.bussObject_ = Object.assign({}, this.selectedCapFeeVo)\r\n            break\r\n        }\r\n      }\r\n      if (Object.keys(this.bussObject_).length === 0) {\r\n        this.notifyError(this.$t('accountFormula.pleaseSelectBussObj'))\r\n        return\r\n      }\r\n      const param = {\r\n        product: this.product,\r\n        formula: row,\r\n        pdBussDetailType: this.formulaType_,\r\n        pdBussId: this.bussObject_.id,\r\n        needChecking: true\r\n      }\r\n      associatePdAccCalc(this.buildRequestData(param)).then(response => {\r\n        let flag = response.data.flag\r\n        let pdtempPdCalc = response.data.pdtempPdCalc\r\n        if (flag === true) {\r\n          this.notifySuccess(this.$t('accountFeeFormulaSelect.associateFormulaSuccess'))\r\n          this.$refs.page_current.reload()\r\n          this.$refs.page_brief.reload()\r\n          if (!this.revisionMark) {\r\n            this.$emit('bringInCalcCode', pdtempPdCalc.pdBussDetailType, pdtempPdCalc.pdBussId, pdtempPdCalc.pdCalcCode)\r\n          }\r\n        } else {\r\n          this.$confirm(String(this.$t('accountFeeFormulaSelect.confirm_overwrite_formula')), String(this.$t('confirmMessage.tip')), {\r\n            confirmButtonText: String(this.$t('confirmMessage.confirm')),\r\n            cancelButtonText: String(this.$t('confirmMessage.cancel')),\r\n            type: 'warning'\r\n          }).then(() => {\r\n            param.needChecking = false\r\n            associatePdAccCalc(this.buildRequestData(param)).then(response => {\r\n              let pdtempPdCalc = response.data.pdtempPdCalc\r\n              this.notifySuccess(this.$t('accountFeeFormulaSelect.associateFormulaSuccess'))\r\n              this.$refs.page_current.reload()\r\n              this.$refs.page_brief.reload()\r\n              if (!this.revisionMark) {\r\n                this.$emit('bringInCalcCode', pdtempPdCalc.pdBussDetailType, pdtempPdCalc.pdBussId, pdtempPdCalc.pdCalcCode)\r\n              }\r\n            })\r\n          }).catch(() => {\r\n            this.messageInfo(this.$t('accountFeeFormulaSelect.canceled'))\r\n          })\r\n        }\r\n      })\r\n    },\r\n    toAddFormula() {\r\n      if (this.revisionMark) { // 订正\r\n        if (!this.formulaType_) {\r\n          this.notifyError(this.$t('accountFormula.pleaseSelectBussObj'))\r\n          return\r\n        }\r\n      } else { // 非订正\r\n        if (!this.params.formulaType) {\r\n          this.notifyError(this.$t('accountFormula.pleaseAppointCalcDetailType'))\r\n          return\r\n        }\r\n      }\r\n      const param = {\r\n        pdBussType: '4',\r\n        pdBussDetailType: this.revisionMark ? this.formulaType_ : this.params.formulaType\r\n      }\r\n      getCalcCode(this.buildRequestData(param)).then(response => {\r\n        this.attributeObj = {\r\n          code: response.data,\r\n          ruleBussModu: '4',\r\n          ruleBussModuDeta: param.pdBussDetailType,\r\n          ruleType: '2',\r\n          pdType: '1',\r\n          riskType: this.product.bType,\r\n          riskDetail: this.product.cType,\r\n          pdCode: this.product.pdCode,\r\n          pdEdition: this.product.pdEdition\r\n        }\r\n        this.formulaVisible = true\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}