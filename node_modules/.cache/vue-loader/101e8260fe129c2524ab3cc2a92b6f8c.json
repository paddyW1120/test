{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\combo-ppinfo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-compensation-def\\combo-ppinfo\\index.vue","mtime":1609847107026},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7aW5pdENvbWJvfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vY29tcGVuc2F0aW9uRGVmaW5pdGlvbiIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicGR0ZW1wcGRibmZ0aW5mbyIsCiAgcHJvcHM6IHsKICAgIHBkQm5mdEN0cmxDb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByYWRpbzI6IG51bGwsCiAgICAgIHBkdGVtcFBwSW5mbzoge30sCiAgICAgIHBhcmFtczogewogICAgICAgIGVxX3BwQ29kZTogJycKICAgICAgfSwKICAgICAgcGF5bWVudENvbmZpZ3M6IFtdLAogICAgICBjb21ib1RhYmxlOiBbXSwKICAgICAgY29tYm9PcHRpb25zOiBbXSwKICAgICAgY2hvb3NlQm5mdDogW10sCiAgICAgIC8v6YCJ5Lit5YC8CiAgICAgIGNob29zZUNvbWJvOiBbXQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICdjb21ib1RhYmxlJygpIHsKICAgICAgZm9yIChjb25zdCBjb21ibyBvZiB0aGlzLmNvbWJvVGFibGUpIHsKICAgICAgICBsZXQgZmxhZyA9IGZhbHNlOwogICAgICAgIGZvciAoY29uc3QgY29tYm9PcHRpb24gb2YgdGhpcy5jb21ib09wdGlvbnMpIHsKICAgICAgICAgIGlmIChjb21ib09wdGlvbi5wcENvZGUgPT09IGNvbWJvLnBwQ29kZSkgewogICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFmbGFnKSB7CiAgICAgICAgICB0aGlzLmNvbWJvT3B0aW9ucy5wdXNoKGNvbWJvKQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucGR0ZW1wUHBJbmZvID0gdGhpcy5nZXRQZERhdGEoKTsKICAgIHRoaXMuaW5pdENvbWJvKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WIneWni+WMlgogICAgaW5pdENvbWJvKCkgewogICAgICBpZiAodGhpcy5wZEJuZnRDdHJsQ29kZSkgewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIHBkQm5mdEN0cmxDb2RlOiB0aGlzLnBkQm5mdEN0cmxDb2RlCiAgICAgICAgfTsKICAgICAgICBpbml0Q29tYm8odGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtcykpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMucGF5bWVudENvbmZpZ3MgPSByZXMuZGF0YQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/kv53lrZjkuqflk4HmlrnmoYgKICAgIGFkZENvbWJvKCkgewogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jaG9vc2VDb21ibykgewogICAgICAgIGxldCBkdXBsaWNhdGVkID0gZmFsc2U7CiAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEl0ZW0gb2YgdGhpcy5wYXltZW50Q29uZmlncykgewogICAgICAgICAgaWYgKHNlbGVjdGVkSXRlbS5pZCA9PT0gaXRlbS5pZCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKGl0ZW0ucHBDb2RlICsgJzonICsgaXRlbS5wcE5hbWUgKyAn5bey5re75Yqg77yM6K+35Yu/6YeN5aSN5re75YqgJykKICAgICAgICAgICAgfSwgMSk7CiAgICAgICAgICAgIGR1cGxpY2F0ZWQgPSB0cnVlOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWR1cGxpY2F0ZWQpIHsKICAgICAgICAgIHRoaXMucGF5bWVudENvbmZpZ3MucHVzaChpdGVtKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5Lqn5ZOB5pCc57SiCiAgICBjb21ib0xpc3QoKSB7CiAgICAgIHRoaXMuJHJlZnMucGFnZS5yZWxvYWQoKQogICAgfSwKICAgIHJlZnJlc2goKSB7CiAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS5jbGVhclNlbGVjdGlvbigpCiAgICB9LAogICAgZGVsUm93KGluZGV4KSB7CiAgICAgIHRoaXMucGF5bWVudENvbmZpZ3Muc3BsaWNlKGluZGV4LCAxKQogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jaG9vc2VDb21ibyA9IHZhbDsKICAgIH0sCiAgICBiYWNrVG9NZW51KCkgewogICAgICB0aGlzLiRlbWl0KCdiYWNrVG9GZWVCaWxsJywgJ2NvbWJvJywgdGhpcy5wYXltZW50Q29uZmlncyk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-compensation-def/combo-ppinfo","sourcesContent":["<template>\r\n  <cus-wraper>\r\n\r\n    <cus-page-title-back :label=\"$t('i18nView.productMeat')\" @backTo=\"backToMenu\"></cus-page-title-back>\r\n    <el-form ref=\"params\" label-width=\"120px\" :model=\"params\" >\r\n      <el-row :gutter=\"10\" >\r\n        <el-col :span=\"10\">\r\n          <el-form-item :label=\"$t('i18nView.productMeat')\">\r\n            <el-select v-model=\"params.eq_ppCode\" clearable filterable\r\n                       :placeholder=\"$t('pdtempProgInfo.pleaseChoose')\">\r\n              <el-option v-for=\"item in comboOptions\" :key=\"item.ppCode\" :label=\"item.ppCode+':'+item.ppName\"\r\n                         :value=\"item.ppCode\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <cus-btn-wrapper>\r\n          <el-button dialog-disable=\"disable\" size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"comboList\">\r\n            {{$t('pdtempProgInfo.search')}}\r\n          </el-button>\r\n        </cus-btn-wrapper>\r\n      </el-row>\r\n    </el-form>\r\n    <cus-table-title :label=\"$t('i18nView.selectProductMeat')\"/>\r\n    <el-table :data=\"comboTable\" ref=\"multipleTable\" size=\"mini\" fit element-loading-text=\"Loading\" border\r\n              @selection-change=\"handleSelectionChange\" highlight-current-row align=\"center\" class=\"wraper-table\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" type=\"index\" width=\"50\" align=\"center\"></el-table-column>\r\n      <el-table-column width=\"60\" :label=\"$t('pdtempProgInfo.detail')\" prop align=\"center\" type=\"expand\">\r\n        <template slot-scope=\"props\">\r\n          <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n          <el-form-item :label=\"$t('i18nView.productPpCode')\" style=\"width: 50%\">\r\n            {{ props.row.ppCode }}\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('i18nView.productPpName')\" style=\"width: 50%\">\r\n            {{ props.row.ppName }}\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('i18nView.productPpType')\" style=\"width: 50%\">\r\n            {{ props.row.ppType }}\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('i18nView.productPpSolutionCode')\" style=\"width: 50%\">\r\n            {{ props.row.ppPlanCode }}\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('i18nView.productPpSolutionName')\" style=\"width: 50%\">\r\n            {{ props.row.ppPlanName }}\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('i18nView.ppApplyDate')\" style=\"width: 50%\">\r\n            {{ props.row.applyTime }}\r\n          </el-form-item>\r\n          </el-form>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.productPpCode')\" prop=\"ppCode\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.productPpName')\" prop=\"ppName\" align=\"center\"></el-table-column>\r\n    </el-table>\r\n    <cus-pagination ref=\"page\" :pageSize=\"5\" :params=\"params\"\r\n                    url=\"/combo-claim-compensation/base/comboList\" v-model=\"comboTable\"/>\r\n    <br/>\r\n    <el-form>\r\n      <el-form-item align=\"right\">\r\n        <el-button dialog-disable=\"disable\" size=\"small\" type=\"primary\" icon=\"el-icon-circle-plus-outline\" @click=\"addCombo\">\r\n          添加\r\n        </el-button>\r\n        <el-button dialog-disable=\"disable\" size=\"small\" type=\"primary\" icon=\"el-icon-refresh\" @click=\"refresh\">\r\n          {{$t('table.refresh')}}\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <cus-table-title :label=\"$t('i18nView.ppRelateProductItem')\"/>\r\n    <el-table :data=\"paymentConfigs\" ref=\"paymentTable\" size=\"mini\" fit element-loading-text=\"Loading\" border\r\n              highlight-current-row align=\"center\" max-height=\"300px\" class=\"wraper-table\">\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\" width=\"50\"></el-table-column>\r\n      <el-table-column width=\"60\" :label=\"$t('pdtempProgInfo.detail')\" prop align=\"center\" type=\"expand\">\r\n        <template slot-scope=\"props\">\r\n          <el-form class=\"demo-table-expand\" inline label-position=\"left\">\r\n            <el-form-item :label=\"$t('i18nView.productPpCode')\" style=\"width: 50%\">\r\n              {{ props.row.ppCode }}\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('i18nView.productPpName')\" style=\"width: 50%\">\r\n              {{ props.row.ppName }}\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('i18nView.productPpSolutionCode')\" style=\"width: 50%\">\r\n              {{ props.row.ppPlanCode }}\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('i18nView.productPpSolutionName')\" style=\"width: 50%\">\r\n              {{ props.row.ppPlanName }}\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('i18nView.comboId')\" style=\"width: 50%\">\r\n              {{ props.row.pdInfoId }}\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('i18nView.relateCode')\" style=\"width: 50%\">\r\n              {{ props.row.pdBnftCtrlConCode }}\r\n            </el-form-item>\r\n          </el-form>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.productPpCode')\" prop=\"ppCode\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.productPpName')\" prop=\"ppName\" align=\"center\"></el-table-column>\r\n      <el-table-column :label=\"$t('pdgenlDblGrade.operator')\" align=\"center\" width=\"80px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button dialog-disable=\"disable\" type=\"danger\" size=\"mini\" @click=\"delRow(scope.$index)\">-\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {initCombo} from \"@/api/basicinfo/compensationDefinition\"\r\n\r\n  export default {\r\n    name: \"pdtemppdbnftinfo\",\r\n    props: {\r\n      pdBnftCtrlCode: {\r\n        type: String,\r\n        default: ''\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        radio2: null,\r\n        pdtempPpInfo: {},\r\n        params: {\r\n          eq_ppCode: ''\r\n        },\r\n        paymentConfigs: [],\r\n        comboTable: [],\r\n        comboOptions: [],\r\n        chooseBnft: [],\r\n        //选中值\r\n        chooseCombo: []\r\n      }\r\n    },\r\n    watch: {\r\n      'comboTable'() {\r\n        for (const combo of this.comboTable) {\r\n          let flag = false;\r\n          for (const comboOption of this.comboOptions) {\r\n            if (comboOption.ppCode === combo.ppCode) {\r\n              flag = true;\r\n              break\r\n            }\r\n          }\r\n          if (!flag) {\r\n            this.comboOptions.push(combo)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.pdtempPpInfo = this.getPdData();\r\n      this.initCombo();\r\n    },\r\n    methods: {\r\n      //初始化\r\n      initCombo() {\r\n        if (this.pdBnftCtrlCode) {\r\n          const params = {\r\n            pdBnftCtrlCode: this.pdBnftCtrlCode\r\n          };\r\n          initCombo(this.buildRequestData(params)).then(res => {\r\n            this.paymentConfigs = res.data\r\n          });\r\n        }\r\n      },\r\n      //保存产品方案\r\n      addCombo() {\r\n        for (const item of this.chooseCombo) {\r\n          let duplicated = false;\r\n          for (const selectedItem of this.paymentConfigs) {\r\n            if (selectedItem.id === item.id) {\r\n              setTimeout(() => {\r\n                this.notifyError(item.ppCode + ':' + item.ppName + '已添加，请勿重复添加')\r\n              }, 1);\r\n              duplicated = true;\r\n              break\r\n            }\r\n          }\r\n          if (!duplicated) {\r\n            this.paymentConfigs.push(item)\r\n          }\r\n        }\r\n      },\r\n      //产品搜索\r\n      comboList() {\r\n        this.$refs.page.reload()\r\n      },\r\n      refresh() {\r\n        this.$refs.multipleTable.clearSelection()\r\n      },\r\n      delRow(index) {\r\n        this.paymentConfigs.splice(index, 1)\r\n      },\r\n      handleSelectionChange(val) {\r\n        this.chooseCombo = val;\r\n      },\r\n      backToMenu() {\r\n        this.$emit('backToFeeBill', 'combo', this.paymentConfigs);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .divider {\r\n    color: black;\r\n    background-color: black;\r\n    width: 1px;\r\n  }\r\n</style>\r\n"]}]}