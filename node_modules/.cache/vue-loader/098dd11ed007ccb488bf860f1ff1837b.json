{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\ruleManagement\\ruleCalculatorMake\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\ibrms\\ruleManagement\\ruleCalculatorMake\\index.vue","mtime":1609847106764},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2VsZWN0U2VhcmNoIGZyb20gIkAvdmlld3MvaWJybXMvcnVsZU1hbmFnZW1lbnQvc2VsZWN0U2VhcmNoIjsNCmltcG9ydCBkeW5hbWljVGFibGUgZnJvbSAiQC92aWV3cy9pYnJtcy9ydWxlTWFuYWdlbWVudC9keW5hbWljVGFibGUiOw0KaW1wb3J0IHJ1bGVQYXJhbWV0ZXIgZnJvbSAiQC92aWV3cy9pYnJtcy9ydWxlTWFuYWdlbWVudC9ydWxlUGFyYW1ldGVyIjsNCmltcG9ydCB7DQogIGZpbmRCb21CeUxhbmd1YWdlLA0KICBmaW5kQm9tSXRlbUJ5TGFuZ3VhZ2VBbmRCb21JZCwNCiAgZmluZFJ1bGVDb21tYW5kQnlMYW5ndWFnZUFuZENvbW1hbmRUeXBlLA0KICBydWxlTWFrZVNhdmUsDQogIGdldENvbWJveERhdGEsDQogIHJ1bGVJbml0DQp9IGZyb20gIkAvYXBpL2licm1zL3J1bGVNYWtlIjsNCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsNCg0KZnVuY3Rpb24gcmVxdWlyZWRUaXAoaW5mbykgew0KICByZXR1cm4gWw0KICAgIHsNCiAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgbWVzc2FnZTogaW5mbywNCiAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgIH0NCiAgXTsNCn0NCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInJ1bGVDYWxjdWxhdG9yTWFrZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGJ0blN0YXRlOiAiMSIsDQogICAgICBydWxlTmFtZTogIiIsDQogICAgICBsYW5ndWFnZTogIiIsDQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIHNob3dNZXNzYWdlOiBmYWxzZSwNCiAgICAgIHRJRDogIiIsDQogICAgICB3aWQ6ICIxMDAlIiwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgaW5kZXhNb2RlbDogew0KICAgICAgICB0cmVlUnVsZTogZmFsc2UNCiAgICAgIH0sDQogICAgICBzaG93RHluYW1pY1RhYmxlOiBmYWxzZSwNCiAgICAgIGRhdGFGb3JtOiB7fSwNCiAgICAgIGNhbGN1bGF0b3I6IHsNCiAgICAgICAgcnVsZTogW10sDQogICAgICAgIGNhbDogW10NCiAgICAgIH0sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGlmU2tpcFBhcmFtOiBbXSwNCiAgICAgIGR5bmFtaWNUYWJsZUxpc3Q6IHsNCiAgICAgICAgcGFyYW1BcnI6IFtdLA0KICAgICAgICBwYXJhbUxpc3Q6IFtdDQogICAgICB9LA0KICAgICAgaXRlbUNvbW1hbmRUeXBlOiAiZW1wdHkiLA0KICAgICAgZGVsSXRlbVRlbXA6IHRydWUsDQogICAgICBhZGRSdWxlVGVtcDogdHJ1ZSwNCiAgICAgIHdoZW46ICIiLA0KICAgICAgd2hlbkRlc2NyaWJlOiAiIiwNCiAgICAgIHRoZW46ICIiLA0KICAgICAgdGhlbkRlc2NyaWJlOiAiIiwNCiAgICAgIGNvbHVtbk5hbWU6IFtdLA0KICAgICAgY29sdW1uVHlwZTogW10sDQogICAgICBydWxlT25seTogZmFsc2UsDQogICAgICBzaG93QnV0dG9uOiB0cnVlLA0KICAgICAgZGVjaXNpb25Sb3duYW1lOiAiZFJvdyIsDQogICAgICBSdWxlQ2FjaGVEYXRhOiB7DQogICAgICAgIHJ1bGVCb21MaXN0OiBbXSwNCiAgICAgICAgcnVsZUJvbUl0ZW1MaXN0OiBbXSwNCiAgICAgICAgcnVsZUNvbW1hbmRMaXN0OiBbXSwNCiAgICAgICAgcnVsZUZ1bmN0aW9uTGlzdDogW10NCiAgICAgIH0sDQogICAgICBydWxlTWVzc2FnZUluZm9Cb206IHt9LA0KICAgICAgcnVsZVVzZUJvbUxpc3Q6IFtdLA0KICAgICAgcnVsZVVzZUZ1bmN0aW9uTGlzdDogW10sDQogICAgICBydWxlVXNlQ29tbWFuZExpc3Q6IFtdLA0KICAgICAgc3FsU3RhdGVtZW50OiAiIiwNCiAgICAgIGNvZGU6ICIiLA0KICAgICAgcnVsZUZsYWc6ICIiLA0KICAgICAgcXVlcnk6IGZhbHNlLA0KICAgICAgdXBkYXRlU3RhdGU6IGZhbHNlLA0KICAgICAgbmV3Q29kZTogIiIsDQogICAgICBydWxlTWFpbjogew0KICAgICAgICBpZDogIiINCiAgICAgIH0sDQogICAgICB1cGRhdGVEeW5hbWljOiBmYWxzZSwNCiAgICAgIG1lbnU6IGZhbHNlLA0KICAgICAgbXVsdGl2YWx1ZWRFeHByZXNzaW9uOiIiDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHt9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJydWxlTWVzc2FnZSJdKQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgZHluYW1pY1RhYmxlLA0KICAgIFNlbGVjdFNlYXJjaCwNCiAgICBydWxlUGFyYW1ldGVyDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5sYW5ndWFnZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmFwcC5sYW5ndWFnZTsNCiAgICB0aGlzLnJ1bGVNZXNzYWdlSW5mb0JvbSA9IHRoaXMuJHN0b3JlLnN0YXRlLnJ1bGVNZXNzYWdlLnJ1bGVNZXNzYWdlczsNCiAgICB0aGlzLlJ1bGVDYWNoZURhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ydWxlQ2FjaGUucnVsZUNhY2hlRGF0YTsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCiAgcHJvcHM6IFsNCiAgICAicnVsZUNvZGUiLA0KICAgICJmbGFnIiwNCiAgICAicnVsZVF1ZXJ5IiwNCiAgICAiY29weUNvZGUiLA0KICAgICJ1cGRhdGVEeW5hbWljVGFibGUiLA0KICAgICJtZW51UGFnZSIsDQogICAgInBlcmZvcm1UeXBlIg0KICBdLA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIC8v57yT5a2Y5pWw5o2uIOS4juWkmuivreiogOS/oeaBrw0KICAgICAgaWYgKHRoaXMudXBkYXRlRHluYW1pY1RhYmxlKSB7DQogICAgICAgIHRoaXMudXBkYXRlRHluYW1pYyA9IHRoaXMudXBkYXRlRHluYW1pY1RhYmxlOw0KICAgICAgfQ0KICAgICAgdGhpcy5tZW51ID0gdGhpcy5tZW51UGFnZTsNCiAgICAgIGxldCBjb2RlID0gdGhpcy5ydWxlQ29kZTsNCiAgICAgIHRoaXMucnVsZUZsYWcgPSB0aGlzLmZsYWc7DQogICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5ydWxlUXVlcnk7DQogICAgICB0aGlzLmNvZGUgPSBjb2RlOw0KICAgICAgdGhpcy5ydWxlTmFtZSA9IHRoaXMuJHQoInJ1bGVDYWxjdWxhdG9yTWFrZS5ydWxlSW5mbyIpOw0KICAgICAgaWYgKHRoaXMudXBkYXRlRHluYW1pYyB8fCB0aGlzLnF1ZXJ5KSB7DQogICAgICAgIHRoaXMucnVsZU5hbWUgPSB0aGlzLiR0KCJydWxlQ2FsY3VsYXRvck1ha2UucnVsZUluZm8xIik7DQogICAgICB9DQogICAgICBzd2l0Y2ggKHRoaXMuZmxhZykgew0KICAgICAgICBjYXNlICIzIjoNCiAgICAgICAgICBjb2RlID0gdGhpcy5jb3B5Q29kZTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiNyI6DQogICAgICAgICAgdGhpcy5ydWxlT25seSA9IHRydWU7DQogICAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gZmFsc2U7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICBsZXTCoHBhcmFtwqA9wqB7ImNvZGUiOmNvZGUsInBlcmZvcm1UeXBlIjp0aGlzLnBlcmZvcm1UeXBlfQ0KwqDCoMKgwqDCoMKgcnVsZUluaXQodGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtKSkudGhlbihyZXNwb25zZcKgPT7CoHsNCiAgICAgICAgLy8wIOaYr+WumuS5iSAgMeaYr+afpeeciw0KICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDAgJiYgcmVzcG9uc2UuZGF0YS5ydWxlU2hvdykgew0KICAgICAgICAgIC8v5p+l6K+iIOagueaNruinhOWImee8lueggeWxleekuuinhOWImQ0KICAgICAgICAgIHZhciBydWxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucnVsZVNob3c7DQogICAgICAgICAgdGhpcy5ydWxlTWFpbiA9IHJlc3BvbnNlLmRhdGEucnVsZVNob3c7DQogICAgICAgICAgdGhpcy5jYWxjdWxhdG9yLmNhbCA9IEpTT04ucGFyc2UocnVsZURhdGEudGhlbkRlc2N0aXB0aW9uKTsNCiAgICAgICAgICB0aGlzLmNhbGN1bGF0b3IucnVsZSA9IEpTT04ucGFyc2UocnVsZURhdGEud2hlbkRlc2NyaXB0aW9uKTsNCiAgICAgICAgICB0aGlzLmR5bmFtaWNUYWJsZUxpc3QgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEucnVsZVNob3cuZGF0YUdldCk7DQogICAgICAgICAgdGhpcy5zaG93RHluYW1pY1RhYmxlID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLnNxbFN0YXRlbWVudCA9IHJ1bGVEYXRhLmRhdGF0YWJsZVNvdXJjZTsNCiAgICAgICAgICB0aGlzLndoZW5EZXNjcmlwdGlvbiA9IHJ1bGVEYXRhLndoZW5EZXNjcmlwdGlvbjsNCiAgICAgICAgICB0aGlzLndoZW4gPSBydWxlRGF0YS53aGVuRXhwZXJzc2lvbjsNCiAgICAgICAgICB0aGlzLnRoZW4gPSBydWxlRGF0YS50aGVuRXhwZXJzc2lvbjsNCiAgICAgICAgICB0aGlzLm11bHRpdmFsdWVkRXhwcmVzc2lvbiA9IHJ1bGVEYXRhLndoZW5TcGVjaWFsRXhwZXJzc2lvbjsNCiAgICAgICAgICB0aGlzLnRoZW5EZXNjdGlwdGlvbiA9IHJ1bGVEYXRhLnRoZW5EZXNjdGlwdGlvbjsNCiAgICAgICAgICB0aGlzLmNvbHVtbk5hbWUgPSBydWxlRGF0YS5jb2x1bW5OYW1lcy5zcGxpdCgiLCIpOw0KICAgICAgICAgIHRoaXMuY29sdW1uVHlwZSA9IHJ1bGVEYXRhLmNvbHVtblR5cGVzLnNwbGl0KCIsIik7DQogICAgICAgICAgdGhpcy5ydWxlVXNlQm9tTGlzdCA9IHJlc3BvbnNlLmRhdGEucnVsZVVzZUJvbUxpc3Q7DQogICAgICAgICAgdGhpcy5ydWxlVXNlRnVuY3Rpb25MaXN0ID0gcmVzcG9uc2UuZGF0YS5ydWxlVXNlRnVuY3Rpb25MaXN0Ow0KICAgICAgICAgIHRoaXMucnVsZVVzZUNvbW1hbmRMaXN0ID0gcmVzcG9uc2UuZGF0YS5ydWxlVXNlQ29tbWFuZExpc3Q7DQogICAgICAgICAgdGhpcy5ydWxlT25seSA9IHRydWU7DQogICAgICAgICAgdGhpcy5idG5TdGF0ZSA9ICIyIjsNCiAgICAgICAgICB0aGlzLnNob3dCdXR0b24gPSBmYWxzZTsNCiAgICAgICAgICBpZiAoIXRoaXMudXBkYXRlRHluYW1pYykgew0KICAgICAgICAgICAgdGhpcy5pbmRleE1vZGVsLnRyZWVSdWxlID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IHRydWU7DQogICAgICAgICAgaWYgKHRoaXMucnVsZUZsYWcgPT0gIjIiKSB7DQogICAgICAgICAgICB0aGlzLmNvZGVWZXJzaW9uID0gcnVsZURhdGEuY29kZVZlcnNpb247DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuZGVsSXRlbVRlbXAgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmFkZFJ1bGVUZW1wID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5ydWxlT25seSA9IHRydWU7DQogICAgICAgICAgdGhpcy5zcGFuTm9kZUVuYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuYWRkUnVsZXMoKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBjb25zb2xlLmxvZygidXBkYXRlRHluYW1pYyIsIHRoaXMudXBkYXRlRHluYW1pYyArICJfIiArIHRoaXMuc2hvd0J1dHRvbik7DQogICAgfSwNCiAgICBjbGVhcigpIHsNCiAgICAgIHRoaXMuY2xlYXJEYXRhRm9ybSgpOw0KICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7DQogICAgfSwNCiAgICBjbGVhckRhdGFGb3JtKCkgew0KICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmRhdGFGb3JtKSB7DQogICAgICAgIHRoaXMuZGF0YUZvcm1bYV0gPSAiIjsNCiAgICAgIH0NCiAgICB9LA0KICAgIGRhdGFSdWxlKCkge30sDQogICAgYWRkUnVsZXMoKSB7DQogICAgICB0aGlzLmNhbGN1bGF0b3IucnVsZS5wdXNoKHsNCiAgICAgICAgaWZDb25uVHlwZTogZmFsc2UsDQogICAgICAgIGNvbHVtRGVzY3JpcHRpb246ICIiLA0KICAgICAgICBpZlNraXA6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBMZWZ0UGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgTGVmdFBhcmVudGhlc2lzTnVtYmVyOiAwLA0KICAgICAgICAgICAgcmlnaHRQYXJlbnRoZXNpczogZmFsc2UsDQogICAgICAgICAgICByaWdodFBhcmVudGhlc2lzTnVtYmVyOiAwLA0KICAgICAgICAgICAgY29uc3RhbnQ6IHt9LA0KICAgICAgICAgICAgY29uc3RhbnRTaG93OiB0cnVlLA0KICAgICAgICAgICAgZnVuY1N0YXRlOiBmYWxzZSwNCiAgICAgICAgICAgIHNob3dGdW5jVGVtcDogZmFsc2UsDQogICAgICAgICAgICBmdW5jTGlzdDogW10sDQogICAgICAgICAgICBmdW5jU2hvdzogZmFsc2UsDQogICAgICAgICAgICBmdW5jOiB7fSwNCiAgICAgICAgICAgIGZ1bmN0aW9uOiB7DQogICAgICAgICAgICAgIHBhcmFtOiBbXQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGJhY2t1cEJvbTogew0KICAgICAgICAgICAgICBib21LZXk6ICIiDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYmFja3VwQm9tSXRlbToge30sDQogICAgICAgICAgICBiYWNrdXBGdW5jOiB7fSwNCiAgICAgICAgICAgIGJvbUxpc3Q6IFtdLA0KICAgICAgICAgICAgYm9tSXRlbUxpc3Q6IFtdLA0KICAgICAgICAgICAgYm9tOiB7DQogICAgICAgICAgICAgIGJvbUtleTogIiINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBib21JdGVtOiB7DQogICAgICAgICAgICAgIGJvbUl0ZW1LZXk6ICIiDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYm9tU2hvdzogdHJ1ZSwNCiAgICAgICAgICAgIGJvbUl0ZW1TaG93OiB0cnVlLA0KICAgICAgICAgICAgc2hvd0VuZDogZmFsc2UsDQogICAgICAgICAgICBzaG93RW5kVGVtcDogZmFsc2UsDQogICAgICAgICAgICBydWxlQ29tbWFuZDogew0KICAgICAgICAgICAgICBydWxlQ29tbWFuZEtleTogIiIsDQogICAgICAgICAgICAgIGNvbW1hbmRUeXBlOiAiIg0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHJ1bGVDb21tYW5kczogW10sDQogICAgICAgICAgICBydWxlQ29tbWFuZFNob3c6IGZhbHNlLA0KICAgICAgICAgICAgLy/mmK/lkKblsZXnpLog6aG555uu5qih5Z2XDQogICAgICAgICAgICBzaG93Qm9tVGVtcDogdHJ1ZSwNCiAgICAgICAgICAgIC8v5piv5ZCm5bGV56S66L+e5o6l6K+NDQogICAgICAgICAgICBzaG93Q29ublRlbXA6IGZhbHNlLA0KICAgICAgICAgICAgLy/mmK/lkKblsZXnpLrop4TliJkNCiAgICAgICAgICAgIHNob3dCb21JdGVtVGVtcDogZmFsc2UsDQogICAgICAgICAgICAvL+aYr+WQpuWxleekuuiuoeeul+exu+Weiw0KICAgICAgICAgICAgc2hvd1J1bGVDb21tYW5kVGVtcDogZmFsc2UsDQogICAgICAgICAgICB0eXBlOiAiMSIsIC8vMeS7o+ihqOato+W4uCBib20gIDIg5Ye95pWwYm9tDQogICAgICAgICAgICBwYXJhbVR5cGU6ICIiLA0KICAgICAgICAgICAgcnVsZVR5cGU6ICJydWxlIiwNCiAgICAgICAgICAgIGVuZFBhcmVudGhlc2lzOiBmYWxzZSwNCiAgICAgICAgICAgIHJ1bGVFbmRzOiBbXSwNCiAgICAgICAgICAgIGVuZFBhcmVudGhlc2lzTnVtYmVyOiAwDQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9KTsNCg0KICAgICAgdGhpcy5jYWxjdWxhdG9yLmNhbC5wdXNoKHsNCiAgICAgICAgaWZDb25uVHlwZTogZmFsc2UsDQogICAgICAgIGNvbHVtRGVzY3JpcHRpb246ICIiLA0KICAgICAgICBpZlNraXA6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBMZWZ0UGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgTGVmdFBhcmVudGhlc2lzTnVtYmVyOiAwLA0KICAgICAgICAgICAgcmlnaHRQYXJlbnRoZXNpczogZmFsc2UsDQogICAgICAgICAgICByaWdodFBhcmVudGhlc2lzTnVtYmVyOiAwLA0KICAgICAgICAgICAgY29uc3RhbnQ6IHt9LA0KICAgICAgICAgICAgY29uc3RhbnRTaG93OiB0cnVlLA0KICAgICAgICAgICAgZnVuY1N0YXRlOiBmYWxzZSwNCiAgICAgICAgICAgIHNob3dGdW5jVGVtcDogZmFsc2UsDQogICAgICAgICAgICBmdW5jTGlzdDogW10sDQogICAgICAgICAgICBmdW5jU2hvdzogZmFsc2UsDQogICAgICAgICAgICBmdW5jOiB7fSwNCiAgICAgICAgICAgIGZ1bmN0aW9uOiB7DQogICAgICAgICAgICAgIHBhcmFtOiBbXQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGJhY2t1cEJvbTogew0KICAgICAgICAgICAgICBib21LZXk6ICIiDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYmFja3VwQm9tSXRlbToge30sDQogICAgICAgICAgICBiYWNrdXBGdW5jOiB7fSwNCiAgICAgICAgICAgIGJvbUxpc3Q6IFtdLA0KICAgICAgICAgICAgYm9tSXRlbUxpc3Q6IFtdLA0KICAgICAgICAgICAgYm9tOiB7DQogICAgICAgICAgICAgIGJvbUtleTogIiINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBib21JdGVtOiB7DQogICAgICAgICAgICAgIGJvbUl0ZW1LZXk6ICIiDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgYm9tU2hvdzogdHJ1ZSwNCiAgICAgICAgICAgIGJvbUl0ZW1TaG93OiB0cnVlLA0KICAgICAgICAgICAgc2hvd0VuZDogZmFsc2UsDQogICAgICAgICAgICBzaG93RW5kVGVtcDogZmFsc2UsDQogICAgICAgICAgICBydWxlQ29tbWFuZDogew0KICAgICAgICAgICAgICBydWxlQ29tbWFuZEtleTogIiIsDQogICAgICAgICAgICAgIGNvbW1hbmRUeXBlOiAiIg0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHJ1bGVDb21tYW5kczogW10sDQogICAgICAgICAgICBydWxlQ29tbWFuZFNob3c6IGZhbHNlLA0KICAgICAgICAgICAgLy/mmK/lkKblsZXnpLog6aG555uu5qih5Z2XDQogICAgICAgICAgICBzaG93Qm9tVGVtcDogdHJ1ZSwNCiAgICAgICAgICAgIC8v5piv5ZCm5bGV56S66L+e5o6l6K+NDQogICAgICAgICAgICBzaG93Q29ublRlbXA6IGZhbHNlLA0KICAgICAgICAgICAgLy/mmK/lkKblsZXnpLrop4TliJkNCiAgICAgICAgICAgIHNob3dCb21JdGVtVGVtcDogZmFsc2UsDQogICAgICAgICAgICAvL+aYr+WQpuWxleekuuiuoeeul+exu+Weiw0KICAgICAgICAgICAgc2hvd1J1bGVDb21tYW5kVGVtcDogZmFsc2UsDQogICAgICAgICAgICB0eXBlOiAiMSIsIC8vMeS7o+ihqOato+W4uCBib20gIDIg5Ye95pWwYm9tDQogICAgICAgICAgICBwYXJhbVR5cGU6ICIiLA0KICAgICAgICAgICAgcnVsZVR5cGU6ICJjYWwiLA0KICAgICAgICAgICAgZW5kUGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgcnVsZUVuZHM6IFtdLA0KICAgICAgICAgICAgZW5kUGFyZW50aGVzaXNOdW1iZXI6IDANCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvL+aWsOWinuS4gOS4quWmguaenOaooeWdlw0KICAgIGFkZFJ1bGUocnVsZSwgbW9kdWxlLCB0aGVuKSB7DQogICAgICBpZiAodGhlbikgew0KICAgICAgICBpZiAocnVsZS5sZW5ndGggPj0gMSkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBydWxlLnB1c2goew0KICAgICAgICAgIGlmQ29ublR5cGU6IGZhbHNlLA0KICAgICAgICAgIGNvbHVtRGVzY3JpcHRpb246ICIiLA0KICAgICAgICAgIGlmU2tpcDogWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBMZWZ0UGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgICBMZWZ0UGFyZW50aGVzaXNOdW1iZXI6IDAsDQogICAgICAgICAgICAgIHJpZ2h0UGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgICByaWdodFBhcmVudGhlc2lzTnVtYmVyOiAwLA0KICAgICAgICAgICAgICBjb25zdGFudDoge30sDQogICAgICAgICAgICAgIGNvbnN0YW50U2hvdzogdHJ1ZSwNCiAgICAgICAgICAgICAgZnVuY1N0YXRlOiBmYWxzZSwNCiAgICAgICAgICAgICAgc2hvd0Z1bmNUZW1wOiBmYWxzZSwNCiAgICAgICAgICAgICAgZnVuY0xpc3Q6IFtdLA0KICAgICAgICAgICAgICBmdW5jU2hvdzogZmFsc2UsDQogICAgICAgICAgICAgIGZ1bmM6IHt9LA0KICAgICAgICAgICAgICBmdW5jdGlvbjogew0KICAgICAgICAgICAgICAgIHBhcmFtOiBbXQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBiYWNrdXBCb206IHsNCiAgICAgICAgICAgICAgICBib21LZXk6ICIiDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIGJhY2t1cEJvbUl0ZW06IHt9LA0KICAgICAgICAgICAgICBiYWNrdXBGdW5jOiB7fSwNCiAgICAgICAgICAgICAgYm9tTGlzdDogW10sDQogICAgICAgICAgICAgIGJvbUl0ZW1MaXN0OiBbXSwNCiAgICAgICAgICAgICAgYm9tOiB7DQogICAgICAgICAgICAgICAgYm9tS2V5OiAiIg0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBib21JdGVtOiB7DQogICAgICAgICAgICAgICAgYm9tSXRlbUtleTogIiINCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgYm9tU2hvdzogdHJ1ZSwNCiAgICAgICAgICAgICAgYm9tSXRlbVNob3c6IHRydWUsDQogICAgICAgICAgICAgIHNob3dFbmQ6IGZhbHNlLA0KICAgICAgICAgICAgICBzaG93RW5kVGVtcDogZmFsc2UsDQogICAgICAgICAgICAgIHJ1bGVDb21tYW5kOiB7DQogICAgICAgICAgICAgICAgcnVsZUNvbW1hbmRLZXk6ICIiLA0KICAgICAgICAgICAgICAgIGNvbW1hbmRUeXBlOiAiIg0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBydWxlQ29tbWFuZHM6IFtdLA0KICAgICAgICAgICAgICBydWxlQ29tbWFuZFNob3c6IGZhbHNlLA0KICAgICAgICAgICAgICAvL+aYr+WQpuWxleekuiDpobnnm67mqKHlnZcNCiAgICAgICAgICAgICAgc2hvd0JvbVRlbXA6IHRydWUsDQogICAgICAgICAgICAgIC8v5piv5ZCm5bGV56S66L+e5o6l6K+NDQogICAgICAgICAgICAgIHNob3dDb25uVGVtcDogZmFsc2UsDQogICAgICAgICAgICAgIC8v5piv5ZCm5bGV56S66KeE5YiZDQogICAgICAgICAgICAgIHNob3dCb21JdGVtVGVtcDogZmFsc2UsDQogICAgICAgICAgICAgIC8v5piv5ZCm5bGV56S66K6h566X57G75Z6LDQogICAgICAgICAgICAgIHNob3dSdWxlQ29tbWFuZFRlbXA6IGZhbHNlLA0KICAgICAgICAgICAgICB0eXBlOiAiMSIsIC8vMeS7o+ihqOato+W4uCBib20gIDIg5Ye95pWwYm9tDQogICAgICAgICAgICAgIHBhcmFtVHlwZTogIiIsDQogICAgICAgICAgICAgIHJ1bGVUeXBlOiAiY2FsIiwNCiAgICAgICAgICAgICAgZW5kUGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgICBydWxlRW5kczogW10sDQogICAgICAgICAgICAgIGVuZFBhcmVudGhlc2lzTnVtYmVyOiAwDQogICAgICAgICAgICB9DQogICAgICAgICAgXQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJ1bGUucHVzaCh7DQogICAgICAgICAgaWZDb25uVHlwZTogZmFsc2UsDQogICAgICAgICAgY29sdW1EZXNjcmlwdGlvbjogIiIsDQogICAgICAgICAgaWZTa2lwOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIExlZnRQYXJlbnRoZXNpczogZmFsc2UsDQogICAgICAgICAgICAgIExlZnRQYXJlbnRoZXNpc051bWJlcjogMCwNCiAgICAgICAgICAgICAgcmlnaHRQYXJlbnRoZXNpczogZmFsc2UsDQogICAgICAgICAgICAgIHJpZ2h0UGFyZW50aGVzaXNOdW1iZXI6IDAsDQogICAgICAgICAgICAgIGNvbnN0YW50OiB7fSwNCiAgICAgICAgICAgICAgY29uc3RhbnRTaG93OiB0cnVlLA0KICAgICAgICAgICAgICBmdW5jU3RhdGU6IGZhbHNlLA0KICAgICAgICAgICAgICBzaG93RnVuY1RlbXA6IGZhbHNlLA0KICAgICAgICAgICAgICBmdW5jTGlzdDogW10sDQogICAgICAgICAgICAgIGZ1bmNTaG93OiBmYWxzZSwNCiAgICAgICAgICAgICAgZnVuYzoge30sDQogICAgICAgICAgICAgIGZ1bmN0aW9uOiB7DQogICAgICAgICAgICAgICAgcGFyYW06IFtdDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIGJhY2t1cEJvbTogew0KICAgICAgICAgICAgICAgIGJvbUtleTogIiINCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgYmFja3VwQm9tSXRlbToge30sDQogICAgICAgICAgICAgIGJhY2t1cEZ1bmM6IHt9LA0KICAgICAgICAgICAgICBib21MaXN0OiBbXSwNCiAgICAgICAgICAgICAgYm9tSXRlbUxpc3Q6IFtdLA0KICAgICAgICAgICAgICBib206IHsNCiAgICAgICAgICAgICAgICBib21LZXk6ICIiDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIGJvbUl0ZW06IHsNCiAgICAgICAgICAgICAgICBib21JdGVtS2V5OiAiIg0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBib21TaG93OiB0cnVlLA0KICAgICAgICAgICAgICBib21JdGVtU2hvdzogdHJ1ZSwNCiAgICAgICAgICAgICAgc2hvd0VuZDogZmFsc2UsDQogICAgICAgICAgICAgIHNob3dFbmRUZW1wOiBmYWxzZSwNCiAgICAgICAgICAgICAgcnVsZUNvbW1hbmQ6IHsNCiAgICAgICAgICAgICAgICBydWxlQ29tbWFuZEtleTogIiIsDQogICAgICAgICAgICAgICAgY29tbWFuZFR5cGU6ICIiDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIHJ1bGVDb21tYW5kczogW10sDQogICAgICAgICAgICAgIHJ1bGVDb21tYW5kU2hvdzogZmFsc2UsDQogICAgICAgICAgICAgIC8v5piv5ZCm5bGV56S6IOmhueebruaooeWdlw0KICAgICAgICAgICAgICBzaG93Qm9tVGVtcDogdHJ1ZSwNCiAgICAgICAgICAgICAgLy/mmK/lkKblsZXnpLrov57mjqXor40NCiAgICAgICAgICAgICAgc2hvd0Nvbm5UZW1wOiBmYWxzZSwNCiAgICAgICAgICAgICAgLy/mmK/lkKblsZXnpLrop4TliJkNCiAgICAgICAgICAgICAgc2hvd0JvbUl0ZW1UZW1wOiBmYWxzZSwNCiAgICAgICAgICAgICAgLy/mmK/lkKblsZXnpLrorqHnrpfnsbvlnosNCiAgICAgICAgICAgICAgc2hvd1J1bGVDb21tYW5kVGVtcDogZmFsc2UsDQogICAgICAgICAgICAgIHR5cGU6ICIxIiwgLy8x5Luj6KGo5q2j5bi4IGJvbSAgMiDlh73mlbBib20NCiAgICAgICAgICAgICAgcGFyYW1UeXBlOiAiIiwNCiAgICAgICAgICAgICAgcnVsZVR5cGU6ICJydWxlIiwNCiAgICAgICAgICAgICAgZW5kUGFyZW50aGVzaXM6IGZhbHNlLA0KICAgICAgICAgICAgICBydWxlRW5kczogW10sDQogICAgICAgICAgICAgIGVuZFBhcmVudGhlc2lzTnVtYmVyOiAwDQogICAgICAgICAgICB9DQogICAgICAgICAgXQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGRlbEl0ZW0oaXRlbXMsIGluZGV4KSB7DQogICAgICB0aGlzLmR5bmFtaWNUYWJsZUxpc3QucGFyYW1BcnIuc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgIGl0ZW1zLnNwbGljZShpbmRleCwgMSk7IC8v5Yig6ZmkaW5kZXjkuLppLOS9jee9rueahOaVsOe7hOWFg+e0oA0KICAgIH0sDQogICAgZmluZENvbm5UeXBlKGl0ZW0pIHsNCiAgICAgIGl0ZW0uaWZDb25uVHlwZSA9ICFpdGVtLmlmQ29ublR5cGU7DQogICAgfSwNCiAgICAvL+aPkOS6pOS/neWtmOe7k+aenA0KICAgIGRhdGFGb3JtU3VibWl0KCkgew0KICAgICAgLy/lsIHoo4XmnIDlpJblsYLlr7nosaENCiAgICAgIHZhciBydWxlTWFrZSA9IHsNCiAgICAgICAgcnVsZUZsYWc6IHRoaXMucnVsZUZsYWcsDQogICAgICAgIHJ1bGVNYWluOiB7fSwNCiAgICAgICAgcnVsZUVsZW1lbnQ6IHt9LA0KICAgICAgICBydWxlRGF0YToge30sDQogICAgICAgIHJ1bGVVc2VCb21MaXN0OiBbXSwNCiAgICAgICAgcnVsZVVzZUZ1bmN0aW9uTGlzdDogW10sDQogICAgICAgIHJ1bGVVc2VDb21tYW5kTGlzdDogW10NCiAgICAgIH07DQogICAgICBydWxlTWFrZS5ydWxlRGF0YS5kYXRhR2V0ID0gSlNPTi5zdHJpbmdpZnkodGhpcy5keW5hbWljVGFibGVMaXN0KTsNCiAgICAgIHZhciBkYXRhVHlwZSA9ICJKU09OIjsNCiAgICAgIGlmICh0aGlzLmR5bmFtaWNUYWJsZUxpc3QucGFyYW1MaXN0Lmxlbmd0aCA+IDUwKSB7DQogICAgICAgICAgLy/op6PmnpDmlbDmja4g5Lyg5YWl5ZCO5Y+wDQogICAgICAgICAgZGF0YVR5cGUgPSAiU1FMIjsNCiAgICAgIH0NCiAgICAgIHJ1bGVNYWtlLnJ1bGVEYXRhLmRhdGFUeXBlID0gZGF0YVR5cGU7DQogICAgICBydWxlTWFrZS5ydWxlRGF0YS5jb2x1bW5OYW1lcyA9IHRoaXMuY29sdW1uTmFtZS5qb2luKCIsIik7DQogICAgICBydWxlTWFrZS5ydWxlRGF0YS5jb2x1bW5UeXBlcyA9IHRoaXMuY29sdW1uVHlwZS5qb2luKCIsIik7DQogICAgICAvL+WwgeijheinhOWImeS/oeaBrw0KICAgICAgcnVsZU1ha2UucnVsZU1haW4uY29kZVZlcnNpb24gPSAwOw0KICAgICAgcnVsZU1ha2UucnVsZU1haW4uY29kZSA9IHRoaXMuY29kZTsNCiAgICAgIHJ1bGVNYWtlLnJ1bGVNYWluLmRlY2lzaW9uVGFibGVuYW1lID0gInJ1bGVkYXRhIjsNCiAgICAgIHJ1bGVNYWtlLnJ1bGVNYWluLmRlY2lzaW9uUm93bmFtZSA9IHRoaXMuZGVjaXNpb25Sb3duYW1lOw0KICAgICAgcnVsZU1ha2UucnVsZU1haW4ucGVyZm9ybVR5cGUgPSB0aGlzLnBlcmZvcm1UeXBlOw0KICAgICAgLy/mmI7nu4bkv6Hmga8NCiAgICAgIHJ1bGVNYWtlLnJ1bGVNYWluLndoZW5UaGVuTnVtID0gdGhpcy5jYWxjdWxhdG9yLnJ1bGUubGVuZ3RoOw0KICAgICAgcnVsZU1ha2UucnVsZUVsZW1lbnQud2hlbkRlc2NyaXB0aW9uID0gSlNPTi5zdHJpbmdpZnkoDQogICAgICAgIHRoaXMuY2FsY3VsYXRvci5ydWxlDQogICAgICApOw0KICAgICAgcnVsZU1ha2UucnVsZUVsZW1lbnQud2hlbkV4cGVyc3Npb24gPSB0aGlzLndoZW47DQogICAgICBydWxlTWFrZS5ydWxlRWxlbWVudC53aGVuU3BlY2lhbEV4cGVyc3Npb24gPSB0aGlzLm11bHRpdmFsdWVkRXhwcmVzc2lvbjsNCiAgICAgIHJ1bGVNYWtlLnJ1bGVFbGVtZW50LnRoZW5EZXNjdGlwdGlvbiA9ICIiOw0KICAgICAgcnVsZU1ha2UucnVsZUVsZW1lbnQudGhlbkV4cGVyc3Npb24gPSB0aGlzLnRoZW47DQogICAgICBydWxlTWFrZS5ydWxlRWxlbWVudC50aGVuRGVzY3RpcHRpb24gPSBKU09OLnN0cmluZ2lmeSgNCiAgICAgICAgdGhpcy5jYWxjdWxhdG9yLmNhbA0KICAgICAgKTsNCiAgICAgIHJ1bGVNYWtlLnJ1bGVFbGVtZW50LnNob3dPcmRlciA9IDE7DQogICAgICAvL+WmguaenOaYr+WkjeWItuWImeWOu+aOiSBJZA0KICAgICAgaWYgKHRoaXMuZmxhZyA9PSAiMyIpIHsNCiAgICAgICAgdGhpcy5ydWxlVXNlRnVuY3Rpb25MaXN0LmZvckVhY2godmFsID0+IHsNCiAgICAgICAgICB2YWwuaWQgPSAiIjsNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMucnVsZVVzZUJvbUxpc3QuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgIHZhbC5pZCA9ICIiOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5ydWxlVXNlQ29tbWFuZExpc3QuZm9yRWFjaCh2YWwgPT4gew0KICAgICAgICAgIHZhbC5pZCA9ICIiOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIHJ1bGVNYWtlLnJ1bGVVc2VGdW5jdGlvbkxpc3QgPSB0aGlzLnJ1bGVVc2VGdW5jdGlvbkxpc3Q7DQogICAgICBydWxlTWFrZS5ydWxlVXNlQm9tTGlzdCA9IHRoaXMucnVsZVVzZUJvbUxpc3Q7DQogICAgICBydWxlTWFrZS5ydWxlVXNlQ29tbWFuZExpc3QgPSB0aGlzLnJ1bGVVc2VDb21tYW5kTGlzdDsNCiAgICAgIC8v5o+Q5Lqk5pWw5o2uIOWIsOWQjuWPsA0KICAgICAgdmFyIHBhZ2VOYW1lID0gdGhpcy4kcm91dGUucGFyYW1zLnBhZ2VOYW1lOw0KICAgICAgY29uc29sZS5sb2coInJ1bGVNYWtlIiwgSlNPTi5zdHJpbmdpZnkocnVsZU1ha2UpKTsNCiAgICAgIGxldCBiYWNrID0gcnVsZU1ha2VTYXZlKHJ1bGVNYWtlKTsNCiAgICAgIGJhY2sudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIC8v6L+U5ZueIOi3s+i9rOS5i+WQjuWkhOeQhg0KICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLmRhdGEudHlwZSkgew0KICAgICAgICAgICAgY2FzZSAiaXNSZXBlYXQiOg0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKA0KICAgICAgICAgICAgICAgIHRoaXMuJHQoInJ1bGVDYWxjdWxhdG9yTWFrZS5maXJzdCIpICsNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucm93cyArDQogICAgICAgICAgICAgICAgICB0aGlzLiR0KCJydWxlQ2FsY3VsYXRvck1ha2UuaW5mb3JtYXRpb24xIikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJpc051bGwiOg0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKA0KICAgICAgICAgICAgICAgIHRoaXMuJHQoInJ1bGVDYWxjdWxhdG9yTWFrZS5maXJzdCIpICsNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucm93ICsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJHQoInJ1bGVDYWxjdWxhdG9yTWFrZS5pbmZvcm1hdGlvbiIpDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiZmFpbCI6DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy4kdCgicnVsZUNhbGN1bGF0b3JNYWtlLmZhaWwiKSk7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiYXR0ciI6DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy4kdCgicnVsZU1ha2UuYXR0ckluZm8iKSk7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgaWYgKCF0aGlzLnVwZGF0ZUR5bmFtaWMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuJHBhcmVudC5zZXRSdWxlTWFraW5nKHRydWUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMucnVsZU9ubHkgPSB0cnVlOw0KICAgICAgICAgICAgICB0aGlzLnNob3dCdXR0b24gPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5pbmRleE1vZGVsLnRyZWVSdWxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSB0cnVlOw0KICAgIH0sDQogICAgLy/lhrPnrZbooagNCiAgICBhc3luYyBkZWNpc2lvbnRhYmxlKCkgew0KICAgICAgdGhpcy5keW5hbWljVGFibGVMaXN0LnBhcmFtQXJyID0gW107DQogICAgICB0aGlzLmR5bmFtaWNUYWJsZUxpc3QucGFyYW1MaXN0ID0gW107DQogICAgICB0aGlzLmNvbHVtbk5hbWUgPSBbXTsNCiAgICAgIHRoaXMuY29sdW1uVHlwZSA9IFtdOw0KICAgICAgdGhpcy5ydWxlVXNlQm9tTGlzdCA9IFtdOw0KICAgICAgdGhpcy5ydWxlVXNlRnVuY3Rpb25MaXN0ID0gW107DQogICAgICB0aGlzLnJ1bGVVc2VDb21tYW5kTGlzdCA9IFtdOw0KICAgICAgdGhpcy5zcWxTdGF0ZW1lbnQgPQ0KICAgICAgICAic2VsZWN0IFJlc3VsdCxSdWxlSWQgZnJvbSAkUnVsZURhdGEkICIgKw0KICAgICAgICB0aGlzLmRlY2lzaW9uUm93bmFtZSArDQogICAgICAgICIgd2hlcmUgIjsNCiAgICAgIHRoaXMud2hlbiA9ICIgIjsNCiAgICAgIHRoaXMudGhlbiA9ICIgIjsNCiAgICAgIHRoaXMubXVsdGl2YWx1ZWRFeHByZXNzaW9uID0iICI7DQogICAgICB2YXIgcnVsZVN0YXRlID0gdHJ1ZTsNCiAgICAgIHZhciBjYWxTdGF0ZSA9IHRydWU7DQoNCiAgICAgIC8v6KeE5YiZ6KGo6L6+5byPICDkuI4gd2hlbuaPj+i/sA0KICAgICAgaWYgKCF0aGlzLnNob3dEeW5hbWljVGFibGUpIHsNCiAgICAgICAgLy/lrZfmrrXlkI3kuI7nsbvlnovotYvlgLznu5nlhrPnrZbooajlr7nosaENCiAgICAgICAgdGhpcy5pbmRleE1vZGVsLnRyZWVSdWxlID0gZmFsc2U7DQogICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSB0cnVlOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2FsY3VsYXRvci5ydWxlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIGlmU2tpcEFycmF5ID0gdGhpcy5jYWxjdWxhdG9yLnJ1bGVbaV0uaWZTa2lwOyAvL+e6tQ0KICAgICAgICAgIC8v5aSa5LiqaWYNCiAgICAgICAgICB2YXIgY29sdW1uID0gIHRoaXMuZGVjaXNpb25Sb3duYW1lICsgIi5DT0xVTU4iICsgaSArICIgIjsNCiAgICAgICAgICB2YXIgdGhyZWVZdWFuID0gIigoQCk/IzokKSI7DQogICAgICAgICAgdmFyIGNvbW1hbmRUeXBlID0NCiAgICAgICAgICAgIGlmU2tpcEFycmF5W2lmU2tpcEFycmF5Lmxlbmd0aCAtIDFdLnJ1bGVDb21tYW5kLmNvbW1hbmRUeXBlOw0KICAgICAgICAgIHZhciBjb2x1bURlc2NyaXB0aW9uID0gIiI7DQogICAgICAgICAgbGV0IHNob3cgPSB0cnVlOw0KICAgICAgICAgIHZhciBvcHRpb24gPSBbXTsNCiAgICAgICAgICB2YXIgcmVzdWx0ID0gew0KICAgICAgICAgICAgZXhwcmVzc2lvbjogIiIsDQogICAgICAgICAgICBjb2x1bURlc2NyaXB0aW9uOiAiIiwNCiAgICAgICAgICAgIHNxbFN0YXRlbWVudDogIiIsDQogICAgICAgICAgICBwcmVwYXJlRXhwcmVzc2lvbjoiIg0KICAgICAgICAgIH07DQogICAgICAgICAgaWYgKHRoaXMuY2FsY3VsYXRvci5ydWxlW2ldLmlmQ29ublR5cGUgJiYgaSA+IDApIHsNCiAgICAgICAgICAgIHRoaXMud2hlbiArPSAiIHx8ICI7DQogICAgICAgICAgICB0aGlzLm11bHRpdmFsdWVkRXhwcmVzc2lvbiArPSAiIHx8ICI7DQogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5jYWxjdWxhdG9yLnJ1bGVbaV0uaWZDb25uVHlwZSAmJiBpID4gMCkgew0KICAgICAgICAgICAgdGhpcy53aGVuICs9ICIgJiYgIjsNCiAgICAgICAgICAgIHRoaXMubXVsdGl2YWx1ZWRFeHByZXNzaW9uICs9ICIgJiYgIjsNCiAgICAgICAgICB9DQogICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucmVjdXJzaXZlUnVsZVBhcmFtZXRlcnMoaWZTa2lwQXJyYXksIHJlc3VsdCk7DQogICAgICAgICAgY29sdW1EZXNjcmlwdGlvbiArPSByZXN1bHQuY29sdW1EZXNjcmlwdGlvbjsgLy/kuIDooYwNCiAgICAgICAgICB0aGlzLnNxbFN0YXRlbWVudCArPSByZXN1bHQuc3FsU3RhdGVtZW50Ow0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIGlmU2tpcEFycmF5W2lmU2tpcEFycmF5Lmxlbmd0aCAtIDFdLnJ1bGVDb21tYW5kLmNvbW1hbmRUeXBlID09DQogICAgICAgICAgICAiU3RyaW5nIg0KICAgICAgICAgICkgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ib21JdGVtLnNvdXJjZSAmJg0KICAgICAgICAgICAgICBpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ib21JdGVtLnNvdXJjZSAhPSAiIiAmJg0KICAgICAgICAgICAgICBpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ib21JdGVtLmNvbW1hbmRUeXBlID09DQogICAgICAgICAgICAgICAgIlN0cmluZyIgJiYNCiAgICAgICAgICAgICAgaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0ucnVsZUNvbW1hbmQucGFyYU51bSA+IDANCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICB0aGlzLmNvbHVtblR5cGVbdGhpcy5jb2x1bW5UeXBlLmxlbmd0aF0gPSAiU3RyaW5nIjsNCiAgICAgICAgICAgICAgLy/ojrflj5bkuIvmi4nlhoXlrrkNCiAgICAgICAgICAgICAgY29uc3QgcGFyYW1zTWFwID0gew0KICAgICAgICAgICAgICAgIHNxbDogaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0uYm9tSXRlbS5zb3VyY2UNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgdmFyIGRhdGFMaXN0ID0gKA0KICAgICAgICAgICAgICAgIGF3YWl0IGdldENvbWJveERhdGEodGhpcy5idWlsZFJlcXVlc3REYXRhKHBhcmFtc01hcCkpDQogICAgICAgICAgICAgICkuZGF0YTsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYXRhTGlzdC5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhTGlzdFtqXS5jb2RlLA0KICAgICAgICAgICAgICAgICAgbGFiZWw6IGRhdGFMaXN0W2pdLmNvZGUgKyAiOiIgKyBkYXRhTGlzdFtqXS5jb2RlTmFtZQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ydWxlQ29tbWFuZC5pbXBsZW5tYXRpb24gPT0NCiAgICAgICAgICAgICAgICAibXVsdGlwbGUiDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIGNvbW1hbmRUeXBlID0gIm11bHRpcGxlIjsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9ICJzZWxlY3QiOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbW1hbmRUeXBlID0NCiAgICAgICAgICAgICAgaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0ucnVsZUNvbW1hbmQuY29tbWFuZFR5cGU7DQogICAgICAgICAgICBsZXQgcHJlQ2hlY2sgPSBpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ib21JdGVtLnByZUNoZWNrOw0KICAgICAgICAgICAgbGV0IHR5cGUgPSAiIjsNCiAgICAgICAgICAgIGlmIChpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ydWxlQ29tbWFuZC5wYXJhTnVtID4gMCkgew0KICAgICAgICAgICAgICB0eXBlID0gY29tbWFuZFR5cGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIChwcmVDaGVjayA9PSAiTjAyIiB8fCBwcmVDaGVjayA9PSAiTjAzIikgJiYNCiAgICAgICAgICAgICAgaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0ucnVsZUNvbW1hbmQucGFyYU51bSA+IDANCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICB0eXBlID0gIkludCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmNvbHVtblR5cGVbdGhpcy5jb2x1bW5UeXBlLmxlbmd0aF0gPSB0eXBlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY29tbWFuZFR5cGUgPT0gIm11bHRpcGxlIikgew0KICAgICAgICAgICAgICAgIHRoaXMud2hlbiArPSAiaW5zdHJFeHQoIiArIGNvbHVtbisgIiwiICsgcmVzdWx0LmV4cHJlc3Npb24gKyAiKSA+IDAiOw0KICAgICAgICAgICAgICAgIHRoaXMubXVsdGl2YWx1ZWRFeHByZXNzaW9uICs9ICAiaW5zdHJFeHQoIiArIGNvbHVtbisgIiwoIiArIHJlc3VsdC5leHByZXNzaW9uICsgIiA9bnVsbCA/ICIrY29sdW1uKyI6IityZXN1bHQuZXhwcmVzc2lvbisiKSkgPiAwIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMud2hlbiArPSByZXN1bHQuZXhwcmVzc2lvbjsNCiAgICAgICAgICAgICAgICBpZiAoaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0ucnVsZUNvbW1hbmQucGFyYU51bSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVuICs9IGlmU2tpcEFycmF5W2lmU2tpcEFycmF5Lmxlbmd0aCAtIDFdLnJ1bGVDb21tYW5kLmltcGxlbm1hdGlvbiArIGNvbHVtbjsNCiAgICAgICAgICAgICAgICAgICAgdGhyZWVZdWFuID0gdGhyZWVZdWFuLnJlcGxhY2UoIkAiLHJlc3VsdC5wcmVwYXJlRXhwcmVzc2lvbik7DQogICAgICAgICAgICAgICAgICAgIHRocmVlWXVhbiA9IHRocmVlWXVhbi5yZXBsYWNlKCIjIixjb2x1bW4pOw0KICAgICAgICAgICAgICAgICAgICB0aHJlZVl1YW4gPSB0aHJlZVl1YW4ucmVwbGFjZSgiJCIscmVzdWx0LmV4cHJlc3Npb24pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpdmFsdWVkRXhwcmVzc2lvbiArPSB0aHJlZVl1YW4gKyBpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5ydWxlQ29tbWFuZC5pbXBsZW5tYXRpb24gICsgY29sdW1uOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5ydWxlVXNlQ29tbWFuZExpc3RbdGhpcy5ydWxlVXNlQ29tbWFuZExpc3QubGVuZ3RoXSA9IHsNCiAgICAgICAgICAgICAgICBjb21tYW5kSWQ6IGlmU2tpcEFycmF5W2lmU2tpcEFycmF5Lmxlbmd0aCAtIDFdLnJ1bGVDb21tYW5kLmlkDQogICAgICAgICAgfTsNCiAgICAgICAgICBpZiAoaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0ucnVsZUNvbW1hbmQucGFyYU51bSA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbk5hbWVbdGhpcy5jb2x1bW5OYW1lLmxlbmd0aF0gPSAiQ09MVU1OIiArIGk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5lbmRQYXJlbnRoZXNpcykgew0KICAgICAgICAgICAgZm9yICgNCiAgICAgICAgICAgICAgbGV0IGggPSAwOw0KICAgICAgICAgICAgICBoIDwgaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0uZW5kUGFyZW50aGVzaXNOdW1iZXI7DQogICAgICAgICAgICAgIGgrKw0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIHRoaXMud2hlbiArPSAiICkgIjsNCiAgICAgICAgICAgICAgY29sdW1EZXNjcmlwdGlvbiArPSAiLCksIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgaWZTa2lwQXJyYXlbaWZTa2lwQXJyYXkubGVuZ3RoIC0gMV0ucnVsZUNvbW1hbmQgJiYNCiAgICAgICAgICAgIGlmU2tpcEFycmF5W2lmU2tpcEFycmF5Lmxlbmd0aCAtIDFdLnJ1bGVDb21tYW5kLnBhcmFOdW0gPiAwDQogICAgICAgICAgKSB7DQogICAgICAgICAgICB0aGlzLmR5bmFtaWNUYWJsZUxpc3QucGFyYW1BcnJbDQogICAgICAgICAgICAgIHRoaXMuZHluYW1pY1RhYmxlTGlzdC5wYXJhbUFyci5sZW5ndGgNCiAgICAgICAgICAgIF0gPSB7DQogICAgICAgICAgICAgIHByb3A6IGNvbHVtRGVzY3JpcHRpb24sDQogICAgICAgICAgICAgIGtleUlkOiBjb2x1bURlc2NyaXB0aW9uLA0KICAgICAgICAgICAgICBjb21tYW5kVHlwZTogY29tbWFuZFR5cGUsDQogICAgICAgICAgICAgIGNvbHVtbjoiQ09MVU1OIiArIGksDQogICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbg0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB0aGlzLmNhbGN1bGF0b3IucnVsZVtpXS5jb2x1bURlc2NyaXB0aW9uID0gY29sdW1EZXNjcmlwdGlvbjsNCiAgICAgICAgfQ0KICAgICAgICAvL+eul+azleihqOi+vuW8j+eUn+aIkA0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2FsY3VsYXRvci5jYWwubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICB2YXIgdGhlblNraXBBcnJheSA9IHRoaXMuY2FsY3VsYXRvci5jYWxbaV0uaWZTa2lwOyAvL+e6tQ0KICAgICAgICAgIHZhciByZXN1bHQgPSB7DQogICAgICAgICAgICBleHByZXNzaW9uOiAiIiwNCiAgICAgICAgICAgIGNvbHVtRGVzY3JpcHRpb246ICIiLA0KICAgICAgICAgICAgc3FsU3RhdGVtZW50OiAiIg0KICAgICAgICAgIH07DQogICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucmVjdXJzaXZlUnVsZVBhcmFtZXRlcnModGhlblNraXBBcnJheSwgcmVzdWx0KTsNCiAgICAgICAgICBjb2x1bURlc2NyaXB0aW9uICs9IHJlc3VsdC5jb2x1bURlc2NyaXB0aW9uOyAvL+S4gOihjA0KICAgICAgICAgIHRoaXMudGhlbiArPSByZXN1bHQuZXhwcmVzc2lvbjsNCiAgICAgICAgICB0aGlzLmNhbGN1bGF0b3IuY2FsW2ldLmNvbHVtRGVzY3JpcHRpb24gPSByZXN1bHQuY29sdW1EZXNjcmlwdGlvbjsNCiAgICAgICAgICAvL+WujOaIkHNxbOaLvOaOpSAg566X5rOV5b6q546v5LiA5qyhDQogICAgICAgICAgdGhpcy5zcWxTdGF0ZW1lbnQgPSB0aGlzLnNxbFN0YXRlbWVudC5yZXBsYWNlKA0KICAgICAgICAgICAgIlJlc3VsdCIsDQogICAgICAgICAgICByZXN1bHQuc3FsU3RhdGVtZW50DQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhlblNraXBBcnJheVt0aGVuU2tpcEFycmF5Lmxlbmd0aCAtIDFdLnJ1bGVDb21tYW5kLnJlc3VsdFR5cGUgIT0NCiAgICAgICAgICAiZW5kIg0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLnrpfms5XlrprkuYnov5jmnKrnu5PmnZ/vvIEiKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFpZlNraXBBcnJheVtpZlNraXBBcnJheS5sZW5ndGggLSAxXS5zaG93RW5kKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6KeE5YiZ5a6a5LmJ6L+Y5pyq5a6M5oiQISIpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmNvbHVtbk5hbWVbdGhpcy5jb2x1bW5OYW1lLmxlbmd0aF0gPSAiUkVTVUxUIjsNCiAgICAgICAgLy8gIHRoaXMuY29sdW1uTmFtZVt0aGlzLmNvbHVtbk5hbWUubGVuZ3RoXSA9ICJSVUxFSUQiOw0KICAgICAgICB0aGlzLmNvbHVtblR5cGVbdGhpcy5jb2x1bW5UeXBlLmxlbmd0aF0gPSAiU3RyaW5nIjsNCiAgICAgICAgLy90aGlzLmNvbHVtblR5cGVbdGhpcy5jb2x1bW5UeXBlLmxlbmd0aF0gPSAiYnV0dG9uIjsNCiAgICAgICAgdGhpcy5keW5hbWljVGFibGVMaXN0LnBhcmFtQXJyWw0KICAgICAgICAgIHRoaXMuZHluYW1pY1RhYmxlTGlzdC5wYXJhbUFyci5sZW5ndGgNCiAgICAgICAgXSA9IHsNCiAgICAgICAgICBwcm9wOiAiUkVTVUxUX0JPTURUVEFCTEVfRFRSQVRFIiwNCiAgICAgICAgICBrZXlJZDogIlJFU1VMVF9CT01EVFRBQkxFX0RUUkFURSIsDQogICAgICAgICAgY29tbWFuZFR5cGU6ICJSRVNVTFQiLA0KICAgICAgICAgIGNvbHVtbjogIlJFU1VMVCINCiAgICAgICAgfTsNCiAgICAgICAgLy/lvoXlrpoNCiAgICAgICAgLyp0aGlzLmR5bmFtaWNUYWJsZUxpc3QucGFyYW1BcnJbDQogICAgICAgICAgdGhpcy5keW5hbWljVGFibGVMaXN0LnBhcmFtQXJyLmxlbmd0aA0KICAgICAgICBdID0gew0KICAgICAgICAgIHByb3A6ICJSRVNVTFRfUkVTX01VTFRNU0ciLA0KICAgICAgICAgIGtleUlkOiAiUkVTVUxUX1JFU19NVUxUTVNHIiwNCiAgICAgICAgICBjb21tYW5kVHlwZTogIlJVTEVJRCIsDQogICAgICAgICAgY29sdW1uOiAiUlVMRUlEIg0KICAgICAgICB9OyovDQogICAgICAgIHZhciBrZXlJdGVtQXJyID0gdGhpcy5keW5hbWljVGFibGVMaXN0LnBhcmFtQXJyOw0KICAgICAgICB2YXIgcHVzaE9iaiA9IHt9Ow0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleUl0ZW1BcnIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBwdXNoT2JqW2tleUl0ZW1BcnJbaV0uY29sdW1uXSA9ICIiOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuZHluYW1pY1RhYmxlTGlzdC5wYXJhbUxpc3QucHVzaChwdXNoT2JqKTsNCiAgICAgICAgdGhpcy5zaG93RHluYW1pY1RhYmxlID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5kZWxJdGVtVGVtcCA9IGZhbHNlOw0KICAgICAgICB0aGlzLmFkZFJ1bGVUZW1wID0gZmFsc2U7DQogICAgICAgIHRoaXMucnVsZU9ubHkgPSB0cnVlOw0KICAgICAgICB0aGlzLnNwYW5Ob2RlRW5hYmxlZCA9IGZhbHNlOw0KICAgICAgICB0aGlzLmJ0blN0YXRlID0gIjIiOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/kv67mlLnop4TliJkNCiAgICB1cGRhdGVSdWxlKCkgew0KICAgICAgaWYgKHRoaXMuc2hvd0R5bmFtaWNUYWJsZSkgew0KICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gZmFsc2U7DQogICAgICAgIHRoaXMuYnRuU3RhdGUgPSAiMiI7DQogICAgICAgIHRoaXMuc2hvd0J1dHRvbiA9IHRydWU7DQogICAgICAgIHRoaXMuc2hvd0R5bmFtaWNUYWJsZSA9IGZhbHNlOw0KICAgICAgICB0aGlzLmRlbEl0ZW1UZW1wID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5hZGRSdWxlVGVtcCA9IHRydWU7DQogICAgICAgIHRoaXMucnVsZU9ubHkgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5idG5TdGF0ZSA9ICIxIjsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldE11bHRpbGluZ3VhbChrZXksIG5hbWUpIHsNCiAgICAgIC8v6Iul57yT5a2Y5Y+W5LiN5Yiw5YC85YiZ5L2/55So5a6a5LmJ55qEbmFtZQ0KICAgICAgdmFyIHJlc3VsdCA9IG5hbWU7DQogICAgICBpZiAoa2V5ICYmIGtleSAhPT0gIiIgJiYga2V5ICE9ICJ1bmRlZmluZWQiKSB7DQogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMubGFuZ3VhZ2UgKyAiXyIgKyBrZXk7DQoNCiAgICAgICAgaWYgKHRoaXMucnVsZU1lc3NhZ2VJbmZvQm9tW3ZhbHVlXSkgew0KICAgICAgICAgIHJlc3VsdCA9IHRoaXMucnVsZU1lc3NhZ2VJbmZvQm9tW3ZhbHVlXTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9LA0KICAgIC8v6YCS5b2S5Y+W5YC8IHBhcmFtDQogICAgcmVjdXJzaXZlUnVsZVBhcmFtZXRlcnMoaWZTa2lwQXJyYXksIHJlc3VsdCkgew0KICAgICAgLy/kuIDooYwg5aSa5Liq5pWw5o2uICBib20gYm9tSXRlbSDov5DnrpfnrKYgfCBmdW5jdGlvbiDov5DnrpfnrKYNCiAgICAgIC8v56ys5LiA5Liq6IqC54K5ICDkuZ/lsLHmmK8gYm9tIOaIliBmdW5jIOW3puaLrOWPtw0KICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpZlNraXBBcnJheS5sZW5ndGg7IGorKykgew0KICAgICAgICAvL+aoqg0KDQogICAgICAgIHZhciBpZlNraXAgPSBpZlNraXBBcnJheVtqXTsNCiAgICAgICAgaWYgKGogPiAwKSB7DQogICAgICAgICAgcmVzdWx0LmNvbHVtRGVzY3JpcHRpb24gKz0gIiwiOw0KICAgICAgICB9DQogICAgICAgIGlmIChpZlNraXAuTGVmdFBhcmVudGhlc2lzKSB7DQogICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBpZlNraXAuTGVmdFBhcmVudGhlc2lzTnVtYmVyOyBjKyspIHsNCiAgICAgICAgICAgIHJlc3VsdC5leHByZXNzaW9uICs9ICIoIjsNCiAgICAgICAgICAgIHJlc3VsdC5jb2x1bURlc2NyaXB0aW9uICs9ICIsKCwiOw0KICAgICAgICAgICAgcmVzdWx0LnNxbFN0YXRlbWVudCArPSAiICggIjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGlmU2tpcC5mdW5jKS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgLy/lh73mlbANCiAgICAgICAgICByZXN1bHQuZXhwcmVzc2lvbiArPSBpZlNraXAuZnVuYy5uYW1lICsgIiAoIjsNCiAgICAgICAgICByZXN1bHQuc3FsU3RhdGVtZW50ICs9IGlmU2tpcC5mdW5jLm5hbWUgKyAiICgiOw0KICAgICAgICAgIHJlc3VsdC5jb2x1bURlc2NyaXB0aW9uICs9IGlmU2tpcC5mdW5jLmZ1bmNLZXkgKyAiLCgsIjsgLy/lt6bmi6zlj7cNCiAgICAgICAgICAvL+WPguaVsA0KICAgICAgICAgIHRoaXMucnVsZVVzZUZ1bmN0aW9uTGlzdFt0aGlzLnJ1bGVVc2VGdW5jdGlvbkxpc3QubGVuZ3RoXSA9IHsNCiAgICAgICAgICAgIGZ1bmN0aW9uTmFtZTogaWZTa2lwLmZ1bmMubmFtZQ0KICAgICAgICAgIH07DQogICAgICAgICAgaWYgKGlmU2tpcC5mdW5jdGlvbi5wYXJhbS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAvL+mAmui/h+WPguaVsOmBjeWOhuatpOaXtg0KICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBpZlNraXAuZnVuY3Rpb24ucGFyYW0ubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZWN1cnNpdmVSdWxlUGFyYW1ldGVycygNCiAgICAgICAgICAgICAgICBpZlNraXAuZnVuY3Rpb24ucGFyYW1bbV0uaWZTa2lwLA0KICAgICAgICAgICAgICAgIHJlc3VsdA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICByZXN1bHQuY29sdW1EZXNjcmlwdGlvbjsNCiAgICAgICAgICAgICAgLy/mnIDlkI4NCiAgICAgICAgICAgICAgaWYgKG0gPT0gaWZTa2lwLmZ1bmN0aW9uLnBhcmFtLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICByZXN1bHQuZXhwcmVzc2lvbiArPSAiICkiOw0KICAgICAgICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gIiApIjsNCiAgICAgICAgICAgICAgICByZXN1bHQuY29sdW1EZXNjcmlwdGlvbiArPSAiLCksIjsgLy/lj7Pmi6zlj7cNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXN1bHQuY29sdW1EZXNjcmlwdGlvbiArPSAiLCMsIjsNCiAgICAgICAgICAgICAgICByZXN1bHQuZXhwcmVzc2lvbiArPSAiICwgIjsNCiAgICAgICAgICAgICAgICByZXN1bHQuc3FsU3RhdGVtZW50ICs9ICIgLCI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAoaWZTa2lwLmNvbnN0YW50LnZhbHVlKSB7DQogICAgICAgICAgLy/luLjmlbANCiAgICAgICAgICByZXN1bHQuZXhwcmVzc2lvbiArPSAiICIgKyBpZlNraXAuY29uc3RhbnQudmFsdWUgKyAiICI7DQogICAgICAgICAgcmVzdWx0LmNvbHVtRGVzY3JpcHRpb24gKz0gIiwiICsgaWZTa2lwLmNvbnN0YW50LnZhbHVlICsgIiwiOw0KICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gIiAiICsgaWZTa2lwLmNvbnN0YW50LnZhbHVlICsgIiAiOw0KICAgICAgICAgIGlmIChpZlNraXAucmlnaHRQYXJlbnRoZXNpcykgew0KICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBpZlNraXAucmlnaHRQYXJlbnRoZXNpc051bWJlcjsgbisrKSB7DQogICAgICAgICAgICAgIHJlc3VsdC5leHByZXNzaW9uICs9ICIpIjsNCiAgICAgICAgICAgICAgcmVzdWx0LmNvbHVtRGVzY3JpcHRpb24gKz0gIiwpLCI7DQogICAgICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gIikiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoaWZTa2lwLmJvbS5ib21UeXBlID09ICIxIikgew0KICAgICAgICAgICAgLy9ib20NCiAgICAgICAgICAgIC8vYm9tICDlpoLmnpzmmK/nu5Pmnpzpm4YNCiAgICAgICAgICAgIGlmIChpZlNraXAuYm9tLm5hbWUgPT0gIkJPTURUVGFibGUiKSB7DQogICAgICAgICAgICAgIHJlc3VsdC5leHByZXNzaW9uICs9IHRoaXMuZGVjaXNpb25Sb3duYW1lICsgIi5SRVNVTFQgIjsNCiAgICAgICAgICAgICAgcmVzdWx0LnNxbFN0YXRlbWVudCArPSB0aGlzLmRlY2lzaW9uUm93bmFtZSArICIuUkVTVUxUICI7DQogICAgICAgICAgICAgIHJlc3VsdC5jb2x1bURlc2NyaXB0aW9uICs9IGlmU2tpcC5ib20uYm9tS2V5ICsgIiwiOw0KICAgICAgICAgICAgICByZXN1bHQuY29sdW1EZXNjcmlwdGlvbiArPQ0KICAgICAgICAgICAgICAgICJMSU5LX0xJTktfT0YsIiArIGlmU2tpcC5ib21JdGVtLmJvbUl0ZW1LZXkgKyAiLCI7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXN1bHQuZXhwcmVzc2lvbiArPSBpZlNraXAuYm9tLm5hbWUgKyAiLiI7DQogICAgICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gIiA/IiArIGlmU2tpcC5ib20ubmFtZSArICIuIjsNCiAgICAgICAgICAgICAgcmVzdWx0LmNvbHVtRGVzY3JpcHRpb24gKz0gaWZTa2lwLmJvbS5ib21LZXkgKyAiLCI7DQogICAgICAgICAgICAgIHJlc3VsdC5leHByZXNzaW9uICs9IGlmU2tpcC5ib21JdGVtLm5hbWUgKyAiICI7DQogICAgICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gaWZTa2lwLmJvbUl0ZW0ubmFtZSArICI/IjsNCiAgICAgICAgICAgICAgcmVzdWx0LmNvbHVtRGVzY3JpcHRpb24gKz0NCiAgICAgICAgICAgICAgICAiTElOS19MSU5LX09GLCIgKyBpZlNraXAuYm9tSXRlbS5ib21JdGVtS2V5ICsgIiwiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoaWZTa2lwLnJpZ2h0UGFyZW50aGVzaXMpIHsNCiAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBpZlNraXAucmlnaHRQYXJlbnRoZXNpc051bWJlcjsgbisrKSB7DQogICAgICAgICAgICAgICAgcmVzdWx0LmV4cHJlc3Npb24gKz0gIikiOw0KICAgICAgICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gIikiOw0KICAgICAgICAgICAgICAgIHJlc3VsdC5jb2x1bURlc2NyaXB0aW9uICs9ICIsKSwiOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZihpZlNraXAuYm9tLm5hbWUgJiYgcmVzdWx0LnByZXBhcmVFeHByZXNzaW9uICE9ICIiKXsNCiAgICAgICAgICAgICAgICAgIHJlc3VsdC5wcmVwYXJlRXhwcmVzc2lvbiA9ICByZXN1bHQucHJlcGFyZUV4cHJlc3Npb24rIiB8fCAiOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlc3VsdC5wcmVwYXJlRXhwcmVzc2lvbiA9IHJlc3VsdC5wcmVwYXJlRXhwcmVzc2lvbiArIiAiK2lmU2tpcC5ib20ubmFtZSsiLiIraWZTa2lwLmJvbUl0ZW0ubmFtZSsiID09IG51bGwiOw0KICAgICAgICAgICAgdGhpcy5ydWxlVXNlQm9tTGlzdFt0aGlzLnJ1bGVVc2VCb21MaXN0Lmxlbmd0aF0gPSB7DQogICAgICAgICAgICAgIGJvbU5hbWU6IGlmU2tpcC5ib20ubmFtZSwNCiAgICAgICAgICAgICAgYm9tSXRlbU5hbWU6IGlmU2tpcC5ib21JdGVtLm5hbWUNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICgNCiAgICAgICAgICBpZlNraXAucnVsZUNvbW1hbmQucmVzdWx0VHlwZSAhPSAiZW5kIiAmJg0KICAgICAgICAgIGlmU2tpcC5ydWxlQ29tbWFuZC5pbXBsZW5tYXRpb24gJiYNCiAgICAgICAgICBpZlNraXAucnVsZUNvbW1hbmQuaW1wbGVubWF0aW9uICE9ICJtdWx0aXBsZSImJg0KICAgICAgICAgICBpZlNraXAucnVsZUNvbW1hbmQucmVzdWx0VHlwZSAhPSAiQm9vbGVhbiINCiAgICAgICAgKSB7DQogICAgICAgICAgcmVzdWx0LmV4cHJlc3Npb24gKz0gaWZTa2lwLnJ1bGVDb21tYW5kLmltcGxlbm1hdGlvbiArICIgIjsNCiAgICAgICAgICBpZiAoaWZTa2lwLnJ1bGVDb21tYW5kLmltcGxlbm1hdGlvbiA9PSAiPT0iKSB7DQogICAgICAgICAgICByZXN1bHQuc3FsU3RhdGVtZW50ICs9ICIgPSI7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlc3VsdC5zcWxTdGF0ZW1lbnQgKz0gaWZTa2lwLnJ1bGVDb21tYW5kLmltcGxlbm1hdGlvbiArICIgIjsNCiAgICAgICAgICB9DQogICAgICAgICAgcmVzdWx0LmNvbHVtRGVzY3JpcHRpb24gKz0gaWZTa2lwLnJ1bGVDb21tYW5kLnJ1bGVDb21tYW5kS2V5Ow0KICAgICAgICAgIHRoaXMucnVsZVVzZUNvbW1hbmRMaXN0W3RoaXMucnVsZVVzZUNvbW1hbmRMaXN0Lmxlbmd0aF0gPSB7DQogICAgICAgICAgICBjb21tYW5kSWQ6IGlmU2tpcC5ydWxlQ29tbWFuZC5pZA0KICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfSwNCiAgICBnb0JhY2soKSB7DQogICAgICAvL+i/lOWbnuWIsCDop4TliJnlsZ7mgKcNCiAgICAgIHRoaXMuJHBhcmVudC4kcGFyZW50LnJ1bGVEZWZpbml0aW9uVG8oKTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ibrms/ruleManagement/ruleCalculatorMake","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <div style=\"min-height:520px\">\r\n      <template v-if=\"!query && menu\">\r\n        <cus-page-title-back\r\n          @backTo=\"goBack\"\r\n          :isDialog=\"true\"\r\n          :label=\"$t('ruleCalculatorMake.info')\"\r\n        />\r\n      </template>\r\n      <!-- <template v-if=\"!query && !menu\">\r\n           <div>\r\n              <el-row>\r\n                <el-col :span=\"24\">\r\n                  <label>{{$t('ruleCalculatorMake.info')}}</label>\r\n                </el-col>\r\n              </el-row>\r\n              <hr />\r\n            </div>\r\n        </template>\r\n        <br/>\r\n      <br />-->\r\n      <el-row>\r\n        <span class=\"formtitle\">\r\n          <el-divider direction=\"vertical\" class=\"divider\"></el-divider>\r\n          <span>{{ruleName}}</span>\r\n        </span>\r\n        <span style=\"margin-left: 5px;\">\r\n          <el-link\r\n            v-if=\"!query && !updateDynamic\"\r\n            class=\"updateRule\"\r\n            type=\"primary\"\r\n            style=\"border-bottom:dashed 1px;\"\r\n            :disabled=\"(updateState ? false:'disabled')\"\r\n            @click=\"updateRule()\"\r\n          >{{$t('ruleCalculatorMake.updateDecisiontables')}}</el-link>\r\n        </span>\r\n      </el-row>\r\n      <br />\r\n      <div class=\"rule\">\r\n        <span class=\"then\">{{$t('ruleCalculatorMake.algorithm')}}</span>\r\n        <div class=\"thenSkip\" :class=\"[ruleOnly === true ? 'ruleReadOnly' : '']\">\r\n          <!--项目+规则+算法 模块-->\r\n          <div class=\"header\" v-for=\"(items,indexItems) in calculator.cal\">\r\n            <ruleParameter\r\n              :params=\"items\"\r\n              :ruleList=\"calculator.cal\"\r\n              :RuleCacheData=\"RuleCacheData\"\r\n              :ruleMessageInfoBom=\"ruleMessageInfoBom\"\r\n              :paramIndexItems=\"indexItems\"\r\n              :paramLanguage=\"language\"\r\n            ></ruleParameter>\r\n            <template v-if=\"delItemTemp\">\r\n              <i\r\n                class=\"el-icon-circle-close\"\r\n                type=\"primary\"\r\n                size=\"mini\"\r\n                v-if=\"indexItems>=0\"\r\n                @click=\"delItem(calculator.cal,indexItems)\"\r\n              ></i>\r\n            </template>\r\n          </div>\r\n          <template v-if=\"addRuleTemp\">\r\n            <div class=\"ruleBtn\">\r\n              <i\r\n                class=\"el-icon-circle-plus-outline\"\r\n                size=\"mini\"\r\n                @click=\"addRule(calculator.cal, '', 'then')\"\r\n              ></i>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <div class=\"if\">{{$t('ruleCalculatorMake.conditions')}}</div>\r\n        <div class=\"ifSkip\" :class=\"[ruleOnly === true ? 'ruleReadOnly': '']\">\r\n          <!--项目+规则+算法 模块-->\r\n          <div class=\"header\" v-for=\"(items,indexItems) in calculator.rule\">\r\n            <span\r\n              class=\"add\"\r\n              @click=\"findConnType(items)\"\r\n              v-if=\"indexItems!=0\"\r\n            >{{items.ifConnType?$t('ruleCalculatorMake.or'):$t('ruleCalculatorMake.add')}}</span>\r\n            <ruleParameter\r\n              :params=\"items\"\r\n              :ruleList=\"calculator.rule\"\r\n              :RuleCacheData=\"RuleCacheData\"\r\n              :ruleMessageInfoBom=\"ruleMessageInfoBom\"\r\n              :paramIndexItems=\"indexItems\"\r\n              :paramLanguage=\"language\"\r\n            ></ruleParameter>\r\n            <template v-if=\"delItemTemp\">\r\n              <i\r\n                class=\"el-icon-circle-close\"\r\n                type=\"primary\"\r\n                size=\"mini\"\r\n                v-if=\"indexItems>=0\"\r\n                @click=\"delItem(calculator.rule,indexItems)\"\r\n              ></i>\r\n            </template>\r\n          </div>\r\n          <template v-if=\"addRuleTemp\">\r\n            <div class=\"ruleBtn\">\r\n              <i class=\"el-icon-circle-plus-outline\" size=\"mini\" @click=\"addRule(calculator.rule)\"></i>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <cus-form-title :label=\"$t('ruleCalculatorMake.dynamicModule')\" :first=\"true\"></cus-form-title>\r\n        <template v-if=\"showButton\">\r\n          <el-button\r\n            size=\"mini\"\r\n            class=\"el-icon\"\r\n            type=\"primary\"\r\n            :disabled=\"(btnState === '1' ? false:'disabled')\"\r\n            @click=\"decisiontable()\"\r\n          >\r\n            <svg-icon icon-class=\"createDecisiontable\" />\r\n            {{$t('ruleCalculatorMake.generateDecisiontables')}}\r\n          </el-button>\r\n        </template>\r\n        <div>\r\n          <template v-if=\"showDynamicTable\">\r\n            <div class=\"param\">\r\n              <dynamicTable\r\n                :list=\"dynamicTableList\"\r\n                :treeRule=\"indexModel.treeRule\"\r\n                :ruleMessageInfo=\"ruleMessageInfoBom\"\r\n                :languages=\"language\"\r\n                :code=\"code\"\r\n                :showMessage=\"showMessage\"\r\n              ></dynamicTable>\r\n            </div>\r\n            <template v-if=\"showButton || updateDynamic || ruleFlag == '3' \">\r\n              <br />\r\n              <br />\r\n              <el-button size=\"mini\" style=\"float: right;\" @click=\"dataFormSubmit()\" type=\"primary\">\r\n                <i class=\"el-icon-success el-icon--left\"></i>\r\n                {{ruleMain.id == ''|| this.flag == '3'?$t('ruleCalculatorMake.save'):$t('ruleCalculatorMake.update')}}\r\n              </el-button>\r\n            </template>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </cus-wraper>\r\n</template>\r\n\r\n<script>\r\nimport SelectSearch from \"@/views/ibrms/ruleManagement/selectSearch\";\r\nimport dynamicTable from \"@/views/ibrms/ruleManagement/dynamicTable\";\r\nimport ruleParameter from \"@/views/ibrms/ruleManagement/ruleParameter\";\r\nimport {\r\n  findBomByLanguage,\r\n  findBomItemByLanguageAndBomId,\r\n  findRuleCommandByLanguageAndCommandType,\r\n  ruleMakeSave,\r\n  getComboxData,\r\n  ruleInit\r\n} from \"@/api/ibrms/ruleMake\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nfunction requiredTip(info) {\r\n  return [\r\n    {\r\n      required: true,\r\n      message: info,\r\n      trigger: \"blur\"\r\n    }\r\n  ];\r\n}\r\nexport default {\r\n  name: \"ruleCalculatorMake\",\r\n  data() {\r\n    return {\r\n      btnState: \"1\",\r\n      ruleName: \"\",\r\n      language: \"\",\r\n      visible: false,\r\n      showMessage: false,\r\n      tID: \"\",\r\n      wid: \"100%\",\r\n      loading: false,\r\n      indexModel: {\r\n        treeRule: false\r\n      },\r\n      showDynamicTable: false,\r\n      dataForm: {},\r\n      calculator: {\r\n        rule: [],\r\n        cal: []\r\n      },\r\n      loading: false,\r\n      ifSkipParam: [],\r\n      dynamicTableList: {\r\n        paramArr: [],\r\n        paramList: []\r\n      },\r\n      itemCommandType: \"empty\",\r\n      delItemTemp: true,\r\n      addRuleTemp: true,\r\n      when: \"\",\r\n      whenDescribe: \"\",\r\n      then: \"\",\r\n      thenDescribe: \"\",\r\n      columnName: [],\r\n      columnType: [],\r\n      ruleOnly: false,\r\n      showButton: true,\r\n      decisionRowname: \"dRow\",\r\n      RuleCacheData: {\r\n        ruleBomList: [],\r\n        ruleBomItemList: [],\r\n        ruleCommandList: [],\r\n        ruleFunctionList: []\r\n      },\r\n      ruleMessageInfoBom: {},\r\n      ruleUseBomList: [],\r\n      ruleUseFunctionList: [],\r\n      ruleUseCommandList: [],\r\n      sqlStatement: \"\",\r\n      code: \"\",\r\n      ruleFlag: \"\",\r\n      query: false,\r\n      updateState: false,\r\n      newCode: \"\",\r\n      ruleMain: {\r\n        id: \"\"\r\n      },\r\n      updateDynamic: false,\r\n      menu: false,\r\n      multivaluedExpression:\"\"\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {\r\n    ...mapGetters([\"ruleMessage\"])\r\n  },\r\n  components: {\r\n    dynamicTable,\r\n    SelectSearch,\r\n    ruleParameter\r\n  },\r\n  created() {\r\n    this.language = this.$store.state.app.language;\r\n    this.ruleMessageInfoBom = this.$store.state.ruleMessage.ruleMessages;\r\n    this.RuleCacheData = this.$store.state.ruleCache.ruleCacheData;\r\n    this.init();\r\n  },\r\n  props: [\r\n    \"ruleCode\",\r\n    \"flag\",\r\n    \"ruleQuery\",\r\n    \"copyCode\",\r\n    \"updateDynamicTable\",\r\n    \"menuPage\",\r\n    \"performType\"\r\n  ],\r\n  methods: {\r\n    init() {\r\n      //缓存数据 与多语言信息\r\n      if (this.updateDynamicTable) {\r\n        this.updateDynamic = this.updateDynamicTable;\r\n      }\r\n      this.menu = this.menuPage;\r\n      let code = this.ruleCode;\r\n      this.ruleFlag = this.flag;\r\n      this.query = this.ruleQuery;\r\n      this.code = code;\r\n      this.ruleName = this.$t(\"ruleCalculatorMake.ruleInfo\");\r\n      if (this.updateDynamic || this.query) {\r\n        this.ruleName = this.$t(\"ruleCalculatorMake.ruleInfo1\");\r\n      }\r\n      switch (this.flag) {\r\n        case \"3\":\r\n          code = this.copyCode;\r\n          break;\r\n        case \"7\":\r\n          this.ruleOnly = true;\r\n          this.showButton = false;\r\n          break;\r\n      }\r\n      let param = {\"code\":code,\"performType\":this.performType}\r\n      ruleInit(this.buildRequestData(param)).then(response => {\r\n        //0 是定义  1是查看\r\n        if (response.code == 200 && response.data.ruleShow) {\r\n          //查询 根据规则编码展示规则\r\n          var ruleData = response.data.ruleShow;\r\n          this.ruleMain = response.data.ruleShow;\r\n          this.calculator.cal = JSON.parse(ruleData.thenDesctiption);\r\n          this.calculator.rule = JSON.parse(ruleData.whenDescription);\r\n          this.dynamicTableList = JSON.parse(response.data.ruleShow.dataGet);\r\n          this.showDynamicTable = true;\r\n          this.sqlStatement = ruleData.datatableSource;\r\n          this.whenDescription = ruleData.whenDescription;\r\n          this.when = ruleData.whenExperssion;\r\n          this.then = ruleData.thenExperssion;\r\n          this.multivaluedExpression = ruleData.whenSpecialExperssion;\r\n          this.thenDesctiption = ruleData.thenDesctiption;\r\n          this.columnName = ruleData.columnNames.split(\",\");\r\n          this.columnType = ruleData.columnTypes.split(\",\");\r\n          this.ruleUseBomList = response.data.ruleUseBomList;\r\n          this.ruleUseFunctionList = response.data.ruleUseFunctionList;\r\n          this.ruleUseCommandList = response.data.ruleUseCommandList;\r\n          this.ruleOnly = true;\r\n          this.btnState = \"2\";\r\n          this.showButton = false;\r\n          if (!this.updateDynamic) {\r\n            this.indexModel.treeRule = true;\r\n          }\r\n          this.updateState = true;\r\n          if (this.ruleFlag == \"2\") {\r\n            this.codeVersion = ruleData.codeVersion;\r\n          }\r\n          this.delItemTemp = false;\r\n          this.addRuleTemp = false;\r\n          this.ruleOnly = true;\r\n          this.spanNodeEnabled = false;\r\n        } else {\r\n          this.visible = true;\r\n          this.addRules();\r\n        }\r\n      });\r\n      console.log(\"updateDynamic\", this.updateDynamic + \"_\" + this.showButton);\r\n    },\r\n    clear() {\r\n      this.clearDataForm();\r\n      this.visible = false;\r\n    },\r\n    clearDataForm() {\r\n      for (var a in this.dataForm) {\r\n        this.dataForm[a] = \"\";\r\n      }\r\n    },\r\n    dataRule() {},\r\n    addRules() {\r\n      this.calculator.rule.push({\r\n        ifConnType: false,\r\n        columDescription: \"\",\r\n        ifSkip: [\r\n          {\r\n            LeftParenthesis: false,\r\n            LeftParenthesisNumber: 0,\r\n            rightParenthesis: false,\r\n            rightParenthesisNumber: 0,\r\n            constant: {},\r\n            constantShow: true,\r\n            funcState: false,\r\n            showFuncTemp: false,\r\n            funcList: [],\r\n            funcShow: false,\r\n            func: {},\r\n            function: {\r\n              param: []\r\n            },\r\n            backupBom: {\r\n              bomKey: \"\"\r\n            },\r\n            backupBomItem: {},\r\n            backupFunc: {},\r\n            bomList: [],\r\n            bomItemList: [],\r\n            bom: {\r\n              bomKey: \"\"\r\n            },\r\n            bomItem: {\r\n              bomItemKey: \"\"\r\n            },\r\n            bomShow: true,\r\n            bomItemShow: true,\r\n            showEnd: false,\r\n            showEndTemp: false,\r\n            ruleCommand: {\r\n              ruleCommandKey: \"\",\r\n              commandType: \"\"\r\n            },\r\n            ruleCommands: [],\r\n            ruleCommandShow: false,\r\n            //是否展示 项目模块\r\n            showBomTemp: true,\r\n            //是否展示连接词\r\n            showConnTemp: false,\r\n            //是否展示规则\r\n            showBomItemTemp: false,\r\n            //是否展示计算类型\r\n            showRuleCommandTemp: false,\r\n            type: \"1\", //1代表正常 bom  2 函数bom\r\n            paramType: \"\",\r\n            ruleType: \"rule\",\r\n            endParenthesis: false,\r\n            ruleEnds: [],\r\n            endParenthesisNumber: 0\r\n          }\r\n        ]\r\n      });\r\n\r\n      this.calculator.cal.push({\r\n        ifConnType: false,\r\n        columDescription: \"\",\r\n        ifSkip: [\r\n          {\r\n            LeftParenthesis: false,\r\n            LeftParenthesisNumber: 0,\r\n            rightParenthesis: false,\r\n            rightParenthesisNumber: 0,\r\n            constant: {},\r\n            constantShow: true,\r\n            funcState: false,\r\n            showFuncTemp: false,\r\n            funcList: [],\r\n            funcShow: false,\r\n            func: {},\r\n            function: {\r\n              param: []\r\n            },\r\n            backupBom: {\r\n              bomKey: \"\"\r\n            },\r\n            backupBomItem: {},\r\n            backupFunc: {},\r\n            bomList: [],\r\n            bomItemList: [],\r\n            bom: {\r\n              bomKey: \"\"\r\n            },\r\n            bomItem: {\r\n              bomItemKey: \"\"\r\n            },\r\n            bomShow: true,\r\n            bomItemShow: true,\r\n            showEnd: false,\r\n            showEndTemp: false,\r\n            ruleCommand: {\r\n              ruleCommandKey: \"\",\r\n              commandType: \"\"\r\n            },\r\n            ruleCommands: [],\r\n            ruleCommandShow: false,\r\n            //是否展示 项目模块\r\n            showBomTemp: true,\r\n            //是否展示连接词\r\n            showConnTemp: false,\r\n            //是否展示规则\r\n            showBomItemTemp: false,\r\n            //是否展示计算类型\r\n            showRuleCommandTemp: false,\r\n            type: \"1\", //1代表正常 bom  2 函数bom\r\n            paramType: \"\",\r\n            ruleType: \"cal\",\r\n            endParenthesis: false,\r\n            ruleEnds: [],\r\n            endParenthesisNumber: 0\r\n          }\r\n        ]\r\n      });\r\n    },\r\n\r\n    //新增一个如果模块\r\n    addRule(rule, module, then) {\r\n      if (then) {\r\n        if (rule.length >= 1) {\r\n          return;\r\n        }\r\n        rule.push({\r\n          ifConnType: false,\r\n          columDescription: \"\",\r\n          ifSkip: [\r\n            {\r\n              LeftParenthesis: false,\r\n              LeftParenthesisNumber: 0,\r\n              rightParenthesis: false,\r\n              rightParenthesisNumber: 0,\r\n              constant: {},\r\n              constantShow: true,\r\n              funcState: false,\r\n              showFuncTemp: false,\r\n              funcList: [],\r\n              funcShow: false,\r\n              func: {},\r\n              function: {\r\n                param: []\r\n              },\r\n              backupBom: {\r\n                bomKey: \"\"\r\n              },\r\n              backupBomItem: {},\r\n              backupFunc: {},\r\n              bomList: [],\r\n              bomItemList: [],\r\n              bom: {\r\n                bomKey: \"\"\r\n              },\r\n              bomItem: {\r\n                bomItemKey: \"\"\r\n              },\r\n              bomShow: true,\r\n              bomItemShow: true,\r\n              showEnd: false,\r\n              showEndTemp: false,\r\n              ruleCommand: {\r\n                ruleCommandKey: \"\",\r\n                commandType: \"\"\r\n              },\r\n              ruleCommands: [],\r\n              ruleCommandShow: false,\r\n              //是否展示 项目模块\r\n              showBomTemp: true,\r\n              //是否展示连接词\r\n              showConnTemp: false,\r\n              //是否展示规则\r\n              showBomItemTemp: false,\r\n              //是否展示计算类型\r\n              showRuleCommandTemp: false,\r\n              type: \"1\", //1代表正常 bom  2 函数bom\r\n              paramType: \"\",\r\n              ruleType: \"cal\",\r\n              endParenthesis: false,\r\n              ruleEnds: [],\r\n              endParenthesisNumber: 0\r\n            }\r\n          ]\r\n        });\r\n      } else {\r\n        rule.push({\r\n          ifConnType: false,\r\n          columDescription: \"\",\r\n          ifSkip: [\r\n            {\r\n              LeftParenthesis: false,\r\n              LeftParenthesisNumber: 0,\r\n              rightParenthesis: false,\r\n              rightParenthesisNumber: 0,\r\n              constant: {},\r\n              constantShow: true,\r\n              funcState: false,\r\n              showFuncTemp: false,\r\n              funcList: [],\r\n              funcShow: false,\r\n              func: {},\r\n              function: {\r\n                param: []\r\n              },\r\n              backupBom: {\r\n                bomKey: \"\"\r\n              },\r\n              backupBomItem: {},\r\n              backupFunc: {},\r\n              bomList: [],\r\n              bomItemList: [],\r\n              bom: {\r\n                bomKey: \"\"\r\n              },\r\n              bomItem: {\r\n                bomItemKey: \"\"\r\n              },\r\n              bomShow: true,\r\n              bomItemShow: true,\r\n              showEnd: false,\r\n              showEndTemp: false,\r\n              ruleCommand: {\r\n                ruleCommandKey: \"\",\r\n                commandType: \"\"\r\n              },\r\n              ruleCommands: [],\r\n              ruleCommandShow: false,\r\n              //是否展示 项目模块\r\n              showBomTemp: true,\r\n              //是否展示连接词\r\n              showConnTemp: false,\r\n              //是否展示规则\r\n              showBomItemTemp: false,\r\n              //是否展示计算类型\r\n              showRuleCommandTemp: false,\r\n              type: \"1\", //1代表正常 bom  2 函数bom\r\n              paramType: \"\",\r\n              ruleType: \"rule\",\r\n              endParenthesis: false,\r\n              ruleEnds: [],\r\n              endParenthesisNumber: 0\r\n            }\r\n          ]\r\n        });\r\n      }\r\n    },\r\n    delItem(items, index) {\r\n      this.dynamicTableList.paramArr.splice(index, 1);\r\n      items.splice(index, 1); //删除index为i,位置的数组元素\r\n    },\r\n    findConnType(item) {\r\n      item.ifConnType = !item.ifConnType;\r\n    },\r\n    //提交保存结果\r\n    dataFormSubmit() {\r\n      //封装最外层对象\r\n      var ruleMake = {\r\n        ruleFlag: this.ruleFlag,\r\n        ruleMain: {},\r\n        ruleElement: {},\r\n        ruleData: {},\r\n        ruleUseBomList: [],\r\n        ruleUseFunctionList: [],\r\n        ruleUseCommandList: []\r\n      };\r\n      ruleMake.ruleData.dataGet = JSON.stringify(this.dynamicTableList);\r\n      var dataType = \"JSON\";\r\n      if (this.dynamicTableList.paramList.length > 50) {\r\n          //解析数据 传入后台\r\n          dataType = \"SQL\";\r\n      }\r\n      ruleMake.ruleData.dataType = dataType;\r\n      ruleMake.ruleData.columnNames = this.columnName.join(\",\");\r\n      ruleMake.ruleData.columnTypes = this.columnType.join(\",\");\r\n      //封装规则信息\r\n      ruleMake.ruleMain.codeVersion = 0;\r\n      ruleMake.ruleMain.code = this.code;\r\n      ruleMake.ruleMain.decisionTablename = \"ruledata\";\r\n      ruleMake.ruleMain.decisionRowname = this.decisionRowname;\r\n      ruleMake.ruleMain.performType = this.performType;\r\n      //明细信息\r\n      ruleMake.ruleMain.whenThenNum = this.calculator.rule.length;\r\n      ruleMake.ruleElement.whenDescription = JSON.stringify(\r\n        this.calculator.rule\r\n      );\r\n      ruleMake.ruleElement.whenExperssion = this.when;\r\n      ruleMake.ruleElement.whenSpecialExperssion = this.multivaluedExpression;\r\n      ruleMake.ruleElement.thenDesctiption = \"\";\r\n      ruleMake.ruleElement.thenExperssion = this.then;\r\n      ruleMake.ruleElement.thenDesctiption = JSON.stringify(\r\n        this.calculator.cal\r\n      );\r\n      ruleMake.ruleElement.showOrder = 1;\r\n      //如果是复制则去掉 Id\r\n      if (this.flag == \"3\") {\r\n        this.ruleUseFunctionList.forEach(val => {\r\n          val.id = \"\";\r\n        });\r\n        this.ruleUseBomList.forEach(val => {\r\n          val.id = \"\";\r\n        });\r\n        this.ruleUseCommandList.forEach(val => {\r\n          val.id = \"\";\r\n        });\r\n      }\r\n      ruleMake.ruleUseFunctionList = this.ruleUseFunctionList;\r\n      ruleMake.ruleUseBomList = this.ruleUseBomList;\r\n      ruleMake.ruleUseCommandList = this.ruleUseCommandList;\r\n      //提交数据 到后台\r\n      var pageName = this.$route.params.pageName;\r\n      console.log(\"ruleMake\", JSON.stringify(ruleMake));\r\n      let back = ruleMakeSave(ruleMake);\r\n      back.then(response => {\r\n        //返回 跳转之后处理\r\n        if (response.code == 200) {\r\n          switch (response.data.type) {\r\n            case \"isRepeat\":\r\n              this.$message.error(\r\n                this.$t(\"ruleCalculatorMake.first\") +\r\n                  response.data.rows +\r\n                  this.$t(\"ruleCalculatorMake.information1\")\r\n              );\r\n              break;\r\n            case \"isNull\":\r\n              this.$message.error(\r\n                this.$t(\"ruleCalculatorMake.first\") +\r\n                  response.data.row +\r\n                  this.$t(\"ruleCalculatorMake.information\")\r\n              );\r\n              break;\r\n            case \"fail\":\r\n              this.$message.error(this.$t(\"ruleCalculatorMake.fail\"));\r\n              break;\r\n            case \"attr\":\r\n              this.$message.error(this.$t(\"ruleMake.attrInfo\"));\r\n              break;\r\n            default:\r\n              if (!this.updateDynamic) {\r\n                this.$parent.$parent.setRuleMaking(true);\r\n              }\r\n              this.ruleOnly = true;\r\n              this.showButton = false;\r\n              this.indexModel.treeRule = true;\r\n              this.notifySuccess(response.message);\r\n          }\r\n        } else {\r\n          this.$message.error(response.message);\r\n        }\r\n      });\r\n      this.updateState = true;\r\n    },\r\n    //决策表\r\n    async decisiontable() {\r\n      this.dynamicTableList.paramArr = [];\r\n      this.dynamicTableList.paramList = [];\r\n      this.columnName = [];\r\n      this.columnType = [];\r\n      this.ruleUseBomList = [];\r\n      this.ruleUseFunctionList = [];\r\n      this.ruleUseCommandList = [];\r\n      this.sqlStatement =\r\n        \"select Result,RuleId from $RuleData$ \" +\r\n        this.decisionRowname +\r\n        \" where \";\r\n      this.when = \" \";\r\n      this.then = \" \";\r\n      this.multivaluedExpression =\" \";\r\n      var ruleState = true;\r\n      var calState = true;\r\n\r\n      //规则表达式  与 when描述\r\n      if (!this.showDynamicTable) {\r\n        //字段名与类型赋值给决策表对象\r\n        this.indexModel.treeRule = false;\r\n        this.updateState = true;\r\n        for (var i = 0; i < this.calculator.rule.length; i++) {\r\n          var ifSkipArray = this.calculator.rule[i].ifSkip; //纵\r\n          //多个if\r\n          var column =  this.decisionRowname + \".COLUMN\" + i + \" \";\r\n          var threeYuan = \"((@)?#:$)\";\r\n          var commandType =\r\n            ifSkipArray[ifSkipArray.length - 1].ruleCommand.commandType;\r\n          var columDescription = \"\";\r\n          let show = true;\r\n          var option = [];\r\n          var result = {\r\n            expression: \"\",\r\n            columDescription: \"\",\r\n            sqlStatement: \"\",\r\n            prepareExpression:\"\"\r\n          };\r\n          if (this.calculator.rule[i].ifConnType && i > 0) {\r\n            this.when += \" || \";\r\n            this.multivaluedExpression += \" || \";\r\n          } else if (!this.calculator.rule[i].ifConnType && i > 0) {\r\n            this.when += \" && \";\r\n            this.multivaluedExpression += \" && \";\r\n          }\r\n          var result = this.recursiveRuleParameters(ifSkipArray, result);\r\n          columDescription += result.columDescription; //一行\r\n          this.sqlStatement += result.sqlStatement;\r\n          if (\r\n            ifSkipArray[ifSkipArray.length - 1].ruleCommand.commandType ==\r\n            \"String\"\r\n          ) {\r\n            if (\r\n              ifSkipArray[ifSkipArray.length - 1].bomItem.source &&\r\n              ifSkipArray[ifSkipArray.length - 1].bomItem.source != \"\" &&\r\n              ifSkipArray[ifSkipArray.length - 1].bomItem.commandType ==\r\n                \"String\" &&\r\n              ifSkipArray[ifSkipArray.length - 1].ruleCommand.paraNum > 0\r\n            ) {\r\n              this.columnType[this.columnType.length] = \"String\";\r\n              //获取下拉内容\r\n              const paramsMap = {\r\n                sql: ifSkipArray[ifSkipArray.length - 1].bomItem.source\r\n              };\r\n              var dataList = (\r\n                await getComboxData(this.buildRequestData(paramsMap))\r\n              ).data;\r\n              for (var j = 0; j < dataList.length; j++) {\r\n                option.push({\r\n                  value: dataList[j].code,\r\n                  label: dataList[j].code + \":\" + dataList[j].codeName\r\n                });\r\n              }\r\n              if (\r\n                ifSkipArray[ifSkipArray.length - 1].ruleCommand.implenmation ==\r\n                \"multiple\"\r\n              ) {\r\n                commandType = \"multiple\";\r\n              } else {\r\n                commandType = \"select\";\r\n              }\r\n            }\r\n          } else {\r\n            commandType =\r\n              ifSkipArray[ifSkipArray.length - 1].ruleCommand.commandType;\r\n            let preCheck = ifSkipArray[ifSkipArray.length - 1].bomItem.preCheck;\r\n            let type = \"\";\r\n            if (ifSkipArray[ifSkipArray.length - 1].ruleCommand.paraNum > 0) {\r\n              type = commandType;\r\n            }\r\n            if (\r\n              (preCheck == \"N02\" || preCheck == \"N03\") &&\r\n              ifSkipArray[ifSkipArray.length - 1].ruleCommand.paraNum > 0\r\n            ) {\r\n              type = \"Int\";\r\n            }\r\n            this.columnType[this.columnType.length] = type;\r\n          }\r\n          if (commandType == \"multiple\") {\r\n                this.when += \"instrExt(\" + column+ \",\" + result.expression + \") > 0\";\r\n                this.multivaluedExpression +=  \"instrExt(\" + column+ \",(\" + result.expression + \" =null ? \"+column+\":\"+result.expression+\")) > 0\";\r\n                                                                \r\n          } else {\r\n                this.when += result.expression;\r\n                if (ifSkipArray[ifSkipArray.length - 1].ruleCommand.paraNum > 0) {\r\n                    this.when += ifSkipArray[ifSkipArray.length - 1].ruleCommand.implenmation + column;\r\n                    threeYuan = threeYuan.replace(\"@\",result.prepareExpression);\r\n                    threeYuan = threeYuan.replace(\"#\",column);\r\n                    threeYuan = threeYuan.replace(\"$\",result.expression);\r\n                    this.multivaluedExpression += threeYuan + ifSkipArray[ifSkipArray.length - 1].ruleCommand.implenmation  + column;\r\n                }\r\n          }\r\n          this.ruleUseCommandList[this.ruleUseCommandList.length] = {\r\n                commandId: ifSkipArray[ifSkipArray.length - 1].ruleCommand.id\r\n          };\r\n          if (ifSkipArray[ifSkipArray.length - 1].ruleCommand.paraNum > 0) {\r\n                this.columnName[this.columnName.length] = \"COLUMN\" + i;\r\n          }\r\n          if (ifSkipArray[ifSkipArray.length - 1].endParenthesis) {\r\n            for (\r\n              let h = 0;\r\n              h < ifSkipArray[ifSkipArray.length - 1].endParenthesisNumber;\r\n              h++\r\n            ) {\r\n              this.when += \" ) \";\r\n              columDescription += \",),\";\r\n            }\r\n          }\r\n          if (\r\n            ifSkipArray[ifSkipArray.length - 1].ruleCommand &&\r\n            ifSkipArray[ifSkipArray.length - 1].ruleCommand.paraNum > 0\r\n          ) {\r\n            this.dynamicTableList.paramArr[\r\n              this.dynamicTableList.paramArr.length\r\n            ] = {\r\n              prop: columDescription,\r\n              keyId: columDescription,\r\n              commandType: commandType,\r\n              column:\"COLUMN\" + i,\r\n              options: option\r\n            };\r\n          }\r\n\r\n          this.calculator.rule[i].columDescription = columDescription;\r\n        }\r\n        //算法表达式生成\r\n        for (var i = 0; i < this.calculator.cal.length; i++) {\r\n          var thenSkipArray = this.calculator.cal[i].ifSkip; //纵\r\n          var result = {\r\n            expression: \"\",\r\n            columDescription: \"\",\r\n            sqlStatement: \"\"\r\n          };\r\n          var result = this.recursiveRuleParameters(thenSkipArray, result);\r\n          columDescription += result.columDescription; //一行\r\n          this.then += result.expression;\r\n          this.calculator.cal[i].columDescription = result.columDescription;\r\n          //完成sql拼接  算法循环一次\r\n          this.sqlStatement = this.sqlStatement.replace(\r\n            \"Result\",\r\n            result.sqlStatement\r\n          );\r\n        }\r\n        if (\r\n          thenSkipArray[thenSkipArray.length - 1].ruleCommand.resultType !=\r\n          \"end\"\r\n        ) {\r\n          this.$message.error(\"算法定义还未结束！\");\r\n          return;\r\n        }\r\n        if (!ifSkipArray[ifSkipArray.length - 1].showEnd) {\r\n          this.$message.error(\"规则定义还未完成!\");\r\n          return;\r\n        }\r\n        this.columnName[this.columnName.length] = \"RESULT\";\r\n        //  this.columnName[this.columnName.length] = \"RULEID\";\r\n        this.columnType[this.columnType.length] = \"String\";\r\n        //this.columnType[this.columnType.length] = \"button\";\r\n        this.dynamicTableList.paramArr[\r\n          this.dynamicTableList.paramArr.length\r\n        ] = {\r\n          prop: \"RESULT_BOMDTTABLE_DTRATE\",\r\n          keyId: \"RESULT_BOMDTTABLE_DTRATE\",\r\n          commandType: \"RESULT\",\r\n          column: \"RESULT\"\r\n        };\r\n        //待定\r\n        /*this.dynamicTableList.paramArr[\r\n          this.dynamicTableList.paramArr.length\r\n        ] = {\r\n          prop: \"RESULT_RES_MULTMSG\",\r\n          keyId: \"RESULT_RES_MULTMSG\",\r\n          commandType: \"RULEID\",\r\n          column: \"RULEID\"\r\n        };*/\r\n        var keyItemArr = this.dynamicTableList.paramArr;\r\n        var pushObj = {};\r\n        for (var i = 0; i < keyItemArr.length; i++) {\r\n          pushObj[keyItemArr[i].column] = \"\";\r\n        }\r\n        this.dynamicTableList.paramList.push(pushObj);\r\n        this.showDynamicTable = true;\r\n        this.delItemTemp = false;\r\n        this.addRuleTemp = false;\r\n        this.ruleOnly = true;\r\n        this.spanNodeEnabled = false;\r\n        this.btnState = \"2\";\r\n      }\r\n    },\r\n    //修改规则\r\n    updateRule() {\r\n      if (this.showDynamicTable) {\r\n        this.updateState = false;\r\n        this.btnState = \"2\";\r\n        this.showButton = true;\r\n        this.showDynamicTable = false;\r\n        this.delItemTemp = true;\r\n        this.addRuleTemp = true;\r\n        this.ruleOnly = false;\r\n        this.btnState = \"1\";\r\n      }\r\n    },\r\n    getMultilingual(key, name) {\r\n      //若缓存取不到值则使用定义的name\r\n      var result = name;\r\n      if (key && key !== \"\" && key != \"undefined\") {\r\n        var value = this.language + \"_\" + key;\r\n\r\n        if (this.ruleMessageInfoBom[value]) {\r\n          result = this.ruleMessageInfoBom[value];\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    //递归取值 param\r\n    recursiveRuleParameters(ifSkipArray, result) {\r\n      //一行 多个数据  bom bomItem 运算符 | function 运算符\r\n      //第一个节点  也就是 bom 或 func 左括号\r\n      for (var j = 0; j < ifSkipArray.length; j++) {\r\n        //横\r\n\r\n        var ifSkip = ifSkipArray[j];\r\n        if (j > 0) {\r\n          result.columDescription += \",\";\r\n        }\r\n        if (ifSkip.LeftParenthesis) {\r\n          for (var c = 0; c < ifSkip.LeftParenthesisNumber; c++) {\r\n            result.expression += \"(\";\r\n            result.columDescription += \",(,\";\r\n            result.sqlStatement += \" ( \";\r\n          }\r\n        }\r\n        if (Object.keys(ifSkip.func).length > 0) {\r\n          //函数\r\n          result.expression += ifSkip.func.name + \" (\";\r\n          result.sqlStatement += ifSkip.func.name + \" (\";\r\n          result.columDescription += ifSkip.func.funcKey + \",(,\"; //左括号\r\n          //参数\r\n          this.ruleUseFunctionList[this.ruleUseFunctionList.length] = {\r\n            functionName: ifSkip.func.name\r\n          };\r\n          if (ifSkip.function.param.length > 0) {\r\n            //通过参数遍历此时\r\n            for (var m = 0; m < ifSkip.function.param.length; m++) {\r\n              result = this.recursiveRuleParameters(\r\n                ifSkip.function.param[m].ifSkip,\r\n                result\r\n              );\r\n              result.columDescription;\r\n              //最后\r\n              if (m == ifSkip.function.param.length - 1) {\r\n                result.expression += \" )\";\r\n                result.sqlStatement += \" )\";\r\n                result.columDescription += \",),\"; //右括号\r\n              } else {\r\n                result.columDescription += \",#,\";\r\n                result.expression += \" , \";\r\n                result.sqlStatement += \" ,\";\r\n              }\r\n            }\r\n          }\r\n        } else if (ifSkip.constant.value) {\r\n          //常数\r\n          result.expression += \" \" + ifSkip.constant.value + \" \";\r\n          result.columDescription += \",\" + ifSkip.constant.value + \",\";\r\n          result.sqlStatement += \" \" + ifSkip.constant.value + \" \";\r\n          if (ifSkip.rightParenthesis) {\r\n            for (var n = 0; n < ifSkip.rightParenthesisNumber; n++) {\r\n              result.expression += \")\";\r\n              result.columDescription += \",),\";\r\n              result.sqlStatement += \")\";\r\n            }\r\n          }\r\n        } else {\r\n          if (ifSkip.bom.bomType == \"1\") {\r\n            //bom\r\n            //bom  如果是结果集\r\n            if (ifSkip.bom.name == \"BOMDTTable\") {\r\n              result.expression += this.decisionRowname + \".RESULT \";\r\n              result.sqlStatement += this.decisionRowname + \".RESULT \";\r\n              result.columDescription += ifSkip.bom.bomKey + \",\";\r\n              result.columDescription +=\r\n                \"LINK_LINK_OF,\" + ifSkip.bomItem.bomItemKey + \",\";\r\n            } else {\r\n              result.expression += ifSkip.bom.name + \".\";\r\n              result.sqlStatement += \" ?\" + ifSkip.bom.name + \".\";\r\n              result.columDescription += ifSkip.bom.bomKey + \",\";\r\n              result.expression += ifSkip.bomItem.name + \" \";\r\n              result.sqlStatement += ifSkip.bomItem.name + \"?\";\r\n              result.columDescription +=\r\n                \"LINK_LINK_OF,\" + ifSkip.bomItem.bomItemKey + \",\";\r\n            }\r\n\r\n            if (ifSkip.rightParenthesis) {\r\n              for (var n = 0; n < ifSkip.rightParenthesisNumber; n++) {\r\n                result.expression += \")\";\r\n                result.sqlStatement += \")\";\r\n                result.columDescription += \",),\";\r\n              }\r\n            }\r\n            if(ifSkip.bom.name && result.prepareExpression != \"\"){\r\n                  result.prepareExpression =  result.prepareExpression+\" || \";\r\n             }\r\n            result.prepareExpression = result.prepareExpression +\" \"+ifSkip.bom.name+\".\"+ifSkip.bomItem.name+\" == null\";\r\n            this.ruleUseBomList[this.ruleUseBomList.length] = {\r\n              bomName: ifSkip.bom.name,\r\n              bomItemName: ifSkip.bomItem.name\r\n            };\r\n          }\r\n        }\r\n        if (\r\n          ifSkip.ruleCommand.resultType != \"end\" &&\r\n          ifSkip.ruleCommand.implenmation &&\r\n          ifSkip.ruleCommand.implenmation != \"multiple\"&&\r\n           ifSkip.ruleCommand.resultType != \"Boolean\"\r\n        ) {\r\n          result.expression += ifSkip.ruleCommand.implenmation + \" \";\r\n          if (ifSkip.ruleCommand.implenmation == \"==\") {\r\n            result.sqlStatement += \" =\";\r\n          } else {\r\n            result.sqlStatement += ifSkip.ruleCommand.implenmation + \" \";\r\n          }\r\n          result.columDescription += ifSkip.ruleCommand.ruleCommandKey;\r\n          this.ruleUseCommandList[this.ruleUseCommandList.length] = {\r\n            commandId: ifSkip.ruleCommand.id\r\n          };\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    goBack() {\r\n      //返回到 规则属性\r\n      this.$parent.$parent.ruleDefinitionTo();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.showrule {\r\n  margin-left: 25px;\r\n}\r\n\r\n.ruleBtn {\r\n  margin-left: 12px;\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.header {\r\n  margin-left: 15px;\r\n  margin-top: 14px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.indexHeader {\r\n}\r\n\r\n.project {\r\n  display: inline-block;\r\n}\r\n\r\n.rowheader {\r\n  display: inline-block;\r\n}\r\n\r\n.projectIndex {\r\n  display: inline-block;\r\n}\r\n\r\n.help {\r\n  margin-right: 12px;\r\n  margin-left: 12px;\r\n}\r\n\r\n.if {\r\n  font-weight: bold;\r\n  color: #1d2a6d;\r\n  margin-top: 10px;\r\n}\r\n\r\n.thenSkip {\r\n  margin-top: 8px;\r\n}\r\n\r\n.ruleSelect {\r\n  width: 140px;\r\n}\r\n.param {\r\n  margin-top: 25px;\r\n}\r\n.end {\r\n  color: #dd0024;\r\n}\r\n.then {\r\n  font-weight: bold;\r\n  color: #1d2a6d;\r\n}\r\n.item {\r\n  padding: 10px;\r\n  color: #31a8a3;\r\n}\r\n.ruleReadOnly {\r\n  pointer-events: none;\r\n}\r\n.bomStyle {\r\n  color: #d37f20;\r\n}\r\n.add {\r\n  color: darkorchid;\r\n  padding-right: 5px;\r\n}\r\n.rule {\r\n  margin-left: 20px;\r\n  height: 100%;\r\n  font-size: 12px;\r\n  margin-top: 10px;\r\n}\r\n.rule_div {\r\n  margin-left: 50px;\r\n  margin-top: 55px;\r\n  width: 94%;\r\n  font-size: 12px !important;\r\n  min-height: 500px;\r\n}\r\n.rule_query {\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n}\r\n.divider {\r\n  background-color: black;\r\n  margin-left: 4px;\r\n}\r\n\r\n.formtitle {\r\n  margin-top: 10px;\r\n  font-size: 12px !important;\r\n  font-weight: bold;\r\n}\r\n\r\n.titlelarge {\r\n  font-size: 12px !important;\r\n}\r\n.updateRule {\r\n  font-size: 8px !important;\r\n}\r\n.el-scrollbar__wrap {\r\n  overflow: auto !important;\r\n}\r\n.app-container {\r\n  margin-bottom: 20px !important;\r\n}\r\n</style>\r\n"]}]}