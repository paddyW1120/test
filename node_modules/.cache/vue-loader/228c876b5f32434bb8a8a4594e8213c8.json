{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\product-audit\\productAudit\\index.vue?vue&type=style&index=0&id=5ed49a22&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\commodity-audit\\product-audit\\productAudit\\index.vue","mtime":1609847106617},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoubm90VGV4dGFyZWEgLmVsLXRleHRhcmVhX19pbm5lciB7DQogIGJvcmRlcjogMDsNCiAgcGFkZGluZzogMDsNCiAgcmVzaXplOiBub25lOw0KICBjb2xvcjogIzYwNjI2NjsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi5lbC1saW5rIHsNCiAgZm9udC1zaXplOiAxMnB4Ow0KICBtYXJnaW4tbGVmdDogMHB4Ow0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAukEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/commodity-audit/product-audit/productAudit","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :label=\"$t('route.productAudit')\" @backTo=\"backPage\"/>\r\n    <cus-product-info></cus-product-info>\r\n    <div>\r\n      <cus-form-title :label=\"$t('i18nView.productDetail')\"/>\r\n      <el-form ref=\"auditForm\" :model=\"auditForm\" :rules=\"rules\" label-width=\"auto\"\r\n               style=\"margin-top: 33px\">\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px; padding-bottom: 15px\">\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdDesignPage\">{{ $t('productAudit.productBase') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdSalePage\">{{ $t('productAudit.productSale') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdUWPage\">{{ $t('productAudit.productAcceptance') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdAUPage\">{{ $t('productAudit.productUnderwriting') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n        </el-row>\r\n        <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdRWPage\">{{ $t('productAudit.productRenewal') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdPVPage\">{{ $t('productAudit.productPreservation') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i></el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getPdCLPage\">{{ $t('productAudit.productClaim') }}<i class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n          <cus-col :span=\"6\">\r\n            <el-link @click=\"getTestPage\">{{ $t('productAudit.productTestResult') }}<i\r\n              class=\"el-icon-view el-icon-info\"></i>\r\n            </el-link>\r\n          </cus-col>\r\n        </el-row>\r\n        <div v-if=\"this.pdAuditType=='3'\">\r\n          <cus-form-title :label=\"$t('route.productDiscontinuation')\"/>\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <cus-col :span=\"8\">\r\n              <el-form-item>{{ $t('productAudit.pdVerDisDate') }}\r\n                <el-tag type=\"info\">{{ auditForm.stopDate }}</el-tag>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <cus-col :span=\"16\">\r\n            </cus-col>\r\n          </el-row>\r\n          <el-row :gutter=\"10\" style=\"margin-left: 40px\">\r\n            <cus-col :span=\"8\">\r\n              <el-form-item>{{ $t('productAudit.pdVerDisResn') }}\r\n                <el-tag type=\"info\">{{ auditForm.stopReason }}</el-tag>\r\n              </el-form-item>\r\n            </cus-col>\r\n            <el-col :span=\"16\">\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <div v-if=\"this.pdAuditType!='3'\">\r\n          <cus-form-title :label=\"$t('i18nView.pdDetailsAudit')\"/>\r\n          <div v-if=\"this.pdAuditType=='1' ||this.pdReviseType =='1'\" style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n            <cus-table-title :label=\"$t('productAudit.pdPostAudit')\"></cus-table-title>\r\n            <el-table ref=\"multipleTable\" :data=\"configs6\" align=\"center\" border\r\n                      class=\"wraper-table\" element-loading-text=\"Loading\" fit highlight-current-row size=\"mini\"\r\n                      @selection-change=\"changeFun\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\"></el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                               type=\"index\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdDefineContent')\" align=\"center\"\r\n                               prop=\"pdDefineContent\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdDefineContent | filter_pdNodeCode }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdAuditConcthis')\" align=\"center\"\r\n                               prop=\"pdAuditConcthis\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdAuditConcthis | filter_pdAuditConcthis }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               align=\"center\" prop=\"pdIsCancelDefinition\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.notPassOpinion')\"\r\n                               align=\"center\"\r\n                               prop=\"pdNotPassOpinion\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form ref=\"pdTableForm\" :model=\"pdTableForm\" :rules=\"pdTableForm_rules\"\r\n                     label-width=\"auto\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <cus-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdDefineContent')\" prop=\"pdDefineContent\">\r\n                    <el-select v-model=\"pdTableForm.pdDefineContent\" :disabled=\"dataSelect\" clearable filterable\r\n                               multiple>\r\n                      <el-option v-for=\"item in productNodeList\" :key=\"item.value\" :disabled=\"item.disabled\"\r\n                                 :label=\"item.label\"\r\n                                 :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"16\"></cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.pdAuditConcthis')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"pdTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                      <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('productAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"pdTableForm.pdIsCancelDefinition\" :disabled=\"pdTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"pdTableForm.pdNotPassOpinion\" :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                              :disabled=\"pdTableForm.pdAuditConcthis=='Y'\" maxlength=\"130\" show-word-limit\r\n                              type=\"textarea\"></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row>\r\n                <cus-col :span=\"24\" align=\"right\">\r\n                  <el-button :icon=\"this.pdUpdateFlag? 'el-icon-success': 'el-icon-plus'\" size=\"small\" type=\"primary\"\r\n                             @click=\"addPdAuditTableData\">{{\r\n                      this.pdUpdateFlag ? $t('productAudit.update') :\r\n                        $t('productAudit.addData')\r\n                    }}\r\n                  </el-button>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div v-if=\"this.showRuleTableFlag\" style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n            <cus-table-title :label=\"$t('productAudit.rulesPostAudit')\"></cus-table-title>\r\n            <el-table ref=\"multipleRuleTable\" :data=\"configs7\" align=\"center\" border class=\"wraper-table\"\r\n                      element-loading-text=\"Loading\" fit highlight-current-row\r\n                      size=\"mini\" @selection-change=\"changeRuleData\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                               type=\"index\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleCode')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleCode\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussType')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleType\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdRuleType }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDetails\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdRuleDetails }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.ruleDec')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdAuditConcthis')\" align=\"center\"\r\n                               prop=\"pdAuditConcthis\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdAuditConcthis | filter_pdAuditConcthis }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               align=\"center\" prop=\"pdIsCancelDefinition\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.notPassOpinion')\"\r\n                               align=\"center\"\r\n                               prop=\"pdNotPassOpinion\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form ref=\"ruleTableForm\" :model=\"ruleTableForm\" :rules=\"ruleTableForm_rules\"\r\n                     label-width=\"auto\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <cus-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdRules')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select v-model=\"ruleTableForm.pdFormulaRuleCode\" :disabled=\"ruleSelect\" clearable filterable\r\n                               multiple\r\n                               style=\"width: 238px\" value-key=\"label\">\r\n                      <el-option v-for=\"item in ruleNodeList\" :key=\"item.key\" :disabled=\"item.disabled\"\r\n                                 :label=\"item.label\" :value=\"item\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"16\"></cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.pdAuditConcthis')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"ruleTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                      <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('productAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"ruleTableForm.pdIsCancelDefinition\"\r\n                               :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"ruleTableForm.pdNotPassOpinion\" :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                              :disabled=\"ruleTableForm.pdAuditConcthis=='Y'\" maxlength=\"130\" show-word-limit\r\n                              type=\"textarea\"></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\" align=\"right\">\r\n                  <el-button :icon=\"this.ruleUpdateFlag? 'el-icon-success': 'el-icon-plus'\" size=\"small\"\r\n                             type=\"primary\"\r\n                             @click=\"addRuleAuditTableData\">{{\r\n                      this.ruleUpdateFlag ? $t('productAudit.update') :\r\n                        $t('productAudit.addData')\r\n                    }}\r\n                  </el-button>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n          <div v-if=\"this.showFormulaTableFlag\" style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n            <cus-table-title :label=\"$t('productAudit.formulaPostAudit')\"></cus-table-title>\r\n            <el-table ref=\"multipleFormulaTable\" :data=\"configs8\" align=\"center\" border class=\"wraper-table\"\r\n                      element-loading-text=\"Loading\" fit highlight-current-row\r\n                      size=\"mini\" @selection-change=\"changeFormulaData\">\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                               type=\"index\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaCode')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleCode\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussType')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleType\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdFormulaType }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDetails\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails }}</template>\r\n              </el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.formulaDec')\" align=\"center\"\r\n                               prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              <el-table-column :label=\"$t('i18nView.pdAuditConcthis')\" align=\"center\"\r\n                               prop=\"pdAuditConcthis\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdAuditConcthis | filter_pdAuditConcthis }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.isCancelDefinition')\"\r\n                               align=\"center\"\r\n                               prop=\"pdIsCancelDefinition\">\r\n                <template v-slot=\"scope\">{{ scope.row.pdIsCancelDefinition | filter_pdIsCancelDefinition }}</template>\r\n              </el-table-column>\r\n              <el-table-column v-if=\"this.showNegativeFlag\" :label=\"$t('i18nView.notPassOpinion')\"\r\n                               align=\"center\"\r\n                               prop=\"pdNotPassOpinion\"></el-table-column>\r\n            </el-table>\r\n            <br>\r\n            <el-form ref=\"formulaTableForm\" :model=\"formulaTableForm\" :rules=\"formulaTableForm_rules\"\r\n                     label-width=\"auto\">\r\n              <el-row :gutter=\"10\" class=\"row-bg\" justify=\"center\" type=\"flex\">\r\n                <cus-col :span=\"8\">\r\n                  <el-form-item :label=\"$t('i18nView.pdFormulas')\" prop=\"pdFormulaRuleCode\">\r\n                    <el-select v-model=\"formulaTableForm.pdFormulaRuleCode\" :disabled=\"formulaSelect\" clearable\r\n                               filterable\r\n                               multiple\r\n                               style=\"width: 238px\" value-key=\"label\">\r\n                      <el-option v-for=\"item in formulaNodeList\" :key=\"item.key\" :disabled=\"item.disabled\"\r\n                                 :label=\"item.label\"\r\n                                 :value=\"item\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"16\"></cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('i18nView.pdAuditConcthis')\" prop=\"pdAuditConcthis\">\r\n                    <el-radio-group v-model=\"formulaTableForm.pdAuditConcthis\">\r\n                      <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                      <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                    </el-radio-group>\r\n                  </el-form-item>\r\n                </cus-col>\r\n                <cus-col :span=\"12\">\r\n                  <el-form-item :label=\"$t('productAudit.pdIsCancelDefinition')\" prop=\"pdIsCancelDefinition\">\r\n                    <el-switch v-model=\"formulaTableForm.pdIsCancelDefinition\"\r\n                               :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\"\r\n                               active-value=\"Y\" inactive-value=\"N\">\r\n                    </el-switch>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.notPassOpinion')\" prop=\"pdNotPassOpinion\">\r\n                    <el-input v-model=\"formulaTableForm.pdNotPassOpinion\"\r\n                              :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                              :disabled=\"formulaTableForm.pdAuditConcthis=='Y'\" maxlength=\"130\" show-word-limit\r\n                              type=\"textarea\"></el-input>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n              <el-row :gutter=\"10\">\r\n                <cus-col :span=\"24\" align=\"right\">\r\n                  <el-button :icon=\"this.formulaUpdateFlag? 'el-icon-success': 'el-icon-plus'\" size=\"small\"\r\n                             type=\"primary\"\r\n                             @click=\"addFormulaAuditTableData\">{{\r\n                      this.formulaUpdateFlag ? $t('productAudit.update') :\r\n                        $t('productAudit.addData')\r\n                    }}\r\n                  </el-button>\r\n                </cus-col>\r\n              </el-row>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n        <!--审核结论模块-->\r\n        <cus-form-title :label=\"$t('productAudit.pdAuditResult')\"/>\r\n        <el-form ref=\"pdAuditDetailInfo\" :model=\"pdAuditDetailInfo\" :rules=\"auditRules\"\r\n                 label-width=\"auto\" style=\"margin-top: 33px\">\r\n          <el-row :gutter=\"10\">\r\n            <cus-col :span=\"24\">\r\n              <el-form-item :label=\"$t('i18nView.pdAllAuditConc')\" prop=\"pdAuditConc\">\r\n                <el-radio-group v-model=\"pdAuditDetailInfo.pdAuditConc\">\r\n                  <el-radio label=\"Y\">{{ $t('productAudit.pass') }}</el-radio>\r\n                  <el-radio label=\"N\">{{ $t('productAudit.notPass') }}</el-radio>\r\n                  <el-radio v-if=\"this.pdAuditType!='3'\" label=\"X\">{{ $t('productAudit.cancelDefinition') }}\r\n                  </el-radio>\r\n                  <el-radio v-if=\"this.pdAuditType!='2' && this.pdAuditType!='3'\" label=\"Z\">\r\n                    {{ $t('productAudit.productStop') }}\r\n                  </el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </cus-col>\r\n          </el-row>\r\n          <el-row v-if=\"pdAuditDetailInfo.pdAuditConc=='N'\" :gutter=\"10\">\r\n            <cus-col :span=\"24\">\r\n              <el-form-item :label=\"$t('productAudit.returnFunctionPoints')\">\r\n                <el-tag type=\"info\">{{ this.returnFunctionPoints }}</el-tag>\r\n              </el-form-item>\r\n            </cus-col>\r\n          </el-row>\r\n          <div>\r\n            <el-row v-if=\"this.pdAuditDetailInfo.pdAuditConc=='Y' && this.pdAuditType!='3'\" :gutter=\"10\">\r\n              <cus-col :span=\"8\">\r\n                <el-form-item :label=\"$t('productAudit.postContent')\">\r\n                  <span v-if=\"this.pdAuditType=='1' || this.pdReviseType=='1'\">{{ $t('route.ProductionRelease') }}</span>\r\n                  <span\r\n                    v-if=\"this.showFormulaTableFlag||this.showRuleTableFlag\">{{\r\n                      $t('productAudit.ruleOrFormulaRelease')\r\n                    }}</span>\r\n                  <i :class=\"quickicon_audit\" style=\"cursor: pointer\" @click=\"auditClick\"></i>\r\n                </el-form-item>\r\n              </cus-col>\r\n              <cus-col :span=\"8\">\r\n                <el-link @click=\"showFileReleasePage\">{{ $t('productAudit.pdFileContent') }}<i class=\"books\">\r\n                  <svg-icon icon-class=\"books\"/>\r\n                </i>\r\n                </el-link>\r\n              </cus-col>\r\n              <cus-col :span=\"8\">\r\n              </cus-col>\r\n            </el-row>\r\n            <div v-if=\"showAuditDataFlag==='Y'\">\r\n              <el-row :gutter=\"10\">\r\n                <cus-col v-if=\"(this.pdAuditType=='1' || this.pdReviseType=='1') && pdAuditDetailInfo.pdAuditConc=='Y'\"\r\n                         :span=\"24\">\r\n                  <el-form-item :label=\"$t('i18nView.pdPostContent')\">\r\n                    <el-tag type=\"info\">{{ pdAuditDetailInfo.pdReleContdet }}</el-tag>\r\n                  </el-form-item>\r\n                </cus-col>\r\n              </el-row>\r\n            </div>\r\n            <div v-if=\"this.showRuleTableFlag && pdAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\"\r\n                 style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n              <cus-table-title :label=\"$t('productAudit.rulesPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"configs4\" :span=\"8\" align=\"center\" border class=\"wraper-table\"\r\n                        element-loading-text=\"Loading\"\r\n                        fit highlight-current-row size=\"mini\">\r\n                <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                                 type=\"index\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleCode')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleCode\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussType')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleType\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdRuleType }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleBussDetail')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleDetails\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdRuleDetails }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.ruleDec')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <div v-if=\"this.showFormulaTableFlag && pdAuditDetailInfo.pdAuditConc=='Y' && this.showAuditDataFlag==='Y'\"\r\n                 style=\"width: 80%;margin: 0px 30px 20px 40px\">\r\n              <cus-table-title :label=\"$t('productAudit.formulaPublishContent')\"></cus-table-title>\r\n              <el-table :data=\"configs5\" align=\"center\" border element-loading-text=\"Loading\" size=\"mini\">\r\n                <el-table-column :label=\"$t('table.id')\" align=\"center\"\r\n                                 type=\"index\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaCode')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleCode\"></el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussType')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleType\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleType | filter_pdFormulaType }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaBussDetail')\" align=\"center\"\r\n                                 prop=\"pdFormulaRuleDetails\">\r\n                  <template v-slot=\"scope\">{{ scope.row.pdFormulaRuleDetails | filter_pdFormulaDetails }}</template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"$t('i18nView.formulaDec')\"\r\n                                 align=\"center\"\r\n                                 prop=\"pdFormulaRuleDescribe\"></el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <el-row v-if=\"this.pdAuditType!='3'&&pdAuditDetailInfo.pdAuditConc=='Y'\" :gutter=\"10\">\r\n              <cus-col :span=\"24\">\r\n                <el-form-item :label=\"$t('productAudit.pdReleType')\" prop=\"pdReleType\">\r\n                  <cus-radio v-model=\"pdAuditDetailInfo.pdReleType\" :codetype=\"'releasetype'\"></cus-radio>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <cus-col :span=\"20\">\r\n                <el-form-item :label=\"$t('i18nView.auditContent')\" prop=\"pdAuditIdea\">\r\n                  <el-input v-model=\"pdAuditDetailInfo.pdAuditIdea\" :autosize=\"{ minRows: 1.5, maxRows: 3}\"\r\n                            maxlength=\"130\" show-word-limit type=\"textarea\"></el-input>\r\n                </el-form-item>\r\n              </cus-col>\r\n            </el-row>\r\n          </div>\r\n        </el-form>\r\n        <el-row :gutter=\"10\">\r\n          <cus-col :span=\"24\" align=\"right\">\r\n            <el-button icon=\"el-icon-finished\" size=\"small\" type=\"primary\" @click=\"auditPass()\">\r\n              {{ $t('productAudit.auditBut') }}\r\n            </el-button>\r\n            <el-button icon=\"el-icon-refresh\" size=\"small\" type=\"primary\" @click=\"refresh()\">\r\n              {{ $t('productAudit.refresh') }}\r\n            </el-button>\r\n          </cus-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n    <el-dialog v-if=\"showFileReleaseFlag\" v-dialog-drag :close-on-click-modal=\"false\"\r\n               :visible.sync=\"showFileReleaseFlag\" append-to-body center width=\"80%\">\r\n      <pdFileRelease :pdInfo=\"pdInfo\" @bringPdFileAuditData=\"bringPdFileAuditData\"\r\n                     @changeDialogFileRelease=\"changeDialogFileRelease\"></pdFileRelease>\r\n    </el-dialog>\r\n\r\n    <cus-page-dialog :component=\"dialogComponent\" :dialogShow=\"dialogShow\" :dialogTitle=\"dialogTitle\"\r\n                     @close=\"closePageDialog\"></cus-page-dialog>\r\n    <el-dialog v-if=\"showTestResultFlag\" v-dialog-drag :close-on-click-modal=\"false\" :visible.sync=\"showTestResultFlag\"\r\n               append-to-body center width=\"80%\">\r\n      <cus-page-title-back :isDiablg=\"true\" :label=\"$t('productAudit.productTestResult')\"\r\n                           @backTo=\"showTestResultFlag=false\"/>\r\n      <pd-test-result :pdInfo=\"pdInfo\"></pd-test-result>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nimport {\r\n  addAuditInfoData,\r\n  findNodeFormulaList,\r\n  findNodeRulesList,\r\n  queryReviseData,\r\n  queryStop\r\n} from \"@/api/basicinfo/pdauditinfo\";\r\nimport pdFileRelease from \"@/views/commodity-audit/product-audit/pdFileRelease\"\r\nimport pdTestResult from \"@/views/commodity-audit/product-audit/pdTestResult\"\r\nimport {closeVisitTag} from \"@/utils/tagsView\"\r\n\r\nlet _this;\r\nexport default {\r\n  name: 'productAudit',\r\n  filters: {\r\n    filter_pdNodeCode(val) {\r\n      let returnText = '';\r\n      switch (val) {\r\n        case 'productRuleFlag':\r\n          returnText = '产品规则订正';\r\n          break;\r\n        case 'productFormulaFlag':\r\n          returnText = '产品公式订正';\r\n          break;\r\n        case 'productInfoFlag':\r\n          returnText = '产品框架定义';\r\n          break;\r\n        case 'productDistributionFlag':\r\n          returnText = '产品销售信息';\r\n          break;\r\n        case 'productCoverFlag':\r\n          returnText = '产品承保信息';\r\n          break;\r\n        case 'productUnderwritingFlag':\r\n          returnText = '产品核保信息';\r\n          break;\r\n        case 'productPreservationFlag':\r\n          returnText = '产品保全信息';\r\n          break;\r\n        case 'productHePeiFlag':\r\n          returnText = '产品核赔信息';\r\n          break;\r\n        case 'productRenewalFlag':\r\n          returnText = '产品续期续保信息';\r\n          break;\r\n      }\r\n      return returnText;\r\n    },\r\n    filter_pdAuditConcthis(code) {\r\n      return _this.getCodeName('pdAuditConc', code)\r\n    },\r\n    filter_pdIsCancelDefinition(code) {\r\n      return _this.getCodeName('cancelDefinition', code)\r\n    },\r\n    filter_pdRuleType(code) {\r\n      return _this.getCodeName('ruleBusinessModule', code)\r\n    },\r\n    filter_pdFormulaType(code) {\r\n      return _this.getCodeName('ruleBusinessModule', code)\r\n    },\r\n    filter_pdRuleDetails(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    },\r\n    filter_pdFormulaDetails(code) {\r\n      return _this.getCodeName('ruleBusinessDetailClass', code)\r\n    }\r\n  },\r\n  data() {\r\n    _this = this;\r\n    return {\r\n      dialogShow: false,\r\n      dialogTitle: '',\r\n      dialogComponent: '',\r\n      nodeOptions: [\r\n        {'key': 'productInfoFlag', 'label': '产品框架定义'},\r\n        {'key': 'productDistributionFlag', 'label': '产品销售信息'},\r\n        {'key': 'productCoverFlag', 'label': '产品承保信息'},\r\n        {'key': 'productUnderwritingFlag', 'label': '产品核保信息'},\r\n        {'key': 'productRenewalFlag', 'label': '产品续期续保信息'},\r\n        {'key': 'productPreservationFlag', 'label': '产品保全信息'},\r\n        {'key': 'productHePeiFlag', 'label': '产品核赔信息'},\r\n        {'key': 'productRuleFlag', 'label': '产品规则订正'},\r\n        {'key': 'productFormulaFlag', 'label': '产品公式订正'}],\r\n      returnFunctionPoints: [],\r\n      pdFileAuditData: [],\r\n      pdInfo: {},\r\n      auditForm: {\r\n        stopDate: '',\r\n        stopReason: '',\r\n      },\r\n      //内容定义表格\r\n      pdTableForm: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditNotesInfoId: '',\r\n        pdDefineContent: [],\r\n        pdAuditConcthis: '',\r\n        pdIsCancelDefinition: '',\r\n        pdNotPassOpinion: ''\r\n      },\r\n      ruleTableForm: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditNotesInfoId: '',\r\n        pdDefineContent: '',\r\n        pdReviseType: '',\r\n        pdFormulaRuleCode: [],\r\n        pdFormulaRuleType: '',\r\n        pdFormulaRuleDetails: '',\r\n        pdFormulaRuleDescribe: '',\r\n        pdAuditConcthis: '',\r\n        pdIsCancelDefinition: '',\r\n        pdNotPassOpinion: ''\r\n      },\r\n      formulaTableForm: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditNotesInfoId: '',\r\n        pdDefineContent: '',\r\n        pdReviseType: '',\r\n        pdFormulaRuleCode: [],\r\n        pdFormulaRuleType: '',\r\n        pdFormulaRuleDetails: '',\r\n        pdFormulaRuleDescribe: '',\r\n        pdAuditConcthis: '',\r\n        pdIsCancelDefinition: '',\r\n        pdNotPassOpinion: ''\r\n      },\r\n      pdAuditInfo: {\r\n        pdType: '1',\r\n        pdVerId: '',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditConc: '',\r\n        pdAuditStaff: '',\r\n        pdAuditDate: '',\r\n        pdIsPostReturn: '',\r\n        pdIsReviewReturn: '',\r\n        pdAuditTimes: '',\r\n        pdReturnTimes: '',\r\n        pdReleType: '',\r\n        pdReleContent: '',\r\n        pdReleContdet: []\r\n      },\r\n      pdAuditDetailInfo: {\r\n        pdType: '1',\r\n        pdInfoId: '',\r\n        pdCode: '',\r\n        pdAuditOrderNum: '',\r\n        pdAuditInfoId: '',\r\n        pdAuditConc: '',\r\n        pdAuditStaff: '',\r\n        pdAuditDate: '',\r\n        pdAuditIdea: '',\r\n        pdReturnFuncNode: [],\r\n        pdReleType: '',\r\n        pdReleContent: '',\r\n        pdReleContdet: []\r\n      },\r\n      //产品形态\r\n      pdAuditType: '',\r\n      pdReviseType: '',\r\n      pdReviseDate: '',\r\n      pdReturnFuncCode: '',\r\n      productNodeList: [],\r\n      ruleNodeList: [],\r\n      formulaNodeList: [],\r\n      showAuditDataFlag: 'N',\r\n      dialogTableVisible: false,\r\n      dialogTableVisible1: false,\r\n      showFileReleaseFlag: false,\r\n      showRuleTableFlag: false,\r\n      showFormulaTableFlag: false,\r\n      showTestResultFlag: false,\r\n      pdUpdateFlag: false,\r\n      ruleUpdateFlag: false,\r\n      formulaUpdateFlag: false,\r\n      dataSelect: false,\r\n      ruleSelect: false,\r\n      formulaSelect: false,\r\n      showNegativeFlag: false,\r\n      quickicon_audit: \"el-icon-arrow-right\",\r\n      //表格数据\r\n      configs4: [],\r\n      configs5: [],\r\n      configs6: [],\r\n      configs7: [],\r\n      configs8: [],\r\n      checkBoxData: [],\r\n      checkRuleData: [],\r\n      checkFormulaData: [],\r\n      //查询参数\r\n      params: {},\r\n      //检验规则\r\n      rules: {},\r\n      pdTableForm_rules: {\r\n        pdDefineContent: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdDefineContent'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditConcthis: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConcthis'),\r\n          trigger: 'change'\r\n        }],\r\n        pdNotPassOpinion: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      ruleTableForm_rules: {\r\n        pdFormulaRuleCode: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdDefineContent'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditConcthis: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConcthis'),\r\n          trigger: 'change'\r\n        }],\r\n        pdNotPassOpinion: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      formulaTableForm_rules: {\r\n        pdFormulaRuleCode: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdDefineContent'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditConcthis: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConcthis'),\r\n          trigger: 'change'\r\n        }],\r\n        pdNotPassOpinion: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      },\r\n      auditRules: {\r\n        pdAuditConc: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdAuditConc'),\r\n          trigger: 'change'\r\n        }],\r\n        pdReleType: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseSelect') + this.$t('productAudit.pdReleType'),\r\n          trigger: 'change'\r\n        }],\r\n        pdAuditIdea: [{\r\n          required: true,\r\n          message: this.$t('productAudit.pleaseInput') + this.$t('productAudit.pdAuditIdea'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    'configs6'() {\r\n      this.isShowNegative(this.configs6)\r\n    },\r\n    'configs7'() {\r\n      this.isShowNegative(this.configs7)\r\n    },\r\n    'configs8'() {\r\n      this.isShowNegative(this.configs8)\r\n    },\r\n    //产品定义内容\r\n    'pdTableForm.pdDefineContent'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const pdNode of this.productNodeList) {\r\n          pdNode.disabled = false\r\n        }\r\n      } else {\r\n        if (this._.includes(selectedCodes, '000000')) {\r\n          for (const pdNode of this.productNodeList) {\r\n            pdNode.disabled = pdNode.value !== '000000'\r\n          }\r\n        } else {\r\n          for (const pdNode of this.productNodeList) {\r\n            pdNode.disabled = pdNode.value === '000000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //产品发布审核结论\r\n    'pdTableForm.pdAuditConcthis'() {\r\n      const val = this.pdTableForm.pdAuditConcthis;\r\n      if (val == 'Y') {\r\n        this.pdTableForm.pdIsCancelDefinition = 'N';\r\n        this.pdTableForm.pdNotPassOpinion = '';\r\n        this.pdTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n      } else {\r\n        this.pdTableForm_rules.pdNotPassOpinion = [{\r\n          required: true,\r\n          message: this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    },\r\n    //产品规则订正内容\r\n    'ruleTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const ruleNode of this.ruleNodeList) {\r\n          ruleNode.disabled = false\r\n        }\r\n      } else {\r\n        let codeList = [];\r\n        for (const code of selectedCodes) {\r\n          codeList.push(code.value)\r\n        }\r\n        if (this._.includes(codeList, '000')) {\r\n          for (const ruleNode of this.ruleNodeList) {\r\n            ruleNode.disabled = ruleNode.value !== '000'\r\n          }\r\n        } else {\r\n          for (const ruleNode of this.ruleNodeList) {\r\n            ruleNode.disabled = ruleNode.value === '000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //产品规则订正审核意见\r\n    'ruleTableForm.pdAuditConcthis'() {\r\n      const val = this.ruleTableForm.pdAuditConcthis;\r\n      if (val == 'Y') {\r\n        this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n        this.ruleTableForm.pdNotPassOpinion = '';\r\n        this.ruleTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n      } else {\r\n        this.ruleTableForm_rules.pdNotPassOpinion = [{\r\n          required: true,\r\n          message: this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    },\r\n    //产品公式订正公式\r\n    'formulaTableForm.pdFormulaRuleCode'(selectedCodes) {\r\n      if (selectedCodes.length === 0) {\r\n        for (const formulaNode of this.formulaNodeList) {\r\n          formulaNode.disabled = false\r\n        }\r\n      } else {\r\n        let codeList = [];\r\n        for (const code of selectedCodes) {\r\n          codeList.push(code.value)\r\n        }\r\n        if (this._.includes(codeList, '000')) {\r\n          for (const formulaNode of this.formulaNodeList) {\r\n            formulaNode.disabled = formulaNode.value !== '000'\r\n          }\r\n        } else {\r\n          for (const formulaNode of this.formulaNodeList) {\r\n            formulaNode.disabled = formulaNode.value === '000'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //产品公式订正审核结论\r\n    'formulaTableForm.pdAuditConcthis'() {\r\n      const val = this.formulaTableForm.pdAuditConcthis;\r\n      //审核通过\r\n      if (val == 'Y') {\r\n        this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n        this.formulaTableForm.pdNotPassOpinion = '';\r\n        this.formulaTableForm_rules.pdNotPassOpinion = [{required: false}]\r\n      } else {\r\n        this.formulaTableForm_rules.pdNotPassOpinion = [{\r\n          required: true,\r\n          message: this.$t('productAudit.pdNotPassOpinion'),\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    },\r\n    //整体审核结论\r\n    'pdAuditDetailInfo.pdAuditConc'() {\r\n      const val = this.pdAuditDetailInfo.pdAuditConc;\r\n      if (val == 'Y') {\r\n        if (this.pdAuditType == '3') {\r\n          return\r\n        }\r\n        if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n          this.pdAuditDetailInfo.pdReleContent = '1';\r\n          if (this.configs6.length != this.productNodeList.length - 1) {\r\n            this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n              type: 'warning'\r\n            }).then(() => {\r\n              let nodeList = [];\r\n              for (const pdNode of this.configs6) {\r\n                nodeList.push(pdNode.pdDefineContent)\r\n              }\r\n              for (let i = 1; i < this.productNodeList.length; i++) {\r\n                let nodeName = this.productNodeList[i].value;\r\n                if (!this._.includes(nodeList, nodeName)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: nodeName,\r\n                    pdAuditConcthis: 'Y',\r\n                    pdIsCancelDefinition: 'N',\r\n                    pdNotPassOpinion: ''\r\n                  })\r\n                }\r\n              }\r\n              this.auditData()\r\n            }).catch(() => {\r\n              this.auditData()\r\n            })\r\n          } else {\r\n            this.auditData()\r\n            if (this.pdAuditDetailInfo.pdReleContdet.length < this.configs6.length) {\r\n              this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n\r\n              }).catch(() => {\r\n\r\n              })\r\n            }\r\n          }\r\n        }\r\n        //产品规则公式订正\r\n        if (this.pdReviseType === '0') {\r\n          this.pdAuditDetailInfo.pdReleContent = '2';\r\n          if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n            if (this.configs7.length != this.ruleNodeList.length - 1 || this.configs8.length != this.formulaNodeList.length - 1) {\r\n              this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList1 = [];\r\n                let nodeList2 = [];\r\n                for (const ruleNode of this.configs7) {\r\n                  nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                }\r\n                for (const formualNode of this.configs8) {\r\n                  nodeList2.push(formualNode.pdFormulaRuleCode)\r\n                }\r\n                for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                  let nodeName = this.ruleNodeList[i].value;\r\n                  if (!this._.includes(nodeList1, nodeName)) {\r\n                    this.configs7.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                      pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'Y',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                  let nodeName = this.formulaNodeList[i].value;\r\n                  if (!this._.includes(nodeList2, nodeName)) {\r\n                    this.configs8.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                      pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'Y',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: ''\r\n                    })\r\n                  }\r\n                }\r\n                this.auditRuleData();\r\n                this.auditFormulaData()\r\n              }).catch(() => {\r\n                this.auditRuleData();\r\n                this.auditFormulaData()\r\n              })\r\n            } else {\r\n              this.auditRuleData();\r\n              this.auditFormulaData();\r\n              if (this.configs4.length < this.configs7.length || this.configs5.length < this.configs8.length) {\r\n                this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n\r\n                }).catch(() => {\r\n\r\n                })\r\n              }\r\n            }\r\n          } else {\r\n            if (this.showRuleTableFlag) {\r\n              if (this.configs7.length != this.ruleNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const pdNode of this.configs7) {\r\n                    nodeList.push(pdNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs7.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.auditRuleData()\r\n                }).catch(() => {\r\n                  this.auditRuleData()\r\n                })\r\n              } else {\r\n                this.auditRuleData();\r\n                if (this.configs4.length < this.configs7.length) {\r\n                  this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n\r\n                  }).catch(() => {\r\n\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.showFormulaTableFlag) {\r\n              if (this.configs8.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const pdNode of this.configs8) {\r\n                    nodeList.push(pdNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs8.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'Y',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: ''\r\n                      })\r\n                    }\r\n                  }\r\n                  this.auditFormulaData()\r\n                }).catch(() => {\r\n                  this.auditFormulaData()\r\n                })\r\n              } else {\r\n                this.auditFormulaData();\r\n                if (this.configs5.length < this.configs8.length) {\r\n                  this.$confirm(this.$t('productAudit.confirmPassNotDefinition'), this.$t('confirmMessage.tip'), {\r\n                    confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                    cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                    type: 'warning'\r\n                  }).then(() => {\r\n\r\n                  }).catch(() => {\r\n\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //审核不通过\r\n      if (val == 'N') {\r\n        if (this.pdAuditType == '3') {\r\n          this.returnFunctionPoints = [\"产品停售\"];\r\n          return\r\n        }\r\n        if ((this.pdAuditType === '1' || this.pdReviseType === '1')) {\r\n          if (this.configs6.length != this.productNodeList.length - 1) {\r\n            this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n              confirmButtonText: this.$t('confirmMessage.confirm'),\r\n              cancelButtonText: this.$t('confirmMessage.cancel'),\r\n              type: 'warning'\r\n            }).then(() => {\r\n              let nodeList = [];\r\n              for (const pdNode of this.configs6) {\r\n                nodeList.push(pdNode.pdDefineContent)\r\n              }\r\n              for (let i = 1; i < this.productNodeList.length; i++) {\r\n                let nodeName = this.productNodeList[i].value;\r\n                if (!this._.includes(nodeList, nodeName)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: nodeName,\r\n                    pdAuditConcthis: 'N',\r\n                    pdIsCancelDefinition: 'N',\r\n                    pdNotPassOpinion: '审核不通过'\r\n                  })\r\n                }\r\n              }\r\n              this.reBack()\r\n            }).catch(() => {\r\n              this.reBack()\r\n            })\r\n          } else {\r\n            this.reBack()\r\n          }\r\n        }\r\n        //产品规则公式订正\r\n        if (this.pdReviseType === '0') {\r\n          if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n            if (this.configs7.length != this.ruleNodeList.length - 1 || this.configs8.length != this.formulaNodeList.length - 1) {\r\n              this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                type: 'warning'\r\n              }).then(() => {\r\n                let nodeList1 = [];\r\n                let nodeList2 = [];\r\n                for (const ruleNode of this.configs7) {\r\n                  nodeList1.push(ruleNode.pdFormulaRuleCode)\r\n                }\r\n                for (const formulaNode of this.configs8) {\r\n                  nodeList2.push(formulaNode.pdFormulaRuleCode)\r\n                }\r\n                for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                  let nodeName = this.ruleNodeList[i].value;\r\n                  if (!this._.includes(nodeList1, nodeName)) {\r\n                    this.configs7.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                      pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'N',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: '审核不通过'\r\n                    })\r\n                  }\r\n                }\r\n                for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                  let nodeName = this.formulaNodeList[i].value;\r\n                  if (!this._.includes(nodeList2, nodeName)) {\r\n                    this.configs8.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                      pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: 'N',\r\n                      pdIsCancelDefinition: 'N',\r\n                      pdNotPassOpinion: '审核不通过'\r\n                    })\r\n                  }\r\n                }\r\n                this.ruleOrFormulaBack()\r\n              }).catch(() => {\r\n                this.ruleOrFormulaBack()\r\n              })\r\n            } else {\r\n              this.ruleOrFormulaBack()\r\n            }\r\n          } else {\r\n            if (this.showRuleTableFlag) {\r\n              if (this.configs7.length != this.ruleNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const ruleNode of this.configs7) {\r\n                    nodeList.push(ruleNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                    let nodeName = this.ruleNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs7.push({\r\n                        pdReviseType: '1',\r\n                        pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                        pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: '审核不通过'\r\n                      })\r\n                    }\r\n                  }\r\n                  this.ruleOrFormulaBack()\r\n                }).catch(() => {\r\n                  this.ruleOrFormulaBack()\r\n                })\r\n              } else {\r\n                this.ruleOrFormulaBack()\r\n              }\r\n            }\r\n            if (this.showFormulaTableFlag) {\r\n              if (this.configs8.length != this.formulaNodeList.length - 1) {\r\n                this.$confirm(this.$t('productAudit.confirmNotPassDefinition'), this.$t('confirmMessage.tip'), {\r\n                  confirmButtonText: this.$t('confirmMessage.confirm'),\r\n                  cancelButtonText: this.$t('confirmMessage.cancel'),\r\n                  type: 'warning'\r\n                }).then(() => {\r\n                  let nodeList = [];\r\n                  for (const formulaNode of this.configs8) {\r\n                    nodeList.push(formulaNode.pdFormulaRuleCode)\r\n                  }\r\n                  for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                    let nodeName = this.formulaNodeList[i].value;\r\n                    if (!this._.includes(nodeList, nodeName)) {\r\n                      this.configs8.push({\r\n                        pdReviseType: '2',\r\n                        pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                        pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                        pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                        pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                        pdAuditConcthis: 'N',\r\n                        pdIsCancelDefinition: 'N',\r\n                        pdNotPassOpinion: '审核不通过'\r\n                      })\r\n                    }\r\n                  }\r\n                  this.ruleOrFormulaBack()\r\n                }).catch(() => {\r\n                  this.ruleOrFormulaBack()\r\n                })\r\n              } else {\r\n                this.ruleOrFormulaBack()\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  components: {pdFileRelease, pdTestResult},\r\n  created() {\r\n    this.pdInfo = this.getPdData();\r\n    this.pdAuditType = this.pdInfo.defType;\r\n    this.pdAuditInfo.pdCode = this.pdInfo.pdCode;\r\n    this.pdAuditInfo.pdInfoId = this.pdInfo.id;\r\n    this.pdAuditInfo.pdVerId = this.pdInfo.pdVerId;\r\n    this.pdAuditDetailInfo.pdCode = this.pdInfo.pdCode;\r\n    this.pdAuditDetailInfo.pdInfoId = this.pdInfo.id;\r\n    if (this.pdAuditType == '1') {\r\n      this.queryPdInfoData()\r\n    }\r\n    if (this.pdAuditType == '2') {\r\n      this.queryReviseData()\r\n    }\r\n    if (this.pdAuditType == '3') {\r\n      this.queryStop()\r\n    }\r\n    this.cacheStrData('pdFileAuditTableback', null);\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    queryPdInfoData() {\r\n      this.productNodeList = [\r\n        {'key': '000000', 'value': '000000', 'label': '全部', 'disabled': false},\r\n        {'key': 'productInfoFlag', 'value': 'productInfoFlag', 'label': '产品框架定义', 'disabled': false},\r\n        {'key': 'productDistributionFlag', 'value': 'productDistributionFlag', 'label': '产品销售信息', 'disabled': false},\r\n        {'key': 'productCoverFlag', 'value': 'productCoverFlag', 'label': '产品承保信息', 'disabled': false},\r\n        {'key': 'productUnderwritingFlag', 'value': 'productUnderwritingFlag', 'label': '产品核保信息', 'disabled': false},\r\n        {'key': 'productRenewalFlag', 'value': 'productRenewalFlag', 'label': '产品续期续保信息', 'disabled': false},\r\n        {'key': 'productPreservationFlag', 'value': 'productPreservationFlag', 'label': '产品保全信息', 'disabled': false},\r\n        {'key': 'productHePeiFlag', 'value': 'productHePeiFlag', 'label': '产品核赔信息', 'disabled': false}\r\n      ];\r\n      this.pdAuditDetailInfo.pdReleType = '1';\r\n      this.$nextTick(() => {\r\n        this.$refs.pdTableForm.clearValidate()\r\n      })\r\n    },\r\n    //查询订正申请表数据\r\n    queryReviseData() {\r\n      this.pdAuditDetailInfo.pdReleType = '2';\r\n      queryReviseData(this.buildRequestData({\r\n        \"pdInfoId\": this.pdInfo.id,\r\n        \"pdVerId\": this.pdInfo.pdVerId\r\n      })).then(res => {\r\n        this.pdReviseType = res.data.pdReviseType;\r\n        this.pdReturnFuncCode = res.data.pdReturnFuncCode;\r\n        this.pdReviseDate = res.data.pdReviseDate;\r\n        const codes = this.pdReturnFuncCode.split(\",\");\r\n        if (this.pdReviseType === '1') {\r\n          this.productNodeList = [];\r\n          this.productNodeList.push({\r\n            key: '000000',\r\n            value: '000000',\r\n            label: '全部',\r\n            disabled: false\r\n          });\r\n          for (const item of codes) {\r\n            switch (item) {\r\n              case 'productInfoFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productInfoFlag',\r\n                  value: 'productInfoFlag',\r\n                  label: '产品框架定义',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productDistributionFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productDistributionFlag',\r\n                  value: 'productDistributionFlag',\r\n                  label: '产品销售信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productCoverFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productCoverFlag',\r\n                  value: 'productCoverFlag',\r\n                  label: '产品承保信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productUnderwritingFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productUnderwritingFlag',\r\n                  value: 'productUnderwritingFlag',\r\n                  label: '产品核保信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productPreservationFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productPreservationFlag',\r\n                  value: 'productPreservationFlag',\r\n                  label: '产品保全信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productHePeiFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productHePeiFlag',\r\n                  value: 'productHePeiFlag',\r\n                  label: '产品核赔信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n              case 'productRenewalFlag':\r\n                this.productNodeList.push({\r\n                  key: 'productRenewalFlag',\r\n                  value: 'productRenewalFlag',\r\n                  label: '产品续期续保信息',\r\n                  disabled: false\r\n                });\r\n                break;\r\n            }\r\n          }\r\n        }\r\n        if (this.pdReviseType === '0') {\r\n          for (const item of codes) {\r\n            switch (item) {\r\n              case 'productRuleFlag':\r\n                this.showRuleTableFlag = true;\r\n                this.findNodeRulesList(this.pdReviseDate);\r\n                break;\r\n              case 'productFormulaFlag':\r\n                this.showFormulaTableFlag = true;\r\n                this.findNodeFormulaList(this.pdReviseDate);\r\n                break;\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    queryStop() {\r\n      //查询停售时间, 停售原因\r\n      queryStop(this.buildRequestData({\"id\": this.pdInfo.id, \"pdVerId\": this.pdInfo.pdVerId})).then(res => {\r\n        this.auditForm.stopDate = res.data.pdVerDisDate;\r\n        this.auditForm.stopReason = res.data.pdVerDisResn\r\n      })\r\n    },\r\n    findNodeFormulaList(val) {\r\n      findNodeFormulaList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id, \"pdReviseDate\": val})).then(res => {\r\n        let formulaListNode = res.data;\r\n        if (formulaListNode.length > 0) {\r\n          this.formulaNodeList = [{'key': '000', 'value': '000', 'label': '全部', 'disabled': false}];\r\n        }\r\n        for (const item of formulaListNode) {\r\n          this.formulaNodeList.push({\r\n            key: item.pdCalcCode,\r\n            value: item.pdCalcCode,\r\n            label: item.pdCalcCode,\r\n            pdFormulaRuleType: item.pdBussType,\r\n            pdFormulaRuleDetails: item.pdBussDetailType,\r\n            pdFormulaRuleDescribe: item.pdCalcDesc,\r\n            disabled: false\r\n          });\r\n        }\r\n        this.$nextTick(() => {\r\n          this.$refs.formulaTableForm.clearValidate()\r\n        })\r\n      })\r\n    },\r\n    findNodeRulesList(val) {\r\n      findNodeRulesList(this.buildRequestData({\"pdInfoId\": this.pdInfo.id, \"pdReviseDate\": val})).then(res => {\r\n        let ruleListNode = res.data;\r\n        if (ruleListNode.length > 0) {\r\n          this.ruleNodeList = [{'key': '000', 'value': '000', 'label': '全部', 'disabled': false}];\r\n        }\r\n        for (const item of ruleListNode) {\r\n          this.ruleNodeList.push({\r\n            key: item.pdRuleCode,\r\n            value: item.pdRuleCode,\r\n            label: item.pdRuleCode,\r\n            pdFormulaRuleType: item.pdRuleCls,\r\n            pdFormulaRuleDetails: item.pdRuleDtCls,\r\n            pdFormulaRuleDescribe: item.pdRuleDesc,\r\n            disabled: false\r\n          });\r\n        }\r\n        this.$nextTick(() => {\r\n          this.$refs.ruleTableForm.clearValidate()\r\n        })\r\n      })\r\n\r\n    },\r\n    getFuncCode(val) {\r\n      let returnText = '';\r\n      switch (val) {\r\n        case 'productRuleFlag':\r\n          returnText = returnText + '产品规则订正';\r\n          break;\r\n        case 'productFormulaFlag':\r\n          returnText = returnText + '产品公式订正';\r\n          break;\r\n        case 'productInfoFlag':\r\n          returnText = returnText + '产品框架定义';\r\n          break;\r\n        case 'productDistributionFlag':\r\n          returnText = returnText + '产品销售信息';\r\n          break;\r\n        case 'productCoverFlag':\r\n          returnText = returnText + '产品承保信息';\r\n          break;\r\n        case 'productUnderwritingFlag':\r\n          returnText = returnText + '产品核保信息';\r\n          break;\r\n        case 'productPreservationFlag':\r\n          returnText = returnText + '产品保全信息';\r\n          break;\r\n        case 'productHePeiFlag':\r\n          returnText = returnText + '产品核赔信息';\r\n          break;\r\n        case 'productRenewalFlag':\r\n          returnText = returnText + '产品续期续保信息';\r\n          break;\r\n      }\r\n      return returnText;\r\n    },\r\n    //审核完毕按钮\r\n    auditPass() {\r\n      this.$refs.pdAuditDetailInfo.validate((valid) => {\r\n        if (valid) {\r\n          this.pdAuditInfo.pdAuditConc = this.pdAuditDetailInfo.pdAuditConc;\r\n          this.pdAuditInfo.pdType = '1';\r\n          let pdoperAuditDetailNotesInfo = [];\r\n          //获取审核明细详情表格的值\r\n          if (this.pdReviseType == '1' || this.pdAuditType == '1') {\r\n            for (const item of this.configs6) {\r\n              pdoperAuditDetailNotesInfo.push(item)\r\n            }\r\n          }\r\n          if (this.showRuleTableFlag && this.showFormulaTableFlag) {\r\n            for (const item of this.configs7) {\r\n              pdoperAuditDetailNotesInfo.push(item)\r\n            }\r\n            for (const item of this.configs8) {\r\n              pdoperAuditDetailNotesInfo.push(item)\r\n            }\r\n          } else {\r\n            if (this.showRuleTableFlag) {\r\n              for (const item of this.configs7) {\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }\r\n            if (this.showFormulaTableFlag) {\r\n              for (const item of this.configs8) {\r\n                pdoperAuditDetailNotesInfo.push(item)\r\n              }\r\n            }\r\n          }\r\n          if (this.pdAuditDetailInfo.pdAuditConc == 'Y' && this.pdAuditDetailInfo.pdAuditConc == 'N' && pdoperAuditDetailNotesInfo.length == 0) {\r\n            this.notifyError(\"请完善审核明细表格数据\")\r\n            return\r\n          }\r\n          let map = {\r\n            \"pdAuditInfo\": this.pdAuditInfo,\r\n            \"pdAuditDetailInfo\": this.pdAuditDetailInfo,\r\n            \"pdoperAuditDetailNotesInfo\": pdoperAuditDetailNotesInfo,\r\n            \"pdFileAuditList\": this.pdFileAuditData\r\n          }\r\n          if (this.pdAuditDetailInfo.pdAuditConc == 'X') { //取消本次定义\r\n            let data = {\r\n              'processInstanceId': this.pdInfo.pdProcessId\r\n            };\r\n            map['workflowData'] = data;\r\n            this.doAuditInfoData(map)\r\n          } else if (this.pdAuditDetailInfo.pdAuditConc == 'Z') { //停售产品\r\n            let data = {\r\n              'processInstanceId': this.pdInfo.pdProcessId\r\n            };\r\n            map['workflowData'] = data;\r\n            this.doAuditInfoData(map)\r\n          } else if (this.pdAuditDetailInfo.pdAuditConc == 'N') { //审核不通过\r\n            //停售产品\r\n            if (this.pdAuditType == '3') {\r\n              let data = {\r\n                'productAuditFlag': '0',\r\n                'variables': [\"productDiscontinued\"],\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n            } else {\r\n              //审核不通过 返回定义节点\r\n              this.pdAuditInfo.pdIsReviewReturn = 'Y';\r\n              this.pdAuditDetailInfo.pdReturnFuncNode = this.returnPoints(this.returnFunctionPoints);\r\n              let data = {\r\n                'productAuditFlag': '0',\r\n                'variables': this.returnPoints(this.returnFunctionPoints),\r\n                'processInstanceId': this.pdInfo.pdProcessId\r\n              };\r\n              map['workflowData'] = data;\r\n            }\r\n            this.doAuditInfoData(map)\r\n          } else {  //审核通过的\r\n            //通过的节点\r\n            let passNodePoints = this.returnPoints(this.pdAuditDetailInfo.pdReleContdet);\r\n            this.pdAuditInfo.pdReleContdet = passNodePoints;\r\n            this.pdAuditDetailInfo.pdReleContdet = passNodePoints;\r\n            this.pdAuditInfo.pdReleContent = this.pdAuditDetailInfo.pdReleContent;\r\n            this.pdAuditInfo.pdIsReviewReturn = 'N';\r\n            if (this.pdAuditType == '3') {\r\n              //停售通过时   默认增量发布\r\n              this.pdAuditInfo.pdReleType = \"2\";\r\n              this.pdAuditDetailInfo.pdReleType = \"2\"\r\n              this.pdAuditInfo.pdReleContent = '3'\r\n              this.pdAuditDetailInfo.pdReleContent = '3'\r\n            } else {\r\n              this.pdAuditInfo.pdReleType = this.pdAuditDetailInfo.pdReleType;\r\n            }\r\n            let data = {\r\n              'productAuditFlag': '1',\r\n              'variables': null,\r\n              'processInstanceId': this.pdInfo.pdProcessId\r\n            };\r\n            map['workflowData'] = data;\r\n            this.doAuditInfoData(map)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    doAuditInfoData(map) {\r\n      addAuditInfoData(this.buildRequestData(map)).then(res => {\r\n        this.notifySuccess(res.message);\r\n        this.$store.dispatch('product/storageProducts')\r\n        closeVisitTag();\r\n        this.$router.push({path: \"/dashboard\"});\r\n      })\r\n    },\r\n    //清空按钮\r\n    refresh() {\r\n      this.pdAuditDetailInfo.pdAuditConc = '';\r\n      this.pdAuditDetailInfo.pdReleType = '';\r\n      this.pdAuditDetailInfo.pdAuditIdea = '';\r\n      this.$nextTick(() => {\r\n        this.$refs.pdAuditDetailInfo.clearValidate();\r\n        if (this.$refs.pdTableForm) {\r\n          this.$refs.pdTableForm.clearValidate();\r\n        }\r\n        if (this.$refs.ruleTableForm) {\r\n          this.$refs.ruleTableForm.clearValidate();\r\n        }\r\n        if (this.$refs.formulaTableForm) {\r\n          this.$refs.formulaTableForm.clearValidate()\r\n        }\r\n      })\r\n    },\r\n    //审核不通过处理节点\r\n    returnPoints(val) {\r\n      let returnPoints = [];\r\n      for (let i = 0; i < val.length; i++) {\r\n        for (let j = 0; j < this.nodeOptions.length; j++) {\r\n          if (val[i] == this.nodeOptions[j].label) {\r\n            returnPoints.push(this.nodeOptions[j].key)\r\n          }\r\n        }\r\n      }\r\n      return returnPoints\r\n    },\r\n    //选中不通过带回的节点\r\n    reBack() {\r\n      this.returnFunctionPoints = [];\r\n      for (let i = 0; i < this.configs6.length; i++) {\r\n        if (this.configs6[i].pdIsCancelDefinition == 'N' && this.configs6[i].pdAuditConcthis == 'N') {\r\n          this.returnFunctionPoints.push(this.getFuncCode(this.configs6[i].pdDefineContent))\r\n        }\r\n      }\r\n      if (this.returnFunctionPoints.length == '0') {\r\n        this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n        this.refresh()\r\n      }\r\n    },\r\n    //产品规则订正选中不通过带回的节点\r\n    ruleOrFormulaBack() {\r\n      this.returnFunctionPoints = [];\r\n      for (let i = 0; i < this.configs7.length; i++) {\r\n        if (this.configs7[i].pdIsCancelDefinition == 'N' && this.configs7[i].pdAuditConcthis == 'N') {\r\n          this.returnFunctionPoints.push(\"产品规则订正\");\r\n          break\r\n        }\r\n      }\r\n      for (let i = 0; i < this.configs8.length; i++) {\r\n        if (this.configs8[i].pdIsCancelDefinition == 'N' && this.configs8[i].pdAuditConcthis == 'N') {\r\n          this.returnFunctionPoints.push(\"产品公式订正\");\r\n          break\r\n        }\r\n      }\r\n      if (this.returnFunctionPoints.length == '0') {\r\n        this.notifyError(\"退回节点为空，请修改明细审核内容\");\r\n        this.refresh()\r\n      }\r\n    },\r\n    showFileReleasePage() {\r\n      this.showFileReleaseFlag = true\r\n    },\r\n    changeDialogFileRelease(flag) {\r\n      this.showFileReleaseFlag = flag\r\n    },\r\n    bringPdFileAuditData(val) {\r\n      this.pdFileAuditData = val\r\n    },\r\n    //选择通过显示发布内容\r\n    auditData() {\r\n      this.pdAuditDetailInfo.pdReleContdet = [];\r\n      for (let i = 0; i < this.configs6.length; i++) {\r\n        if (this.configs6[i].pdIsCancelDefinition == 'N' && this.configs6[i].pdAuditConcthis == 'Y') {\r\n          this.pdAuditDetailInfo.pdReleContdet.push(this.getFuncCode(this.configs6[i].pdDefineContent))\r\n        }\r\n      }\r\n    },\r\n    //选择通过显示规则发布内容\r\n    auditRuleData() {\r\n      this.configs4 = [];\r\n      for (let i = 0; i < this.configs7.length; i++) {\r\n        if (this.configs7[i].pdIsCancelDefinition == 'N' && this.configs7[i].pdAuditConcthis == 'Y') {\r\n          this.configs4.push(this.configs7[i])\r\n        }\r\n      }\r\n    },\r\n    //选择通过显示公式发布内容\r\n    auditFormulaData() {\r\n      this.configs5 = [];\r\n      for (let i = 0; i < this.configs8.length; i++) {\r\n        if (this.configs8[i].pdIsCancelDefinition == 'N' && this.configs8[i].pdAuditConcthis == 'Y') {\r\n          this.configs5.push(this.configs8[i])\r\n        }\r\n      }\r\n    },\r\n    //新产品或产品订正添加审核数据\r\n    addPdAuditTableData() {\r\n      this.$refs.pdTableForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.pdTableForm.pdAuditConcthis == 'Y') {\r\n            this.pdTableForm.pdIsCancelDefinition = 'N';\r\n            this.pdTableForm.pdNotPassOpinion = ''\r\n          }\r\n          if (this.checkBoxData.length == 0) {\r\n            if (this.pdTableForm.pdDefineContent.length == 1) {\r\n              if (this.pdTableForm.pdDefineContent[0] == '000000') {\r\n                for (let i = 1; i < this.productNodeList.length; i++) {\r\n                  if (this.checkPdMoreCopyData(this.productNodeList[i].value, this.configs6)) {\r\n                    this.configs6.push({\r\n                      pdDefineContent: this.productNodeList[i].value,\r\n                      pdAuditConcthis: this.pdTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.pdTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.pdTableForm.pdNotPassOpinion\r\n                    })\r\n                  } else {\r\n                    break\r\n                  }\r\n                }\r\n              } else {\r\n                if (this.checkPdCopyData(this.pdTableForm.pdDefineContent[0], this.configs6)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: this.pdTableForm.pdDefineContent[0],\r\n                    pdAuditConcthis: this.pdTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.pdTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.pdTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.pdTableForm.pdDefineContent.length > 1) {\r\n              for (let i = 0; i < this.pdTableForm.pdDefineContent.length; i++) {\r\n                if (this.checkPdCopyData(this.pdTableForm.pdDefineContent[i], this.configs6)) {\r\n                  this.configs6.push({\r\n                    pdDefineContent: this.pdTableForm.pdDefineContent[i],\r\n                    pdAuditConcthis: this.pdTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.pdTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.pdTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < this.checkBoxData.length; i++) {\r\n              this.$set(this.checkBoxData[i], 'pdAuditConcthis', this.pdTableForm.pdAuditConcthis);\r\n              this.$set(this.checkBoxData[i], 'pdIsCancelDefinition', this.pdTableForm.pdIsCancelDefinition);\r\n              this.$set(this.checkBoxData[i], 'pdNotPassOpinion', this.pdTableForm.pdNotPassOpinion)\r\n            }\r\n            this.$refs.multipleTable.clearSelection()\r\n          }\r\n          this.isShowNegative(this.configs6);\r\n          this.pdTableForm.pdDefineContent = [];\r\n          this.pdTableForm.pdAuditConcthis = '';\r\n          this.pdTableForm.pdIsCancelDefinition = 'N';\r\n          this.pdTableForm.pdNotPassOpinion = '';\r\n          this.$nextTick(() => {\r\n            this.$refs.pdTableForm.clearValidate()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //规则订正添加审核数据\r\n    addRuleAuditTableData() {\r\n      this.$refs.ruleTableForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.ruleTableForm.pdAuditConcthis == 'Y') {\r\n            this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n            this.ruleTableForm.pdNotPassOpinion = ''\r\n          }\r\n          if (this.checkRuleData.length == 0) {\r\n            if (this.ruleTableForm.pdFormulaRuleCode.length == 1) {\r\n              if (this.ruleTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                for (let i = 1; i < this.ruleNodeList.length; i++) {\r\n                  if (this.checkMoreCopyData(this.ruleNodeList[i].value, this.configs7)) {\r\n                    this.configs7.push({\r\n                      pdReviseType: '1',\r\n                      pdFormulaRuleCode: this.ruleNodeList[i].value,\r\n                      pdFormulaRuleType: this.ruleNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.ruleNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.ruleNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                    })\r\n                  } else {\r\n                    break\r\n                  }\r\n                }\r\n              } else {\r\n                if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[0].value, this.configs7)) {\r\n                  this.configs7.push({\r\n                    pdReviseType: '1',\r\n                    pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[0].value,\r\n                    pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.ruleTableForm.pdFormulaRuleCode.length > 1) {\r\n              for (let i = 0; i < this.ruleTableForm.pdFormulaRuleCode.length; i++) {\r\n                if (this.checkCopyData(this.ruleTableForm.pdFormulaRuleCode[i].value, this.configs7)) {\r\n                  this.configs7.push({\r\n                    pdReviseType: '1',\r\n                    pdFormulaRuleCode: this.ruleTableForm.pdFormulaRuleCode[i].value,\r\n                    pdFormulaRuleType: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.ruleTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.ruleTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.ruleTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.ruleTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < this.checkRuleData.length; i++) {\r\n              this.$set(this.checkRuleData[i], 'pdAuditConcthis', this.ruleTableForm.pdAuditConcthis);\r\n              this.$set(this.checkRuleData[i], 'pdIsCancelDefinition', this.ruleTableForm.pdIsCancelDefinition);\r\n              this.$set(this.checkRuleData[i], 'pdNotPassOpinion', this.ruleTableForm.pdNotPassOpinion)\r\n            }\r\n            this.$refs.multipleRuleTable.clearSelection()\r\n          }\r\n          this.isShowNegative(this.configs7);\r\n          this.ruleTableForm.pdFormulaRuleCode = [];\r\n          this.ruleTableForm.pdAuditConcthis = '';\r\n          this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n          this.ruleTableForm.pdNotPassOpinion = '';\r\n          this.$nextTick(() => {\r\n            this.$refs.ruleTableForm.clearValidate()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //公式订正添加审核数据\r\n    addFormulaAuditTableData() {\r\n      this.$refs.formulaTableForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.formulaTableForm.pdAuditConcthis == 'Y') {\r\n            this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n            this.formulaTableForm.pdNotPassOpinion = ''\r\n          }\r\n          if (this.checkFormulaData.length == 0) {\r\n            if (this.formulaTableForm.pdFormulaRuleCode.length == 1) {\r\n              if (this.formulaTableForm.pdFormulaRuleCode[0].value == '000') {\r\n                for (let i = 1; i < this.formulaNodeList.length; i++) {\r\n                  if (this.checkMoreCopyData(this.formulaNodeList[i].value, this.configs8)) {\r\n                    this.configs8.push({\r\n                      pdReviseType: '2',\r\n                      pdFormulaRuleCode: this.formulaNodeList[i].value,\r\n                      pdFormulaRuleType: this.formulaNodeList[i].pdFormulaRuleType,\r\n                      pdFormulaRuleDetails: this.formulaNodeList[i].pdFormulaRuleDetails,\r\n                      pdFormulaRuleDescribe: this.formulaNodeList[i].pdFormulaRuleDescribe,\r\n                      pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                      pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                      pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                    })\r\n                  } else {\r\n                    break\r\n                  }\r\n                }\r\n              } else {\r\n                if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[0].value, this.configs8)) {\r\n                  this.configs8.push({\r\n                    pdReviseType: '2',\r\n                    pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[0].value,\r\n                    pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[0].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (this.formulaTableForm.pdFormulaRuleCode.length > 1) {\r\n              for (let i = 0; i < this.formulaTableForm.pdFormulaRuleCode.length; i++) {\r\n                if (this.checkCopyData(this.formulaTableForm.pdFormulaRuleCode[i].value, this.configs8)) {\r\n                  this.configs8.push({\r\n                    pdReviseType: '2',\r\n                    pdFormulaRuleCode: this.formulaTableForm.pdFormulaRuleCode[i].value,\r\n                    pdFormulaRuleType: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleType,\r\n                    pdFormulaRuleDetails: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDetails,\r\n                    pdFormulaRuleDescribe: this.formulaTableForm.pdFormulaRuleCode[i].pdFormulaRuleDescribe,\r\n                    pdAuditConcthis: this.formulaTableForm.pdAuditConcthis,\r\n                    pdIsCancelDefinition: this.formulaTableForm.pdIsCancelDefinition,\r\n                    pdNotPassOpinion: this.formulaTableForm.pdNotPassOpinion\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            for (let i = 0; i < this.checkFormulaData.length; i++) {\r\n              this.$set(this.checkFormulaData[i], 'pdAuditConcthis', this.formulaTableForm.pdAuditConcthis);\r\n              this.$set(this.checkFormulaData[i], 'pdIsCancelDefinition', this.formulaTableForm.pdIsCancelDefinition);\r\n              this.$set(this.checkFormulaData[i], 'pdNotPassOpinion', this.formulaTableForm.pdNotPassOpinion)\r\n            }\r\n            this.$refs.multipleFormulaTable.clearSelection()\r\n          }\r\n          this.isShowNegative(this.configs8);\r\n          this.formulaTableForm.pdFormulaRuleCode = [];\r\n          this.formulaTableForm.pdAuditConcthis = '';\r\n          this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n          this.formulaTableForm.pdNotPassOpinion = '';\r\n          this.$nextTick(() => {\r\n            this.$refs.formulaTableForm.clearValidate()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    //判断选择全部时节点是否重复\r\n    checkPdMoreCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdDefineContent)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //判断节点是否重复\r\n    checkPdCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdDefineContent)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //判断选择全部时节点是否重复\r\n    checkMoreCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdFormulaRuleCode)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //判断节点是否重复\r\n    checkCopyData(val, tableName) {\r\n      let nodeList = [];\r\n      for (const pdNode of tableName) {\r\n        nodeList.push(pdNode.pdFormulaRuleCode)\r\n      }\r\n      if (this._.includes(nodeList, val)) {\r\n        this.notifyError(this.$t('productAudit.pdNodeRepeat'));\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    //页面跳转按钮\r\n    getPdDesignPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品框架信息查看'\r\n        this.dialogComponent = 'product-definition/pd-framework-def/main'\r\n        // this.$router.push({name: '产品框架定义主页', query: {showPageFlag: '1'},params:this.pdInfo})\r\n      }\r\n    },\r\n    getPdSalePage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品销售信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-sales-def/main'\r\n      }\r\n    },\r\n    getPdUWPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品承保信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-acceptance-def/main'\r\n      }\r\n    },\r\n    getPdAUPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品核保信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-underwriting-def/main'\r\n      }\r\n    },\r\n    getPdRWPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品续期续保信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-renewal-def/main'\r\n      }\r\n    },\r\n    getPdPVPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品保全信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-preservation-def/main'\r\n      }\r\n    },\r\n    getPdCLPage() {\r\n      if (this.pdInfo) {\r\n        this.cacheCurrPagePdData(this.pdInfo)\r\n        this.dialogShow = true\r\n        this.dialogTitle = '产品核赔信息查看'\r\n        this.dialogComponent = 'product-definition/pd-operation-def/pd-compensation-def/main'\r\n      }\r\n    },\r\n    getTestPage() {\r\n      if (this.pdInfo) {\r\n        // this.$router.push({name: '新单测试详情', query: {showPageFlag: '1'}, params: this.pdInfo})\r\n        this.showTestResultFlag = true;\r\n      }\r\n    },\r\n    //返回产品审核查询页面\r\n    backPage() {\r\n      this.$router.push({path: '/commodity-audit/pd-audit-info/pd-audit-apply'})\r\n    },\r\n    auditClick() {\r\n      if (this.showAuditDataFlag === 'N') {\r\n        this.quickicon_audit = \"el-icon-arrow-down\";\r\n        this.showAuditDataFlag = 'Y'\r\n      } else {\r\n        this.quickicon_audit = \"el-icon-arrow-right\";\r\n        this.showAuditDataFlag = 'N'\r\n      }\r\n    },\r\n    //获取复选框表格数据\r\n    changeFun(val) {\r\n      this.checkBoxData = val;\r\n      if (val.length > 0) {\r\n        this.pdUpdateFlag = true\r\n      }\r\n      if (val.length > 1) {\r\n        this.pdTableForm.pdDefineContent = []\r\n        for (let i = 0; i < val.length; i++) {\r\n          this.pdTableForm.pdDefineContent.push(val[i].pdDefineContent);\r\n        }\r\n        Object.assign(this.pdTableForm, this.pdTableForm.pdDefineContent);\r\n        this.pdTableForm.pdDefineContent = this.pdTableForm.pdDefineContent;\r\n        this.pdUpdateFlag = true;\r\n        this.dataSelect = true\r\n      }\r\n      if (val.length == 1) {\r\n        Object.assign(this.pdTableForm, val[0]);\r\n        this.pdTableForm.pdDefineContent = [val[0].pdDefineContent];\r\n        this.pdUpdateFlag = true;\r\n        this.dataSelect = true\r\n      }\r\n      if (val.length == 0) {\r\n        this.pdTableForm.pdDefineContent = [];\r\n        this.pdTableForm.pdAuditConcthis = '';\r\n        this.pdTableForm.pdIsCancelDefinition = 'N';\r\n        this.pdTableForm.pdNotPassOpinion = '';\r\n        this.pdUpdateFlag = false;\r\n        this.dataSelect = false;\r\n        this.$nextTick(() => {\r\n          this.$refs.pdTableForm.clearValidate()\r\n        })\r\n      }\r\n    },\r\n    changeRuleData(val) {\r\n      this.checkRuleData = val;\r\n      if (val.length > 0) {\r\n        this.ruleUpdateFlag = true\r\n      }\r\n      if (val.length == 1) {\r\n        Object.assign(this.ruleTableForm, val[0]);\r\n        this.ruleTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n        this.ruleUpdateFlag = true;\r\n        this.ruleSelect = true\r\n      }\r\n      if (val.length == 0) {\r\n        this.ruleTableForm.pdFormulaRuleCode = [];\r\n        this.ruleTableForm.pdAuditConcthis = '';\r\n        this.ruleTableForm.pdIsCancelDefinition = 'N';\r\n        this.ruleTableForm.pdNotPassOpinion = '';\r\n        this.ruleUpdateFlag = false;\r\n        this.ruleSelect = false;\r\n        this.$nextTick(() => {\r\n          this.$refs.ruleTableForm.clearValidate()\r\n        })\r\n      }\r\n    },\r\n    closePageDialog() {\r\n      this.dialogShow = false\r\n      this.dialogComponent = ''\r\n    },\r\n    changeFormulaData(val) {\r\n      this.checkFormulaData = val;\r\n      if (val.length > 0) {\r\n        this.formulaUpdateFlag = true\r\n      }\r\n      if (val.length == 1) {\r\n        Object.assign(this.formulaTableForm, val[0]);\r\n        this.formulaTableForm.pdFormulaRuleCode = [val[0].pdFormulaRuleCode];\r\n        this.formulaUpdateFlag = true;\r\n        this.formulaSelect = true\r\n      }\r\n      if (val.length == 0) {\r\n        this.formulaTableForm.pdFormulaRuleCode = [];\r\n        this.formulaTableForm.pdAuditConcthis = '';\r\n        this.formulaTableForm.pdIsCancelDefinition = 'N';\r\n        this.formulaTableForm.pdNotPassOpinion = '';\r\n        this.formulaUpdateFlag = false;\r\n        this.formulaSelect = false;\r\n        this.$nextTick(() => {\r\n          this.$refs.formulaTableForm.clearValidate()\r\n        })\r\n      }\r\n    },\r\n    isShowNegative(row) {\r\n      const val = row;\r\n      let YSum = 0;\r\n      for (let i = 0; i < val.length; i++) {\r\n        if (val[i].pdAuditConcthis == 'Y') {\r\n          YSum++;\r\n        }\r\n      }\r\n      if (YSum < val.length) {\r\n        this.showNegativeFlag = true;\r\n      } else {\r\n        this.showNegativeFlag = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.notTextarea .el-textarea__inner {\r\n  border: 0;\r\n  padding: 0;\r\n  resize: none;\r\n  color: #606266;\r\n  background-color: white;\r\n  overflow: hidden;\r\n}\r\n\r\n.el-link {\r\n  font-size: 12px;\r\n  margin-left: 0px;\r\n}\r\n</style>\r\n"]}]}