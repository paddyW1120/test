{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-framework-def\\pp-info-def\\index.vue?vue&type=style&index=0&id=7899d8dd&lang=scss&scoped=true&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-framework-def\\pp-info-def\\index.vue","mtime":1609847106999},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1706753188288},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1706753191924},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1706753189537},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1706753187424},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5vcFNldHRpbmcgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW4tdG9wOiAzMHB4Owp9Cgouc3BhY2luZyB7CiAgbWFyZ2luLXRvcDogMTBweDsKfQoKLnNob3dEaXYgewogIHdpZHRoOiA5MCU7CiAgaGVpZ2h0OiAxMDAlOwogIG1hcmdpbi10b3A6IC00MHB4OwogIG1hcmdpbi1sZWZ0OiAtNDBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYmFja2dyb3VuZDogI2ZmZmZmZjAwOwogIHotaW5kZXg6IDk5OTsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6nBA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product-package-definition/pp-framework-def/pp-info-def","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back v-if=\"showPageFlag!='1'\" @backTo=\"goBack\"  :label=\"$t('pdppDefinition.comboContent')\"/>\r\n<!--    <cus-page-title-back v-if=\"showPageFlag=='1'\" @backTo=\"backToSaleStop\" :label=\"$t('pdppDefinition.comboStopPage')\"/>-->\r\n    <cus-form-title :label=\"$t('pdppDefinition.title')\" :first=\"true\"></cus-form-title>\r\n    <el-form :model=\"pdPpInfo\" :disabled=\"showPageFlag=='1'\" :rules=\"rules\" ref=\"ppForm\" label-width=\"auto\">\r\n      <cus-row >\r\n        <cus-col >\r\n          <el-form-item style=\"white-space: nowrap;\" :label=\"$t('pdppInfo.ppCode')\" prop=\"ppCode\">\r\n            <el-tag type=\"info\">{{pdPpInfo.ppCode}}</el-tag>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item style=\"white-space: nowrap;\" :label=\"$t('pdppInfo.ppName')\" prop=\"ppName\">\r\n            <el-input clearable v-model=\"pdPpInfo.ppName\"></el-input>\r\n          </el-form-item>\r\n        </cus-col>\r\n        <cus-col >\r\n          <el-form-item style=\"white-space: nowrap;\" :label=\"$t('pdppDefinition.ppType')\" prop=\"ppType\">\r\n            <cus-select :codetype=\"'ppType'\" v-model=\"pdPpInfo.ppType\"></cus-select>\r\n          </el-form-item>\r\n        </cus-col>\r\n      </cus-row>\r\n    <cus-table-title :label=\"$t('pdppDefinition.tableTitle')\"/>\r\n    <el-table :data=\"configs\" border class=\"wraper-table\" element-loading-text=\"Loading\" fit highlight-current-row\r\n              ref=\"configs\" size=\"mini\" @row-click=\"rowClick\">\r\n      <el-table-column :label=\"$t('table.select')\" align=\"center\" width=\"50px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-radio-group @change=\"chooseOne\" v-model=\"chooseRowId\">\r\n            <el-radio :label=\"scope.row\">{{''}}</el-radio>\r\n          </el-radio-group>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\" type=\"index\">\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdCode')\" align=\"center\" prop=\"pdCode\"></el-table-column>\r\n      <el-table-column :label=\"$t('i18nView.pdName')\" align=\"center\" prop=\"pdName\"></el-table-column>\r\n      <el-table-column :label=\"$t('customComponents.pdEdition')\" align=\"center\" prop=\"pdEdition\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.actions')\" prop=\"\" align=\"center\">\r\n        <template v-slot=\"scope\">\r\n          <cus-popover @confirm=\"remove(scope.row)\" dialog-disable=\"disable\" v-auth=\"'pd-pp-info:removeConnection'\" icon=\"el-icon-delete\" size=\"mini\" type=\"danger\"></cus-popover>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    </el-form>\r\n    <div v-show=\"this.showPd\">\r\n      <cus-form-title :label=\"$t('pdppDefinition.formTitle')\" :first=\"true\"></cus-form-title>\r\n      <el-form :model=\"pdInfo\" :disabled=\"showPageFlag=='1'\" :rules=\"rules\" label-width=\"95px\" ref=\"pdForm1\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"7\">\r\n            <el-form-item :label=\"$t('i18nView.pdCode')\" prop=\"pdCode\">\r\n              <el-input clearable v-model=\"pdInfo.pdCode\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"7\">\r\n            <el-form-item :label=\"$t('i18nView.pdName')\">\r\n              <el-input clearable v-model=\"pdInfo.pdName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"7\">\r\n            <el-form-item :label=\"$t('customComponents.pdEdition')\">\r\n              <el-input clearable  v-model=\"pdInfo.pdEdition\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <cus-condition @show=\"shoButton=!shoButton\"> </cus-condition>\r\n\r\n        </el-row>\r\n        <div v-show=\"shoButton\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('pdppDefinition.pdType')\">\r\n                <cus-select :codetype=\"'ProductType'\" @change=\"typeRegionSelect\" v-model=\"pdInfo.pdCls1\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('pdppDefinition.pdCls')\">\r\n                <cus-select :codetype=\"'ProductCategory'\" :filter=\"finelinesRegionFilter\"\r\n                            v-model=\"pdInfo.pdCls2\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('pdppDefinition.pdApplDate')\">\r\n                <el-date-picker\r\n                  value-format=\"yyyy-MM-dd\"\r\n                  v-model=\"pdInfo.pdApplDate\"\r\n                  type=\"daterange\"\r\n                  :range-separator=\"$t('pdppDefinition.to')\"\r\n                  :start-placeholder=\"$t('pdppDefinition.startDate')\"\r\n                  :end-placeholder=\"$t('pdppDefinition.endDate')\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('pdppDefinition.pdDesignType')\">\r\n                <cus-select :codetype=\"'ProductDesignType'\" v-model=\"pdInfo.pdCls4\"></cus-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"7\">\r\n              <el-form-item :label=\"$t('pdppDefinition.pdrReleaseDate')\">\r\n                <el-date-picker\r\n                  value-format=\"yyyy-MM-dd\"\r\n                  v-model=\"pdInfo.pdrReleaseDate\"\r\n                  type=\"daterange\"\r\n                  :range-separator=\"$t('pdppDefinition.to')\"\r\n                  :start-placeholder=\"$t('pdppDefinition.startDate')\"\r\n                  :end-placeholder=\"$t('pdppDefinition.endDate')\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <el-row >\r\n           <el-col>\r\n             <el-button  size=\"small\" @click=\"handleSearch\" type=\"primary\" icon=\"el-icon-search\" dialog-disable=\"disable\">\r\n               {{ $t('pdppDefinition.query') }}\r\n             </el-button>\r\n           </el-col>\r\n        </el-row>\r\n      <cus-table-title  style=\"clear: both\"  :label=\"$t('pdppDefinition.tableTitle1')\"/>\r\n      <el-table :data=\"configs1\" border class=\"wraper-table\" element-loading-text=\"Loading\" fit highlight-current-row\r\n                ref=\"configs\" size=\"mini\" @selection-change=\"handleSelectionChange\">\r\n        <el-table-column v-model=\"chooseRowId1\" align=\"center\"\r\n                         type=\"selection\"\r\n                         width=\"55\">\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.id')\" align=\"center\" width=\"50\">\r\n          <template v-slot=\"scope\">\r\n            {{ initTableIndex('page', scope.$index) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('table.detail')\" align=\"center\" width=\"60\" prop=\"\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button  size=\"small\" @click=\"showThis(scope.row)\" type=\"text\" dialog-disable=\"disable\">>></el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.pdCode')\" align=\"center\" prop=\"pdCode\"></el-table-column>\r\n        <el-table-column :label=\"$t('i18nView.pdName')\" align=\"center\" prop=\"pdName\"></el-table-column>\r\n        <el-table-column :label=\"$t('customComponents.pdEdition')\" align=\"center\" prop=\"pdEdition\"></el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <cus-pagination :pageSize=\"5\" :params=\"pdInfo\" ref=\"page\" url=\"/pd-pp-info/base/listPd\" v-model=\"configs1\"/>\r\n\r\n      <el-row>\r\n        <el-col>\r\n          <el-button-group style=\"float: right;\">\r\n            <el-button  size=\"small\" @click=\"savePp\" dialog-disable=\"disable\" type=\"primary\" v-auth=\"'pd-pp-info:saveAttributeEntity'\" icon=\"el-icon-success\">\r\n              {{ $t('pdppDefinition.save') }}\r\n            </el-button>\r\n          </el-button-group>\r\n        </el-col>\r\n      </el-row>\r\n      </el-form>\r\n    </div>\r\n    <div v-show=\"this.showOp\">\r\n      <cus-form-title :label=\"$t('pdppDefinition.formTitle1')\"></cus-form-title>\r\n      <el-form  :disabled=\"showPageFlag=='1'\">\r\n      <el-row>\r\n        <el-col :span=\"10\">\r\n          <cus-table-title :label=\"$t('pdppDefinition.tableTitle2')\"/>\r\n          <el-table :data=\"opTable1\" border ref=\"selection\" @selection-change=\"checkAll\" style=\"width: 100%\">\r\n            <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n            <el-table-column prop=\"pdProgCode\" :label=\"$t('i18nView.schemeCode')\"\r\n                             align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"pdProgName\" :label=\"$t('i18nView.programName')\"\r\n                             align=\"center\"></el-table-column>\r\n            <el-table-column :label=\"$t('table.detail')\" align=\"center\" prop=\"\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button  size=\"small\" dialog-disable=\"disable\" @click=\"showThis2(scope.row)\" type=\"text\">>></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-col>\r\n        <el-col :span=\"4\" align=\"center\">\r\n          <div class=\"opSetting\">\r\n            <el-button  size=\"small\" @click=\"handelSelect\" icon=\"el-icon-d-arrow-left\" :disabled=\"!opTable2.length\" :size=\"buttonSize\" dialog-disable=\"disable\"\r\n                       type=\"primary\">\r\n            </el-button>\r\n            <div class=\"spacing\">\r\n              <el-button  size=\"small\" @click=\"handleRemoveSelect\" icon=\"el-icon-d-arrow-right\" :disabled=\"opTable1.length<2\"  dialog-disable=\"disable\"\r\n                         :size=\"buttonSize\" type=\"primary\">\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"10\">\r\n          <cus-table-title :label=\"$t('pdppDefinition.tableTitle3')\"/>\r\n          <el-table :data=\"opTable2\" border ref=\"selection\" @selection-change=\"checkRightAll\" style=\"width: 100%\">\r\n            <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n            <el-table-column prop=\"pdProgCode\" :label=\"$t('i18nView.schemeCode')\"\r\n                             align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"pdProgName\" :label=\"$t('i18nView.programName')\"\r\n                             align=\"center\"></el-table-column>\r\n            <el-table-column :label=\"$t('table.detail')\" align=\"center\" prop=\"\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button  size=\"small\" dialog-disable=\"disable\" @click=\"showThis2(scope.row)\" type=\"text\">>></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-col>\r\n      </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n<!--    <el-dialog :visible.sync=\"ProgInfoShow\" v-dialog-drag-->\r\n<!--               v-if=\"ProgInfoShow\" width=\"70%\">-->\r\n<!--      <progBnft :product=\"selectedProg\"></progBnft>-->\r\n<!--    </el-dialog>-->\r\n    <el-dialog  :visible.sync=\"ProgInfoShow\" v-dialog-drag\r\n                v-if=\"ProgInfoShow\" width=\"70%\">\r\n      <ProgrammeDefinition  :reaadOnlyPpProg=\"false\"></ProgrammeDefinition>\r\n    </el-dialog>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n  import {\r\n    savePdPpConnection,\r\n    listConnection,\r\n    removeConnection,\r\n    querypdPpInfo,\r\n    queryOp,\r\n    queryOpConnextion,\r\n    queryOpUnConnextion,\r\n    savePpPdProgs, saveAttributeEntity\r\n  } from \"@/api/basicinfo/pdppDefinition\";\r\n  import {mapGetters} from \"vuex\";\r\n  import progBnft from \"@/views/product-package-definition/pp-framework-def/pp-info-def/pdpppdprogsInfo/index\"\r\n  import {\r\n    lookProgInfo,\r\n    findAllProgrammeVoByProductIdPp\r\n  } from '@/api/basicinfo/pdppscheme'\r\n  import ProgrammeDefinition from \"@/views/product-definition/pd-framework-def/pd-structure-def/program-def\"\r\n  let _this;\r\n  export default {\r\n    name: 'pdppDefinition',\r\n    computed: {\r\n      ...mapGetters([\"usercode\", \"tenantCode\"])\r\n    },\r\n    props: {},\r\n    filters: {},\r\n    components: {progBnft,ProgrammeDefinition},\r\n    data() {\r\n      _this = this;\r\n      return {\r\n        selectedProg: '',\r\n        ProgInfoShow: false,\r\n        shoButton: false,\r\n        buttonShow: true,\r\n        showOp: false,\r\n        showPageFlag: false,\r\n        showPd: true,\r\n        workflow: {\r\n          processInstanceId: \"\",\r\n          selectValue: \"productOperatingFlag\",\r\n          options: [\r\n            {key: \"productOperatingFlag\", label: \"产品套餐营运定义\"},\r\n            {key: \"productTestFlag\", label: \"产品套餐测试\"}\r\n          ]\r\n        },\r\n        configs: [],\r\n        configs1: [],\r\n        finelinesRegionFilter: '',\r\n\r\n        ppInfoId: '',\r\n\r\n\r\n        buttonSize: 'large',\r\n        opTable1: [],//方案列表\r\n        opTable2: [],\r\n        opTableLDate: [],\r\n        opTableRDate: [],\r\n        selectOpTableLData: [],\r\n        selectOpTableRData: [],\r\n        nowSelectLeftData: [], // 左边选中列表数据\r\n        nowSelectRightData: [], // 右边选中列表数据\r\n\r\n\r\n        chooseRowId: {},\r\n        chooseRowId1: {},\r\n        multipleSelection: [],\r\n        pdInfo: {\r\n          ppID:'',\r\n          pdCode: '',\r\n          pdName: '',\r\n          pdEdition: '',\r\n          pdCls1: '',\r\n          pdCls2: '',\r\n          pdCls4: '',\r\n          pdApplDate: [],\r\n          pdrReleaseDate: [],\r\n\r\n          pdApplDateStart: '',\r\n          pdApplDateEnd: '',\r\n\r\n          pdrReleaseDateStart: '',\r\n          pdrReleaseDateEnd: '',\r\n        },\r\n\r\n        showPageFlag:'',\r\n        pdPpInfo: {\r\n          id: '',\r\n          ppCode: '',\r\n          ppName: '',\r\n          ppType: '',//类型\r\n          ppPlanName: '',\r\n          ppPlanCode: '',\r\n          ppPersonNum: '',\r\n        },\r\n        ppPdInfo2: {\r\n          id: '',\r\n          pdCode: '',\r\n          pdName: '',\r\n          pdEdition: ''\r\n        },\r\n        pageFlag:'',\r\n        comboInfo:{},\r\n        //检验规则\r\n        rules: {\r\n          ppCode: [{required: true, message: this.$t('pdppDefinition.ppCodeIdea'), trigger: 'blur'}],\r\n          ppName: [{required: true, message: this.$t('pdppDefinition.ppNameIdea'), trigger: 'blur'}],\r\n          ppType: [{required: true, message: this.$t('pdppDefinition.ppTypeIdea'), trigger: 'change'}],\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.showPageFlag = this.$route.query.showPageFlag;\r\n      this.pageFlag=this.$route.query.pageFlag\r\n      this.pdPpInfo = this.getPdData();\r\n      this.pdInfo.ppID = this.pdPpInfo.id;\r\n      this.comboInfo= this.pdPpInfo\r\n      querypdPpInfo(this.buildRequestData({\"ppInfoId\":this.pdPpInfo.id})).then(res =>{\r\n        this.pdPpInfo = res.data;\r\n        this.cacheCurrPagePdData(this.pdPpInfo)\r\n      })\r\n      this.ProgInfoShow=false;\r\n      this.$nextTick(() => {\r\n        this.$refs.ppForm.clearValidate()\r\n      })\r\n      this.querypdPpInfo();\r\n      this.listConnection();\r\n    },\r\n\r\n    methods: {\r\n      searchMore() {\r\n        if (this.shoButton) {\r\n          this.shoButton = false;\r\n        } else {\r\n          this.shoButton = true;\r\n        }\r\n      },\r\n      //初始化页面方法：产品套餐下的方案\r\n      querypdPpInfo() {\r\n        querypdPpInfo(this.buildRequestData({\"ppInfoId\": this.pdPpInfo.id})).then(res => {\r\n          this.pdPpInfo.ppType = res.data.ppType\r\n          this.pdPpInfo.ppName = res.data.ppName\r\n        })\r\n      },\r\n      choosePlan(row) {  //选择方案 按钮 查询产品下的方案；\r\n        this.ppPdInfo2 = row;\r\n        this.buttonShow = true;\r\n        this.opTable2 = [];\r\n        this.opTable1 = [];\r\n        this.showOp = true;\r\n        queryOpConnextion(this.buildRequestData({\"pdInfoId\": row.id, \"ppInfoId\": this.pdPpInfo.id})).then(res => {\r\n          this.opTable1 = res.data;\r\n        })\r\n        queryOpUnConnextion(this.buildRequestData({\"pdInfoId\": row.id, \"ppInfoId\": this.pdPpInfo.id})).then(res2 => {\r\n          this.opTable2 = res2.data\r\n        })\r\n      },\r\n      chooseOne(row) { //单选按钮，查询产品关联方案\r\n        this.buttonShow = false;\r\n        this.showOp = true;\r\n        this.showPd = false;\r\n        this.opTable2 = [];\r\n        this.opTable1 = [];\r\n        this.selectOpTableLData = [];\r\n        this.ppPdInfo2 = row;\r\n        let map = {\r\n          \"pdInfoId\": row.id,\r\n          \"ppInfoId\": this.pdPpInfo.id\r\n        }\r\n        queryOpConnextion(this.buildRequestData(map)).then(res => {\r\n          this.opTable1 = res.data;\r\n        })\r\n        queryOpUnConnextion(this.buildRequestData(map)).then(res2 => {\r\n          this.opTable2 = res2.data\r\n        })\r\n        this.$refs.configs.clearSelection();\r\n      },\r\n      rowClick(row, column, event) {\r\n        if (event.target.nodeName === \"INPUT\") {\r\n          if (row.id === this.chooseRowId.id) {\r\n            this.chooseRowId = {}\r\n            this.showOp = false;\r\n            this.showPd = true;\r\n          }\r\n        }\r\n      },\r\n      listConnection() {\r\n        listConnection(this.buildRequestData({\"ppInfoId\": this.pdPpInfo.id})).then(res => {\r\n          this.configs = res.data;\r\n        })\r\n      },\r\n\r\n      remove(row) {\r\n        removeConnection(this.buildRequestData({\"ppInfoId\": this.pdPpInfo.id, \"pdInfoId\": row.id})).then(res => {\r\n          this.notifySuccess(res.message)\r\n          this.listConnection();\r\n        })\r\n          this.chooseRowId={}\r\n          this.showOp = false;\r\n          this.showPd = true;\r\n      },\r\n      handleSearch() {\r\n        if (this.pdInfo.pdApplDate) {\r\n          this.pdInfo.pdApplDateStart = this.pdInfo.pdApplDate[0]\r\n          this.pdInfo.pdApplDateEnd = this.pdInfo.pdApplDate[1]\r\n        } else {\r\n          this.pdInfo.pdApplDateStart = ''\r\n          this.pdInfo.pdApplDateEnd = ''\r\n        }\r\n        if (this.pdInfo.pdrReleaseDate) {\r\n          this.pdInfo.pdrReleaseDateStart = this.pdInfo.pdrReleaseDate[0]\r\n          this.pdInfo.pdrReleaseDateEnd = this.pdInfo.pdrReleaseDate[1]\r\n        } else {\r\n          this.pdInfo.pdrReleaseDateStart = ''\r\n          this.pdInfo.pdrReleaseDateEnd = ''\r\n        }\r\n        this.$refs.page.reload();\r\n      },\r\n      showThis(row) {\r\n        this.$router.push({name: '产品框架定义主页', query: {showPageFlag: '1'},params:row})\r\n      },\r\n      showThis2(row) {\r\n        let map = {\r\n          \"progCode\": row.pdProgCode,\r\n          \"progName\": row.pdProgName\r\n        }\r\n        lookProgInfo(this.buildRequestData(map)).then(res => {\r\n          this.cacheJsonData(\"form_programme\", res.data.pdProgS)\r\n          this.cacheCurrPagePdData(res.data.pdInfoS)\r\n          this.cacheJsonData(\"tableData_programme\", res.data.progOneInfoS)\r\n          this.cacheJsonData(\"ReadPpProgInfo\",true);\r\n          let maps = {\r\n            \"productId\": res.data.pdInfoS.id,\r\n            \"like_pdProgName\":row.pdProgName,\r\n            \"eq_pdProgCode\": row.pdProgCode\r\n          }\r\n          findAllProgrammeVoByProductIdPp(this.buildRequestData(maps)).then(res =>{\r\n            this.cacheJsonData(\"premiumList\", res.data.prem);\r\n            this.cacheJsonData(\"survivalList\", res.data.survivalList);\r\n            this.cacheJsonData(\"claimList\",res.data.claimList);\r\n          });\r\n          this.$nextTick(() => {\r\n            this.ProgInfoShow = true;\r\n          })\r\n        })\r\n      },\r\n      checkAll(val) {\r\n        this.nowSelectLeftData = val;\r\n      },\r\n      checkRightAll(val) {\r\n        this.nowSelectRightData = val;\r\n      },\r\n\r\n      handleSelectionChange(val) {\r\n        this.multipleSelection = val;\r\n      },\r\n      savePp() {\r\n        this.$refs.ppForm.validate(valid => {\r\n          if (valid) {\r\n            let map = {\r\n              \"pdPpInfo\": this.pdPpInfo,\r\n              \"pdInfo\": this.multipleSelection,\r\n              \"progList\": this.selectOpTableLData\r\n            }\r\n            if (this.multipleSelection && this.multipleSelection.length > 0) {\r\n              savePdPpConnection(this.buildRequestData(map)).then(res => {\r\n                  if (this.pdPpInfo.ppType == 'N') {\r\n                      this.$emit('showIt',true);\r\n                  }else {\r\n                      this.$emit('showIt',false);\r\n                  }\r\n                this.notifySuccess(res.message)\r\n                this.listConnection();\r\n                  this.$refs.page.reload();\r\n                this.$nextTick(() => {\r\n                  this.$refs.ppForm.clearValidate()\r\n                })\r\n                this.selectOpTableLData = [];\r\n                this.$nextTick(() =>{\r\n                  this.$refs.configs.clearSelection();\r\n                })\r\n              })\r\n              this.$refs.configs.clearSelection();\r\n            } else {\r\n              saveAttributeEntity(this.buildRequestData({\"ppInfoAttr\":this.pdPpInfo})).then(res =>{\r\n                  if (this.pdPpInfo.ppType == 'N') {\r\n                      this.$emit('showIt',true);\r\n                  }else {\r\n                      this.$emit('showIt',false);\r\n                  }\r\n                      this.notifySuccess(res.message)\r\n                this.listConnection();\r\n                this.$nextTick(() => {\r\n                  this.$refs.ppForm.clearValidate()\r\n                })\r\n                this.selectOpTableLData = [];\r\n                this.$nextTick(() =>{\r\n                  this.$refs.configs.clearSelection();\r\n                })\r\n              })\r\n              return;\r\n            }\r\n\r\n          } else {\r\n            this.focusItem()\r\n          }\r\n\r\n        })\r\n\r\n\r\n      },\r\n      //把右侧选中数据移至左边\r\n      handelSelect() {\r\n\r\n        this.nowSelectRightData.forEach(item => {\r\n          this.opTable1.push(item);\r\n        });\r\n        for (let i = 0; i < this.opTable2.length; i++) {\r\n          for (let j = 0; j < this.opTable1.length; j++) {\r\n            if (this.opTable2[i].pdProgCode === this.opTable1[j].pdProgCode) {\r\n              this.opTable2.splice(i, 1);\r\n            }\r\n          }\r\n        }\r\n        if (this.buttonShow) {\r\n          let array = this.buildArray(this.opTable1);\r\n          var item = [];\r\n          for (item of array) {\r\n            this.selectOpTableLData.push(item);\r\n          }\r\n        } else {\r\n          this.savePpPdProg();\r\n        }\r\n\r\n        this.nowSelectLeftData = [];\r\n        this.nowSelectRightData = [];\r\n      },\r\n      //把左侧选中数据移至右边\r\n      handleRemoveSelect() {\r\n        if (this.opTable1.length == this.nowSelectLeftData.length) {\r\n          this.notifyWarning(\"至少保留一条方案信息\");\r\n          return;\r\n        } else {\r\n          this.nowSelectLeftData.forEach(item => {\r\n            this.opTable2.push(item);\r\n          });\r\n          for (let i = 0; i < this.opTable2.length; i++) {\r\n            for (let j = 0; j < this.opTable1.length; j++) {\r\n              if (this.opTable2[i].pdProgCode === this.opTable1[j].pdProgCode) {\r\n                this.opTable1.splice(j, 1);\r\n              }\r\n            }\r\n          }\r\n          if (this.buttonShow) {\r\n            let array = this.buildArray(this.opTable1);\r\n            var item = [];\r\n            for (item of array) {\r\n              this.selectOpTableLData.push(item);\r\n            }\r\n          } else {\r\n            this.savePpPdProg();\r\n          }\r\n        }\r\n      },\r\n\r\n      //下拉过滤1$对应编码$1\r\n      typeRegionSelect(val) {\r\n        if (val == 'L') {\r\n          this.finelinesRegionFilter = '1$L01$L02$L03$1'\r\n        } else if (val == 'R') {\r\n          this.finelinesRegionFilter = '1$R01$R02$1'\r\n        } else if (val == 'H') {\r\n          this.finelinesRegionFilter = '1$H01$H02$H03$H04$1'\r\n        } else if (val == 'A') {\r\n          this.finelinesRegionFilter = '1$A01$1'\r\n        } else {\r\n          this.finelinesRegionFilter = ''\r\n        }\r\n      },\r\n      //方案的保存\r\n      savePpPdProg() {\r\n        let map = {\r\n          \"pdPpInfo\": this.pdPpInfo, //套餐信息\r\n          \"pdProgInfo\": this.opTable1,\r\n          \"pdInfoCode\": this.ppPdInfo2.pdCode,\r\n          \"pdInfoName\": this.ppPdInfo2.pdName,\r\n          \"pdEdition\": this.ppPdInfo2.pdEdition,\r\n          \"pdInfoId\": this.ppPdInfo2.id\r\n        }\r\n        savePpPdProgs(this.buildRequestData(map)).then(res => {\r\n          this.notifySuccess(res.message);\r\n          queryOpConnextion(this.buildRequestData({\"pdInfoId\": row.id, \"ppInfoId\": this.pdPpInfo.id})).then(res => {\r\n            this.opTable1 = res.data;\r\n          })\r\n          queryOpUnConnextion(this.buildRequestData({\"pdInfoId\": row.id, \"ppInfoId\": this.pdPpInfo.id})).then(res2 => {\r\n            this.opTable2 = res2.data\r\n          })\r\n\r\n        })\r\n      },\r\n      buildArray(arr) {\r\n        let array = []\r\n        let array_item = []\r\n        let array_item2 = []\r\n        for (array_item of arr) {\r\n          array_item2.push(array_item.pdProgCode, array_item.pdProgName);\r\n          array.push(array_item)\r\n          array_item = []\r\n        }\r\n        return array\r\n      },\r\n      goBack(){\r\n        this.$router.push({path: '/product-package-definition/pp-framework-def/pp-apply', params: {}})\r\n      },\r\n      // backToSaleStop(){\r\n      //   this.$router.push({ name: '套餐停售', query:{comboInfo:this.comboInfo,pageFlag:this.pageFlag}})\r\n      // }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .opSetting {\r\n    text-align: center;\r\n    margin-top: 30px;\r\n  }\r\n\r\n  .spacing {\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .showDiv {\r\n    width: 90%;\r\n    height: 100%;\r\n    margin-top: -40px;\r\n    margin-left: -40px;\r\n    position: absolute;\r\n    background: #ffffff00;\r\n    z-index: 999;\r\n  }\r\n</style>\r\n\r\n"]}]}