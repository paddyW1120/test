{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\business-general-conf\\commonpa\\commonpa-item-relate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\business-general-conf\\commonpa\\commonpa-item-relate\\index.vue","mtime":1609847106573},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2Fzc29jaWF0ZSwgZmluZEFsbFVucmVsYXRlZENvbW1vblBhSW5mb0l0ZW1Wb0J5UGFJZCxmaW5kQWxsVW5yZWxhdGVkQ29tbW9uUGFJbmZvSXRlbVZvQnlQYUlkQW5kUGFOYW1lfSBmcm9tICJAL2FwaS9iYXNpY2luZm8vY29tbW9ucGFpdGVtcmVsYXRlIgoKbGV0IF90aGlzCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNvbW1vblBhSXRlbVJlbGF0ZSIsCiAgcHJvcHM6IHsKICAgIHBkUGFJbmZvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge30KICAgICAgfQogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgZmlsdGVyX3BkUGFNc1R5cGUoY29kZSkgewogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkUGFNc1R5cGUnLCBjb2RlKQogICAgfSwKICAgIGZpbHRlcl9wZFBhTXNJbnB1dFR5cGUoY29kZSkgewogICAgICByZXR1cm4gX3RoaXMuZ2V0Q29kZU5hbWUoJ3BkUGFNc0lucHV0VHlwZScsIGNvZGUpCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgX3RoaXMgPSB0aGlzCiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGFQYUluZm9JdGVtOiBbXSwKICAgICAgcGFyYW1zOnsKICAgICAgICBwZFBhTWVzc05hbWU6JycsCiAgICAgICAgcGRQYU1lc3NUeXBlOicnCgogICAgICB9LAogICAgICBzZWxlY3RlZEl0ZW1MaXN0OiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfSwKICBtb3VudGVkKCkgewogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIGlmICh0aGlzLnBkUGFJbmZvLmlkKSB7CiAgICAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1MaXN0ID0gdmFsCiAgICB9LAogICAgaGFuZGxlU2VhcmNoKCl7CiAgICAgICAgbGV0IHBhcmFtID17CiAgICAgICAgICAgIHBhSWQ6dGhpcy5wZFBhSW5mby5pZCwKICAgICAgICAgICAgcGRQYU1zTmFtZTp0aGlzLnBhcmFtcy5wZFBhTWVzc05hbWUsCiAgICAgICAgICAgIHBkUGFNc1R5cGU6dGhpcy5wYXJhbXMucGRQYU1lc3NUeXBlCiAgICAgICAgfTsKICAgICAgICBmaW5kQWxsVW5yZWxhdGVkQ29tbW9uUGFJbmZvSXRlbVZvQnlQYUlkQW5kUGFOYW1lKHRoaXMuYnVpbGRSZXF1ZXN0RGF0YShwYXJhbSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy50YWJsZURhdGFQYUluZm9JdGVtID0gcmVzcG9uc2UuZGF0YQogICAgICAgIH0pCiAgICB9LAogICAgYmFjaygpIHsKICAgICAgdGhpcy4kZW1pdCgnZGlhbG9nQ2xvc2VkJykKICAgIH0sCiAgICBhc3NvY2lhdGUoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbUxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5ub3RpZnlFcnJvcih0aGlzLiR0KCdjb21tb25QYUl0ZW1SZWxhdGUucGxlYXNlU2VsZWN0UGFJdGVtJykpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgcGRQYUluZm86IHRoaXMucGRQYUluZm8sCiAgICAgICAgaXRlbUxpc3Q6IHRoaXMuc2VsZWN0ZWRJdGVtTGlzdAogICAgICB9CiAgICAgIGFzc29jaWF0ZSh0aGlzLmJ1aWxkUmVxdWVzdERhdGEocGFyYW0pKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLm5vdGlmeVN1Y2Nlc3ModGhpcy4kdCgnY29tbW9uUGFJdGVtUmVsYXRlLmFzc29jaWF0ZVN1Y2Nlc3NmdWxseScpKQogICAgICAgIHRoaXMuaW5pdCgpCiAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0ZWRQYUNoYW5nZWQnKQogICAgICB9KQogICAgfSwKICAgIHJlZnJlc2goKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtTGlzdCA9IFtdCiAgICAgIHRoaXMuaW5pdCgpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/business-general-conf/commonpa/commonpa-item-relate","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :label=\"$t('commonPaItemRelate.paItemDef')\" :isDialog=\"true\" @backTo=\"back\"></cus-page-title-back>\r\n   <el-form  :model=\"params\" style=\"margin: 20px 0 0 0\" label-width=\"auto\">\r\n        <el-row :gutter=\"10\">\r\n            <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('commonPaItemRelate.pdPaMsName')\" prop=\"pdPaMessName\">\r\n              <el-input v-model=\"params.pdPaMessName\" :placeholder=\"$t('pay_def.message.please_enter')\" clearable></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item :label=\"$t('commonPaItemRelate.pdPaMsType')\" prop=\"pdPaMessType\">\r\n              <cus-select v-model=\"params.pdPaMessType\" :codetype=\"'pdPaMsType'\"\r\n                          ></cus-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <cus-btn-wrapper>\r\n              <el-button  size=\"mini\"\r\n                v-waves\r\n                type=\"primary\"\r\n                @click=\"handleSearch\"\r\n                class=\"filter-button\"\r\n                icon=\"el-icon-search\"\r\n              >{{$t('table.search') }}</el-button>\r\n          </cus-btn-wrapper>\r\n        </el-row>\r\n      </el-form>\r\n    <cus-table-title :label=\"$t('commonPaItemRelate.tableName')\"></cus-table-title>\r\n    <el-table :data=\"tableDataPaInfoItem\" @selection-change=\"handleSelectionChange\" border\r\n              element-loading-text=\"Loading\"\r\n              fit highlight-current-row max-height=\"500\" size=\"mini\">\r\n      <el-table-column type=\"selection\" width=\"50\"></el-table-column>\r\n      <el-table-column :label=\"$t('table.id')\" align=\"center\" type=\"index\"></el-table-column>\r\n      <el-table-column :label=\"$t('commonPaItemRelate.pdPaMsName')\" align=\"center\" prop=\"pdPaMessName\"\r\n                       sortable></el-table-column>\r\n      <el-table-column :label=\"$t('commonPaItemRelate.pdPaMsExplanation')\" align=\"center\" prop=\"pdPaMessDesc\"\r\n                       sortable></el-table-column>\r\n      <el-table-column :label=\"$t('commonPaItemRelate.pdPaMsType')\" align=\"center\" prop=\"pdPaMessType\" sortable>\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.pdPaMessType | filter_pdPaMsType }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column :label=\"$t('commonPaItemRelate.pdPaMsOptions')\" align=\"center\" sortable>\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"scope.row.pdPaMessType === '2'\">\r\n            <span v-for=\"ldcode in scope.row.ldcodeList\" v-if=\"scope.row.ldcodeList.length > 0\">\r\n              {{ ldcode.code+':'+ldcode.codeName }}\r\n              <span v-if=\"scope.row.ldcodeList.indexOf(ldcode) !== scope.row.ldcodeList.length - 1\">,</span>\r\n            </span>\r\n          </span>\r\n          <span v-else>\r\n            {{ scope.row.pdPaMessInputType | filter_pdPaMsInputType }}\r\n          </span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-row>\r\n      <div style=\"margin:10px 0 0 0;float: right\">\r\n        <el-button  size=\"small\" @click=\"associate\" style=\"margin: 0 10px 0 0\" type=\"primary\"\r\n                   v-auth=\"'common-pd-pa-item-relate:associate'\">\r\n          <i class=\"el-icon-success el-icon--left\"></i>\r\n          {{ $t('table.save') }}\r\n        </el-button>\r\n        <el-button  size=\"small\" @click=\"refresh\" style=\"margin: 0\" type=\"primary\">\r\n          <i class=\"el-icon-refresh el-icon--left\"></i>\r\n          {{ $t('table.refresh') }}\r\n        </el-button>\r\n      </div>\r\n    </el-row>\r\n\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\n\r\n  import {associate, findAllUnrelatedCommonPaInfoItemVoByPaId,findAllUnrelatedCommonPaInfoItemVoByPaIdAndPaName} from \"@/api/basicinfo/commonpaitemrelate\"\r\n\r\n  let _this\r\n\r\n  export default {\r\n    name: \"commonPaItemRelate\",\r\n    props: {\r\n      pdPaInfo: {\r\n        type: Object,\r\n        required: true,\r\n        default: () => {\r\n          return {}\r\n        }\r\n      }\r\n    },\r\n    filters: {\r\n      filter_pdPaMsType(code) {\r\n        return _this.getCodeName('pdPaMsType', code)\r\n      },\r\n      filter_pdPaMsInputType(code) {\r\n        return _this.getCodeName('pdPaMsInputType', code)\r\n      }\r\n    },\r\n    data() {\r\n      _this = this\r\n      return {\r\n        tableDataPaInfoItem: [],\r\n        params:{\r\n          pdPaMessName:'',\r\n          pdPaMessType:''\r\n\r\n        },\r\n        selectedItemList: []\r\n      }\r\n    },\r\n    created() {\r\n      this.init()\r\n    },\r\n    mounted() {\r\n    },\r\n    computed: {},\r\n    methods: {\r\n      init() {\r\n        if (this.pdPaInfo.id) {\r\n             this.handleSearch();\r\n        }\r\n      },\r\n      handleSelectionChange(val) {\r\n        this.selectedItemList = val\r\n      },\r\n      handleSearch(){\r\n          let param ={\r\n              paId:this.pdPaInfo.id,\r\n              pdPaMsName:this.params.pdPaMessName,\r\n              pdPaMsType:this.params.pdPaMessType\r\n          };\r\n          findAllUnrelatedCommonPaInfoItemVoByPaIdAndPaName(this.buildRequestData(param)).then(response => {\r\n            this.tableDataPaInfoItem = response.data\r\n          })\r\n      },\r\n      back() {\r\n        this.$emit('dialogClosed')\r\n      },\r\n      associate() {\r\n        if (this.selectedItemList.length === 0) {\r\n          this.notifyError(this.$t('commonPaItemRelate.pleaseSelectPaItem'))\r\n          return\r\n        }\r\n        const param = {\r\n          pdPaInfo: this.pdPaInfo,\r\n          itemList: this.selectedItemList\r\n        }\r\n        associate(this.buildRequestData(param)).then(() => {\r\n          this.notifySuccess(this.$t('commonPaItemRelate.associateSuccessfully'))\r\n          this.init()\r\n          this.$emit('selectedPaChanged')\r\n        })\r\n      },\r\n      refresh() {\r\n        this.selectedItemList = []\r\n        this.init()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"css\">\r\n\r\n</style>\r\n"]}]}