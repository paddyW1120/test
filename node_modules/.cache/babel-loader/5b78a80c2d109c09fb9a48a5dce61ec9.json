{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-attr-def\\base-attr-def\\preservation\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-definition\\pd-framework-def\\pd-attr-def\\base-attr-def\\preservation\\index.vue","mtime":1609847106840},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lmxhc3QtaW5kZXgtb2YuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfUHJvZHVjdEF0dHJpYnV0ZURlZmluaXRpb24gPSByZXF1aXJlKCJAL2FwaS9iYXNpY2luZm8vUHJvZHVjdEF0dHJpYnV0ZURlZmluaXRpb24iKTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfdGhpczsKCnZhciBfZGVmYXVsdCA9IHsKICBmaWx0ZXJzOiB7fSwKICBuYW1lOiAicHJlc2VydmF0aW9uIiwKICBwcm9wczogewogICAgc2VsUE86IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IFtdCiAgICB9LAogICAgcG9PcHRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBbXQogICAgfSwKICAgIGRlZmF1bHRTZWxQbzogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogW10KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gewogICAgICBwZHRlbXBQZEluZm86IHt9LAogICAgICBzZWxQT0NvcHk6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbFBPOiBmdW5jdGlvbiBzZWxQTygpIHsKICAgICAgdGhpcy5jbGVhblByZXNlcnZhdGlvbigpOwogICAgfSwKICAgIGRlZmF1bHRTZWxQbzogZnVuY3Rpb24gZGVmYXVsdFNlbFBvKCkgewogICAgICB0aGlzLmNsZWFuUHJlc2VydmF0aW9uKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5wZHRlbXBQZEluZm8gPSB0aGlzLmdldFBkRGF0YSgpOwogICAgdGhpcy5jbGVhblByZXNlcnZhdGlvbigpOwogIH0sCiAgbWV0aG9kczogewogICAgYmFja1RvTWVudTogZnVuY3Rpb24gYmFja1RvTWVudSgpIHsKICAgICAgdGhpcy4kZW1pdCgiYmFja1RvTWVudSIsIHRydWUpOwogICAgfSwKICAgIGFkZFByZXNlcnZhdGlvbjogZnVuY3Rpb24gYWRkUHJlc2VydmF0aW9uKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB0ZW1wID0gW107CiAgICAgIHRoaXMuc2VsUE9Db3B5LmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgIGlmICghX3RoaXMyLnNlbFBPLmluY2x1ZGVzKHZhbCkpIHsKICAgICAgICAgIHRlbXAucHVzaCh7CiAgICAgICAgICAgIHBkVmVySWQ6IF90aGlzMi5wZHRlbXBQZEluZm8ucGRWZXJJZCwKICAgICAgICAgICAgcGRDb2RlOiBfdGhpczIucGR0ZW1wUGRJbmZvLnBkQ29kZSwKICAgICAgICAgICAgcGRJbmZvSWQ6IF90aGlzMi5wZHRlbXBQZEluZm8uaWQsCiAgICAgICAgICAgIHBkTmFtZTogX3RoaXMyLnBkdGVtcFBkSW5mby5wZE5hbWUsCiAgICAgICAgICAgIHBhTmFtZTogX3RoaXMyLmdldENhcHRpb24odmFsLCAyKSwKICAgICAgICAgICAgcGRQYUluZm9JZDogX3RoaXMyLmdldENhcHRpb24odmFsLCAwKSwKICAgICAgICAgICAgcGFDb2RlOiBfdGhpczIuZ2V0Q2FwdGlvbih2YWwsIDEpCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAoMCwgX1Byb2R1Y3RBdHRyaWJ1dGVEZWZpbml0aW9uLmFkZFByZXNlcnZhdGlvbikodGhpcy5idWlsZFJlcXVlc3REYXRhKHsKICAgICAgICBwZHRlbXBQZFBhSW5mb3M6IHRlbXAKICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5ub3RpZnlTdWNjZXNzKHJlcy5tZXNzYWdlKTsKCiAgICAgICAgX3RoaXMyLmJhY2tUb01lbnUoKTsKICAgICAgfSk7CiAgICB9LAogICAgY2xlYW5QcmVzZXJ2YXRpb246IGZ1bmN0aW9uIGNsZWFuUHJlc2VydmF0aW9uKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuc2VsUE9Db3B5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNlbFBPKSk7CgogICAgICBpZiAodGhpcy5kZWZhdWx0U2VsUG8ubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5kZWZhdWx0U2VsUG8uZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKCFfdGhpczMuc2VsUE9Db3B5LmluY2x1ZGVzKGRhdGEpKSB7CiAgICAgICAgICAgIF90aGlzMy5zZWxQT0NvcHkucHVzaChkYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldENhcHRpb246IGZ1bmN0aW9uIGdldENhcHRpb24ob2JqLCBzdGF0ZSkgewogICAgICB2YXIgaW5kZXggPSBvYmoubGFzdEluZGV4T2YoIjoiKTsKICAgICAgdmFyIGluZGV4MSA9IG9iai5pbmRleE9mKCI6Iik7CgogICAgICBpZiAoc3RhdGUgPT09IDApIHsKICAgICAgICByZXR1cm4gb2JqLnN1YnN0cmluZygwLCBpbmRleDEpOwogICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAxKSB7CiAgICAgICAgcmV0dXJuIG9iai5zdWJzdHJpbmcoaW5kZXgxICsgMSwgaW5kZXgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBvYmouc3Vic3RyaW5nKGluZGV4ICsgMSwgb2JqLmxlbmd0aCk7CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <cus-wraper>\r\n    <cus-page-title-back :isDialog=\"true\" :label=\"$t('ProductAttributeDefinition.proConPreservationItem')\" @backTo=\"backToMenu\"></cus-page-title-back>\r\n    <el-row style=\"margin-left: 40px;\">\r\n      <el-checkbox-group v-model=\"selPOCopy\">\r\n        <el-col v-for=\"po in poOptions\" :span=\"6\" style=\"padding: 4px;\">\r\n          <el-checkbox :key=\"po.pdPaCode\" :label=\"po.id+':'+po.pdPaCode+':'+po.pdPaName\" :disabled=\"selPO.includes(po.id+':'+po.pdPaCode+':'+po.pdPaName)\">{{ po.pdPaName }}\r\n          </el-checkbox>\r\n        </el-col>\r\n      </el-checkbox-group>\r\n    </el-row>\r\n    <el-form>\r\n      <el-form-item align=\"right\">\r\n          <el-button size=\"small\" @click=\"addPreservation\" icon=\"el-icon-success\" v-auth=\"'product-attr:add'\" type=\"primary\">{{$t('productValueAddedTax.add')}}</el-button>\r\n          <el-button size=\"small\" @click=\"cleanPreservation\" icon=\"el-icon-refresh el-icon--left\" type=\"primary\">{{$t('productValueAddedTax.refresh')}}</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n  </cus-wraper>\r\n</template>\r\n<script>\r\nlet _this;\r\nimport {addPreservation} from '@/api/basicinfo/ProductAttributeDefinition'\r\nexport default {\r\n  filters: {},\r\n  name: \"preservation\",\r\n  props: {\r\n    selPO: {\r\n      type: Array,\r\n      default: [],\r\n    },\r\n    poOptions: {\r\n      type: Array,\r\n      default: [],\r\n    },\r\n    defaultSelPo: {\r\n      type: Array,\r\n      default: [],\r\n    }\r\n  },\r\n  data() {\r\n    _this = this;\r\n    return {\r\n      pdtempPdInfo: {},\r\n      selPOCopy: [],\r\n    };\r\n  },\r\n  watch: {\r\n    selPO:function(){\r\n      this.cleanPreservation();\r\n    },\r\n    defaultSelPo:function(){\r\n      this.cleanPreservation();\r\n    },\r\n  },\r\n  created() {\r\n    this.pdtempPdInfo = this.getPdData();\r\n    this.cleanPreservation();\r\n  },\r\n  methods: {\r\n    backToMenu() {\r\n      this.$emit(\"backToMenu\", true);\r\n    },\r\n    addPreservation(){\r\n      let temp = [];\r\n      this.selPOCopy.forEach(val=>{\r\n        if(!(this.selPO.includes(val))){\r\n          temp.push({\r\n            pdVerId:this.pdtempPdInfo.pdVerId,\r\n            pdCode:this.pdtempPdInfo.pdCode,\r\n            pdInfoId:this.pdtempPdInfo.id,\r\n            pdName:this.pdtempPdInfo.pdName,\r\n            paName:this.getCaption(val, 2),\r\n            pdPaInfoId:this.getCaption(val, 0),\r\n            paCode:this.getCaption(val, 1),\r\n          });\r\n        }\r\n      })\r\n      addPreservation(this.buildRequestData({pdtempPdPaInfos:temp})).then(res=>{\r\n        this.notifySuccess(res.message);\r\n        this.backToMenu();\r\n      })\r\n    },\r\n    cleanPreservation(){\r\n      this.selPOCopy = JSON.parse(JSON.stringify(this.selPO));\r\n      if(this.defaultSelPo.length){\r\n        this.defaultSelPo.forEach(data=>{\r\n          if(!this.selPOCopy.includes(data)){\r\n            this.selPOCopy.push(data)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    getCaption(obj, state) {\r\n      const index = obj.lastIndexOf(\":\")\r\n      const index1 = obj.indexOf(\":\")\r\n      if (state === 0) {\r\n        return obj.substring(0, index1)\r\n      } else if(state === 1) {\r\n        return obj.substring(index1 + 1, index)\r\n      }else{\r\n        return obj.substring(index + 1, obj.length)\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/views/product-definition/pd-framework-def/pd-attr-def/base-attr-def/preservation"}]}