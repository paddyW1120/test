{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-acceptance-def\\accpt-page-def\\draggable\\JsonDrawer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\product-package-definition\\pp-operation-def\\pp-acceptance-def\\accpt-page-def\\draggable\\JsonDrawer.vue","mtime":1609847107015},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gcmVxdWlyZSgiRDovODYxODEvRGVza3RvcC9wcm9kdWN0L3Bjcy1wcm9kdWN0LXZpZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIpOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi84NjE4MS9EZXNrdG9wL3Byb2R1Y3QvcGNzLXByb2R1Y3Qtdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9pbmRleCA9IHJlcXVpcmUoIkAvdXRpbHMvZHJhZ2dhYmxlL2luZGV4Iik7Cgp2YXIgX2NsaXBib2FyZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiY2xpcGJvYXJkIikpOwoKdmFyIF9maWxlU2F2ZXIgPSByZXF1aXJlKCJmaWxlLXNhdmVyIik7Cgp2YXIgX2xvYWRCZWF1dGlmaWVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL2RyYWdnYWJsZS9sb2FkQmVhdXRpZmllciIpKTsKCnZhciBtb25hY28gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJtb25hY28tZWRpdG9yIikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIGJlYXV0aWZpZXI7CnZhciBfZGVmYXVsdCA9IHsKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAganNvblN0cjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBiZWF1dGlmaWVyOiBudWxsLAogICAgICBqc29uRWRpdG9yOiBudWxsCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXZlbnREZWZhdWx0U2F2ZSk7CiAgICB2YXIgY2xpcGJvYXJkID0gbmV3IF9jbGlwYm9hcmQuZGVmYXVsdCgnLmNvcHktanNvbi1idG4nLCB7CiAgICAgIHRleHQ6IGZ1bmN0aW9uIHRleHQodHJpZ2dlcikgewogICAgICAgIF90aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgbWVzc2FnZTogJ+S7o+eggeW3suWkjeWItuWIsOWJquWIh+adv++8jOWPr+eymOi0tOOAgicsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIF90aGlzLmJlYXV0aWZpZXJKc29uOwogICAgICB9CiAgICB9KTsKICAgIGNsaXBib2FyZC5vbignZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign5Luj56CB5aSN5Yi25aSx6LSlJyk7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMucHJldmVudERlZmF1bHRTYXZlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHByZXZlbnREZWZhdWx0U2F2ZTogZnVuY3Rpb24gcHJldmVudERlZmF1bHRTYXZlKGUpIHsKICAgICAgaWYgKGUua2V5ID09PSAncycgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25PcGVuOiBmdW5jdGlvbiBvbk9wZW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgKDAsIF9sb2FkQmVhdXRpZmllci5kZWZhdWx0KShmdW5jdGlvbiAoYnRmKSB7CiAgICAgICAgYmVhdXRpZmllciA9IGJ0ZjsKICAgICAgICBfdGhpczIuYmVhdXRpZmllckpzb24gPSBiZWF1dGlmaWVyLmpzKF90aGlzMi5qc29uU3RyLCBfaW5kZXguYmVhdXRpZmllckNvbmYuanMpOwoKICAgICAgICBfdGhpczIuc2V0RWRpdG9yVmFsdWUoJ2VkaXRvckpzb24nLCBfdGhpczIuYmVhdXRpZmllckpzb24pOwogICAgICB9KTsKICAgIH0sCiAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkge30sCiAgICBzZXRFZGl0b3JWYWx1ZTogZnVuY3Rpb24gc2V0RWRpdG9yVmFsdWUoaWQsIGNvZGVTdHIpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5qc29uRWRpdG9yKSB7CiAgICAgICAgdGhpcy5qc29uRWRpdG9yLnNldFZhbHVlKGNvZGVTdHIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuanNvbkVkaXRvciA9IG1vbmFjby5lZGl0b3IuY3JlYXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSwgewogICAgICAgICAgdmFsdWU6IGNvZGVTdHIsCiAgICAgICAgICB0aGVtZTogJ3ZzLWRhcmsnLAogICAgICAgICAgbGFuZ3VhZ2U6ICdqc29uJywKICAgICAgICAgIGF1dG9tYXRpY0xheW91dDogdHJ1ZQogICAgICAgIH0pOyAvLyBjdHJsICsgcyDliLfmlrAKCiAgICAgICAgdGhpcy5qc29uRWRpdG9yLm9uS2V5RG93bihmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDkgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSB7CiAgICAgICAgICAgIF90aGlzMy5yZWZyZXNoKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBleHBvcnRKc29uRmlsZTogZnVuY3Rpb24gZXhwb3J0SnNvbkZpbGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy4kcHJvbXB0KCfmlofku7blkI06JywgJ+WvvOWHuuaWh+S7ticsIHsKICAgICAgICBpbnB1dFZhbHVlOiAiIi5jb25jYXQoK25ldyBEYXRlKCksICIuanNvbiIpLAogICAgICAgIGNsb3NlT25DbGlja01vZGFsOiBmYWxzZSwKICAgICAgICBpbnB1dFBsYWNlaG9sZGVyOiAn6K+36L6T5YWl5paH5Lu25ZCNJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHZhbHVlID0gX3JlZi52YWx1ZTsKICAgICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9ICIiLmNvbmNhdCgrbmV3IERhdGUoKSwgIi5qc29uIik7CgogICAgICAgIHZhciBjb2RlU3RyID0gX3RoaXM0Lmpzb25FZGl0b3IuZ2V0VmFsdWUoKTsKCiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29kZVN0cl0sIHsKICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnCiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9maWxlU2F2ZXIuc2F2ZUFzKShibG9iLCB2YWx1ZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy4kZW1pdCgncmVmcmVzaCcsIEpTT04ucGFyc2UodGhpcy5qc29uRWRpdG9yLmdldFZhbHVlKCkpKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgbWVzc2FnZTogJ0pTT07moLzlvI/plJnor6/vvIzor7fmo4Dmn6UnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["JsonDrawer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-drawer v-bind=\"$attrs\" v-on=\"$listeners\" @opened=\"onOpen\" @close=\"onClose\">\r\n      <div class=\"action-bar\" :style=\"{'text-align': 'left'}\">\r\n        <span class=\"bar-btn\" @click=\"refresh\">\r\n          <i class=\"el-icon-refresh\" />\r\n          {{$t('table.refresh')}}\r\n        </span>\r\n        <span ref=\"copyBtn\" class=\"bar-btn copy-json-btn\">\r\n          <i class=\"el-icon-document-copy\" />\r\n          {{$t('i18nView.copyJSON')}}\r\n        </span>\r\n        <span class=\"bar-btn\" @click=\"exportJsonFile\">\r\n          <i class=\"el-icon-download\" />\r\n          {{$t('i18nView.exportJSONFile')}}\r\n        </span>\r\n        <span class=\"bar-btn delete-btn\" @click=\"$emit('update:visible', false)\">\r\n          <i class=\"el-icon-circle-close\" />\r\n          {{$t('table.close')}}\r\n        </span>\r\n      </div>\r\n      <div id=\"editorJson\" class=\"json-editor\" />\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { beautifierConf } from '@/utils/draggable/index'\r\nimport ClipboardJS from 'clipboard'\r\nimport { saveAs } from 'file-saver'\r\n\r\nimport loadBeautifier from '@/utils/draggable/loadBeautifier'\r\n\r\nimport * as monaco from 'monaco-editor';\r\nlet beautifier\r\n\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    jsonStr: {\r\n      type: String,\r\n      required: true,\r\n      beautifier: null,\r\n      jsonEditor: null\r\n    }\r\n  },\r\n  data() {\r\n    return {}\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {},\r\n  mounted() {\r\n    window.addEventListener('keydown', this.preventDefaultSave)\r\n    const clipboard = new ClipboardJS('.copy-json-btn', {\r\n      text: trigger => {\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '代码已复制到剪切板，可粘贴。',\r\n          type: 'success'\r\n        })\r\n        return this.beautifierJson\r\n      }\r\n    })\r\n    clipboard.on('error', e => {\r\n      this.$message.error('代码复制失败')\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('keydown', this.preventDefaultSave)\r\n  },\r\n  methods: {\r\n    preventDefaultSave(e) {\r\n      if (e.key === 's' && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault()\r\n      }\r\n    },\r\n    onOpen() {\r\n      loadBeautifier(btf => {\r\n        beautifier = btf\r\n        this.beautifierJson = beautifier.js(this.jsonStr, beautifierConf.js)\r\n         this.setEditorValue('editorJson', this.beautifierJson)\r\n      })\r\n    },\r\n    onClose() {},\r\n    setEditorValue(id, codeStr) {\r\n      if (this.jsonEditor) {\r\n        this.jsonEditor.setValue(codeStr)\r\n      } else {\r\n        this.jsonEditor = monaco.editor.create(document.getElementById(id), {\r\n          value: codeStr,\r\n          theme: 'vs-dark',\r\n          language: 'json',\r\n          automaticLayout: true\r\n        })\r\n        // ctrl + s 刷新\r\n        this.jsonEditor.onKeyDown(e => {\r\n          if (e.keyCode === 49 && (e.metaKey || e.ctrlKey)) {\r\n            this.refresh()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    exportJsonFile() {\r\n      this.$prompt('文件名:', '导出文件', {\r\n        inputValue: `${+new Date()}.json`,\r\n        closeOnClickModal: false,\r\n        inputPlaceholder: '请输入文件名'\r\n      }).then(({ value }) => {\r\n        if (!value) value = `${+new Date()}.json`\r\n        const codeStr = this.jsonEditor.getValue()\r\n        const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\r\n        saveAs(blob, value)\r\n      })\r\n    },\r\n    refresh() {\r\n      try {\r\n        this.$emit('refresh', JSON.parse(this.jsonEditor.getValue()))\r\n      } catch (error) {\r\n        this.$notify({\r\n          title: '错误',\r\n          message: 'JSON格式错误，请检查',\r\n          type: 'error'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/styles/mixin.scss';\r\n\r\n::v-deep .el-drawer__header {\r\n  display: none;\r\n}\r\n@include action-bar;\r\n\r\n.json-editor{\r\n  height: calc(100vh - 33px);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/product-package-definition/pp-operation-def/pp-acceptance-def/accpt-page-def/draggable"}]}