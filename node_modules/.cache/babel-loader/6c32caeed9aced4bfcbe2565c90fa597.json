{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\system\\role\\role_authority\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\views\\system\\role\\role_authority\\index.vue","mtime":1609847107195},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1706753190941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi84NjE4MS9EZXNrdG9wL3Byb2R1Y3QvcGNzLXByb2R1Y3Qtdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkQ6Lzg2MTgxL0Rlc2t0b3AvcHJvZHVjdC9wY3MtcHJvZHVjdC12aWV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiKSk7Cgp2YXIgX2F1dGhvcml0eSA9IHJlcXVpcmUoIkAvYXBpL3N5c3RlbS9hdXRob3JpdHkiKTsKCnZhciBfcm9sZSA9IHJlcXVpcmUoIkAvYXBpL3N5c3RlbS9yb2xlIik7Cgp2YXIgX3JvbGVfYXV0aG9yaXR5ID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL3JvbGVfYXV0aG9yaXR5Iik7Cgp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKCnZhciBfdGFnc1ZpZXcgPSByZXF1aXJlKCJAL3V0aWxzL3RhZ3NWaWV3Iik7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogJ2F1dGhTZXR0aW5nJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZUlkOiB1bmRlZmluZWQsCiAgICAgIGZsYWc6IHVuZGVmaW5lZCwKICAgICAgcm9sZURhdGE6IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHJvbGVDb2RlOiB1bmRlZmluZWQsCiAgICAgICAgcm9sZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgICB0ZW5hbnRJZDogdW5kZWZpbmVkLAogICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICB1cGRhdGVUaW1lOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgYWN0aXZlTmFtZTogJ2FsbG90TWVudScsCiAgICAgIC8vIOmAiemhueWNoQogICAgICAvLyDmoLzlvI/ljJblkI7nq6/kvKDov4fmnaXnmoTmlbDmja7kuLp2dWXmoJHmiYDpnIDlj4LmlbAKICAgICAgZGVmYXVsdFByb3BzTWVudTogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgfSwKICAgICAgZGVmYXVsdENoZWNrZWRLZXlzOiBbXSwKICAgICAgZGVmYXVsdENoZWNrZWRMZWFmS2V5czogW10sCiAgICAgIG1lbnVMaXN0OiBbXSwKICAgICAgbWVudVRyZWU6IFtdCiAgICB9OwogIH0sCiAgYmVmb3JlUm91dGVMZWF2ZTogZnVuY3Rpb24gYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgewogICAgKDAsIF90YWdzVmlldy5jbG9zZVZpc2l0VGFnKSgpOwogICAgbmV4dCgpOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMucm9sZUlkID0gdGhpcy5nZXRSb3V0ZVBhcmFtKCdyb2xlSWQnKTsKICAgIHRoaXMuZmxhZyA9IHRoaXMuZ2V0Um91dGVQYXJhbSgnZmxhZycpOwoKICAgIGlmICh0aGlzLnJvbGVJZCkgewogICAgICB0aGlzLmdldFJvbGVEYXRhKCk7CiAgICAgIHRoaXMuZ2V0TWVudVRhYkRhdGEoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgICgwLCBfdGFnc1ZpZXcuY2xvc2VWaXNpdFRhZykoKTsKCiAgICAgIGlmICh0aGlzLmZsYWcgPT09ICcxJykgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICfop5LoibLnrqHnkIYnCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ+enn+aIty3op5LoibLnrqHnkIYnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRSb2xlRGF0YTogZnVuY3Rpb24gZ2V0Um9sZURhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAoMCwgX3JvbGUuZmluZFJvbGVCeUlkKSh0aGlzLnJvbGVJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMucm9sZURhdGEgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6KeS6Imy5LiO6I+c5Y2V5YWz6IGUCiAgICBnZXRNZW51VGFiRGF0YTogZnVuY3Rpb24gZ2V0TWVudVRhYkRhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVzZXIgPSAoMCwgX2F1dGguZ2V0VXNlcikoKTsKICAgICAgKDAsIF9hdXRob3JpdHkudHJlZU1lbnUpKHsKICAgICAgICAncm9sZUNvZGVzJzogdXNlci5yb2xlQ29kZXMKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIubWVudUxpc3QgPSByZXNwb25zZS5kYXRhLm1lbnVMaXN0OwogICAgICAgIF90aGlzMi5tZW51VHJlZSA9IHJlc3BvbnNlLmRhdGEubWVudVRyZWU7CiAgICAgICAgKDAsIF9yb2xlX2F1dGhvcml0eS5nZXRSb2xlQXV0aG9yaXR5QnlSb2xlSWQpKF90aGlzMi5yb2xlSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgX3RoaXMyLmRlZmF1bHRDaGVja2VkS2V5cyA9IF90aGlzMi5fLm1hcChyZXNwb25zZS5kYXRhLCAnYXV0aElkJyk7CiAgICAgICAgICB9IC8vIOiOt+WPluaJgOaciem7mOiupOmAieS4reeahOWPtuWtkOiKgueCue+8jOagueaNruWPtuWtkOiKgueCuea4suafk+S4iue6pwoKCiAgICAgICAgICB2YXIga2V5cyA9IFtdOwoKICAgICAgICAgIGlmIChfdGhpczIuZGVmYXVsdENoZWNrZWRLZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9ICgwLCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcjIuZGVmYXVsdCkoX3RoaXMyLmRlZmF1bHRDaGVja2VkS2V5cyksCiAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciBjaGVja2VkS2V5ID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBfdGhpczIuJHJlZnMubWVudVRyZWUuZ2V0Tm9kZShjaGVja2VkS2V5KTsgLy8g5Yik5patIG5vZGUg5piv5ZCm5a2Y5Zyo5piv5Li65LqG6Ziy5q2i5omL5Yqo5pS55Yqo5pWw5o2u5bqT5ZCO6aG16Z2i5oql6ZSZ55qE5oOF5Ya1CgoKICAgICAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKG5vZGUuZGF0YS5pZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIuZGVmYXVsdENoZWNrZWRMZWFmS2V5cyA9IGtleXM7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVSb2xlQXV0aG9yaXR5OiBmdW5jdGlvbiBzYXZlUm9sZUF1dGhvcml0eSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgc2VsZWN0ZWRJZHMgPSB0aGlzLiRyZWZzLm1lbnVUcmVlLmdldENoZWNrZWRLZXlzKCkuY29uY2F0KHRoaXMuJHJlZnMubWVudVRyZWUuZ2V0SGFsZkNoZWNrZWRLZXlzKCkpOwogICAgICB0aGlzLnJvbGVJZCA9IHRoaXMucm9sZUlkICsgJyc7CiAgICAgICgwLCBfcm9sZV9hdXRob3JpdHkuc2F2ZVJvbGVBdXRob3JpdHkpKHsKICAgICAgICAncm9sZUlkJzogdGhpcy5yb2xlSWQsCiAgICAgICAgJ21lbnVJZHMnOiBzZWxlY3RlZElkcy5qb2luKCcsJykKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpczMubm90aWZ5U3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLm5vdGlmeUVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div style=\"display: block;height: 10px\"></div>\r\n    <span style=\"font-size: 25px;font-weight: bold;\">{{ $t('login.role') + '：' + roleData.roleName }}</span>\r\n    <div style=\"display: block;height: 20px\"></div>\r\n    <el-tabs v-model=\"activeName\">\r\n      <el-tab-pane :label=\"$t('roleAuthorityView.assignMenu')\" name=\"allotMenu\">\r\n        <el-button  size=\"small\" @click=\"saveRoleAuthority\" style=\"margin-bottom: 20px;margin-left: 20px;\" type=\"primary\"\r\n                   v-auth=\"'sys-role:authSetting:save'\" v-show=\"menuTree.length > 0\">{{ $t('roleAuthorityView.save') }}\r\n        </el-button>\r\n        <el-button  size=\"small\" @click=\"back\" style=\"margin-bottom: 20px;margin-left: 20px;\" type=\"primary\"\r\n                   v-show=\"menuTree.length > 0\">{{ $t('i18nView.return') }}\r\n        </el-button>\r\n        <!-- check-strictly：在显示复选框的情况下，是否严格的遵循父子不互相关联的做法，默认为 false -->\r\n        <el-tree\r\n          :check-strictly=\"false\"\r\n          :data=\"menuTree\"\r\n          :default-checked-keys=\"defaultCheckedLeafKeys\"\r\n          :props=\"defaultPropsMenu\"\r\n          highlight-current\r\n          node-key=\"id\"\r\n          ref=\"menuTree\"\r\n          show-checkbox>\r\n        </el-tree>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {treeMenu} from '@/api/system/authority'\r\nimport {findRoleById} from \"@/api/system/role\"\r\nimport {getRoleAuthorityByRoleId, saveRoleAuthority} from \"@/api/system/role_authority\"\r\nimport {getUser} from \"@/utils/auth\"\r\nimport {closeVisitTag} from \"@/utils/tagsView\"\r\n\r\nexport default {\r\n  name: 'authSetting',\r\n  data() {\r\n    return {\r\n      roleId: undefined,\r\n      flag: undefined,\r\n      roleData: {\r\n        id: undefined,\r\n        roleCode: undefined,\r\n        roleName: undefined,\r\n        tenantId: undefined,\r\n        createTime: undefined,\r\n        updateTime: undefined\r\n      },\r\n      activeName: 'allotMenu', // 选项卡\r\n      // 格式化后端传过来的数据为vue树所需参数\r\n      defaultPropsMenu: {\r\n        children: 'children',\r\n        label: 'name'\r\n      },\r\n      defaultCheckedKeys: [],\r\n      defaultCheckedLeafKeys: [],\r\n      menuList: [],\r\n      menuTree: []\r\n    }\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    closeVisitTag()\r\n    next()\r\n  },\r\n  created() {\r\n    this.roleId = this.getRouteParam('roleId')\r\n    this.flag = this.getRouteParam('flag')\r\n    if (this.roleId) {\r\n      this.getRoleData()\r\n      this.getMenuTabData()\r\n    }\r\n  },\r\n  methods: {\r\n    back() {\r\n      closeVisitTag()\r\n      if (this.flag === '1'){\r\n        this.$router.push({name: '角色管理'})\r\n      }else{\r\n        this.$router.push({name: '租户-角色管理'})\r\n      }\r\n    },\r\n    getRoleData() {\r\n      findRoleById(this.roleId).then(res => {\r\n        this.roleData = res.data\r\n      })\r\n    },\r\n    // 角色与菜单关联\r\n    getMenuTabData() {\r\n      const user = getUser()\r\n      treeMenu({'roleCodes': user.roleCodes}).then(response => {\r\n        this.menuList = response.data.menuList\r\n        this.menuTree = response.data.menuTree\r\n        getRoleAuthorityByRoleId(this.roleId).then(response => {\r\n          if (response.data && response.data.length > 0) {\r\n            this.defaultCheckedKeys = this._.map(response.data, 'authId')\r\n          }\r\n          // 获取所有默认选中的叶子节点，根据叶子节点渲染上级\r\n          let keys = []\r\n          if (this.defaultCheckedKeys.length > 0) {\r\n            for (const checkedKey of this.defaultCheckedKeys) {\r\n              let node = this.$refs.menuTree.getNode(checkedKey)\r\n              // 判断 node 是否存在是为了防止手动改动数据库后页面报错的情况\r\n              if (node && node.childNodes.length === 0) {\r\n                keys.push(node.data.id)\r\n              }\r\n            }\r\n          }\r\n          this.defaultCheckedLeafKeys = keys\r\n        })\r\n      })\r\n    },\r\n    saveRoleAuthority() {\r\n      const selectedIds = this.$refs.menuTree.getCheckedKeys().concat(this.$refs.menuTree.getHalfCheckedKeys())\r\n      this.roleId = this.roleId + '';\r\n      saveRoleAuthority({'roleId': this.roleId, 'menuIds': selectedIds.join(',')}).then(response => {\r\n        if (response.code === 200) {\r\n          this.notifySuccess(response.message)\r\n        } else {\r\n          this.notifyError(response.message)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/system/role/role_authority"}]}