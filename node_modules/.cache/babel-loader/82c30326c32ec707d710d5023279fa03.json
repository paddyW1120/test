{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\utils\\draggable\\loadScript.js","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\utils\\draggable\\loadScript.js","mtime":1609847106497},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js","mtime":1706753187898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmxvYWRTY3JpcHRRdWV1ZSA9IGxvYWRTY3JpcHRRdWV1ZTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgY2FsbGJhY2tzID0ge307Ci8qKg0KICog5Yqg6L295LiA5Liq6L+c56iL6ISa5pysDQogKiBAcGFyYW0ge1N0cmluZ30gc3JjIOS4gOS4qui/nOeoi+iEmuacrA0KICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sg5Zue6LCDDQogKi8KCmZ1bmN0aW9uIGxvYWRTY3JpcHQoc3JjLCBjYWxsYmFjaykgewogIHZhciBleGlzdGluZ1NjcmlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNyYyk7CgogIHZhciBjYiA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9OwoKICBpZiAoIWV4aXN0aW5nU2NyaXB0KSB7CiAgICBjYWxsYmFja3Nbc3JjXSA9IFtdOwogICAgdmFyICRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICRzY3JpcHQuc3JjID0gc3JjOwogICAgJHNjcmlwdC5pZCA9IHNyYzsKICAgICRzY3JpcHQuYXN5bmMgPSAxOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCgkc2NyaXB0KTsKICAgIHZhciBvbkVuZCA9ICdvbmxvYWQnIGluICRzY3JpcHQgPyBzdGRPbkVuZC5iaW5kKCRzY3JpcHQpIDogaWVPbkVuZC5iaW5kKCRzY3JpcHQpOwogICAgb25FbmQoJHNjcmlwdCk7CiAgfQoKICBjYWxsYmFja3Nbc3JjXS5wdXNoKGNiKTsKCiAgZnVuY3Rpb24gc3RkT25FbmQoc2NyaXB0KSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLm9uZXJyb3IgPSBfdGhpcy5vbmxvYWQgPSBudWxsOwogICAgICBjYWxsYmFja3Nbc3JjXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbShudWxsLCBzY3JpcHQpOwogICAgICB9KTsKICAgICAgZGVsZXRlIGNhbGxiYWNrc1tzcmNdOwogICAgfTsKCiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMub25lcnJvciA9IF90aGlzLm9ubG9hZCA9IG51bGw7CiAgICAgIGNiKG5ldyBFcnJvcigiRmFpbGVkIHRvIGxvYWQgIi5jb25jYXQoc3JjKSksIHNjcmlwdCk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaWVPbkVuZChzY3JpcHQpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfdGhpczIucmVhZHlTdGF0ZSAhPT0gJ2NvbXBsZXRlJyAmJiBfdGhpczIucmVhZHlTdGF0ZSAhPT0gJ2xvYWRlZCcpIHJldHVybjsKICAgICAgX3RoaXMyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIGNhbGxiYWNrc1tzcmNdLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtKG51bGwsIHNjcmlwdCk7CiAgICAgIH0pOwogICAgICBkZWxldGUgY2FsbGJhY2tzW3NyY107CiAgICB9OwogIH0KfQovKioNCiAqIOmhuuW6j+WKoOi9veS4gOe7hOi/nOeoi+iEmuacrA0KICogQHBhcmFtIHtBcnJheX0gbGlzdCDkuIDnu4Tov5znqIvohJrmnKwNCiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIOWbnuiwgw0KICovCgoKZnVuY3Rpb24gbG9hZFNjcmlwdFF1ZXVlKGxpc3QsIGNiKSB7CiAgdmFyIGZpcnN0ID0gbGlzdC5zaGlmdCgpOwogIGxpc3QubGVuZ3RoID8gbG9hZFNjcmlwdChmaXJzdCwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGxvYWRTY3JpcHRRdWV1ZShsaXN0LCBjYik7CiAgfSkgOiBsb2FkU2NyaXB0KGZpcnN0LCBjYik7Cn0KCnZhciBfZGVmYXVsdCA9IGxvYWRTY3JpcHQ7CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["D:/86181/Desktop/product/pcs-product-view/src/utils/draggable/loadScript.js"],"names":["callbacks","loadScript","src","callback","existingScript","document","getElementById","cb","$script","createElement","id","async","body","appendChild","onEnd","stdOnEnd","bind","ieOnEnd","push","script","onload","onerror","forEach","item","Error","onreadystatechange","readyState","loadScriptQueue","list","first","shift","length"],"mappings":";;;;;;;;;;;AAAA,IAAMA,SAAS,GAAG,EAAlB;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,QAAzB,EAAmC;AACjC,MAAMC,cAAc,GAAGC,QAAQ,CAACC,cAAT,CAAwBJ,GAAxB,CAAvB;;AACA,MAAMK,EAAE,GAAGJ,QAAQ,IAAK,YAAM,CAAE,CAAhC;;AACA,MAAI,CAACC,cAAL,EAAqB;AACnBJ,IAAAA,SAAS,CAACE,GAAD,CAAT,GAAiB,EAAjB;AACA,QAAMM,OAAO,GAAGH,QAAQ,CAACI,aAAT,CAAuB,QAAvB,CAAhB;AACAD,IAAAA,OAAO,CAACN,GAAR,GAAcA,GAAd;AACAM,IAAAA,OAAO,CAACE,EAAR,GAAaR,GAAb;AACAM,IAAAA,OAAO,CAACG,KAAR,GAAgB,CAAhB;AACAN,IAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BL,OAA1B;AACA,QAAMM,KAAK,GAAG,YAAYN,OAAZ,GAAsBO,QAAQ,CAACC,IAAT,CAAcR,OAAd,CAAtB,GAA+CS,OAAO,CAACD,IAAR,CAAaR,OAAb,CAA7D;AACAM,IAAAA,KAAK,CAACN,OAAD,CAAL;AACD;;AAEDR,EAAAA,SAAS,CAACE,GAAD,CAAT,CAAegB,IAAf,CAAoBX,EAApB;;AAEA,WAASQ,QAAT,CAAkBI,MAAlB,EAA0B;AAAA;;AACxBA,IAAAA,MAAM,CAACC,MAAP,GAAgB,YAAM;AACpB,MAAA,KAAI,CAACC,OAAL,GAAe,KAAI,CAACD,MAAL,GAAc,IAA7B;AACApB,MAAAA,SAAS,CAACE,GAAD,CAAT,CAAeoB,OAAf,CAAuB,UAAAC,IAAI,EAAI;AAC7BA,QAAAA,IAAI,CAAC,IAAD,EAAOJ,MAAP,CAAJ;AACD,OAFD;AAGA,aAAOnB,SAAS,CAACE,GAAD,CAAhB;AACD,KAND;;AAOAiB,IAAAA,MAAM,CAACE,OAAP,GAAiB,YAAM;AACrB,MAAA,KAAI,CAACA,OAAL,GAAe,KAAI,CAACD,MAAL,GAAc,IAA7B;AACAb,MAAAA,EAAE,CAAC,IAAIiB,KAAJ,0BAA4BtB,GAA5B,EAAD,EAAqCiB,MAArC,CAAF;AACD,KAHD;AAID;;AAED,WAASF,OAAT,CAAiBE,MAAjB,EAAyB;AAAA;;AACvBA,IAAAA,MAAM,CAACM,kBAAP,GAA4B,YAAM;AAChC,UAAI,MAAI,CAACC,UAAL,KAAoB,UAApB,IAAkC,MAAI,CAACA,UAAL,KAAoB,QAA1D,EAAoE;AACpE,MAAA,MAAI,CAACD,kBAAL,GAA0B,IAA1B;AACAzB,MAAAA,SAAS,CAACE,GAAD,CAAT,CAAeoB,OAAf,CAAuB,UAAAC,IAAI,EAAI;AAC7BA,QAAAA,IAAI,CAAC,IAAD,EAAOJ,MAAP,CAAJ;AACD,OAFD;AAGA,aAAOnB,SAAS,CAACE,GAAD,CAAhB;AACD,KAPD;AAQD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACO,SAASyB,eAAT,CAAyBC,IAAzB,EAA+BrB,EAA/B,EAAmC;AACxC,MAAMsB,KAAK,GAAGD,IAAI,CAACE,KAAL,EAAd;AACAF,EAAAA,IAAI,CAACG,MAAL,GAAc9B,UAAU,CAAC4B,KAAD,EAAQ;AAAA,WAAMF,eAAe,CAACC,IAAD,EAAOrB,EAAP,CAArB;AAAA,GAAR,CAAxB,GAAmEN,UAAU,CAAC4B,KAAD,EAAQtB,EAAR,CAA7E;AACD;;eAEcN,U","sourcesContent":["const callbacks = {}\r\n\r\n/**\r\n * 加载一个远程脚本\r\n * @param {String} src 一个远程脚本\r\n * @param {Function} callback 回调\r\n */\r\nfunction loadScript(src, callback) {\r\n  const existingScript = document.getElementById(src)\r\n  const cb = callback || (() => {})\r\n  if (!existingScript) {\r\n    callbacks[src] = []\r\n    const $script = document.createElement('script')\r\n    $script.src = src\r\n    $script.id = src\r\n    $script.async = 1\r\n    document.body.appendChild($script)\r\n    const onEnd = 'onload' in $script ? stdOnEnd.bind($script) : ieOnEnd.bind($script)\r\n    onEnd($script)\r\n  }\r\n\r\n  callbacks[src].push(cb)\r\n\r\n  function stdOnEnd(script) {\r\n    script.onload = () => {\r\n      this.onerror = this.onload = null\r\n      callbacks[src].forEach(item => {\r\n        item(null, script)\r\n      })\r\n      delete callbacks[src]\r\n    }\r\n    script.onerror = () => {\r\n      this.onerror = this.onload = null\r\n      cb(new Error(`Failed to load ${src}`), script)\r\n    }\r\n  }\r\n\r\n  function ieOnEnd(script) {\r\n    script.onreadystatechange = () => {\r\n      if (this.readyState !== 'complete' && this.readyState !== 'loaded') return\r\n      this.onreadystatechange = null\r\n      callbacks[src].forEach(item => {\r\n        item(null, script)\r\n      })\r\n      delete callbacks[src]\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 顺序加载一组远程脚本\r\n * @param {Array} list 一组远程脚本\r\n * @param {Function} cb 回调\r\n */\r\nexport function loadScriptQueue(list, cb) {\r\n  const first = list.shift()\r\n  list.length ? loadScript(first, () => loadScriptQueue(list, cb)) : loadScript(first, cb)\r\n}\r\n\r\nexport default loadScript\r\n"]}]}