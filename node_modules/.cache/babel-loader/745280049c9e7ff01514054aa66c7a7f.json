{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\store\\modules\\ruleMessage.js","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\store\\modules\\ruleMessage.js","mtime":1609847106480},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js","mtime":1706753187898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9ydWxlTWVzc2FnZUluZm9Cb20gPSByZXF1aXJlKCJAL2FwaS9pYnJtcy9ydWxlTWVzc2FnZUluZm9Cb20iKTsKCnZhciBzdGF0ZSA9IHsKICBydWxlTWVzc2FnZXM6IHt9IC8vIGxkY29kZQoKfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfUlVMRU1FU1NBR0VTOiBmdW5jdGlvbiBTRVRfUlVMRU1FU1NBR0VTKHN0YXRlLCBydWxlTWVzc2FnZSkgewogICAgc3RhdGUucnVsZU1lc3NhZ2VzID0gcnVsZU1lc3NhZ2U7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvL+iOt+WPluinhOWImeWkmuivreiogOS/oeaBrwogIHN0b3JhZ2VSdWxlTWVzc2FnZTogZnVuY3Rpb24gc3RvcmFnZVJ1bGVNZXNzYWdlKF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAoMCwgX3J1bGVNZXNzYWdlSW5mb0JvbS5nZXRSdWxlTWVzc2FnZSkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8v5bCB6KOF5aSa6K+t6KiA5pawICDlpoIgemhfYm9tX0JPTUFnZW50ICDnu5PmnoTlr7nosaEKICAgICAgICB2YXIgcnVsZU1lc3NhZ2VJbmZvQm9tTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdmFyIHJ1bGVNZXNzYWdlSW5mb0JvbXMgPSB7fTsKICAgICAgICBydWxlTWVzc2FnZUluZm9Cb21MaXN0LmZvckVhY2goZnVuY3Rpb24gKHJ1bGVNZXNzYWdlSW5mb0JvbSwgcnVsZU1lc3NhZ2VJbmZvQm9tSW5kZXgpIHsKICAgICAgICAgIHZhciBrZXlJZCA9IHJ1bGVNZXNzYWdlSW5mb0JvbS5rZXlJZDsKICAgICAgICAgIHZhciBtc2dUeXBlID0gcnVsZU1lc3NhZ2VJbmZvQm9tLm1zZ1R5cGU7CiAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBydWxlTWVzc2FnZUluZm9Cb20ubGFuZ3VhZ2U7CiAgICAgICAgICB2YXIgbXNnID0gcnVsZU1lc3NhZ2VJbmZvQm9tLm1zZzsKICAgICAgICAgIHJ1bGVNZXNzYWdlSW5mb0JvbXNbKGxhbmd1YWdlICsgJ18nICsgbXNnVHlwZSArICdfJyArIGtleUlkKS50b1VwcGVyQ2FzZSgpXSA9IG1zZzsKICAgICAgICB9KTsKICAgICAgICBjb21taXQoJ1NFVF9SVUxFTUVTU0FHRVMnLCBydWxlTWVzc2FnZUluZm9Cb21zKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICB1cGRhdGVSdWxlTWVzc2FnZTogZnVuY3Rpb24gdXBkYXRlUnVsZU1lc3NhZ2UoX3JlZjIsIHBhcmFtKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICB2YXIga2V5SWQgPSBwYXJhbS5rZXk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAoMCwgX3J1bGVNZXNzYWdlSW5mb0JvbS5maW5kUnVsZU1lc3NhZ2UpKGtleUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8v5LiO5Y6f5YWI57yT5a2Y5Lit55qE5pWw5o2u6L+b6KGM5a+55q+UIGtleUlkIOS4gOiHtOWImeabtOaWsAogICAgICAgIHZhciBydWxlTWVzc2FnZUluZm9Cb21MaXN0ID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgaWYgKHJ1bGVNZXNzYWdlSW5mb0JvbUxpc3QgJiYgcnVsZU1lc3NhZ2VJbmZvQm9tTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBydWxlTWVzc2FnZUluZm9Cb21MaXN0LmZvckVhY2goZnVuY3Rpb24gKHJ1bGVNZXNzYWdlSW5mb0JvbSwgcnVsZU1lc3NhZ2VJbmZvQm9tSW5kZXgpIHsKICAgICAgICAgICAgdmFyIGtleUlkID0gcnVsZU1lc3NhZ2VJbmZvQm9tLmtleUlkOwogICAgICAgICAgICB2YXIgbXNnVHlwZSA9IHJ1bGVNZXNzYWdlSW5mb0JvbS5tc2dUeXBlOwogICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBydWxlTWVzc2FnZUluZm9Cb20ubGFuZ3VhZ2U7CiAgICAgICAgICAgIHZhciBtc2cgPSBydWxlTWVzc2FnZUluZm9Cb20ubXNnOyAvL+e8k+WtmOS4reWtmOWcqOWImeS/ruaUuSDmiJbmlrDlop4KCiAgICAgICAgICAgIHN0YXRlLnJ1bGVNZXNzYWdlc1sobGFuZ3VhZ2UgKyAnXycgKyBtc2dUeXBlICsgJ18nICsga2V5SWQpLnRvVXBwZXJDYXNlKCldID0gbXNnOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb21taXQoJ1NFVF9SVUxFTUVTU0FHRVMnLCBzdGF0ZS5ydWxlTWVzc2FnZXMpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGRlbGV0ZVJ1bGVNZXNzYWdlOiBmdW5jdGlvbiBkZWxldGVSdWxlTWVzc2FnZShfcmVmMywgcGFyYW0pIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIGRlYnVnZ2VyOwogICAgdmFyIGtleUlkID0gcGFyYW0ua2V5OwogICAgdmFyIG1zZ1R5cGUgPSBwYXJhbS50eXBlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLy/mnKrmn6Xor6LliLDmlbDmja4gIOWImeivpeaVsOaNruW3suWIoOmZpCAg5Lik56eN6K+t6KiA57G75Z6LIOWIoOmZpOe8k+WtmOS4reeahOaVsOaNrgogICAgICBkZWxldGUgc3RhdGUucnVsZU1lc3NhZ2VzWygnRU5fJyArIG1zZ1R5cGUgKyAnXycgKyBrZXlJZCkudG9VcHBlckNhc2UoKV07CiAgICAgIGRlbGV0ZSBzdGF0ZS5ydWxlTWVzc2FnZXNbKCdaSF8nICsgbXNnVHlwZSArICdfJyArIGtleUlkKS50b1VwcGVyQ2FzZSgpXTsKICAgICAgY29tbWl0KCdTRVRfUlVMRU1FU1NBR0VTJywgc3RhdGUucnVsZU1lc3NhZ2VzKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9Owp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["D:/86181/Desktop/product/pcs-product-view/src/store/modules/ruleMessage.js"],"names":["state","ruleMessages","mutations","SET_RULEMESSAGES","ruleMessage","actions","storageRuleMessage","commit","Promise","resolve","reject","then","response","ruleMessageInfoBomList","data","ruleMessageInfoBoms","forEach","ruleMessageInfoBom","ruleMessageInfoBomIndex","keyId","msgType","language","msg","toUpperCase","catch","error","updateRuleMessage","param","key","length","deleteRuleMessage","type","namespaced"],"mappings":"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","sourcesContent":["import { getRuleMessage,findRuleMessage } from '@/api/ibrms/ruleMessageInfoBom'\r\n\r\nconst state = {\r\n  ruleMessages: {}, // ldcode\r\n}\r\n\r\nconst mutations = {\r\n  SET_RULEMESSAGES: (state, ruleMessage) => {\r\n    state.ruleMessages = ruleMessage\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  //获取规则多语言信息\r\n  storageRuleMessage({ commit,state}) {\r\n    return new Promise((resolve, reject) => {\r\n      getRuleMessage().then(response => {\r\n        //封装多语言新  如 zh_bom_BOMAgent  结构对象\r\n        var  ruleMessageInfoBomList = response.data;\r\n        var  ruleMessageInfoBoms={};\r\n        ruleMessageInfoBomList.forEach((ruleMessageInfoBom, ruleMessageInfoBomIndex) => {\r\n          var keyId = ruleMessageInfoBom.keyId;\r\n          var msgType = ruleMessageInfoBom.msgType;\r\n          var language = ruleMessageInfoBom.language;\r\n          var msg = ruleMessageInfoBom.msg;\r\n          ruleMessageInfoBoms[(language+'_'+msgType+'_'+keyId).toUpperCase()]=msg;\r\n        })\r\n        commit('SET_RULEMESSAGES',ruleMessageInfoBoms)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  updateRuleMessage({ commit,state},param) {\r\n    var keyId =param.key;\r\n    return new Promise((resolve, reject) => {\r\n      findRuleMessage(keyId).then(response => {\r\n        //与原先缓存中的数据进行对比 keyId 一致则更新\r\n        var  ruleMessageInfoBomList = response.data;\r\n        if(ruleMessageInfoBomList && ruleMessageInfoBomList.length > 0 ){\r\n            ruleMessageInfoBomList.forEach((ruleMessageInfoBom, ruleMessageInfoBomIndex) => {\r\n              var keyId = ruleMessageInfoBom.keyId;\r\n              var msgType = ruleMessageInfoBom.msgType;\r\n              var language = ruleMessageInfoBom.language;\r\n              var msg = ruleMessageInfoBom.msg;\r\n              //缓存中存在则修改 或新增\r\n              state.ruleMessages[(language+'_'+msgType+'_'+keyId).toUpperCase()]=msg;\r\n            })\r\n        }\r\n        commit('SET_RULEMESSAGES',state.ruleMessages)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  deleteRuleMessage({ commit,state},param) {\r\n    debugger\r\n    var keyId =param.key;\r\n    var msgType =param.type;\r\n    return new Promise((resolve, reject) => {\r\n        //未查询到数据  则该数据已删除  两种语言类型 删除缓存中的数据\r\n        delete state.ruleMessages[('EN_'+msgType+'_'+keyId).toUpperCase()];\r\n        delete state.ruleMessages[('ZH_'+msgType+'_'+keyId).toUpperCase()];\r\n        commit('SET_RULEMESSAGES',state.ruleMessages)\r\n        resolve()\r\n    })\r\n  }\r\n\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"]}]}