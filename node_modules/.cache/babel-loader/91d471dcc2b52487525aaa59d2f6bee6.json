{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\api\\wecom-login\\userauth.js","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\api\\wecom-login\\userauth.js","mtime":1609847106220},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js","mtime":1706753187898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi84NjE4MS9EZXNrdG9wL3Byb2R1Y3QvcGNzLXByb2R1Y3Qtdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwoKdmFyIF9kZWZhdWx0ID0gewogIGdldFVybFBhcmFtOiBmdW5jdGlvbiBnZXRVcmxQYXJhbShuYW1lKSB7CiAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnKF58JiknICsgbmFtZSArICc9KFteJl0qKSgmfCQpJyk7CiAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7CiAgICBjb25zb2xlLmxvZyhyKTsKICAgIGlmIChyICE9IG51bGwpIHJldHVybiB1bmVzY2FwZShyWzJdKTsKICAgIHJldHVybiBudWxsOwogIH0sCiAgZ2V0Q29kZTogZnVuY3Rpb24gZ2V0Q29kZSgpIHsKICAgIC8vIOmdnumdmem7mOaOiOadg++8jOesrOS4gOasoeacieW8ueahhgogICAgLy8gY29uc3QgY29kZSA9ICIyOTU3MSI7CiAgICB2YXIgY29kZSA9IHRoaXMuZ2V0VXJsUGFyYW0oImNvZGUiKTsgLy8g5oiq5Y+W6Lev5b6E5Lit55qEY29kZe+8jOWmguaenOayoeacieWwseWOu+W+ruS/oeaOiOadg++8jOWmguaenOW3sue7j+iOt+WPluWIsOS6huWwseebtOaOpeS8oGNvZGXnu5nlkI7lj7Dojrflj5ZvcGVuSWQKCiAgICB2YXIgbG9jYWwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgIHZhciBBUFBJRCA9ICJ3dzYxODQ1ZDZiMmU3YTRhZDIiOyAvLyDkvIHkuJrlvq7kv6EKICAgIC8vIGFsZXJ0KCdjb2RlJytjb2RlKTsKCiAgICB0aGlzLmNvZGUgPSBjb2RlOwoKICAgIGlmIChjb2RlID09IG51bGwgfHwgY29kZSA9PSAiIikgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwczovL29wZW4ud2VpeGluLnFxLmNvbS9jb25uZWN0L29hdXRoMi9hdXRob3JpemU/YXBwaWQ9IiArIEFQUElEICsgIiZyZWRpcmVjdF91cmk9IiArIGVuY29kZVVSSUNvbXBvbmVudChsb2NhbCkgKyAiJnJlc3BvbnNlX3R5cGU9Y29kZSZzY29wZT1zbnNhcGlfYmFzZSZzdGF0ZT1TVEFURSN3ZWNoYXRfcmVkaXJlY3QiOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0T3BlbklkKGNvZGUsIGxvY2FsKTsgLy/miopjb2Rl5Lyg57uZ5ZCO5Y+w6I635Y+W55So5oi35L+h5oGvCiAgICB9CiAgfSwKICBnZXRPcGVuSWQ6IGZ1bmN0aW9uIGdldE9wZW5JZChjb2RlKSB7CiAgICAvLyDpgJrov4djb2Rl6I635Y+WCiAgICBjb25zb2xlLmxvZyhjb2RlKTsgLy/mqKHmi5/kvIHkuJrlvq7kv6HnmbvlvZUKICAgIC8vIGxldCBwYXJhbSA9IHsKICAgIC8vICAgd2VDb21lSWQ6IGNvZGUKICAgIC8vIH07CiAgICAvLyByZXR1cm4gd2VDb21Mb2dpbih7J3BhcmFtcyc6IHBhcmFtfSk7CgogICAgcmV0dXJuIF9heGlvcy5kZWZhdWx0LmdldCgiaHR0cDovL21lc3NhZ2VwdXNoLnNpbm9zb2Z0d2VpeGluLmNvbS9ld2VjaGF0b2F1dGgvdXNlcnMvIi5jb25jYXQoY29kZSwgIi84NjNlZGZhMDM0NDQxMWViYWVhNjgzNDNhMzllNDU5NSIpLCB7fSk7CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["D:/86181/Desktop/product/pcs-product-view/src/api/wecom-login/userauth.js"],"names":["getUrlParam","name","reg","RegExp","r","window","location","search","substr","match","console","log","unescape","getCode","code","local","href","APPID","encodeURIComponent","getOpenId","axios","get"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;eAGe;AACbA,EAAAA,WADa,uBACDC,IADC,EACK;AAChB,QAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAW,UAAUF,IAAV,GAAiB,eAA5B,CAAV;AACA,QAAIG,CAAC,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,MAAvB,CAA8B,CAA9B,EAAiCC,KAAjC,CAAuCP,GAAvC,CAAR;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAYP,CAAZ;AACA,QAAIA,CAAC,IAAI,IAAT,EAAe,OAAOQ,QAAQ,CAACR,CAAC,CAAC,CAAD,CAAF,CAAf;AACf,WAAO,IAAP;AACD,GAPY;AAQbS,EAAAA,OARa,qBAQH;AACR;AACA;AACA,QAAMC,IAAI,GAAG,KAAKd,WAAL,CAAiB,MAAjB,CAAb,CAHQ,CAG+B;;AACvC,QAAIe,KAAK,GAAGV,MAAM,CAACC,QAAP,CAAgBU,IAA5B;AACA,QAAMC,KAAK,GAAG,oBAAd,CALQ,CAK4B;AACrC;;AACA,SAAKH,IAAL,GAAYA,IAAZ;;AACC,QAAIA,IAAI,IAAI,IAAR,IAAgBA,IAAI,IAAI,EAA5B,EAAgC;AAC9BT,MAAAA,MAAM,CAACC,QAAP,CAAgBU,IAAhB,GACE,+DACAC,KADA,GAEA,gBAFA,GAGAC,kBAAkB,CAACH,KAAD,CAHlB,GAIA,mEALF;AAMD,KAPD,MAOO;AACL,aAAO,KAAKI,SAAL,CAAeL,IAAf,EAAqBC,KAArB,CAAP,CADK,CAC+B;AACrC;AACF,GA1BY;AA2BbI,EAAAA,SA3Ba,qBA2BHL,IA3BG,EA2BG;AACd;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ,EAFc,CAGd;AACA;AACA;AACA;AACA;;AACA,WAAOM,eAAMC,GAAN,oEAAsEP,IAAtE,wCAA+G,EAA/G,CAAP;AAED;AArCY,C","sourcesContent":["import axios from \"axios\";\r\n\r\n\r\nexport default {\r\n  getUrlParam(name) {\r\n    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');\r\n    var r = window.location.search.substr(1).match(reg);\r\n    console.log(r);\r\n    if (r != null) return unescape(r[2]);\r\n    return null;\r\n  },\r\n  getCode() {\r\n    // 非静默授权，第一次有弹框\r\n    // const code = \"29571\";\r\n    const code = this.getUrlParam(\"code\"); // 截取路径中的code，如果没有就去微信授权，如果已经获取到了就直接传code给后台获取openId\r\n    let local = window.location.href;\r\n    const APPID = \"ww61845d6b2e7a4ad2\"; // 企业微信\r\n   // alert('code'+code);\r\n   this.code = code;\r\n    if (code == null || code == \"\") {\r\n      window.location.href =\r\n        \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=\" +\r\n        APPID +\r\n        \"&redirect_uri=\" +\r\n        encodeURIComponent(local) +\r\n        \"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect\";\r\n    } else {\r\n      return this.getOpenId(code, local); //把code传给后台获取用户信息\r\n    }\r\n  },\r\n  getOpenId(code) {\r\n    // 通过code获取\r\n    console.log(code);\r\n    //模拟企业微信登录\r\n    // let param = {\r\n    //   weComeId: code\r\n    // };\r\n    // return weComLogin({'params': param});\r\n    return axios.get(`http://messagepush.sinosoftweixin.com/ewechatoauth/users/${code}/863edfa0344411ebaea68343a39e4595`, {})\r\n\r\n  }\r\n}\r\n"]}]}