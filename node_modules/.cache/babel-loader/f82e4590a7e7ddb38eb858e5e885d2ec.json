{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\utils\\request.js","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\utils\\request.js","mtime":1609847106501},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js","mtime":1706753187898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi84NjE4MS9EZXNrdG9wL3Byb2R1Y3QvcGNzLXByb2R1Y3Qtdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwoKdmFyIF9lbGVtZW50VWkgPSByZXF1aXJlKCJlbGVtZW50LXVpIik7Cgp2YXIgX3N0b3JlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3N0b3JlIikpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgX2VuY3J5cHQgPSByZXF1aXJlKCJAL2FwaS9saWIvZW5jcnlwdCIpOwoKdmFyIF9sYW5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2xhbmciKSk7CgovLyBjcmVhdGUgYW4gYXhpb3MgaW5zdGFuY2UKdmFyIGJhc2VfdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSTsKCnZhciBzZXJ2aWNlID0gX2F4aW9zLmRlZmF1bHQuY3JlYXRlKHsKICBiYXNlVVJMOiBiYXNlX3VybCwKICAvLyB1cmwgPSBiYXNlIHVybCArIHJlcXVlc3QgdXJsCiAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLCAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKICB0aW1lb3V0OiAxMjAwMDAgLy8gcmVxdWVzdCB0aW1lb3V0Cgp9KTsKCnZhciBsb2FkaW5nSW5zdGFuY2U7CnZhciBhY3RpdmVSZXF1ZXN0Q291bnQgPSAwOyAvLyByZXF1ZXN0IGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gZG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKICBjb25maWcuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7IC8v6K+35rGC5Y+C5pWw5Yqg5a+GCgogIHNldEdsb2JhbFBhcmFtKGNvbmZpZyk7CgogIGlmICghKDAsIF9hdXRoLmdldERlYnVnKSgpKSB7CiAgICBjb25maWcuZGF0YSA9ICgwLCBfZW5jcnlwdC5FbmNyeXB0KShjb25maWcuZGF0YSk7CiAgfQoKICBpZiAoX3N0b3JlLmRlZmF1bHQuZ2V0dGVycy50b2tlbikgewogICAgLy8gbGV0IGVhY2ggcmVxdWVzdCBjYXJyeSB0b2tlbgogICAgLy8gWydYLVRva2VuJ10gaXMgYSBjdXN0b20gaGVhZGVycyBrZXkKICAgIC8vIHBsZWFzZSBtb2RpZnkgaXQgYWNjb3JkaW5nIHRvIHRoZSBhY3R1YWwgc2l0dWF0aW9uCiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbkJlYXJlciddID0gKDAsIF9hdXRoLmdldFRva2VuKSgpOwogIH0KCiAgbG9hZGluZ0luc3RhbmNlID0gX2VsZW1lbnRVaS5Mb2FkaW5nLnNlcnZpY2UoewogICAgbG9jazogdHJ1ZSwKICAgIHRleHQ6IF9sYW5nLmRlZmF1bHQudCgncmVxdWVzdC5sb2FkaW5nJyksCiAgICBzcGlubmVyOiAnZG90cy1sb2FkZXInLAogICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScKICB9KTsKICBhY3RpdmVSZXF1ZXN0Q291bnQrKzsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBkbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgYWN0aXZlUmVxdWVzdENvdW50LS07CgogIGlmIChhY3RpdmVSZXF1ZXN0Q291bnQgPT09IDApIHsKICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCi8qKg0KICogSWYgeW91IHdhbnQgdG8gZ2V0IGh0dHAgaW5mb3JtYXRpb24gc3VjaCBhcyBoZWFkZXJzIG9yIHN0YXR1cw0KICogUGxlYXNlIHJldHVybiAgcmVzcG9uc2UgPT4gcmVzcG9uc2UNCiAqLwoKLyoqDQogKiBEZXRlcm1pbmUgdGhlIHJlcXVlc3Qgc3RhdHVzIGJ5IGN1c3RvbSBjb2RlDQogKiBIZXJlIGlzIGp1c3QgYW4gZXhhbXBsZQ0KICogWW91IGNhbiBhbHNvIGp1ZGdlIHRoZSBzdGF0dXMgYnkgSFRUUCBTdGF0dXMgQ29kZQ0KICovCmZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwogIGFjdGl2ZVJlcXVlc3RDb3VudC0tOwoKICBpZiAoYWN0aXZlUmVxdWVzdENvdW50ID09PSAwKSB7CiAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKTsKICB9IC8vIGlmIHRoZSBjdXN0b20gY29kZSBpcyBub3QgMjAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCgoKICBpZiAocmVzcG9uc2UucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09ICdhcnJheWJ1ZmZlcicgfHwgcmVzcG9uc2UucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09ICdibG9iJykgewogICAgLy/mmK/kuIvovb3mlofku7bor7fmsYIKICAgIHJldHVybiByZXM7CiAgfSAvL+ino+Wvhui/lOWbnue7k+aenAoKCiAgaWYgKCEoMCwgX2F1dGguZ2V0RGVidWcpKCkpIHsKICAgIHJlcyA9ICgwLCBfZW5jcnlwdC5EZWNyeXB0KShyZXMpOwogIH0KCiAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHsKICAgICgwLCBfZWxlbWVudFVpLk1lc3NhZ2UpKHsKICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJywKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDMwMDAKICAgIH0pOyAvLyA1MDAwODogSWxsZWdhbCB0b2tlbjsgNTAwMTI6IE90aGVyIGNsaWVudHMgbG9nZ2VkIGluOyA1MDAxNDogVG9rZW4gZXhwaXJlZDsKCiAgICBpZiAocmVzLmNvZGUgPT09IDUwMDA4IHx8IHJlcy5jb2RlID09PSA1MDAxMiB8fCByZXMuY29kZSA9PT0gNTAwMTQpIHsKICAgICAgLy8gdG8gcmUtbG9naW4KICAgICAgX2VsZW1lbnRVaS5NZXNzYWdlQm94LmNvbmZpcm0oX2xhbmcuZGVmYXVsdC50KCdyZXF1ZXN0LnJlTG9naW5UaXAnKSwgX2xhbmcuZGVmYXVsdC50KCdyZXF1ZXN0LmNvbmZpcm1Mb2dvdXQnKSwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBfbGFuZy5kZWZhdWx0LnQoJ3JlcXVlc3QucmVMb2dpbicpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IF9sYW5nLmRlZmF1bHQudCgnY29uZmlybU1lc3NhZ2UuY2FuY2VsJyksCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF9zdG9yZS5kZWZhdWx0LmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJykpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgYWN0aXZlUmVxdWVzdENvdW50LS07CgogIGlmIChhY3RpdmVSZXF1ZXN0Q291bnQgPT09IDApIHsKICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwogIH0KCiAgY29uc29sZS5lcnJvcignZXJyJyArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIGlmIChlcnJvci5tZXNzYWdlID09PSAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSA0MDQnKSB7CiAgICAoMCwgX2VsZW1lbnRVaS5NZXNzYWdlKSh7CiAgICAgIG1lc3NhZ2U6IF9sYW5nLmRlZmF1bHQudCgncmVxdWVzdC5ub3RGb3VuZCcpLAogICAgICB0eXBlOiAnZXJyb3InLAogICAgICBkdXJhdGlvbjogMiAqIDEwMDAKICAgIH0pOwogIH0gZWxzZSB7CiAgICAoMCwgX2VsZW1lbnRVaS5NZXNzYWdlKSh7CiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiAyICogMTAwMAogICAgfSk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKCmZ1bmN0aW9uIHNldEdsb2JhbFBhcmFtKGNvbmZpZykgewogIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOwoKICBpZiAocGF0aCkgewogICAgdmFyIGRhdGEgPSAoMCwgX2F1dGguZ2V0SnNvbkRhdGEpKHBhdGgpOyAvL+S6p+WTgWlkCgogICAgaWYgKGRhdGEgJiYgZGF0YS5pZCkgewogICAgICBpZiAoY29uZmlnLmRhdGEpIHsKICAgICAgICBjb25maWcuZGF0YVsncGRQcm9jZXNzSWQnXSA9IGRhdGEucGRQcm9jZXNzSWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGNvbmZpZy5tZXRob2QgPT09ICdkZWxldGUnKSB7CiAgICAgICAgICBjb25maWdbJ2RhdGEnXSA9IHt9OwogICAgICAgICAgY29uZmlnLmRhdGFbJ3BkUHJvY2Vzc0lkJ10gPSBkYXRhLnBkUHJvY2Vzc0lkOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQoKdmFyIF9kZWZhdWx0ID0gc2VydmljZTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["D:/86181/Desktop/product/pcs-product-view/src/utils/request.js"],"names":["base_url","process","env","VUE_APP_BASE_API","service","axios","create","baseURL","timeout","loadingInstance","activeRequestCount","interceptors","request","use","config","headers","setGlobalParam","data","store","getters","token","Loading","lock","text","i18n","t","spinner","background","error","console","log","close","Promise","reject","response","res","responseType","code","message","type","duration","MessageBox","confirm","confirmButtonText","cancelButtonText","then","dispatch","location","reload","Error","path","window","pathname","id","pdProcessId","method"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport {Loading, Message, MessageBox} from 'element-ui'\r\nimport store from '@/store'\r\nimport {getDebug, getJsonData, getToken} from '@/utils/auth'\r\nimport {Decrypt, Encrypt} from '@/api/lib/encrypt'\r\n\r\nimport i18n from '@/lang'\r\n\r\n// create an axios instance\r\nconst base_url = process.env.VUE_APP_BASE_API\r\n\r\nconst service = axios.create({\r\n  baseURL: base_url, // url = base url + request url\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 120000 // request timeout\r\n})\r\n\r\nlet loadingInstance\r\nlet activeRequestCount = 0\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  config => {\r\n    // do something before request is sent\r\n    config.headers['Content-Type'] = 'application/json'\r\n    //请求参数加密\r\n    setGlobalParam(config)\r\n    if (!getDebug()) {\r\n      config.data = Encrypt(config.data)\r\n    }\r\n    if (store.getters.token) {\r\n      // let each request carry token\r\n      // ['X-Token'] is a custom headers key\r\n      // please modify it according to the actual situation\r\n      config.headers['AuthorizationBearer'] = getToken()\r\n    }\r\n    loadingInstance = Loading.service({\r\n      lock: true,\r\n      text: i18n.t('request.loading'),\r\n      spinner: 'dots-loader',\r\n      background: 'rgba(0, 0, 0, 0.7)'\r\n    })\r\n    activeRequestCount++\r\n\r\n    return config\r\n  },\r\n  error => {\r\n    // do something with request error\r\n    console.log(error) // for debug\r\n    activeRequestCount--\r\n    if (activeRequestCount === 0) {\r\n      loadingInstance.close()\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n   */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  response => {\r\n    let res = response.data\r\n    activeRequestCount--\r\n    if (activeRequestCount === 0) {\r\n      loadingInstance.close()\r\n    }\r\n    // if the custom code is not 200, it is judged as an error.\r\n    if (response.request.responseType === 'arraybuffer' || response.request.responseType === 'blob') {//是下载文件请求\r\n      return res\r\n    }\r\n    //解密返回结果\r\n    if (!getDebug()) {\r\n      res = Decrypt(res)\r\n    }\r\n    if (res.code !== 200) {\r\n      Message({\r\n        message: res.message || 'Error',\r\n        type: 'error',\r\n        duration: 3000\r\n      })\r\n\r\n      // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\r\n      if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\r\n        // to re-login\r\n        MessageBox.confirm(i18n.t('request.reLoginTip'), i18n.t('request.confirmLogout'), {\r\n          confirmButtonText: i18n.t('request.reLogin'),\r\n          cancelButtonText: i18n.t('confirmMessage.cancel'),\r\n          type: 'warning'\r\n        }).then(() => {\r\n          store.dispatch('user/logout').then(() => {\r\n            location.reload()\r\n          })\r\n        })\r\n      }\r\n      return Promise.reject(new Error(res.message || 'Error'))\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    activeRequestCount--\r\n    if (activeRequestCount === 0) {\r\n      loadingInstance.close()\r\n    }\r\n    console.error('err' + error) // for debug\r\n    if (error.message === 'Request failed with status code 404') {\r\n      Message({\r\n        message: i18n.t('request.notFound'),\r\n        type: 'error',\r\n        duration: 2 * 1000\r\n      })\r\n    } else {\r\n      Message({\r\n        message: error.message,\r\n        type: 'error',\r\n        duration: 2 * 1000\r\n      })\r\n    }\r\n\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nfunction setGlobalParam(config) {\r\n  let path = window.location.pathname\r\n  if (path) {\r\n    let data = getJsonData(path)\r\n    //产品id\r\n    if (data && data.id) {\r\n      if (config.data) {\r\n        config.data['pdProcessId'] = data.pdProcessId\r\n      } else {\r\n        if (config.method === 'delete') {\r\n          config['data'] = {}\r\n          config.data['pdProcessId'] = data.pdProcessId\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default service\r\n"]}]}