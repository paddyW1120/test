{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\directive\\permission\\button\\index.js","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\directive\\permission\\button\\index.js","mtime":1609847106369},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js","mtime":1706753187898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi84NjE4MS9EZXNrdG9wL3Byb2R1Y3QvcGNzLXByb2R1Y3Qtdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpOwoKdmFyIF92dWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInZ1ZSIpKTsKCnZhciBfc3RvcmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvc3RvcmUiKSk7CgovKiog6Ieq5a6a5LmJ5p2D6ZmQ5oyH5LukIDogdi1hdXRoICoqLwpfdnVlLmRlZmF1bHQuZGlyZWN0aXZlKCdhdXRoJywgewogIGNvbXBvbmVudFVwZGF0ZWQ6IGZ1bmN0aW9uIGNvbXBvbmVudFVwZGF0ZWQoZWwsIGJpbmRpbmcpIHsKICAgIHZhciB0YWduYW1lID0gZWwudGFnTmFtZTsKCiAgICBpZiAodGFnbmFtZSA9PT0gJ0RJVicgJiYgZWwuY2xhc3NOYW1lID09PSAnZWwtdGFiLXBhbmUnKSB7CiAgICAgIC8vdGFi6aG1CiAgICAgIGlmICghX3Z1ZS5kZWZhdWx0LnByb3RvdHlwZS4kX2hhcyhiaW5kaW5nLnZhbHVlKSkgewogICAgICAgIHZhciBpbmRleCA9IGVsLmlkOwogICAgICAgIGluZGV4ID0gaW5kZXguc3BsaXQoJy0nKVsxXTsKICAgICAgICB2YXIgY2hpbGRyZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLScgKyBpbmRleCk7CiAgICAgICAgY2hpbGRyZW4uY2xhc3NMaXN0LmFkZCgnaXMtZGlzYWJsZWQnKTsKICAgICAgICBjaGlsZHJlbi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICAgIGNoaWxkcmVuLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JzsKICAgICAgICBjaGlsZHJlbi5zdHlsZS5jb2xvciA9ICcjQzBDNENDJzsKICAgICAgfQogICAgfQogIH0sCiAgYmluZDogZnVuY3Rpb24gYmluZChlbCwgYmluZGluZykgewogICAgLy8g6I635Y+W5oyJ6ZKu5p2D6ZmQCiAgICBpZiAoIV92dWUuZGVmYXVsdC5wcm90b3R5cGUuJF9oYXMoYmluZGluZy52YWx1ZSkpIHsKICAgICAgdmFyIHRhZ25hbWUgPSBlbC50YWdOYW1lOwoKICAgICAgaWYgKHRhZ25hbWUgPT09ICdTUEFOJykgewogICAgICAgIC8v6Ieq5a6a5LmJ55qE5Yig6Zmk5oyJ6ZKuCiAgICAgICAgZWwubGFzdENoaWxkLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICBlbC5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZCgnaXMtZGlzYWJsZWQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL+aMiemSrgogICAgICAgIGVsLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy1kaXNhYmxlZCcpOwogICAgICB9CiAgICB9CiAgfQp9KTsgLy8g5p2D6ZmQ5qOA5p+l5pa55rOVCgoKX3Z1ZS5kZWZhdWx0LnByb3RvdHlwZS4kX2hhcyA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIC8vIGV4YW1wbGUKICAvLyBhcnJheSA6ICB2LWhhcz0iWyd1c2VyTGlzdDphZGQnLCd1c2VyTGlzdDplZGl0J10iCiAgLy8gc2luZ2xlIDogdi1oYXM9Iid1c2VyTGlzdDphZGQnIgogIGlmICghdmFsdWUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IC8vIOiOt+WPlueUqOaIt+aMiemSruadg+mZkCAtIOS7juWQjuWPsOaLv+aVsOaNrgoKCiAgdmFyIGR5bmFtaWNCdXR0b25zID0gX3N0b3JlLmRlZmF1bHQuZ2V0dGVycy5idXR0b25zOwoKICBpZiAoZHluYW1pY0J1dHRvbnMgPT09IHVuZGVmaW5lZCB8fCBkeW5hbWljQnV0dG9ucyA9PT0gbnVsbCB8fCBkeW5hbWljQnV0dG9ucy5sZW5ndGggPCAxKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7CiAgICByZXR1cm4gZHluYW1pY0J1dHRvbnMuc29tZShmdW5jdGlvbiAoYnV0dG9uKSB7CiAgICAgIHJldHVybiB2YWx1ZS5pbmNsdWRlcyhidXR0b24ucmVzb3VyY2VzKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gZHluYW1pY0J1dHRvbnMuc29tZShmdW5jdGlvbiAoYnV0dG9uKSB7CiAgICAgIHJldHVybiBidXR0b24ucmVzb3VyY2VzID09PSB2YWx1ZTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["D:/86181/Desktop/product/pcs-product-view/src/directive/permission/button/index.js"],"names":["Vue","directive","componentUpdated","el","binding","tagname","tagName","className","prototype","$_has","value","index","id","split","children","document","getElementById","classList","add","style","pointerEvents","cursor","color","bind","lastChild","disabled","dynamicButtons","store","getters","buttons","undefined","length","Array","some","button","includes","resources"],"mappings":";;;;;;;;;;;;;;AAAA;;AACA;;AAEA;AAEAA,aAAIC,SAAJ,CAAc,MAAd,EAAsB;AACpBC,EAAAA,gBAAgB,EAAE,0BAAUC,EAAV,EAAcC,OAAd,EAAuB;AACvC,QAAIC,OAAO,GAAGF,EAAE,CAACG,OAAjB;;AACA,QAAID,OAAO,KAAK,KAAZ,IAAqBF,EAAE,CAACI,SAAH,KAAiB,aAA1C,EAAyD;AAAE;AACzD,UAAI,CAACP,aAAIQ,SAAJ,CAAcC,KAAd,CAAoBL,OAAO,CAACM,KAA5B,CAAL,EAAyC;AACvC,YAAIC,KAAK,GAAGR,EAAE,CAACS,EAAf;AACAD,QAAAA,KAAK,GAAGA,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAR;AACA,YAAIC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,SAASL,KAAjC,CAAf;AACAG,QAAAA,QAAQ,CAACG,SAAT,CAAmBC,GAAnB,CAAuB,aAAvB;AACAJ,QAAAA,QAAQ,CAACK,KAAT,CAAeC,aAAf,GAA+B,MAA/B;AACAN,QAAAA,QAAQ,CAACK,KAAT,CAAeE,MAAf,GAAwB,SAAxB;AACAP,QAAAA,QAAQ,CAACK,KAAT,CAAeG,KAAf,GAAuB,SAAvB;AACD;AACF;AACF,GAdmB;AAepBC,EAAAA,IAAI,EAAE,cAAUpB,EAAV,EAAcC,OAAd,EAAuB;AAC3B;AACA,QAAI,CAACJ,aAAIQ,SAAJ,CAAcC,KAAd,CAAoBL,OAAO,CAACM,KAA5B,CAAL,EAAyC;AACvC,UAAIL,OAAO,GAAGF,EAAE,CAACG,OAAjB;;AACA,UAAID,OAAO,KAAK,MAAhB,EAAwB;AAAE;AACxBF,QAAAA,EAAE,CAACqB,SAAH,CAAaC,QAAb,GAAwB,IAAxB;AACAtB,QAAAA,EAAE,CAACqB,SAAH,CAAaP,SAAb,CAAuBC,GAAvB,CAA2B,aAA3B;AACD,OAHD,MAGO;AAAG;AACRf,QAAAA,EAAE,CAACsB,QAAH,GAAc,IAAd;AACAtB,QAAAA,EAAE,CAACc,SAAH,CAAaC,GAAb,CAAiB,aAAjB;AACD;AACF;AACF;AA3BmB,CAAtB,E,CA8BA;;;AACAlB,aAAIQ,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,KAAV,EAAiB;AACrC;AACA;AACA;AACA,MAAI,CAACA,KAAL,EAAY;AACV,WAAO,KAAP;AACD,GANoC,CAOrC;;;AACA,MAAMgB,cAAc,GAAGC,eAAMC,OAAN,CAAcC,OAArC;;AACA,MAAIH,cAAc,KAAKI,SAAnB,IAAgCJ,cAAc,KAAK,IAAnD,IAA2DA,cAAc,CAACK,MAAf,GAAwB,CAAvF,EAA0F;AACxF,WAAO,KAAP;AACD;;AACD,MAAIrB,KAAK,YAAYsB,KAAjB,IAA0BtB,KAAK,CAACqB,MAAN,GAAe,CAA7C,EAAgD;AAC9C,WAAOL,cAAc,CAACO,IAAf,CAAoB,UAAAC,MAAM,EAAI;AACnC,aAAOxB,KAAK,CAACyB,QAAN,CAAeD,MAAM,CAACE,SAAtB,CAAP;AACD,KAFM,CAAP;AAGD,GAJD,MAIO;AACL,WAAOV,cAAc,CAACO,IAAf,CAAoB,UAAAC,MAAM,EAAI;AACnC,aAAOA,MAAM,CAACE,SAAP,KAAqB1B,KAA5B;AACD,KAFM,CAAP;AAGD;AACF,CArBD","sourcesContent":["import Vue from 'vue'\r\nimport store from '@/store'\r\n\r\n/** 自定义权限指令 : v-auth **/\r\n\r\nVue.directive('auth', {\r\n  componentUpdated: function (el, binding) {\r\n    let tagname = el.tagName\r\n    if (tagname === 'DIV' && el.className === 'el-tab-pane') { //tab页\r\n      if (!Vue.prototype.$_has(binding.value)) {\r\n        let index = el.id\r\n        index = index.split('-')[1]\r\n        let children = document.getElementById('tab-' + index)\r\n        children.classList.add('is-disabled')\r\n        children.style.pointerEvents = 'none'\r\n        children.style.cursor = 'default'\r\n        children.style.color = '#C0C4CC'\r\n      }\r\n    }\r\n  },\r\n  bind: function (el, binding) {\r\n    // 获取按钮权限\r\n    if (!Vue.prototype.$_has(binding.value)) {\r\n      let tagname = el.tagName\r\n      if (tagname === 'SPAN') { //自定义的删除按钮\r\n        el.lastChild.disabled = true\r\n        el.lastChild.classList.add('is-disabled')\r\n      } else {  //按钮\r\n        el.disabled = true\r\n        el.classList.add('is-disabled')\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// 权限检查方法\r\nVue.prototype.$_has = function (value) {\r\n  // example\r\n  // array :  v-has=\"['userList:add','userList:edit']\"\r\n  // single : v-has=\"'userList:add'\"\r\n  if (!value) {\r\n    return false\r\n  }\r\n  // 获取用户按钮权限 - 从后台拿数据\r\n  const dynamicButtons = store.getters.buttons\r\n  if (dynamicButtons === undefined || dynamicButtons === null || dynamicButtons.length < 1) {\r\n    return false\r\n  }\r\n  if (value instanceof Array && value.length > 0) {\r\n    return dynamicButtons.some(button => {\r\n      return value.includes(button.resources)\r\n    })\r\n  } else {\r\n    return dynamicButtons.some(button => {\r\n      return button.resources === value\r\n    })\r\n  }\r\n}\r\n"]}]}