{"remainingRequest":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js!D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\86181\\Desktop\\product\\pcs-product-view\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\src\\store\\modules\\user.js","mtime":1609847106481},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706753187435},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1706753193796},{"path":"D:\\86181\\Desktop\\product\\pcs-product-view\\node_modules\\eslint-loader\\index.js","mtime":1706753187898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX3VzZXIgPSByZXF1aXJlKCJAL2FwaS9zeXN0ZW0vdXNlciIpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgc3RhdGUgPSB7CiAgdG9rZW46ICgwLCBfYXV0aC5nZXRUb2tlbikoKSwKICB1c2VyY29kZTogJycsCiAgdXNlcm5hbWU6ICcnLAogIHJvbGVjb2RlczogJycsCiAgYXZhdGFyOiAnJywKICB0ZW5hbnRJZDogJycsCiAgdGVuYW50Q29kZTogJycsCiAgdGVuYW50TmFtZTogJycsCiAgcm9sZU5hbWVzOiAnJywKICBzeXN0ZW1WZXJzaW9uOiAnJywKICBtZW51czogW10sCiAgLy8g6I+c5Y2V5p2D6ZmQCiAgYnV0dG9uczogW10gLy8g5oyJ6ZKu5p2D6ZmQCgp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUudXNlcm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX1VTRVJDT0RFOiBmdW5jdGlvbiBTRVRfVVNFUkNPREUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLnVzZXJjb2RlID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1RFTkFOVElEOiBmdW5jdGlvbiBTRVRfVEVOQU5USUQoc3RhdGUsIHRlbmFudElkKSB7CiAgICBzdGF0ZS50ZW5hbnRJZCA9IHRlbmFudElkOwogIH0sCiAgU0VUX1RFTkFOVENPREU6IGZ1bmN0aW9uIFNFVF9URU5BTlRDT0RFKHN0YXRlLCB0ZW5hbnRDb2RlKSB7CiAgICBzdGF0ZS50ZW5hbnRDb2RlID0gdGVuYW50Q29kZTsKICB9LAogIFNFVF9ST0xFQ09ERVM6IGZ1bmN0aW9uIFNFVF9ST0xFQ09ERVMoc3RhdGUsIHJvbGVzKSB7CiAgICBzdGF0ZS5yb2xlY29kZXMgPSByb2xlczsKICB9LAogIFNFVF9ST0xFTkFNRVM6IGZ1bmN0aW9uIFNFVF9ST0xFTkFNRVMoc3RhdGUsIHJvbGVzKSB7CiAgICBzdGF0ZS5yb2xlTmFtZXMgPSByb2xlczsKICB9LAogIFNFVF9URU5BTlROQU1FOiBmdW5jdGlvbiBTRVRfVEVOQU5UTkFNRShzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnRlbmFudE5hbWUgPSByb2xlczsKICB9LAogIFNFVF9TWVNURU1WRVJTSU9OOiBmdW5jdGlvbiBTRVRfU1lTVEVNVkVSU0lPTihzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnN5c3RlbVZlcnNpb24gPSByb2xlczsKICB9LAogIFNFVF9NRU5VUzogZnVuY3Rpb24gU0VUX01FTlVTKHN0YXRlLCBtZW51cykgewogICAgc3RhdGUubWVudXMgPSBtZW51czsKICB9LAogIC8vIOaMiemSrue6p+adg+mZkOeuoeaOpyAtIOKRoeaWsOWiniBtdXRhdGlvbnMg5pON5L2cIGJ1dHRvbgogIFNFVF9CVVRUT05TOiBmdW5jdGlvbiBTRVRfQlVUVE9OUyhzdGF0ZSwgYnV0dG9ucykgewogICAgc3RhdGUuYnV0dG9ucyA9IGJ1dHRvbnM7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDnmbvlvZUKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQsCiAgICAgICAgdGVuYW50SWQgPSB1c2VySW5mby50ZW5hbnRJZCwKICAgICAgICBfdXNlckluZm8kd2VDb21GbGFnID0gdXNlckluZm8ud2VDb21GbGFnLAogICAgICAgIHdlQ29tRmxhZyA9IF91c2VySW5mbyR3ZUNvbUZsYWcgPT09IHZvaWQgMCA/ICcwJyA6IF91c2VySW5mbyR3ZUNvbUZsYWc7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAoMCwgX3VzZXIubG9naW4pKHsKICAgICAgICB1c2VyQ29kZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgIHB3ZDogcGFzc3dvcmQsCiAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkLAogICAgICAgIHdlQ29tRmxhZzogd2VDb21GbGFnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgZGF0YS50b2tlbik7CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIGRhdGEudXNlck5hbWUpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJDT0RFJywgZGF0YS51c2VyQ29kZSk7CiAgICAgICAgY29tbWl0KCdTRVRfVEVOQU5USUQnLCBkYXRhLnRlbmFudElkKTsKICAgICAgICBjb21taXQoJ1NFVF9URU5BTlROQU1FJywgZGF0YS50ZW5hbnROYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9ST0xFTkFNRVMnLCBkYXRhLnJvbGVOYW1lcyk7CiAgICAgICAgY29tbWl0KCdTRVRfU1lTVEVNVkVSU0lPTicsIGRhdGEuc3lzdGVtVmVyc2lvbik7CiAgICAgICAgY29tbWl0KCdTRVRfVEVOQU5UQ09ERScsIGRhdGEudGVuYW50Q29kZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICB2YXIgYXZhdGFyID0gZGF0YS5hdmF0YXI7CgogICAgICAgIGlmICghYXZhdGFyKSB7CiAgICAgICAgICBhdmF0YXIgPSAnaHR0cHM6Ly93cGltZy53YWxsc3Rjbi5jb20vZjc3ODczOGMtZTRmOC00ODcwLWI2MzQtNTY3MDNiNGFjYWZlLmdpZic7CiAgICAgICAgfQoKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVDT0RFUycsIGRhdGEucm9sZUNvZGVzKTsKICAgICAgICB2YXIgYXV0aG9yaXR5cyA9IGRhdGEuYXV0aG9yaXR5czsKCiAgICAgICAgaWYgKGF1dGhvcml0eXMgJiYgYXV0aG9yaXR5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb21taXQoJ1NFVF9NRU5VUycsIGF1dGhvcml0eXMpOyAvLyBjb25zdCByb3V0ZXJzID0gZmlsdGVyQXN5bmNSb3V0ZXMoYXV0aG9yaXR5cykKICAgICAgICAgIC8vIOWCqOWtmOiPnOWNlQoKICAgICAgICAgICgwLCBfYXV0aC5zZXRNZW51cykoYXV0aG9yaXR5cyk7IC8vIHJvdXRlci5hZGRSb3V0ZXMocm91dGVycykKICAgICAgICB9CgogICAgICAgIGlmIChkYXRhLmJ1dHRvbnMgJiYgZGF0YS5idXR0b25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIOmAmui/h2NvbW1pdOS/neWtmOWIsOWFqOWxgOWPmOmHjwogICAgICAgICAgY29tbWl0KCdTRVRfQlVUVE9OUycsIGRhdGEuYnV0dG9ucyk7CiAgICAgICAgICAoMCwgX2F1dGguc2V0QnV0dG9ucykoZGF0YS5idXR0b25zKTsKICAgICAgICB9CgogICAgICAgICgwLCBfYXV0aC5zZXRUb2tlbikoZGF0YS50b2tlbik7CiAgICAgICAgKDAsIF9hdXRoLnNldFVzZXIpKGRhdGEpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOmAgOWHuueZu+W9lQogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICgwLCBfdXNlci5sb2dvdXQpKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDmuIXpmaR2dWV45Lit55qE5YaF5a65CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsICcnKTsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSQ09ERScsICcnKTsKICAgICAgICBjb21taXQoJ1NFVF9NRU5VUycsICcnKTsKICAgICAgICBjb21taXQoJ1NFVF9CVVRUT05TJywgJycpOwogICAgICAgIGNvbW1pdCgnU0VUX0FWQVRBUicsICcnKTsKICAgICAgICBjb21taXQoJ1NFVF9URU5BTlRJRCcsICcnKTsKICAgICAgICBjb21taXQoJ1NFVF9URU5BTlRDT0RFJywgJycpOwogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVDT0RFUycsICcnKTsKICAgICAgICBjb21taXQoJ3Blcm1pc3Npb24vU0VUX1JPVVRFUycsIFtdLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9hdXRoLmNsZWFyQWxsKSgpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKICAgICAgICAvLyB0byBmaXhlZCBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvMjQ4NQoKICAgICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0KfTsKdmFyIF9kZWZhdWx0ID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["D:/86181/Desktop/product/pcs-product-view/src/store/modules/user.js"],"names":["state","token","usercode","username","rolecodes","avatar","tenantId","tenantCode","tenantName","roleNames","systemVersion","menus","buttons","mutations","SET_TOKEN","SET_NAME","name","SET_USERCODE","SET_AVATAR","SET_TENANTID","SET_TENANTCODE","SET_ROLECODES","roles","SET_ROLENAMES","SET_TENANTNAME","SET_SYSTEMVERSION","SET_MENUS","SET_BUTTONS","actions","login","userInfo","commit","password","weComFlag","Promise","resolve","reject","userCode","trim","pwd","then","response","data","userName","toLowerCase","roleCodes","authoritys","length","catch","error","logout","dispatch","root","namespaced"],"mappings":"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","sourcesContent":["import {login, logout} from '@/api/system/user'\r\nimport {clearAll, getToken, setButtons, setMenus, setToken, setUser} from '@/utils/auth'\r\n\r\nconst state = {\r\n  token: getToken(),\r\n  usercode: '',\r\n  username: '',\r\n  rolecodes: '',\r\n  avatar: '',\r\n  tenantId: '',\r\n  tenantCode: '',\r\n  tenantName: '',\r\n  roleNames: '',\r\n  systemVersion: '',\r\n  menus: [], // 菜单权限\r\n  buttons: [] // 按钮权限\r\n}\r\n\r\nconst mutations = {\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_NAME: (state, name) => {\r\n    state.username = name\r\n  },\r\n  SET_USERCODE: (state, name) => {\r\n    state.usercode = name\r\n  },\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar = avatar\r\n  },\r\n  SET_TENANTID: (state, tenantId) => {\r\n    state.tenantId = tenantId\r\n  },\r\n  SET_TENANTCODE: (state, tenantCode) => {\r\n    state.tenantCode = tenantCode\r\n  },\r\n  SET_ROLECODES: (state, roles) => {\r\n    state.rolecodes = roles\r\n  },\r\n  SET_ROLENAMES: (state, roles) => {\r\n    state.roleNames = roles\r\n  },\r\n  SET_TENANTNAME: (state, roles) => {\r\n    state.tenantName = roles\r\n  },\r\n  SET_SYSTEMVERSION: (state, roles) => {\r\n    state.systemVersion = roles\r\n  },\r\n  SET_MENUS: (state, menus) => {\r\n    state.menus = menus\r\n  },\r\n  // 按钮级权限管控 - ②新增 mutations 操作 button\r\n  SET_BUTTONS: (state, buttons) => {\r\n    state.buttons = buttons\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 登录\r\n  login({commit}, userInfo) {\r\n    const {username, password, tenantId, weComFlag = '0'} = userInfo\r\n    return new Promise((resolve, reject) => {\r\n      login({userCode: username.trim(), pwd: password, tenantId: tenantId,weComFlag:weComFlag}).then(response => {\r\n        const {data} = response\r\n        commit('SET_TOKEN', data.token)\r\n        commit('SET_NAME', data.userName)\r\n        commit('SET_USERCODE', data.userCode)\r\n        commit('SET_TENANTID', data.tenantId)\r\n        commit('SET_TENANTNAME', data.tenantName)\r\n        commit('SET_ROLENAMES', data.roleNames)\r\n        commit('SET_SYSTEMVERSION', data.systemVersion)\r\n        commit('SET_TENANTCODE', data.tenantCode.toLowerCase())\r\n        let avatar = data.avatar\r\n        if (!avatar) {\r\n          avatar = 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif'\r\n        }\r\n        commit('SET_AVATAR', avatar)\r\n        commit('SET_ROLECODES', data.roleCodes)\r\n        const authoritys = data.authoritys\r\n        if (authoritys && authoritys.length > 0) {\r\n          commit('SET_MENUS', authoritys)\r\n          // const routers = filterAsyncRoutes(authoritys)\r\n          // 储存菜单\r\n          setMenus(authoritys)\r\n          // router.addRoutes(routers)\r\n        }\r\n        if (data.buttons && data.buttons.length > 0) {\r\n          // 通过commit保存到全局变量\r\n          commit('SET_BUTTONS', data.buttons)\r\n          setButtons(data.buttons)\r\n        }\r\n        setToken(data.token)\r\n        setUser(data)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  // 退出登录\r\n  logout({commit, state, dispatch}) {\r\n    return new Promise((resolve, reject) => {\r\n      logout(state.token).then(() => {\r\n        // 清除vuex中的内容\r\n        commit('SET_TOKEN', '')\r\n        commit('SET_NAME', '')\r\n        commit('SET_USERCODE', '')\r\n        commit('SET_MENUS', '')\r\n        commit('SET_BUTTONS', '')\r\n        commit('SET_AVATAR', '')\r\n        commit('SET_TENANTID', '')\r\n        commit('SET_TENANTCODE', '')\r\n        commit('SET_ROLECODES', '')\r\n        commit('permission/SET_ROUTES', [], {root: true})\r\n        clearAll()\r\n        // reset visited views and cached views\r\n        // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\r\n        dispatch('tagsView/delAllViews', null, {root: true})\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  }\r\n\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"]}]}